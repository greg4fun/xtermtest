/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./demo/client.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./addons/xterm-addon-attach/out/AttachAddon.js":
/*!******************************************************!*\
  !*** ./addons/xterm-addon-attach/out/AttachAddon.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
class AttachAddon {
    constructor(socket, options) {
        this._disposables = [];
        this._socket = socket;
        this._socket.binaryType = 'arraybuffer';
        this._bidirectional = (options && options.bidirectional === false) ? false : true;
        this._utf8 = !!(options && options.inputUtf8);
    }
    activate(terminal) {
        if (this._utf8) {
            this._disposables.push(addSocketListener(this._socket, 'message', (ev) => terminal.writeUtf8(new Uint8Array(ev.data))));
        }
        else {
            this._disposables.push(addSocketListener(this._socket, 'message', (ev) => terminal.write(ev.data)));
        }
        if (this._bidirectional) {
            this._disposables.push(terminal.onData(data => this._sendData(data)));
        }
        this._disposables.push(addSocketListener(this._socket, 'close', () => this.dispose()));
        this._disposables.push(addSocketListener(this._socket, 'error', () => this.dispose()));
    }
    dispose() {
        this._disposables.forEach(d => d.dispose());
    }
    _sendData(data) {
        if (this._socket.readyState !== 1) {
            return;
        }
        this._socket.send(data);
    }
}
exports.AttachAddon = AttachAddon;
function addSocketListener(socket, type, handler) {
    socket.addEventListener(type, handler);
    return {
        dispose: () => {
            if (!handler) {
                return;
            }
            socket.removeEventListener(type, handler);
        }
    };
}


/***/ }),

/***/ "./addons/xterm-addon-fit/out/FitAddon.js":
/*!************************************************!*\
  !*** ./addons/xterm-addon-fit/out/FitAddon.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FitAddon = (function () {
    function FitAddon() {
    }
    FitAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
    };
    FitAddon.prototype.dispose = function () { };
    FitAddon.prototype.fit = function () {
        var dims = this.proposeDimensions();
        if (!dims || !this._terminal) {
            return;
        }
        var core = this._terminal._core;
        if (this._terminal.rows !== dims.rows || this._terminal.cols !== dims.cols) {
            core._renderService.clear();
            this._terminal.resize(dims.cols, dims.rows);
        }
    };
    FitAddon.prototype.proposeDimensions = function () {
        if (!this._terminal) {
            return undefined;
        }
        if (!this._terminal.element.parentElement) {
            return undefined;
        }
        var core = this._terminal._core;
        var parentElementStyle = window.getComputedStyle(this._terminal.element.parentElement);
        var parentElementHeight = parseInt(parentElementStyle.getPropertyValue('height'));
        var parentElementWidth = Math.max(0, parseInt(parentElementStyle.getPropertyValue('width')));
        var elementStyle = window.getComputedStyle(this._terminal.element);
        var elementPadding = {
            top: parseInt(elementStyle.getPropertyValue('padding-top')),
            bottom: parseInt(elementStyle.getPropertyValue('padding-bottom')),
            right: parseInt(elementStyle.getPropertyValue('padding-right')),
            left: parseInt(elementStyle.getPropertyValue('padding-left'))
        };
        var elementPaddingVer = elementPadding.top + elementPadding.bottom;
        var elementPaddingHor = elementPadding.right + elementPadding.left;
        var availableHeight = parentElementHeight - elementPaddingVer;
        var availableWidth = parentElementWidth - elementPaddingHor - core.viewport.scrollBarWidth;
        var geometry = {
            cols: Math.floor(availableWidth / core._renderService.dimensions.actualCellWidth),
            rows: Math.floor(availableHeight / core._renderService.dimensions.actualCellHeight)
        };
        return geometry;
    };
    return FitAddon;
}());
exports.FitAddon = FitAddon;


/***/ }),

/***/ "./addons/xterm-addon-search/out/SearchAddon.js":
/*!******************************************************!*\
  !*** ./addons/xterm-addon-search/out/SearchAddon.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var NON_WORD_CHARACTERS = ' ~!@#$%^&*()+`-=[]{}|\;:"\',./<>?';
var LINES_CACHE_TIME_TO_LIVE = 15 * 1000;
var SearchAddon = (function () {
    function SearchAddon() {
        this._linesCacheTimeoutId = 0;
    }
    SearchAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
    };
    SearchAddon.prototype.dispose = function () { };
    SearchAddon.prototype.findNext = function (term, searchOptions) {
        if (!this._terminal) {
            throw new Error('Cannot use addon until it has been loaded');
        }
        if (!term || term.length === 0) {
            this._terminal.clearSelection();
            return false;
        }
        var startCol = 0;
        var startRow = 0;
        if (this._terminal.hasSelection()) {
            var incremental = searchOptions ? searchOptions.incremental : false;
            var currentSelection = this._terminal.getSelectionPosition();
            startRow = incremental ? currentSelection.startRow : currentSelection.endRow;
            startCol = incremental ? currentSelection.startColumn : currentSelection.endColumn;
        }
        this._initLinesCache();
        var result = this._findInLine(term, startRow, startCol, searchOptions);
        if (!result) {
            for (var y = startRow + 1; y < this._terminal.buffer.baseY + this._terminal.rows; y++) {
                result = this._findInLine(term, y, 0, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        if (!result && startRow !== 0) {
            for (var y = 0; y < startRow; y++) {
                result = this._findInLine(term, y, 0, searchOptions);
                if (result) {
                    break;
                }
            }
        }
        return this._selectResult(result);
    };
    SearchAddon.prototype.findPrevious = function (term, searchOptions) {
        if (!this._terminal) {
            throw new Error('Cannot use addon until it has been loaded');
        }
        if (!term || term.length === 0) {
            this._terminal.clearSelection();
            return false;
        }
        var isReverseSearch = true;
        var startRow = this._terminal.buffer.baseY + this._terminal.rows;
        var startCol = this._terminal.cols;
        var result = undefined;
        var incremental = searchOptions ? searchOptions.incremental : false;
        if (this._terminal.hasSelection()) {
            var currentSelection = this._terminal.getSelectionPosition();
            startRow = currentSelection.startRow;
            startCol = currentSelection.startColumn;
        }
        this._initLinesCache();
        if (incremental) {
            result = this._findInLine(term, startRow, startCol, searchOptions, false);
            if (!(result && result.row === startRow && result.col === startCol)) {
                result = this._findInLine(term, startRow, startCol, searchOptions, true);
            }
        }
        else {
            result = this._findInLine(term, startRow, startCol, searchOptions, isReverseSearch);
        }
        if (!result) {
            startCol = this._terminal.cols;
            for (var y = startRow - 1; y >= 0; y--) {
                result = this._findInLine(term, y, startCol, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
            }
        }
        if (!result && startRow !== (this._terminal.buffer.baseY + this._terminal.rows)) {
            for (var y = (this._terminal.buffer.baseY + this._terminal.rows); y > startRow; y--) {
                result = this._findInLine(term, y, startCol, searchOptions, isReverseSearch);
                if (result) {
                    break;
                }
            }
        }
        return this._selectResult(result);
    };
    SearchAddon.prototype._initLinesCache = function () {
        var _this = this;
        var terminal = this._terminal;
        if (!this._linesCache) {
            this._linesCache = new Array(terminal.buffer.length);
            this._cursorMoveListener = terminal.onCursorMove(function () { return _this._destroyLinesCache(); });
            this._resizeListener = terminal.onResize(function () { return _this._destroyLinesCache(); });
        }
        window.clearTimeout(this._linesCacheTimeoutId);
        this._linesCacheTimeoutId = window.setTimeout(function () { return _this._destroyLinesCache(); }, LINES_CACHE_TIME_TO_LIVE);
    };
    SearchAddon.prototype._destroyLinesCache = function () {
        this._linesCache = undefined;
        if (this._cursorMoveListener) {
            this._cursorMoveListener.dispose();
            this._cursorMoveListener = undefined;
        }
        if (this._resizeListener) {
            this._resizeListener.dispose();
            this._resizeListener = undefined;
        }
        if (this._linesCacheTimeoutId) {
            window.clearTimeout(this._linesCacheTimeoutId);
            this._linesCacheTimeoutId = 0;
        }
    };
    SearchAddon.prototype._isWholeWord = function (searchIndex, line, term) {
        return (((searchIndex === 0) || (NON_WORD_CHARACTERS.indexOf(line[searchIndex - 1]) !== -1)) &&
            (((searchIndex + term.length) === line.length) || (NON_WORD_CHARACTERS.indexOf(line[searchIndex + term.length]) !== -1)));
    };
    SearchAddon.prototype._findInLine = function (term, row, col, searchOptions, isReverseSearch) {
        if (searchOptions === void 0) { searchOptions = {}; }
        if (isReverseSearch === void 0) { isReverseSearch = false; }
        var terminal = this._terminal;
        var firstLine = terminal.buffer.getLine(row);
        if (firstLine && firstLine.isWrapped) {
            return;
        }
        var stringLine = this._linesCache ? this._linesCache[row] : void 0;
        if (stringLine === void 0) {
            stringLine = this._translateBufferLineToStringWithWrap(row, true);
            if (this._linesCache) {
                this._linesCache[row] = stringLine;
            }
        }
        var searchTerm = searchOptions.caseSensitive ? term : term.toLowerCase();
        var searchStringLine = searchOptions.caseSensitive ? stringLine : stringLine.toLowerCase();
        var resultIndex = -1;
        if (searchOptions.regex) {
            var searchRegex = RegExp(searchTerm, 'g');
            var foundTerm = void 0;
            if (isReverseSearch) {
                while (foundTerm = searchRegex.exec(searchStringLine.slice(0, col))) {
                    resultIndex = searchRegex.lastIndex - foundTerm[0].length;
                    term = foundTerm[0];
                    searchRegex.lastIndex -= (term.length - 1);
                }
            }
            else {
                foundTerm = searchRegex.exec(searchStringLine.slice(col));
                if (foundTerm && foundTerm[0].length > 0) {
                    resultIndex = col + (searchRegex.lastIndex - foundTerm[0].length);
                    term = foundTerm[0];
                }
            }
        }
        else {
            if (isReverseSearch) {
                if (col - searchTerm.length >= 0) {
                    resultIndex = searchStringLine.lastIndexOf(searchTerm, col - searchTerm.length);
                }
            }
            else {
                resultIndex = searchStringLine.indexOf(searchTerm, col);
            }
        }
        if (resultIndex >= 0) {
            if (resultIndex >= terminal.cols) {
                row += Math.floor(resultIndex / terminal.cols);
                resultIndex = resultIndex % terminal.cols;
            }
            if (searchOptions.wholeWord && !this._isWholeWord(resultIndex, searchStringLine, term)) {
                return;
            }
            var line = terminal.buffer.getLine(row);
            if (line) {
                for (var i = 0; i < resultIndex; i++) {
                    var cell = line.getCell(i);
                    if (!cell) {
                        break;
                    }
                    var char = cell.char;
                    if (char.length > 1) {
                        resultIndex -= char.length - 1;
                    }
                    var charWidth = cell.width;
                    if (charWidth === 0) {
                        resultIndex++;
                    }
                }
            }
            return {
                term: term,
                col: resultIndex,
                row: row
            };
        }
    };
    SearchAddon.prototype._translateBufferLineToStringWithWrap = function (lineIndex, trimRight) {
        var terminal = this._terminal;
        var lineString = '';
        var lineWrapsToNext;
        do {
            var nextLine = terminal.buffer.getLine(lineIndex + 1);
            lineWrapsToNext = nextLine ? nextLine.isWrapped : false;
            var line = terminal.buffer.getLine(lineIndex);
            if (!line) {
                break;
            }
            lineString += line.translateToString(!lineWrapsToNext && trimRight).substring(0, terminal.cols);
            lineIndex++;
        } while (lineWrapsToNext);
        return lineString;
    };
    SearchAddon.prototype._selectResult = function (result) {
        var terminal = this._terminal;
        if (!result) {
            terminal.clearSelection();
            return false;
        }
        terminal.select(result.col, result.row, result.term.length);
        if (result.row > (terminal.buffer.viewportY + terminal.rows) || result.row < terminal.buffer.viewportY) {
            var scroll_1 = result.row - terminal.buffer.viewportY;
            scroll_1 = scroll_1 - Math.floor(terminal.rows / 2);
            terminal.scrollLines(scroll_1);
        }
        return true;
    };
    return SearchAddon;
}());
exports.SearchAddon = SearchAddon;


/***/ }),

/***/ "./addons/xterm-addon-web-links/out/WebLinksAddon.js":
/*!***********************************************************!*\
  !*** ./addons/xterm-addon-web-links/out/WebLinksAddon.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var protocolClause = '(https?:\\/\\/)';
var domainCharacterSet = '[\\da-z\\.-]+';
var negatedDomainCharacterSet = '[^\\da-z\\.-]+';
var domainBodyClause = '(' + domainCharacterSet + ')';
var tldClause = '([a-z\\.]{2,6})';
var ipClause = '((\\d{1,3}\\.){3}\\d{1,3})';
var localHostClause = '(localhost)';
var portClause = '(:\\d{1,5})';
var hostClause = '((' + domainBodyClause + '\\.' + tldClause + ')|' + ipClause + '|' + localHostClause + ')' + portClause + '?';
var pathCharacterSet = '(\\/[\\/\\w\\.\\-%~:+]*)*([^:"\'\\s])';
var pathClause = '(' + pathCharacterSet + ')?';
var queryStringHashFragmentCharacterSet = '[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&\'*+,:;~\\=\\.\\-]*';
var queryStringClause = '(\\?' + queryStringHashFragmentCharacterSet + ')?';
var hashFragmentClause = '(#' + queryStringHashFragmentCharacterSet + ')?';
var negatedPathCharacterSet = '[^\\/\\w\\.\\-%]+';
var bodyClause = hostClause + pathClause + queryStringClause + hashFragmentClause;
var start = '(?:^|' + negatedDomainCharacterSet + ')(';
var end = ')($|' + negatedPathCharacterSet + ')';
var strictUrlRegex = new RegExp(start + protocolClause + bodyClause + end);
function handleLink(event, uri) {
    window.open(uri, '_blank');
}
var WebLinksAddon = (function () {
    function WebLinksAddon(_handler, _options) {
        if (_handler === void 0) { _handler = handleLink; }
        if (_options === void 0) { _options = {}; }
        this._handler = _handler;
        this._options = _options;
        this._options.matchIndex = 1;
    }
    WebLinksAddon.prototype.activate = function (terminal) {
        this._terminal = terminal;
        this._linkMatcherId = this._terminal.registerLinkMatcher(strictUrlRegex, this._handler, this._options);
    };
    WebLinksAddon.prototype.dispose = function () {
        if (this._linkMatcherId !== undefined && this._terminal !== undefined) {
            this._terminal.deregisterLinkMatcher(this._linkMatcherId);
        }
    };
    return WebLinksAddon;
}());
exports.WebLinksAddon = WebLinksAddon;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/CharDataCompat.js":
/*!********************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/CharDataCompat.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
function getCompatAttr(bufferLine, index) {
    var cell = new CellData_1.CellData();
    bufferLine.loadCell(index, cell);
    var oldBg = cell.getBgColor() === -1 ? 256 : cell.getBgColor();
    var oldFg = cell.getFgColor() === -1 ? 256 : cell.getFgColor();
    var oldAttr = (cell.isBold() ? 1 : 0) |
        (cell.isUnderline() ? 2 : 0) |
        (cell.isBlink() ? 4 : 0) |
        (cell.isInverse() ? 8 : 0) |
        (cell.isDim() ? 32 : 0) |
        (cell.isItalic() ? 64 : 0);
    var attrCompat = oldBg |
        (oldFg << 9) |
        (oldAttr << 18);
    return attrCompat;
}
exports.getCompatAttr = getCompatAttr;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/ColorUtils.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/ColorUtils.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function getLuminance(color) {
    var r = color.rgba >> 24 & 0xff;
    var g = color.rgba >> 16 & 0xff;
    var b = color.rgba >> 8 & 0xff;
    return (0.299 * r + 0.587 * g + 0.114 * b) / 255;
}
exports.getLuminance = getLuminance;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/GlyphRenderer.js":
/*!*******************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/GlyphRenderer.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WebglUtils_1 = __webpack_require__(/*! ./WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var WebglRenderer_1 = __webpack_require__(/*! ./WebglRenderer */ "./addons/xterm-addon-webgl/out/WebglRenderer.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var TypedArray_1 = __webpack_require__(/*! ./TypedArray */ "./addons/xterm-addon-webgl/out/TypedArray.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var ColorUtils_1 = __webpack_require__(/*! ./ColorUtils */ "./addons/xterm-addon-webgl/out/ColorUtils.js");
var vertexShaderSource = "#version 300 es\nlayout (location = " + 0 + ") in vec2 a_unitquad;\nlayout (location = " + 1 + ") in vec2 a_cellpos;\nlayout (location = " + 2 + ") in vec2 a_offset;\nlayout (location = " + 3 + ") in vec2 a_size;\nlayout (location = " + 4 + ") in vec2 a_texcoord;\nlayout (location = " + 5 + ") in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}";
var fragmentShaderSource = "#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(u_texture, v_texcoord);\n}";
var INDICES_PER_CELL = 10;
var BYTES_PER_CELL = INDICES_PER_CELL * Float32Array.BYTES_PER_ELEMENT;
var CELL_POSITION_INDICES = 2;
var GlyphRenderer = (function () {
    function GlyphRenderer(_terminal, _colors, _gl, _dimensions) {
        this._terminal = _terminal;
        this._colors = _colors;
        this._gl = _gl;
        this._dimensions = _dimensions;
        this._activeBuffer = 0;
        this._vertices = {
            count: 0,
            attributes: new Float32Array(0),
            attributesBuffers: [
                new Float32Array(0),
                new Float32Array(0)
            ],
            selectionAttributes: new Float32Array(0)
        };
        var gl = this._gl;
        var program = WebglUtils_1.throwIfFalsy(WebglUtils_1.createProgram(gl, vertexShaderSource, fragmentShaderSource));
        if (program === undefined) {
            throw new Error('Could not create WebGL program');
        }
        this._program = program;
        this._projectionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));
        this._resolutionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_resolution'));
        this._textureLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_texture'));
        this._vertexArrayObject = gl.createVertexArray();
        gl.bindVertexArray(this._vertexArrayObject);
        var unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
        var unitQuadVerticesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 2, this._gl.FLOAT, false, 0, 0);
        var unitQuadElementIndices = new Uint8Array([0, 1, 3, 0, 2, 3]);
        var elementIndicesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);
        this._attributesBuffer = WebglUtils_1.throwIfFalsy(gl.createBuffer());
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.enableVertexAttribArray(2);
        gl.vertexAttribPointer(2, 2, gl.FLOAT, false, BYTES_PER_CELL, 0);
        gl.vertexAttribDivisor(2, 1);
        gl.enableVertexAttribArray(3);
        gl.vertexAttribPointer(3, 2, gl.FLOAT, false, BYTES_PER_CELL, 2 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(3, 1);
        gl.enableVertexAttribArray(4);
        gl.vertexAttribPointer(4, 2, gl.FLOAT, false, BYTES_PER_CELL, 4 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(4, 1);
        gl.enableVertexAttribArray(5);
        gl.vertexAttribPointer(5, 2, gl.FLOAT, false, BYTES_PER_CELL, 6 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(5, 1);
        gl.enableVertexAttribArray(1);
        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, BYTES_PER_CELL, 8 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(1, 1);
        this._atlasTexture = WebglUtils_1.throwIfFalsy(gl.createTexture());
        gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([0, 0, 255, 255]));
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        gl.enable(gl.BLEND);
        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
        this.onResize();
    }
    GlyphRenderer.prototype.beginFrame = function () {
        return this._atlas ? this._atlas.beginFrame() : true;
    };
    GlyphRenderer.prototype.updateCell = function (x, y, code, attr, bg, fg, chars) {
        this._updateCell(this._vertices.attributes, x, y, code, attr, bg, fg, chars);
    };
    GlyphRenderer.prototype._updateCell = function (array, x, y, code, attr, bg, fg, chars) {
        var terminal = this._terminal;
        var i = (y * terminal.cols + x) * INDICES_PER_CELL;
        if (code === Constants_1.NULL_CELL_CODE || code === Constants_1.WHITESPACE_CELL_CODE || code === undefined) {
            TypedArrayUtils_1.fill(array, 0, i, i + INDICES_PER_CELL - 1 - CELL_POSITION_INDICES);
            return;
        }
        var rasterizedGlyph;
        if (!this._atlas) {
            throw new Error('atlas must be set before updating cell');
        }
        if (chars && chars.length > 1) {
            rasterizedGlyph = this._atlas.getRasterizedGlyphCombinedChar(chars, attr, bg, fg);
        }
        else {
            rasterizedGlyph = this._atlas.getRasterizedGlyph(code, attr, bg, fg);
        }
        if (!rasterizedGlyph) {
            TypedArrayUtils_1.fill(array, 0, i, i + INDICES_PER_CELL - 1 - CELL_POSITION_INDICES);
            return;
        }
        array[i] = -rasterizedGlyph.offset.x + this._dimensions.scaledCharLeft;
        array[i + 1] = -rasterizedGlyph.offset.y + this._dimensions.scaledCharTop;
        array[i + 2] = rasterizedGlyph.size.x / this._dimensions.scaledCanvasWidth;
        array[i + 3] = rasterizedGlyph.size.y / this._dimensions.scaledCanvasHeight;
        array[i + 4] = rasterizedGlyph.texturePositionClipSpace.x;
        array[i + 5] = rasterizedGlyph.texturePositionClipSpace.y;
        array[i + 6] = rasterizedGlyph.sizeClipSpace.x;
        array[i + 7] = rasterizedGlyph.sizeClipSpace.y;
    };
    GlyphRenderer.prototype.updateSelection = function (model, columnSelectMode) {
        var terminal = this._terminal;
        this._vertices.selectionAttributes = TypedArray_1.slice(this._vertices.attributes, 0);
        var lumi = ColorUtils_1.getLuminance(this._colors.background);
        var fg = lumi > 0.5 ? 7 : 0;
        var bg = lumi > 0.5 ? 0 : 7;
        if (columnSelectMode) {
            var startCol = model.selection.startCol;
            var width = model.selection.endCol - startCol;
            var height = model.selection.viewportCappedEndRow - model.selection.viewportCappedStartRow + 1;
            for (var y = model.selection.viewportCappedStartRow; y < model.selection.viewportCappedStartRow + height; y++) {
                this._updateSelectionRange(startCol, startCol + width, y, model, bg, fg);
            }
        }
        else {
            var startCol = model.selection.viewportStartRow === model.selection.viewportCappedStartRow ? model.selection.startCol : 0;
            var startRowEndCol = model.selection.viewportCappedStartRow === model.selection.viewportCappedEndRow ? model.selection.endCol : terminal.cols;
            this._updateSelectionRange(startCol, startRowEndCol, model.selection.viewportCappedStartRow, model, bg, fg);
            var middleRowsCount = Math.max(model.selection.viewportCappedEndRow - model.selection.viewportCappedStartRow - 1, 0);
            for (var y = model.selection.viewportCappedStartRow + 1; y <= model.selection.viewportCappedStartRow + middleRowsCount; y++) {
                this._updateSelectionRange(0, startRowEndCol, y, model, bg, fg);
            }
            if (model.selection.viewportCappedStartRow !== model.selection.viewportCappedEndRow) {
                var endCol = model.selection.viewportEndRow === model.selection.viewportCappedEndRow ? model.selection.endCol : terminal.cols;
                this._updateSelectionRange(0, endCol, model.selection.viewportCappedEndRow, model, bg, fg);
            }
        }
    };
    GlyphRenderer.prototype._updateSelectionRange = function (startCol, endCol, y, model, bg, fg) {
        var terminal = this._terminal;
        var row = y + terminal.buffer.viewportY;
        var line;
        for (var x = startCol; x < endCol; x++) {
            var offset = (y * this._terminal.cols + x) * WebglRenderer_1.INDICIES_PER_CELL;
            var attr = model.cells[offset + 1];
            attr = attr & ~0x3ffff | bg << 9 | fg;
            var code = model.cells[offset];
            if (code & RenderModel_1.COMBINED_CHAR_BIT_MASK) {
                if (!line) {
                    line = terminal.buffer.getLine(row);
                }
                var chars = line.getCell(x).char;
                this._updateCell(this._vertices.selectionAttributes, x, y, model.cells[offset], attr, bg, fg, chars);
            }
            else {
                this._updateCell(this._vertices.selectionAttributes, x, y, model.cells[offset], attr, bg, fg);
            }
        }
    };
    GlyphRenderer.prototype.onResize = function () {
        var terminal = this._terminal;
        var gl = this._gl;
        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
        var newCount = terminal.cols * terminal.rows * INDICES_PER_CELL;
        if (this._vertices.count !== newCount) {
            this._vertices.count = newCount;
            this._vertices.attributes = new Float32Array(newCount);
            for (var i_1 = 0; i_1 < this._vertices.attributesBuffers.length; i_1++) {
                this._vertices.attributesBuffers[i_1] = new Float32Array(newCount);
            }
            var i = 0;
            for (var y = 0; y < terminal.rows; y++) {
                for (var x = 0; x < terminal.cols; x++) {
                    this._vertices.attributes[i + 8] = x / terminal.cols;
                    this._vertices.attributes[i + 9] = y / terminal.rows;
                    i += INDICES_PER_CELL;
                }
            }
        }
    };
    GlyphRenderer.prototype.setColors = function () {
    };
    GlyphRenderer.prototype.render = function (renderModel, isSelectionVisible) {
        if (!this._atlas) {
            return;
        }
        var gl = this._gl;
        gl.useProgram(this._program);
        gl.bindVertexArray(this._vertexArrayObject);
        this._activeBuffer = (this._activeBuffer + 1) % 2;
        var activeBuffer = this._vertices.attributesBuffers[this._activeBuffer];
        var bufferLength = 0;
        for (var y = 0; y < renderModel.lineLengths.length; y++) {
            var si = y * this._terminal.cols * INDICES_PER_CELL;
            var sub = (isSelectionVisible ? this._vertices.selectionAttributes : this._vertices.attributes).subarray(si, si + renderModel.lineLengths[y] * INDICES_PER_CELL);
            activeBuffer.set(sub, bufferLength);
            bufferLength += sub.length;
        }
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, activeBuffer.subarray(0, bufferLength), gl.STREAM_DRAW);
        if (this._atlas.hasCanvasChanged) {
            this._atlas.hasCanvasChanged = false;
            gl.uniform1i(this._textureLocation, 0);
            gl.activeTexture(gl.TEXTURE0 + 0);
            gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this._atlas.cacheCanvas);
            gl.generateMipmap(gl.TEXTURE_2D);
        }
        gl.uniformMatrix4fv(this._projectionLocation, false, WebglUtils_1.PROJECTION_MATRIX);
        gl.uniform2f(this._resolutionLocation, gl.canvas.width, gl.canvas.height);
        gl.drawElementsInstanced(gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, bufferLength / INDICES_PER_CELL);
    };
    GlyphRenderer.prototype.setAtlas = function (atlas) {
        var gl = this._gl;
        this._atlas = atlas;
        gl.bindTexture(gl.TEXTURE_2D, this._atlasTexture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, atlas.cacheCanvas);
        gl.generateMipmap(gl.TEXTURE_2D);
    };
    GlyphRenderer.prototype.setDimensions = function (dimensions) {
        this._dimensions = dimensions;
    };
    return GlyphRenderer;
}());
exports.GlyphRenderer = GlyphRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/RectangleRenderer.js":
/*!***********************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/RectangleRenderer.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WebglUtils_1 = __webpack_require__(/*! ./WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! ./atlas/CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var vertexShaderSource = "#version 300 es\nlayout (location = " + 0 + ") in vec2 a_position;\nlayout (location = " + 1 + ") in vec2 a_size;\nlayout (location = " + 2 + ") in vec3 a_color;\nlayout (location = " + 3 + ") in vec2 a_unitquad;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec3 v_color;\n\nvoid main() {\n  vec2 zeroToOne = (a_position + (a_unitquad * a_size)) / u_resolution;\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}";
var fragmentShaderSource = "#version 300 es\nprecision lowp float;\n\nin vec3 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = vec4(v_color, 1);\n}";
var INDICES_PER_RECTANGLE = 8;
var BYTES_PER_RECTANGLE = INDICES_PER_RECTANGLE * Float32Array.BYTES_PER_ELEMENT;
var INITIAL_BUFFER_RECTANGLE_CAPACITY = 20 * INDICES_PER_RECTANGLE;
var RectangleRenderer = (function () {
    function RectangleRenderer(_terminal, _colors, _gl, _dimensions) {
        this._terminal = _terminal;
        this._colors = _colors;
        this._gl = _gl;
        this._dimensions = _dimensions;
        this._vertices = {
            count: 0,
            attributes: new Float32Array(INITIAL_BUFFER_RECTANGLE_CAPACITY),
            selection: new Float32Array(3 * INDICES_PER_RECTANGLE)
        };
        var gl = this._gl;
        this._program = WebglUtils_1.throwIfFalsy(WebglUtils_1.createProgram(gl, vertexShaderSource, fragmentShaderSource));
        this._resolutionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_resolution'));
        this._projectionLocation = WebglUtils_1.throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));
        this._vertexArrayObject = gl.createVertexArray();
        gl.bindVertexArray(this._vertexArrayObject);
        var unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);
        var unitQuadVerticesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);
        gl.enableVertexAttribArray(3);
        gl.vertexAttribPointer(3, 2, this._gl.FLOAT, false, 0, 0);
        var unitQuadElementIndices = new Uint8Array([0, 1, 3, 0, 2, 3]);
        var elementIndicesBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);
        this._attributesBuffer = WebglUtils_1.throwIfFalsy(gl.createBuffer());
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.enableVertexAttribArray(0);
        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 0);
        gl.vertexAttribDivisor(0, 1);
        gl.enableVertexAttribArray(1);
        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 2 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(1, 1);
        gl.enableVertexAttribArray(2);
        gl.vertexAttribPointer(2, 4, gl.FLOAT, false, BYTES_PER_RECTANGLE, 4 * Float32Array.BYTES_PER_ELEMENT);
        gl.vertexAttribDivisor(2, 1);
        this._updateCachedColors();
    }
    RectangleRenderer.prototype.render = function () {
        var gl = this._gl;
        gl.useProgram(this._program);
        gl.bindVertexArray(this._vertexArrayObject);
        gl.uniformMatrix4fv(this._projectionLocation, false, WebglUtils_1.PROJECTION_MATRIX);
        gl.uniform2f(this._resolutionLocation, gl.canvas.width, gl.canvas.height);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._vertices.attributes, gl.DYNAMIC_DRAW);
        gl.drawElementsInstanced(this._gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, this._vertices.count);
        gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this._vertices.selection, gl.DYNAMIC_DRAW);
        gl.drawElementsInstanced(this._gl.TRIANGLES, 6, gl.UNSIGNED_BYTE, 0, 3);
    };
    RectangleRenderer.prototype.onResize = function () {
        this._updateViewportRectangle();
    };
    RectangleRenderer.prototype.setColors = function () {
        this._updateCachedColors();
        this._updateViewportRectangle();
    };
    RectangleRenderer.prototype._updateCachedColors = function () {
        this._bgFloat = this._colorToFloat32Array(this._colors.background);
        this._selectionFloat = this._colorToFloat32Array(this._colors.selection);
    };
    RectangleRenderer.prototype._updateViewportRectangle = function () {
        this._addRectangleFloat(this._vertices.attributes, 0, 0, 0, this._terminal.cols * this._dimensions.scaledCellWidth, this._terminal.rows * this._dimensions.scaledCellHeight, this._bgFloat);
    };
    RectangleRenderer.prototype.updateSelection = function (model, columnSelectMode) {
        var terminal = this._terminal;
        if (!model.hasSelection) {
            TypedArrayUtils_1.fill(this._vertices.selection, 0, 0);
            return;
        }
        if (columnSelectMode) {
            var startCol = model.startCol;
            var width = model.endCol - startCol;
            var height = model.viewportCappedEndRow - model.viewportCappedStartRow + 1;
            this._addRectangleFloat(this._vertices.selection, 0, startCol * this._dimensions.scaledCellWidth, model.viewportCappedStartRow * this._dimensions.scaledCellHeight, width * this._dimensions.scaledCellWidth, height * this._dimensions.scaledCellHeight, this._selectionFloat);
            TypedArrayUtils_1.fill(this._vertices.selection, 0, INDICES_PER_RECTANGLE);
        }
        else {
            var startCol = model.viewportStartRow === model.viewportCappedStartRow ? model.startCol : 0;
            var startRowEndCol = model.viewportCappedStartRow === model.viewportCappedEndRow ? model.endCol : terminal.cols;
            this._addRectangleFloat(this._vertices.selection, 0, startCol * this._dimensions.scaledCellWidth, model.viewportCappedStartRow * this._dimensions.scaledCellHeight, (startRowEndCol - startCol) * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, this._selectionFloat);
            var middleRowsCount = Math.max(model.viewportCappedEndRow - model.viewportCappedStartRow - 1, 0);
            this._addRectangleFloat(this._vertices.selection, INDICES_PER_RECTANGLE, 0, (model.viewportCappedStartRow + 1) * this._dimensions.scaledCellHeight, terminal.cols * this._dimensions.scaledCellWidth, middleRowsCount * this._dimensions.scaledCellHeight, this._selectionFloat);
            if (model.viewportCappedStartRow !== model.viewportCappedEndRow) {
                var endCol = model.viewportEndRow === model.viewportCappedEndRow ? model.endCol : terminal.cols;
                this._addRectangleFloat(this._vertices.selection, INDICES_PER_RECTANGLE * 2, 0, model.viewportCappedEndRow * this._dimensions.scaledCellHeight, endCol * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, this._selectionFloat);
            }
            else {
                TypedArrayUtils_1.fill(this._vertices.selection, 0, INDICES_PER_RECTANGLE * 2);
            }
        }
    };
    RectangleRenderer.prototype.updateBackgrounds = function (model) {
        var terminal = this._terminal;
        var vertices = this._vertices;
        var rectangleCount = 1;
        for (var y = 0; y < terminal.rows; y++) {
            var currentStartX = -1;
            var currentBg = Constants_2.DEFAULT_COLOR;
            for (var x = 0; x < terminal.cols; x++) {
                var modelIndex = ((y * terminal.cols) + x) * 4;
                var bg = model.cells[modelIndex + 2];
                if (bg !== currentBg) {
                    if (currentBg !== Constants_2.DEFAULT_COLOR) {
                        var offset = rectangleCount++ * INDICES_PER_RECTANGLE;
                        this._updateRectangle(vertices, offset, currentBg, currentStartX, x, y);
                    }
                    currentStartX = x;
                    currentBg = bg;
                }
            }
            if (currentBg !== Constants_2.DEFAULT_COLOR) {
                var offset = rectangleCount++ * INDICES_PER_RECTANGLE;
                this._updateRectangle(vertices, offset, currentBg, currentStartX, terminal.cols, y);
            }
        }
        vertices.count = rectangleCount;
    };
    RectangleRenderer.prototype._updateRectangle = function (vertices, offset, bg, startX, endX, y) {
        var color = null;
        if (bg === Constants_1.INVERTED_DEFAULT_COLOR) {
            color = this._colors.foreground;
        }
        else if (CharAtlasUtils_1.is256Color(bg)) {
            color = this._colors.ansi[bg];
        }
        else {
            color = this._colors.foreground;
        }
        if (vertices.attributes.length < offset + 4) {
            vertices.attributes = WebglUtils_1.expandFloat32Array(vertices.attributes, this._terminal.rows * this._terminal.cols * INDICES_PER_RECTANGLE);
        }
        var x1 = startX * this._dimensions.scaledCellWidth;
        var y1 = y * this._dimensions.scaledCellHeight;
        var r = ((color.rgba >> 24) & 0xFF) / 255;
        var g = ((color.rgba >> 16) & 0xFF) / 255;
        var b = ((color.rgba >> 8) & 0xFF) / 255;
        this._addRectangle(vertices.attributes, offset, x1, y1, (endX - startX) * this._dimensions.scaledCellWidth, this._dimensions.scaledCellHeight, r, g, b, 1);
    };
    RectangleRenderer.prototype._addRectangle = function (array, offset, x1, y1, width, height, r, g, b, a) {
        array[offset] = x1;
        array[offset + 1] = y1;
        array[offset + 2] = width;
        array[offset + 3] = height;
        array[offset + 4] = r;
        array[offset + 5] = g;
        array[offset + 6] = b;
        array[offset + 7] = a;
    };
    RectangleRenderer.prototype._addRectangleFloat = function (array, offset, x1, y1, width, height, color) {
        array[offset] = x1;
        array[offset + 1] = y1;
        array[offset + 2] = width;
        array[offset + 3] = height;
        array[offset + 4] = color[0];
        array[offset + 5] = color[1];
        array[offset + 6] = color[2];
        array[offset + 7] = color[3];
    };
    RectangleRenderer.prototype._colorToFloat32Array = function (color) {
        return new Float32Array([
            ((color.rgba >> 24) & 0xFF) / 255,
            ((color.rgba >> 16) & 0xFF) / 255,
            ((color.rgba >> 8) & 0xFF) / 255,
            ((color.rgba) & 0xFF) / 255
        ]);
    };
    return RectangleRenderer;
}());
exports.RectangleRenderer = RectangleRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/RenderModel.js":
/*!*****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/RenderModel.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
exports.RENDER_MODEL_INDICIES_PER_CELL = 4;
exports.COMBINED_CHAR_BIT_MASK = 0x80000000;
var RenderModel = (function () {
    function RenderModel() {
        this.cells = new Uint32Array(0);
        this.lineLengths = new Uint32Array(0);
        this.selection = {
            hasSelection: false,
            viewportStartRow: 0,
            viewportEndRow: 0,
            viewportCappedStartRow: 0,
            viewportCappedEndRow: 0,
            startCol: 0,
            endCol: 0
        };
    }
    RenderModel.prototype.resize = function (cols, rows) {
        var indexCount = cols * rows * exports.RENDER_MODEL_INDICIES_PER_CELL;
        if (indexCount !== this.cells.length) {
            this.cells = new Uint32Array(indexCount);
            this.lineLengths = new Uint32Array(rows);
        }
    };
    RenderModel.prototype.clear = function () {
        TypedArrayUtils_1.fill(this.cells, 0, 0);
        TypedArrayUtils_1.fill(this.lineLengths, 0, 0);
        this.clearSelection();
    };
    RenderModel.prototype.clearSelection = function () {
        this.selection.hasSelection = false;
        this.selection.viewportStartRow = 0;
        this.selection.viewportEndRow = 0;
        this.selection.viewportCappedStartRow = 0;
        this.selection.viewportCappedEndRow = 0;
        this.selection.startCol = 0;
        this.selection.endCol = 0;
    };
    return RenderModel;
}());
exports.RenderModel = RenderModel;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/TypedArray.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/TypedArray.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function slice(array, start, end) {
    if (array.slice) {
        return array.slice(start, end);
    }
    return sliceFallback(array, start, end);
}
exports.slice = slice;
function sliceFallback(array, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = array.length; }
    if (start < 0) {
        start = (array.length + start) % array.length;
    }
    if (end >= array.length) {
        end = array.length;
    }
    else {
        end = (array.length + end) % array.length;
    }
    start = Math.min(start, end);
    var result = new array.constructor(end - start);
    for (var i = 0; i < end - start; ++i) {
        result[i] = array[i + start];
    }
    return result;
}
exports.sliceFallback = sliceFallback;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglAddon.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglAddon.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var WebglRenderer_1 = __webpack_require__(/*! ./WebglRenderer */ "./addons/xterm-addon-webgl/out/WebglRenderer.js");
var WebglAddon = (function () {
    function WebglAddon(_preserveDrawingBuffer) {
        this._preserveDrawingBuffer = _preserveDrawingBuffer;
    }
    WebglAddon.prototype.activate = function (terminal) {
        if (!terminal.element) {
            throw new Error('Cannot activate WebglRendererAddon before Terminal.open');
        }
        var renderService = terminal._core._renderService;
        var colors = terminal._core._colorManager.colors;
        renderService.setRenderer(new WebglRenderer_1.WebglRenderer(terminal, colors, this._preserveDrawingBuffer));
    };
    WebglAddon.prototype.dispose = function () {
        throw new Error('WebglRendererAddon.dispose Not yet implemented');
    };
    return WebglAddon;
}());
exports.WebglAddon = WebglAddon;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglRenderer.js":
/*!*******************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglRenderer.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var GlyphRenderer_1 = __webpack_require__(/*! ./GlyphRenderer */ "./addons/xterm-addon-webgl/out/GlyphRenderer.js");
var LinkRenderLayer_1 = __webpack_require__(/*! ./renderLayer/LinkRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js");
var CursorRenderLayer_1 = __webpack_require__(/*! ./renderLayer/CursorRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js");
var CharAtlasCache_1 = __webpack_require__(/*! ./atlas/CharAtlasCache */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js");
var RectangleRenderer_1 = __webpack_require__(/*! ./RectangleRenderer */ "./addons/xterm-addon-webgl/out/RectangleRenderer.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var RenderModel_1 = __webpack_require__(/*! ./RenderModel */ "./addons/xterm-addon-webgl/out/RenderModel.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var ColorUtils_1 = __webpack_require__(/*! ./ColorUtils */ "./addons/xterm-addon-webgl/out/ColorUtils.js");
var CharDataCompat_1 = __webpack_require__(/*! ./CharDataCompat */ "./addons/xterm-addon-webgl/out/CharDataCompat.js");
exports.INDICIES_PER_CELL = 4;
var WebglRenderer = (function (_super) {
    __extends(WebglRenderer, _super);
    function WebglRenderer(_terminal, _colors, preserveDrawingBuffer) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._colors = _colors;
        _this._model = new RenderModel_1.RenderModel();
        _this._core = _this._terminal._core;
        _this._applyBgLuminanceBasedSelection();
        _this._renderLayers = [
            new LinkRenderLayer_1.LinkRenderLayer(_this._core.screenElement, 2, _this._colors, _this._core),
            new CursorRenderLayer_1.CursorRenderLayer(_this._core.screenElement, 3, _this._colors)
        ];
        _this.dimensions = {
            scaledCharWidth: 0,
            scaledCharHeight: 0,
            scaledCellWidth: 0,
            scaledCellHeight: 0,
            scaledCharLeft: 0,
            scaledCharTop: 0,
            scaledCanvasWidth: 0,
            scaledCanvasHeight: 0,
            canvasWidth: 0,
            canvasHeight: 0,
            actualCellWidth: 0,
            actualCellHeight: 0
        };
        _this._devicePixelRatio = window.devicePixelRatio;
        _this._updateDimensions();
        _this._canvas = document.createElement('canvas');
        var contextAttributes = {
            antialias: false,
            depth: false,
            preserveDrawingBuffer: preserveDrawingBuffer
        };
        _this._gl = _this._canvas.getContext('webgl2', contextAttributes);
        if (!_this._gl) {
            throw new Error('WebGL2 not supported');
        }
        _this._core.screenElement.appendChild(_this._canvas);
        _this._rectangleRenderer = new RectangleRenderer_1.RectangleRenderer(_this._terminal, _this._colors, _this._gl, _this.dimensions);
        _this._glyphRenderer = new GlyphRenderer_1.GlyphRenderer(_this._terminal, _this._colors, _this._gl, _this.dimensions);
        _this.onCharSizeChanged();
        return _this;
    }
    WebglRenderer.prototype.dispose = function () {
        this._renderLayers.forEach(function (l) { return l.dispose(); });
        this._core.screenElement.removeChild(this._canvas);
        _super.prototype.dispose.call(this);
    };
    WebglRenderer.prototype._applyBgLuminanceBasedSelection = function () {
        if (ColorUtils_1.getLuminance(this._colors.background) > 0.5) {
            this._colors.selection = { css: '#000', rgba: 255 };
        }
        else {
            this._colors.selection = { css: '#fff', rgba: 4294967295 };
        }
    };
    WebglRenderer.prototype.setColors = function (colors) {
        var _this = this;
        this._colors = colors;
        this._applyBgLuminanceBasedSelection();
        this._renderLayers.forEach(function (l) {
            l.setColors(_this._terminal, _this._colors);
            l.reset(_this._terminal);
        });
        this._rectangleRenderer.setColors();
        this._glyphRenderer.setColors();
        this._refreshCharAtlas();
        this._model.clear();
    };
    WebglRenderer.prototype.onDevicePixelRatioChange = function () {
        if (this._devicePixelRatio !== window.devicePixelRatio) {
            this._devicePixelRatio = window.devicePixelRatio;
            this.onResize(this._terminal.cols, this._terminal.rows);
        }
    };
    WebglRenderer.prototype.onResize = function (cols, rows) {
        var _this = this;
        this._updateDimensions();
        this._model.resize(this._terminal.cols, this._terminal.rows);
        this._rectangleRenderer.onResize();
        this._renderLayers.forEach(function (l) { return l.resize(_this._terminal, _this.dimensions); });
        this._canvas.width = this.dimensions.scaledCanvasWidth;
        this._canvas.height = this.dimensions.scaledCanvasHeight;
        this._canvas.style.width = this.dimensions.canvasWidth + "px";
        this._canvas.style.height = this.dimensions.canvasHeight + "px";
        this._core.screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._core.screenElement.style.height = this.dimensions.canvasHeight + "px";
        this._glyphRenderer.setDimensions(this.dimensions);
        this._glyphRenderer.onResize();
        this._refreshCharAtlas();
        this._model.clear();
    };
    WebglRenderer.prototype.onCharSizeChanged = function () {
        this.onResize(this._terminal.cols, this._terminal.rows);
    };
    WebglRenderer.prototype.onBlur = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onBlur(_this._terminal); });
    };
    WebglRenderer.prototype.onFocus = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onFocus(_this._terminal); });
    };
    WebglRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onSelectionChanged(_this._terminal, start, end, columnSelectMode); });
        this._updateSelectionModel(start, end);
        this._rectangleRenderer.updateSelection(this._model.selection, columnSelectMode);
        this._glyphRenderer.updateSelection(this._model, columnSelectMode);
        this._core.refresh(0, this._terminal.rows - 1);
    };
    WebglRenderer.prototype.onCursorMove = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onCursorMove(_this._terminal); });
    };
    WebglRenderer.prototype.onOptionsChanged = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onOptionsChanged(_this._terminal); });
        this._updateDimensions();
        this._refreshCharAtlas();
    };
    WebglRenderer.prototype._refreshCharAtlas = function () {
        if (this.dimensions.scaledCharWidth <= 0 && this.dimensions.scaledCharHeight <= 0) {
            return;
        }
        var atlas = CharAtlasCache_1.acquireCharAtlas(this._terminal, this._colors, this.dimensions.scaledCharWidth, this.dimensions.scaledCharHeight);
        if (!('getRasterizedGlyph' in atlas)) {
            throw new Error('The webgl renderer only works with the webgl char atlas');
        }
        this._charAtlas = atlas;
        this._charAtlas.warmUp();
        this._glyphRenderer.setAtlas(this._charAtlas);
    };
    WebglRenderer.prototype.clear = function () {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.reset(_this._terminal); });
    };
    WebglRenderer.prototype.registerCharacterJoiner = function (handler) {
        return -1;
    };
    WebglRenderer.prototype.deregisterCharacterJoiner = function (joinerId) {
        return false;
    };
    WebglRenderer.prototype.renderRows = function (start, end) {
        var _this = this;
        this._renderLayers.forEach(function (l) { return l.onGridChanged(_this._terminal, start, end); });
        if (this._glyphRenderer.beginFrame()) {
            this._model.clear();
        }
        this._updateModel(start, end);
        this._rectangleRenderer.render();
        this._glyphRenderer.render(this._model, this._model.selection.hasSelection);
    };
    WebglRenderer.prototype._updateModel = function (start, end) {
        var terminal = this._core;
        for (var y = start; y <= end; y++) {
            var row = y + terminal.buffer.ydisp;
            var line = terminal.buffer.lines.get(row);
            this._model.lineLengths[y] = 0;
            for (var x = 0; x < terminal.cols; x++) {
                var charData = line.get(x);
                var chars = charData[Constants_2.CHAR_DATA_CHAR_INDEX];
                var code = charData[Constants_2.CHAR_DATA_CODE_INDEX];
                var attr = CharDataCompat_1.getCompatAttr(line, x);
                var i = ((y * terminal.cols) + x) * exports.INDICIES_PER_CELL;
                if (code !== Constants_2.NULL_CELL_CODE) {
                    this._model.lineLengths[y] = x + 1;
                }
                if (this._model.cells[i] === code && this._model.cells[i + 1] === attr) {
                    continue;
                }
                var flags = attr >> 18;
                var bg = attr & 0x1ff;
                var fg = (attr >> 9) & 0x1ff;
                if (flags & 8) {
                    var temp = bg;
                    bg = fg;
                    fg = temp;
                    if (fg === Constants_2.DEFAULT_COLOR) {
                        fg = Constants_1.INVERTED_DEFAULT_COLOR;
                    }
                    if (bg === Constants_2.DEFAULT_COLOR) {
                        bg = Constants_1.INVERTED_DEFAULT_COLOR;
                    }
                }
                var drawInBrightColor = terminal.options.drawBoldTextInBrightColors && !!(flags & 1) && fg < 8 && fg !== Constants_1.INVERTED_DEFAULT_COLOR;
                fg += drawInBrightColor ? 8 : 0;
                if (chars.length > 1) {
                    code = code | RenderModel_1.COMBINED_CHAR_BIT_MASK;
                }
                this._model.cells[i] = code;
                this._model.cells[i + 1] = attr;
                this._model.cells[i + 2] = bg;
                this._model.cells[i + 3] = fg;
                this._glyphRenderer.updateCell(x, y, code, attr, bg, fg, chars);
            }
        }
        this._rectangleRenderer.updateBackgrounds(this._model);
    };
    WebglRenderer.prototype._updateSelectionModel = function (start, end) {
        var terminal = this._terminal;
        if (!start || !end || (start[0] === end[0] && start[1] === end[1])) {
            this._model.clearSelection();
            return;
        }
        var viewportStartRow = start[1] - terminal.buffer.viewportY;
        var viewportEndRow = end[1] - terminal.buffer.viewportY;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);
        if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {
            this._model.clearSelection();
            return;
        }
        this._model.selection.hasSelection = true;
        this._model.selection.viewportStartRow = viewportStartRow;
        this._model.selection.viewportEndRow = viewportEndRow;
        this._model.selection.viewportCappedStartRow = viewportCappedStartRow;
        this._model.selection.viewportCappedEndRow = viewportCappedEndRow;
        this._model.selection.startCol = start[0];
        this._model.selection.endCol = end[0];
    };
    WebglRenderer.prototype._updateDimensions = function () {
        if (!this._core._charSizeService.width || !this._core._charSizeService.height) {
            return;
        }
        this.dimensions.scaledCharWidth = Math.floor(this._core._charSizeService.width * this._devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._core._charSizeService.height * this._devicePixelRatio);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.getOption('lineHeight'));
        this.dimensions.scaledCharTop = this._terminal.getOption('lineHeight') === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.getOption('letterSpacing'));
        this.dimensions.scaledCharLeft = Math.floor(this._terminal.getOption('letterSpacing') / 2);
        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;
        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / this._devicePixelRatio);
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / this._devicePixelRatio);
        this.dimensions.actualCellHeight = this.dimensions.scaledCellHeight / this._devicePixelRatio;
        this.dimensions.actualCellWidth = this.dimensions.scaledCellWidth / this._devicePixelRatio;
    };
    return WebglRenderer;
}(Lifecycle_1.Disposable));
exports.WebglRenderer = WebglRenderer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/WebglUtils.js":
/*!****************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/WebglUtils.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.PROJECTION_MATRIX = new Float32Array([
    2, 0, 0, 0,
    0, -2, 0, 0,
    0, 0, 1, 0,
    -1, 1, 0, 1
]);
function createProgram(gl, vertexSource, fragmentSource) {
    var program = throwIfFalsy(gl.createProgram());
    gl.attachShader(program, throwIfFalsy(createShader(gl, gl.VERTEX_SHADER, vertexSource)));
    gl.attachShader(program, throwIfFalsy(createShader(gl, gl.FRAGMENT_SHADER, fragmentSource)));
    gl.linkProgram(program);
    var success = gl.getProgramParameter(program, gl.LINK_STATUS);
    if (success) {
        return program;
    }
    console.error(gl.getProgramInfoLog(program));
    gl.deleteProgram(program);
}
exports.createProgram = createProgram;
function createShader(gl, type, source) {
    var shader = throwIfFalsy(gl.createShader(type));
    gl.shaderSource(shader, source);
    gl.compileShader(shader);
    var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
    if (success) {
        return shader;
    }
    console.error(gl.getShaderInfoLog(shader));
    gl.deleteShader(shader);
}
exports.createShader = createShader;
function expandFloat32Array(source, max) {
    var newLength = Math.min(source.length * 2, max);
    var newArray = new Float32Array(newLength);
    for (var i = 0; i < source.length; i++) {
        newArray[i] = source[i];
    }
    return newArray;
}
exports.expandFloat32Array = expandFloat32Array;
function throwIfFalsy(value) {
    if (!value) {
        throw new Error('value must not be falsy');
    }
    return value;
}
exports.throwIfFalsy = throwIfFalsy;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharAtlasUtils_1 = __webpack_require__(/*! ./CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var WebglCharAtlas_1 = __webpack_require__(/*! ./WebglCharAtlas */ "./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js");
var charAtlasCache = [];
function acquireCharAtlas(terminal, colors, scaledCharWidth, scaledCharHeight) {
    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors);
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        var ownedByIndex = entry.ownedBy.indexOf(terminal);
        if (ownedByIndex >= 0) {
            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
                return entry.atlas;
            }
            if (entry.ownedBy.length === 1) {
                entry.atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                entry.ownedBy.splice(ownedByIndex, 1);
            }
            break;
        }
    }
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
            entry.ownedBy.push(terminal);
            return entry.atlas;
        }
    }
    var newEntry = {
        atlas: new WebglCharAtlas_1.WebglCharAtlas(document, newConfig),
        config: newConfig,
        ownedBy: [terminal]
    };
    charAtlasCache.push(newEntry);
    return newEntry.atlas;
}
exports.acquireCharAtlas = acquireCharAtlas;
function removeTerminalFromCache(terminal) {
    for (var i = 0; i < charAtlasCache.length; i++) {
        var index = charAtlasCache[i].ownedBy.indexOf(terminal);
        if (index !== -1) {
            if (charAtlasCache[i].ownedBy.length === 1) {
                charAtlasCache[i].atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                charAtlasCache[i].ownedBy.splice(index, 1);
            }
            break;
        }
    }
}
exports.removeTerminalFromCache = removeTerminalFromCache;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var NULL_COLOR = {
    css: '',
    rgba: 0
};
function generateConfig(scaledCharWidth, scaledCharHeight, terminal, colors) {
    var clonedColors = {
        foreground: colors.foreground,
        background: colors.background,
        cursor: NULL_COLOR,
        cursorAccent: NULL_COLOR,
        selection: NULL_COLOR,
        ansi: colors.ansi.slice()
    };
    return {
        devicePixelRatio: window.devicePixelRatio,
        scaledCharWidth: scaledCharWidth,
        scaledCharHeight: scaledCharHeight,
        fontFamily: terminal.getOption('fontFamily'),
        fontSize: terminal.getOption('fontSize'),
        fontWeight: terminal.getOption('fontWeight'),
        fontWeightBold: terminal.getOption('fontWeightBold'),
        allowTransparency: terminal.getOption('allowTransparency'),
        colors: clonedColors
    };
}
exports.generateConfig = generateConfig;
function configEquals(a, b) {
    for (var i = 0; i < a.colors.ansi.length; i++) {
        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {
            return false;
        }
    }
    return a.devicePixelRatio === b.devicePixelRatio &&
        a.fontFamily === b.fontFamily &&
        a.fontSize === b.fontSize &&
        a.fontWeight === b.fontWeight &&
        a.fontWeightBold === b.fontWeightBold &&
        a.allowTransparency === b.allowTransparency &&
        a.scaledCharWidth === b.scaledCharWidth &&
        a.scaledCharHeight === b.scaledCharHeight &&
        a.colors.foreground === b.colors.foreground &&
        a.colors.background === b.colors.background;
}
exports.configEquals = configEquals;
function is256Color(colorCode) {
    return colorCode < Constants_1.DEFAULT_COLOR;
}
exports.is256Color = is256Color;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js":
/*!**************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/atlas/WebglCharAtlas.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! ./CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var WebglUtils_1 = __webpack_require__(/*! ../WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var TEXTURE_WIDTH = 1024;
var TEXTURE_HEIGHT = 1024;
var TEXTURE_CAPACITY = Math.floor(TEXTURE_HEIGHT * 0.8);
var TRANSPARENT_COLOR = {
    css: 'rgba(0, 0, 0, 0)',
    rgba: 0
};
var NULL_RASTERIZED_GLYPH = {
    offset: { x: 0, y: 0 },
    texturePosition: { x: 0, y: 0 },
    texturePositionClipSpace: { x: 0, y: 0 },
    size: { x: 0, y: 0 },
    sizeClipSpace: { x: 0, y: 0 }
};
var TMP_CANVAS_GLYPH_PADDING = 2;
var WebglCharAtlas = (function () {
    function WebglCharAtlas(document, _config) {
        this._config = _config;
        this._didWarmUp = false;
        this._cacheMap = {};
        this._cacheMapCombined = {};
        this._currentRowY = 0;
        this._currentRowX = 0;
        this._currentRowHeight = 0;
        this.hasCanvasChanged = false;
        this._workBoundingBox = { top: 0, left: 0, bottom: 0, right: 0 };
        this.cacheCanvas = document.createElement('canvas');
        this.cacheCanvas.width = TEXTURE_WIDTH;
        this.cacheCanvas.height = TEXTURE_HEIGHT;
        this._cacheCtx = WebglUtils_1.throwIfFalsy(this.cacheCanvas.getContext('2d', { alpha: true }));
        this._tmpCanvas = document.createElement('canvas');
        this._tmpCanvas.width = this._config.scaledCharWidth * 2 + TMP_CANVAS_GLYPH_PADDING * 2;
        this._tmpCanvas.height = this._config.scaledCharHeight + TMP_CANVAS_GLYPH_PADDING * 2;
        this._tmpCtx = WebglUtils_1.throwIfFalsy(this._tmpCanvas.getContext('2d', { alpha: this._config.allowTransparency }));
        document.body.appendChild(this.cacheCanvas);
    }
    WebglCharAtlas.prototype.dispose = function () {
        if (this.cacheCanvas.parentElement) {
            this.cacheCanvas.parentElement.removeChild(this.cacheCanvas);
        }
    };
    WebglCharAtlas.prototype.warmUp = function () {
        if (!this._didWarmUp) {
            this._doWarmUp();
            this._didWarmUp = true;
        }
    };
    WebglCharAtlas.prototype._doWarmUp = function () {
        var _a;
        for (var i = 33; i < 126; i++) {
            var rasterizedGlyph = this._drawToCache(i, Constants_2.DEFAULT_ATTR, Constants_2.DEFAULT_COLOR, Constants_2.DEFAULT_COLOR);
            this._cacheMap[i] = (_a = {},
                _a[Constants_2.DEFAULT_ATTR] = rasterizedGlyph,
                _a);
        }
    };
    WebglCharAtlas.prototype.beginFrame = function () {
        if (this._currentRowY > TEXTURE_CAPACITY) {
            this._cacheCtx.clearRect(0, 0, TEXTURE_WIDTH, TEXTURE_HEIGHT);
            this._cacheMap = {};
            this._currentRowHeight = 0;
            this._currentRowX = 0;
            this._currentRowY = 0;
            this._doWarmUp();
            return true;
        }
        return false;
    };
    WebglCharAtlas.prototype.getRasterizedGlyphCombinedChar = function (chars, attr, bg, fg) {
        var rasterizedGlyphSet = this._cacheMapCombined[chars];
        if (!rasterizedGlyphSet) {
            rasterizedGlyphSet = {};
            this._cacheMapCombined[chars] = rasterizedGlyphSet;
        }
        var rasterizedGlyph = rasterizedGlyphSet[attr];
        if (!rasterizedGlyph) {
            rasterizedGlyph = this._drawToCache(chars, attr, bg, fg);
            rasterizedGlyphSet[attr] = rasterizedGlyph;
        }
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype.getRasterizedGlyph = function (code, attr, bg, fg) {
        var rasterizedGlyphSet = this._cacheMap[code];
        if (!rasterizedGlyphSet) {
            rasterizedGlyphSet = {};
            this._cacheMap[code] = rasterizedGlyphSet;
        }
        var rasterizedGlyph = rasterizedGlyphSet[attr];
        if (!rasterizedGlyph) {
            rasterizedGlyph = this._drawToCache(code, attr, bg, fg);
            rasterizedGlyphSet[attr] = rasterizedGlyph;
        }
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx >= this._config.colors.ansi.length) {
            throw new Error('No color found for idx ' + idx);
        }
        return this._config.colors.ansi[idx];
    };
    WebglCharAtlas.prototype._getBackgroundColor = function (bg) {
        if (this._config.allowTransparency) {
            return TRANSPARENT_COLOR;
        }
        else if (bg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.foreground;
        }
        else if (CharAtlasUtils_1.is256Color(bg)) {
            return this._getColorFromAnsiIndex(bg);
        }
        return this._config.colors.background;
    };
    WebglCharAtlas.prototype._getForegroundColor = function (fg) {
        if (fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.background;
        }
        else if (CharAtlasUtils_1.is256Color(fg)) {
            return this._getColorFromAnsiIndex(fg);
        }
        return this._config.colors.foreground;
    };
    WebglCharAtlas.prototype._drawToCache = function (codeOrChars, attr, bg, fg) {
        var chars = typeof codeOrChars === 'number' ? String.fromCharCode(codeOrChars) : codeOrChars;
        this.hasCanvasChanged = true;
        var flags = attr >> 18;
        var bold = !!(flags & 1);
        var dim = !!(flags & 32);
        var italic = !!(flags & 64);
        this._tmpCtx.save();
        var backgroundColor = this._getBackgroundColor(bg);
        this._tmpCtx.globalCompositeOperation = 'copy';
        this._tmpCtx.fillStyle = backgroundColor.css;
        this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
        this._tmpCtx.globalCompositeOperation = 'source-over';
        var fontWeight = bold ? this._config.fontWeightBold : this._config.fontWeight;
        var fontStyle = italic ? 'italic' : '';
        this._tmpCtx.font =
            fontStyle + " " + fontWeight + " " + this._config.fontSize * this._config.devicePixelRatio + "px " + this._config.fontFamily;
        this._tmpCtx.textBaseline = 'top';
        this._tmpCtx.fillStyle = this._getForegroundColor(fg).css;
        if (dim) {
            this._tmpCtx.globalAlpha = Constants_1.DIM_OPACITY;
        }
        this._tmpCtx.fillText(chars, TMP_CANVAS_GLYPH_PADDING, TMP_CANVAS_GLYPH_PADDING);
        this._tmpCtx.restore();
        var imageData = this._tmpCtx.getImageData(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);
        var isEmpty = clearColor(imageData, backgroundColor);
        if (isEmpty) {
            return NULL_RASTERIZED_GLYPH;
        }
        var rasterizedGlyph = this._findGlyphBoundingBox(imageData, this._workBoundingBox);
        var clippedImageData = this._clipImageData(imageData, this._workBoundingBox);
        if (this._currentRowX + this._config.scaledCharWidth > TEXTURE_WIDTH) {
            this._currentRowX = 0;
            this._currentRowY += this._currentRowHeight;
            this._currentRowHeight = 0;
        }
        rasterizedGlyph.texturePosition.x = this._currentRowX;
        rasterizedGlyph.texturePosition.y = this._currentRowY;
        rasterizedGlyph.texturePositionClipSpace.x = this._currentRowX / TEXTURE_WIDTH;
        rasterizedGlyph.texturePositionClipSpace.y = this._currentRowY / TEXTURE_HEIGHT;
        this._currentRowHeight = Math.max(this._currentRowHeight, rasterizedGlyph.size.y);
        this._currentRowX += rasterizedGlyph.size.x;
        this._cacheCtx.putImageData(clippedImageData, rasterizedGlyph.texturePosition.x, rasterizedGlyph.texturePosition.y);
        return rasterizedGlyph;
    };
    WebglCharAtlas.prototype._findGlyphBoundingBox = function (imageData, boundingBox) {
        boundingBox.top = 0;
        var found = false;
        for (var y = 0; y < this._tmpCanvas.height; y++) {
            for (var x = 0; x < this._tmpCanvas.width; x++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.top = y;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.left = 0;
        found = false;
        for (var x = 0; x < this._tmpCanvas.width; x++) {
            for (var y = 0; y < this._tmpCanvas.height; y++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.left = x;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.right = this._tmpCanvas.width;
        found = false;
        for (var x = this._tmpCanvas.width - 1; x >= 0; x--) {
            for (var y = 0; y < this._tmpCanvas.height; y++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.right = x;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        boundingBox.bottom = this._tmpCanvas.height;
        found = false;
        for (var y = this._tmpCanvas.height - 1; y >= 0; y--) {
            for (var x = 0; x < this._tmpCanvas.width; x++) {
                var alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;
                if (imageData.data[alphaOffset] !== 0) {
                    boundingBox.bottom = y;
                    found = true;
                    break;
                }
            }
            if (found) {
                break;
            }
        }
        return {
            texturePosition: { x: 0, y: 0 },
            texturePositionClipSpace: { x: 0, y: 0 },
            size: {
                x: boundingBox.right - boundingBox.left + 1,
                y: boundingBox.bottom - boundingBox.top + 1
            },
            sizeClipSpace: {
                x: (boundingBox.right - boundingBox.left + 1) / TEXTURE_WIDTH,
                y: (boundingBox.bottom - boundingBox.top + 1) / TEXTURE_HEIGHT
            },
            offset: {
                x: -boundingBox.left + TMP_CANVAS_GLYPH_PADDING,
                y: -boundingBox.top + TMP_CANVAS_GLYPH_PADDING
            }
        };
    };
    WebglCharAtlas.prototype._clipImageData = function (imageData, boundingBox) {
        var width = boundingBox.right - boundingBox.left + 1;
        var height = boundingBox.bottom - boundingBox.top + 1;
        var clippedData = new Uint8ClampedArray(width * height * 4);
        for (var y = boundingBox.top; y <= boundingBox.bottom; y++) {
            for (var x = boundingBox.left; x <= boundingBox.right; x++) {
                var oldOffset = y * this._tmpCanvas.width * 4 + x * 4;
                var newOffset = (y - boundingBox.top) * width * 4 + (x - boundingBox.left) * 4;
                clippedData[newOffset] = imageData.data[oldOffset];
                clippedData[newOffset + 1] = imageData.data[oldOffset + 1];
                clippedData[newOffset + 2] = imageData.data[oldOffset + 2];
                clippedData[newOffset + 3] = imageData.data[oldOffset + 3];
            }
        }
        return new ImageData(clippedData, width, height);
    };
    return WebglCharAtlas;
}());
exports.WebglCharAtlas = WebglCharAtlas;
function clearColor(imageData, color) {
    var isEmpty = true;
    var r = color.rgba >>> 24;
    var g = color.rgba >>> 16 & 0xFF;
    var b = color.rgba >>> 8 & 0xFF;
    for (var offset = 0; offset < imageData.data.length; offset += 4) {
        if (imageData.data[offset] === r &&
            imageData.data[offset + 1] === g &&
            imageData.data[offset + 2] === b) {
            imageData.data[offset + 3] = 0;
        }
        else {
            isEmpty = false;
        }
    }
    return isEmpty;
}


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js":
/*!*********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharAtlasCache_1 = __webpack_require__(/*! ../atlas/CharAtlasCache */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasCache.js");
var WebglUtils_1 = __webpack_require__(/*! ../WebglUtils */ "./addons/xterm-addon-webgl/out/WebglUtils.js");
var BaseRenderLayer = (function () {
    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors) {
        this._container = _container;
        this._alpha = _alpha;
        this._colors = _colors;
        this._scaledCharWidth = 0;
        this._scaledCharHeight = 0;
        this._scaledCellWidth = 0;
        this._scaledCellHeight = 0;
        this._scaledCharLeft = 0;
        this._scaledCharTop = 0;
        this._currentGlyphIdentifier = {
            chars: '',
            code: 0,
            bg: 0,
            fg: 0,
            bold: false,
            dim: false,
            italic: false
        };
        this._canvas = document.createElement('canvas');
        this._canvas.classList.add("xterm-" + id + "-layer");
        this._canvas.style.zIndex = zIndex.toString();
        this._initCanvas();
        this._container.appendChild(this._canvas);
    }
    BaseRenderLayer.prototype.dispose = function () {
        this._container.removeChild(this._canvas);
        if (this._charAtlas) {
            this._charAtlas.dispose();
        }
    };
    BaseRenderLayer.prototype._initCanvas = function () {
        this._ctx = WebglUtils_1.throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));
        if (!this._alpha) {
            this._clearAll();
        }
    };
    BaseRenderLayer.prototype.onOptionsChanged = function (terminal) { };
    BaseRenderLayer.prototype.onBlur = function (terminal) { };
    BaseRenderLayer.prototype.onFocus = function (terminal) { };
    BaseRenderLayer.prototype.onCursorMove = function (terminal) { };
    BaseRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) { };
    BaseRenderLayer.prototype.onSelectionChanged = function (terminal, start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
    };
    BaseRenderLayer.prototype.setColors = function (terminal, colorSet) {
        this._refreshCharAtlas(terminal, colorSet);
    };
    BaseRenderLayer.prototype._setTransparency = function (terminal, alpha) {
        if (alpha === this._alpha) {
            return;
        }
        var oldCanvas = this._canvas;
        this._alpha = alpha;
        this._canvas = this._canvas.cloneNode();
        this._initCanvas();
        this._container.replaceChild(this._canvas, oldCanvas);
        this._refreshCharAtlas(terminal, this._colors);
        this.onGridChanged(terminal, 0, terminal.rows - 1);
    };
    BaseRenderLayer.prototype._refreshCharAtlas = function (terminal, colorSet) {
        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {
            return;
        }
        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(terminal, colorSet, this._scaledCharWidth, this._scaledCharHeight);
        this._charAtlas.warmUp();
    };
    BaseRenderLayer.prototype.resize = function (terminal, dim) {
        this._scaledCellWidth = dim.scaledCellWidth;
        this._scaledCellHeight = dim.scaledCellHeight;
        this._scaledCharWidth = dim.scaledCharWidth;
        this._scaledCharHeight = dim.scaledCharHeight;
        this._scaledCharLeft = dim.scaledCharLeft;
        this._scaledCharTop = dim.scaledCharTop;
        this._canvas.width = dim.scaledCanvasWidth;
        this._canvas.height = dim.scaledCanvasHeight;
        this._canvas.style.width = dim.canvasWidth + "px";
        this._canvas.style.height = dim.canvasHeight + "px";
        if (!this._alpha) {
            this._clearAll();
        }
        this._refreshCharAtlas(terminal, this._colors);
    };
    BaseRenderLayer.prototype._fillCells = function (x, y, width, height) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._fillBottomLineAtCells = function (x, y, width) {
        if (width === void 0) { width = 1; }
        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._fillLeftLineAtCell = function (x, y) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._strokeRectAtCell = function (x, y, width, height) {
        this._ctx.lineWidth = window.devicePixelRatio;
        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._clearAll = function () {
        if (this._alpha) {
            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);
        }
    };
    BaseRenderLayer.prototype._clearCells = function (x, y, width, height) {
        if (this._alpha) {
            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
    };
    BaseRenderLayer.prototype._fillCharTrueColor = function (terminal, cell, x, y) {
        this._ctx.font = this._getFont(terminal, false, false);
        this._ctx.textBaseline = 'middle';
        this._clipRow(terminal, y);
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
    };
    BaseRenderLayer.prototype._clipRow = function (terminal, y) {
        this._ctx.beginPath();
        this._ctx.rect(0, y * this._scaledCellHeight, terminal.cols * this._scaledCellWidth, this._scaledCellHeight);
        this._ctx.clip();
    };
    BaseRenderLayer.prototype._getFont = function (terminal, isBold, isItalic) {
        var fontWeight = isBold ? terminal.getOption('fontWeightBold') : terminal.getOption('fontWeight');
        var fontStyle = isItalic ? 'italic' : '';
        return fontStyle + " " + fontWeight + " " + terminal.getOption('fontSize') * window.devicePixelRatio + "px " + terminal.getOption('fontFamily');
    };
    return BaseRenderLayer;
}());
exports.BaseRenderLayer = BaseRenderLayer;


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js":
/*!***********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/CursorRenderLayer.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var BLINK_INTERVAL = 600;
var CursorRenderLayer = (function (_super) {
    __extends(CursorRenderLayer, _super);
    function CursorRenderLayer(container, zIndex, colors) {
        var _this = _super.call(this, container, 'cursor', zIndex, true, colors) || this;
        _this._cell = new CellData_1.CellData();
        _this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
        _this._cursorRenderers = {
            'bar': _this._renderBarCursor.bind(_this),
            'block': _this._renderBlockCursor.bind(_this),
            'underline': _this._renderUnderlineCursor.bind(_this)
        };
        return _this;
    }
    CursorRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = {
            x: 0,
            y: 0,
            isFocused: false,
            style: '',
            width: 0
        };
    };
    CursorRenderLayer.prototype.reset = function (terminal) {
        this._clearCursor();
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.dispose();
            this.onOptionsChanged(terminal);
        }
    };
    CursorRenderLayer.prototype.onBlur = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.pause();
        }
        terminal.refresh(terminal.buffer.cursorY, terminal.buffer.cursorY);
    };
    CursorRenderLayer.prototype.onFocus = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.resume(terminal);
        }
        else {
            terminal.refresh(terminal.buffer.cursorY, terminal.buffer.cursorY);
        }
    };
    CursorRenderLayer.prototype.onOptionsChanged = function (terminal) {
        var _this = this;
        if (terminal.getOption('cursorBlink')) {
            if (!this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager = new CursorBlinkStateManager(terminal, function () {
                    _this._render(terminal, true);
                });
            }
        }
        else {
            if (this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager.dispose();
            }
            terminal.refresh(terminal.buffer.cursorY, terminal.buffer.cursorY);
        }
    };
    CursorRenderLayer.prototype.onCursorMove = function (terminal) {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype.onGridChanged = function (terminal, startRow, endRow) {
        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {
            this._render(terminal, false);
        }
        else {
            this._cursorBlinkStateManager.restartBlinkAnimation(terminal);
        }
    };
    CursorRenderLayer.prototype._render = function (terminal, triggeredByAnimationFrame) {
        if (!terminal._core.cursorState || terminal._core.cursorHidden) {
            this._clearCursor();
            return;
        }
        var cursorY = terminal.buffer.baseY + terminal.buffer.cursorY;
        var viewportRelativeCursorY = cursorY - terminal.buffer.viewportY;
        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= terminal.rows) {
            this._clearCursor();
            return;
        }
        terminal._core.buffer.lines.get(cursorY).loadCell(terminal.buffer.cursorX, this._cell);
        if (this._cell.content === undefined) {
            return;
        }
        if (!isTerminalFocused(terminal)) {
            this._clearCursor();
            this._ctx.save();
            this._ctx.fillStyle = this._colors.cursor.css;
            this._renderBlurCursor(terminal, terminal.buffer.cursorX, viewportRelativeCursorY, this._cell);
            this._ctx.restore();
            this._state.x = terminal.buffer.cursorX;
            this._state.y = viewportRelativeCursorY;
            this._state.isFocused = false;
            this._state.style = terminal.getOption('cursorStyle');
            this._state.width = this._cell.getWidth();
            return;
        }
        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {
            this._clearCursor();
            return;
        }
        if (this._state) {
            if (this._state.x === terminal.buffer.cursorX &&
                this._state.y === viewportRelativeCursorY &&
                this._state.isFocused === isTerminalFocused(terminal) &&
                this._state.style === terminal.getOption('cursorStyle') &&
                this._state.width === this._cell.getWidth()) {
                return;
            }
            this._clearCursor();
        }
        this._ctx.save();
        this._cursorRenderers[terminal.getOption('cursorStyle') || 'block'](terminal, terminal.buffer.cursorX, viewportRelativeCursorY, this._cell);
        this._ctx.restore();
        this._state.x = terminal.buffer.cursorX;
        this._state.y = viewportRelativeCursorY;
        this._state.isFocused = false;
        this._state.style = terminal.getOption('cursorStyle');
        this._state.width = this._cell.getWidth();
    };
    CursorRenderLayer.prototype._clearCursor = function () {
        if (this._state) {
            this._clearCells(this._state.x, this._state.y, this._state.width, 1);
            this._state = {
                x: 0,
                y: 0,
                isFocused: false,
                style: '',
                width: 0
            };
        }
    };
    CursorRenderLayer.prototype._renderBarCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillLeftLineAtCell(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlockCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillCells(x, y, cell.getWidth(), 1);
        this._ctx.fillStyle = this._colors.cursorAccent.css;
        this._fillCharTrueColor(terminal, cell, x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderUnderlineCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillBottomLineAtCells(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlurCursor = function (terminal, x, y, cell) {
        this._ctx.save();
        this._ctx.strokeStyle = this._colors.cursor.css;
        this._strokeRectAtCell(x, y, cell.getWidth(), 1);
        this._ctx.restore();
    };
    return CursorRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.CursorRenderLayer = CursorRenderLayer;
var CursorBlinkStateManager = (function () {
    function CursorBlinkStateManager(terminal, _renderCallback) {
        this._renderCallback = _renderCallback;
        this.isCursorVisible = true;
        if (isTerminalFocused(terminal)) {
            this._restartInterval();
        }
    }
    Object.defineProperty(CursorBlinkStateManager.prototype, "isPaused", {
        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },
        enumerable: true,
        configurable: true
    });
    CursorBlinkStateManager.prototype.dispose = function () {
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.restartBlinkAnimation = function (terminal) {
        var _this = this;
        if (this.isPaused) {
            return;
        }
        this._animationTimeRestarted = Date.now();
        this.isCursorVisible = true;
        if (!this._animationFrame) {
            this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
        }
    };
    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {
        var _this = this;
        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
        }
        this._blinkStartTimeout = setTimeout(function () {
            if (_this._animationTimeRestarted) {
                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                _this._animationTimeRestarted = undefined;
                if (time > 0) {
                    _this._restartInterval(time);
                    return;
                }
            }
            _this.isCursorVisible = false;
            _this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = undefined;
            });
            _this._blinkInterval = setInterval(function () {
                if (_this._animationTimeRestarted) {
                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                    _this._animationTimeRestarted = undefined;
                    _this._restartInterval(time);
                    return;
                }
                _this.isCursorVisible = !_this.isCursorVisible;
                _this._animationFrame = window.requestAnimationFrame(function () {
                    _this._renderCallback();
                    _this._animationFrame = undefined;
                });
            }, BLINK_INTERVAL);
        }, timeToStart);
    };
    CursorBlinkStateManager.prototype.pause = function () {
        this.isCursorVisible = true;
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = undefined;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = undefined;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    CursorBlinkStateManager.prototype.resume = function (terminal) {
        this._animationTimeRestarted = undefined;
        this._restartInterval();
        this.restartBlinkAnimation(terminal);
    };
    return CursorBlinkStateManager;
}());
function isTerminalFocused(terminal) {
    return document.activeElement === terminal.textarea && document.hasFocus();
}


/***/ }),

/***/ "./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js":
/*!*********************************************************************!*\
  !*** ./addons/xterm-addon-webgl/out/renderLayer/LinkRenderLayer.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./addons/xterm-addon-webgl/out/renderLayer/BaseRenderLayer.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! ../atlas/CharAtlasUtils */ "./addons/xterm-addon-webgl/out/atlas/CharAtlasUtils.js");
var LinkRenderLayer = (function (_super) {
    __extends(LinkRenderLayer, _super);
    function LinkRenderLayer(container, zIndex, colors, terminal) {
        var _this = _super.call(this, container, 'link', zIndex, true, colors) || this;
        terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    LinkRenderLayer.prototype.resize = function (terminal, dim) {
        _super.prototype.resize.call(this, terminal, dim);
        this._state = undefined;
    };
    LinkRenderLayer.prototype.reset = function (terminal) {
        this._clearCurrentLink();
    };
    LinkRenderLayer.prototype._clearCurrentLink = function () {
        if (this._state) {
            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
            var middleRowCount = this._state.y2 - this._state.y1 - 1;
            if (middleRowCount > 0) {
                this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);
            }
            this._clearCells(0, this._state.y2, this._state.x2, 1);
            this._state = undefined;
        }
    };
    LinkRenderLayer.prototype._onLinkHover = function (e) {
        if (e.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            this._ctx.fillStyle = this._colors.background.css;
        }
        else if (e.fg !== undefined && CharAtlasUtils_1.is256Color(e.fg)) {
            this._ctx.fillStyle = this._colors.ansi[e.fg].css;
        }
        else {
            this._ctx.fillStyle = this._colors.foreground.css;
        }
        if (e.y1 === e.y2) {
            this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
        }
        else {
            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
            for (var y = e.y1 + 1; y < e.y2; y++) {
                this._fillBottomLineAtCells(0, y, e.cols);
            }
            this._fillBottomLineAtCells(0, e.y2, e.x2);
        }
        this._state = e;
    };
    LinkRenderLayer.prototype._onLinkLeave = function (e) {
        this._clearCurrentLink();
    };
    return LinkRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.LinkRenderLayer = LinkRenderLayer;


/***/ }),

/***/ "./demo/client.ts":
/*!************************!*\
  !*** ./demo/client.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Copyright (c) 2018 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * This file is the entry point for browserify.
 */
Object.defineProperty(exports, "__esModule", { value: true });
/// <reference path="../typings/xterm.d.ts"/>
// Use tsc version (yarn watch)
const Terminal_1 = __webpack_require__(/*! ../out/public/Terminal */ "./out/public/Terminal.js");
const AttachAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-attach/out/AttachAddon */ "./addons/xterm-addon-attach/out/AttachAddon.js");
const FitAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-fit/out/FitAddon */ "./addons/xterm-addon-fit/out/FitAddon.js");
const SearchAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-search/out/SearchAddon */ "./addons/xterm-addon-search/out/SearchAddon.js");
const WebLinksAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-web-links/out/WebLinksAddon */ "./addons/xterm-addon-web-links/out/WebLinksAddon.js");
const WebglAddon_1 = __webpack_require__(/*! ../addons/xterm-addon-webgl/out/WebglAddon */ "./addons/xterm-addon-webgl/out/WebglAddon.js");
let term;
let fitAddon;
let searchAddon;
let protocol;
let socketURL;
let socket;
let pid;
const terminalContainer = document.getElementById('terminal-container');
const actionElements = {
    findNext: document.querySelector('#find-next'),
    findPrevious: document.querySelector('#find-previous')
};
const paddingElement = document.getElementById('padding');
function setPadding() {
    term.element.style.padding = parseInt(paddingElement.value, 10).toString() + 'px';
    term.fit();
}
function getSearchOptions(e) {
    return {
        regex: document.getElementById('regex').checked,
        wholeWord: document.getElementById('whole-word').checked,
        caseSensitive: document.getElementById('case-sensitive').checked,
        incremental: e.key !== `Enter`
    };
}
const disposeRecreateButtonHandler = () => {
    // If the terminal exists dispose of it, otherwise recreate it
    if (term) {
        term.dispose();
        term = null;
        window.term = null;
        socket = null;
        document.getElementById('dispose').innerHTML = 'Recreate Terminal';
    }
    else {
        createTerminal();
        document.getElementById('dispose').innerHTML = 'Dispose terminal';
    }
};
if (document.location.pathname === '/test') {
    window.Terminal = Terminal_1.Terminal;
    window.AttachAddon = AttachAddon_1.AttachAddon;
    window.FitAddon = FitAddon_1.FitAddon;
    window.SearchAddon = SearchAddon_1.SearchAddon;
    window.WebLinksAddon = WebLinksAddon_1.WebLinksAddon;
    window.WebglAddon = WebglAddon_1.WebglAddon;
}
else {
    createTerminal();
    document.getElementById('dispose').addEventListener('click', disposeRecreateButtonHandler);
    document.getElementById('webgl').addEventListener('click', () => term.loadAddon(new WebglAddon_1.WebglAddon()));
}
function createTerminal() {
    // Clean terminal
    while (terminalContainer.children.length) {
        terminalContainer.removeChild(terminalContainer.children[0]);
    }
    const isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].indexOf(navigator.platform) >= 0;
    term = new Terminal_1.Terminal({
        windowsMode: isWindows
    });
    // Load addons
    const typedTerm = term;
    typedTerm.loadAddon(new WebLinksAddon_1.WebLinksAddon());
    searchAddon = new SearchAddon_1.SearchAddon();
    typedTerm.loadAddon(searchAddon);
    fitAddon = new FitAddon_1.FitAddon();
    typedTerm.loadAddon(fitAddon);
    window.term = term; // Expose `term` to window for debugging purposes
    term.onResize((size) => {
        if (!pid) {
            return;
        }
        const cols = size.cols;
        const rows = size.rows;
        const url = '/terminals/' + pid + '/size?cols=' + cols + '&rows=' + rows;
        fetch(url, { method: 'POST' });
    });
    protocol = (location.protocol === 'https:') ? 'wss://' : 'ws://';
    socketURL = protocol + location.hostname + ((location.port) ? (':' + location.port) : '') + '/terminals/';
    term.open(terminalContainer);
    fitAddon.fit();
    term.focus();
    addDomListener(paddingElement, 'change', setPadding);
    addDomListener(actionElements.findNext, 'keyup', (e) => {
        searchAddon.findNext(actionElements.findNext.value, getSearchOptions(e));
    });
    addDomListener(actionElements.findPrevious, 'keyup', (e) => {
        searchAddon.findPrevious(actionElements.findPrevious.value, getSearchOptions(e));
    });
    // fit is called within a setTimeout, cols and rows need this.
    setTimeout(() => {
        initOptions(term);
        // TODO: Clean this up, opt-cols/rows doesn't exist anymore
        document.getElementById(`opt-cols`).value = term.cols;
        document.getElementById(`opt-rows`).value = term.rows;
        paddingElement.value = '0';
        // Set terminal size again to set the specific dimensions on the demo
        updateTerminalSize();
        fetch('/terminals?cols=' + term.cols + '&rows=' + term.rows, { method: 'POST' }).then((res) => {
            res.text().then((processId) => {
                pid = processId;
                socketURL += processId;
                socket = new WebSocket(socketURL);
                socket.onopen = runRealTerminal;
                socket.onclose = runFakeTerminal;
                socket.onerror = runFakeTerminal;
            });
        });
    }, 0);
}
function runRealTerminal() {
    /**
     * The demo defaults to string transport by default.
     * To run it with UTF8 binary transport, swap comment on
     * the lines below. (Must also be switched in server.js)
     */
    term.loadAddon(new AttachAddon_1.AttachAddon(socket));
    // term.loadAddon(new AttachAddon(socket, {inputUtf8: true}));
    term._initialized = true;
}
function runFakeTerminal() {
    if (term._initialized) {
        return;
    }
    term._initialized = true;
    term.prompt = () => {
        term.write('\r\n$ ');
    };
    term.writeln('Welcome to xterm.js');
    term.writeln('This is a local terminal emulation, without a real terminal in the back-end.');
    term.writeln('Type some keys and commands to play around.');
    term.writeln('');
    term.prompt();
    term.onKey((e) => {
        const ev = e.domEvent;
        const printable = !ev.altKey && !ev.ctrlKey && !ev.metaKey;
        if (ev.keyCode === 13) {
            term.prompt();
        }
        else if (ev.keyCode === 8) {
            // Do not delete the prompt
            if (term._core.buffer.x > 2) {
                term.write('\b \b');
            }
        }
        else if (printable) {
            term.write(e.key);
        }
    });
}
function initOptions(term) {
    const blacklistedOptions = [
        // Internal only options
        'cancelEvents',
        'convertEol',
        'handler',
        'screenKeys',
        'termName',
        'useFlowControl',
        // Complex option
        'theme'
    ];
    const stringOptions = {
        bellSound: null,
        bellStyle: ['none', 'sound'],
        cursorStyle: ['block', 'underline', 'bar'],
        fontFamily: null,
        fontWeight: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        fontWeightBold: ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],
        logLevel: ['debug', 'info', 'warn', 'error', 'off'],
        rendererType: ['dom', 'canvas'],
        wordSeparator: null
    };
    const options = Object.keys(term._core.options);
    const booleanOptions = [];
    const numberOptions = [];
    options.filter(o => blacklistedOptions.indexOf(o) === -1).forEach(o => {
        switch (typeof term.getOption(o)) {
            case 'boolean':
                booleanOptions.push(o);
                break;
            case 'number':
                numberOptions.push(o);
                break;
            default:
                if (Object.keys(stringOptions).indexOf(o) === -1) {
                    console.warn(`Unrecognized option: "${o}"`);
                }
        }
    });
    let html = '';
    html += '<div class="option-group">';
    booleanOptions.forEach(o => {
        html += `<div class="option"><label><input id="opt-${o}" type="checkbox" ${term.getOption(o) ? 'checked' : ''}/> ${o}</label></div>`;
    });
    html += '</div><div class="option-group">';
    numberOptions.forEach(o => {
        html += `<div class="option"><label>${o} <input id="opt-${o}" type="number" value="${term.getOption(o)}" step="${o === 'lineHeight' ? '0.1' : '1'}"/></label></div>`;
    });
    html += '</div><div class="option-group">';
    Object.keys(stringOptions).forEach(o => {
        if (stringOptions[o]) {
            html += `<div class="option"><label>${o} <select id="opt-${o}">${stringOptions[o].map(v => `<option ${term.getOption(o) === v ? 'selected' : ''}>${v}</option>`).join('')}</select></label></div>`;
        }
        else {
            html += `<div class="option"><label>${o} <input id="opt-${o}" type="text" value="${term.getOption(o)}"/></label></div>`;
        }
    });
    html += '</div>';
    const container = document.getElementById('options-container');
    container.innerHTML = html;
    // Attach listeners
    booleanOptions.forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.checked);
            term.setOption(o, input.checked);
        });
    });
    numberOptions.forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.value);
            if (o === 'cols' || o === 'rows') {
                updateTerminalSize();
            }
            else if (o === 'lineHeight') {
                term.setOption(o, parseFloat(input.value));
                updateTerminalSize();
            }
            else {
                term.setOption(o, parseInt(input.value));
            }
        });
    });
    Object.keys(stringOptions).forEach(o => {
        const input = document.getElementById(`opt-${o}`);
        addDomListener(input, 'change', () => {
            console.log('change', o, input.value);
            term.setOption(o, input.value);
        });
    });
}
function addDomListener(element, type, handler) {
    element.addEventListener(type, handler);
    term._core.register({ dispose: () => element.removeEventListener(type, handler) });
}
function updateTerminalSize() {
    const cols = parseInt(document.getElementById(`opt-cols`).value, 10);
    const rows = parseInt(document.getElementById(`opt-rows`).value, 10);
    const width = (cols * term._core._renderService.dimensions.actualCellWidth + term._core.viewport.scrollBarWidth).toString() + 'px';
    const height = (rows * term._core._renderService.dimensions.actualCellHeight).toString() + 'px';
    terminalContainer.style.width = width;
    terminalContainer.style.height = height;
    fitAddon.fit();
}


/***/ }),

/***/ "./out/AccessibilityManager.js":
/*!*************************************!*\
  !*** ./out/AccessibilityManager.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Strings = __webpack_require__(/*! ./browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var RenderDebouncer_1 = __webpack_require__(/*! browser/RenderDebouncer */ "./out/browser/RenderDebouncer.js");
var Lifecycle_1 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! browser/ScreenDprMonitor */ "./out/browser/ScreenDprMonitor.js");
var MAX_ROWS_TO_READ = 20;
var AccessibilityManager = (function (_super) {
    __extends(AccessibilityManager, _super);
    function AccessibilityManager(_terminal, _renderService) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._renderService = _renderService;
        _this._liveRegionLineCount = 0;
        _this._charsToConsume = [];
        _this._charsToAnnounce = '';
        _this._accessibilityTreeRoot = document.createElement('div');
        _this._accessibilityTreeRoot.classList.add('xterm-accessibility');
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.classList.add('xterm-accessibility-tree');
        _this._rowElements = [];
        for (var i = 0; i < _this._terminal.rows; i++) {
            _this._rowElements[i] = _this._createAccessibilityTreeNode();
            _this._rowContainer.appendChild(_this._rowElements[i]);
        }
        _this._topBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 0); };
        _this._bottomBoundaryFocusListener = function (e) { return _this._onBoundaryFocus(e, 1); };
        _this._rowElements[0].addEventListener('focus', _this._topBoundaryFocusListener);
        _this._rowElements[_this._rowElements.length - 1].addEventListener('focus', _this._bottomBoundaryFocusListener);
        _this._refreshRowsDimensions();
        _this._accessibilityTreeRoot.appendChild(_this._rowContainer);
        _this._renderRowsDebouncer = new RenderDebouncer_1.RenderDebouncer(_this._renderRows.bind(_this));
        _this._refreshRows();
        _this._liveRegion = document.createElement('div');
        _this._liveRegion.classList.add('live-region');
        _this._liveRegion.setAttribute('aria-live', 'assertive');
        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
        _this._terminal.element.insertAdjacentElement('afterbegin', _this._accessibilityTreeRoot);
        _this.register(_this._renderRowsDebouncer);
        _this.register(_this._terminal.onResize(function (e) { return _this._onResize(e.rows); }));
        _this.register(_this._terminal.onRender(function (e) { return _this._refreshRows(e.start, e.end); }));
        _this.register(_this._terminal.onScroll(function () { return _this._refreshRows(); }));
        _this.register(_this._terminal.onA11yChar(function (char) { return _this._onChar(char); }));
        _this.register(_this._terminal.onLineFeed(function () { return _this._onChar('\n'); }));
        _this.register(_this._terminal.onA11yTab(function (spaceCount) { return _this._onTab(spaceCount); }));
        _this.register(_this._terminal.onKey(function (e) { return _this._onKey(e.key); }));
        _this.register(_this._terminal.onBlur(function () { return _this._clearLiveRegion(); }));
        _this.register(_this._renderService.onDimensionsChange(function () { return _this._refreshRowsDimensions(); }));
        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        _this.register(_this._screenDprMonitor);
        _this._screenDprMonitor.setListener(function () { return _this._refreshRowsDimensions(); });
        _this.register(Lifecycle_1.addDisposableDomListener(window, 'resize', function () { return _this._refreshRowsDimensions(); }));
        return _this;
    }
    AccessibilityManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._terminal.element.removeChild(this._accessibilityTreeRoot);
        this._rowElements.length = 0;
    };
    AccessibilityManager.prototype._onBoundaryFocus = function (e, position) {
        var boundaryElement = e.target;
        var beforeBoundaryElement = this._rowElements[position === 0 ? 1 : this._rowElements.length - 2];
        var posInSet = boundaryElement.getAttribute('aria-posinset');
        var lastRowPos = position === 0 ? '1' : "" + this._terminal.buffer.lines.length;
        if (posInSet === lastRowPos) {
            return;
        }
        if (e.relatedTarget !== beforeBoundaryElement) {
            return;
        }
        var topBoundaryElement;
        var bottomBoundaryElement;
        if (position === 0) {
            topBoundaryElement = boundaryElement;
            bottomBoundaryElement = this._rowElements.pop();
            this._rowContainer.removeChild(bottomBoundaryElement);
        }
        else {
            topBoundaryElement = this._rowElements.shift();
            bottomBoundaryElement = boundaryElement;
            this._rowContainer.removeChild(topBoundaryElement);
        }
        topBoundaryElement.removeEventListener('focus', this._topBoundaryFocusListener);
        bottomBoundaryElement.removeEventListener('focus', this._bottomBoundaryFocusListener);
        if (position === 0) {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.unshift(newElement);
            this._rowContainer.insertAdjacentElement('afterbegin', newElement);
        }
        else {
            var newElement = this._createAccessibilityTreeNode();
            this._rowElements.push(newElement);
            this._rowContainer.appendChild(newElement);
        }
        this._rowElements[0].addEventListener('focus', this._topBoundaryFocusListener);
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._terminal.scrollLines(position === 0 ? -1 : 1);
        this._rowElements[position === 0 ? 1 : this._rowElements.length - 2].focus();
        e.preventDefault();
        e.stopImmediatePropagation();
    };
    AccessibilityManager.prototype._onResize = function (rows) {
        this._rowElements[this._rowElements.length - 1].removeEventListener('focus', this._bottomBoundaryFocusListener);
        for (var i = this._rowContainer.children.length; i < this._terminal.rows; i++) {
            this._rowElements[i] = this._createAccessibilityTreeNode();
            this._rowContainer.appendChild(this._rowElements[i]);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
        this._rowElements[this._rowElements.length - 1].addEventListener('focus', this._bottomBoundaryFocusListener);
        this._refreshRowsDimensions();
    };
    AccessibilityManager.prototype._createAccessibilityTreeNode = function () {
        var element = document.createElement('div');
        element.setAttribute('role', 'listitem');
        element.tabIndex = -1;
        this._refreshRowDimensions(element);
        return element;
    };
    AccessibilityManager.prototype._onTab = function (spaceCount) {
        for (var i = 0; i < spaceCount; i++) {
            this._onChar(' ');
        }
    };
    AccessibilityManager.prototype._onChar = function (char) {
        var _this = this;
        if (this._liveRegionLineCount < MAX_ROWS_TO_READ + 1) {
            if (this._charsToConsume.length > 0) {
                var shiftedChar = this._charsToConsume.shift();
                if (shiftedChar !== char) {
                    this._charsToAnnounce += char;
                }
            }
            else {
                this._charsToAnnounce += char;
            }
            if (char === '\n') {
                this._liveRegionLineCount++;
                if (this._liveRegionLineCount === MAX_ROWS_TO_READ + 1) {
                    this._liveRegion.textContent += Strings.tooMuchOutput;
                }
            }
            if (Platform_1.isMac) {
                if (this._liveRegion.textContent && this._liveRegion.textContent.length > 0 && !this._liveRegion.parentNode) {
                    setTimeout(function () {
                        _this._accessibilityTreeRoot.appendChild(_this._liveRegion);
                    }, 0);
                }
            }
        }
    };
    AccessibilityManager.prototype._clearLiveRegion = function () {
        this._liveRegion.textContent = '';
        this._liveRegionLineCount = 0;
        if (Platform_1.isMac) {
            if (this._liveRegion.parentNode) {
                this._accessibilityTreeRoot.removeChild(this._liveRegion);
            }
        }
    };
    AccessibilityManager.prototype._onKey = function (keyChar) {
        this._clearLiveRegion();
        this._charsToConsume.push(keyChar);
    };
    AccessibilityManager.prototype._refreshRows = function (start, end) {
        this._renderRowsDebouncer.refresh(start, end, this._terminal.rows);
    };
    AccessibilityManager.prototype._renderRows = function (start, end) {
        var buffer = this._terminal.buffer;
        var setSize = buffer.lines.length.toString();
        for (var i = start; i <= end; i++) {
            var lineData = buffer.translateBufferLineToString(buffer.ydisp + i, true);
            var posInSet = (buffer.ydisp + i + 1).toString();
            var element = this._rowElements[i];
            if (element) {
                if (lineData.length === 0) {
                    element.innerHTML = '&nbsp;';
                }
                else {
                    element.textContent = lineData;
                }
                element.setAttribute('aria-posinset', posInSet);
                element.setAttribute('aria-setsize', setSize);
            }
        }
        this._announceCharacters();
    };
    AccessibilityManager.prototype._refreshRowsDimensions = function () {
        if (!this._renderService.dimensions.actualCellHeight) {
            return;
        }
        if (this._rowElements.length !== this._terminal.rows) {
            this._onResize(this._terminal.rows);
        }
        for (var i = 0; i < this._terminal.rows; i++) {
            this._refreshRowDimensions(this._rowElements[i]);
        }
    };
    AccessibilityManager.prototype._refreshRowDimensions = function (element) {
        element.style.height = this._renderService.dimensions.actualCellHeight + "px";
    };
    AccessibilityManager.prototype._announceCharacters = function () {
        if (this._charsToAnnounce.length === 0) {
            return;
        }
        this._liveRegion.textContent += this._charsToAnnounce;
        this._charsToAnnounce = '';
    };
    return AccessibilityManager;
}(Lifecycle_2.Disposable));
exports.AccessibilityManager = AccessibilityManager;


/***/ }),

/***/ "./out/InputHandler.js":
/*!*****************************!*\
  !*** ./out/InputHandler.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var Charsets_1 = __webpack_require__(/*! common/data/Charsets */ "./out/common/data/Charsets.js");
var CharWidth_1 = __webpack_require__(/*! common/CharWidth */ "./out/common/CharWidth.js");
var EscapeSequenceParser_1 = __webpack_require__(/*! common/parser/EscapeSequenceParser */ "./out/common/parser/EscapeSequenceParser.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var OscParser_1 = __webpack_require__(/*! common/parser/OscParser */ "./out/common/parser/OscParser.js");
var DcsParser_1 = __webpack_require__(/*! common/parser/DcsParser */ "./out/common/parser/DcsParser.js");
var GLEVEL = { '(': 0, ')': 1, '*': 2, '+': 3, '-': 1, '.': 2 };
var DECRQSS = (function () {
    function DECRQSS(_bufferService, _coreService, _logService, _optionsService) {
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._logService = _logService;
        this._optionsService = _optionsService;
        this._data = new Uint32Array(0);
    }
    DECRQSS.prototype.hook = function (params) {
        this._data = new Uint32Array(0);
    };
    DECRQSS.prototype.put = function (data, start, end) {
        this._data = TypedArrayUtils_1.concat(this._data, data.subarray(start, end));
    };
    DECRQSS.prototype.unhook = function (success) {
        if (!success) {
            this._data = new Uint32Array(0);
            return;
        }
        var data = TextDecoder_1.utf32ToString(this._data);
        this._data = new Uint32Array(0);
        switch (data) {
            case '"q':
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r0\"q" + EscapeSequences_1.C0.ESC + "\\");
            case '"p':
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r61\"p" + EscapeSequences_1.C0.ESC + "\\");
            case 'r':
                var pt = '' + (this._bufferService.buffer.scrollTop + 1) +
                    ';' + (this._bufferService.buffer.scrollBottom + 1) + 'r';
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r" + pt + EscapeSequences_1.C0.ESC + "\\");
            case 'm':
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r0m" + EscapeSequences_1.C0.ESC + "\\");
            case ' q':
                var STYLES = { 'block': 2, 'underline': 4, 'bar': 6 };
                var style = STYLES[this._optionsService.options.cursorStyle];
                style -= this._optionsService.options.cursorBlink ? 1 : 0;
                return this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P1$r" + style + " q" + EscapeSequences_1.C0.ESC + "\\");
            default:
                this._logService.debug('Unknown DCS $q %s', data);
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "P0$r" + EscapeSequences_1.C0.ESC + "\\");
        }
    };
    return DECRQSS;
}());
var InputHandler = (function (_super) {
    __extends(InputHandler, _super);
    function InputHandler(_terminal, _bufferService, _coreService, _dirtyRowService, _logService, _optionsService, _coreMouseService, _parser) {
        if (_parser === void 0) { _parser = new EscapeSequenceParser_1.EscapeSequenceParser(); }
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._bufferService = _bufferService;
        _this._coreService = _coreService;
        _this._dirtyRowService = _dirtyRowService;
        _this._logService = _logService;
        _this._optionsService = _optionsService;
        _this._coreMouseService = _coreMouseService;
        _this._parser = _parser;
        _this._parseBuffer = new Uint32Array(4096);
        _this._stringDecoder = new TextDecoder_1.StringToUtf32();
        _this._utf8Decoder = new TextDecoder_1.Utf8ToUtf32();
        _this._workCell = new CellData_1.CellData();
        _this._onCursorMove = new EventEmitter_1.EventEmitter();
        _this._onLineFeed = new EventEmitter_1.EventEmitter();
        _this._onScroll = new EventEmitter_1.EventEmitter();
        _this.register(_this._parser);
        _this._parser.setCsiHandlerFallback(function (ident, params) {
            _this._logService.debug('Unknown CSI code: ', { identifier: _this._parser.identToString(ident), params: params.toArray() });
        });
        _this._parser.setEscHandlerFallback(function (ident) {
            _this._logService.debug('Unknown ESC code: ', { identifier: _this._parser.identToString(ident) });
        });
        _this._parser.setExecuteHandlerFallback(function (code) {
            _this._logService.debug('Unknown EXECUTE code: ', { code: code });
        });
        _this._parser.setOscHandlerFallback(function (identifier, action, data) {
            _this._logService.debug('Unknown OSC code: ', { identifier: identifier, action: action, data: data });
        });
        _this._parser.setDcsHandlerFallback(function (ident, action, payload) {
            if (action === 'HOOK') {
                payload = payload.toArray();
            }
            _this._logService.debug('Unknown DCS code: ', { identifier: _this._parser.identToString(ident), action: action, payload: payload });
        });
        _this._parser.setPrintHandler(function (data, start, end) { return _this.print(data, start, end); });
        _this._parser.setCsiHandler({ final: '@' }, function (params) { return _this.insertChars(params); });
        _this._parser.setCsiHandler({ final: 'A' }, function (params) { return _this.cursorUp(params); });
        _this._parser.setCsiHandler({ final: 'B' }, function (params) { return _this.cursorDown(params); });
        _this._parser.setCsiHandler({ final: 'C' }, function (params) { return _this.cursorForward(params); });
        _this._parser.setCsiHandler({ final: 'D' }, function (params) { return _this.cursorBackward(params); });
        _this._parser.setCsiHandler({ final: 'E' }, function (params) { return _this.cursorNextLine(params); });
        _this._parser.setCsiHandler({ final: 'F' }, function (params) { return _this.cursorPrecedingLine(params); });
        _this._parser.setCsiHandler({ final: 'G' }, function (params) { return _this.cursorCharAbsolute(params); });
        _this._parser.setCsiHandler({ final: 'H' }, function (params) { return _this.cursorPosition(params); });
        _this._parser.setCsiHandler({ final: 'I' }, function (params) { return _this.cursorForwardTab(params); });
        _this._parser.setCsiHandler({ final: 'J' }, function (params) { return _this.eraseInDisplay(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'J' }, function (params) { return _this.eraseInDisplay(params); });
        _this._parser.setCsiHandler({ final: 'K' }, function (params) { return _this.eraseInLine(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'K' }, function (params) { return _this.eraseInLine(params); });
        _this._parser.setCsiHandler({ final: 'L' }, function (params) { return _this.insertLines(params); });
        _this._parser.setCsiHandler({ final: 'M' }, function (params) { return _this.deleteLines(params); });
        _this._parser.setCsiHandler({ final: 'P' }, function (params) { return _this.deleteChars(params); });
        _this._parser.setCsiHandler({ final: 'S' }, function (params) { return _this.scrollUp(params); });
        _this._parser.setCsiHandler({ final: 'T' }, function (params) { return _this.scrollDown(params); });
        _this._parser.setCsiHandler({ final: 'X' }, function (params) { return _this.eraseChars(params); });
        _this._parser.setCsiHandler({ final: 'Z' }, function (params) { return _this.cursorBackwardTab(params); });
        _this._parser.setCsiHandler({ final: '`' }, function (params) { return _this.charPosAbsolute(params); });
        _this._parser.setCsiHandler({ final: 'a' }, function (params) { return _this.hPositionRelative(params); });
        _this._parser.setCsiHandler({ final: 'b' }, function (params) { return _this.repeatPrecedingCharacter(params); });
        _this._parser.setCsiHandler({ final: 'c' }, function (params) { return _this.sendDeviceAttributesPrimary(params); });
        _this._parser.setCsiHandler({ prefix: '>', final: 'c' }, function (params) { return _this.sendDeviceAttributesSecondary(params); });
        _this._parser.setCsiHandler({ final: 'd' }, function (params) { return _this.linePosAbsolute(params); });
        _this._parser.setCsiHandler({ final: 'e' }, function (params) { return _this.vPositionRelative(params); });
        _this._parser.setCsiHandler({ final: 'f' }, function (params) { return _this.hVPosition(params); });
        _this._parser.setCsiHandler({ final: 'g' }, function (params) { return _this.tabClear(params); });
        _this._parser.setCsiHandler({ final: 'h' }, function (params) { return _this.setMode(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'h' }, function (params) { return _this.setModePrivate(params); });
        _this._parser.setCsiHandler({ final: 'l' }, function (params) { return _this.resetMode(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'l' }, function (params) { return _this.resetModePrivate(params); });
        _this._parser.setCsiHandler({ final: 'm' }, function (params) { return _this.charAttributes(params); });
        _this._parser.setCsiHandler({ final: 'n' }, function (params) { return _this.deviceStatus(params); });
        _this._parser.setCsiHandler({ prefix: '?', final: 'n' }, function (params) { return _this.deviceStatusPrivate(params); });
        _this._parser.setCsiHandler({ intermediates: '!', final: 'p' }, function (params) { return _this.softReset(params); });
        _this._parser.setCsiHandler({ intermediates: ' ', final: 'q' }, function (params) { return _this.setCursorStyle(params); });
        _this._parser.setCsiHandler({ final: 'r' }, function (params) { return _this.setScrollRegion(params); });
        _this._parser.setCsiHandler({ final: 's' }, function (params) { return _this.saveCursor(params); });
        _this._parser.setCsiHandler({ final: 'u' }, function (params) { return _this.restoreCursor(params); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BEL, function () { return _this.bell(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.LF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.VT, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.FF, function () { return _this.lineFeed(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.CR, function () { return _this.carriageReturn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.BS, function () { return _this.backspace(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.HT, function () { return _this.tab(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SO, function () { return _this.shiftOut(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C0.SI, function () { return _this.shiftIn(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.IND, function () { return _this.index(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.NEL, function () { return _this.nextLine(); });
        _this._parser.setExecuteHandler(EscapeSequences_1.C1.HTS, function () { return _this.tabSet(); });
        _this._parser.setOscHandler(0, new OscParser_1.OscHandler(function (data) { return _this.setTitle(data); }));
        _this._parser.setOscHandler(2, new OscParser_1.OscHandler(function (data) { return _this.setTitle(data); }));
        _this._parser.setEscHandler({ final: '7' }, function () { return _this.saveCursor(); });
        _this._parser.setEscHandler({ final: '8' }, function () { return _this.restoreCursor(); });
        _this._parser.setEscHandler({ final: 'D' }, function () { return _this.index(); });
        _this._parser.setEscHandler({ final: 'E' }, function () { return _this.nextLine(); });
        _this._parser.setEscHandler({ final: 'H' }, function () { return _this.tabSet(); });
        _this._parser.setEscHandler({ final: 'M' }, function () { return _this.reverseIndex(); });
        _this._parser.setEscHandler({ final: '=' }, function () { return _this.keypadApplicationMode(); });
        _this._parser.setEscHandler({ final: '>' }, function () { return _this.keypadNumericMode(); });
        _this._parser.setEscHandler({ final: 'c' }, function () { return _this.reset(); });
        _this._parser.setEscHandler({ final: 'n' }, function () { return _this.setgLevel(2); });
        _this._parser.setEscHandler({ final: 'o' }, function () { return _this.setgLevel(3); });
        _this._parser.setEscHandler({ final: '|' }, function () { return _this.setgLevel(3); });
        _this._parser.setEscHandler({ final: '}' }, function () { return _this.setgLevel(2); });
        _this._parser.setEscHandler({ final: '~' }, function () { return _this.setgLevel(1); });
        _this._parser.setEscHandler({ intermediates: '%', final: '@' }, function () { return _this.selectDefaultCharset(); });
        _this._parser.setEscHandler({ intermediates: '%', final: 'G' }, function () { return _this.selectDefaultCharset(); });
        var _loop_1 = function (flag) {
            this_1._parser.setEscHandler({ intermediates: '(', final: flag }, function () { return _this.selectCharset('(' + flag); });
            this_1._parser.setEscHandler({ intermediates: ')', final: flag }, function () { return _this.selectCharset(')' + flag); });
            this_1._parser.setEscHandler({ intermediates: '*', final: flag }, function () { return _this.selectCharset('*' + flag); });
            this_1._parser.setEscHandler({ intermediates: '+', final: flag }, function () { return _this.selectCharset('+' + flag); });
            this_1._parser.setEscHandler({ intermediates: '-', final: flag }, function () { return _this.selectCharset('-' + flag); });
            this_1._parser.setEscHandler({ intermediates: '.', final: flag }, function () { return _this.selectCharset('.' + flag); });
            this_1._parser.setEscHandler({ intermediates: '/', final: flag }, function () { return _this.selectCharset('/' + flag); });
        };
        var this_1 = this;
        for (var flag in Charsets_1.CHARSETS) {
            _loop_1(flag);
        }
        _this._parser.setEscHandler({ intermediates: '#', final: '8' }, function () { return _this.screenAlignmentPattern(); });
        _this._parser.setErrorHandler(function (state) {
            _this._logService.error('Parsing error: ', state);
            return state;
        });
        _this._parser.setDcsHandler({ intermediates: '$', final: 'q' }, new DECRQSS(_this._bufferService, _this._coreService, _this._logService, _this._optionsService));
        return _this;
    }
    Object.defineProperty(InputHandler.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(InputHandler.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: true,
        configurable: true
    });
    InputHandler.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
    };
    InputHandler.prototype.parse = function (data) {
        var buffer = this._bufferService.buffer;
        var cursorStartX = buffer.x;
        var cursorStartY = buffer.y;
        this._logService.debug('parsing data', data);
        if (this._parseBuffer.length < data.length) {
            this._parseBuffer = new Uint32Array(data.length);
        }
        this._parser.parse(this._parseBuffer, this._stringDecoder.decode(data, this._parseBuffer));
        buffer = this._bufferService.buffer;
        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {
            this._onCursorMove.fire();
        }
    };
    InputHandler.prototype.parseUtf8 = function (data) {
        var buffer = this._bufferService.buffer;
        var cursorStartX = buffer.x;
        var cursorStartY = buffer.y;
        this._logService.debug('parsing data', data);
        if (this._parseBuffer.length < data.length) {
            this._parseBuffer = new Uint32Array(data.length);
        }
        this._parser.parse(this._parseBuffer, this._utf8Decoder.decode(data, this._parseBuffer));
        buffer = this._bufferService.buffer;
        if (buffer.x !== cursorStartX || buffer.y !== cursorStartY) {
            this._onCursorMove.fire();
        }
    };
    InputHandler.prototype.print = function (data, start, end) {
        var code;
        var chWidth;
        var buffer = this._bufferService.buffer;
        var charset = this._terminal.charset;
        var screenReaderMode = this._optionsService.options.screenReaderMode;
        var cols = this._bufferService.cols;
        var wraparoundMode = this._terminal.wraparoundMode;
        var insertMode = this._terminal.insertMode;
        var curAttr = this._terminal.curAttrData;
        var bufferRow = buffer.lines.get(buffer.y + buffer.ybase);
        this._dirtyRowService.markDirty(buffer.y);
        for (var pos = start; pos < end; ++pos) {
            code = data[pos];
            chWidth = CharWidth_1.wcwidth(code);
            if (code < 127 && charset) {
                var ch = charset[String.fromCharCode(code)];
                if (ch) {
                    code = ch.charCodeAt(0);
                }
            }
            if (screenReaderMode) {
                this._terminal.onA11yCharEmitter.fire(TextDecoder_1.stringFromCodePoint(code));
            }
            if (!chWidth && buffer.x) {
                if (!bufferRow.getWidth(buffer.x - 1)) {
                    bufferRow.addCodepointToCell(buffer.x - 2, code);
                }
                else {
                    bufferRow.addCodepointToCell(buffer.x - 1, code);
                }
                continue;
            }
            if (buffer.x + chWidth - 1 >= cols) {
                if (wraparoundMode) {
                    buffer.x = 0;
                    buffer.y++;
                    if (buffer.y === buffer.scrollBottom + 1) {
                        buffer.y--;
                        this._terminal.scroll(true);
                    }
                    else {
                        if (buffer.y >= this._bufferService.rows) {
                            buffer.y = this._bufferService.rows - 1;
                        }
                        buffer.lines.get(buffer.y).isWrapped = true;
                    }
                    bufferRow = buffer.lines.get(buffer.y + buffer.ybase);
                }
                else {
                    buffer.x = cols - 1;
                    if (chWidth === 2) {
                        continue;
                    }
                }
            }
            if (insertMode) {
                bufferRow.insertCells(buffer.x, chWidth, buffer.getNullCell(curAttr));
                if (bufferRow.getWidth(cols - 1) === 2) {
                    bufferRow.setCellFromCodePoint(cols - 1, Constants_1.NULL_CELL_CODE, Constants_1.NULL_CELL_WIDTH, curAttr.fg, curAttr.bg);
                }
            }
            bufferRow.setCellFromCodePoint(buffer.x++, code, chWidth, curAttr.fg, curAttr.bg);
            if (chWidth > 0) {
                while (--chWidth) {
                    bufferRow.setCellFromCodePoint(buffer.x++, 0, 0, curAttr.fg, curAttr.bg);
                }
            }
        }
        if (end) {
            bufferRow.loadCell(buffer.x - 1, this._workCell);
            if (this._workCell.getWidth() === 2 || this._workCell.getCode() > 0xFFFF) {
                this._parser.precedingCodepoint = 0;
            }
            else if (this._workCell.isCombined()) {
                this._parser.precedingCodepoint = this._workCell.getChars().charCodeAt(0);
            }
            else {
                this._parser.precedingCodepoint = this._workCell.content;
            }
        }
        this._dirtyRowService.markDirty(buffer.y);
    };
    InputHandler.prototype.addCsiHandler = function (id, callback) {
        return this._parser.addCsiHandler(id, callback);
    };
    InputHandler.prototype.addDcsHandler = function (id, callback) {
        return this._parser.addDcsHandler(id, new DcsParser_1.DcsHandler(callback));
    };
    InputHandler.prototype.addEscHandler = function (id, callback) {
        return this._parser.addEscHandler(id, callback);
    };
    InputHandler.prototype.addOscHandler = function (ident, callback) {
        return this._parser.addOscHandler(ident, new OscParser_1.OscHandler(callback));
    };
    InputHandler.prototype.bell = function () {
        this._terminal.bell();
    };
    InputHandler.prototype.lineFeed = function () {
        var buffer = this._bufferService.buffer;
        if (this._optionsService.options.convertEol) {
            buffer.x = 0;
        }
        buffer.y++;
        if (buffer.y === buffer.scrollBottom + 1) {
            buffer.y--;
            this._terminal.scroll();
        }
        else if (buffer.y >= this._bufferService.rows) {
            buffer.y = this._bufferService.rows - 1;
        }
        if (buffer.x >= this._bufferService.cols) {
            buffer.x--;
        }
        this._onLineFeed.fire();
    };
    InputHandler.prototype.carriageReturn = function () {
        this._bufferService.buffer.x = 0;
    };
    InputHandler.prototype.backspace = function () {
        this._restrictCursor();
        if (this._bufferService.buffer.x > 0) {
            this._bufferService.buffer.x--;
        }
    };
    InputHandler.prototype.tab = function () {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return;
        }
        var originalX = this._bufferService.buffer.x;
        this._bufferService.buffer.x = this._bufferService.buffer.nextStop();
        if (this._optionsService.options.screenReaderMode) {
            this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x - originalX);
        }
    };
    InputHandler.prototype.shiftOut = function () {
        this._terminal.setgLevel(1);
    };
    InputHandler.prototype.shiftIn = function () {
        this._terminal.setgLevel(0);
    };
    InputHandler.prototype._restrictCursor = function () {
        this._bufferService.buffer.x = Math.min(this._bufferService.cols - 1, Math.max(0, this._bufferService.buffer.x));
        this._bufferService.buffer.y = this._terminal.originMode
            ? Math.min(this._bufferService.buffer.scrollBottom, Math.max(this._bufferService.buffer.scrollTop, this._bufferService.buffer.y))
            : Math.min(this._bufferService.rows - 1, Math.max(0, this._bufferService.buffer.y));
    };
    InputHandler.prototype._setCursor = function (x, y) {
        if (this._terminal.originMode) {
            this._bufferService.buffer.x = x;
            this._bufferService.buffer.y = this._bufferService.buffer.scrollTop + y;
        }
        else {
            this._bufferService.buffer.x = x;
            this._bufferService.buffer.y = y;
        }
        this._restrictCursor();
    };
    InputHandler.prototype._moveCursor = function (x, y) {
        this._restrictCursor();
        this._setCursor(this._bufferService.buffer.x + x, this._bufferService.buffer.y + y);
    };
    InputHandler.prototype.cursorUp = function (params) {
        var diffToTop = this._bufferService.buffer.y - this._bufferService.buffer.scrollTop;
        if (diffToTop >= 0) {
            this._moveCursor(0, -Math.min(diffToTop, params.params[0] || 1));
        }
        else {
            this._moveCursor(0, -(params.params[0] || 1));
        }
    };
    InputHandler.prototype.cursorDown = function (params) {
        var diffToBottom = this._bufferService.buffer.scrollBottom - this._bufferService.buffer.y;
        if (diffToBottom >= 0) {
            this._moveCursor(0, Math.min(diffToBottom, params.params[0] || 1));
        }
        else {
            this._moveCursor(0, params.params[0] || 1);
        }
    };
    InputHandler.prototype.cursorForward = function (params) {
        this._moveCursor(params.params[0] || 1, 0);
    };
    InputHandler.prototype.cursorBackward = function (params) {
        this._moveCursor(-(params.params[0] || 1), 0);
    };
    InputHandler.prototype.cursorNextLine = function (params) {
        this.cursorDown(params);
        this._bufferService.buffer.x = 0;
    };
    InputHandler.prototype.cursorPrecedingLine = function (params) {
        this.cursorUp(params);
        this._bufferService.buffer.x = 0;
    };
    InputHandler.prototype.cursorCharAbsolute = function (params) {
        this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);
    };
    InputHandler.prototype.cursorPosition = function (params) {
        this._setCursor((params.length >= 2) ? (params.params[1] || 1) - 1 : 0, (params.params[0] || 1) - 1);
    };
    InputHandler.prototype.charPosAbsolute = function (params) {
        this._setCursor((params.params[0] || 1) - 1, this._bufferService.buffer.y);
    };
    InputHandler.prototype.hPositionRelative = function (params) {
        this._moveCursor(params.params[0] || 1, 0);
    };
    InputHandler.prototype.linePosAbsolute = function (params) {
        this._setCursor(this._bufferService.buffer.x, (params.params[0] || 1) - 1);
    };
    InputHandler.prototype.vPositionRelative = function (params) {
        this._moveCursor(0, params.params[0] || 1);
    };
    InputHandler.prototype.hVPosition = function (params) {
        this.cursorPosition(params);
    };
    InputHandler.prototype.tabClear = function (params) {
        var param = params.params[0];
        if (param === 0) {
            delete this._bufferService.buffer.tabs[this._bufferService.buffer.x];
        }
        else if (param === 3) {
            this._bufferService.buffer.tabs = {};
        }
    };
    InputHandler.prototype.cursorForwardTab = function (params) {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return;
        }
        var param = params.params[0] || 1;
        while (param--) {
            this._bufferService.buffer.x = this._bufferService.buffer.nextStop();
        }
    };
    InputHandler.prototype.cursorBackwardTab = function (params) {
        if (this._bufferService.buffer.x >= this._bufferService.cols) {
            return;
        }
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.x = buffer.prevStop();
        }
    };
    InputHandler.prototype._eraseInBufferLine = function (y, start, end, clearWrap) {
        if (clearWrap === void 0) { clearWrap = false; }
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y);
        line.replaceCells(start, end, this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData()));
        if (clearWrap) {
            line.isWrapped = false;
        }
    };
    InputHandler.prototype._resetBufferLine = function (y) {
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase + y);
        line.fill(this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData()));
        line.isWrapped = false;
    };
    InputHandler.prototype.eraseInDisplay = function (params) {
        this._restrictCursor();
        var j;
        switch (params.params[0]) {
            case 0:
                j = this._bufferService.buffer.y;
                this._dirtyRowService.markDirty(j);
                this._eraseInBufferLine(j++, this._bufferService.buffer.x, this._bufferService.cols, this._bufferService.buffer.x === 0);
                for (; j < this._bufferService.rows; j++) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(j);
                break;
            case 1:
                j = this._bufferService.buffer.y;
                this._dirtyRowService.markDirty(j);
                this._eraseInBufferLine(j, 0, this._bufferService.buffer.x + 1, true);
                if (this._bufferService.buffer.x + 1 >= this._bufferService.cols) {
                    this._bufferService.buffer.lines.get(j + 1).isWrapped = false;
                }
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(0);
                break;
            case 2:
                j = this._bufferService.rows;
                this._dirtyRowService.markDirty(j - 1);
                while (j--) {
                    this._resetBufferLine(j);
                }
                this._dirtyRowService.markDirty(0);
                break;
            case 3:
                var scrollBackSize = this._bufferService.buffer.lines.length - this._bufferService.rows;
                if (scrollBackSize > 0) {
                    this._bufferService.buffer.lines.trimStart(scrollBackSize);
                    this._bufferService.buffer.ybase = Math.max(this._bufferService.buffer.ybase - scrollBackSize, 0);
                    this._bufferService.buffer.ydisp = Math.max(this._bufferService.buffer.ydisp - scrollBackSize, 0);
                    this._onScroll.fire(0);
                }
                break;
        }
    };
    InputHandler.prototype.eraseInLine = function (params) {
        this._restrictCursor();
        switch (params.params[0]) {
            case 0:
                this._eraseInBufferLine(this._bufferService.buffer.y, this._bufferService.buffer.x, this._bufferService.cols);
                break;
            case 1:
                this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.buffer.x + 1);
                break;
            case 2:
                this._eraseInBufferLine(this._bufferService.buffer.y, 0, this._bufferService.cols);
                break;
        }
        this._dirtyRowService.markDirty(this._bufferService.buffer.y);
    };
    InputHandler.prototype.insertLines = function (params) {
        this._restrictCursor();
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var row = buffer.y + buffer.ybase;
        var scrollBottomRowsOffset = this._bufferService.rows - 1 - buffer.scrollBottom;
        var scrollBottomAbsolute = this._bufferService.rows - 1 + buffer.ybase - scrollBottomRowsOffset + 1;
        while (param--) {
            buffer.lines.splice(scrollBottomAbsolute - 1, 1);
            buffer.lines.splice(row, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);
        buffer.x = 0;
    };
    InputHandler.prototype.deleteLines = function (params) {
        this._restrictCursor();
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        if (buffer.y > buffer.scrollBottom || buffer.y < buffer.scrollTop) {
            return;
        }
        var row = buffer.y + buffer.ybase;
        var j;
        j = this._bufferService.rows - 1 - buffer.scrollBottom;
        j = this._bufferService.rows - 1 + buffer.ybase - j;
        while (param--) {
            buffer.lines.splice(row, 1);
            buffer.lines.splice(j, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.y, buffer.scrollBottom);
        buffer.x = 0;
    };
    InputHandler.prototype.insertChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.y + this._bufferService.buffer.ybase);
        if (line) {
            line.insertCells(this._bufferService.buffer.x, params.params[0] || 1, this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData()));
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
    };
    InputHandler.prototype.deleteChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.y + this._bufferService.buffer.ybase);
        if (line) {
            line.deleteCells(this._bufferService.buffer.x, params.params[0] || 1, this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData()));
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
    };
    InputHandler.prototype.scrollUp = function (params) {
        var param = params.params[0] || 1;
        var buffer = this._bufferService.buffer;
        while (param--) {
            buffer.lines.splice(buffer.ybase + buffer.scrollTop, 1);
            buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));
        }
        this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
    };
    InputHandler.prototype.scrollDown = function (params) {
        if (params.length < 2) {
            var param = params.params[0] || 1;
            var buffer = this._bufferService.buffer;
            while (param--) {
                buffer.lines.splice(buffer.ybase + buffer.scrollBottom, 1);
                buffer.lines.splice(buffer.ybase + buffer.scrollTop, 0, buffer.getBlankLine(this._terminal.eraseAttrData()));
            }
            this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        }
    };
    InputHandler.prototype.eraseChars = function (params) {
        this._restrictCursor();
        var line = this._bufferService.buffer.lines.get(this._bufferService.buffer.y + this._bufferService.buffer.ybase);
        if (line) {
            line.replaceCells(this._bufferService.buffer.x, this._bufferService.buffer.x + (params.params[0] || 1), this._bufferService.buffer.getNullCell(this._terminal.eraseAttrData()));
            this._dirtyRowService.markDirty(this._bufferService.buffer.y);
        }
    };
    InputHandler.prototype.repeatPrecedingCharacter = function (params) {
        if (!this._parser.precedingCodepoint) {
            return;
        }
        var length = params.params[0] || 1;
        var data = new Uint32Array(length);
        for (var i = 0; i < length; ++i) {
            data[i] = this._parser.precedingCodepoint;
        }
        this.print(data, 0, data.length);
    };
    InputHandler.prototype.sendDeviceAttributesPrimary = function (params) {
        if (params.params[0] > 0) {
            return;
        }
        if (this._terminal.is('xterm') || this._terminal.is('rxvt-unicode') || this._terminal.is('screen')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[?1;2c');
        }
        else if (this._terminal.is('linux')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[?6c');
        }
    };
    InputHandler.prototype.sendDeviceAttributesSecondary = function (params) {
        if (params.params[0] > 0) {
            return;
        }
        if (this._terminal.is('xterm')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>0;276;0c');
        }
        else if (this._terminal.is('rxvt-unicode')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>85;95;0c');
        }
        else if (this._terminal.is('linux')) {
            this._coreService.triggerDataEvent(params.params[0] + 'c');
        }
        else if (this._terminal.is('screen')) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[>83;40003;0c');
        }
    };
    InputHandler.prototype.setMode = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 4:
                    this._terminal.insertMode = true;
                    break;
                case 20:
                    break;
            }
        }
    };
    InputHandler.prototype.setModePrivate = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 1:
                    this._coreService.decPrivateModes.applicationCursorKeys = true;
                    break;
                case 2:
                    this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
                    this._terminal.setgCharset(1, Charsets_1.DEFAULT_CHARSET);
                    this._terminal.setgCharset(2, Charsets_1.DEFAULT_CHARSET);
                    this._terminal.setgCharset(3, Charsets_1.DEFAULT_CHARSET);
                    break;
                case 3:
                    this._terminal.savedCols = this._bufferService.cols;
                    this._terminal.resize(132, this._bufferService.rows);
                    this._terminal.reset();
                    break;
                case 6:
                    this._terminal.originMode = true;
                    this._setCursor(0, 0);
                    break;
                case 7:
                    this._terminal.wraparoundMode = true;
                    break;
                case 12:
                    break;
                case 66:
                    this._logService.debug('Serial port requested application keypad.');
                    this._terminal.applicationKeypad = true;
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    break;
                case 9:
                    this._coreMouseService.activeProtocol = 'X10';
                    break;
                case 1000:
                    this._coreMouseService.activeProtocol = 'VT200';
                    break;
                case 1002:
                    this._coreMouseService.activeProtocol = 'DRAG';
                    break;
                case 1003:
                    this._coreMouseService.activeProtocol = 'ANY';
                    break;
                case 1004:
                    this._terminal.sendFocus = true;
                    break;
                case 1005:
                    this._coreMouseService.activeEncoding = 'UTF8';
                    break;
                case 1006:
                    this._coreMouseService.activeEncoding = 'SGR';
                    break;
                case 1015:
                    this._coreMouseService.activeEncoding = 'URXVT';
                    break;
                case 25:
                    this._terminal.cursorHidden = false;
                    break;
                case 1048:
                    this.saveCursor();
                    break;
                case 1049:
                    this.saveCursor();
                case 47:
                case 1047:
                    this._bufferService.buffers.activateAltBuffer(this._terminal.eraseAttrData());
                    this._terminal.refresh(0, this._bufferService.rows - 1);
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    this._terminal.showCursor();
                    break;
                case 2004:
                    this._terminal.bracketedPasteMode = true;
                    break;
            }
        }
    };
    InputHandler.prototype.resetMode = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 4:
                    this._terminal.insertMode = false;
                    break;
                case 20:
                    break;
            }
        }
    };
    InputHandler.prototype.resetModePrivate = function (params) {
        for (var i = 0; i < params.length; i++) {
            switch (params.params[i]) {
                case 1:
                    this._coreService.decPrivateModes.applicationCursorKeys = false;
                    break;
                case 3:
                    if (this._bufferService.cols === 132 && this._terminal.savedCols) {
                        this._terminal.resize(this._terminal.savedCols, this._bufferService.rows);
                    }
                    delete this._terminal.savedCols;
                    this._terminal.reset();
                    break;
                case 6:
                    this._terminal.originMode = false;
                    this._setCursor(0, 0);
                    break;
                case 7:
                    this._terminal.wraparoundMode = false;
                    break;
                case 12:
                    break;
                case 66:
                    this._logService.debug('Switching back to normal keypad.');
                    this._terminal.applicationKeypad = false;
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    break;
                case 9:
                case 1000:
                case 1002:
                case 1003:
                    this._coreMouseService.activeProtocol = 'NONE';
                    break;
                case 1004:
                    this._terminal.sendFocus = false;
                    break;
                case 1005:
                    this._coreMouseService.activeEncoding = 'DEFAULT';
                    break;
                case 1006:
                    this._coreMouseService.activeEncoding = 'DEFAULT';
                    break;
                case 1015:
                    this._coreMouseService.activeEncoding = 'DEFAULT';
                    break;
                case 25:
                    this._terminal.cursorHidden = true;
                    break;
                case 1048:
                    this.restoreCursor();
                    break;
                case 1049:
                case 47:
                case 1047:
                    this._bufferService.buffers.activateNormalBuffer();
                    if (params.params[i] === 1049) {
                        this.restoreCursor();
                    }
                    this._terminal.refresh(0, this._bufferService.rows - 1);
                    if (this._terminal.viewport) {
                        this._terminal.viewport.syncScrollArea();
                    }
                    this._terminal.showCursor();
                    break;
                case 2004:
                    this._terminal.bracketedPasteMode = false;
                    break;
            }
        }
    };
    InputHandler.prototype._extractColor = function (params, pos, attr) {
        var accu = [0, 0, -1, 0, 0, 0];
        var cSpace = 0;
        var advance = 0;
        do {
            accu[advance + cSpace] = params.params[pos + advance];
            if (params.hasSubParams(pos + advance)) {
                var subparams = params.getSubParams(pos + advance);
                var i = 0;
                do {
                    if (accu[1] === 5) {
                        cSpace = 1;
                    }
                    accu[advance + i + 1 + cSpace] = subparams[i];
                } while (++i < subparams.length && i + advance + 1 + cSpace < accu.length);
                break;
            }
            if ((accu[1] === 5 && advance + cSpace >= 2)
                || (accu[1] === 2 && advance + cSpace >= 5)) {
                break;
            }
            if (accu[1]) {
                cSpace = 1;
            }
        } while (++advance + pos < params.length && advance + cSpace < accu.length);
        for (var i = 2; i < accu.length; ++i) {
            if (accu[i] === -1) {
                accu[i] = 0;
            }
        }
        if (accu[0] === 38) {
            if (accu[1] === 2) {
                attr.fg |= 50331648;
                attr.fg &= ~16777215;
                attr.fg |= AttributeData_1.AttributeData.fromColorRGB([accu[3], accu[4], accu[5]]);
            }
            else if (accu[1] === 5) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 33554432 | (accu[3] & 0xff);
            }
        }
        else if (accu[0] === 48) {
            if (accu[1] === 2) {
                attr.bg |= 50331648;
                attr.bg &= ~16777215;
                attr.bg |= AttributeData_1.AttributeData.fromColorRGB([accu[3], accu[4], accu[5]]);
            }
            else if (accu[1] === 5) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 33554432 | (accu[3] & 0xff);
            }
        }
        return advance;
    };
    InputHandler.prototype.charAttributes = function (params) {
        if (params.length === 1 && params.params[0] === 0) {
            this._terminal.curAttrData.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;
            this._terminal.curAttrData.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;
            return;
        }
        var l = params.length;
        var p;
        var attr = this._terminal.curAttrData;
        for (var i = 0; i < l; i++) {
            p = params.params[i];
            if (p >= 30 && p <= 37) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 30);
            }
            else if (p >= 40 && p <= 47) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 40);
            }
            else if (p >= 90 && p <= 97) {
                attr.fg &= ~(50331648 | 255);
                attr.fg |= 16777216 | (p - 90) | 8;
            }
            else if (p >= 100 && p <= 107) {
                attr.bg &= ~(50331648 | 255);
                attr.bg |= 16777216 | (p - 100) | 8;
            }
            else if (p === 0) {
                attr.fg = BufferLine_1.DEFAULT_ATTR_DATA.fg;
                attr.bg = BufferLine_1.DEFAULT_ATTR_DATA.bg;
            }
            else if (p === 1) {
                attr.fg |= 134217728;
            }
            else if (p === 3) {
                attr.bg |= 67108864;
            }
            else if (p === 4) {
                attr.fg |= 268435456;
            }
            else if (p === 5) {
                attr.fg |= 536870912;
            }
            else if (p === 7) {
                attr.fg |= 67108864;
            }
            else if (p === 8) {
                attr.fg |= 1073741824;
            }
            else if (p === 2) {
                attr.bg |= 134217728;
            }
            else if (p === 22) {
                attr.fg &= ~134217728;
                attr.bg &= ~134217728;
            }
            else if (p === 23) {
                attr.bg &= ~67108864;
            }
            else if (p === 24) {
                attr.fg &= ~268435456;
            }
            else if (p === 25) {
                attr.fg &= ~536870912;
            }
            else if (p === 27) {
                attr.fg &= ~67108864;
            }
            else if (p === 28) {
                attr.fg &= ~1073741824;
            }
            else if (p === 39) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
            }
            else if (p === 49) {
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else if (p === 38 || p === 48) {
                i += this._extractColor(params, i, attr);
            }
            else if (p === 100) {
                attr.fg &= ~(50331648 | 16777215);
                attr.fg |= BufferLine_1.DEFAULT_ATTR_DATA.fg & (255 | 16777215);
                attr.bg &= ~(50331648 | 16777215);
                attr.bg |= BufferLine_1.DEFAULT_ATTR_DATA.bg & (255 | 16777215);
            }
            else {
                this._logService.debug('Unknown SGR attribute: %d.', p);
            }
        }
    };
    InputHandler.prototype.deviceStatus = function (params) {
        switch (params.params[0]) {
            case 5:
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[0n");
                break;
            case 6:
                var y = this._bufferService.buffer.y + 1;
                var x = this._bufferService.buffer.x + 1;
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[" + y + ";" + x + "R");
                break;
        }
    };
    InputHandler.prototype.deviceStatusPrivate = function (params) {
        switch (params.params[0]) {
            case 6:
                var y = this._bufferService.buffer.y + 1;
                var x = this._bufferService.buffer.x + 1;
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + "[?" + y + ";" + x + "R");
                break;
            case 15:
                break;
            case 25:
                break;
            case 26:
                break;
            case 53:
                break;
        }
    };
    InputHandler.prototype.softReset = function (params) {
        this._terminal.cursorHidden = false;
        this._terminal.insertMode = false;
        this._terminal.originMode = false;
        this._terminal.wraparoundMode = true;
        this._terminal.applicationKeypad = false;
        if (this._terminal.viewport) {
            this._terminal.viewport.syncScrollArea();
        }
        this._coreService.decPrivateModes.applicationCursorKeys = false;
        this._bufferService.buffer.scrollTop = 0;
        this._bufferService.buffer.scrollBottom = this._bufferService.rows - 1;
        this._terminal.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this._bufferService.buffer.x = this._bufferService.buffer.y = 0;
        this._terminal.charset = null;
        this._terminal.glevel = 0;
        this._terminal.charsets = [null];
    };
    InputHandler.prototype.setCursorStyle = function (params) {
        var param = params.params[0] || 1;
        switch (param) {
            case 1:
            case 2:
                this._optionsService.options.cursorStyle = 'block';
                break;
            case 3:
            case 4:
                this._optionsService.options.cursorStyle = 'underline';
                break;
            case 5:
            case 6:
                this._optionsService.options.cursorStyle = 'bar';
                break;
        }
        var isBlinking = param % 2 === 1;
        this._optionsService.options.cursorBlink = isBlinking;
    };
    InputHandler.prototype.setScrollRegion = function (params) {
        var top = params.params[0] || 1;
        var bottom;
        if (params.length < 2 || (bottom = params.params[1]) > this._bufferService.rows || bottom === 0) {
            bottom = this._bufferService.rows;
        }
        if (bottom > top) {
            this._bufferService.buffer.scrollTop = top - 1;
            this._bufferService.buffer.scrollBottom = bottom - 1;
            this._setCursor(0, 0);
        }
    };
    InputHandler.prototype.saveCursor = function (params) {
        this._bufferService.buffer.savedX = this._bufferService.buffer.x;
        this._bufferService.buffer.savedY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        this._bufferService.buffer.savedCurAttrData.fg = this._terminal.curAttrData.fg;
        this._bufferService.buffer.savedCurAttrData.bg = this._terminal.curAttrData.bg;
        this._bufferService.buffer.savedCharset = this._terminal.charset;
    };
    InputHandler.prototype.restoreCursor = function (params) {
        this._bufferService.buffer.x = this._bufferService.buffer.savedX || 0;
        this._bufferService.buffer.y = Math.max(this._bufferService.buffer.savedY - this._bufferService.buffer.ybase, 0);
        this._terminal.curAttrData.fg = this._bufferService.buffer.savedCurAttrData.fg;
        this._terminal.curAttrData.bg = this._bufferService.buffer.savedCurAttrData.bg;
        this._terminal.charset = this._savedCharset;
        if (this._bufferService.buffer.savedCharset) {
            this._terminal.charset = this._bufferService.buffer.savedCharset;
        }
        this._restrictCursor();
    };
    InputHandler.prototype.setTitle = function (data) {
        this._terminal.handleTitle(data);
    };
    InputHandler.prototype.nextLine = function () {
        this._bufferService.buffer.x = 0;
        this.index();
    };
    InputHandler.prototype.keypadApplicationMode = function () {
        this._logService.debug('Serial port requested application keypad.');
        this._terminal.applicationKeypad = true;
        if (this._terminal.viewport) {
            this._terminal.viewport.syncScrollArea();
        }
    };
    InputHandler.prototype.keypadNumericMode = function () {
        this._logService.debug('Switching back to normal keypad.');
        this._terminal.applicationKeypad = false;
        if (this._terminal.viewport) {
            this._terminal.viewport.syncScrollArea();
        }
    };
    InputHandler.prototype.selectDefaultCharset = function () {
        this._terminal.setgLevel(0);
        this._terminal.setgCharset(0, Charsets_1.DEFAULT_CHARSET);
    };
    InputHandler.prototype.selectCharset = function (collectAndFlag) {
        if (collectAndFlag.length !== 2) {
            this.selectDefaultCharset();
            return;
        }
        if (collectAndFlag[0] === '/') {
            return;
        }
        this._terminal.setgCharset(GLEVEL[collectAndFlag[0]], Charsets_1.CHARSETS[collectAndFlag[1]] || Charsets_1.DEFAULT_CHARSET);
        return;
    };
    InputHandler.prototype.index = function () {
        this._restrictCursor();
        var buffer = this._bufferService.buffer;
        this._bufferService.buffer.y++;
        if (buffer.y === buffer.scrollBottom + 1) {
            buffer.y--;
            this._terminal.scroll();
        }
        else if (buffer.y >= this._bufferService.rows) {
            buffer.y = this._bufferService.rows - 1;
        }
        this._restrictCursor();
    };
    InputHandler.prototype.tabSet = function () {
        this._bufferService.buffer.tabs[this._bufferService.buffer.x] = true;
    };
    InputHandler.prototype.reverseIndex = function () {
        this._restrictCursor();
        var buffer = this._bufferService.buffer;
        if (buffer.y === buffer.scrollTop) {
            var scrollRegionHeight = buffer.scrollBottom - buffer.scrollTop;
            buffer.lines.shiftElements(buffer.y + buffer.ybase, scrollRegionHeight, 1);
            buffer.lines.set(buffer.y + buffer.ybase, buffer.getBlankLine(this._terminal.eraseAttrData()));
            this._dirtyRowService.markRangeDirty(buffer.scrollTop, buffer.scrollBottom);
        }
        else {
            buffer.y--;
            this._restrictCursor();
        }
    };
    InputHandler.prototype.reset = function () {
        this._parser.reset();
        this._terminal.reset();
    };
    InputHandler.prototype.setgLevel = function (level) {
        this._terminal.setgLevel(level);
    };
    InputHandler.prototype.screenAlignmentPattern = function () {
        var cell = new CellData_1.CellData();
        cell.content = 1 << 22 | 'E'.charCodeAt(0);
        cell.fg = this._terminal.curAttrData.fg;
        cell.bg = this._terminal.curAttrData.bg;
        var buffer = this._bufferService.buffer;
        this._setCursor(0, 0);
        for (var yOffset = 0; yOffset < this._bufferService.rows; ++yOffset) {
            var row = buffer.y + buffer.ybase + yOffset;
            buffer.lines.get(row).fill(cell);
            buffer.lines.get(row).isWrapped = false;
        }
        this._dirtyRowService.markAllDirty();
        this._setCursor(0, 0);
    };
    return InputHandler;
}(Lifecycle_1.Disposable));
exports.InputHandler = InputHandler;


/***/ }),

/***/ "./out/Terminal.js":
/*!*************************!*\
  !*** ./out/Terminal.js ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var CompositionHelper_1 = __webpack_require__(/*! browser/input/CompositionHelper */ "./out/browser/input/CompositionHelper.js");
var Viewport_1 = __webpack_require__(/*! browser/Viewport */ "./out/browser/Viewport.js");
var Clipboard_1 = __webpack_require__(/*! browser/Clipboard */ "./out/browser/Clipboard.js");
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var InputHandler_1 = __webpack_require__(/*! ./InputHandler */ "./out/InputHandler.js");
var Renderer_1 = __webpack_require__(/*! ./renderer/Renderer */ "./out/renderer/Renderer.js");
var Linkifier_1 = __webpack_require__(/*! browser/Linkifier */ "./out/browser/Linkifier.js");
var SelectionService_1 = __webpack_require__(/*! browser/services/SelectionService */ "./out/browser/services/SelectionService.js");
var Browser = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var Lifecycle_1 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Strings = __webpack_require__(/*! browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var SoundService_1 = __webpack_require__(/*! browser/services/SoundService */ "./out/browser/services/SoundService.js");
var MouseZoneManager_1 = __webpack_require__(/*! browser/MouseZoneManager */ "./out/browser/MouseZoneManager.js");
var AccessibilityManager_1 = __webpack_require__(/*! ./AccessibilityManager */ "./out/AccessibilityManager.js");
var DomRenderer_1 = __webpack_require__(/*! ./renderer/dom/DomRenderer */ "./out/renderer/dom/DomRenderer.js");
var Keyboard_1 = __webpack_require__(/*! common/input/Keyboard */ "./out/common/input/Keyboard.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var WindowsMode_1 = __webpack_require__(/*! ./WindowsMode */ "./out/WindowsMode.js");
var ColorManager_1 = __webpack_require__(/*! browser/ColorManager */ "./out/browser/ColorManager.js");
var RenderService_1 = __webpack_require__(/*! browser/services/RenderService */ "./out/browser/services/RenderService.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var OptionsService_1 = __webpack_require__(/*! common/services/OptionsService */ "./out/common/services/OptionsService.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var CharSizeService_1 = __webpack_require__(/*! browser/services/CharSizeService */ "./out/browser/services/CharSizeService.js");
var BufferService_1 = __webpack_require__(/*! common/services/BufferService */ "./out/common/services/BufferService.js");
var Lifecycle_2 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var MouseService_1 = __webpack_require__(/*! browser/services/MouseService */ "./out/browser/services/MouseService.js");
var CoreService_1 = __webpack_require__(/*! common/services/CoreService */ "./out/common/services/CoreService.js");
var LogService_1 = __webpack_require__(/*! common/services/LogService */ "./out/common/services/LogService.js");
var DirtyRowService_1 = __webpack_require__(/*! common/services/DirtyRowService */ "./out/common/services/DirtyRowService.js");
var InstantiationService_1 = __webpack_require__(/*! common/services/InstantiationService */ "./out/common/services/InstantiationService.js");
var CoreMouseService_1 = __webpack_require__(/*! common/services/CoreMouseService */ "./out/common/services/CoreMouseService.js");
var document = (typeof window !== 'undefined') ? window.document : null;
var WRITE_BUFFER_PAUSE_THRESHOLD = 5;
var WRITE_TIMEOUT_MS = 12;
var WRITE_BUFFER_LENGTH_THRESHOLD = 50;
var Terminal = (function (_super) {
    __extends(Terminal, _super);
    function Terminal(options) {
        if (options === void 0) { options = {}; }
        var _this = _super.call(this) || this;
        _this.browser = Browser;
        _this.mouseEvents = 0;
        _this._keyDownHandled = false;
        _this._blankLine = null;
        _this._onCursorMove = new EventEmitter_1.EventEmitter();
        _this._onData = new EventEmitter_1.EventEmitter();
        _this._onKey = new EventEmitter_1.EventEmitter();
        _this._onLineFeed = new EventEmitter_1.EventEmitter();
        _this._onRender = new EventEmitter_1.EventEmitter();
        _this._onResize = new EventEmitter_1.EventEmitter();
        _this._onScroll = new EventEmitter_1.EventEmitter();
        _this._onSelectionChange = new EventEmitter_1.EventEmitter();
        _this._onTitleChange = new EventEmitter_1.EventEmitter();
        _this._onFocus = new EventEmitter_1.EventEmitter();
        _this._onBlur = new EventEmitter_1.EventEmitter();
        _this.onA11yCharEmitter = new EventEmitter_1.EventEmitter();
        _this.onA11yTabEmitter = new EventEmitter_1.EventEmitter();
        _this._instantiationService = new InstantiationService_1.InstantiationService();
        _this.optionsService = new OptionsService_1.OptionsService(options);
        _this._instantiationService.setService(Services_1.IOptionsService, _this.optionsService);
        _this._bufferService = _this._instantiationService.createInstance(BufferService_1.BufferService);
        _this._instantiationService.setService(Services_1.IBufferService, _this._bufferService);
        _this._logService = _this._instantiationService.createInstance(LogService_1.LogService);
        _this._instantiationService.setService(Services_1.ILogService, _this._logService);
        _this._coreService = _this._instantiationService.createInstance(CoreService_1.CoreService, function () { return _this.scrollToBottom(); });
        _this._instantiationService.setService(Services_1.ICoreService, _this._coreService);
        _this._coreService.onData(function (e) { return _this._onData.fire(e); });
        _this._coreMouseService = _this._instantiationService.createInstance(CoreMouseService_1.CoreMouseService);
        _this._instantiationService.setService(Services_1.ICoreMouseService, _this._coreMouseService);
        _this._dirtyRowService = _this._instantiationService.createInstance(DirtyRowService_1.DirtyRowService);
        _this._instantiationService.setService(Services_1.IDirtyRowService, _this._dirtyRowService);
        _this._setupOptionsListeners();
        _this._setup();
        return _this;
    }
    Object.defineProperty(Terminal.prototype, "options", {
        get: function () { return this.optionsService.options; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "cols", {
        get: function () { return this._bufferService.cols; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "rows", {
        get: function () { return this._bufferService.rows; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._onCursorMove.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._onKey.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onLineFeed", {
        get: function () { return this._onLineFeed.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onResize", {
        get: function () { return this._onResize.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onScroll", {
        get: function () { return this._onScroll.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._onTitleChange.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onFocus", {
        get: function () { return this._onFocus.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onBlur", {
        get: function () { return this._onBlur.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onA11yChar", {
        get: function () { return this.onA11yCharEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onA11yTab", {
        get: function () { return this.onA11yTabEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.dispose = function () {
        if (this._isDisposed) {
            return;
        }
        _super.prototype.dispose.call(this);
        if (this._windowsMode) {
            this._windowsMode.dispose();
            this._windowsMode = undefined;
        }
        if (this._renderService) {
            this._renderService.dispose();
        }
        this._customKeyEventHandler = null;
        this.write = function () { };
        if (this.element && this.element.parentNode) {
            this.element.parentNode.removeChild(this.element);
        }
    };
    Terminal.prototype._setup = function () {
        var _this = this;
        this._parent = document ? document.body : null;
        this.cursorState = 0;
        this.cursorHidden = false;
        this._customKeyEventHandler = null;
        this.applicationKeypad = false;
        this.originMode = false;
        this.insertMode = false;
        this.wraparoundMode = true;
        this.bracketedPasteMode = false;
        this.charset = null;
        this.gcharset = null;
        this.glevel = 0;
        this.charsets = [null];
        this.curAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this._eraseAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this.params = [];
        this.currentParam = 0;
        this.writeBuffer = [];
        this.writeBufferUtf8 = [];
        this._writeInProgress = false;
        this._xoffSentToCatchUp = false;
        this._userScrolling = false;
        this._inputHandler = new InputHandler_1.InputHandler(this, this._bufferService, this._coreService, this._dirtyRowService, this._logService, this.optionsService, this._coreMouseService);
        this._inputHandler.onCursorMove(function () { return _this._onCursorMove.fire(); });
        this._inputHandler.onLineFeed(function () { return _this._onLineFeed.fire(); });
        this.register(this._inputHandler);
        this.linkifier = this.linkifier || new Linkifier_1.Linkifier(this._bufferService, this._logService);
        if (this.options.windowsMode) {
            this._windowsMode = WindowsMode_1.applyWindowsMode(this);
        }
    };
    Object.defineProperty(Terminal.prototype, "buffer", {
        get: function () {
            return this.buffers.active;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "buffers", {
        get: function () {
            return this._bufferService.buffers;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.eraseAttrData = function () {
        this._eraseAttrData.bg &= ~(50331648 | 0xFFFFFF);
        this._eraseAttrData.bg |= this.curAttrData.bg & ~0xFC000000;
        return this._eraseAttrData;
    };
    Terminal.prototype.focus = function () {
        if (this.textarea) {
            this.textarea.focus({ preventScroll: true });
        }
    };
    Object.defineProperty(Terminal.prototype, "isFocused", {
        get: function () {
            return document.activeElement === this.textarea && document.hasFocus();
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype._setupOptionsListeners = function () {
        var _this = this;
        this.optionsService.onOptionChange(function (key) {
            switch (key) {
                case 'fontFamily':
                case 'fontSize':
                    if (_this._renderService) {
                        _this._renderService.clear();
                    }
                    if (_this._charSizeService) {
                        _this._charSizeService.measure();
                    }
                    break;
                case 'drawBoldTextInBrightColors':
                case 'letterSpacing':
                case 'lineHeight':
                case 'fontWeight':
                case 'fontWeightBold':
                    if (_this._renderService) {
                        _this._renderService.clear();
                        _this._renderService.onResize(_this.cols, _this.rows);
                        _this.refresh(0, _this.rows - 1);
                    }
                    break;
                case 'rendererType':
                    if (_this._renderService) {
                        _this._renderService.setRenderer(_this._createRenderer());
                        _this._renderService.onResize(_this.cols, _this.rows);
                    }
                    break;
                case 'scrollback':
                    _this.buffers.resize(_this.cols, _this.rows);
                    if (_this.viewport) {
                        _this.viewport.syncScrollArea();
                    }
                    break;
                case 'screenReaderMode':
                    if (_this.optionsService.options.screenReaderMode) {
                        if (!_this._accessibilityManager && _this._renderService) {
                            _this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(_this, _this._renderService);
                        }
                    }
                    else {
                        if (_this._accessibilityManager) {
                            _this._accessibilityManager.dispose();
                            _this._accessibilityManager = null;
                        }
                    }
                    break;
                case 'tabStopWidth':
                    _this.buffers.setupTabStops();
                    break;
                case 'theme':
                    _this._setTheme(_this.optionsService.options.theme);
                    break;
                case 'scrollback':
                    var newBufferLength = _this.rows + _this.optionsService.options.scrollback;
                    if (_this.buffer.lines.length > newBufferLength) {
                        var amountToTrim = _this.buffer.lines.length - newBufferLength;
                        var needsRefresh = (_this.buffer.ydisp - amountToTrim < 0);
                        _this.buffer.lines.trimStart(amountToTrim);
                        _this.buffer.ybase = Math.max(_this.buffer.ybase - amountToTrim, 0);
                        _this.buffer.ydisp = Math.max(_this.buffer.ydisp - amountToTrim, 0);
                        if (needsRefresh) {
                            _this.refresh(0, _this.rows - 1);
                        }
                    }
                case 'windowsMode':
                    if (_this.optionsService.options.windowsMode) {
                        if (!_this._windowsMode) {
                            _this._windowsMode = WindowsMode_1.applyWindowsMode(_this);
                        }
                    }
                    else {
                        if (_this._windowsMode) {
                            _this._windowsMode.dispose();
                            _this._windowsMode = undefined;
                        }
                    }
                    break;
            }
        });
    };
    Terminal.prototype._onTextAreaFocus = function (ev) {
        if (this.sendFocus) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[I');
        }
        this.updateCursorStyle(ev);
        this.element.classList.add('focus');
        this.showCursor();
        this._onFocus.fire();
    };
    Terminal.prototype.blur = function () {
        return this.textarea.blur();
    };
    Terminal.prototype._onTextAreaBlur = function () {
        this.textarea.value = '';
        this.refresh(this.buffer.y, this.buffer.y);
        if (this.sendFocus) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.ESC + '[O');
        }
        this.element.classList.remove('focus');
        this._onBlur.fire();
    };
    Terminal.prototype._initGlobal = function () {
        var _this = this;
        this._bindKeys();
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'copy', function (event) {
            if (!_this.hasSelection()) {
                return;
            }
            Clipboard_1.copyHandler(event, _this._selectionService);
        }));
        var pasteHandlerWrapper = function (event) { return Clipboard_1.handlePasteEvent(event, _this.textarea, _this.bracketedPasteMode, _this._coreService); };
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'paste', pasteHandlerWrapper));
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'paste', pasteHandlerWrapper));
        if (Browser.isFirefox) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (event) {
                if (event.button === 2) {
                    Clipboard_1.rightClickHandler(event, _this.textarea, _this.screenElement, _this._selectionService, _this.options.rightClickSelectsWord);
                }
            }));
        }
        else {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'contextmenu', function (event) {
                Clipboard_1.rightClickHandler(event, _this.textarea, _this.screenElement, _this._selectionService, _this.options.rightClickSelectsWord);
            }));
        }
        if (Browser.isLinux) {
            this.register(Lifecycle_1.addDisposableDomListener(this.element, 'auxclick', function (event) {
                if (event.button === 1) {
                    Clipboard_1.moveTextAreaUnderMouseCursor(event, _this.textarea, _this.screenElement);
                }
            }));
        }
    };
    Terminal.prototype._bindKeys = function () {
        var _this = this;
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keyup', function (ev) { return _this._keyUp(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keydown', function (ev) { return _this._keyDown(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'keypress', function (ev) { return _this._keyPress(ev); }, true));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionstart', function () { return _this._compositionHelper.compositionstart(); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionupdate', function (e) { return _this._compositionHelper.compositionupdate(e); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'compositionend', function () { return _this._compositionHelper.compositionend(); }));
        this.register(this.onRender(function () { return _this._compositionHelper.updateCompositionElements(); }));
        this.register(this.onRender(function (e) { return _this._queueLinkification(e.start, e.end); }));
    };
    Terminal.prototype.open = function (parent) {
        var _this = this;
        this._parent = parent || this._parent;
        if (!this._parent) {
            throw new Error('Terminal requires a parent element.');
        }
        this._document = this._parent.ownerDocument;
        this.element = this._document.createElement('div');
        this.element.dir = 'ltr';
        this.element.classList.add('terminal');
        this.element.classList.add('xterm');
        this.element.setAttribute('tabindex', '0');
        this._parent.appendChild(this.element);
        var fragment = document.createDocumentFragment();
        this._viewportElement = document.createElement('div');
        this._viewportElement.classList.add('xterm-viewport');
        fragment.appendChild(this._viewportElement);
        this._viewportScrollArea = document.createElement('div');
        this._viewportScrollArea.classList.add('xterm-scroll-area');
        this._viewportElement.appendChild(this._viewportScrollArea);
        this.screenElement = document.createElement('div');
        this.screenElement.classList.add('xterm-screen');
        this._helperContainer = document.createElement('div');
        this._helperContainer.classList.add('xterm-helpers');
        this.screenElement.appendChild(this._helperContainer);
        fragment.appendChild(this.screenElement);
        this.textarea = document.createElement('textarea');
        this.textarea.classList.add('xterm-helper-textarea');
        this.textarea.setAttribute('aria-label', Strings.promptLabel);
        this.textarea.setAttribute('aria-multiline', 'false');
        this.textarea.setAttribute('autocorrect', 'off');
        this.textarea.setAttribute('autocapitalize', 'off');
        this.textarea.setAttribute('spellcheck', 'false');
        this.textarea.tabIndex = 0;
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'focus', function (ev) { return _this._onTextAreaFocus(ev); }));
        this.register(Lifecycle_1.addDisposableDomListener(this.textarea, 'blur', function () { return _this._onTextAreaBlur(); }));
        this._helperContainer.appendChild(this.textarea);
        this._charSizeService = this._instantiationService.createInstance(CharSizeService_1.CharSizeService, this._document, this._helperContainer);
        this._instantiationService.setService(Services_2.ICharSizeService, this._charSizeService);
        this._compositionView = document.createElement('div');
        this._compositionView.classList.add('composition-view');
        this._compositionHelper = this._instantiationService.createInstance(CompositionHelper_1.CompositionHelper, this.textarea, this._compositionView);
        this._helperContainer.appendChild(this._compositionView);
        this.element.appendChild(fragment);
        this._theme = this.options.theme;
        this.options.theme = null;
        this._colorManager = new ColorManager_1.ColorManager(document, this.options.allowTransparency);
        this._colorManager.setTheme(this._theme);
        var renderer = this._createRenderer();
        this._renderService = this._instantiationService.createInstance(RenderService_1.RenderService, renderer, this.rows, this.screenElement);
        this._instantiationService.setService(Services_2.IRenderService, this._renderService);
        this._renderService.onRender(function (e) { return _this._onRender.fire(e); });
        this.onResize(function (e) { return _this._renderService.resize(e.cols, e.rows); });
        this._soundService = this._instantiationService.createInstance(SoundService_1.SoundService);
        this._instantiationService.setService(Services_2.ISoundService, this._soundService);
        this._mouseService = this._instantiationService.createInstance(MouseService_1.MouseService);
        this._instantiationService.setService(Services_2.IMouseService, this._mouseService);
        this.viewport = this._instantiationService.createInstance(Viewport_1.Viewport, function (amount, suppressEvent) { return _this.scrollLines(amount, suppressEvent); }, this._viewportElement, this._viewportScrollArea);
        this.viewport.onThemeChange(this._colorManager.colors);
        this.register(this.viewport);
        this.register(this.onCursorMove(function () { return _this._renderService.onCursorMove(); }));
        this.register(this.onResize(function () { return _this._renderService.onResize(_this.cols, _this.rows); }));
        this.register(this.onBlur(function () { return _this._renderService.onBlur(); }));
        this.register(this.onFocus(function () { return _this._renderService.onFocus(); }));
        this.register(this._renderService.onDimensionsChange(function () { return _this.viewport.syncScrollArea(); }));
        this._selectionService = this._instantiationService.createInstance(SelectionService_1.SelectionService, function (amount, suppressEvent) { return _this.scrollLines(amount, suppressEvent); }, this.element, this.screenElement);
        this._instantiationService.setService(Services_2.ISelectionService, this._selectionService);
        this.register(this._selectionService.onSelectionChange(function () { return _this._onSelectionChange.fire(); }));
        this.register(this._selectionService.onRedrawRequest(function (e) { return _this._renderService.onSelectionChanged(e.start, e.end, e.columnSelectMode); }));
        this.register(this._selectionService.onLinuxMouseSelection(function (text) {
            _this.textarea.value = text;
            _this.textarea.focus();
            _this.textarea.select();
        }));
        this.register(this.onScroll(function () {
            _this.viewport.syncScrollArea();
            _this._selectionService.refresh();
        }));
        this.register(Lifecycle_1.addDisposableDomListener(this._viewportElement, 'scroll', function () { return _this._selectionService.refresh(); }));
        this._mouseZoneManager = this._instantiationService.createInstance(MouseZoneManager_1.MouseZoneManager, this.element, this.screenElement);
        this.register(this._mouseZoneManager);
        this.register(this.onScroll(function () { return _this._mouseZoneManager.clearAll(); }));
        this.linkifier.attachToDom(this.element, this._mouseZoneManager);
        this.register(Lifecycle_1.addDisposableDomListener(this.element, 'mousedown', function (e) { return _this._selectionService.onMouseDown(e); }));
        if (this.mouseEvents) {
            this._selectionService.disable();
            this.element.classList.add('enable-mouse-events');
        }
        else {
            this._selectionService.enable();
        }
        if (this.options.screenReaderMode) {
            this._accessibilityManager = new AccessibilityManager_1.AccessibilityManager(this, this._renderService);
        }
        this._charSizeService.measure();
        this.refresh(0, this.rows - 1);
        this._initGlobal();
        this.bindMouse();
    };
    Terminal.prototype._createRenderer = function () {
        switch (this.options.rendererType) {
            case 'canvas': return new Renderer_1.Renderer(this._colorManager.colors, this, this._bufferService, this._charSizeService, this.optionsService);
            case 'dom': return new DomRenderer_1.DomRenderer(this, this._colorManager.colors, this._charSizeService, this.optionsService);
            default: throw new Error("Unrecognized rendererType \"" + this.options.rendererType + "\"");
        }
    };
    Terminal.prototype._setTheme = function (theme) {
        this._theme = theme;
        if (this._colorManager) {
            this._colorManager.setTheme(theme);
        }
        if (this._renderService) {
            this._renderService.setColors(this._colorManager.colors);
        }
        if (this.viewport) {
            this.viewport.onThemeChange(this._colorManager.colors);
        }
    };
    Terminal.prototype.bindMouse = function () {
        var _this = this;
        var self = this;
        var el = this.element;
        function sendEvent(ev) {
            var pos;
            pos = self._mouseService.getRawByteCoords(ev, self.screenElement, self.cols, self.rows);
            if (!pos) {
                return false;
            }
            var but;
            var action;
            switch (ev.overrideType || ev.type) {
                case 'mousemove':
                    action = 32;
                    if (ev.buttons === undefined) {
                        but = 3;
                        if (ev.button !== undefined) {
                            but = ev.button < 3 ? ev.button : 3;
                        }
                    }
                    else {
                        but = ev.buttons & 1 ? 0 :
                            ev.buttons & 4 ? 1 :
                                ev.buttons & 2 ? 2 :
                                    3;
                    }
                    break;
                case 'mouseup':
                    action = 0;
                    but = ev.button < 3 ? ev.button : 3;
                    break;
                case 'mousedown':
                    action = 1;
                    but = ev.button < 3 ? ev.button : 3;
                    break;
                case 'wheel':
                    if (ev.deltaY !== 0) {
                        action = ev.deltaY < 0 ? 0 : 1;
                    }
                    but = 4;
                    break;
                default:
                    return false;
            }
            if (action === undefined || but === undefined || but > 4) {
                return false;
            }
            return self._coreMouseService.triggerMouseEvent({
                col: pos.x - 33,
                row: pos.y - 33,
                button: but,
                action: action,
                ctrl: ev.ctrlKey,
                alt: ev.altKey,
                shift: ev.shiftKey
            });
        }
        var requestedEvents = {
            mouseup: null,
            wheel: null,
            mousedrag: null,
            mousemove: null
        };
        var eventListeners = {
            mouseup: function (ev) {
                sendEvent(ev);
                if (!ev.buttons) {
                    _this._document.removeEventListener('mouseup', requestedEvents.mouseup);
                    if (requestedEvents.mousedrag) {
                        _this._document.removeEventListener('mousemove', requestedEvents.mousedrag);
                    }
                }
                return _this.cancel(ev);
            },
            wheel: function (ev) {
                sendEvent(ev);
                ev.preventDefault();
                return _this.cancel(ev);
            },
            mousedrag: function (ev) {
                if (ev.buttons) {
                    sendEvent(ev);
                }
            },
            mousemove: function (ev) {
                if (!ev.buttons) {
                    sendEvent(ev);
                }
            }
        };
        this._coreMouseService.onProtocolChange(function (events) {
            _this.mouseEvents = events;
            if (events) {
                if (_this.optionsService.options.logLevel === 'debug') {
                    _this._logService.debug('Binding to mouse events:', _this._coreMouseService.explainEvents(events));
                }
                _this.element.classList.add('enable-mouse-events');
                _this._selectionService.disable();
            }
            else {
                _this._logService.debug('Unbinding from mouse events.');
                _this.element.classList.remove('enable-mouse-events');
                _this._selectionService.enable();
            }
            if (!(events & 8)) {
                el.removeEventListener('mousemove', requestedEvents.mousemove);
                requestedEvents.mousemove = null;
            }
            else if (!requestedEvents.mousemove) {
                el.addEventListener('mousemove', eventListeners.mousemove);
                requestedEvents.mousemove = eventListeners.mousemove;
            }
            if (!(events & 16)) {
                el.removeEventListener('wheel', requestedEvents.wheel);
                requestedEvents.wheel = null;
            }
            else if (!requestedEvents.wheel) {
                el.addEventListener('wheel', eventListeners.wheel);
                requestedEvents.wheel = eventListeners.wheel;
            }
            if (!(events & 2)) {
                _this._document.removeEventListener('mouseup', requestedEvents.mouseup);
                requestedEvents.mouseup = null;
            }
            else if (!requestedEvents.mouseup) {
                requestedEvents.mouseup = eventListeners.mouseup;
            }
            if (!(events & 4)) {
                _this._document.removeEventListener('mousemove', requestedEvents.mousedrag);
                requestedEvents.mousedrag = null;
            }
            else if (!requestedEvents.mousedrag) {
                requestedEvents.mousedrag = eventListeners.mousedrag;
            }
        });
        this._coreMouseService.activeProtocol = this._coreMouseService.activeProtocol;
        this.register(Lifecycle_1.addDisposableDomListener(el, 'mousedown', function (ev) {
            ev.preventDefault();
            _this.focus();
            if (!_this.mouseEvents || _this._selectionService.shouldForceSelection(ev)) {
                return;
            }
            sendEvent(ev);
            if (requestedEvents.mouseup) {
                _this._document.addEventListener('mouseup', requestedEvents.mouseup);
            }
            if (requestedEvents.mousedrag) {
                _this._document.addEventListener('mousemove', requestedEvents.mousedrag);
            }
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (!requestedEvents.wheel) {
                if (!_this.buffer.hasScrollback) {
                    var amount = _this.viewport.getLinesScrolled(ev);
                    if (amount === 0) {
                        return;
                    }
                    var sequence = EscapeSequences_1.C0.ESC + (_this._coreService.decPrivateModes.applicationCursorKeys ? 'O' : '[') + (ev.deltaY < 0 ? 'A' : 'B');
                    var data = '';
                    for (var i = 0; i < Math.abs(amount); i++) {
                        data += sequence;
                    }
                    _this._coreService.triggerDataEvent(data, true);
                }
                return;
            }
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'wheel', function (ev) {
            if (requestedEvents.wheel)
                return;
            if (!_this.viewport.onWheel(ev)) {
                return _this.cancel(ev);
            }
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchstart', function (ev) {
            if (_this.mouseEvents)
                return;
            _this.viewport.onTouchStart(ev);
            return _this.cancel(ev);
        }));
        this.register(Lifecycle_1.addDisposableDomListener(el, 'touchmove', function (ev) {
            if (_this.mouseEvents)
                return;
            if (!_this.viewport.onTouchMove(ev)) {
                return _this.cancel(ev);
            }
        }));
    };
    Terminal.prototype.refresh = function (start, end) {
        if (this._renderService) {
            this._renderService.refreshRows(start, end);
        }
    };
    Terminal.prototype._queueLinkification = function (start, end) {
        if (this.linkifier) {
            this.linkifier.linkifyRows(start, end);
        }
    };
    Terminal.prototype.updateCursorStyle = function (ev) {
        if (this._selectionService && this._selectionService.shouldColumnSelect(ev)) {
            this.element.classList.add('column-select');
        }
        else {
            this.element.classList.remove('column-select');
        }
    };
    Terminal.prototype.showCursor = function () {
        if (!this.cursorState) {
            this.cursorState = 1;
            this.refresh(this.buffer.y, this.buffer.y);
        }
    };
    Terminal.prototype.scroll = function (isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        var newLine;
        newLine = this._blankLine;
        var eraseAttr = this.eraseAttrData();
        if (!newLine || newLine.length !== this.cols || newLine.getFg(0) !== eraseAttr.fg || newLine.getBg(0) !== eraseAttr.bg) {
            newLine = this.buffer.getBlankLine(eraseAttr, isWrapped);
            this._blankLine = newLine;
        }
        newLine.isWrapped = isWrapped;
        var topRow = this.buffer.ybase + this.buffer.scrollTop;
        var bottomRow = this.buffer.ybase + this.buffer.scrollBottom;
        if (this.buffer.scrollTop === 0) {
            var willBufferBeTrimmed = this.buffer.lines.isFull;
            if (bottomRow === this.buffer.lines.length - 1) {
                if (willBufferBeTrimmed) {
                    this.buffer.lines.recycle().copyFrom(newLine);
                }
                else {
                    this.buffer.lines.push(newLine.clone());
                }
            }
            else {
                this.buffer.lines.splice(bottomRow + 1, 0, newLine.clone());
            }
            if (!willBufferBeTrimmed) {
                this.buffer.ybase++;
                if (!this._userScrolling) {
                    this.buffer.ydisp++;
                }
            }
            else {
                if (this._userScrolling) {
                    this.buffer.ydisp = Math.max(this.buffer.ydisp - 1, 0);
                }
            }
        }
        else {
            var scrollRegionHeight = bottomRow - topRow + 1;
            this.buffer.lines.shiftElements(topRow + 1, scrollRegionHeight - 1, -1);
            this.buffer.lines.set(bottomRow, newLine.clone());
        }
        if (!this._userScrolling) {
            this.buffer.ydisp = this.buffer.ybase;
        }
        this._dirtyRowService.markRangeDirty(this.buffer.scrollTop, this.buffer.scrollBottom);
        this._onScroll.fire(this.buffer.ydisp);
    };
    Terminal.prototype.scrollLines = function (disp, suppressScrollEvent) {
        if (disp < 0) {
            if (this.buffer.ydisp === 0) {
                return;
            }
            this._userScrolling = true;
        }
        else if (disp + this.buffer.ydisp >= this.buffer.ybase) {
            this._userScrolling = false;
        }
        var oldYdisp = this.buffer.ydisp;
        this.buffer.ydisp = Math.max(Math.min(this.buffer.ydisp + disp, this.buffer.ybase), 0);
        if (oldYdisp === this.buffer.ydisp) {
            return;
        }
        if (!suppressScrollEvent) {
            this._onScroll.fire(this.buffer.ydisp);
        }
        this.refresh(0, this.rows - 1);
    };
    Terminal.prototype.scrollPages = function (pageCount) {
        this.scrollLines(pageCount * (this.rows - 1));
    };
    Terminal.prototype.scrollToTop = function () {
        this.scrollLines(-this.buffer.ydisp);
    };
    Terminal.prototype.scrollToBottom = function () {
        this.scrollLines(this.buffer.ybase - this.buffer.ydisp);
    };
    Terminal.prototype.scrollToLine = function (line) {
        var scrollAmount = line - this.buffer.ydisp;
        if (scrollAmount !== 0) {
            this.scrollLines(scrollAmount);
        }
    };
    Terminal.prototype.writeUtf8 = function (data) {
        var _this = this;
        if (this._isDisposed) {
            return;
        }
        if (!data) {
            return;
        }
        this.writeBufferUtf8.push(data);
        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBufferUtf8.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.DC3);
            this._xoffSentToCatchUp = true;
        }
        if (!this._writeInProgress && this.writeBufferUtf8.length > 0) {
            this._writeInProgress = true;
            setTimeout(function () {
                _this._innerWriteUtf8();
            });
        }
    };
    Terminal.prototype._innerWriteUtf8 = function (bufferOffset) {
        var _this = this;
        if (bufferOffset === void 0) { bufferOffset = 0; }
        if (this._isDisposed) {
            this.writeBufferUtf8 = [];
        }
        var startTime = Date.now();
        while (this.writeBufferUtf8.length > bufferOffset) {
            var data = this.writeBufferUtf8[bufferOffset];
            bufferOffset++;
            if (this._xoffSentToCatchUp && this.writeBufferUtf8.length === bufferOffset) {
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.DC1);
                this._xoffSentToCatchUp = false;
            }
            this._inputHandler.parseUtf8(data);
            this.refresh(this._dirtyRowService.start, this._dirtyRowService.end);
            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {
                break;
            }
        }
        if (this.writeBufferUtf8.length > bufferOffset) {
            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {
                this.writeBufferUtf8 = this.writeBufferUtf8.slice(bufferOffset);
                bufferOffset = 0;
            }
            setTimeout(function () { return _this._innerWriteUtf8(bufferOffset); }, 0);
        }
        else {
            this._writeInProgress = false;
            this.writeBufferUtf8 = [];
        }
    };
    Terminal.prototype.write = function (data) {
        var _this = this;
        if (this._isDisposed) {
            return;
        }
        if (!data) {
            return;
        }
        this.writeBuffer.push(data);
        if (this.options.useFlowControl && !this._xoffSentToCatchUp && this.writeBuffer.length >= WRITE_BUFFER_PAUSE_THRESHOLD) {
            this._coreService.triggerDataEvent(EscapeSequences_1.C0.DC3);
            this._xoffSentToCatchUp = true;
        }
        if (!this._writeInProgress && this.writeBuffer.length > 0) {
            this._writeInProgress = true;
            setTimeout(function () {
                _this._innerWrite();
            });
        }
    };
    Terminal.prototype._innerWrite = function (bufferOffset) {
        var _this = this;
        if (bufferOffset === void 0) { bufferOffset = 0; }
        if (this._isDisposed) {
            this.writeBuffer = [];
        }
        var startTime = Date.now();
        while (this.writeBuffer.length > bufferOffset) {
            var data = this.writeBuffer[bufferOffset];
            bufferOffset++;
            if (this._xoffSentToCatchUp && this.writeBuffer.length === bufferOffset) {
                this._coreService.triggerDataEvent(EscapeSequences_1.C0.DC1);
                this._xoffSentToCatchUp = false;
            }
            this._inputHandler.parse(data);
            this.refresh(this._dirtyRowService.start, this._dirtyRowService.end);
            if (Date.now() - startTime >= WRITE_TIMEOUT_MS) {
                break;
            }
        }
        if (this.writeBuffer.length > bufferOffset) {
            if (bufferOffset > WRITE_BUFFER_LENGTH_THRESHOLD) {
                this.writeBuffer = this.writeBuffer.slice(bufferOffset);
                bufferOffset = 0;
            }
            setTimeout(function () { return _this._innerWrite(bufferOffset); }, 0);
        }
        else {
            this._writeInProgress = false;
            this.writeBuffer = [];
        }
    };
    Terminal.prototype.writeln = function (data) {
        this.write(data + '\r\n');
    };
    Terminal.prototype.paste = function (data) {
        Clipboard_1.paste(data, this.textarea, this.bracketedPasteMode, this._coreService);
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._customKeyEventHandler = customKeyEventHandler;
    };
    Terminal.prototype.addEscHandler = function (id, callback) {
        return this._inputHandler.addEscHandler(id, callback);
    };
    Terminal.prototype.addDcsHandler = function (id, callback) {
        return this._inputHandler.addDcsHandler(id, callback);
    };
    Terminal.prototype.addCsiHandler = function (id, callback) {
        return this._inputHandler.addCsiHandler(id, callback);
    };
    Terminal.prototype.addOscHandler = function (ident, callback) {
        return this._inputHandler.addOscHandler(ident, callback);
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        var matcherId = this.linkifier.registerLinkMatcher(regex, handler, options);
        this.refresh(0, this.rows - 1);
        return matcherId;
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        if (this.linkifier.deregisterLinkMatcher(matcherId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        var joinerId = this._renderService.registerCharacterJoiner(handler);
        this.refresh(0, this.rows - 1);
        return joinerId;
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        if (this._renderService.deregisterCharacterJoiner(joinerId)) {
            this.refresh(0, this.rows - 1);
        }
    };
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () {
            return this.buffer.markers;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.addMarker = function (cursorYOffset) {
        if (this.buffer !== this.buffers.normal) {
            return;
        }
        return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this._selectionService ? this._selectionService.hasSelection : false;
    };
    Terminal.prototype.select = function (column, row, length) {
        this._selectionService.setSelection(column, row, length);
    };
    Terminal.prototype.getSelection = function () {
        return this._selectionService ? this._selectionService.selectionText : '';
    };
    Terminal.prototype.getSelectionPosition = function () {
        if (!this._selectionService.hasSelection) {
            return undefined;
        }
        return {
            startColumn: this._selectionService.selectionStart[0],
            startRow: this._selectionService.selectionStart[1],
            endColumn: this._selectionService.selectionEnd[0],
            endRow: this._selectionService.selectionEnd[1]
        };
    };
    Terminal.prototype.clearSelection = function () {
        if (this._selectionService) {
            this._selectionService.clearSelection();
        }
    };
    Terminal.prototype.selectAll = function () {
        if (this._selectionService) {
            this._selectionService.selectAll();
        }
    };
    Terminal.prototype.selectLines = function (start, end) {
        if (this._selectionService) {
            this._selectionService.selectLines(start, end);
        }
    };
    Terminal.prototype._keyDown = function (event) {
        this._keyDownHandled = false;
        if (this._customKeyEventHandler && this._customKeyEventHandler(event) === false) {
            return false;
        }
        if (!this._compositionHelper.keydown(event)) {
            if (this.buffer.ybase !== this.buffer.ydisp) {
                this.scrollToBottom();
            }
            return false;
        }
        var result = Keyboard_1.evaluateKeyboardEvent(event, this._coreService.decPrivateModes.applicationCursorKeys, this.browser.isMac, this.options.macOptionIsMeta);
        this.updateCursorStyle(event);
        if (result.type === 3 || result.type === 2) {
            var scrollCount = this.rows - 1;
            this.scrollLines(result.type === 2 ? -scrollCount : scrollCount);
            return this.cancel(event, true);
        }
        if (result.type === 1) {
            this.selectAll();
        }
        if (this._isThirdLevelShift(this.browser, event)) {
            return true;
        }
        if (result.cancel) {
            this.cancel(event, true);
        }
        if (!result.key) {
            return true;
        }
        if (result.key === EscapeSequences_1.C0.ETX || result.key === EscapeSequences_1.C0.CR) {
            this.textarea.value = '';
        }
        this._onKey.fire({ key: result.key, domEvent: event });
        this.showCursor();
        this._coreService.triggerDataEvent(result.key, true);
        if (!this.optionsService.options.screenReaderMode) {
            return this.cancel(event, true);
        }
        this._keyDownHandled = true;
    };
    Terminal.prototype._isThirdLevelShift = function (browser, ev) {
        var thirdLevelKey = (browser.isMac && !this.options.macOptionIsMeta && ev.altKey && !ev.ctrlKey && !ev.metaKey) ||
            (browser.isWindows && ev.altKey && ev.ctrlKey && !ev.metaKey);
        if (ev.type === 'keypress') {
            return thirdLevelKey;
        }
        return thirdLevelKey && (!ev.keyCode || ev.keyCode > 47);
    };
    Terminal.prototype.setgLevel = function (g) {
        this.glevel = g;
        this.charset = this.charsets[g];
    };
    Terminal.prototype.setgCharset = function (g, charset) {
        this.charsets[g] = charset;
        if (this.glevel === g) {
            this.charset = charset;
        }
    };
    Terminal.prototype._keyUp = function (ev) {
        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {
            return;
        }
        if (!wasModifierKeyOnlyEvent(ev)) {
            this.focus();
        }
        this.updateCursorStyle(ev);
    };
    Terminal.prototype._keyPress = function (ev) {
        var key;
        if (this._keyDownHandled) {
            return false;
        }
        if (this._customKeyEventHandler && this._customKeyEventHandler(ev) === false) {
            return false;
        }
        this.cancel(ev);
        if (ev.charCode) {
            key = ev.charCode;
        }
        else if (ev.which === null || ev.which === undefined) {
            key = ev.keyCode;
        }
        else if (ev.which !== 0 && ev.charCode !== 0) {
            key = ev.which;
        }
        else {
            return false;
        }
        if (!key || ((ev.altKey || ev.ctrlKey || ev.metaKey) && !this._isThirdLevelShift(this.browser, ev))) {
            return false;
        }
        key = String.fromCharCode(key);
        this._onKey.fire({ key: key, domEvent: ev });
        this.showCursor();
        this._coreService.triggerDataEvent(key, true);
        return true;
    };
    Terminal.prototype.bell = function () {
        var _this = this;
        if (this._soundBell()) {
            this._soundService.playBellSound();
        }
        if (this._visualBell()) {
            this.element.classList.add('visual-bell-active');
            clearTimeout(this._visualBellTimer);
            this._visualBellTimer = window.setTimeout(function () {
                _this.element.classList.remove('visual-bell-active');
            }, 200);
        }
    };
    Terminal.prototype.resize = function (x, y) {
        if (isNaN(x) || isNaN(y)) {
            return;
        }
        if (x === this.cols && y === this.rows) {
            if (this._charSizeService && !this._charSizeService.hasValidSize) {
                this._charSizeService.measure();
            }
            return;
        }
        if (x < BufferService_1.MINIMUM_COLS)
            x = BufferService_1.MINIMUM_COLS;
        if (y < BufferService_1.MINIMUM_ROWS)
            y = BufferService_1.MINIMUM_ROWS;
        this.buffers.resize(x, y);
        this._bufferService.resize(x, y);
        this.buffers.setupTabStops(this.cols);
        if (this._charSizeService) {
            this._charSizeService.measure();
        }
        this.refresh(0, this.rows - 1);
        this._onResize.fire({ cols: x, rows: y });
    };
    Terminal.prototype.clear = function () {
        if (this.buffer.ybase === 0 && this.buffer.y === 0) {
            return;
        }
        this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y));
        this.buffer.lines.length = 1;
        this.buffer.ydisp = 0;
        this.buffer.ybase = 0;
        this.buffer.y = 0;
        for (var i = 1; i < this.rows; i++) {
            this.buffer.lines.push(this.buffer.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA));
        }
        this.refresh(0, this.rows - 1);
        this._onScroll.fire(this.buffer.ydisp);
    };
    Terminal.prototype.is = function (term) {
        return (this.options.termName + '').indexOf(term) === 0;
    };
    Terminal.prototype.handleTitle = function (title) {
        this._onTitleChange.fire(title);
    };
    Terminal.prototype.reset = function () {
        this.options.rows = this.rows;
        this.options.cols = this.cols;
        var customKeyEventHandler = this._customKeyEventHandler;
        var inputHandler = this._inputHandler;
        var cursorState = this.cursorState;
        var writeBuffer = this.writeBuffer;
        var writeBufferUtf8 = this.writeBufferUtf8;
        var writeInProgress = this._writeInProgress;
        var xoffSentToCatchUp = this._xoffSentToCatchUp;
        var userScrolling = this._userScrolling;
        this._setup();
        this._bufferService.reset();
        this._coreService.reset();
        this._coreMouseService.reset();
        if (this._selectionService) {
            this._selectionService.reset();
        }
        this._customKeyEventHandler = customKeyEventHandler;
        this._inputHandler = inputHandler;
        this.cursorState = cursorState;
        this.writeBuffer = writeBuffer;
        this.writeBufferUtf8 = writeBufferUtf8;
        this._writeInProgress = writeInProgress;
        this._xoffSentToCatchUp = xoffSentToCatchUp;
        this._userScrolling = userScrolling;
        this.refresh(0, this.rows - 1);
        if (this.viewport) {
            this.viewport.syncScrollArea();
        }
    };
    Terminal.prototype.cancel = function (ev, force) {
        if (!this.options.cancelEvents && !force) {
            return;
        }
        ev.preventDefault();
        ev.stopPropagation();
        return false;
    };
    Terminal.prototype._visualBell = function () {
        return false;
    };
    Terminal.prototype._soundBell = function () {
        return this.options.bellStyle === 'sound';
    };
    return Terminal;
}(Lifecycle_2.Disposable));
exports.Terminal = Terminal;
function wasModifierKeyOnlyEvent(ev) {
    return ev.keyCode === 16 ||
        ev.keyCode === 17 ||
        ev.keyCode === 18;
}


/***/ }),

/***/ "./out/WindowsMode.js":
/*!****************************!*\
  !*** ./out/WindowsMode.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
function applyWindowsMode(terminal) {
    return terminal.onLineFeed(function () {
        var line = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y - 1);
        var lastChar = line.get(terminal.cols - 1);
        var nextLine = terminal.buffer.lines.get(terminal.buffer.ybase + terminal.buffer.y);
        nextLine.isWrapped = (lastChar[Constants_1.CHAR_DATA_CODE_INDEX] !== Constants_1.NULL_CELL_CODE && lastChar[Constants_1.CHAR_DATA_CODE_INDEX] !== Constants_1.WHITESPACE_CELL_CODE);
    });
}
exports.applyWindowsMode = applyWindowsMode;


/***/ }),

/***/ "./out/browser/Clipboard.js":
/*!**********************************!*\
  !*** ./out/browser/Clipboard.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function prepareTextForTerminal(text) {
    return text.replace(/\r?\n/g, '\r');
}
exports.prepareTextForTerminal = prepareTextForTerminal;
function bracketTextForPaste(text, bracketedPasteMode) {
    if (bracketedPasteMode) {
        return '\x1b[200~' + text + '\x1b[201~';
    }
    return text;
}
exports.bracketTextForPaste = bracketTextForPaste;
function copyHandler(ev, selectionService) {
    if (ev.clipboardData) {
        ev.clipboardData.setData('text/plain', selectionService.selectionText);
    }
    ev.preventDefault();
}
exports.copyHandler = copyHandler;
function handlePasteEvent(ev, textarea, bracketedPasteMode, coreService) {
    ev.stopPropagation();
    if (ev.clipboardData) {
        var text = ev.clipboardData.getData('text/plain');
        paste(text, textarea, bracketedPasteMode, coreService);
    }
}
exports.handlePasteEvent = handlePasteEvent;
function paste(text, textarea, bracketedPasteMode, coreService) {
    text = prepareTextForTerminal(text);
    text = bracketTextForPaste(text, bracketedPasteMode);
    coreService.triggerDataEvent(text, true);
    textarea.value = '';
}
exports.paste = paste;
function moveTextAreaUnderMouseCursor(ev, textarea, screenElement) {
    var pos = screenElement.getBoundingClientRect();
    var left = ev.clientX - pos.left - 10;
    var top = ev.clientY - pos.top - 10;
    textarea.style.position = 'absolute';
    textarea.style.width = '20px';
    textarea.style.height = '20px';
    textarea.style.left = left + "px";
    textarea.style.top = top + "px";
    textarea.style.zIndex = '1000';
    textarea.focus();
    setTimeout(function () {
        textarea.style.position = null;
        textarea.style.width = null;
        textarea.style.height = null;
        textarea.style.left = null;
        textarea.style.top = null;
        textarea.style.zIndex = null;
    }, 200);
}
exports.moveTextAreaUnderMouseCursor = moveTextAreaUnderMouseCursor;
function rightClickHandler(ev, textarea, screenElement, selectionService, shouldSelectWord) {
    moveTextAreaUnderMouseCursor(ev, textarea, screenElement);
    if (shouldSelectWord && !selectionService.isClickInSelection(ev)) {
        selectionService.selectWordAtCursor(ev);
    }
    textarea.value = selectionService.selectionText;
    textarea.select();
}
exports.rightClickHandler = rightClickHandler;


/***/ }),

/***/ "./out/browser/ColorManager.js":
/*!*************************************!*\
  !*** ./out/browser/ColorManager.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DEFAULT_FOREGROUND = fromHex('#ffffff');
var DEFAULT_BACKGROUND = fromHex('#000000');
var DEFAULT_CURSOR = fromHex('#ffffff');
var DEFAULT_CURSOR_ACCENT = fromHex('#000000');
var DEFAULT_SELECTION = {
    css: 'rgba(255, 255, 255, 0.3)',
    rgba: 0xFFFFFF77
};
exports.DEFAULT_ANSI_COLORS = (function () {
    var colors = [
        fromHex('#2e3436'),
        fromHex('#cc0000'),
        fromHex('#4e9a06'),
        fromHex('#c4a000'),
        fromHex('#3465a4'),
        fromHex('#75507b'),
        fromHex('#06989a'),
        fromHex('#d3d7cf'),
        fromHex('#555753'),
        fromHex('#ef2929'),
        fromHex('#8ae234'),
        fromHex('#fce94f'),
        fromHex('#729fcf'),
        fromHex('#ad7fa8'),
        fromHex('#34e2e2'),
        fromHex('#eeeeec')
    ];
    var v = [0x00, 0x5f, 0x87, 0xaf, 0xd7, 0xff];
    for (var i = 0; i < 216; i++) {
        var r = v[(i / 36) % 6 | 0];
        var g = v[(i / 6) % 6 | 0];
        var b = v[i % 6];
        colors.push({
            css: "#" + toPaddedHex(r) + toPaddedHex(g) + toPaddedHex(b),
            rgba: ((r << 24) | (g << 16) | (b << 8) | 0xFF) >>> 0
        });
    }
    for (var i = 0; i < 24; i++) {
        var c = 8 + i * 10;
        var ch = toPaddedHex(c);
        colors.push({
            css: "#" + ch + ch + ch,
            rgba: ((c << 24) | (c << 16) | (c << 8) | 0xFF) >>> 0
        });
    }
    return colors;
})();
function fromHex(css) {
    return {
        css: css,
        rgba: parseInt(css.slice(1), 16) << 8 | 0xFF
    };
}
function toPaddedHex(c) {
    var s = c.toString(16);
    return s.length < 2 ? '0' + s : s;
}
var ColorManager = (function () {
    function ColorManager(document, allowTransparency) {
        this.allowTransparency = allowTransparency;
        var canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        var ctx = canvas.getContext('2d');
        if (!ctx) {
            throw new Error('Could not get rendering context');
        }
        this._ctx = ctx;
        this._ctx.globalCompositeOperation = 'copy';
        this._litmusColor = this._ctx.createLinearGradient(0, 0, 1, 1);
        this.colors = {
            foreground: DEFAULT_FOREGROUND,
            background: DEFAULT_BACKGROUND,
            cursor: DEFAULT_CURSOR,
            cursorAccent: DEFAULT_CURSOR_ACCENT,
            selection: DEFAULT_SELECTION,
            ansi: exports.DEFAULT_ANSI_COLORS.slice()
        };
    }
    ColorManager.prototype.setTheme = function (theme) {
        if (theme === void 0) { theme = {}; }
        this.colors.foreground = this._parseColor(theme.foreground, DEFAULT_FOREGROUND);
        this.colors.background = this._parseColor(theme.background, DEFAULT_BACKGROUND);
        this.colors.cursor = this._parseColor(theme.cursor, DEFAULT_CURSOR, true);
        this.colors.cursorAccent = this._parseColor(theme.cursorAccent, DEFAULT_CURSOR_ACCENT, true);
        this.colors.selection = this._parseColor(theme.selection, DEFAULT_SELECTION, true);
        this.colors.ansi[0] = this._parseColor(theme.black, exports.DEFAULT_ANSI_COLORS[0]);
        this.colors.ansi[1] = this._parseColor(theme.red, exports.DEFAULT_ANSI_COLORS[1]);
        this.colors.ansi[2] = this._parseColor(theme.green, exports.DEFAULT_ANSI_COLORS[2]);
        this.colors.ansi[3] = this._parseColor(theme.yellow, exports.DEFAULT_ANSI_COLORS[3]);
        this.colors.ansi[4] = this._parseColor(theme.blue, exports.DEFAULT_ANSI_COLORS[4]);
        this.colors.ansi[5] = this._parseColor(theme.magenta, exports.DEFAULT_ANSI_COLORS[5]);
        this.colors.ansi[6] = this._parseColor(theme.cyan, exports.DEFAULT_ANSI_COLORS[6]);
        this.colors.ansi[7] = this._parseColor(theme.white, exports.DEFAULT_ANSI_COLORS[7]);
        this.colors.ansi[8] = this._parseColor(theme.brightBlack, exports.DEFAULT_ANSI_COLORS[8]);
        this.colors.ansi[9] = this._parseColor(theme.brightRed, exports.DEFAULT_ANSI_COLORS[9]);
        this.colors.ansi[10] = this._parseColor(theme.brightGreen, exports.DEFAULT_ANSI_COLORS[10]);
        this.colors.ansi[11] = this._parseColor(theme.brightYellow, exports.DEFAULT_ANSI_COLORS[11]);
        this.colors.ansi[12] = this._parseColor(theme.brightBlue, exports.DEFAULT_ANSI_COLORS[12]);
        this.colors.ansi[13] = this._parseColor(theme.brightMagenta, exports.DEFAULT_ANSI_COLORS[13]);
        this.colors.ansi[14] = this._parseColor(theme.brightCyan, exports.DEFAULT_ANSI_COLORS[14]);
        this.colors.ansi[15] = this._parseColor(theme.brightWhite, exports.DEFAULT_ANSI_COLORS[15]);
    };
    ColorManager.prototype._parseColor = function (css, fallback, allowTransparency) {
        if (allowTransparency === void 0) { allowTransparency = this.allowTransparency; }
        if (css === undefined) {
            return fallback;
        }
        this._ctx.fillStyle = this._litmusColor;
        this._ctx.fillStyle = css;
        if (typeof this._ctx.fillStyle !== 'string') {
            console.warn("Color: " + css + " is invalid using fallback " + fallback.css);
            return fallback;
        }
        this._ctx.fillRect(0, 0, 1, 1);
        var data = this._ctx.getImageData(0, 0, 1, 1).data;
        if (!allowTransparency && data[3] !== 0xFF) {
            console.warn("Color: " + css + " is using transparency, but allowTransparency is false. " +
                ("Using fallback " + fallback.css + "."));
            return fallback;
        }
        return {
            css: css,
            rgba: (data[0] << 24 | data[1] << 16 | data[2] << 8 | data[3]) >>> 0
        };
    };
    return ColorManager;
}());
exports.ColorManager = ColorManager;


/***/ }),

/***/ "./out/browser/Lifecycle.js":
/*!**********************************!*\
  !*** ./out/browser/Lifecycle.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function addDisposableDomListener(node, type, handler, useCapture) {
    node.addEventListener(type, handler, useCapture);
    return {
        dispose: function () {
            if (!handler) {
                return;
            }
            node.removeEventListener(type, handler, useCapture);
        }
    };
}
exports.addDisposableDomListener = addDisposableDomListener;


/***/ }),

/***/ "./out/browser/Linkifier.js":
/*!**********************************!*\
  !*** ./out/browser/Linkifier.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharWidth_1 = __webpack_require__(/*! common/CharWidth */ "./out/common/CharWidth.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var OVERSCAN_CHAR_LIMIT = 2000;
var Linkifier = (function () {
    function Linkifier(_bufferService, _logService) {
        this._bufferService = _bufferService;
        this._logService = _logService;
        this._linkMatchers = [];
        this._nextLinkMatcherId = 0;
        this._onLinkHover = new EventEmitter_1.EventEmitter();
        this._onLinkLeave = new EventEmitter_1.EventEmitter();
        this._onLinkTooltip = new EventEmitter_1.EventEmitter();
        this._rowsToLinkify = {
            start: undefined,
            end: undefined
        };
    }
    Object.defineProperty(Linkifier.prototype, "onLinkHover", {
        get: function () { return this._onLinkHover.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onLinkLeave", {
        get: function () { return this._onLinkLeave.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Linkifier.prototype, "onLinkTooltip", {
        get: function () { return this._onLinkTooltip.event; },
        enumerable: true,
        configurable: true
    });
    Linkifier.prototype.attachToDom = function (element, mouseZoneManager) {
        this._element = element;
        this._mouseZoneManager = mouseZoneManager;
    };
    Linkifier.prototype.linkifyRows = function (start, end) {
        var _this = this;
        if (!this._mouseZoneManager) {
            return;
        }
        if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {
            this._rowsToLinkify.start = start;
            this._rowsToLinkify.end = end;
        }
        else {
            this._rowsToLinkify.start = Math.min(this._rowsToLinkify.start, start);
            this._rowsToLinkify.end = Math.max(this._rowsToLinkify.end, end);
        }
        this._mouseZoneManager.clearAll(start, end);
        if (this._rowsTimeoutId) {
            clearTimeout(this._rowsTimeoutId);
        }
        this._rowsTimeoutId = setTimeout(function () { return _this._linkifyRows(); }, Linkifier._timeBeforeLatency);
    };
    Linkifier.prototype._linkifyRows = function () {
        this._rowsTimeoutId = undefined;
        var buffer = this._bufferService.buffer;
        if (this._rowsToLinkify.start === undefined || this._rowsToLinkify.end === undefined) {
            this._logService.debug('_rowToLinkify was unset before _linkifyRows was called');
            return;
        }
        var absoluteRowIndexStart = buffer.ydisp + this._rowsToLinkify.start;
        if (absoluteRowIndexStart >= buffer.lines.length) {
            return;
        }
        var absoluteRowIndexEnd = buffer.ydisp + Math.min(this._rowsToLinkify.end, this._bufferService.rows) + 1;
        var overscanLineLimit = Math.ceil(OVERSCAN_CHAR_LIMIT / this._bufferService.cols);
        var iterator = this._bufferService.buffer.iterator(false, absoluteRowIndexStart, absoluteRowIndexEnd, overscanLineLimit, overscanLineLimit);
        while (iterator.hasNext()) {
            var lineData = iterator.next();
            for (var i = 0; i < this._linkMatchers.length; i++) {
                this._doLinkifyRow(lineData.range.first, lineData.content, this._linkMatchers[i]);
            }
        }
        this._rowsToLinkify.start = undefined;
        this._rowsToLinkify.end = undefined;
    };
    Linkifier.prototype.registerLinkMatcher = function (regex, handler, options) {
        if (options === void 0) { options = {}; }
        if (!handler) {
            throw new Error('handler must be defined');
        }
        var matcher = {
            id: this._nextLinkMatcherId++,
            regex: regex,
            handler: handler,
            matchIndex: options.matchIndex,
            validationCallback: options.validationCallback,
            hoverTooltipCallback: options.tooltipCallback,
            hoverLeaveCallback: options.leaveCallback,
            willLinkActivate: options.willLinkActivate,
            priority: options.priority || 0
        };
        this._addLinkMatcherToList(matcher);
        return matcher.id;
    };
    Linkifier.prototype._addLinkMatcherToList = function (matcher) {
        if (this._linkMatchers.length === 0) {
            this._linkMatchers.push(matcher);
            return;
        }
        for (var i = this._linkMatchers.length - 1; i >= 0; i--) {
            if (matcher.priority <= this._linkMatchers[i].priority) {
                this._linkMatchers.splice(i + 1, 0, matcher);
                return;
            }
        }
        this._linkMatchers.splice(0, 0, matcher);
    };
    Linkifier.prototype.deregisterLinkMatcher = function (matcherId) {
        for (var i = 0; i < this._linkMatchers.length; i++) {
            if (this._linkMatchers[i].id === matcherId) {
                this._linkMatchers.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    Linkifier.prototype._doLinkifyRow = function (rowIndex, text, matcher) {
        var _this = this;
        var rex = new RegExp(matcher.regex.source, matcher.regex.flags + 'g');
        var match;
        var stringIndex = -1;
        var _loop_1 = function () {
            var uri = match[typeof matcher.matchIndex !== 'number' ? 0 : matcher.matchIndex];
            if (!uri) {
                this_1._logService.debug('match found without corresponding matchIndex', match, matcher);
                return "break";
            }
            stringIndex = text.indexOf(uri, stringIndex + 1);
            rex.lastIndex = stringIndex + uri.length;
            if (stringIndex < 0) {
                return "break";
            }
            var bufferIndex = this_1._bufferService.buffer.stringIndexToBufferIndex(rowIndex, stringIndex);
            if (bufferIndex[0] < 0) {
                return "break";
            }
            var line = this_1._bufferService.buffer.lines.get(bufferIndex[0]);
            if (!line) {
                return "break";
            }
            var attr = line.getFg(bufferIndex[1]);
            var fg = attr ? (attr >> 9) & 0x1ff : undefined;
            if (matcher.validationCallback) {
                matcher.validationCallback(uri, function (isValid) {
                    if (_this._rowsTimeoutId) {
                        return;
                    }
                    if (isValid) {
                        _this._addLink(bufferIndex[1], bufferIndex[0] - _this._bufferService.buffer.ydisp, uri, matcher, fg);
                    }
                });
            }
            else {
                this_1._addLink(bufferIndex[1], bufferIndex[0] - this_1._bufferService.buffer.ydisp, uri, matcher, fg);
            }
        };
        var this_1 = this;
        while ((match = rex.exec(text)) !== null) {
            var state_1 = _loop_1();
            if (state_1 === "break")
                break;
        }
    };
    Linkifier.prototype._addLink = function (x, y, uri, matcher, fg) {
        var _this = this;
        if (!this._mouseZoneManager || !this._element) {
            return;
        }
        var width = CharWidth_1.getStringCellWidth(uri);
        var x1 = x % this._bufferService.cols;
        var y1 = y + Math.floor(x / this._bufferService.cols);
        var x2 = (x1 + width) % this._bufferService.cols;
        var y2 = y1 + Math.floor((x1 + width) / this._bufferService.cols);
        if (x2 === 0) {
            x2 = this._bufferService.cols;
            y2--;
        }
        this._mouseZoneManager.add(new MouseZone(x1 + 1, y1 + 1, x2 + 1, y2 + 1, function (e) {
            if (matcher.handler) {
                return matcher.handler(e, uri);
            }
            window.open(uri, '_blank');
        }, function () {
            _this._onLinkHover.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._element.classList.add('xterm-cursor-pointer');
        }, function (e) {
            _this._onLinkTooltip.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            if (matcher.hoverTooltipCallback) {
                matcher.hoverTooltipCallback(e, uri);
            }
        }, function () {
            _this._onLinkLeave.fire(_this._createLinkHoverEvent(x1, y1, x2, y2, fg));
            _this._element.classList.remove('xterm-cursor-pointer');
            if (matcher.hoverLeaveCallback) {
                matcher.hoverLeaveCallback();
            }
        }, function (e) {
            if (matcher.willLinkActivate) {
                return matcher.willLinkActivate(e, uri);
            }
            return true;
        }));
    };
    Linkifier.prototype._createLinkHoverEvent = function (x1, y1, x2, y2, fg) {
        return { x1: x1, y1: y1, x2: x2, y2: y2, cols: this._bufferService.cols, fg: fg };
    };
    Linkifier._timeBeforeLatency = 200;
    return Linkifier;
}());
exports.Linkifier = Linkifier;
var MouseZone = (function () {
    function MouseZone(x1, y1, x2, y2, clickCallback, hoverCallback, tooltipCallback, leaveCallback, willLinkActivate) {
        this.x1 = x1;
        this.y1 = y1;
        this.x2 = x2;
        this.y2 = y2;
        this.clickCallback = clickCallback;
        this.hoverCallback = hoverCallback;
        this.tooltipCallback = tooltipCallback;
        this.leaveCallback = leaveCallback;
        this.willLinkActivate = willLinkActivate;
    }
    return MouseZone;
}());
exports.MouseZone = MouseZone;


/***/ }),

/***/ "./out/browser/LocalizableStrings.js":
/*!*******************************************!*\
  !*** ./out/browser/LocalizableStrings.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.promptLabel = 'Terminal input';
exports.tooMuchOutput = 'Too much output to announce, navigate to rows manually to read';


/***/ }),

/***/ "./out/browser/MouseZoneManager.js":
/*!*****************************************!*\
  !*** ./out/browser/MouseZoneManager.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var HOVER_DURATION = 500;
var MouseZoneManager = (function (_super) {
    __extends(MouseZoneManager, _super);
    function MouseZoneManager(_element, _screenElement, _bufferService, _mouseService, _selectionService) {
        var _this = _super.call(this) || this;
        _this._element = _element;
        _this._screenElement = _screenElement;
        _this._bufferService = _bufferService;
        _this._mouseService = _mouseService;
        _this._selectionService = _selectionService;
        _this._zones = [];
        _this._areZonesActive = false;
        _this._lastHoverCoords = [undefined, undefined];
        _this._initialSelectionLength = 0;
        _this.register(Lifecycle_2.addDisposableDomListener(_this._element, 'mousedown', function (e) { return _this._onMouseDown(e); }));
        _this._mouseMoveListener = function (e) { return _this._onMouseMove(e); };
        _this._mouseLeaveListener = function (e) { return _this._onMouseLeave(e); };
        _this._clickListener = function (e) { return _this._onClick(e); };
        return _this;
    }
    MouseZoneManager.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._deactivate();
    };
    MouseZoneManager.prototype.add = function (zone) {
        this._zones.push(zone);
        if (this._zones.length === 1) {
            this._activate();
        }
    };
    MouseZoneManager.prototype.clearAll = function (start, end) {
        if (this._zones.length === 0) {
            return;
        }
        if (!start || !end) {
            start = 0;
            end = this._bufferService.rows - 1;
        }
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if ((zone.y1 > start && zone.y1 <= end + 1) ||
                (zone.y2 > start && zone.y2 <= end + 1) ||
                (zone.y1 < start && zone.y2 > end + 1)) {
                if (this._currentZone && this._currentZone === zone) {
                    this._currentZone.leaveCallback();
                    this._currentZone = undefined;
                }
                this._zones.splice(i--, 1);
            }
        }
        if (this._zones.length === 0) {
            this._deactivate();
        }
    };
    MouseZoneManager.prototype._activate = function () {
        if (!this._areZonesActive) {
            this._areZonesActive = true;
            this._element.addEventListener('mousemove', this._mouseMoveListener);
            this._element.addEventListener('mouseleave', this._mouseLeaveListener);
            this._element.addEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._deactivate = function () {
        if (this._areZonesActive) {
            this._areZonesActive = false;
            this._element.removeEventListener('mousemove', this._mouseMoveListener);
            this._element.removeEventListener('mouseleave', this._mouseLeaveListener);
            this._element.removeEventListener('click', this._clickListener);
        }
    };
    MouseZoneManager.prototype._onMouseMove = function (e) {
        if (this._lastHoverCoords[0] !== e.pageX || this._lastHoverCoords[1] !== e.pageY) {
            this._onHover(e);
            this._lastHoverCoords = [e.pageX, e.pageY];
        }
    };
    MouseZoneManager.prototype._onHover = function (e) {
        var _this = this;
        var zone = this._findZoneEventAt(e);
        if (zone === this._currentZone) {
            return;
        }
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = undefined;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
        if (!zone) {
            return;
        }
        this._currentZone = zone;
        if (zone.hoverCallback) {
            zone.hoverCallback(e);
        }
        this._tooltipTimeout = setTimeout(function () { return _this._onTooltip(e); }, HOVER_DURATION);
    };
    MouseZoneManager.prototype._onTooltip = function (e) {
        this._tooltipTimeout = undefined;
        var zone = this._findZoneEventAt(e);
        if (zone && zone.tooltipCallback) {
            zone.tooltipCallback(e);
        }
    };
    MouseZoneManager.prototype._onMouseDown = function (e) {
        this._initialSelectionLength = this._getSelectionLength();
        if (!this._areZonesActive) {
            return;
        }
        var zone = this._findZoneEventAt(e);
        if (zone) {
            if (zone.willLinkActivate(e)) {
                e.preventDefault();
                e.stopImmediatePropagation();
            }
        }
    };
    MouseZoneManager.prototype._onMouseLeave = function (e) {
        if (this._currentZone) {
            this._currentZone.leaveCallback();
            this._currentZone = undefined;
            if (this._tooltipTimeout) {
                clearTimeout(this._tooltipTimeout);
            }
        }
    };
    MouseZoneManager.prototype._onClick = function (e) {
        var zone = this._findZoneEventAt(e);
        var currentSelectionLength = this._getSelectionLength();
        if (zone && currentSelectionLength === this._initialSelectionLength) {
            zone.clickCallback(e);
            e.preventDefault();
            e.stopImmediatePropagation();
        }
    };
    MouseZoneManager.prototype._getSelectionLength = function () {
        var selectionText = this._selectionService.selectionText;
        return selectionText ? selectionText.length : 0;
    };
    MouseZoneManager.prototype._findZoneEventAt = function (e) {
        var coords = this._mouseService.getCoords(e, this._screenElement, this._bufferService.cols, this._bufferService.rows);
        if (!coords) {
            return undefined;
        }
        var x = coords[0];
        var y = coords[1];
        for (var i = 0; i < this._zones.length; i++) {
            var zone = this._zones[i];
            if (zone.y1 === zone.y2) {
                if (y === zone.y1 && x >= zone.x1 && x < zone.x2) {
                    return zone;
                }
            }
            else {
                if ((y === zone.y1 && x >= zone.x1) ||
                    (y === zone.y2 && x < zone.x2) ||
                    (y > zone.y1 && y < zone.y2)) {
                    return zone;
                }
            }
        }
        return undefined;
    };
    MouseZoneManager = __decorate([
        __param(2, Services_2.IBufferService),
        __param(3, Services_1.IMouseService),
        __param(4, Services_1.ISelectionService)
    ], MouseZoneManager);
    return MouseZoneManager;
}(Lifecycle_1.Disposable));
exports.MouseZoneManager = MouseZoneManager;


/***/ }),

/***/ "./out/browser/RenderDebouncer.js":
/*!****************************************!*\
  !*** ./out/browser/RenderDebouncer.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var RenderDebouncer = (function () {
    function RenderDebouncer(_renderCallback) {
        this._renderCallback = _renderCallback;
    }
    RenderDebouncer.prototype.dispose = function () {
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = undefined;
        }
    };
    RenderDebouncer.prototype.refresh = function (rowStart, rowEnd, rowCount) {
        var _this = this;
        this._rowCount = rowCount;
        rowStart = rowStart !== undefined ? rowStart : 0;
        rowEnd = rowEnd !== undefined ? rowEnd : this._rowCount - 1;
        this._rowStart = this._rowStart !== undefined ? Math.min(this._rowStart, rowStart) : rowStart;
        this._rowEnd = this._rowEnd !== undefined ? Math.max(this._rowEnd, rowEnd) : rowEnd;
        if (this._animationFrame) {
            return;
        }
        this._animationFrame = window.requestAnimationFrame(function () { return _this._innerRefresh(); });
    };
    RenderDebouncer.prototype._innerRefresh = function () {
        if (this._rowStart === undefined || this._rowEnd === undefined || this._rowCount === undefined) {
            return;
        }
        this._rowStart = Math.max(this._rowStart, 0);
        this._rowEnd = Math.min(this._rowEnd, this._rowCount - 1);
        this._renderCallback(this._rowStart, this._rowEnd);
        this._rowStart = undefined;
        this._rowEnd = undefined;
        this._animationFrame = undefined;
    };
    return RenderDebouncer;
}());
exports.RenderDebouncer = RenderDebouncer;


/***/ }),

/***/ "./out/browser/ScreenDprMonitor.js":
/*!*****************************************!*\
  !*** ./out/browser/ScreenDprMonitor.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor = (function (_super) {
    __extends(ScreenDprMonitor, _super);
    function ScreenDprMonitor() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._currentDevicePixelRatio = window.devicePixelRatio;
        return _this;
    }
    ScreenDprMonitor.prototype.setListener = function (listener) {
        var _this = this;
        if (this._listener) {
            this.clearListener();
        }
        this._listener = listener;
        this._outerListener = function () {
            if (!_this._listener) {
                return;
            }
            _this._listener(window.devicePixelRatio, _this._currentDevicePixelRatio);
            _this._updateDpr();
        };
        this._updateDpr();
    };
    ScreenDprMonitor.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this.clearListener();
    };
    ScreenDprMonitor.prototype._updateDpr = function () {
        if (!this._resolutionMediaMatchList || !this._outerListener) {
            return;
        }
        this._resolutionMediaMatchList.removeListener(this._outerListener);
        this._currentDevicePixelRatio = window.devicePixelRatio;
        this._resolutionMediaMatchList = window.matchMedia("screen and (resolution: " + window.devicePixelRatio + "dppx)");
        this._resolutionMediaMatchList.addListener(this._outerListener);
    };
    ScreenDprMonitor.prototype.clearListener = function () {
        if (!this._resolutionMediaMatchList || !this._listener || !this._outerListener) {
            return;
        }
        this._resolutionMediaMatchList.removeListener(this._outerListener);
        this._resolutionMediaMatchList = undefined;
        this._listener = undefined;
        this._outerListener = undefined;
    };
    return ScreenDprMonitor;
}(Lifecycle_1.Disposable));
exports.ScreenDprMonitor = ScreenDprMonitor;


/***/ }),

/***/ "./out/browser/Viewport.js":
/*!*********************************!*\
  !*** ./out/browser/Viewport.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var FALLBACK_SCROLL_BAR_WIDTH = 15;
var Viewport = (function (_super) {
    __extends(Viewport, _super);
    function Viewport(_scrollLines, _viewportElement, _scrollArea, _bufferService, _charSizeService, _renderService) {
        var _this = _super.call(this) || this;
        _this._scrollLines = _scrollLines;
        _this._viewportElement = _viewportElement;
        _this._scrollArea = _scrollArea;
        _this._bufferService = _bufferService;
        _this._charSizeService = _charSizeService;
        _this._renderService = _renderService;
        _this.scrollBarWidth = 0;
        _this._currentRowHeight = 0;
        _this._lastRecordedBufferLength = 0;
        _this._lastRecordedViewportHeight = 0;
        _this._lastRecordedBufferHeight = 0;
        _this._lastTouchY = 0;
        _this._lastScrollTop = 0;
        _this._wheelPartialScroll = 0;
        _this._refreshAnimationFrame = null;
        _this._ignoreNextScrollEvent = false;
        _this.scrollBarWidth = (_this._viewportElement.offsetWidth - _this._scrollArea.offsetWidth) || FALLBACK_SCROLL_BAR_WIDTH;
        _this.register(Lifecycle_2.addDisposableDomListener(_this._viewportElement, 'scroll', _this._onScroll.bind(_this)));
        setTimeout(function () { return _this.syncScrollArea(); }, 0);
        return _this;
    }
    Viewport.prototype.onThemeChange = function (colors) {
        this._viewportElement.style.backgroundColor = colors.background.css;
    };
    Viewport.prototype._refresh = function () {
        var _this = this;
        if (this._refreshAnimationFrame === null) {
            this._refreshAnimationFrame = requestAnimationFrame(function () { return _this._innerRefresh(); });
        }
    };
    Viewport.prototype._innerRefresh = function () {
        if (this._charSizeService.height > 0) {
            this._currentRowHeight = this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio;
            this._lastRecordedViewportHeight = this._viewportElement.offsetHeight;
            var newBufferHeight = Math.round(this._currentRowHeight * this._lastRecordedBufferLength) + (this._lastRecordedViewportHeight - this._renderService.dimensions.canvasHeight);
            if (this._lastRecordedBufferHeight !== newBufferHeight) {
                this._lastRecordedBufferHeight = newBufferHeight;
                this._scrollArea.style.height = this._lastRecordedBufferHeight + 'px';
            }
        }
        var scrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;
        if (this._viewportElement.scrollTop !== scrollTop) {
            this._ignoreNextScrollEvent = true;
            this._viewportElement.scrollTop = scrollTop;
        }
        this._refreshAnimationFrame = null;
    };
    Viewport.prototype.syncScrollArea = function () {
        if (this._lastRecordedBufferLength !== this._bufferService.buffer.lines.length) {
            this._lastRecordedBufferLength = this._bufferService.buffer.lines.length;
            this._refresh();
            return;
        }
        if (this._lastRecordedViewportHeight !== this._renderService.dimensions.canvasHeight) {
            this._refresh();
            return;
        }
        var newScrollTop = this._bufferService.buffer.ydisp * this._currentRowHeight;
        if (this._lastScrollTop !== newScrollTop) {
            this._refresh();
            return;
        }
        if (this._lastScrollTop !== this._viewportElement.scrollTop) {
            this._refresh();
            return;
        }
        if (this._renderService.dimensions.scaledCellHeight / window.devicePixelRatio !== this._currentRowHeight) {
            this._refresh();
            return;
        }
    };
    Viewport.prototype._onScroll = function (ev) {
        this._lastScrollTop = this._viewportElement.scrollTop;
        if (!this._viewportElement.offsetParent) {
            return;
        }
        if (this._ignoreNextScrollEvent) {
            this._ignoreNextScrollEvent = false;
            return;
        }
        var newRow = Math.round(this._lastScrollTop / this._currentRowHeight);
        var diff = newRow - this._bufferService.buffer.ydisp;
        this._scrollLines(diff, true);
    };
    Viewport.prototype._bubbleScroll = function (ev, amount) {
        var scrollPosFromTop = this._viewportElement.scrollTop + this._lastRecordedViewportHeight;
        if ((amount < 0 && this._viewportElement.scrollTop !== 0) ||
            (amount > 0 && scrollPosFromTop < this._lastRecordedBufferHeight)) {
            if (ev.cancelable) {
                ev.preventDefault();
            }
            return false;
        }
        return true;
    };
    Viewport.prototype.onWheel = function (ev) {
        var amount = this._getPixelsScrolled(ev);
        if (amount === 0) {
            return false;
        }
        this._viewportElement.scrollTop += amount;
        return this._bubbleScroll(ev, amount);
    };
    Viewport.prototype._getPixelsScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = ev.deltaY;
        if (ev.deltaMode === WheelEvent.DOM_DELTA_LINE) {
            amount *= this._currentRowHeight;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._currentRowHeight * this._bufferService.rows;
        }
        return amount;
    };
    Viewport.prototype.getLinesScrolled = function (ev) {
        if (ev.deltaY === 0) {
            return 0;
        }
        var amount = ev.deltaY;
        if (ev.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {
            amount /= this._currentRowHeight + 0.0;
            this._wheelPartialScroll += amount;
            amount = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1);
            this._wheelPartialScroll %= 1;
        }
        else if (ev.deltaMode === WheelEvent.DOM_DELTA_PAGE) {
            amount *= this._bufferService.rows;
        }
        return amount;
    };
    Viewport.prototype.onTouchStart = function (ev) {
        this._lastTouchY = ev.touches[0].pageY;
    };
    Viewport.prototype.onTouchMove = function (ev) {
        var deltaY = this._lastTouchY - ev.touches[0].pageY;
        this._lastTouchY = ev.touches[0].pageY;
        if (deltaY === 0) {
            return false;
        }
        this._viewportElement.scrollTop += deltaY;
        return this._bubbleScroll(ev, deltaY);
    };
    Viewport = __decorate([
        __param(3, Services_2.IBufferService),
        __param(4, Services_1.ICharSizeService),
        __param(5, Services_1.IRenderService)
    ], Viewport);
    return Viewport;
}(Lifecycle_1.Disposable));
exports.Viewport = Viewport;


/***/ }),

/***/ "./out/browser/input/CompositionHelper.js":
/*!************************************************!*\
  !*** ./out/browser/input/CompositionHelper.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var CompositionHelper = (function () {
    function CompositionHelper(_textarea, _compositionView, _bufferService, _optionsService, _charSizeService, _coreService) {
        this._textarea = _textarea;
        this._compositionView = _compositionView;
        this._bufferService = _bufferService;
        this._optionsService = _optionsService;
        this._charSizeService = _charSizeService;
        this._coreService = _coreService;
        this._isComposing = false;
        this._isSendingComposition = false;
        this._compositionPosition = { start: 0, end: 0 };
    }
    CompositionHelper.prototype.compositionstart = function () {
        this._isComposing = true;
        this._compositionPosition.start = this._textarea.value.length;
        this._compositionView.textContent = '';
        this._compositionView.classList.add('active');
    };
    CompositionHelper.prototype.compositionupdate = function (ev) {
        var _this = this;
        this._compositionView.textContent = ev.data;
        this.updateCompositionElements();
        setTimeout(function () {
            _this._compositionPosition.end = _this._textarea.value.length;
        }, 0);
    };
    CompositionHelper.prototype.compositionend = function () {
        this._finalizeComposition(true);
    };
    CompositionHelper.prototype.keydown = function (ev) {
        if (this._isComposing || this._isSendingComposition) {
            if (ev.keyCode === 229) {
                return false;
            }
            else if (ev.keyCode === 16 || ev.keyCode === 17 || ev.keyCode === 18) {
                return false;
            }
            this._finalizeComposition(false);
        }
        if (ev.keyCode === 229) {
            this._handleAnyTextareaChanges();
            return false;
        }
        return true;
    };
    CompositionHelper.prototype._finalizeComposition = function (waitForPropagation) {
        var _this = this;
        this._compositionView.classList.remove('active');
        this._isComposing = false;
        this._clearTextareaPosition();
        if (!waitForPropagation) {
            this._isSendingComposition = false;
            var input = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);
            this._coreService.triggerDataEvent(input, true);
        }
        else {
            var currentCompositionPosition_1 = {
                start: this._compositionPosition.start,
                end: this._compositionPosition.end
            };
            this._isSendingComposition = true;
            setTimeout(function () {
                if (_this._isSendingComposition) {
                    _this._isSendingComposition = false;
                    var input = void 0;
                    if (_this._isComposing) {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start, currentCompositionPosition_1.end);
                    }
                    else {
                        input = _this._textarea.value.substring(currentCompositionPosition_1.start);
                    }
                    _this._coreService.triggerDataEvent(input, true);
                }
            }, 0);
        }
    };
    CompositionHelper.prototype._handleAnyTextareaChanges = function () {
        var _this = this;
        var oldValue = this._textarea.value;
        setTimeout(function () {
            if (!_this._isComposing) {
                var newValue = _this._textarea.value;
                var diff = newValue.replace(oldValue, '');
                if (diff.length > 0) {
                    _this._coreService.triggerDataEvent(diff, true);
                }
            }
        }, 0);
    };
    CompositionHelper.prototype.updateCompositionElements = function (dontRecurse) {
        var _this = this;
        if (!this._isComposing) {
            return;
        }
        if (this._bufferService.buffer.isCursorInViewport) {
            var cellHeight = Math.ceil(this._charSizeService.height * this._optionsService.options.lineHeight);
            var cursorTop = this._bufferService.buffer.y * cellHeight;
            var cursorLeft = this._bufferService.buffer.x * this._charSizeService.width;
            this._compositionView.style.left = cursorLeft + 'px';
            this._compositionView.style.top = cursorTop + 'px';
            this._compositionView.style.height = cellHeight + 'px';
            this._compositionView.style.lineHeight = cellHeight + 'px';
            this._compositionView.style.fontFamily = this._optionsService.options.fontFamily;
            this._compositionView.style.fontSize = this._optionsService.options.fontSize + 'px';
            var compositionViewBounds = this._compositionView.getBoundingClientRect();
            this._textarea.style.left = cursorLeft + 'px';
            this._textarea.style.top = cursorTop + 'px';
            this._textarea.style.width = compositionViewBounds.width + 'px';
            this._textarea.style.height = compositionViewBounds.height + 'px';
            this._textarea.style.lineHeight = compositionViewBounds.height + 'px';
        }
        if (!dontRecurse) {
            setTimeout(function () { return _this.updateCompositionElements(true); }, 0);
        }
    };
    CompositionHelper.prototype._clearTextareaPosition = function () {
        this._textarea.style.left = '';
        this._textarea.style.top = '';
    };
    CompositionHelper = __decorate([
        __param(2, Services_2.IBufferService),
        __param(3, Services_2.IOptionsService),
        __param(4, Services_1.ICharSizeService),
        __param(5, Services_2.ICoreService)
    ], CompositionHelper);
    return CompositionHelper;
}());
exports.CompositionHelper = CompositionHelper;


/***/ }),

/***/ "./out/browser/input/Mouse.js":
/*!************************************!*\
  !*** ./out/browser/input/Mouse.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function getCoordsRelativeToElement(event, element) {
    var rect = element.getBoundingClientRect();
    return [event.clientX - rect.left, event.clientY - rect.top];
}
exports.getCoordsRelativeToElement = getCoordsRelativeToElement;
function getCoords(event, element, colCount, rowCount, hasValidCharSize, actualCellWidth, actualCellHeight, isSelection) {
    if (!hasValidCharSize) {
        return undefined;
    }
    var coords = getCoordsRelativeToElement(event, element);
    if (!coords) {
        return undefined;
    }
    coords[0] = Math.ceil((coords[0] + (isSelection ? actualCellWidth / 2 : 0)) / actualCellWidth);
    coords[1] = Math.ceil(coords[1] / actualCellHeight);
    coords[0] = Math.min(Math.max(coords[0], 1), colCount + (isSelection ? 1 : 0));
    coords[1] = Math.min(Math.max(coords[1], 1), rowCount);
    return coords;
}
exports.getCoords = getCoords;
function getRawByteCoords(coords) {
    if (!coords) {
        return undefined;
    }
    return { x: coords[0] + 32, y: coords[1] + 32 };
}
exports.getRawByteCoords = getRawByteCoords;


/***/ }),

/***/ "./out/browser/input/MoveToCell.js":
/*!*****************************************!*\
  !*** ./out/browser/input/MoveToCell.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
function moveToCellSequence(targetX, targetY, bufferService, applicationCursor) {
    var startX = bufferService.buffer.x;
    var startY = bufferService.buffer.y;
    if (!bufferService.buffer.hasScrollback) {
        return resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) +
            moveToRequestedRow(startY, targetY, bufferService, applicationCursor) +
            moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor);
    }
    return moveHorizontallyOnly(startX, startY, targetX, targetY, bufferService, applicationCursor);
}
exports.moveToCellSequence = moveToCellSequence;
function resetStartingRow(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length === 0) {
        return '';
    }
    return repeat(bufferLine(startX, startY, startX, startY - wrappedRowsForRow(bufferService, startY), false, bufferService).length, sequence("D", applicationCursor));
}
function moveToRequestedRow(startY, targetY, bufferService, applicationCursor) {
    var startRow = startY - wrappedRowsForRow(bufferService, startY);
    var endRow = targetY - wrappedRowsForRow(bufferService, targetY);
    var rowsToMove = Math.abs(startRow - endRow) - wrappedRowsCount(startY, targetY, bufferService);
    return repeat(rowsToMove, sequence(verticalDirection(startY, targetY), applicationCursor));
}
function moveToRequestedCol(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var startRow;
    if (moveToRequestedRow(startY, targetY, bufferService, applicationCursor).length > 0) {
        startRow = targetY - wrappedRowsForRow(bufferService, targetY);
    }
    else {
        startRow = startY;
    }
    var endRow = targetY;
    var direction = horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor);
    return repeat(bufferLine(startX, startRow, targetX, endRow, direction === "C", bufferService).length, sequence(direction, applicationCursor));
}
function moveHorizontallyOnly(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var direction = horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor);
    return repeat(Math.abs(startX - targetX), sequence(direction, applicationCursor));
}
function wrappedRowsCount(startY, targetY, bufferService) {
    var wrappedRows = 0;
    var startRow = startY - wrappedRowsForRow(bufferService, startY);
    var endRow = targetY - wrappedRowsForRow(bufferService, targetY);
    for (var i = 0; i < Math.abs(startRow - endRow); i++) {
        var direction = verticalDirection(startY, targetY) === "A" ? -1 : 1;
        var line = bufferService.buffer.lines.get(startRow + (direction * i));
        if (line && line.isWrapped) {
            wrappedRows++;
        }
    }
    return wrappedRows;
}
function wrappedRowsForRow(bufferService, currentRow) {
    var rowCount = 0;
    var line = bufferService.buffer.lines.get(currentRow);
    var lineWraps = line && line.isWrapped;
    while (lineWraps && currentRow >= 0 && currentRow < bufferService.rows) {
        rowCount++;
        line = bufferService.buffer.lines.get(--currentRow);
        lineWraps = line && line.isWrapped;
    }
    return rowCount;
}
function horizontalDirection(startX, startY, targetX, targetY, bufferService, applicationCursor) {
    var startRow;
    if (moveToRequestedRow(targetX, targetY, bufferService, applicationCursor).length > 0) {
        startRow = targetY - wrappedRowsForRow(bufferService, targetY);
    }
    else {
        startRow = startY;
    }
    if ((startX < targetX &&
        startRow <= targetY) ||
        (startX >= targetX &&
            startRow < targetY)) {
        return "C";
    }
    return "D";
}
function verticalDirection(startY, targetY) {
    return startY > targetY ? "A" : "B";
}
function bufferLine(startCol, startRow, endCol, endRow, forward, bufferService) {
    var currentCol = startCol;
    var currentRow = startRow;
    var bufferStr = '';
    while (currentCol !== endCol || currentRow !== endRow) {
        currentCol += forward ? 1 : -1;
        if (forward && currentCol > bufferService.cols - 1) {
            bufferStr += bufferService.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
            currentCol = 0;
            startCol = 0;
            currentRow++;
        }
        else if (!forward && currentCol < 0) {
            bufferStr += bufferService.buffer.translateBufferLineToString(currentRow, false, 0, startCol + 1);
            currentCol = bufferService.cols - 1;
            startCol = currentCol;
            currentRow--;
        }
    }
    return bufferStr + bufferService.buffer.translateBufferLineToString(currentRow, false, startCol, currentCol);
}
function sequence(direction, applicationCursor) {
    var mod = applicationCursor ? 'O' : '[';
    return EscapeSequences_1.C0.ESC + mod + direction;
}
function repeat(count, str) {
    count = Math.floor(count);
    var rpt = '';
    for (var i = 0; i < count; i++) {
        rpt += str;
    }
    return rpt;
}


/***/ }),

/***/ "./out/browser/renderer/BaseRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/BaseRenderLayer.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var Constants_2 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasCache_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasCache */ "./out/browser/renderer/atlas/CharAtlasCache.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var RendererUtils_1 = __webpack_require__(/*! browser/renderer/RendererUtils */ "./out/browser/renderer/RendererUtils.js");
var BaseRenderLayer = (function () {
    function BaseRenderLayer(_container, id, zIndex, _alpha, _colors, _rendererId, _bufferService, _optionsService) {
        this._container = _container;
        this._alpha = _alpha;
        this._colors = _colors;
        this._rendererId = _rendererId;
        this._bufferService = _bufferService;
        this._optionsService = _optionsService;
        this._scaledCharWidth = 0;
        this._scaledCharHeight = 0;
        this._scaledCellWidth = 0;
        this._scaledCellHeight = 0;
        this._scaledCharLeft = 0;
        this._scaledCharTop = 0;
        this._currentGlyphIdentifier = {
            chars: '',
            code: 0,
            bg: 0,
            fg: 0,
            bold: false,
            dim: false,
            italic: false
        };
        this._canvas = document.createElement('canvas');
        this._canvas.classList.add("xterm-" + id + "-layer");
        this._canvas.style.zIndex = zIndex.toString();
        this._initCanvas();
        this._container.appendChild(this._canvas);
    }
    BaseRenderLayer.prototype.dispose = function () {
        this._container.removeChild(this._canvas);
        if (this._charAtlas) {
            this._charAtlas.dispose();
        }
    };
    BaseRenderLayer.prototype._initCanvas = function () {
        this._ctx = RendererUtils_1.throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));
        if (!this._alpha) {
            this._clearAll();
        }
    };
    BaseRenderLayer.prototype.onOptionsChanged = function () { };
    BaseRenderLayer.prototype.onBlur = function () { };
    BaseRenderLayer.prototype.onFocus = function () { };
    BaseRenderLayer.prototype.onCursorMove = function () { };
    BaseRenderLayer.prototype.onGridChanged = function (startRow, endRow) { };
    BaseRenderLayer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
    };
    BaseRenderLayer.prototype.setColors = function (colorSet) {
        this._refreshCharAtlas(colorSet);
    };
    BaseRenderLayer.prototype._setTransparency = function (alpha) {
        if (alpha === this._alpha) {
            return;
        }
        var oldCanvas = this._canvas;
        this._alpha = alpha;
        this._canvas = this._canvas.cloneNode();
        this._initCanvas();
        this._container.replaceChild(this._canvas, oldCanvas);
        this._refreshCharAtlas(this._colors);
        this.onGridChanged(0, this._bufferService.rows - 1);
    };
    BaseRenderLayer.prototype._refreshCharAtlas = function (colorSet) {
        if (this._scaledCharWidth <= 0 && this._scaledCharHeight <= 0) {
            return;
        }
        this._charAtlas = CharAtlasCache_1.acquireCharAtlas(this._optionsService.options, this._rendererId, colorSet, this._scaledCharWidth, this._scaledCharHeight);
        this._charAtlas.warmUp();
    };
    BaseRenderLayer.prototype.resize = function (dim) {
        this._scaledCellWidth = dim.scaledCellWidth;
        this._scaledCellHeight = dim.scaledCellHeight;
        this._scaledCharWidth = dim.scaledCharWidth;
        this._scaledCharHeight = dim.scaledCharHeight;
        this._scaledCharLeft = dim.scaledCharLeft;
        this._scaledCharTop = dim.scaledCharTop;
        this._canvas.width = dim.scaledCanvasWidth;
        this._canvas.height = dim.scaledCanvasHeight;
        this._canvas.style.width = dim.canvasWidth + "px";
        this._canvas.style.height = dim.canvasHeight + "px";
        if (!this._alpha) {
            this._clearAll();
        }
        this._refreshCharAtlas(this._colors);
    };
    BaseRenderLayer.prototype._fillCells = function (x, y, width, height) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._fillBottomLineAtCells = function (x, y, width) {
        if (width === void 0) { width = 1; }
        this._ctx.fillRect(x * this._scaledCellWidth, (y + 1) * this._scaledCellHeight - window.devicePixelRatio - 1, width * this._scaledCellWidth, window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._fillLeftLineAtCell = function (x, y) {
        this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, window.devicePixelRatio, this._scaledCellHeight);
    };
    BaseRenderLayer.prototype._strokeRectAtCell = function (x, y, width, height) {
        this._ctx.lineWidth = window.devicePixelRatio;
        this._ctx.strokeRect(x * this._scaledCellWidth + window.devicePixelRatio / 2, y * this._scaledCellHeight + (window.devicePixelRatio / 2), width * this._scaledCellWidth - window.devicePixelRatio, (height * this._scaledCellHeight) - window.devicePixelRatio);
    };
    BaseRenderLayer.prototype._clearAll = function () {
        if (this._alpha) {
            this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);
        }
    };
    BaseRenderLayer.prototype._clearCells = function (x, y, width, height) {
        if (this._alpha) {
            this._ctx.clearRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
        else {
            this._ctx.fillStyle = this._colors.background.css;
            this._ctx.fillRect(x * this._scaledCellWidth, y * this._scaledCellHeight, width * this._scaledCellWidth, height * this._scaledCellHeight);
        }
    };
    BaseRenderLayer.prototype._fillCharTrueColor = function (cell, x, y) {
        this._ctx.font = this._getFont(false, false);
        this._ctx.textBaseline = 'middle';
        this._clipRow(y);
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
    };
    BaseRenderLayer.prototype._drawChars = function (cell, x, y) {
        if (cell.isFgRGB() || cell.isBgRGB()) {
            this._drawUncachedChars(cell, x, y);
            return;
        }
        var fg;
        var bg;
        if (cell.isInverse()) {
            fg = (cell.isBgDefault()) ? Constants_2.INVERTED_DEFAULT_COLOR : cell.getBgColor();
            bg = (cell.isFgDefault()) ? Constants_2.INVERTED_DEFAULT_COLOR : cell.getFgColor();
        }
        else {
            bg = (cell.isBgDefault()) ? Constants_1.DEFAULT_COLOR : cell.getBgColor();
            fg = (cell.isFgDefault()) ? Constants_1.DEFAULT_COLOR : cell.getFgColor();
        }
        var drawInBrightColor = this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8 && fg !== Constants_2.INVERTED_DEFAULT_COLOR;
        fg += drawInBrightColor ? 8 : 0;
        this._currentGlyphIdentifier.chars = cell.getChars() || Constants_1.WHITESPACE_CELL_CHAR;
        this._currentGlyphIdentifier.code = cell.getCode() || Constants_1.WHITESPACE_CELL_CODE;
        this._currentGlyphIdentifier.bg = bg;
        this._currentGlyphIdentifier.fg = fg;
        this._currentGlyphIdentifier.bold = !!cell.isBold();
        this._currentGlyphIdentifier.dim = !!cell.isDim();
        this._currentGlyphIdentifier.italic = !!cell.isItalic();
        var atlasDidDraw = this._charAtlas && this._charAtlas.draw(this._ctx, this._currentGlyphIdentifier, x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop);
        if (!atlasDidDraw) {
            this._drawUncachedChars(cell, x, y);
        }
    };
    BaseRenderLayer.prototype._drawUncachedChars = function (cell, x, y) {
        this._ctx.save();
        this._ctx.font = this._getFont(!!cell.isBold(), !!cell.isItalic());
        this._ctx.textBaseline = 'middle';
        if (cell.isInverse()) {
            if (cell.isBgDefault()) {
                this._ctx.fillStyle = this._colors.background.css;
            }
            else if (cell.isBgRGB()) {
                this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else {
                this._ctx.fillStyle = this._colors.ansi[cell.getBgColor()].css;
            }
        }
        else {
            if (cell.isFgDefault()) {
                this._ctx.fillStyle = this._colors.foreground.css;
            }
            else if (cell.isFgRGB()) {
                this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
            }
            else {
                var fg = cell.getFgColor();
                if (this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                    fg += 8;
                }
                this._ctx.fillStyle = this._colors.ansi[fg].css;
            }
        }
        this._clipRow(y);
        if (cell.isDim()) {
            this._ctx.globalAlpha = Constants_2.DIM_OPACITY;
        }
        this._ctx.fillText(cell.getChars(), x * this._scaledCellWidth + this._scaledCharLeft, y * this._scaledCellHeight + this._scaledCharTop + this._scaledCharHeight / 2);
        this._ctx.restore();
    };
    BaseRenderLayer.prototype._clipRow = function (y) {
        this._ctx.beginPath();
        this._ctx.rect(0, y * this._scaledCellHeight, this._bufferService.cols * this._scaledCellWidth, this._scaledCellHeight);
        this._ctx.clip();
    };
    BaseRenderLayer.prototype._getFont = function (isBold, isItalic) {
        var fontWeight = isBold ? this._optionsService.options.fontWeightBold : this._optionsService.options.fontWeight;
        var fontStyle = isItalic ? 'italic' : '';
        return fontStyle + " " + fontWeight + " " + this._optionsService.options.fontSize * window.devicePixelRatio + "px " + this._optionsService.options.fontFamily;
    };
    return BaseRenderLayer;
}());
exports.BaseRenderLayer = BaseRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/CharacterJoinerRegistry.js":
/*!*********************************************************!*\
  !*** ./out/browser/renderer/CharacterJoinerRegistry.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var JoinedCellData = (function (_super) {
    __extends(JoinedCellData, _super);
    function JoinedCellData(firstCell, chars, width) {
        var _this = _super.call(this) || this;
        _this.content = 0;
        _this.combinedData = '';
        _this.fg = firstCell.fg;
        _this.bg = firstCell.bg;
        _this.combinedData = chars;
        _this._width = width;
        return _this;
    }
    JoinedCellData.prototype.isCombined = function () {
        return 2097152;
    };
    JoinedCellData.prototype.getWidth = function () {
        return this._width;
    };
    JoinedCellData.prototype.getChars = function () {
        return this.combinedData;
    };
    JoinedCellData.prototype.getCode = function () {
        return 0x1FFFFF;
    };
    JoinedCellData.prototype.setFromCharData = function (value) {
        throw new Error('not implemented');
    };
    JoinedCellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return JoinedCellData;
}(AttributeData_1.AttributeData));
exports.JoinedCellData = JoinedCellData;
var CharacterJoinerRegistry = (function () {
    function CharacterJoinerRegistry(_bufferService) {
        this._bufferService = _bufferService;
        this._characterJoiners = [];
        this._nextCharacterJoinerId = 0;
        this._workCell = new CellData_1.CellData();
    }
    CharacterJoinerRegistry.prototype.registerCharacterJoiner = function (handler) {
        var joiner = {
            id: this._nextCharacterJoinerId++,
            handler: handler
        };
        this._characterJoiners.push(joiner);
        return joiner.id;
    };
    CharacterJoinerRegistry.prototype.deregisterCharacterJoiner = function (joinerId) {
        for (var i = 0; i < this._characterJoiners.length; i++) {
            if (this._characterJoiners[i].id === joinerId) {
                this._characterJoiners.splice(i, 1);
                return true;
            }
        }
        return false;
    };
    CharacterJoinerRegistry.prototype.getJoinedCharacters = function (row) {
        if (this._characterJoiners.length === 0) {
            return [];
        }
        var line = this._bufferService.buffer.lines.get(row);
        if (!line || line.length === 0) {
            return [];
        }
        var ranges = [];
        var lineStr = line.translateToString(true);
        var rangeStartColumn = 0;
        var currentStringIndex = 0;
        var rangeStartStringIndex = 0;
        var rangeAttrFG = line.getFg(0);
        var rangeAttrBG = line.getBg(0);
        for (var x = 0; x < line.getTrimmedLength(); x++) {
            line.loadCell(x, this._workCell);
            if (this._workCell.getWidth() === 0) {
                continue;
            }
            if (this._workCell.fg !== rangeAttrFG || this._workCell.bg !== rangeAttrBG) {
                if (x - rangeStartColumn > 1) {
                    var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
                    for (var i = 0; i < joinedRanges.length; i++) {
                        ranges.push(joinedRanges[i]);
                    }
                }
                rangeStartColumn = x;
                rangeStartStringIndex = currentStringIndex;
                rangeAttrFG = this._workCell.fg;
                rangeAttrBG = this._workCell.bg;
            }
            currentStringIndex += this._workCell.getChars().length || Constants_1.WHITESPACE_CELL_CHAR.length;
        }
        if (this._bufferService.cols - rangeStartColumn > 1) {
            var joinedRanges = this._getJoinedRanges(lineStr, rangeStartStringIndex, currentStringIndex, line, rangeStartColumn);
            for (var i = 0; i < joinedRanges.length; i++) {
                ranges.push(joinedRanges[i]);
            }
        }
        return ranges;
    };
    CharacterJoinerRegistry.prototype._getJoinedRanges = function (line, startIndex, endIndex, lineData, startCol) {
        var text = line.substring(startIndex, endIndex);
        var joinedRanges = this._characterJoiners[0].handler(text);
        for (var i = 1; i < this._characterJoiners.length; i++) {
            var joinerRanges = this._characterJoiners[i].handler(text);
            for (var j = 0; j < joinerRanges.length; j++) {
                CharacterJoinerRegistry._mergeRanges(joinedRanges, joinerRanges[j]);
            }
        }
        this._stringRangesToCellRanges(joinedRanges, lineData, startCol);
        return joinedRanges;
    };
    CharacterJoinerRegistry.prototype._stringRangesToCellRanges = function (ranges, line, startCol) {
        var currentRangeIndex = 0;
        var currentRangeStarted = false;
        var currentStringIndex = 0;
        var currentRange = ranges[currentRangeIndex];
        if (!currentRange) {
            return;
        }
        for (var x = startCol; x < this._bufferService.cols; x++) {
            var width = line.getWidth(x);
            var length_1 = line.getString(x).length || Constants_1.WHITESPACE_CELL_CHAR.length;
            if (width === 0) {
                continue;
            }
            if (!currentRangeStarted && currentRange[0] <= currentStringIndex) {
                currentRange[0] = x;
                currentRangeStarted = true;
            }
            if (currentRange[1] <= currentStringIndex) {
                currentRange[1] = x;
                currentRange = ranges[++currentRangeIndex];
                if (!currentRange) {
                    break;
                }
                if (currentRange[0] <= currentStringIndex) {
                    currentRange[0] = x;
                    currentRangeStarted = true;
                }
                else {
                    currentRangeStarted = false;
                }
            }
            currentStringIndex += length_1;
        }
        if (currentRange) {
            currentRange[1] = this._bufferService.cols;
        }
    };
    CharacterJoinerRegistry._mergeRanges = function (ranges, newRange) {
        var inRange = false;
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            if (!inRange) {
                if (newRange[1] <= range[0]) {
                    ranges.splice(i, 0, newRange);
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    return ranges;
                }
                if (newRange[0] < range[1]) {
                    range[0] = Math.min(newRange[0], range[0]);
                    inRange = true;
                }
                continue;
            }
            else {
                if (newRange[1] <= range[0]) {
                    ranges[i - 1][1] = newRange[1];
                    return ranges;
                }
                if (newRange[1] <= range[1]) {
                    ranges[i - 1][1] = Math.max(newRange[1], range[1]);
                    ranges.splice(i, 1);
                    inRange = false;
                    return ranges;
                }
                ranges.splice(i, 1);
                i--;
            }
        }
        if (inRange) {
            ranges[ranges.length - 1][1] = newRange[1];
        }
        else {
            ranges.push(newRange);
        }
        return ranges;
    };
    return CharacterJoinerRegistry;
}());
exports.CharacterJoinerRegistry = CharacterJoinerRegistry;


/***/ }),

/***/ "./out/browser/renderer/GridCache.js":
/*!*******************************************!*\
  !*** ./out/browser/renderer/GridCache.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GridCache = (function () {
    function GridCache() {
        this.cache = [];
    }
    GridCache.prototype.resize = function (width, height) {
        for (var x = 0; x < width; x++) {
            if (this.cache.length <= x) {
                this.cache.push([]);
            }
            for (var y = this.cache[x].length; y < height; y++) {
                this.cache[x].push(undefined);
            }
            this.cache[x].length = height;
        }
        this.cache.length = width;
    };
    GridCache.prototype.clear = function () {
        for (var x = 0; x < this.cache.length; x++) {
            for (var y = 0; y < this.cache[x].length; y++) {
                this.cache[x][y] = undefined;
            }
        }
    };
    return GridCache;
}());
exports.GridCache = GridCache;


/***/ }),

/***/ "./out/browser/renderer/LinkRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/LinkRenderLayer.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ./BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var CharAtlasUtils_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasUtils */ "./out/browser/renderer/atlas/CharAtlasUtils.js");
var LinkRenderLayer = (function (_super) {
    __extends(LinkRenderLayer, _super);
    function LinkRenderLayer(container, zIndex, colors, rendererId, linkifier, bufferService, optionsService) {
        var _this = _super.call(this, container, 'link', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    LinkRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._state = undefined;
    };
    LinkRenderLayer.prototype.reset = function () {
        this._clearCurrentLink();
    };
    LinkRenderLayer.prototype._clearCurrentLink = function () {
        if (this._state) {
            this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);
            var middleRowCount = this._state.y2 - this._state.y1 - 1;
            if (middleRowCount > 0) {
                this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);
            }
            this._clearCells(0, this._state.y2, this._state.x2, 1);
            this._state = undefined;
        }
    };
    LinkRenderLayer.prototype._onLinkHover = function (e) {
        if (e.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            this._ctx.fillStyle = this._colors.background.css;
        }
        else if (e.fg && CharAtlasUtils_1.is256Color(e.fg)) {
            this._ctx.fillStyle = this._colors.ansi[e.fg].css;
        }
        else {
            this._ctx.fillStyle = this._colors.foreground.css;
        }
        if (e.y1 === e.y2) {
            this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);
        }
        else {
            this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);
            for (var y = e.y1 + 1; y < e.y2; y++) {
                this._fillBottomLineAtCells(0, y, e.cols);
            }
            this._fillBottomLineAtCells(0, e.y2, e.x2);
        }
        this._state = e;
    };
    LinkRenderLayer.prototype._onLinkLeave = function (e) {
        this._clearCurrentLink();
    };
    return LinkRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.LinkRenderLayer = LinkRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/RendererUtils.js":
/*!***********************************************!*\
  !*** ./out/browser/renderer/RendererUtils.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function throwIfFalsy(value) {
    if (!value) {
        throw new Error('value must not be falsy');
    }
    return value;
}
exports.throwIfFalsy = throwIfFalsy;


/***/ }),

/***/ "./out/browser/renderer/SelectionRenderLayer.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/SelectionRenderLayer.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var SelectionRenderLayer = (function (_super) {
    __extends(SelectionRenderLayer, _super);
    function SelectionRenderLayer(container, zIndex, colors, rendererId, bufferService, optionsService) {
        var _this = _super.call(this, container, 'selection', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        _this._clearState();
        return _this;
    }
    SelectionRenderLayer.prototype._clearState = function () {
        this._state = {
            start: undefined,
            end: undefined,
            columnSelectMode: undefined,
            ydisp: undefined
        };
    };
    SelectionRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._clearState();
    };
    SelectionRenderLayer.prototype.reset = function () {
        if (this._state.start && this._state.end) {
            this._clearState();
            this._clearAll();
        }
    };
    SelectionRenderLayer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (!this._didStateChange(start, end, columnSelectMode, this._bufferService.buffer.ydisp)) {
            return;
        }
        this._clearAll();
        if (!start || !end) {
            this._clearState();
            return;
        }
        var viewportStartRow = start[1] - this._bufferService.buffer.ydisp;
        var viewportEndRow = end[1] - this._bufferService.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, this._bufferService.rows - 1);
        if (viewportCappedStartRow >= this._bufferService.rows || viewportCappedEndRow < 0) {
            return;
        }
        this._ctx.fillStyle = this._colors.selection.css;
        if (columnSelectMode) {
            var startCol = start[0];
            var width = end[0] - startCol;
            var height = viewportCappedEndRow - viewportCappedStartRow + 1;
            this._fillCells(startCol, viewportCappedStartRow, width, height);
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var startRowEndCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
            this._fillCells(startCol, viewportCappedStartRow, startRowEndCol - startCol, 1);
            var middleRowsCount = Math.max(viewportCappedEndRow - viewportCappedStartRow - 1, 0);
            this._fillCells(0, viewportCappedStartRow + 1, this._bufferService.cols, middleRowsCount);
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol = viewportEndRow === viewportCappedEndRow ? end[0] : this._bufferService.cols;
                this._fillCells(0, viewportCappedEndRow, endCol, 1);
            }
        }
        this._state.start = [start[0], start[1]];
        this._state.end = [end[0], end[1]];
        this._state.columnSelectMode = columnSelectMode;
        this._state.ydisp = this._bufferService.buffer.ydisp;
    };
    SelectionRenderLayer.prototype._didStateChange = function (start, end, columnSelectMode, ydisp) {
        return !this._areCoordinatesEqual(start, this._state.start) ||
            !this._areCoordinatesEqual(end, this._state.end) ||
            columnSelectMode !== this._state.columnSelectMode ||
            ydisp !== this._state.ydisp;
    };
    SelectionRenderLayer.prototype._areCoordinatesEqual = function (coord1, coord2) {
        if (!coord1 || !coord2) {
            return false;
        }
        return coord1[0] === coord2[0] && coord1[1] === coord2[1];
    };
    return SelectionRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.SelectionRenderLayer = SelectionRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/TextRenderLayer.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/TextRenderLayer.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var GridCache_1 = __webpack_require__(/*! browser/renderer/GridCache */ "./out/browser/renderer/GridCache.js");
var BaseRenderLayer_1 = __webpack_require__(/*! browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CharacterJoinerRegistry_1 = __webpack_require__(/*! browser/renderer/CharacterJoinerRegistry */ "./out/browser/renderer/CharacterJoinerRegistry.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var TextRenderLayer = (function (_super) {
    __extends(TextRenderLayer, _super);
    function TextRenderLayer(container, zIndex, colors, characterJoinerRegistry, alpha, rendererId, bufferService, optionsService) {
        var _this = _super.call(this, container, 'text', zIndex, alpha, colors, rendererId, bufferService, optionsService) || this;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        _this._characterWidth = 0;
        _this._characterFont = '';
        _this._characterOverlapCache = {};
        _this._workCell = new CellData_1.CellData();
        _this._state = new GridCache_1.GridCache();
        _this._characterJoinerRegistry = characterJoinerRegistry;
        return _this;
    }
    TextRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        var terminalFont = this._getFont(false, false);
        if (this._characterWidth !== dim.scaledCharWidth || this._characterFont !== terminalFont) {
            this._characterWidth = dim.scaledCharWidth;
            this._characterFont = terminalFont;
            this._characterOverlapCache = {};
        }
        this._state.clear();
        this._state.resize(this._bufferService.cols, this._bufferService.rows);
    };
    TextRenderLayer.prototype.reset = function () {
        this._state.clear();
        this._clearAll();
    };
    TextRenderLayer.prototype._forEachCell = function (firstRow, lastRow, joinerRegistry, callback) {
        for (var y = firstRow; y <= lastRow; y++) {
            var row = y + this._bufferService.buffer.ydisp;
            var line = this._bufferService.buffer.lines.get(row);
            var joinedRanges = joinerRegistry ? joinerRegistry.getJoinedCharacters(row) : [];
            for (var x = 0; x < this._bufferService.cols; x++) {
                line.loadCell(x, this._workCell);
                var cell = this._workCell;
                var isJoined = false;
                var lastCharX = x;
                if (cell.getWidth() === 0) {
                    continue;
                }
                if (joinedRanges.length > 0 && x === joinedRanges[0][0]) {
                    isJoined = true;
                    var range = joinedRanges.shift();
                    cell = new CharacterJoinerRegistry_1.JoinedCellData(this._workCell, line.translateToString(true, range[0], range[1]), range[1] - range[0]);
                    lastCharX = range[1] - 1;
                }
                if (!isJoined && this._isOverlapping(cell)) {
                    if (lastCharX < line.length - 1 && line.getCodePoint(lastCharX + 1) === Constants_1.NULL_CELL_CODE) {
                        cell.content &= ~12582912;
                        cell.content |= 2 << 22;
                    }
                }
                callback(cell, x, y);
                x = lastCharX;
            }
        }
    };
    TextRenderLayer.prototype._drawBackground = function (firstRow, lastRow) {
        var _this = this;
        var ctx = this._ctx;
        var cols = this._bufferService.cols;
        var startX = 0;
        var startY = 0;
        var prevFillStyle = null;
        ctx.save();
        this._forEachCell(firstRow, lastRow, null, function (cell, x, y) {
            var nextFillStyle = null;
            if (cell.isInverse()) {
                if (cell.isFgDefault()) {
                    nextFillStyle = _this._colors.foreground.css;
                }
                else if (cell.isFgRGB()) {
                    nextFillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                }
                else {
                    nextFillStyle = _this._colors.ansi[cell.getFgColor()].css;
                }
            }
            else if (cell.isBgRGB()) {
                nextFillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
            }
            else if (cell.isBgPalette()) {
                nextFillStyle = _this._colors.ansi[cell.getBgColor()].css;
            }
            if (prevFillStyle === null) {
                startX = x;
                startY = y;
            }
            if (y !== startY) {
                ctx.fillStyle = prevFillStyle ? prevFillStyle : '';
                _this._fillCells(startX, startY, cols - startX, 1);
                startX = x;
                startY = y;
            }
            else if (prevFillStyle !== nextFillStyle) {
                ctx.fillStyle = prevFillStyle ? prevFillStyle : '';
                _this._fillCells(startX, startY, x - startX, 1);
                startX = x;
                startY = y;
            }
            prevFillStyle = nextFillStyle;
        });
        if (prevFillStyle !== null) {
            ctx.fillStyle = prevFillStyle;
            this._fillCells(startX, startY, cols - startX, 1);
        }
        ctx.restore();
    };
    TextRenderLayer.prototype._drawForeground = function (firstRow, lastRow) {
        var _this = this;
        this._forEachCell(firstRow, lastRow, this._characterJoinerRegistry, function (cell, x, y) {
            if (cell.isInvisible()) {
                return;
            }
            _this._drawChars(cell, x, y);
            if (cell.isUnderline()) {
                _this._ctx.save();
                if (cell.isInverse()) {
                    if (cell.isBgDefault()) {
                        _this._ctx.fillStyle = _this._colors.background.css;
                    }
                    else if (cell.isBgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getBgColor()).join(',') + ")";
                    }
                    else {
                        _this._ctx.fillStyle = _this._colors.ansi[cell.getBgColor()].css;
                    }
                }
                else {
                    if (cell.isFgDefault()) {
                        _this._ctx.fillStyle = _this._colors.foreground.css;
                    }
                    else if (cell.isFgRGB()) {
                        _this._ctx.fillStyle = "rgb(" + AttributeData_1.AttributeData.toColorRGB(cell.getFgColor()).join(',') + ")";
                    }
                    else {
                        var fg = cell.getFgColor();
                        if (_this._optionsService.options.drawBoldTextInBrightColors && cell.isBold() && fg < 8) {
                            fg += 8;
                        }
                        _this._ctx.fillStyle = _this._colors.ansi[fg].css;
                    }
                }
                _this._fillBottomLineAtCells(x, y, cell.getWidth());
                _this._ctx.restore();
            }
        });
    };
    TextRenderLayer.prototype.onGridChanged = function (firstRow, lastRow) {
        if (this._state.cache.length === 0) {
            return;
        }
        if (this._charAtlas) {
            this._charAtlas.beginFrame();
        }
        this._clearCells(0, firstRow, this._bufferService.cols, lastRow - firstRow + 1);
        this._drawBackground(firstRow, lastRow);
        this._drawForeground(firstRow, lastRow);
    };
    TextRenderLayer.prototype.onOptionsChanged = function () {
        this._setTransparency(this._optionsService.options.allowTransparency);
    };
    TextRenderLayer.prototype._isOverlapping = function (cell) {
        if (cell.getWidth() !== 1) {
            return false;
        }
        if (cell.getCode() < 256) {
            return false;
        }
        var chars = cell.getChars();
        if (this._characterOverlapCache.hasOwnProperty(chars)) {
            return this._characterOverlapCache[chars];
        }
        this._ctx.save();
        this._ctx.font = this._characterFont;
        var overlaps = Math.floor(this._ctx.measureText(chars).width) > this._characterWidth;
        this._ctx.restore();
        this._characterOverlapCache[chars] = overlaps;
        return overlaps;
    };
    return TextRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.TextRenderLayer = TextRenderLayer;


/***/ }),

/***/ "./out/browser/renderer/atlas/BaseCharAtlas.js":
/*!*****************************************************!*\
  !*** ./out/browser/renderer/atlas/BaseCharAtlas.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BaseCharAtlas = (function () {
    function BaseCharAtlas() {
        this._didWarmUp = false;
    }
    BaseCharAtlas.prototype.dispose = function () { };
    BaseCharAtlas.prototype.warmUp = function () {
        if (!this._didWarmUp) {
            this._doWarmUp();
            this._didWarmUp = true;
        }
    };
    BaseCharAtlas.prototype._doWarmUp = function () { };
    BaseCharAtlas.prototype.beginFrame = function () { };
    return BaseCharAtlas;
}());
exports.BaseCharAtlas = BaseCharAtlas;


/***/ }),

/***/ "./out/browser/renderer/atlas/CharAtlasCache.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/atlas/CharAtlasCache.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CharAtlasUtils_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasUtils */ "./out/browser/renderer/atlas/CharAtlasUtils.js");
var DynamicCharAtlas_1 = __webpack_require__(/*! browser/renderer/atlas/DynamicCharAtlas */ "./out/browser/renderer/atlas/DynamicCharAtlas.js");
var charAtlasCache = [];
function acquireCharAtlas(options, rendererId, colors, scaledCharWidth, scaledCharHeight) {
    var newConfig = CharAtlasUtils_1.generateConfig(scaledCharWidth, scaledCharHeight, options, colors);
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        var ownedByIndex = entry.ownedBy.indexOf(rendererId);
        if (ownedByIndex >= 0) {
            if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
                return entry.atlas;
            }
            if (entry.ownedBy.length === 1) {
                entry.atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                entry.ownedBy.splice(ownedByIndex, 1);
            }
            break;
        }
    }
    for (var i = 0; i < charAtlasCache.length; i++) {
        var entry = charAtlasCache[i];
        if (CharAtlasUtils_1.configEquals(entry.config, newConfig)) {
            entry.ownedBy.push(rendererId);
            return entry.atlas;
        }
    }
    var newEntry = {
        atlas: new DynamicCharAtlas_1.DynamicCharAtlas(document, newConfig),
        config: newConfig,
        ownedBy: [rendererId]
    };
    charAtlasCache.push(newEntry);
    return newEntry.atlas;
}
exports.acquireCharAtlas = acquireCharAtlas;
function removeTerminalFromCache(rendererId) {
    for (var i = 0; i < charAtlasCache.length; i++) {
        var index = charAtlasCache[i].ownedBy.indexOf(rendererId);
        if (index !== -1) {
            if (charAtlasCache[i].ownedBy.length === 1) {
                charAtlasCache[i].atlas.dispose();
                charAtlasCache.splice(i, 1);
            }
            else {
                charAtlasCache[i].ownedBy.splice(index, 1);
            }
            break;
        }
    }
}
exports.removeTerminalFromCache = removeTerminalFromCache;


/***/ }),

/***/ "./out/browser/renderer/atlas/CharAtlasUtils.js":
/*!******************************************************!*\
  !*** ./out/browser/renderer/atlas/CharAtlasUtils.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
function generateConfig(scaledCharWidth, scaledCharHeight, options, colors) {
    var clonedColors = {
        foreground: colors.foreground,
        background: colors.background,
        cursor: undefined,
        cursorAccent: undefined,
        selection: undefined,
        ansi: colors.ansi.slice(0, 16)
    };
    return {
        devicePixelRatio: window.devicePixelRatio,
        scaledCharWidth: scaledCharWidth,
        scaledCharHeight: scaledCharHeight,
        fontFamily: options.fontFamily,
        fontSize: options.fontSize,
        fontWeight: options.fontWeight,
        fontWeightBold: options.fontWeightBold,
        allowTransparency: options.allowTransparency,
        colors: clonedColors
    };
}
exports.generateConfig = generateConfig;
function configEquals(a, b) {
    for (var i = 0; i < a.colors.ansi.length; i++) {
        if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {
            return false;
        }
    }
    return a.devicePixelRatio === b.devicePixelRatio &&
        a.fontFamily === b.fontFamily &&
        a.fontSize === b.fontSize &&
        a.fontWeight === b.fontWeight &&
        a.fontWeightBold === b.fontWeightBold &&
        a.allowTransparency === b.allowTransparency &&
        a.scaledCharWidth === b.scaledCharWidth &&
        a.scaledCharHeight === b.scaledCharHeight &&
        a.colors.foreground === b.colors.foreground &&
        a.colors.background === b.colors.background;
}
exports.configEquals = configEquals;
function is256Color(colorCode) {
    return colorCode < Constants_1.DEFAULT_COLOR;
}
exports.is256Color = is256Color;


/***/ }),

/***/ "./out/browser/renderer/atlas/Constants.js":
/*!*************************************************!*\
  !*** ./out/browser/renderer/atlas/Constants.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.INVERTED_DEFAULT_COLOR = 257;
exports.DIM_OPACITY = 0.5;
exports.CHAR_ATLAS_CELL_SPACING = 1;


/***/ }),

/***/ "./out/browser/renderer/atlas/DynamicCharAtlas.js":
/*!********************************************************!*\
  !*** ./out/browser/renderer/atlas/DynamicCharAtlas.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var BaseCharAtlas_1 = __webpack_require__(/*! browser/renderer/atlas/BaseCharAtlas */ "./out/browser/renderer/atlas/BaseCharAtlas.js");
var ColorManager_1 = __webpack_require__(/*! browser/ColorManager */ "./out/browser/ColorManager.js");
var LRUMap_1 = __webpack_require__(/*! browser/renderer/atlas/LRUMap */ "./out/browser/renderer/atlas/LRUMap.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var RendererUtils_1 = __webpack_require__(/*! browser/renderer/RendererUtils */ "./out/browser/renderer/RendererUtils.js");
var TEXTURE_WIDTH = 1024;
var TEXTURE_HEIGHT = 1024;
var TRANSPARENT_COLOR = {
    css: 'rgba(0, 0, 0, 0)',
    rgba: 0
};
var FRAME_CACHE_DRAW_LIMIT = 100;
var GLYPH_BITMAP_COMMIT_DELAY = 100;
function getGlyphCacheKey(glyph) {
    return glyph.code << 21 | glyph.bg << 12 | glyph.fg << 3 | (glyph.bold ? 0 : 4) + (glyph.dim ? 0 : 2) + (glyph.italic ? 0 : 1);
}
exports.getGlyphCacheKey = getGlyphCacheKey;
var DynamicCharAtlas = (function (_super) {
    __extends(DynamicCharAtlas, _super);
    function DynamicCharAtlas(document, _config) {
        var _this = _super.call(this) || this;
        _this._config = _config;
        _this._drawToCacheCount = 0;
        _this._glyphsWaitingOnBitmap = [];
        _this._bitmapCommitTimeout = null;
        _this._bitmap = null;
        _this._cacheCanvas = document.createElement('canvas');
        _this._cacheCanvas.width = TEXTURE_WIDTH;
        _this._cacheCanvas.height = TEXTURE_HEIGHT;
        _this._cacheCtx = RendererUtils_1.throwIfFalsy(_this._cacheCanvas.getContext('2d', { alpha: true }));
        var tmpCanvas = document.createElement('canvas');
        tmpCanvas.width = _this._config.scaledCharWidth;
        tmpCanvas.height = _this._config.scaledCharHeight;
        _this._tmpCtx = RendererUtils_1.throwIfFalsy(tmpCanvas.getContext('2d', { alpha: _this._config.allowTransparency }));
        _this._width = Math.floor(TEXTURE_WIDTH / _this._config.scaledCharWidth);
        _this._height = Math.floor(TEXTURE_HEIGHT / _this._config.scaledCharHeight);
        var capacity = _this._width * _this._height;
        _this._cacheMap = new LRUMap_1.LRUMap(capacity);
        _this._cacheMap.prealloc(capacity);
        return _this;
    }
    DynamicCharAtlas.prototype.dispose = function () {
        if (this._bitmapCommitTimeout !== null) {
            window.clearTimeout(this._bitmapCommitTimeout);
            this._bitmapCommitTimeout = null;
        }
    };
    DynamicCharAtlas.prototype.beginFrame = function () {
        this._drawToCacheCount = 0;
    };
    DynamicCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        if (glyph.code === 32) {
            return true;
        }
        if (!this._canCache(glyph)) {
            return false;
        }
        var glyphKey = getGlyphCacheKey(glyph);
        var cacheValue = this._cacheMap.get(glyphKey);
        if (cacheValue !== null && cacheValue !== undefined) {
            this._drawFromCache(ctx, cacheValue, x, y);
            return true;
        }
        else if (this._drawToCacheCount < FRAME_CACHE_DRAW_LIMIT) {
            var index = void 0;
            if (this._cacheMap.size < this._cacheMap.capacity) {
                index = this._cacheMap.size;
            }
            else {
                index = this._cacheMap.peek().index;
            }
            var cacheValue_1 = this._drawToCache(glyph, index);
            this._cacheMap.set(glyphKey, cacheValue_1);
            this._drawFromCache(ctx, cacheValue_1, x, y);
            return true;
        }
        return false;
    };
    DynamicCharAtlas.prototype._canCache = function (glyph) {
        return glyph.code < 256;
    };
    DynamicCharAtlas.prototype._toCoordinateX = function (index) {
        return (index % this._width) * this._config.scaledCharWidth;
    };
    DynamicCharAtlas.prototype._toCoordinateY = function (index) {
        return Math.floor(index / this._width) * this._config.scaledCharHeight;
    };
    DynamicCharAtlas.prototype._drawFromCache = function (ctx, cacheValue, x, y) {
        if (cacheValue.isEmpty) {
            return;
        }
        var cacheX = this._toCoordinateX(cacheValue.index);
        var cacheY = this._toCoordinateY(cacheValue.index);
        ctx.drawImage(cacheValue.inBitmap ? this._bitmap : this._cacheCanvas, cacheX, cacheY, this._config.scaledCharWidth, this._config.scaledCharHeight, x, y, this._config.scaledCharWidth, this._config.scaledCharHeight);
    };
    DynamicCharAtlas.prototype._getColorFromAnsiIndex = function (idx) {
        if (idx < this._config.colors.ansi.length) {
            return this._config.colors.ansi[idx];
        }
        return ColorManager_1.DEFAULT_ANSI_COLORS[idx];
    };
    DynamicCharAtlas.prototype._getBackgroundColor = function (glyph) {
        if (this._config.allowTransparency) {
            return TRANSPARENT_COLOR;
        }
        else if (glyph.bg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.foreground;
        }
        else if (glyph.bg < 256) {
            return this._getColorFromAnsiIndex(glyph.bg);
        }
        return this._config.colors.background;
    };
    DynamicCharAtlas.prototype._getForegroundColor = function (glyph) {
        if (glyph.fg === Constants_1.INVERTED_DEFAULT_COLOR) {
            return this._config.colors.background;
        }
        else if (glyph.fg < 256) {
            return this._getColorFromAnsiIndex(glyph.fg);
        }
        return this._config.colors.foreground;
    };
    DynamicCharAtlas.prototype._drawToCache = function (glyph, index) {
        this._drawToCacheCount++;
        this._tmpCtx.save();
        var backgroundColor = this._getBackgroundColor(glyph);
        this._tmpCtx.globalCompositeOperation = 'copy';
        this._tmpCtx.fillStyle = backgroundColor.css;
        this._tmpCtx.fillRect(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        this._tmpCtx.globalCompositeOperation = 'source-over';
        var fontWeight = glyph.bold ? this._config.fontWeightBold : this._config.fontWeight;
        var fontStyle = glyph.italic ? 'italic' : '';
        this._tmpCtx.font =
            fontStyle + " " + fontWeight + " " + this._config.fontSize * this._config.devicePixelRatio + "px " + this._config.fontFamily;
        this._tmpCtx.textBaseline = 'middle';
        this._tmpCtx.fillStyle = this._getForegroundColor(glyph).css;
        if (glyph.dim) {
            this._tmpCtx.globalAlpha = Constants_1.DIM_OPACITY;
        }
        this._tmpCtx.fillText(glyph.chars, 0, this._config.scaledCharHeight / 2);
        this._tmpCtx.restore();
        var imageData = this._tmpCtx.getImageData(0, 0, this._config.scaledCharWidth, this._config.scaledCharHeight);
        var isEmpty = false;
        if (!this._config.allowTransparency) {
            isEmpty = clearColor(imageData, backgroundColor);
        }
        var x = this._toCoordinateX(index);
        var y = this._toCoordinateY(index);
        this._cacheCtx.putImageData(imageData, x, y);
        var cacheValue = {
            index: index,
            isEmpty: isEmpty,
            inBitmap: false
        };
        this._addGlyphToBitmap(cacheValue);
        return cacheValue;
    };
    DynamicCharAtlas.prototype._addGlyphToBitmap = function (cacheValue) {
        var _this = this;
        if (!('createImageBitmap' in window) || Platform_1.isFirefox || Platform_1.isSafari) {
            return;
        }
        this._glyphsWaitingOnBitmap.push(cacheValue);
        if (this._bitmapCommitTimeout !== null) {
            return;
        }
        this._bitmapCommitTimeout = window.setTimeout(function () { return _this._generateBitmap(); }, GLYPH_BITMAP_COMMIT_DELAY);
    };
    DynamicCharAtlas.prototype._generateBitmap = function () {
        var _this = this;
        var glyphsMovingToBitmap = this._glyphsWaitingOnBitmap;
        this._glyphsWaitingOnBitmap = [];
        window.createImageBitmap(this._cacheCanvas).then(function (bitmap) {
            _this._bitmap = bitmap;
            for (var i = 0; i < glyphsMovingToBitmap.length; i++) {
                var value = glyphsMovingToBitmap[i];
                value.inBitmap = true;
            }
        });
        this._bitmapCommitTimeout = null;
    };
    return DynamicCharAtlas;
}(BaseCharAtlas_1.BaseCharAtlas));
exports.DynamicCharAtlas = DynamicCharAtlas;
var NoneCharAtlas = (function (_super) {
    __extends(NoneCharAtlas, _super);
    function NoneCharAtlas(document, config) {
        return _super.call(this) || this;
    }
    NoneCharAtlas.prototype.draw = function (ctx, glyph, x, y) {
        return false;
    };
    return NoneCharAtlas;
}(BaseCharAtlas_1.BaseCharAtlas));
exports.NoneCharAtlas = NoneCharAtlas;
function clearColor(imageData, color) {
    var isEmpty = true;
    var r = color.rgba >>> 24;
    var g = color.rgba >>> 16 & 0xFF;
    var b = color.rgba >>> 8 & 0xFF;
    for (var offset = 0; offset < imageData.data.length; offset += 4) {
        if (imageData.data[offset] === r &&
            imageData.data[offset + 1] === g &&
            imageData.data[offset + 2] === b) {
            imageData.data[offset + 3] = 0;
        }
        else {
            isEmpty = false;
        }
    }
    return isEmpty;
}


/***/ }),

/***/ "./out/browser/renderer/atlas/LRUMap.js":
/*!**********************************************!*\
  !*** ./out/browser/renderer/atlas/LRUMap.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var LRUMap = (function () {
    function LRUMap(capacity) {
        this.capacity = capacity;
        this._map = {};
        this._head = null;
        this._tail = null;
        this._nodePool = [];
        this.size = 0;
    }
    LRUMap.prototype._unlinkNode = function (node) {
        var prev = node.prev;
        var next = node.next;
        if (node === this._head) {
            this._head = next;
        }
        if (node === this._tail) {
            this._tail = prev;
        }
        if (prev !== null) {
            prev.next = next;
        }
        if (next !== null) {
            next.prev = prev;
        }
    };
    LRUMap.prototype._appendNode = function (node) {
        var tail = this._tail;
        if (tail !== null) {
            tail.next = node;
        }
        node.prev = tail;
        node.next = null;
        this._tail = node;
        if (this._head === null) {
            this._head = node;
        }
    };
    LRUMap.prototype.prealloc = function (count) {
        var nodePool = this._nodePool;
        for (var i = 0; i < count; i++) {
            nodePool.push({
                prev: null,
                next: null,
                key: null,
                value: null
            });
        }
    };
    LRUMap.prototype.get = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            this._unlinkNode(node);
            this._appendNode(node);
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peekValue = function (key) {
        var node = this._map[key];
        if (node !== undefined) {
            return node.value;
        }
        return null;
    };
    LRUMap.prototype.peek = function () {
        var head = this._head;
        return head === null ? null : head.value;
    };
    LRUMap.prototype.set = function (key, value) {
        var node = this._map[key];
        if (node !== undefined) {
            node = this._map[key];
            this._unlinkNode(node);
            node.value = value;
        }
        else if (this.size >= this.capacity) {
            node = this._head;
            this._unlinkNode(node);
            delete this._map[node.key];
            node.key = key;
            node.value = value;
            this._map[key] = node;
        }
        else {
            var nodePool = this._nodePool;
            if (nodePool.length > 0) {
                node = nodePool.pop();
                node.key = key;
                node.value = value;
            }
            else {
                node = {
                    prev: null,
                    next: null,
                    key: key,
                    value: value
                };
            }
            this._map[key] = node;
            this.size++;
        }
        this._appendNode(node);
    };
    return LRUMap;
}());
exports.LRUMap = LRUMap;


/***/ }),

/***/ "./out/browser/renderer/dom/DomRendererRowFactory.js":
/*!***********************************************************!*\
  !*** ./out/browser/renderer/dom/DomRendererRowFactory.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var Constants_2 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
exports.BOLD_CLASS = 'xterm-bold';
exports.DIM_CLASS = 'xterm-dim';
exports.ITALIC_CLASS = 'xterm-italic';
exports.UNDERLINE_CLASS = 'xterm-underline';
exports.CURSOR_CLASS = 'xterm-cursor';
exports.CURSOR_BLINK_CLASS = 'xterm-cursor-blink';
exports.CURSOR_STYLE_BLOCK_CLASS = 'xterm-cursor-block';
exports.CURSOR_STYLE_BAR_CLASS = 'xterm-cursor-bar';
exports.CURSOR_STYLE_UNDERLINE_CLASS = 'xterm-cursor-underline';
var DomRendererRowFactory = (function () {
    function DomRendererRowFactory(_document, _optionsService) {
        this._document = _document;
        this._optionsService = _optionsService;
        this._workCell = new CellData_1.CellData();
    }
    DomRendererRowFactory.prototype.createRow = function (lineData, isCursorRow, cursorStyle, cursorX, cursorBlink, cellWidth, cols) {
        var fragment = this._document.createDocumentFragment();
        var lineLength = 0;
        for (var x = Math.min(lineData.length, cols) - 1; x >= 0; x--) {
            if (lineData.loadCell(x, this._workCell).getCode() !== Constants_2.NULL_CELL_CODE || (isCursorRow && x === cursorX)) {
                lineLength = x + 1;
                break;
            }
        }
        for (var x = 0; x < lineLength; x++) {
            lineData.loadCell(x, this._workCell);
            var width = this._workCell.getWidth();
            if (width === 0) {
                continue;
            }
            var charElement = this._document.createElement('span');
            if (width > 1) {
                charElement.style.width = cellWidth * width + "px";
            }
            if (isCursorRow && x === cursorX) {
                charElement.classList.add(exports.CURSOR_CLASS);
                if (cursorBlink) {
                    charElement.classList.add(exports.CURSOR_BLINK_CLASS);
                }
                switch (cursorStyle) {
                    case 'bar':
                        charElement.classList.add(exports.CURSOR_STYLE_BAR_CLASS);
                        break;
                    case 'underline':
                        charElement.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);
                        break;
                    default:
                        charElement.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS);
                        break;
                }
            }
            if (this._workCell.isBold()) {
                charElement.classList.add(exports.BOLD_CLASS);
            }
            if (this._workCell.isItalic()) {
                charElement.classList.add(exports.ITALIC_CLASS);
            }
            if (this._workCell.isDim()) {
                charElement.classList.add(exports.DIM_CLASS);
            }
            if (this._workCell.isUnderline()) {
                charElement.classList.add(exports.UNDERLINE_CLASS);
            }
            charElement.textContent = this._workCell.getChars() || Constants_2.WHITESPACE_CELL_CHAR;
            var swapColor = this._workCell.isInverse();
            if (this._workCell.isFgRGB()) {
                var style = charElement.getAttribute('style') || '';
                style += (swapColor ? 'background-' : '') + "color:rgb(" + (AttributeData_1.AttributeData.toColorRGB(this._workCell.getFgColor())).join(',') + ");";
                charElement.setAttribute('style', style);
            }
            else if (this._workCell.isFgPalette()) {
                var fg = this._workCell.getFgColor();
                if (this._workCell.isBold() && fg < 8 && !swapColor && this._optionsService.options.drawBoldTextInBrightColors) {
                    fg += 8;
                }
                charElement.classList.add("xterm-" + (swapColor ? 'b' : 'f') + "g-" + fg);
            }
            else if (swapColor) {
                charElement.classList.add("xterm-bg-" + Constants_1.INVERTED_DEFAULT_COLOR);
            }
            if (this._workCell.isBgRGB()) {
                var style = charElement.getAttribute('style') || '';
                style += (swapColor ? '' : 'background-') + "color:rgb(" + (AttributeData_1.AttributeData.toColorRGB(this._workCell.getBgColor())).join(',') + ");";
                charElement.setAttribute('style', style);
            }
            else if (this._workCell.isBgPalette()) {
                charElement.classList.add("xterm-" + (swapColor ? 'f' : 'b') + "g-" + this._workCell.getBgColor());
            }
            else if (swapColor) {
                charElement.classList.add("xterm-fg-" + Constants_1.INVERTED_DEFAULT_COLOR);
            }
            fragment.appendChild(charElement);
        }
        return fragment;
    };
    return DomRendererRowFactory;
}());
exports.DomRendererRowFactory = DomRendererRowFactory;


/***/ }),

/***/ "./out/browser/selection/SelectionModel.js":
/*!*************************************************!*\
  !*** ./out/browser/selection/SelectionModel.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var SelectionModel = (function () {
    function SelectionModel(_bufferService) {
        this._bufferService = _bufferService;
        this.isSelectAllActive = false;
        this.selectionStartLength = 0;
    }
    SelectionModel.prototype.clearSelection = function () {
        this.selectionStart = undefined;
        this.selectionEnd = undefined;
        this.isSelectAllActive = false;
        this.selectionStartLength = 0;
    };
    Object.defineProperty(SelectionModel.prototype, "finalSelectionStart", {
        get: function () {
            if (this.isSelectAllActive) {
                return [0, 0];
            }
            if (!this.selectionEnd || !this.selectionStart) {
                return this.selectionStart;
            }
            return this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionModel.prototype, "finalSelectionEnd", {
        get: function () {
            if (this.isSelectAllActive) {
                return [this._bufferService.cols, this._bufferService.buffer.ybase + this._bufferService.rows - 1];
            }
            if (!this.selectionStart) {
                return undefined;
            }
            if (!this.selectionEnd || this.areSelectionValuesReversed()) {
                var startPlusLength = this.selectionStart[0] + this.selectionStartLength;
                if (startPlusLength > this._bufferService.cols) {
                    return [startPlusLength % this._bufferService.cols, this.selectionStart[1] + Math.floor(startPlusLength / this._bufferService.cols)];
                }
                return [startPlusLength, this.selectionStart[1]];
            }
            if (this.selectionStartLength) {
                if (this.selectionEnd[1] === this.selectionStart[1]) {
                    return [Math.max(this.selectionStart[0] + this.selectionStartLength, this.selectionEnd[0]), this.selectionEnd[1]];
                }
            }
            return this.selectionEnd;
        },
        enumerable: true,
        configurable: true
    });
    SelectionModel.prototype.areSelectionValuesReversed = function () {
        var start = this.selectionStart;
        var end = this.selectionEnd;
        if (!start || !end) {
            return false;
        }
        return start[1] > end[1] || (start[1] === end[1] && start[0] > end[0]);
    };
    SelectionModel.prototype.onTrim = function (amount) {
        if (this.selectionStart) {
            this.selectionStart[1] -= amount;
        }
        if (this.selectionEnd) {
            this.selectionEnd[1] -= amount;
        }
        if (this.selectionEnd && this.selectionEnd[1] < 0) {
            this.clearSelection();
            return true;
        }
        if (this.selectionStart && this.selectionStart[1] < 0) {
            this.selectionStart[1] = 0;
        }
        return false;
    };
    return SelectionModel;
}());
exports.SelectionModel = SelectionModel;


/***/ }),

/***/ "./out/browser/services/CharSizeService.js":
/*!*************************************************!*\
  !*** ./out/browser/services/CharSizeService.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CharSizeService = (function () {
    function CharSizeService(document, parentElement, _optionsService) {
        this.document = document;
        this.parentElement = parentElement;
        this._optionsService = _optionsService;
        this.width = 0;
        this.height = 0;
        this._onCharSizeChange = new EventEmitter_1.EventEmitter();
        this._measureStrategy = new DomMeasureStrategy(document, parentElement, this._optionsService);
    }
    Object.defineProperty(CharSizeService.prototype, "hasValidSize", {
        get: function () { return this.width > 0 && this.height > 0; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CharSizeService.prototype, "onCharSizeChange", {
        get: function () { return this._onCharSizeChange.event; },
        enumerable: true,
        configurable: true
    });
    CharSizeService.prototype.measure = function () {
        var result = this._measureStrategy.measure();
        if (result.width !== this.width || result.height !== this.height) {
            this.width = result.width;
            this.height = result.height;
            this._onCharSizeChange.fire();
        }
    };
    CharSizeService = __decorate([
        __param(2, Services_1.IOptionsService)
    ], CharSizeService);
    return CharSizeService;
}());
exports.CharSizeService = CharSizeService;
var DomMeasureStrategy = (function () {
    function DomMeasureStrategy(_document, _parentElement, _optionsService) {
        this._document = _document;
        this._parentElement = _parentElement;
        this._optionsService = _optionsService;
        this._result = { width: 0, height: 0 };
        this._measureElement = this._document.createElement('span');
        this._measureElement.classList.add('xterm-char-measure-element');
        this._measureElement.textContent = 'W';
        this._measureElement.setAttribute('aria-hidden', 'true');
        this._parentElement.appendChild(this._measureElement);
    }
    DomMeasureStrategy.prototype.measure = function () {
        this._measureElement.style.fontFamily = this._optionsService.options.fontFamily;
        this._measureElement.style.fontSize = this._optionsService.options.fontSize + "px";
        var geometry = this._measureElement.getBoundingClientRect();
        if (geometry.width !== 0 && geometry.height !== 0) {
            this._result.width = geometry.width;
            this._result.height = Math.ceil(geometry.height);
        }
        return this._result;
    };
    return DomMeasureStrategy;
}());


/***/ }),

/***/ "./out/browser/services/MouseService.js":
/*!**********************************************!*\
  !*** ./out/browser/services/MouseService.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! ./Services */ "./out/browser/services/Services.js");
var Mouse_1 = __webpack_require__(/*! browser/input/Mouse */ "./out/browser/input/Mouse.js");
var MouseService = (function () {
    function MouseService(_renderService, _charSizeService) {
        this._renderService = _renderService;
        this._charSizeService = _charSizeService;
    }
    MouseService.prototype.getCoords = function (event, element, colCount, rowCount, isSelection) {
        return Mouse_1.getCoords(event, element, colCount, rowCount, this._charSizeService.hasValidSize, this._renderService.dimensions.actualCellWidth, this._renderService.dimensions.actualCellHeight, isSelection);
    };
    MouseService.prototype.getRawByteCoords = function (event, element, colCount, rowCount) {
        var coords = this.getCoords(event, element, colCount, rowCount);
        return Mouse_1.getRawByteCoords(coords);
    };
    MouseService = __decorate([
        __param(0, Services_1.IRenderService),
        __param(1, Services_1.ICharSizeService)
    ], MouseService);
    return MouseService;
}());
exports.MouseService = MouseService;


/***/ }),

/***/ "./out/browser/services/RenderService.js":
/*!***********************************************!*\
  !*** ./out/browser/services/RenderService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var RenderDebouncer_1 = __webpack_require__(/*! browser/RenderDebouncer */ "./out/browser/RenderDebouncer.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var ScreenDprMonitor_1 = __webpack_require__(/*! browser/ScreenDprMonitor */ "./out/browser/ScreenDprMonitor.js");
var Lifecycle_2 = __webpack_require__(/*! browser/Lifecycle */ "./out/browser/Lifecycle.js");
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Services_2 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var RenderService = (function (_super) {
    __extends(RenderService, _super);
    function RenderService(_renderer, _rowCount, screenElement, optionsService, charSizeService) {
        var _this = _super.call(this) || this;
        _this._renderer = _renderer;
        _this._rowCount = _rowCount;
        _this.screenElement = screenElement;
        _this.optionsService = optionsService;
        _this.charSizeService = charSizeService;
        _this._isPaused = false;
        _this._needsFullRefresh = false;
        _this._canvasWidth = 0;
        _this._canvasHeight = 0;
        _this._onDimensionsChange = new EventEmitter_1.EventEmitter();
        _this._onRender = new EventEmitter_1.EventEmitter();
        _this._onRefreshRequest = new EventEmitter_1.EventEmitter();
        _this._renderDebouncer = new RenderDebouncer_1.RenderDebouncer(function (start, end) { return _this._renderRows(start, end); });
        _this.register(_this._renderDebouncer);
        _this._screenDprMonitor = new ScreenDprMonitor_1.ScreenDprMonitor();
        _this._screenDprMonitor.setListener(function () { return _this.onDevicePixelRatioChange(); });
        _this.register(_this._screenDprMonitor);
        _this.register(optionsService.onOptionChange(function () { return _this._renderer.onOptionsChanged(); }));
        _this.register(charSizeService.onCharSizeChange(function () { return _this.onCharSizeChanged(); }));
        _this.register(Lifecycle_2.addDisposableDomListener(window, 'resize', function () { return _this.onDevicePixelRatioChange(); }));
        if ('IntersectionObserver' in window) {
            var observer_1 = new IntersectionObserver(function (e) { return _this._onIntersectionChange(e[e.length - 1]); }, { threshold: 0 });
            observer_1.observe(screenElement);
            _this.register({ dispose: function () { return observer_1.disconnect(); } });
        }
        return _this;
    }
    Object.defineProperty(RenderService.prototype, "onDimensionsChange", {
        get: function () { return this._onDimensionsChange.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "onRender", {
        get: function () { return this._onRender.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "onRefreshRequest", {
        get: function () { return this._onRefreshRequest.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RenderService.prototype, "dimensions", {
        get: function () { return this._renderer.dimensions; },
        enumerable: true,
        configurable: true
    });
    RenderService.prototype._onIntersectionChange = function (entry) {
        this._isPaused = entry.intersectionRatio === 0;
        if (!this._isPaused && this._needsFullRefresh) {
            this.refreshRows(0, this._rowCount - 1);
            this._needsFullRefresh = false;
        }
    };
    RenderService.prototype.refreshRows = function (start, end) {
        if (this._isPaused) {
            this._needsFullRefresh = true;
            return;
        }
        this._renderDebouncer.refresh(start, end, this._rowCount);
    };
    RenderService.prototype._renderRows = function (start, end) {
        this._renderer.renderRows(start, end);
        this._onRender.fire({ start: start, end: end });
    };
    RenderService.prototype.resize = function (cols, rows) {
        this._rowCount = rows;
        this._fireOnCanvasResize();
    };
    RenderService.prototype.changeOptions = function () {
        this._renderer.onOptionsChanged();
        this._fireOnCanvasResize();
    };
    RenderService.prototype._fireOnCanvasResize = function () {
        if (this._renderer.dimensions.canvasWidth === this._canvasWidth && this._renderer.dimensions.canvasHeight === this._canvasHeight) {
            return;
        }
        this._onDimensionsChange.fire(this._renderer.dimensions);
    };
    RenderService.prototype.dispose = function () {
        this._renderer.dispose();
    };
    RenderService.prototype.setRenderer = function (renderer) {
        this._renderer.dispose();
        this._renderer = renderer;
        this.refreshRows(0, this._rowCount - 1);
    };
    RenderService.prototype._fullRefresh = function () {
        if (this._isPaused) {
            this._needsFullRefresh = true;
        }
        else {
            this.refreshRows(0, this._rowCount - 1);
        }
    };
    RenderService.prototype.setColors = function (colors) {
        this._renderer.setColors(colors);
        this._fullRefresh();
    };
    RenderService.prototype.onDevicePixelRatioChange = function () {
        this._renderer.onDevicePixelRatioChange();
        this.refreshRows(0, this._rowCount - 1);
    };
    RenderService.prototype.onResize = function (cols, rows) {
        this._renderer.onResize(cols, rows);
        this._fullRefresh();
    };
    RenderService.prototype.onCharSizeChanged = function () {
        this._renderer.onCharSizeChanged();
    };
    RenderService.prototype.onBlur = function () {
        this._renderer.onBlur();
    };
    RenderService.prototype.onFocus = function () {
        this._renderer.onFocus();
    };
    RenderService.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        this._renderer.onSelectionChanged(start, end, columnSelectMode);
    };
    RenderService.prototype.onCursorMove = function () {
        this._renderer.onCursorMove();
    };
    RenderService.prototype.clear = function () {
        this._renderer.clear();
    };
    RenderService.prototype.registerCharacterJoiner = function (handler) {
        return this._renderer.registerCharacterJoiner(handler);
    };
    RenderService.prototype.deregisterCharacterJoiner = function (joinerId) {
        return this._renderer.deregisterCharacterJoiner(joinerId);
    };
    RenderService = __decorate([
        __param(3, Services_1.IOptionsService),
        __param(4, Services_2.ICharSizeService)
    ], RenderService);
    return RenderService;
}(Lifecycle_1.Disposable));
exports.RenderService = RenderService;


/***/ }),

/***/ "./out/browser/services/SelectionService.js":
/*!**************************************************!*\
  !*** ./out/browser/services/SelectionService.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Browser = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var SelectionModel_1 = __webpack_require__(/*! browser/selection/SelectionModel */ "./out/browser/selection/SelectionModel.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Services_1 = __webpack_require__(/*! browser/services/Services */ "./out/browser/services/Services.js");
var Services_2 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var Mouse_1 = __webpack_require__(/*! browser/input/Mouse */ "./out/browser/input/Mouse.js");
var MoveToCell_1 = __webpack_require__(/*! browser/input/MoveToCell */ "./out/browser/input/MoveToCell.js");
var DRAG_SCROLL_MAX_THRESHOLD = 50;
var DRAG_SCROLL_MAX_SPEED = 15;
var DRAG_SCROLL_INTERVAL = 50;
var ALT_CLICK_MOVE_CURSOR_TIME = 500;
var NON_BREAKING_SPACE_CHAR = String.fromCharCode(160);
var ALL_NON_BREAKING_SPACE_REGEX = new RegExp(NON_BREAKING_SPACE_CHAR, 'g');
var SelectionService = (function () {
    function SelectionService(_scrollLines, _element, _screenElement, _charSizeService, _bufferService, _coreService, _mouseService, _optionsService) {
        var _this = this;
        this._scrollLines = _scrollLines;
        this._element = _element;
        this._screenElement = _screenElement;
        this._charSizeService = _charSizeService;
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._mouseService = _mouseService;
        this._optionsService = _optionsService;
        this._dragScrollAmount = 0;
        this._enabled = true;
        this._workCell = new CellData_1.CellData();
        this._mouseDownTimeStamp = 0;
        this._onLinuxMouseSelection = new EventEmitter_1.EventEmitter();
        this._onRedrawRequest = new EventEmitter_1.EventEmitter();
        this._onSelectionChange = new EventEmitter_1.EventEmitter();
        this._mouseMoveListener = function (event) { return _this._onMouseMove(event); };
        this._mouseUpListener = function (event) { return _this._onMouseUp(event); };
        this._coreService.onUserInput(function () {
            if (_this.hasSelection) {
                _this.clearSelection();
            }
        });
        this._trimListener = this._bufferService.buffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
        this._bufferService.buffers.onBufferActivate(function (e) { return _this._onBufferActivate(e); });
        this.enable();
        this._model = new SelectionModel_1.SelectionModel(this._bufferService);
        this._activeSelectionMode = 0;
    }
    Object.defineProperty(SelectionService.prototype, "onLinuxMouseSelection", {
        get: function () { return this._onLinuxMouseSelection.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "onRedrawRequest", {
        get: function () { return this._onRedrawRequest.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "onSelectionChange", {
        get: function () { return this._onSelectionChange.event; },
        enumerable: true,
        configurable: true
    });
    SelectionService.prototype.dispose = function () {
        this._removeMouseDownListeners();
    };
    SelectionService.prototype.reset = function () {
        this.clearSelection();
    };
    SelectionService.prototype.disable = function () {
        this.clearSelection();
        this._enabled = false;
    };
    SelectionService.prototype.enable = function () {
        this._enabled = true;
    };
    Object.defineProperty(SelectionService.prototype, "selectionStart", {
        get: function () { return this._model.finalSelectionStart; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "selectionEnd", {
        get: function () { return this._model.finalSelectionEnd; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "hasSelection", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return false;
            }
            return start[0] !== end[0] || start[1] !== end[1];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SelectionService.prototype, "selectionText", {
        get: function () {
            var start = this._model.finalSelectionStart;
            var end = this._model.finalSelectionEnd;
            if (!start || !end) {
                return '';
            }
            var buffer = this._bufferService.buffer;
            var result = [];
            if (this._activeSelectionMode === 3) {
                if (start[0] === end[0]) {
                    return '';
                }
                for (var i = start[1]; i <= end[1]; i++) {
                    var lineText = buffer.translateBufferLineToString(i, true, start[0], end[0]);
                    result.push(lineText);
                }
            }
            else {
                var startRowEndCol = start[1] === end[1] ? end[0] : undefined;
                result.push(buffer.translateBufferLineToString(start[1], true, start[0], startRowEndCol));
                for (var i = start[1] + 1; i <= end[1] - 1; i++) {
                    var bufferLine = buffer.lines.get(i);
                    var lineText = buffer.translateBufferLineToString(i, true);
                    if (bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
                if (start[1] !== end[1]) {
                    var bufferLine = buffer.lines.get(end[1]);
                    var lineText = buffer.translateBufferLineToString(end[1], true, 0, end[0]);
                    if (bufferLine.isWrapped) {
                        result[result.length - 1] += lineText;
                    }
                    else {
                        result.push(lineText);
                    }
                }
            }
            var formattedResult = result.map(function (line) {
                return line.replace(ALL_NON_BREAKING_SPACE_REGEX, ' ');
            }).join(Browser.isWindows ? '\r\n' : '\n');
            return formattedResult;
        },
        enumerable: true,
        configurable: true
    });
    SelectionService.prototype.clearSelection = function () {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype.refresh = function (isLinuxMouseSelection) {
        var _this = this;
        if (!this._refreshAnimationFrame) {
            this._refreshAnimationFrame = window.requestAnimationFrame(function () { return _this._refresh(); });
        }
        if (Browser.isLinux && isLinuxMouseSelection) {
            var selectionText = this.selectionText;
            if (selectionText.length) {
                this._onLinuxMouseSelection.fire(this.selectionText);
            }
        }
    };
    SelectionService.prototype._refresh = function () {
        this._refreshAnimationFrame = undefined;
        this._onRedrawRequest.fire({
            start: this._model.finalSelectionStart,
            end: this._model.finalSelectionEnd,
            columnSelectMode: this._activeSelectionMode === 3
        });
    };
    SelectionService.prototype.isClickInSelection = function (event) {
        var coords = this._getMouseBufferCoords(event);
        var start = this._model.finalSelectionStart;
        var end = this._model.finalSelectionEnd;
        if (!start || !end || !coords) {
            return false;
        }
        return this._areCoordsInSelection(coords, start, end);
    };
    SelectionService.prototype._areCoordsInSelection = function (coords, start, end) {
        return (coords[1] > start[1] && coords[1] < end[1]) ||
            (start[1] === end[1] && coords[1] === start[1] && coords[0] >= start[0] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === end[1] && coords[0] < end[0]) ||
            (start[1] < end[1] && coords[1] === start[1] && coords[0] >= start[0]);
    };
    SelectionService.prototype.selectWordAtCursor = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._selectWordAt(coords, false);
            this._model.selectionEnd = undefined;
            this.refresh(true);
        }
    };
    SelectionService.prototype.selectAll = function () {
        this._model.isSelectAllActive = true;
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype.selectLines = function (start, end) {
        this._model.clearSelection();
        start = Math.max(start, 0);
        end = Math.min(end, this._bufferService.buffer.lines.length - 1);
        this._model.selectionStart = [0, start];
        this._model.selectionEnd = [this._bufferService.cols, end];
        this.refresh();
        this._onSelectionChange.fire();
    };
    SelectionService.prototype._onTrim = function (amount) {
        var needsRefresh = this._model.onTrim(amount);
        if (needsRefresh) {
            this.refresh();
        }
    };
    SelectionService.prototype._getMouseBufferCoords = function (event) {
        var coords = this._mouseService.getCoords(event, this._screenElement, this._bufferService.cols, this._bufferService.rows, true);
        if (!coords) {
            return undefined;
        }
        coords[0]--;
        coords[1]--;
        coords[1] += this._bufferService.buffer.ydisp;
        return coords;
    };
    SelectionService.prototype._getMouseEventScrollAmount = function (event) {
        var offset = Mouse_1.getCoordsRelativeToElement(event, this._screenElement)[1];
        var terminalHeight = this._bufferService.rows * Math.ceil(this._charSizeService.height * this._optionsService.options.lineHeight);
        if (offset >= 0 && offset <= terminalHeight) {
            return 0;
        }
        if (offset > terminalHeight) {
            offset -= terminalHeight;
        }
        offset = Math.min(Math.max(offset, -DRAG_SCROLL_MAX_THRESHOLD), DRAG_SCROLL_MAX_THRESHOLD);
        offset /= DRAG_SCROLL_MAX_THRESHOLD;
        return (offset / Math.abs(offset)) + Math.round(offset * (DRAG_SCROLL_MAX_SPEED - 1));
    };
    SelectionService.prototype.shouldForceSelection = function (event) {
        if (Browser.isMac) {
            return event.altKey && this._optionsService.options.macOptionClickForcesSelection;
        }
        return event.shiftKey;
    };
    SelectionService.prototype.onMouseDown = function (event) {
        this._mouseDownTimeStamp = event.timeStamp;
        if (event.button === 2 && this.hasSelection) {
            return;
        }
        if (event.button !== 0) {
            return;
        }
        if (!this._enabled) {
            if (!this.shouldForceSelection(event)) {
                return;
            }
            event.stopPropagation();
        }
        event.preventDefault();
        this._dragScrollAmount = 0;
        if (this._enabled && event.shiftKey) {
            this._onIncrementalClick(event);
        }
        else {
            if (event.detail === 1) {
                this._onSingleClick(event);
            }
            else if (event.detail === 2) {
                this._onDoubleClick(event);
            }
            else if (event.detail === 3) {
                this._onTripleClick(event);
            }
        }
        this._addMouseDownListeners();
        this.refresh(true);
    };
    SelectionService.prototype._addMouseDownListeners = function () {
        var _this = this;
        if (this._screenElement.ownerDocument) {
            this._screenElement.ownerDocument.addEventListener('mousemove', this._mouseMoveListener);
            this._screenElement.ownerDocument.addEventListener('mouseup', this._mouseUpListener);
        }
        this._dragScrollIntervalTimer = window.setInterval(function () { return _this._dragScroll(); }, DRAG_SCROLL_INTERVAL);
    };
    SelectionService.prototype._removeMouseDownListeners = function () {
        if (this._screenElement.ownerDocument) {
            this._screenElement.ownerDocument.removeEventListener('mousemove', this._mouseMoveListener);
            this._screenElement.ownerDocument.removeEventListener('mouseup', this._mouseUpListener);
        }
        clearInterval(this._dragScrollIntervalTimer);
        this._dragScrollIntervalTimer = undefined;
    };
    SelectionService.prototype._onIncrementalClick = function (event) {
        if (this._model.selectionStart) {
            this._model.selectionEnd = this._getMouseBufferCoords(event);
        }
    };
    SelectionService.prototype._onSingleClick = function (event) {
        this._model.selectionStartLength = 0;
        this._model.isSelectAllActive = false;
        this._activeSelectionMode = this.shouldColumnSelect(event) ? 3 : 0;
        this._model.selectionStart = this._getMouseBufferCoords(event);
        if (!this._model.selectionStart) {
            return;
        }
        this._model.selectionEnd = undefined;
        var line = this._bufferService.buffer.lines.get(this._model.selectionStart[1]);
        if (!line) {
            return;
        }
        if (line.length === this._model.selectionStart[0]) {
            return;
        }
        if (line.hasWidth(this._model.selectionStart[0]) === 0) {
            this._model.selectionStart[0]++;
        }
    };
    SelectionService.prototype._onDoubleClick = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._activeSelectionMode = 1;
            this._selectWordAt(coords, true);
        }
    };
    SelectionService.prototype._onTripleClick = function (event) {
        var coords = this._getMouseBufferCoords(event);
        if (coords) {
            this._activeSelectionMode = 2;
            this._selectLineAt(coords[1]);
        }
    };
    SelectionService.prototype.shouldColumnSelect = function (event) {
        return event.altKey && !(Browser.isMac && this._optionsService.options.macOptionClickForcesSelection);
    };
    SelectionService.prototype._onMouseMove = function (event) {
        event.stopImmediatePropagation();
        if (!this._model.selectionStart) {
            return;
        }
        var previousSelectionEnd = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;
        this._model.selectionEnd = this._getMouseBufferCoords(event);
        if (!this._model.selectionEnd) {
            this.refresh(true);
            return;
        }
        if (this._activeSelectionMode === 2) {
            if (this._model.selectionEnd[1] < this._model.selectionStart[1]) {
                this._model.selectionEnd[0] = 0;
            }
            else {
                this._model.selectionEnd[0] = this._bufferService.cols;
            }
        }
        else if (this._activeSelectionMode === 1) {
            this._selectToWordAt(this._model.selectionEnd);
        }
        this._dragScrollAmount = this._getMouseEventScrollAmount(event);
        if (this._activeSelectionMode !== 3) {
            if (this._dragScrollAmount > 0) {
                this._model.selectionEnd[0] = this._bufferService.cols;
            }
            else if (this._dragScrollAmount < 0) {
                this._model.selectionEnd[0] = 0;
            }
        }
        var buffer = this._bufferService.buffer;
        if (this._model.selectionEnd[1] < buffer.lines.length) {
            var line = buffer.lines.get(this._model.selectionEnd[1]);
            if (line && line.hasWidth(this._model.selectionEnd[0]) === 0) {
                this._model.selectionEnd[0]++;
            }
        }
        if (!previousSelectionEnd ||
            previousSelectionEnd[0] !== this._model.selectionEnd[0] ||
            previousSelectionEnd[1] !== this._model.selectionEnd[1]) {
            this.refresh(true);
        }
    };
    SelectionService.prototype._dragScroll = function () {
        if (!this._model.selectionEnd || !this._model.selectionStart) {
            return;
        }
        if (this._dragScrollAmount) {
            this._scrollLines(this._dragScrollAmount, false);
            var buffer = this._bufferService.buffer;
            if (this._dragScrollAmount > 0) {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = this._bufferService.cols;
                }
                this._model.selectionEnd[1] = Math.min(buffer.ydisp + this._bufferService.rows, buffer.lines.length - 1);
            }
            else {
                if (this._activeSelectionMode !== 3) {
                    this._model.selectionEnd[0] = 0;
                }
                this._model.selectionEnd[1] = buffer.ydisp;
            }
            this.refresh();
        }
    };
    SelectionService.prototype._onMouseUp = function (event) {
        var timeElapsed = event.timeStamp - this._mouseDownTimeStamp;
        this._removeMouseDownListeners();
        if (this.selectionText.length <= 1 && timeElapsed < ALT_CLICK_MOVE_CURSOR_TIME) {
            if (event.altKey && this._bufferService.buffer.ybase === this._bufferService.buffer.ydisp) {
                var coordinates = this._mouseService.getCoords(event, this._element, this._bufferService.cols, this._bufferService.rows, false);
                if (coordinates && coordinates[0] !== undefined && coordinates[1] !== undefined) {
                    var sequence = MoveToCell_1.moveToCellSequence(coordinates[0] - 1, coordinates[1] - 1, this._bufferService, this._coreService.decPrivateModes.applicationCursorKeys);
                    this._coreService.triggerDataEvent(sequence, true);
                }
            }
        }
        else if (this.hasSelection) {
            this._onSelectionChange.fire();
        }
    };
    SelectionService.prototype._onBufferActivate = function (e) {
        var _this = this;
        this.clearSelection();
        if (this._trimListener) {
            this._trimListener.dispose();
        }
        this._trimListener = e.activeBuffer.lines.onTrim(function (amount) { return _this._onTrim(amount); });
    };
    SelectionService.prototype._convertViewportColToCharacterIndex = function (bufferLine, coords) {
        var charIndex = coords[0];
        for (var i = 0; coords[0] >= i; i++) {
            var length_1 = bufferLine.loadCell(i, this._workCell).getChars().length;
            if (this._workCell.getWidth() === 0) {
                charIndex--;
            }
            else if (length_1 > 1 && coords[0] !== i) {
                charIndex += length_1 - 1;
            }
        }
        return charIndex;
    };
    SelectionService.prototype.setSelection = function (col, row, length) {
        this._model.clearSelection();
        this._removeMouseDownListeners();
        this._model.selectionStart = [col, row];
        this._model.selectionStartLength = length;
        this.refresh();
    };
    SelectionService.prototype._getWordAt = function (coords, allowWhitespaceOnlySelection, followWrappedLinesAbove, followWrappedLinesBelow) {
        if (followWrappedLinesAbove === void 0) { followWrappedLinesAbove = true; }
        if (followWrappedLinesBelow === void 0) { followWrappedLinesBelow = true; }
        if (coords[0] >= this._bufferService.cols) {
            return undefined;
        }
        var buffer = this._bufferService.buffer;
        var bufferLine = buffer.lines.get(coords[1]);
        if (!bufferLine) {
            return undefined;
        }
        var line = buffer.translateBufferLineToString(coords[1], false);
        var startIndex = this._convertViewportColToCharacterIndex(bufferLine, coords);
        var endIndex = startIndex;
        var charOffset = coords[0] - startIndex;
        var leftWideCharCount = 0;
        var rightWideCharCount = 0;
        var leftLongCharOffset = 0;
        var rightLongCharOffset = 0;
        if (line.charAt(startIndex) === ' ') {
            while (startIndex > 0 && line.charAt(startIndex - 1) === ' ') {
                startIndex--;
            }
            while (endIndex < line.length && line.charAt(endIndex + 1) === ' ') {
                endIndex++;
            }
        }
        else {
            var startCol = coords[0];
            var endCol = coords[0];
            if (bufferLine.getWidth(startCol) === 0) {
                leftWideCharCount++;
                startCol--;
            }
            if (bufferLine.getWidth(endCol) === 2) {
                rightWideCharCount++;
                endCol++;
            }
            var length_2 = bufferLine.getString(endCol).length;
            if (length_2 > 1) {
                rightLongCharOffset += length_2 - 1;
                endIndex += length_2 - 1;
            }
            while (startCol > 0 && startIndex > 0 && !this._isCharWordSeparator(bufferLine.loadCell(startCol - 1, this._workCell))) {
                bufferLine.loadCell(startCol - 1, this._workCell);
                var length_3 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 0) {
                    leftWideCharCount++;
                    startCol--;
                }
                else if (length_3 > 1) {
                    leftLongCharOffset += length_3 - 1;
                    startIndex -= length_3 - 1;
                }
                startIndex--;
                startCol--;
            }
            while (endCol < bufferLine.length && endIndex + 1 < line.length && !this._isCharWordSeparator(bufferLine.loadCell(endCol + 1, this._workCell))) {
                bufferLine.loadCell(endCol + 1, this._workCell);
                var length_4 = this._workCell.getChars().length;
                if (this._workCell.getWidth() === 2) {
                    rightWideCharCount++;
                    endCol++;
                }
                else if (length_4 > 1) {
                    rightLongCharOffset += length_4 - 1;
                    endIndex += length_4 - 1;
                }
                endIndex++;
                endCol++;
            }
        }
        endIndex++;
        var start = startIndex
            + charOffset
            - leftWideCharCount
            + leftLongCharOffset;
        var length = Math.min(this._bufferService.cols, endIndex
            - startIndex
            + leftWideCharCount
            + rightWideCharCount
            - leftLongCharOffset
            - rightLongCharOffset);
        if (!allowWhitespaceOnlySelection && line.slice(startIndex, endIndex).trim() === '') {
            return undefined;
        }
        if (followWrappedLinesAbove) {
            if (start === 0 && bufferLine.getCodePoint(0) !== 32) {
                var previousBufferLine = buffer.lines.get(coords[1] - 1);
                if (previousBufferLine && bufferLine.isWrapped && previousBufferLine.getCodePoint(this._bufferService.cols - 1) !== 32) {
                    var previousLineWordPosition = this._getWordAt([this._bufferService.cols - 1, coords[1] - 1], false, true, false);
                    if (previousLineWordPosition) {
                        var offset = this._bufferService.cols - previousLineWordPosition.start;
                        start -= offset;
                        length += offset;
                    }
                }
            }
        }
        if (followWrappedLinesBelow) {
            if (start + length === this._bufferService.cols && bufferLine.getCodePoint(this._bufferService.cols - 1) !== 32) {
                var nextBufferLine = buffer.lines.get(coords[1] + 1);
                if (nextBufferLine && nextBufferLine.isWrapped && nextBufferLine.getCodePoint(0) !== 32) {
                    var nextLineWordPosition = this._getWordAt([0, coords[1] + 1], false, false, true);
                    if (nextLineWordPosition) {
                        length += nextLineWordPosition.length;
                    }
                }
            }
        }
        return { start: start, length: length };
    };
    SelectionService.prototype._selectWordAt = function (coords, allowWhitespaceOnlySelection) {
        var wordPosition = this._getWordAt(coords, allowWhitespaceOnlySelection);
        if (wordPosition) {
            while (wordPosition.start < 0) {
                wordPosition.start += this._bufferService.cols;
                coords[1]--;
            }
            this._model.selectionStart = [wordPosition.start, coords[1]];
            this._model.selectionStartLength = wordPosition.length;
        }
    };
    SelectionService.prototype._selectToWordAt = function (coords) {
        var wordPosition = this._getWordAt(coords, true);
        if (wordPosition) {
            var endRow = coords[1];
            while (wordPosition.start < 0) {
                wordPosition.start += this._bufferService.cols;
                endRow--;
            }
            if (!this._model.areSelectionValuesReversed()) {
                while (wordPosition.start + wordPosition.length > this._bufferService.cols) {
                    wordPosition.length -= this._bufferService.cols;
                    endRow++;
                }
            }
            this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? wordPosition.start : wordPosition.start + wordPosition.length, endRow];
        }
    };
    SelectionService.prototype._isCharWordSeparator = function (cell) {
        if (cell.getWidth() === 0) {
            return false;
        }
        return this._optionsService.options.wordSeparator.indexOf(cell.getChars()) >= 0;
    };
    SelectionService.prototype._selectLineAt = function (line) {
        var wrappedRange = this._bufferService.buffer.getWrappedRangeForLine(line);
        this._model.selectionStart = [0, wrappedRange.first];
        this._model.selectionEnd = [this._bufferService.cols, wrappedRange.last];
        this._model.selectionStartLength = 0;
    };
    SelectionService = __decorate([
        __param(3, Services_1.ICharSizeService),
        __param(4, Services_2.IBufferService),
        __param(5, Services_2.ICoreService),
        __param(6, Services_1.IMouseService),
        __param(7, Services_2.IOptionsService)
    ], SelectionService);
    return SelectionService;
}());
exports.SelectionService = SelectionService;


/***/ }),

/***/ "./out/browser/services/Services.js":
/*!******************************************!*\
  !*** ./out/browser/services/Services.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
exports.ICharSizeService = ServiceRegistry_1.createDecorator('CharSizeService');
exports.IMouseService = ServiceRegistry_1.createDecorator('MouseService');
exports.IRenderService = ServiceRegistry_1.createDecorator('RenderService');
exports.ISelectionService = ServiceRegistry_1.createDecorator('SelectionService');
exports.ISoundService = ServiceRegistry_1.createDecorator('SoundService');


/***/ }),

/***/ "./out/browser/services/SoundService.js":
/*!**********************************************!*\
  !*** ./out/browser/services/SoundService.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var SoundService = (function () {
    function SoundService(_optionsService) {
        this._optionsService = _optionsService;
    }
    Object.defineProperty(SoundService, "audioContext", {
        get: function () {
            if (!SoundService._audioContext) {
                var audioContextCtor = window.AudioContext || window.webkitAudioContext;
                if (!audioContextCtor) {
                    console.warn('Web Audio API is not supported by this browser. Consider upgrading to the latest version');
                    return null;
                }
                SoundService._audioContext = new audioContextCtor();
            }
            return SoundService._audioContext;
        },
        enumerable: true,
        configurable: true
    });
    SoundService.prototype.playBellSound = function () {
        var ctx = SoundService.audioContext;
        if (!ctx) {
            return;
        }
        var bellAudioSource = ctx.createBufferSource();
        ctx.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)), function (buffer) {
            bellAudioSource.buffer = buffer;
            bellAudioSource.connect(ctx.destination);
            bellAudioSource.start(0);
        });
    };
    SoundService.prototype._base64ToArrayBuffer = function (base64) {
        var binaryString = window.atob(base64);
        var len = binaryString.length;
        var bytes = new Uint8Array(len);
        for (var i = 0; i < len; i++) {
            bytes[i] = binaryString.charCodeAt(i);
        }
        return bytes.buffer;
    };
    SoundService.prototype._removeMimeType = function (dataURI) {
        var splitUri = dataURI.split(',');
        return splitUri[1];
    };
    SoundService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], SoundService);
    return SoundService;
}());
exports.SoundService = SoundService;


/***/ }),

/***/ "./out/common/CharWidth.js":
/*!*********************************!*\
  !*** ./out/common/CharWidth.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
exports.wcwidth = (function (opts) {
    var COMBINING_BMP = [
        [0x0300, 0x036F], [0x0483, 0x0486], [0x0488, 0x0489],
        [0x0591, 0x05BD], [0x05BF, 0x05BF], [0x05C1, 0x05C2],
        [0x05C4, 0x05C5], [0x05C7, 0x05C7], [0x0600, 0x0603],
        [0x0610, 0x0615], [0x064B, 0x065E], [0x0670, 0x0670],
        [0x06D6, 0x06E4], [0x06E7, 0x06E8], [0x06EA, 0x06ED],
        [0x070F, 0x070F], [0x0711, 0x0711], [0x0730, 0x074A],
        [0x07A6, 0x07B0], [0x07EB, 0x07F3], [0x0901, 0x0902],
        [0x093C, 0x093C], [0x0941, 0x0948], [0x094D, 0x094D],
        [0x0951, 0x0954], [0x0962, 0x0963], [0x0981, 0x0981],
        [0x09BC, 0x09BC], [0x09C1, 0x09C4], [0x09CD, 0x09CD],
        [0x09E2, 0x09E3], [0x0A01, 0x0A02], [0x0A3C, 0x0A3C],
        [0x0A41, 0x0A42], [0x0A47, 0x0A48], [0x0A4B, 0x0A4D],
        [0x0A70, 0x0A71], [0x0A81, 0x0A82], [0x0ABC, 0x0ABC],
        [0x0AC1, 0x0AC5], [0x0AC7, 0x0AC8], [0x0ACD, 0x0ACD],
        [0x0AE2, 0x0AE3], [0x0B01, 0x0B01], [0x0B3C, 0x0B3C],
        [0x0B3F, 0x0B3F], [0x0B41, 0x0B43], [0x0B4D, 0x0B4D],
        [0x0B56, 0x0B56], [0x0B82, 0x0B82], [0x0BC0, 0x0BC0],
        [0x0BCD, 0x0BCD], [0x0C3E, 0x0C40], [0x0C46, 0x0C48],
        [0x0C4A, 0x0C4D], [0x0C55, 0x0C56], [0x0CBC, 0x0CBC],
        [0x0CBF, 0x0CBF], [0x0CC6, 0x0CC6], [0x0CCC, 0x0CCD],
        [0x0CE2, 0x0CE3], [0x0D41, 0x0D43], [0x0D4D, 0x0D4D],
        [0x0DCA, 0x0DCA], [0x0DD2, 0x0DD4], [0x0DD6, 0x0DD6],
        [0x0E31, 0x0E31], [0x0E34, 0x0E3A], [0x0E47, 0x0E4E],
        [0x0EB1, 0x0EB1], [0x0EB4, 0x0EB9], [0x0EBB, 0x0EBC],
        [0x0EC8, 0x0ECD], [0x0F18, 0x0F19], [0x0F35, 0x0F35],
        [0x0F37, 0x0F37], [0x0F39, 0x0F39], [0x0F71, 0x0F7E],
        [0x0F80, 0x0F84], [0x0F86, 0x0F87], [0x0F90, 0x0F97],
        [0x0F99, 0x0FBC], [0x0FC6, 0x0FC6], [0x102D, 0x1030],
        [0x1032, 0x1032], [0x1036, 0x1037], [0x1039, 0x1039],
        [0x1058, 0x1059], [0x1160, 0x11FF], [0x135F, 0x135F],
        [0x1712, 0x1714], [0x1732, 0x1734], [0x1752, 0x1753],
        [0x1772, 0x1773], [0x17B4, 0x17B5], [0x17B7, 0x17BD],
        [0x17C6, 0x17C6], [0x17C9, 0x17D3], [0x17DD, 0x17DD],
        [0x180B, 0x180D], [0x18A9, 0x18A9], [0x1920, 0x1922],
        [0x1927, 0x1928], [0x1932, 0x1932], [0x1939, 0x193B],
        [0x1A17, 0x1A18], [0x1B00, 0x1B03], [0x1B34, 0x1B34],
        [0x1B36, 0x1B3A], [0x1B3C, 0x1B3C], [0x1B42, 0x1B42],
        [0x1B6B, 0x1B73], [0x1DC0, 0x1DCA], [0x1DFE, 0x1DFF],
        [0x200B, 0x200F], [0x202A, 0x202E], [0x2060, 0x2063],
        [0x206A, 0x206F], [0x20D0, 0x20EF], [0x302A, 0x302F],
        [0x3099, 0x309A], [0xA806, 0xA806], [0xA80B, 0xA80B],
        [0xA825, 0xA826], [0xFB1E, 0xFB1E], [0xFE00, 0xFE0F],
        [0xFE20, 0xFE23], [0xFEFF, 0xFEFF], [0xFFF9, 0xFFFB]
    ];
    var COMBINING_HIGH = [
        [0x10A01, 0x10A03], [0x10A05, 0x10A06], [0x10A0C, 0x10A0F],
        [0x10A38, 0x10A3A], [0x10A3F, 0x10A3F], [0x1D167, 0x1D169],
        [0x1D173, 0x1D182], [0x1D185, 0x1D18B], [0x1D1AA, 0x1D1AD],
        [0x1D242, 0x1D244], [0xE0001, 0xE0001], [0xE0020, 0xE007F],
        [0xE0100, 0xE01EF]
    ];
    function bisearch(ucs, data) {
        var min = 0;
        var max = data.length - 1;
        var mid;
        if (ucs < data[0][0] || ucs > data[max][1]) {
            return false;
        }
        while (max >= min) {
            mid = (min + max) >> 1;
            if (ucs > data[mid][1]) {
                min = mid + 1;
            }
            else if (ucs < data[mid][0]) {
                max = mid - 1;
            }
            else {
                return true;
            }
        }
        return false;
    }
    function wcwidthHigh(ucs) {
        if (bisearch(ucs, COMBINING_HIGH)) {
            return 0;
        }
        if ((ucs >= 0x20000 && ucs <= 0x2fffd) || (ucs >= 0x30000 && ucs <= 0x3fffd)) {
            return 2;
        }
        return 1;
    }
    var control = opts.control | 0;
    var table = new Uint8Array(65536);
    TypedArrayUtils_1.fill(table, 1);
    table[0] = opts.nul;
    TypedArrayUtils_1.fill(table, opts.control, 1, 32);
    TypedArrayUtils_1.fill(table, opts.control, 0x7f, 0xa0);
    TypedArrayUtils_1.fill(table, 2, 0x1100, 0x1160);
    table[0x2329] = 2;
    table[0x232a] = 2;
    TypedArrayUtils_1.fill(table, 2, 0x2e80, 0xa4d0);
    table[0x303f] = 1;
    TypedArrayUtils_1.fill(table, 2, 0xac00, 0xd7a4);
    TypedArrayUtils_1.fill(table, 2, 0xf900, 0xfb00);
    TypedArrayUtils_1.fill(table, 2, 0xfe10, 0xfe1a);
    TypedArrayUtils_1.fill(table, 2, 0xfe30, 0xfe70);
    TypedArrayUtils_1.fill(table, 2, 0xff00, 0xff61);
    TypedArrayUtils_1.fill(table, 2, 0xffe0, 0xffe7);
    for (var r = 0; r < COMBINING_BMP.length; ++r) {
        TypedArrayUtils_1.fill(table, 0, COMBINING_BMP[r][0], COMBINING_BMP[r][1] + 1);
    }
    return function (num) {
        if (num < 32) {
            return control | 0;
        }
        if (num < 127) {
            return 1;
        }
        if (num < 65536) {
            return table[num];
        }
        return wcwidthHigh(num);
    };
})({ nul: 0, control: 0 });
function getStringCellWidth(s) {
    var result = 0;
    var length = s.length;
    for (var i = 0; i < length; ++i) {
        var code = s.charCodeAt(i);
        if (0xD800 <= code && code <= 0xDBFF) {
            if (++i >= length) {
                return result + exports.wcwidth(code);
            }
            var second = s.charCodeAt(i);
            if (0xDC00 <= second && second <= 0xDFFF) {
                code = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
            }
            else {
                result += exports.wcwidth(second);
            }
        }
        result += exports.wcwidth(code);
    }
    return result;
}
exports.getStringCellWidth = getStringCellWidth;


/***/ }),

/***/ "./out/common/CircularList.js":
/*!************************************!*\
  !*** ./out/common/CircularList.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var CircularList = (function () {
    function CircularList(_maxLength) {
        this._maxLength = _maxLength;
        this.onDeleteEmitter = new EventEmitter_1.EventEmitter();
        this.onInsertEmitter = new EventEmitter_1.EventEmitter();
        this.onTrimEmitter = new EventEmitter_1.EventEmitter();
        this._array = new Array(this._maxLength);
        this._startIndex = 0;
        this._length = 0;
    }
    Object.defineProperty(CircularList.prototype, "onDelete", {
        get: function () { return this.onDeleteEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onInsert", {
        get: function () { return this.onInsertEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "onTrim", {
        get: function () { return this.onTrimEmitter.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "maxLength", {
        get: function () {
            return this._maxLength;
        },
        set: function (newMaxLength) {
            if (this._maxLength === newMaxLength) {
                return;
            }
            var newArray = new Array(newMaxLength);
            for (var i = 0; i < Math.min(newMaxLength, this.length); i++) {
                newArray[i] = this._array[this._getCyclicIndex(i)];
            }
            this._array = newArray;
            this._maxLength = newMaxLength;
            this._startIndex = 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CircularList.prototype, "length", {
        get: function () {
            return this._length;
        },
        set: function (newLength) {
            if (newLength > this._length) {
                for (var i = this._length; i < newLength; i++) {
                    this._array[i] = undefined;
                }
            }
            this._length = newLength;
        },
        enumerable: true,
        configurable: true
    });
    CircularList.prototype.get = function (index) {
        return this._array[this._getCyclicIndex(index)];
    };
    CircularList.prototype.set = function (index, value) {
        this._array[this._getCyclicIndex(index)] = value;
    };
    CircularList.prototype.push = function (value) {
        this._array[this._getCyclicIndex(this._length)] = value;
        if (this._length === this._maxLength) {
            this._startIndex = ++this._startIndex % this._maxLength;
            this.onTrimEmitter.fire(1);
        }
        else {
            this._length++;
        }
    };
    CircularList.prototype.recycle = function () {
        if (this._length !== this._maxLength) {
            throw new Error('Can only recycle when the buffer is full');
        }
        this._startIndex = ++this._startIndex % this._maxLength;
        this.onTrimEmitter.fire(1);
        return this._array[this._getCyclicIndex(this._length - 1)];
    };
    Object.defineProperty(CircularList.prototype, "isFull", {
        get: function () {
            return this._length === this._maxLength;
        },
        enumerable: true,
        configurable: true
    });
    CircularList.prototype.pop = function () {
        return this._array[this._getCyclicIndex(this._length-- - 1)];
    };
    CircularList.prototype.splice = function (start, deleteCount) {
        var items = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            items[_i - 2] = arguments[_i];
        }
        if (deleteCount) {
            for (var i = start; i < this._length - deleteCount; i++) {
                this._array[this._getCyclicIndex(i)] = this._array[this._getCyclicIndex(i + deleteCount)];
            }
            this._length -= deleteCount;
        }
        for (var i = this._length - 1; i >= start; i--) {
            this._array[this._getCyclicIndex(i + items.length)] = this._array[this._getCyclicIndex(i)];
        }
        for (var i = 0; i < items.length; i++) {
            this._array[this._getCyclicIndex(start + i)] = items[i];
        }
        if (this._length + items.length > this._maxLength) {
            var countToTrim = (this._length + items.length) - this._maxLength;
            this._startIndex += countToTrim;
            this._length = this._maxLength;
            this.onTrimEmitter.fire(countToTrim);
        }
        else {
            this._length += items.length;
        }
    };
    CircularList.prototype.trimStart = function (count) {
        if (count > this._length) {
            count = this._length;
        }
        this._startIndex += count;
        this._length -= count;
        this.onTrimEmitter.fire(count);
    };
    CircularList.prototype.shiftElements = function (start, count, offset) {
        if (count <= 0) {
            return;
        }
        if (start < 0 || start >= this._length) {
            throw new Error('start argument out of range');
        }
        if (start + offset < 0) {
            throw new Error('Cannot shift elements in list beyond index 0');
        }
        if (offset > 0) {
            for (var i = count - 1; i >= 0; i--) {
                this.set(start + i + offset, this.get(start + i));
            }
            var expandListBy = (start + count + offset) - this._length;
            if (expandListBy > 0) {
                this._length += expandListBy;
                while (this._length > this._maxLength) {
                    this._length--;
                    this._startIndex++;
                    this.onTrimEmitter.fire(1);
                }
            }
        }
        else {
            for (var i = 0; i < count; i++) {
                this.set(start + i + offset, this.get(start + i));
            }
        }
    };
    CircularList.prototype._getCyclicIndex = function (index) {
        return (this._startIndex + index) % this._maxLength;
    };
    return CircularList;
}());
exports.CircularList = CircularList;


/***/ }),

/***/ "./out/common/Clone.js":
/*!*****************************!*\
  !*** ./out/common/Clone.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function clone(val, depth) {
    if (depth === void 0) { depth = 5; }
    if (typeof val !== 'object') {
        return val;
    }
    var clonedObject = Array.isArray(val) ? [] : {};
    for (var key in val) {
        clonedObject[key] = depth <= 1 ? val[key] : (val[key] ? clone(val[key], depth - 1) : val[key]);
    }
    return clonedObject;
}
exports.clone = clone;


/***/ }),

/***/ "./out/common/EventEmitter.js":
/*!************************************!*\
  !*** ./out/common/EventEmitter.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter = (function () {
    function EventEmitter() {
        this._listeners = [];
    }
    Object.defineProperty(EventEmitter.prototype, "event", {
        get: function () {
            var _this = this;
            if (!this._event) {
                this._event = function (listener) {
                    _this._listeners.push(listener);
                    var disposable = {
                        dispose: function () {
                            for (var i = 0; i < _this._listeners.length; i++) {
                                if (_this._listeners[i] === listener) {
                                    _this._listeners.splice(i, 1);
                                    return;
                                }
                            }
                        }
                    };
                    return disposable;
                };
            }
            return this._event;
        },
        enumerable: true,
        configurable: true
    });
    EventEmitter.prototype.fire = function (data) {
        var queue = [];
        for (var i = 0; i < this._listeners.length; i++) {
            queue.push(this._listeners[i]);
        }
        for (var i = 0; i < queue.length; i++) {
            queue[i].call(undefined, data);
        }
    };
    return EventEmitter;
}());
exports.EventEmitter = EventEmitter;


/***/ }),

/***/ "./out/common/Lifecycle.js":
/*!*********************************!*\
  !*** ./out/common/Lifecycle.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Disposable = (function () {
    function Disposable() {
        this._disposables = [];
        this._isDisposed = false;
    }
    Disposable.prototype.dispose = function () {
        this._isDisposed = true;
        this._disposables.forEach(function (d) { return d.dispose(); });
        this._disposables.length = 0;
    };
    Disposable.prototype.register = function (d) {
        this._disposables.push(d);
    };
    Disposable.prototype.unregister = function (d) {
        var index = this._disposables.indexOf(d);
        if (index !== -1) {
            this._disposables.splice(index, 1);
        }
    };
    return Disposable;
}());
exports.Disposable = Disposable;


/***/ }),

/***/ "./out/common/Platform.js":
/*!********************************!*\
  !*** ./out/common/Platform.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var isNode = (typeof navigator === 'undefined') ? true : false;
var userAgent = (isNode) ? 'node' : navigator.userAgent;
var platform = (isNode) ? 'node' : navigator.platform;
exports.isFirefox = !!~userAgent.indexOf('Firefox');
exports.isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);
exports.isMac = contains(['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], platform);
exports.isIpad = platform === 'iPad';
exports.isIphone = platform === 'iPhone';
exports.isWindows = contains(['Windows', 'Win16', 'Win32', 'WinCE'], platform);
exports.isLinux = platform.indexOf('Linux') >= 0;
function contains(arr, el) {
    return arr.indexOf(el) >= 0;
}


/***/ }),

/***/ "./out/common/TypedArrayUtils.js":
/*!***************************************!*\
  !*** ./out/common/TypedArrayUtils.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function fill(array, value, start, end) {
    if (array.fill) {
        return array.fill(value, start, end);
    }
    return fillFallback(array, value, start, end);
}
exports.fill = fill;
function fillFallback(array, value, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = array.length; }
    if (start >= array.length) {
        return array;
    }
    start = (array.length + start) % array.length;
    if (end >= array.length) {
        end = array.length;
    }
    else {
        end = (array.length + end) % array.length;
    }
    for (var i = start; i < end; ++i) {
        array[i] = value;
    }
    return array;
}
exports.fillFallback = fillFallback;
function concat(a, b) {
    var result = new a.constructor(a.length + b.length);
    result.set(a);
    result.set(b, a.length);
    return result;
}
exports.concat = concat;


/***/ }),

/***/ "./out/common/buffer/AttributeData.js":
/*!********************************************!*\
  !*** ./out/common/buffer/AttributeData.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AttributeData = (function () {
    function AttributeData() {
        this.fg = 0;
        this.bg = 0;
    }
    AttributeData.toColorRGB = function (value) {
        return [
            value >>> 16 & 255,
            value >>> 8 & 255,
            value & 255
        ];
    };
    AttributeData.fromColorRGB = function (value) {
        return (value[0] & 255) << 16 | (value[1] & 255) << 8 | value[2] & 255;
    };
    AttributeData.prototype.clone = function () {
        var newObj = new AttributeData();
        newObj.fg = this.fg;
        newObj.bg = this.bg;
        return newObj;
    };
    AttributeData.prototype.isInverse = function () { return this.fg & 67108864; };
    AttributeData.prototype.isBold = function () { return this.fg & 134217728; };
    AttributeData.prototype.isUnderline = function () { return this.fg & 268435456; };
    AttributeData.prototype.isBlink = function () { return this.fg & 536870912; };
    AttributeData.prototype.isInvisible = function () { return this.fg & 1073741824; };
    AttributeData.prototype.isItalic = function () { return this.bg & 67108864; };
    AttributeData.prototype.isDim = function () { return this.bg & 134217728; };
    AttributeData.prototype.getFgColorMode = function () { return this.fg & 50331648; };
    AttributeData.prototype.getBgColorMode = function () { return this.bg & 50331648; };
    AttributeData.prototype.isFgRGB = function () { return (this.fg & 50331648) === 50331648; };
    AttributeData.prototype.isBgRGB = function () { return (this.bg & 50331648) === 50331648; };
    AttributeData.prototype.isFgPalette = function () { return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432; };
    AttributeData.prototype.isBgPalette = function () { return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432; };
    AttributeData.prototype.isFgDefault = function () { return (this.fg & 50331648) === 0; };
    AttributeData.prototype.isBgDefault = function () { return (this.bg & 50331648) === 0; };
    AttributeData.prototype.getFgColor = function () {
        switch (this.fg & 50331648) {
            case 16777216:
            case 33554432: return this.fg & 255;
            case 50331648: return this.fg & 16777215;
            default: return -1;
        }
    };
    AttributeData.prototype.getBgColor = function () {
        switch (this.bg & 50331648) {
            case 16777216:
            case 33554432: return this.bg & 255;
            case 50331648: return this.bg & 16777215;
            default: return -1;
        }
    };
    return AttributeData;
}());
exports.AttributeData = AttributeData;


/***/ }),

/***/ "./out/common/buffer/Buffer.js":
/*!*************************************!*\
  !*** ./out/common/buffer/Buffer.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CircularList_1 = __webpack_require__(/*! common/CircularList */ "./out/common/CircularList.js");
var BufferLine_1 = __webpack_require__(/*! common/buffer/BufferLine */ "./out/common/buffer/BufferLine.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var BufferReflow_1 = __webpack_require__(/*! common/buffer/BufferReflow */ "./out/common/buffer/BufferReflow.js");
var Marker_1 = __webpack_require__(/*! common/buffer/Marker */ "./out/common/buffer/Marker.js");
var Charsets_1 = __webpack_require__(/*! common/data/Charsets */ "./out/common/data/Charsets.js");
exports.MAX_BUFFER_SIZE = 4294967295;
var Buffer = (function () {
    function Buffer(_hasScrollback, _optionsService, _bufferService) {
        this._hasScrollback = _hasScrollback;
        this._optionsService = _optionsService;
        this._bufferService = _bufferService;
        this.ydisp = 0;
        this.ybase = 0;
        this.y = 0;
        this.x = 0;
        this.savedY = 0;
        this.savedX = 0;
        this.savedCurAttrData = BufferLine_1.DEFAULT_ATTR_DATA.clone();
        this.savedCharset = Charsets_1.DEFAULT_CHARSET;
        this.markers = [];
        this._nullCell = CellData_1.CellData.fromCharData([0, Constants_1.NULL_CELL_CHAR, Constants_1.NULL_CELL_WIDTH, Constants_1.NULL_CELL_CODE]);
        this._whitespaceCell = CellData_1.CellData.fromCharData([0, Constants_1.WHITESPACE_CELL_CHAR, Constants_1.WHITESPACE_CELL_WIDTH, Constants_1.WHITESPACE_CELL_CODE]);
        this._cols = this._bufferService.cols;
        this._rows = this._bufferService.rows;
        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));
        this.scrollTop = 0;
        this.scrollBottom = this._rows - 1;
        this.setupTabStops();
    }
    Buffer.prototype.getNullCell = function (attr) {
        if (attr) {
            this._nullCell.fg = attr.fg;
            this._nullCell.bg = attr.bg;
        }
        else {
            this._nullCell.fg = 0;
            this._nullCell.bg = 0;
        }
        return this._nullCell;
    };
    Buffer.prototype.getWhitespaceCell = function (attr) {
        if (attr) {
            this._whitespaceCell.fg = attr.fg;
            this._whitespaceCell.bg = attr.bg;
        }
        else {
            this._whitespaceCell.fg = 0;
            this._whitespaceCell.bg = 0;
        }
        return this._whitespaceCell;
    };
    Buffer.prototype.getBlankLine = function (attr, isWrapped) {
        return new BufferLine_1.BufferLine(this._bufferService.cols, this.getNullCell(attr), isWrapped);
    };
    Object.defineProperty(Buffer.prototype, "hasScrollback", {
        get: function () {
            return this._hasScrollback && this.lines.maxLength > this._rows;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Buffer.prototype, "isCursorInViewport", {
        get: function () {
            var absoluteY = this.ybase + this.y;
            var relativeY = absoluteY - this.ydisp;
            return (relativeY >= 0 && relativeY < this._rows);
        },
        enumerable: true,
        configurable: true
    });
    Buffer.prototype._getCorrectBufferLength = function (rows) {
        if (!this._hasScrollback) {
            return rows;
        }
        var correctBufferLength = rows + this._optionsService.options.scrollback;
        return correctBufferLength > exports.MAX_BUFFER_SIZE ? exports.MAX_BUFFER_SIZE : correctBufferLength;
    };
    Buffer.prototype.fillViewportRows = function (fillAttr) {
        if (this.lines.length === 0) {
            if (fillAttr === undefined) {
                fillAttr = BufferLine_1.DEFAULT_ATTR_DATA;
            }
            var i = this._rows;
            while (i--) {
                this.lines.push(this.getBlankLine(fillAttr));
            }
        }
    };
    Buffer.prototype.clear = function () {
        this.ydisp = 0;
        this.ybase = 0;
        this.y = 0;
        this.x = 0;
        this.lines = new CircularList_1.CircularList(this._getCorrectBufferLength(this._rows));
        this.scrollTop = 0;
        this.scrollBottom = this._rows - 1;
        this.setupTabStops();
    };
    Buffer.prototype.resize = function (newCols, newRows) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var newMaxLength = this._getCorrectBufferLength(newRows);
        if (newMaxLength > this.lines.maxLength) {
            this.lines.maxLength = newMaxLength;
        }
        if (this.lines.length > 0) {
            if (this._cols < newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
            var addToY = 0;
            if (this._rows < newRows) {
                for (var y = this._rows; y < newRows; y++) {
                    if (this.lines.length < newRows + this.ybase) {
                        if (this.ybase > 0 && this.lines.length <= this.ybase + this.y + addToY + 1) {
                            this.ybase--;
                            addToY++;
                            if (this.ydisp > 0) {
                                this.ydisp--;
                            }
                        }
                        else {
                            this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                        }
                    }
                }
            }
            else {
                for (var y = this._rows; y > newRows; y--) {
                    if (this.lines.length > newRows + this.ybase) {
                        if (this.lines.length > this.ybase + this.y + 1) {
                            this.lines.pop();
                        }
                        else {
                            this.ybase++;
                            this.ydisp++;
                        }
                    }
                }
            }
            if (newMaxLength < this.lines.maxLength) {
                var amountToTrim = this.lines.length - newMaxLength;
                if (amountToTrim > 0) {
                    this.lines.trimStart(amountToTrim);
                    this.ybase = Math.max(this.ybase - amountToTrim, 0);
                    this.ydisp = Math.max(this.ydisp - amountToTrim, 0);
                    this.savedY = Math.max(this.savedY - amountToTrim, 0);
                }
                this.lines.maxLength = newMaxLength;
            }
            this.x = Math.min(this.x, newCols - 1);
            this.y = Math.min(this.y, newRows - 1);
            if (addToY) {
                this.y += addToY;
            }
            this.savedX = Math.min(this.savedX, newCols - 1);
            this.scrollTop = 0;
        }
        this.scrollBottom = newRows - 1;
        if (this._isReflowEnabled) {
            this._reflow(newCols, newRows);
            if (this._cols > newCols) {
                for (var i = 0; i < this.lines.length; i++) {
                    this.lines.get(i).resize(newCols, nullCell);
                }
            }
        }
        this._cols = newCols;
        this._rows = newRows;
    };
    Object.defineProperty(Buffer.prototype, "_isReflowEnabled", {
        get: function () {
            return this._hasScrollback && !this._optionsService.options.windowsMode;
        },
        enumerable: true,
        configurable: true
    });
    Buffer.prototype._reflow = function (newCols, newRows) {
        if (this._cols === newCols) {
            return;
        }
        if (newCols > this._cols) {
            this._reflowLarger(newCols, newRows);
        }
        else {
            this._reflowSmaller(newCols, newRows);
        }
    };
    Buffer.prototype._reflowLarger = function (newCols, newRows) {
        var toRemove = BufferReflow_1.reflowLargerGetLinesToRemove(this.lines, this._cols, newCols, this.ybase + this.y, this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA));
        if (toRemove.length > 0) {
            var newLayoutResult = BufferReflow_1.reflowLargerCreateNewLayout(this.lines, toRemove);
            BufferReflow_1.reflowLargerApplyNewLayout(this.lines, newLayoutResult.layout);
            this._reflowLargerAdjustViewport(newCols, newRows, newLayoutResult.countRemoved);
        }
    };
    Buffer.prototype._reflowLargerAdjustViewport = function (newCols, newRows, countRemoved) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var viewportAdjustments = countRemoved;
        while (viewportAdjustments-- > 0) {
            if (this.ybase === 0) {
                if (this.y > 0) {
                    this.y--;
                }
                if (this.lines.length < newRows) {
                    this.lines.push(new BufferLine_1.BufferLine(newCols, nullCell));
                }
            }
            else {
                if (this.ydisp === this.ybase) {
                    this.ydisp--;
                }
                this.ybase--;
            }
        }
        this.savedY = Math.max(this.savedY - countRemoved, 0);
    };
    Buffer.prototype._reflowSmaller = function (newCols, newRows) {
        var nullCell = this.getNullCell(BufferLine_1.DEFAULT_ATTR_DATA);
        var toInsert = [];
        var countToInsert = 0;
        for (var y = this.lines.length - 1; y >= 0; y--) {
            var nextLine = this.lines.get(y);
            if (!nextLine || !nextLine.isWrapped && nextLine.getTrimmedLength() <= newCols) {
                continue;
            }
            var wrappedLines = [nextLine];
            while (nextLine.isWrapped && y > 0) {
                nextLine = this.lines.get(--y);
                wrappedLines.unshift(nextLine);
            }
            var absoluteY = this.ybase + this.y;
            if (absoluteY >= y && absoluteY < y + wrappedLines.length) {
                continue;
            }
            var lastLineLength = wrappedLines[wrappedLines.length - 1].getTrimmedLength();
            var destLineLengths = BufferReflow_1.reflowSmallerGetNewLineLengths(wrappedLines, this._cols, newCols);
            var linesToAdd = destLineLengths.length - wrappedLines.length;
            var trimmedLines = void 0;
            if (this.ybase === 0 && this.y !== this.lines.length - 1) {
                trimmedLines = Math.max(0, this.y - this.lines.maxLength + linesToAdd);
            }
            else {
                trimmedLines = Math.max(0, this.lines.length - this.lines.maxLength + linesToAdd);
            }
            var newLines = [];
            for (var i = 0; i < linesToAdd; i++) {
                var newLine = this.getBlankLine(BufferLine_1.DEFAULT_ATTR_DATA, true);
                newLines.push(newLine);
            }
            if (newLines.length > 0) {
                toInsert.push({
                    start: y + wrappedLines.length + countToInsert,
                    newLines: newLines
                });
                countToInsert += newLines.length;
            }
            wrappedLines.push.apply(wrappedLines, newLines);
            var destLineIndex = destLineLengths.length - 1;
            var destCol = destLineLengths[destLineIndex];
            if (destCol === 0) {
                destLineIndex--;
                destCol = destLineLengths[destLineIndex];
            }
            var srcLineIndex = wrappedLines.length - linesToAdd - 1;
            var srcCol = lastLineLength;
            while (srcLineIndex >= 0) {
                var cellsToCopy = Math.min(srcCol, destCol);
                wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol - cellsToCopy, destCol - cellsToCopy, cellsToCopy, true);
                destCol -= cellsToCopy;
                if (destCol === 0) {
                    destLineIndex--;
                    destCol = destLineLengths[destLineIndex];
                }
                srcCol -= cellsToCopy;
                if (srcCol === 0) {
                    srcLineIndex--;
                    var wrappedLinesIndex = Math.max(srcLineIndex, 0);
                    srcCol = BufferReflow_1.getWrappedLineTrimmedLength(wrappedLines, wrappedLinesIndex, this._cols);
                }
            }
            for (var i = 0; i < wrappedLines.length; i++) {
                if (destLineLengths[i] < newCols) {
                    wrappedLines[i].setCell(destLineLengths[i], nullCell);
                }
            }
            var viewportAdjustments = linesToAdd - trimmedLines;
            while (viewportAdjustments-- > 0) {
                if (this.ybase === 0) {
                    if (this.y < newRows - 1) {
                        this.y++;
                        this.lines.pop();
                    }
                    else {
                        this.ybase++;
                        this.ydisp++;
                    }
                }
                else {
                    if (this.ybase < Math.min(this.lines.maxLength, this.lines.length + countToInsert) - newRows) {
                        if (this.ybase === this.ydisp) {
                            this.ydisp++;
                        }
                        this.ybase++;
                    }
                }
            }
            this.savedY = Math.min(this.savedY + linesToAdd, this.ybase + newRows - 1);
        }
        if (toInsert.length > 0) {
            var insertEvents = [];
            var originalLines = [];
            for (var i = 0; i < this.lines.length; i++) {
                originalLines.push(this.lines.get(i));
            }
            var originalLinesLength = this.lines.length;
            var originalLineIndex = originalLinesLength - 1;
            var nextToInsertIndex = 0;
            var nextToInsert = toInsert[nextToInsertIndex];
            this.lines.length = Math.min(this.lines.maxLength, this.lines.length + countToInsert);
            var countInsertedSoFar = 0;
            for (var i = Math.min(this.lines.maxLength - 1, originalLinesLength + countToInsert - 1); i >= 0; i--) {
                if (nextToInsert && nextToInsert.start > originalLineIndex + countInsertedSoFar) {
                    for (var nextI = nextToInsert.newLines.length - 1; nextI >= 0; nextI--) {
                        this.lines.set(i--, nextToInsert.newLines[nextI]);
                    }
                    i++;
                    insertEvents.push({
                        index: originalLineIndex + 1,
                        amount: nextToInsert.newLines.length
                    });
                    countInsertedSoFar += nextToInsert.newLines.length;
                    nextToInsert = toInsert[++nextToInsertIndex];
                }
                else {
                    this.lines.set(i, originalLines[originalLineIndex--]);
                }
            }
            var insertCountEmitted = 0;
            for (var i = insertEvents.length - 1; i >= 0; i--) {
                insertEvents[i].index += insertCountEmitted;
                this.lines.onInsertEmitter.fire(insertEvents[i]);
                insertCountEmitted += insertEvents[i].amount;
            }
            var amountToTrim = Math.max(0, originalLinesLength + countToInsert - this.lines.maxLength);
            if (amountToTrim > 0) {
                this.lines.onTrimEmitter.fire(amountToTrim);
            }
        }
    };
    Buffer.prototype.stringIndexToBufferIndex = function (lineIndex, stringIndex, trimRight) {
        if (trimRight === void 0) { trimRight = false; }
        while (stringIndex) {
            var line = this.lines.get(lineIndex);
            if (!line) {
                return [-1, -1];
            }
            var length = (trimRight) ? line.getTrimmedLength() : line.length;
            for (var i = 0; i < length; ++i) {
                if (line.get(i)[Constants_1.CHAR_DATA_WIDTH_INDEX]) {
                    stringIndex -= line.get(i)[Constants_1.CHAR_DATA_CHAR_INDEX].length || 1;
                }
                if (stringIndex < 0) {
                    return [lineIndex, i];
                }
            }
            lineIndex++;
        }
        return [lineIndex, 0];
    };
    Buffer.prototype.translateBufferLineToString = function (lineIndex, trimRight, startCol, endCol) {
        if (startCol === void 0) { startCol = 0; }
        var line = this.lines.get(lineIndex);
        if (!line) {
            return '';
        }
        return line.translateToString(trimRight, startCol, endCol);
    };
    Buffer.prototype.getWrappedRangeForLine = function (y) {
        var first = y;
        var last = y;
        while (first > 0 && this.lines.get(first).isWrapped) {
            first--;
        }
        while (last + 1 < this.lines.length && this.lines.get(last + 1).isWrapped) {
            last++;
        }
        return { first: first, last: last };
    };
    Buffer.prototype.setupTabStops = function (i) {
        if (i !== null && i !== undefined) {
            if (!this.tabs[i]) {
                i = this.prevStop(i);
            }
        }
        else {
            this.tabs = {};
            i = 0;
        }
        for (; i < this._cols; i += this._optionsService.options.tabStopWidth) {
            this.tabs[i] = true;
        }
    };
    Buffer.prototype.prevStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[--x] && x > 0)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.nextStop = function (x) {
        if (x === null || x === undefined) {
            x = this.x;
        }
        while (!this.tabs[++x] && x < this._cols)
            ;
        return x >= this._cols ? this._cols - 1 : x < 0 ? 0 : x;
    };
    Buffer.prototype.addMarker = function (y) {
        var _this = this;
        var marker = new Marker_1.Marker(y);
        this.markers.push(marker);
        marker.register(this.lines.onTrim(function (amount) {
            marker.line -= amount;
            if (marker.line < 0) {
                marker.dispose();
            }
        }));
        marker.register(this.lines.onInsert(function (event) {
            if (marker.line >= event.index) {
                marker.line += event.amount;
            }
        }));
        marker.register(this.lines.onDelete(function (event) {
            if (marker.line >= event.index && marker.line < event.index + event.amount) {
                marker.dispose();
            }
            if (marker.line > event.index) {
                marker.line -= event.amount;
            }
        }));
        marker.register(marker.onDispose(function () { return _this._removeMarker(marker); }));
        return marker;
    };
    Buffer.prototype._removeMarker = function (marker) {
        this.markers.splice(this.markers.indexOf(marker), 1);
    };
    Buffer.prototype.iterator = function (trimRight, startIndex, endIndex, startOverscan, endOverscan) {
        return new BufferStringIterator(this, trimRight, startIndex, endIndex, startOverscan, endOverscan);
    };
    return Buffer;
}());
exports.Buffer = Buffer;
var BufferStringIterator = (function () {
    function BufferStringIterator(_buffer, _trimRight, _startIndex, _endIndex, _startOverscan, _endOverscan) {
        if (_startIndex === void 0) { _startIndex = 0; }
        if (_endIndex === void 0) { _endIndex = _buffer.lines.length; }
        if (_startOverscan === void 0) { _startOverscan = 0; }
        if (_endOverscan === void 0) { _endOverscan = 0; }
        this._buffer = _buffer;
        this._trimRight = _trimRight;
        this._startIndex = _startIndex;
        this._endIndex = _endIndex;
        this._startOverscan = _startOverscan;
        this._endOverscan = _endOverscan;
        if (this._startIndex < 0) {
            this._startIndex = 0;
        }
        if (this._endIndex > this._buffer.lines.length) {
            this._endIndex = this._buffer.lines.length;
        }
        this._current = this._startIndex;
    }
    BufferStringIterator.prototype.hasNext = function () {
        return this._current < this._endIndex;
    };
    BufferStringIterator.prototype.next = function () {
        var range = this._buffer.getWrappedRangeForLine(this._current);
        if (range.first < this._startIndex - this._startOverscan) {
            range.first = this._startIndex - this._startOverscan;
        }
        if (range.last > this._endIndex + this._endOverscan) {
            range.last = this._endIndex + this._endOverscan;
        }
        range.first = Math.max(range.first, 0);
        range.last = Math.min(range.last, this._buffer.lines.length);
        var result = '';
        for (var i = range.first; i <= range.last; ++i) {
            result += this._buffer.translateBufferLineToString(i, this._trimRight);
        }
        this._current = range.last + 1;
        return { range: range, content: result };
    };
    return BufferStringIterator;
}());
exports.BufferStringIterator = BufferStringIterator;


/***/ }),

/***/ "./out/common/buffer/BufferLine.js":
/*!*****************************************!*\
  !*** ./out/common/buffer/BufferLine.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var CELL_SIZE = 3;
exports.DEFAULT_ATTR_DATA = Object.freeze(new AttributeData_1.AttributeData());
var BufferLine = (function () {
    function BufferLine(cols, fillCellData, isWrapped) {
        if (isWrapped === void 0) { isWrapped = false; }
        this.isWrapped = isWrapped;
        this._combined = {};
        this._data = new Uint32Array(cols * CELL_SIZE);
        var cell = fillCellData || CellData_1.CellData.fromCharData([0, Constants_1.NULL_CELL_CHAR, Constants_1.NULL_CELL_WIDTH, Constants_1.NULL_CELL_CODE]);
        for (var i = 0; i < cols; ++i) {
            this.setCell(i, cell);
        }
        this.length = cols;
    }
    BufferLine.prototype.get = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        var cp = content & 2097151;
        return [
            this._data[index * CELL_SIZE + 1],
            (content & 2097152)
                ? this._combined[index]
                : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : '',
            content >> 22,
            (content & 2097152)
                ? this._combined[index].charCodeAt(this._combined[index].length - 1)
                : cp
        ];
    };
    BufferLine.prototype.set = function (index, value) {
        this._data[index * CELL_SIZE + 1] = value[Constants_1.CHAR_DATA_ATTR_INDEX];
        if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length > 1) {
            this._combined[index] = value[1];
            this._data[index * CELL_SIZE + 0] = index | 2097152 | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        else {
            this._data[index * CELL_SIZE + 0] = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    BufferLine.prototype.getWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] >> 22;
    };
    BufferLine.prototype.hasWidth = function (index) {
        return this._data[index * CELL_SIZE + 0] & 12582912;
    };
    BufferLine.prototype.getFg = function (index) {
        return this._data[index * CELL_SIZE + 1];
    };
    BufferLine.prototype.getBg = function (index) {
        return this._data[index * CELL_SIZE + 2];
    };
    BufferLine.prototype.hasContent = function (index) {
        return this._data[index * CELL_SIZE + 0] & 4194303;
    };
    BufferLine.prototype.getCodePoint = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index].charCodeAt(this._combined[index].length - 1);
        }
        return content & 2097151;
    };
    BufferLine.prototype.isCombined = function (index) {
        return this._data[index * CELL_SIZE + 0] & 2097152;
    };
    BufferLine.prototype.getString = function (index) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            return this._combined[index];
        }
        if (content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(content & 2097151);
        }
        return '';
    };
    BufferLine.prototype.loadCell = function (index, cell) {
        var startIndex = index * CELL_SIZE;
        cell.content = this._data[startIndex + 0];
        cell.fg = this._data[startIndex + 1];
        cell.bg = this._data[startIndex + 2];
        if (cell.content & 2097152) {
            cell.combinedData = this._combined[index];
        }
        return cell;
    };
    BufferLine.prototype.setCell = function (index, cell) {
        if (cell.content & 2097152) {
            this._combined[index] = cell.combinedData;
        }
        this._data[index * CELL_SIZE + 0] = cell.content;
        this._data[index * CELL_SIZE + 1] = cell.fg;
        this._data[index * CELL_SIZE + 2] = cell.bg;
    };
    BufferLine.prototype.setCellFromCodePoint = function (index, codePoint, width, fg, bg) {
        this._data[index * CELL_SIZE + 0] = codePoint | (width << 22);
        this._data[index * CELL_SIZE + 1] = fg;
        this._data[index * CELL_SIZE + 2] = bg;
    };
    BufferLine.prototype.addCodepointToCell = function (index, codePoint) {
        var content = this._data[index * CELL_SIZE + 0];
        if (content & 2097152) {
            this._combined[index] += TextDecoder_1.stringFromCodePoint(codePoint);
        }
        else {
            if (content & 2097151) {
                this._combined[index] = TextDecoder_1.stringFromCodePoint(content & 2097151) + TextDecoder_1.stringFromCodePoint(codePoint);
                content &= ~2097151;
                content |= 2097152;
            }
            else {
                content = codePoint | (1 << 22);
            }
            this._data[index * CELL_SIZE + 0] = content;
        }
    };
    BufferLine.prototype.insertCells = function (pos, n, fillCellData) {
        pos %= this.length;
        if (n < this.length - pos) {
            var cell = new CellData_1.CellData();
            for (var i = this.length - pos - n - 1; i >= 0; --i) {
                this.setCell(pos + n + i, this.loadCell(pos + i, cell));
            }
            for (var i = 0; i < n; ++i) {
                this.setCell(pos + i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
    };
    BufferLine.prototype.deleteCells = function (pos, n, fillCellData) {
        pos %= this.length;
        if (n < this.length - pos) {
            var cell = new CellData_1.CellData();
            for (var i = 0; i < this.length - pos - n; ++i) {
                this.setCell(pos + i, this.loadCell(pos + n + i, cell));
            }
            for (var i = this.length - n; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            for (var i = pos; i < this.length; ++i) {
                this.setCell(i, fillCellData);
            }
        }
    };
    BufferLine.prototype.replaceCells = function (start, end, fillCellData) {
        while (start < end && start < this.length) {
            this.setCell(start++, fillCellData);
        }
    };
    BufferLine.prototype.resize = function (cols, fillCellData) {
        if (cols === this.length) {
            return;
        }
        if (cols > this.length) {
            var data = new Uint32Array(cols * CELL_SIZE);
            if (this.length) {
                if (cols * CELL_SIZE < this._data.length) {
                    data.set(this._data.subarray(0, cols * CELL_SIZE));
                }
                else {
                    data.set(this._data);
                }
            }
            this._data = data;
            for (var i = this.length; i < cols; ++i) {
                this.setCell(i, fillCellData);
            }
        }
        else {
            if (cols) {
                var data = new Uint32Array(cols * CELL_SIZE);
                data.set(this._data.subarray(0, cols * CELL_SIZE));
                this._data = data;
                var keys = Object.keys(this._combined);
                for (var i = 0; i < keys.length; i++) {
                    var key = parseInt(keys[i], 10);
                    if (key >= cols) {
                        delete this._combined[key];
                    }
                }
            }
            else {
                this._data = new Uint32Array(0);
                this._combined = {};
            }
        }
        this.length = cols;
    };
    BufferLine.prototype.fill = function (fillCellData) {
        this._combined = {};
        for (var i = 0; i < this.length; ++i) {
            this.setCell(i, fillCellData);
        }
    };
    BufferLine.prototype.copyFrom = function (line) {
        if (this.length !== line.length) {
            this._data = new Uint32Array(line._data);
        }
        else {
            this._data.set(line._data);
        }
        this.length = line.length;
        this._combined = {};
        for (var el in line._combined) {
            this._combined[el] = line._combined[el];
        }
        this.isWrapped = line.isWrapped;
    };
    BufferLine.prototype.clone = function () {
        var newLine = new BufferLine(0);
        newLine._data = new Uint32Array(this._data);
        newLine.length = this.length;
        for (var el in this._combined) {
            newLine._combined[el] = this._combined[el];
        }
        newLine.isWrapped = this.isWrapped;
        return newLine;
    };
    BufferLine.prototype.getTrimmedLength = function () {
        for (var i = this.length - 1; i >= 0; --i) {
            if ((this._data[i * CELL_SIZE + 0] & 4194303)) {
                return i + (this._data[i * CELL_SIZE + 0] >> 22);
            }
        }
        return 0;
    };
    BufferLine.prototype.copyCellsFrom = function (src, srcCol, destCol, length, applyInReverse) {
        var srcData = src._data;
        if (applyInReverse) {
            for (var cell = length - 1; cell >= 0; cell--) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        else {
            for (var cell = 0; cell < length; cell++) {
                for (var i = 0; i < CELL_SIZE; i++) {
                    this._data[(destCol + cell) * CELL_SIZE + i] = srcData[(srcCol + cell) * CELL_SIZE + i];
                }
            }
        }
        var srcCombinedKeys = Object.keys(src._combined);
        for (var i = 0; i < srcCombinedKeys.length; i++) {
            var key = parseInt(srcCombinedKeys[i], 10);
            if (key >= srcCol) {
                this._combined[key - srcCol + destCol] = src._combined[key];
            }
        }
    };
    BufferLine.prototype.translateToString = function (trimRight, startCol, endCol) {
        if (trimRight === void 0) { trimRight = false; }
        if (startCol === void 0) { startCol = 0; }
        if (endCol === void 0) { endCol = this.length; }
        if (trimRight) {
            endCol = Math.min(endCol, this.getTrimmedLength());
        }
        var result = '';
        while (startCol < endCol) {
            var content = this._data[startCol * CELL_SIZE + 0];
            var cp = content & 2097151;
            result += (content & 2097152) ? this._combined[startCol] : (cp) ? TextDecoder_1.stringFromCodePoint(cp) : Constants_1.WHITESPACE_CELL_CHAR;
            startCol += (content >> 22) || 1;
        }
        return result;
    };
    return BufferLine;
}());
exports.BufferLine = BufferLine;


/***/ }),

/***/ "./out/common/buffer/BufferReflow.js":
/*!*******************************************!*\
  !*** ./out/common/buffer/BufferReflow.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function reflowLargerGetLinesToRemove(lines, oldCols, newCols, bufferAbsoluteY, nullCell) {
    var toRemove = [];
    for (var y = 0; y < lines.length - 1; y++) {
        var i = y;
        var nextLine = lines.get(++i);
        if (!nextLine.isWrapped) {
            continue;
        }
        var wrappedLines = [lines.get(y)];
        while (i < lines.length && nextLine.isWrapped) {
            wrappedLines.push(nextLine);
            nextLine = lines.get(++i);
        }
        if (bufferAbsoluteY >= y && bufferAbsoluteY < i) {
            y += wrappedLines.length - 1;
            continue;
        }
        var destLineIndex = 0;
        var destCol = getWrappedLineTrimmedLength(wrappedLines, destLineIndex, oldCols);
        var srcLineIndex = 1;
        var srcCol = 0;
        while (srcLineIndex < wrappedLines.length) {
            var srcTrimmedTineLength = getWrappedLineTrimmedLength(wrappedLines, srcLineIndex, oldCols);
            var srcRemainingCells = srcTrimmedTineLength - srcCol;
            var destRemainingCells = newCols - destCol;
            var cellsToCopy = Math.min(srcRemainingCells, destRemainingCells);
            wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[srcLineIndex], srcCol, destCol, cellsToCopy, false);
            destCol += cellsToCopy;
            if (destCol === newCols) {
                destLineIndex++;
                destCol = 0;
            }
            srcCol += cellsToCopy;
            if (srcCol === srcTrimmedTineLength) {
                srcLineIndex++;
                srcCol = 0;
            }
            if (destCol === 0 && destLineIndex !== 0) {
                if (wrappedLines[destLineIndex - 1].getWidth(newCols - 1) === 2) {
                    wrappedLines[destLineIndex].copyCellsFrom(wrappedLines[destLineIndex - 1], newCols - 1, destCol++, 1, false);
                    wrappedLines[destLineIndex - 1].setCell(newCols - 1, nullCell);
                }
            }
        }
        wrappedLines[destLineIndex].replaceCells(destCol, newCols, nullCell);
        var countToRemove = 0;
        for (var i_1 = wrappedLines.length - 1; i_1 > 0; i_1--) {
            if (i_1 > destLineIndex || wrappedLines[i_1].getTrimmedLength() === 0) {
                countToRemove++;
            }
            else {
                break;
            }
        }
        if (countToRemove > 0) {
            toRemove.push(y + wrappedLines.length - countToRemove);
            toRemove.push(countToRemove);
        }
        y += wrappedLines.length - 1;
    }
    return toRemove;
}
exports.reflowLargerGetLinesToRemove = reflowLargerGetLinesToRemove;
function reflowLargerCreateNewLayout(lines, toRemove) {
    var layout = [];
    var nextToRemoveIndex = 0;
    var nextToRemoveStart = toRemove[nextToRemoveIndex];
    var countRemovedSoFar = 0;
    for (var i = 0; i < lines.length; i++) {
        if (nextToRemoveStart === i) {
            var countToRemove = toRemove[++nextToRemoveIndex];
            lines.onDeleteEmitter.fire({
                index: i - countRemovedSoFar,
                amount: countToRemove
            });
            i += countToRemove - 1;
            countRemovedSoFar += countToRemove;
            nextToRemoveStart = toRemove[++nextToRemoveIndex];
        }
        else {
            layout.push(i);
        }
    }
    return {
        layout: layout,
        countRemoved: countRemovedSoFar
    };
}
exports.reflowLargerCreateNewLayout = reflowLargerCreateNewLayout;
function reflowLargerApplyNewLayout(lines, newLayout) {
    var newLayoutLines = [];
    for (var i = 0; i < newLayout.length; i++) {
        newLayoutLines.push(lines.get(newLayout[i]));
    }
    for (var i = 0; i < newLayoutLines.length; i++) {
        lines.set(i, newLayoutLines[i]);
    }
    lines.length = newLayout.length;
}
exports.reflowLargerApplyNewLayout = reflowLargerApplyNewLayout;
function reflowSmallerGetNewLineLengths(wrappedLines, oldCols, newCols) {
    var newLineLengths = [];
    var cellsNeeded = wrappedLines.map(function (l, i) { return getWrappedLineTrimmedLength(wrappedLines, i, oldCols); }).reduce(function (p, c) { return p + c; });
    var srcCol = 0;
    var srcLine = 0;
    var cellsAvailable = 0;
    while (cellsAvailable < cellsNeeded) {
        if (cellsNeeded - cellsAvailable < newCols) {
            newLineLengths.push(cellsNeeded - cellsAvailable);
            break;
        }
        srcCol += newCols;
        var oldTrimmedLength = getWrappedLineTrimmedLength(wrappedLines, srcLine, oldCols);
        if (srcCol > oldTrimmedLength) {
            srcCol -= oldTrimmedLength;
            srcLine++;
        }
        var endsWithWide = wrappedLines[srcLine].getWidth(srcCol - 1) === 2;
        if (endsWithWide) {
            srcCol--;
        }
        var lineLength = endsWithWide ? newCols - 1 : newCols;
        newLineLengths.push(lineLength);
        cellsAvailable += lineLength;
    }
    return newLineLengths;
}
exports.reflowSmallerGetNewLineLengths = reflowSmallerGetNewLineLengths;
function getWrappedLineTrimmedLength(lines, i, cols) {
    if (i === lines.length - 1) {
        return lines[i].getTrimmedLength();
    }
    var endsInNull = !(lines[i].hasContent(cols - 1)) && lines[i].getWidth(cols - 1) === 1;
    var followingLineStartsWithWide = lines[i + 1].getWidth(0) === 2;
    if (endsInNull && followingLineStartsWithWide) {
        return cols - 1;
    }
    return cols;
}
exports.getWrappedLineTrimmedLength = getWrappedLineTrimmedLength;


/***/ }),

/***/ "./out/common/buffer/BufferSet.js":
/*!****************************************!*\
  !*** ./out/common/buffer/BufferSet.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Buffer_1 = __webpack_require__(/*! common/buffer/Buffer */ "./out/common/buffer/Buffer.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var BufferSet = (function () {
    function BufferSet(optionsService, bufferService) {
        this.optionsService = optionsService;
        this.bufferService = bufferService;
        this._onBufferActivate = new EventEmitter_1.EventEmitter();
        this._normal = new Buffer_1.Buffer(true, optionsService, bufferService);
        this._normal.fillViewportRows();
        this._alt = new Buffer_1.Buffer(false, optionsService, bufferService);
        this._activeBuffer = this._normal;
        this.setupTabStops();
    }
    Object.defineProperty(BufferSet.prototype, "onBufferActivate", {
        get: function () { return this._onBufferActivate.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "alt", {
        get: function () {
            return this._alt;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "active", {
        get: function () {
            return this._activeBuffer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferSet.prototype, "normal", {
        get: function () {
            return this._normal;
        },
        enumerable: true,
        configurable: true
    });
    BufferSet.prototype.activateNormalBuffer = function () {
        if (this._activeBuffer === this._normal) {
            return;
        }
        this._normal.x = this._alt.x;
        this._normal.y = this._alt.y;
        this._alt.clear();
        this._activeBuffer = this._normal;
        this._onBufferActivate.fire({
            activeBuffer: this._normal,
            inactiveBuffer: this._alt
        });
    };
    BufferSet.prototype.activateAltBuffer = function (fillAttr) {
        if (this._activeBuffer === this._alt) {
            return;
        }
        this._alt.fillViewportRows(fillAttr);
        this._alt.x = this._normal.x;
        this._alt.y = this._normal.y;
        this._activeBuffer = this._alt;
        this._onBufferActivate.fire({
            activeBuffer: this._alt,
            inactiveBuffer: this._normal
        });
    };
    BufferSet.prototype.resize = function (newCols, newRows) {
        this._normal.resize(newCols, newRows);
        this._alt.resize(newCols, newRows);
    };
    BufferSet.prototype.setupTabStops = function (i) {
        this._normal.setupTabStops(i);
        this._alt.setupTabStops(i);
    };
    return BufferSet;
}());
exports.BufferSet = BufferSet;


/***/ }),

/***/ "./out/common/buffer/CellData.js":
/*!***************************************!*\
  !*** ./out/common/buffer/CellData.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Constants_1 = __webpack_require__(/*! common/buffer/Constants */ "./out/common/buffer/Constants.js");
var AttributeData_1 = __webpack_require__(/*! common/buffer/AttributeData */ "./out/common/buffer/AttributeData.js");
var CellData = (function (_super) {
    __extends(CellData, _super);
    function CellData() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.content = 0;
        _this.fg = 0;
        _this.bg = 0;
        _this.combinedData = '';
        return _this;
    }
    CellData.fromCharData = function (value) {
        var obj = new CellData();
        obj.setFromCharData(value);
        return obj;
    };
    CellData.prototype.isCombined = function () {
        return this.content & 2097152;
    };
    CellData.prototype.getWidth = function () {
        return this.content >> 22;
    };
    CellData.prototype.getChars = function () {
        if (this.content & 2097152) {
            return this.combinedData;
        }
        if (this.content & 2097151) {
            return TextDecoder_1.stringFromCodePoint(this.content & 2097151);
        }
        return '';
    };
    CellData.prototype.getCode = function () {
        return (this.isCombined())
            ? this.combinedData.charCodeAt(this.combinedData.length - 1)
            : this.content & 2097151;
    };
    CellData.prototype.setFromCharData = function (value) {
        this.fg = value[Constants_1.CHAR_DATA_ATTR_INDEX];
        this.bg = 0;
        var combined = false;
        if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length > 2) {
            combined = true;
        }
        else if (value[Constants_1.CHAR_DATA_CHAR_INDEX].length === 2) {
            var code = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0);
            if (0xD800 <= code && code <= 0xDBFF) {
                var second = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(1);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
                }
                else {
                    combined = true;
                }
            }
            else {
                combined = true;
            }
        }
        else {
            this.content = value[Constants_1.CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
        if (combined) {
            this.combinedData = value[Constants_1.CHAR_DATA_CHAR_INDEX];
            this.content = 2097152 | (value[Constants_1.CHAR_DATA_WIDTH_INDEX] << 22);
        }
    };
    CellData.prototype.getAsCharData = function () {
        return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
    };
    return CellData;
}(AttributeData_1.AttributeData));
exports.CellData = CellData;


/***/ }),

/***/ "./out/common/buffer/Constants.js":
/*!****************************************!*\
  !*** ./out/common/buffer/Constants.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.DEFAULT_COLOR = 256;
exports.DEFAULT_ATTR = (0 << 18) | (exports.DEFAULT_COLOR << 9) | (256 << 0);
exports.CHAR_DATA_ATTR_INDEX = 0;
exports.CHAR_DATA_CHAR_INDEX = 1;
exports.CHAR_DATA_WIDTH_INDEX = 2;
exports.CHAR_DATA_CODE_INDEX = 3;
exports.NULL_CELL_CHAR = '';
exports.NULL_CELL_WIDTH = 1;
exports.NULL_CELL_CODE = 0;
exports.WHITESPACE_CELL_CHAR = ' ';
exports.WHITESPACE_CELL_WIDTH = 1;
exports.WHITESPACE_CELL_CODE = 32;


/***/ }),

/***/ "./out/common/buffer/Marker.js":
/*!*************************************!*\
  !*** ./out/common/buffer/Marker.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var Marker = (function (_super) {
    __extends(Marker, _super);
    function Marker(line) {
        var _this = _super.call(this) || this;
        _this.line = line;
        _this._id = Marker._nextId++;
        _this.isDisposed = false;
        _this._onDispose = new EventEmitter_1.EventEmitter();
        return _this;
    }
    Object.defineProperty(Marker.prototype, "id", {
        get: function () { return this._id; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Marker.prototype, "onDispose", {
        get: function () { return this._onDispose.event; },
        enumerable: true,
        configurable: true
    });
    Marker.prototype.dispose = function () {
        if (this.isDisposed) {
            return;
        }
        this.isDisposed = true;
        this._onDispose.fire();
    };
    Marker._nextId = 1;
    return Marker;
}(Lifecycle_1.Disposable));
exports.Marker = Marker;


/***/ }),

/***/ "./out/common/data/Charsets.js":
/*!*************************************!*\
  !*** ./out/common/data/Charsets.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.CHARSETS = {};
exports.DEFAULT_CHARSET = exports.CHARSETS['B'];
exports.CHARSETS['0'] = {
    '`': '\u25c6',
    'a': '\u2592',
    'b': '\u0009',
    'c': '\u000c',
    'd': '\u000d',
    'e': '\u000a',
    'f': '\u00b0',
    'g': '\u00b1',
    'h': '\u2424',
    'i': '\u000b',
    'j': '\u2518',
    'k': '\u2510',
    'l': '\u250c',
    'm': '\u2514',
    'n': '\u253c',
    'o': '\u23ba',
    'p': '\u23bb',
    'q': '\u2500',
    'r': '\u23bc',
    's': '\u23bd',
    't': '\u251c',
    'u': '\u2524',
    'v': '\u2534',
    'w': '\u252c',
    'x': '\u2502',
    'y': '\u2264',
    'z': '\u2265',
    '{': '\u03c0',
    '|': '\u2260',
    '}': '\u00a3',
    '~': '\u00b7'
};
exports.CHARSETS['A'] = {
    '#': ''
};
exports.CHARSETS['B'] = null;
exports.CHARSETS['4'] = {
    '#': '',
    '@': '',
    '[': 'ij',
    '\\': '',
    ']': '|',
    '{': '',
    '|': 'f',
    '}': '',
    '~': ''
};
exports.CHARSETS['C'] =
    exports.CHARSETS['5'] = {
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['R'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['Q'] = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['K'] = {
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['Y'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};
exports.CHARSETS['E'] =
    exports.CHARSETS['6'] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['Z'] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '{': '',
    '|': '',
    '}': ''
};
exports.CHARSETS['H'] =
    exports.CHARSETS['7'] = {
        '@': '',
        '[': '',
        '\\': '',
        ']': '',
        '^': '',
        '`': '',
        '{': '',
        '|': '',
        '}': '',
        '~': ''
    };
exports.CHARSETS['='] = {
    '#': '',
    '@': '',
    '[': '',
    '\\': '',
    ']': '',
    '^': '',
    '_': '',
    '`': '',
    '{': '',
    '|': '',
    '}': '',
    '~': ''
};


/***/ }),

/***/ "./out/common/data/EscapeSequences.js":
/*!********************************************!*\
  !*** ./out/common/data/EscapeSequences.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var C0;
(function (C0) {
    C0.NUL = '\x00';
    C0.SOH = '\x01';
    C0.STX = '\x02';
    C0.ETX = '\x03';
    C0.EOT = '\x04';
    C0.ENQ = '\x05';
    C0.ACK = '\x06';
    C0.BEL = '\x07';
    C0.BS = '\x08';
    C0.HT = '\x09';
    C0.LF = '\x0a';
    C0.VT = '\x0b';
    C0.FF = '\x0c';
    C0.CR = '\x0d';
    C0.SO = '\x0e';
    C0.SI = '\x0f';
    C0.DLE = '\x10';
    C0.DC1 = '\x11';
    C0.DC2 = '\x12';
    C0.DC3 = '\x13';
    C0.DC4 = '\x14';
    C0.NAK = '\x15';
    C0.SYN = '\x16';
    C0.ETB = '\x17';
    C0.CAN = '\x18';
    C0.EM = '\x19';
    C0.SUB = '\x1a';
    C0.ESC = '\x1b';
    C0.FS = '\x1c';
    C0.GS = '\x1d';
    C0.RS = '\x1e';
    C0.US = '\x1f';
    C0.SP = '\x20';
    C0.DEL = '\x7f';
})(C0 = exports.C0 || (exports.C0 = {}));
var C1;
(function (C1) {
    C1.PAD = '\x80';
    C1.HOP = '\x81';
    C1.BPH = '\x82';
    C1.NBH = '\x83';
    C1.IND = '\x84';
    C1.NEL = '\x85';
    C1.SSA = '\x86';
    C1.ESA = '\x87';
    C1.HTS = '\x88';
    C1.HTJ = '\x89';
    C1.VTS = '\x8a';
    C1.PLD = '\x8b';
    C1.PLU = '\x8c';
    C1.RI = '\x8d';
    C1.SS2 = '\x8e';
    C1.SS3 = '\x8f';
    C1.DCS = '\x90';
    C1.PU1 = '\x91';
    C1.PU2 = '\x92';
    C1.STS = '\x93';
    C1.CCH = '\x94';
    C1.MW = '\x95';
    C1.SPA = '\x96';
    C1.EPA = '\x97';
    C1.SOS = '\x98';
    C1.SGCI = '\x99';
    C1.SCI = '\x9a';
    C1.CSI = '\x9b';
    C1.ST = '\x9c';
    C1.OSC = '\x9d';
    C1.PM = '\x9e';
    C1.APC = '\x9f';
})(C1 = exports.C1 || (exports.C1 = {}));


/***/ }),

/***/ "./out/common/input/Keyboard.js":
/*!**************************************!*\
  !*** ./out/common/input/Keyboard.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EscapeSequences_1 = __webpack_require__(/*! common/data/EscapeSequences */ "./out/common/data/EscapeSequences.js");
var KEYCODE_KEY_MAPPINGS = {
    48: ['0', ')'],
    49: ['1', '!'],
    50: ['2', '@'],
    51: ['3', '#'],
    52: ['4', '$'],
    53: ['5', '%'],
    54: ['6', '^'],
    55: ['7', '&'],
    56: ['8', '*'],
    57: ['9', '('],
    186: [';', ':'],
    187: ['=', '+'],
    188: [',', '<'],
    189: ['-', '_'],
    190: ['.', '>'],
    191: ['/', '?'],
    192: ['`', '~'],
    219: ['[', '{'],
    220: ['\\', '|'],
    221: [']', '}'],
    222: ['\'', '"']
};
function evaluateKeyboardEvent(ev, applicationCursorMode, isMac, macOptionIsMeta) {
    var result = {
        type: 0,
        cancel: false,
        key: undefined
    };
    var modifiers = (ev.shiftKey ? 1 : 0) | (ev.altKey ? 2 : 0) | (ev.ctrlKey ? 4 : 0) | (ev.metaKey ? 8 : 0);
    switch (ev.keyCode) {
        case 0:
            if (ev.key === 'UIKeyInputUpArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OA';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[A';
                }
            }
            else if (ev.key === 'UIKeyInputLeftArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OD';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[D';
                }
            }
            else if (ev.key === 'UIKeyInputRightArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OC';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[C';
                }
            }
            else if (ev.key === 'UIKeyInputDownArrow') {
                if (applicationCursorMode) {
                    result.key = EscapeSequences_1.C0.ESC + 'OB';
                }
                else {
                    result.key = EscapeSequences_1.C0.ESC + '[B';
                }
            }
            break;
        case 8:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.BS;
                break;
            }
            else if (ev.altKey) {
                result.key = EscapeSequences_1.C0.ESC + EscapeSequences_1.C0.DEL;
                break;
            }
            result.key = EscapeSequences_1.C0.DEL;
            break;
        case 9:
            if (ev.shiftKey) {
                result.key = EscapeSequences_1.C0.ESC + '[Z';
                break;
            }
            result.key = EscapeSequences_1.C0.HT;
            result.cancel = true;
            break;
        case 13:
            result.key = EscapeSequences_1.C0.CR;
            result.cancel = true;
            break;
        case 27:
            result.key = EscapeSequences_1.C0.ESC;
            result.cancel = true;
            break;
        case 37:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'D';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3D') {
                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'b' : EscapeSequences_1.C0.ESC + '[1;5D';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OD';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[D';
            }
            break;
        case 39:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'C';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3C') {
                    result.key = isMac ? EscapeSequences_1.C0.ESC + 'f' : EscapeSequences_1.C0.ESC + '[1;5C';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OC';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[C';
            }
            break;
        case 38:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'A';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3A') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5A';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OA';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[A';
            }
            break;
        case 40:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'B';
                if (result.key === EscapeSequences_1.C0.ESC + '[1;3B') {
                    result.key = EscapeSequences_1.C0.ESC + '[1;5B';
                }
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OB';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[B';
            }
            break;
        case 45:
            if (!ev.shiftKey && !ev.ctrlKey) {
                result.key = EscapeSequences_1.C0.ESC + '[2~';
            }
            break;
        case 46:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[3;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[3~';
            }
            break;
        case 36:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'H';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OH';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[H';
            }
            break;
        case 35:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'F';
            }
            else if (applicationCursorMode) {
                result.key = EscapeSequences_1.C0.ESC + 'OF';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[F';
            }
            break;
        case 33:
            if (ev.shiftKey) {
                result.type = 2;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[5~';
            }
            break;
        case 34:
            if (ev.shiftKey) {
                result.type = 3;
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[6~';
            }
            break;
        case 112:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'P';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OP';
            }
            break;
        case 113:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'Q';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OQ';
            }
            break;
        case 114:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'R';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OR';
            }
            break;
        case 115:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[1;' + (modifiers + 1) + 'S';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + 'OS';
            }
            break;
        case 116:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[15;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[15~';
            }
            break;
        case 117:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[17;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[17~';
            }
            break;
        case 118:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[18;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[18~';
            }
            break;
        case 119:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[19;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[19~';
            }
            break;
        case 120:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[20;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[20~';
            }
            break;
        case 121:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[21;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[21~';
            }
            break;
        case 122:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[23;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[23~';
            }
            break;
        case 123:
            if (modifiers) {
                result.key = EscapeSequences_1.C0.ESC + '[24;' + (modifiers + 1) + '~';
            }
            else {
                result.key = EscapeSequences_1.C0.ESC + '[24~';
            }
            break;
        default:
            if (ev.ctrlKey && !ev.shiftKey && !ev.altKey && !ev.metaKey) {
                if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    result.key = String.fromCharCode(ev.keyCode - 64);
                }
                else if (ev.keyCode === 32) {
                    result.key = String.fromCharCode(0);
                }
                else if (ev.keyCode >= 51 && ev.keyCode <= 55) {
                    result.key = String.fromCharCode(ev.keyCode - 51 + 27);
                }
                else if (ev.keyCode === 56) {
                    result.key = String.fromCharCode(127);
                }
                else if (ev.keyCode === 219) {
                    result.key = String.fromCharCode(27);
                }
                else if (ev.keyCode === 220) {
                    result.key = String.fromCharCode(28);
                }
                else if (ev.keyCode === 221) {
                    result.key = String.fromCharCode(29);
                }
            }
            else if ((!isMac || macOptionIsMeta) && ev.altKey && !ev.metaKey) {
                var keyMapping = KEYCODE_KEY_MAPPINGS[ev.keyCode];
                var key = keyMapping && keyMapping[!ev.shiftKey ? 0 : 1];
                if (key) {
                    result.key = EscapeSequences_1.C0.ESC + key;
                }
                else if (ev.keyCode >= 65 && ev.keyCode <= 90) {
                    var keyCode = ev.ctrlKey ? ev.keyCode - 64 : ev.keyCode + 32;
                    result.key = EscapeSequences_1.C0.ESC + String.fromCharCode(keyCode);
                }
            }
            else if (isMac && !ev.altKey && !ev.ctrlKey && ev.metaKey) {
                if (ev.keyCode === 65) {
                    result.type = 1;
                }
            }
            else if (ev.key && !ev.ctrlKey && !ev.altKey && !ev.metaKey && ev.keyCode >= 48 && ev.key.length === 1) {
                result.key = ev.key;
            }
            else if (ev.key && ev.ctrlKey) {
                if (ev.key === '_') {
                    result.key = EscapeSequences_1.C0.US;
                }
            }
            break;
    }
    return result;
}
exports.evaluateKeyboardEvent = evaluateKeyboardEvent;


/***/ }),

/***/ "./out/common/input/TextDecoder.js":
/*!*****************************************!*\
  !*** ./out/common/input/TextDecoder.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function stringFromCodePoint(codePoint) {
    if (codePoint > 0xFFFF) {
        codePoint -= 0x10000;
        return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);
    }
    return String.fromCharCode(codePoint);
}
exports.stringFromCodePoint = stringFromCodePoint;
function utf32ToString(data, start, end) {
    if (start === void 0) { start = 0; }
    if (end === void 0) { end = data.length; }
    var result = '';
    for (var i = start; i < end; ++i) {
        var codepoint = data[i];
        if (codepoint > 0xFFFF) {
            codepoint -= 0x10000;
            result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);
        }
        else {
            result += String.fromCharCode(codepoint);
        }
    }
    return result;
}
exports.utf32ToString = utf32ToString;
var StringToUtf32 = (function () {
    function StringToUtf32() {
        this._interim = 0;
    }
    StringToUtf32.prototype.clear = function () {
        this._interim = 0;
    };
    StringToUtf32.prototype.decode = function (input, target) {
        var length = input.length;
        if (!length) {
            return 0;
        }
        var size = 0;
        var startPos = 0;
        if (this._interim) {
            var second = input.charCodeAt(startPos++);
            if (0xDC00 <= second && second <= 0xDFFF) {
                target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
            }
            else {
                target[size++] = this._interim;
                target[size++] = second;
            }
            this._interim = 0;
        }
        for (var i = startPos; i < length; ++i) {
            var code = input.charCodeAt(i);
            if (0xD800 <= code && code <= 0xDBFF) {
                if (++i >= length) {
                    this._interim = code;
                    return size;
                }
                var second = input.charCodeAt(i);
                if (0xDC00 <= second && second <= 0xDFFF) {
                    target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
                }
                else {
                    target[size++] = code;
                    target[size++] = second;
                }
                continue;
            }
            target[size++] = code;
        }
        return size;
    };
    return StringToUtf32;
}());
exports.StringToUtf32 = StringToUtf32;
var Utf8ToUtf32 = (function () {
    function Utf8ToUtf32() {
        this.interim = new Uint8Array(3);
    }
    Utf8ToUtf32.prototype.clear = function () {
        this.interim.fill(0);
    };
    Utf8ToUtf32.prototype.decode = function (input, target) {
        var length = input.length;
        if (!length) {
            return 0;
        }
        var size = 0;
        var byte1;
        var byte2;
        var byte3;
        var byte4;
        var codepoint = 0;
        var startPos = 0;
        if (this.interim[0]) {
            var discardInterim = false;
            var cp = this.interim[0];
            cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);
            var pos = 0;
            var tmp = void 0;
            while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {
                cp <<= 6;
                cp |= tmp;
            }
            var type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;
            var missing = type - pos;
            while (startPos < missing) {
                if (startPos >= length) {
                    return 0;
                }
                tmp = input[startPos++];
                if ((tmp & 0xC0) !== 0x80) {
                    startPos--;
                    discardInterim = true;
                    break;
                }
                else {
                    this.interim[pos++] = tmp;
                    cp <<= 6;
                    cp |= tmp & 0x3F;
                }
            }
            if (!discardInterim) {
                if (type === 2) {
                    if (cp < 0x80) {
                        startPos--;
                    }
                    else {
                        target[size++] = cp;
                    }
                }
                else if (type === 3) {
                    if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF)) {
                    }
                    else {
                        target[size++] = cp;
                    }
                }
                else {
                    if (codepoint < 0x010000 || codepoint > 0x10FFFF) {
                    }
                    else {
                        target[size++] = cp;
                    }
                }
            }
            this.interim.fill(0);
        }
        var fourStop = length - 4;
        var i = startPos;
        while (i < length) {
            while (i < fourStop
                && !((byte1 = input[i]) & 0x80)
                && !((byte2 = input[i + 1]) & 0x80)
                && !((byte3 = input[i + 2]) & 0x80)
                && !((byte4 = input[i + 3]) & 0x80)) {
                target[size++] = byte1;
                target[size++] = byte2;
                target[size++] = byte3;
                target[size++] = byte4;
                i += 4;
            }
            byte1 = input[i++];
            if (byte1 < 0x80) {
                target[size++] = byte1;
            }
            else if ((byte1 & 0xE0) === 0xC0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);
                if (codepoint < 0x80) {
                    i--;
                    continue;
                }
                target[size++] = codepoint;
            }
            else if ((byte1 & 0xF0) === 0xE0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    return size;
                }
                byte3 = input[i++];
                if ((byte3 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);
                if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF)) {
                    continue;
                }
                target[size++] = codepoint;
            }
            else if ((byte1 & 0xF8) === 0xF0) {
                if (i >= length) {
                    this.interim[0] = byte1;
                    return size;
                }
                byte2 = input[i++];
                if ((byte2 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    return size;
                }
                byte3 = input[i++];
                if ((byte3 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                if (i >= length) {
                    this.interim[0] = byte1;
                    this.interim[1] = byte2;
                    this.interim[2] = byte3;
                    return size;
                }
                byte4 = input[i++];
                if ((byte4 & 0xC0) !== 0x80) {
                    i--;
                    continue;
                }
                codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);
                if (codepoint < 0x010000 || codepoint > 0x10FFFF) {
                    continue;
                }
                target[size++] = codepoint;
            }
            else {
            }
        }
        return size;
    };
    return Utf8ToUtf32;
}());
exports.Utf8ToUtf32 = Utf8ToUtf32;


/***/ }),

/***/ "./out/common/parser/Constants.js":
/*!****************************************!*\
  !*** ./out/common/parser/Constants.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.PAYLOAD_LIMIT = 10000000;


/***/ }),

/***/ "./out/common/parser/DcsParser.js":
/*!****************************************!*\
  !*** ./out/common/parser/DcsParser.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var Params_1 = __webpack_require__(/*! common/parser/Params */ "./out/common/parser/Params.js");
var Constants_1 = __webpack_require__(/*! common/parser/Constants */ "./out/common/parser/Constants.js");
var EMPTY_HANDLERS = [];
var DcsParser = (function () {
    function DcsParser() {
        this._handlers = Object.create(null);
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
        this._handlerFb = function () { };
    }
    DcsParser.prototype.dispose = function () {
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
    };
    DcsParser.prototype.addHandler = function (ident, handler) {
        if (this._handlers[ident] === undefined) {
            this._handlers[ident] = [];
        }
        var handlerList = this._handlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    DcsParser.prototype.setHandler = function (ident, handler) {
        this._handlers[ident] = [handler];
    };
    DcsParser.prototype.clearHandler = function (ident) {
        if (this._handlers[ident])
            delete this._handlers[ident];
    };
    DcsParser.prototype.setHandlerFallback = function (handler) {
        this._handlerFb = handler;
    };
    DcsParser.prototype.reset = function () {
        if (this._active.length) {
            this.unhook(false);
        }
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
    };
    DcsParser.prototype.hook = function (ident, params) {
        this.reset();
        this._ident = ident;
        this._active = this._handlers[ident] || EMPTY_HANDLERS;
        if (!this._active.length) {
            this._handlerFb(this._ident, 'HOOK', params);
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].hook(params);
            }
        }
    };
    DcsParser.prototype.put = function (data, start, end) {
        if (!this._active.length) {
            this._handlerFb(this._ident, 'PUT', TextDecoder_1.utf32ToString(data, start, end));
        }
        else {
            for (var j = this._active.length - 1; j >= 0; j--) {
                this._active[j].put(data, start, end);
            }
        }
    };
    DcsParser.prototype.unhook = function (success) {
        if (!this._active.length) {
            this._handlerFb(this._ident, 'UNHOOK', success);
        }
        else {
            var j = this._active.length - 1;
            for (; j >= 0; j--) {
                if (this._active[j].unhook(success) !== false) {
                    break;
                }
            }
            j--;
            for (; j >= 0; j--) {
                this._active[j].unhook(false);
            }
        }
        this._active = EMPTY_HANDLERS;
        this._ident = 0;
    };
    return DcsParser;
}());
exports.DcsParser = DcsParser;
var DcsHandler = (function () {
    function DcsHandler(_handler) {
        this._handler = _handler;
        this._data = '';
        this._hitLimit = false;
    }
    DcsHandler.prototype.hook = function (params) {
        this._params = params.clone();
        this._data = '';
        this._hitLimit = false;
    };
    DcsHandler.prototype.put = function (data, start, end) {
        if (this._hitLimit) {
            return;
        }
        this._data += TextDecoder_1.utf32ToString(data, start, end);
        if (this._data.length > Constants_1.PAYLOAD_LIMIT) {
            this._data = '';
            this._hitLimit = true;
        }
    };
    DcsHandler.prototype.unhook = function (success) {
        var ret;
        if (this._hitLimit) {
            ret = false;
        }
        else if (success) {
            ret = this._handler(this._data, this._params ? this._params : new Params_1.Params());
        }
        this._params = undefined;
        this._data = '';
        this._hitLimit = false;
        return ret;
    };
    return DcsHandler;
}());
exports.DcsHandler = DcsHandler;


/***/ }),

/***/ "./out/common/parser/EscapeSequenceParser.js":
/*!***************************************************!*\
  !*** ./out/common/parser/EscapeSequenceParser.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var TypedArrayUtils_1 = __webpack_require__(/*! common/TypedArrayUtils */ "./out/common/TypedArrayUtils.js");
var Params_1 = __webpack_require__(/*! common/parser/Params */ "./out/common/parser/Params.js");
var OscParser_1 = __webpack_require__(/*! common/parser/OscParser */ "./out/common/parser/OscParser.js");
var DcsParser_1 = __webpack_require__(/*! common/parser/DcsParser */ "./out/common/parser/DcsParser.js");
var TransitionTable = (function () {
    function TransitionTable(length) {
        this.table = new Uint8Array(length);
    }
    TransitionTable.prototype.setDefault = function (action, next) {
        TypedArrayUtils_1.fill(this.table, action << 4 | next);
    };
    TransitionTable.prototype.add = function (code, state, action, next) {
        this.table[state << 8 | code] = action << 4 | next;
    };
    TransitionTable.prototype.addMany = function (codes, state, action, next) {
        for (var i = 0; i < codes.length; i++) {
            this.table[state << 8 | codes[i]] = action << 4 | next;
        }
    };
    return TransitionTable;
}());
exports.TransitionTable = TransitionTable;
var NON_ASCII_PRINTABLE = 0xA0;
exports.VT500_TRANSITION_TABLE = (function () {
    var table = new TransitionTable(4095);
    var BYTE_VALUES = 256;
    var blueprint = Array.apply(null, Array(BYTE_VALUES)).map(function (unused, i) { return i; });
    var r = function (start, end) { return blueprint.slice(start, end); };
    var PRINTABLES = r(0x20, 0x7f);
    var EXECUTABLES = r(0x00, 0x18);
    EXECUTABLES.push(0x19);
    EXECUTABLES.push.apply(EXECUTABLES, r(0x1c, 0x20));
    var states = r(0, 13 + 1);
    var state;
    table.setDefault(1, 0);
    table.addMany(PRINTABLES, 0, 2, 0);
    for (state in states) {
        table.addMany([0x18, 0x1a, 0x99, 0x9a], state, 3, 0);
        table.addMany(r(0x80, 0x90), state, 3, 0);
        table.addMany(r(0x90, 0x98), state, 3, 0);
        table.add(0x9c, state, 0, 0);
        table.add(0x1b, state, 11, 1);
        table.add(0x9d, state, 4, 8);
        table.addMany([0x98, 0x9e, 0x9f], state, 0, 7);
        table.add(0x9b, state, 11, 3);
        table.add(0x90, state, 11, 9);
    }
    table.addMany(EXECUTABLES, 0, 3, 0);
    table.addMany(EXECUTABLES, 1, 3, 1);
    table.add(0x7f, 1, 0, 1);
    table.addMany(EXECUTABLES, 8, 0, 8);
    table.addMany(EXECUTABLES, 3, 3, 3);
    table.add(0x7f, 3, 0, 3);
    table.addMany(EXECUTABLES, 4, 3, 4);
    table.add(0x7f, 4, 0, 4);
    table.addMany(EXECUTABLES, 6, 3, 6);
    table.addMany(EXECUTABLES, 5, 3, 5);
    table.add(0x7f, 5, 0, 5);
    table.addMany(EXECUTABLES, 2, 3, 2);
    table.add(0x7f, 2, 0, 2);
    table.add(0x5d, 1, 4, 8);
    table.addMany(PRINTABLES, 8, 5, 8);
    table.add(0x7f, 8, 5, 8);
    table.addMany([0x9c, 0x1b, 0x18, 0x1a, 0x07], 8, 6, 0);
    table.addMany(r(0x1c, 0x20), 8, 0, 8);
    table.addMany([0x58, 0x5e, 0x5f], 1, 0, 7);
    table.addMany(PRINTABLES, 7, 0, 7);
    table.addMany(EXECUTABLES, 7, 0, 7);
    table.add(0x9c, 7, 0, 0);
    table.add(0x7f, 7, 0, 7);
    table.add(0x5b, 1, 11, 3);
    table.addMany(r(0x40, 0x7f), 3, 7, 0);
    table.addMany(r(0x30, 0x3c), 3, 8, 4);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 3, 9, 4);
    table.addMany(r(0x30, 0x3c), 4, 8, 4);
    table.addMany(r(0x40, 0x7f), 4, 7, 0);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 4, 0, 6);
    table.addMany(r(0x20, 0x40), 6, 0, 6);
    table.add(0x7f, 6, 0, 6);
    table.addMany(r(0x40, 0x7f), 6, 0, 0);
    table.addMany(r(0x20, 0x30), 3, 9, 5);
    table.addMany(r(0x20, 0x30), 5, 9, 5);
    table.addMany(r(0x30, 0x40), 5, 0, 6);
    table.addMany(r(0x40, 0x7f), 5, 7, 0);
    table.addMany(r(0x20, 0x30), 4, 9, 5);
    table.addMany(r(0x20, 0x30), 1, 9, 2);
    table.addMany(r(0x20, 0x30), 2, 9, 2);
    table.addMany(r(0x30, 0x7f), 2, 10, 0);
    table.addMany(r(0x30, 0x50), 1, 10, 0);
    table.addMany(r(0x51, 0x58), 1, 10, 0);
    table.addMany([0x59, 0x5a, 0x5c], 1, 10, 0);
    table.addMany(r(0x60, 0x7f), 1, 10, 0);
    table.add(0x50, 1, 11, 9);
    table.addMany(EXECUTABLES, 9, 0, 9);
    table.add(0x7f, 9, 0, 9);
    table.addMany(r(0x1c, 0x20), 9, 0, 9);
    table.addMany(r(0x20, 0x30), 9, 9, 12);
    table.addMany(r(0x30, 0x3c), 9, 8, 10);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 9, 9, 10);
    table.addMany(EXECUTABLES, 11, 0, 11);
    table.addMany(r(0x20, 0x80), 11, 0, 11);
    table.addMany(r(0x1c, 0x20), 11, 0, 11);
    table.addMany(EXECUTABLES, 10, 0, 10);
    table.add(0x7f, 10, 0, 10);
    table.addMany(r(0x1c, 0x20), 10, 0, 10);
    table.addMany(r(0x30, 0x3c), 10, 8, 10);
    table.addMany([0x3c, 0x3d, 0x3e, 0x3f], 10, 0, 11);
    table.addMany(r(0x20, 0x30), 10, 9, 12);
    table.addMany(EXECUTABLES, 12, 0, 12);
    table.add(0x7f, 12, 0, 12);
    table.addMany(r(0x1c, 0x20), 12, 0, 12);
    table.addMany(r(0x20, 0x30), 12, 9, 12);
    table.addMany(r(0x30, 0x40), 12, 0, 11);
    table.addMany(r(0x40, 0x7f), 12, 12, 13);
    table.addMany(r(0x40, 0x7f), 10, 12, 13);
    table.addMany(r(0x40, 0x7f), 9, 12, 13);
    table.addMany(EXECUTABLES, 13, 13, 13);
    table.addMany(PRINTABLES, 13, 13, 13);
    table.add(0x7f, 13, 0, 13);
    table.addMany([0x1b, 0x9c, 0x18, 0x1a], 13, 14, 0);
    table.add(NON_ASCII_PRINTABLE, 0, 2, 0);
    table.add(NON_ASCII_PRINTABLE, 8, 5, 8);
    table.add(NON_ASCII_PRINTABLE, 6, 0, 6);
    table.add(NON_ASCII_PRINTABLE, 11, 0, 11);
    table.add(NON_ASCII_PRINTABLE, 13, 13, 13);
    return table;
})();
var EscapeSequenceParser = (function (_super) {
    __extends(EscapeSequenceParser, _super);
    function EscapeSequenceParser(TRANSITIONS) {
        if (TRANSITIONS === void 0) { TRANSITIONS = exports.VT500_TRANSITION_TABLE; }
        var _this = _super.call(this) || this;
        _this.TRANSITIONS = TRANSITIONS;
        _this.initialState = 0;
        _this.currentState = _this.initialState;
        _this._params = new Params_1.Params();
        _this._params.addParam(0);
        _this._collect = 0;
        _this.precedingCodepoint = 0;
        _this._printHandlerFb = function (data, start, end) { };
        _this._executeHandlerFb = function (code) { };
        _this._csiHandlerFb = function (ident, params) { };
        _this._escHandlerFb = function (ident) { };
        _this._errorHandlerFb = function (state) { return state; };
        _this._printHandler = _this._printHandlerFb;
        _this._executeHandlers = Object.create(null);
        _this._csiHandlers = Object.create(null);
        _this._escHandlers = Object.create(null);
        _this._oscParser = new OscParser_1.OscParser();
        _this._dcsParser = new DcsParser_1.DcsParser();
        _this._errorHandler = _this._errorHandlerFb;
        _this.setEscHandler({ final: '\\' }, function () { });
        return _this;
    }
    EscapeSequenceParser.prototype._identifier = function (id, finalRange) {
        if (finalRange === void 0) { finalRange = [0x40, 0x7e]; }
        var res = 0;
        if (id.prefix) {
            if (id.prefix.length > 1) {
                throw new Error('only one byte as prefix supported');
            }
            res = id.prefix.charCodeAt(0);
            if (res && 0x3c > res || res > 0x3f) {
                throw new Error('prefix must be in range 0x3c .. 0x3f');
            }
        }
        if (id.intermediates) {
            if (id.intermediates.length > 2) {
                throw new Error('only two bytes as intermediates are supported');
            }
            for (var i = 0; i < id.intermediates.length; ++i) {
                var intermediate = id.intermediates.charCodeAt(i);
                if (0x20 > intermediate || intermediate > 0x2f) {
                    throw new Error('intermediate must be in range 0x20 .. 0x2f');
                }
                res <<= 8;
                res |= intermediate;
            }
        }
        if (id.final.length !== 1) {
            throw new Error('final must be a single byte');
        }
        var finalCode = id.final.charCodeAt(0);
        if (finalRange[0] > finalCode || finalCode > finalRange[1]) {
            throw new Error("final must be in range " + finalRange[0] + " .. " + finalRange[1]);
        }
        res <<= 8;
        res |= finalCode;
        return res;
    };
    EscapeSequenceParser.prototype.identToString = function (ident) {
        var res = [];
        while (ident) {
            res.push(String.fromCharCode(ident & 0xFF));
            ident >>= 8;
        }
        return res.reverse().join('');
    };
    EscapeSequenceParser.prototype.dispose = function () {
        this._csiHandlers = Object.create(null);
        this._executeHandlers = Object.create(null);
        this._escHandlers = Object.create(null);
        this._oscParser.dispose();
        this._dcsParser.dispose();
    };
    EscapeSequenceParser.prototype.setPrintHandler = function (handler) {
        this._printHandler = handler;
    };
    EscapeSequenceParser.prototype.clearPrintHandler = function () {
        this._printHandler = this._printHandlerFb;
    };
    EscapeSequenceParser.prototype.addEscHandler = function (id, handler) {
        var ident = this._identifier(id, [0x30, 0x7e]);
        if (this._escHandlers[ident] === undefined) {
            this._escHandlers[ident] = [];
        }
        var handlerList = this._escHandlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.setEscHandler = function (id, handler) {
        this._escHandlers[this._identifier(id, [0x30, 0x7e])] = [handler];
    };
    EscapeSequenceParser.prototype.clearEscHandler = function (id) {
        if (this._escHandlers[this._identifier(id, [0x30, 0x7e])])
            delete this._escHandlers[this._identifier(id, [0x30, 0x7e])];
    };
    EscapeSequenceParser.prototype.setEscHandlerFallback = function (handler) {
        this._escHandlerFb = handler;
    };
    EscapeSequenceParser.prototype.setExecuteHandler = function (flag, handler) {
        this._executeHandlers[flag.charCodeAt(0)] = handler;
    };
    EscapeSequenceParser.prototype.clearExecuteHandler = function (flag) {
        if (this._executeHandlers[flag.charCodeAt(0)])
            delete this._executeHandlers[flag.charCodeAt(0)];
    };
    EscapeSequenceParser.prototype.setExecuteHandlerFallback = function (handler) {
        this._executeHandlerFb = handler;
    };
    EscapeSequenceParser.prototype.addCsiHandler = function (id, handler) {
        var ident = this._identifier(id);
        if (this._csiHandlers[ident] === undefined) {
            this._csiHandlers[ident] = [];
        }
        var handlerList = this._csiHandlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    EscapeSequenceParser.prototype.setCsiHandler = function (id, handler) {
        this._csiHandlers[this._identifier(id)] = [handler];
    };
    EscapeSequenceParser.prototype.clearCsiHandler = function (id) {
        if (this._csiHandlers[this._identifier(id)])
            delete this._csiHandlers[this._identifier(id)];
    };
    EscapeSequenceParser.prototype.setCsiHandlerFallback = function (callback) {
        this._csiHandlerFb = callback;
    };
    EscapeSequenceParser.prototype.addDcsHandler = function (id, handler) {
        return this._dcsParser.addHandler(this._identifier(id), handler);
    };
    EscapeSequenceParser.prototype.setDcsHandler = function (id, handler) {
        this._dcsParser.setHandler(this._identifier(id), handler);
    };
    EscapeSequenceParser.prototype.clearDcsHandler = function (id) {
        this._dcsParser.clearHandler(this._identifier(id));
    };
    EscapeSequenceParser.prototype.setDcsHandlerFallback = function (handler) {
        this._dcsParser.setHandlerFallback(handler);
    };
    EscapeSequenceParser.prototype.addOscHandler = function (ident, handler) {
        return this._oscParser.addHandler(ident, handler);
    };
    EscapeSequenceParser.prototype.setOscHandler = function (ident, handler) {
        this._oscParser.setHandler(ident, handler);
    };
    EscapeSequenceParser.prototype.clearOscHandler = function (ident) {
        this._oscParser.clearHandler(ident);
    };
    EscapeSequenceParser.prototype.setOscHandlerFallback = function (handler) {
        this._oscParser.setHandlerFallback(handler);
    };
    EscapeSequenceParser.prototype.setErrorHandler = function (callback) {
        this._errorHandler = callback;
    };
    EscapeSequenceParser.prototype.clearErrorHandler = function () {
        this._errorHandler = this._errorHandlerFb;
    };
    EscapeSequenceParser.prototype.reset = function () {
        this.currentState = this.initialState;
        this._oscParser.reset();
        this._dcsParser.reset();
        this._params.reset();
        this._params.addParam(0);
        this._collect = 0;
        this.precedingCodepoint = 0;
    };
    EscapeSequenceParser.prototype.parse = function (data, length) {
        var code = 0;
        var transition = 0;
        var currentState = this.currentState;
        var osc = this._oscParser;
        var dcs = this._dcsParser;
        var collect = this._collect;
        var params = this._params;
        var table = this.TRANSITIONS.table;
        for (var i = 0; i < length; ++i) {
            code = data[i];
            transition = table[currentState << 8 | (code < 0xa0 ? code : NON_ASCII_PRINTABLE)];
            switch (transition >> 4) {
                case 2:
                    for (var j_1 = i + 1;; ++j_1) {
                        if (j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                        if (++j_1 >= length || (code = data[j_1]) < 0x20 || (code > 0x7e && code < NON_ASCII_PRINTABLE)) {
                            this._printHandler(data, i, j_1);
                            i = j_1 - 1;
                            break;
                        }
                    }
                    break;
                case 3:
                    if (this._executeHandlers[code])
                        this._executeHandlers[code]();
                    else
                        this._executeHandlerFb(code);
                    this.precedingCodepoint = 0;
                    break;
                case 0:
                    break;
                case 1:
                    var inject = this._errorHandler({
                        position: i,
                        code: code,
                        currentState: currentState,
                        collect: collect,
                        params: params,
                        abort: false
                    });
                    if (inject.abort)
                        return;
                    break;
                case 7:
                    var handlers = this._csiHandlers[collect << 8 | code];
                    var j = handlers ? handlers.length - 1 : -1;
                    for (; j >= 0; j--) {
                        if (handlers[j](params) !== false) {
                            break;
                        }
                    }
                    if (j < 0) {
                        this._csiHandlerFb(collect << 8 | code, params);
                    }
                    this.precedingCodepoint = 0;
                    break;
                case 8:
                    do {
                        switch (code) {
                            case 0x3b:
                                params.addParam(0);
                                break;
                            case 0x3a:
                                params.addSubParam(-1);
                                break;
                            default:
                                params.addDigit(code - 48);
                        }
                    } while (++i < length && (code = data[i]) > 0x2f && code < 0x3c);
                    i--;
                    break;
                case 9:
                    collect <<= 8;
                    collect |= code;
                    break;
                case 10:
                    var handlersEsc = this._escHandlers[collect << 8 | code];
                    var jj = handlersEsc ? handlersEsc.length - 1 : -1;
                    for (; jj >= 0; jj--) {
                        if (handlersEsc[jj]() !== false) {
                            break;
                        }
                    }
                    if (jj < 0) {
                        this._escHandlerFb(collect << 8 | code);
                    }
                    this.precedingCodepoint = 0;
                    break;
                case 11:
                    params.reset();
                    params.addParam(0);
                    collect = 0;
                    break;
                case 12:
                    dcs.hook(collect << 8 | code, params);
                    break;
                case 13:
                    for (var j_2 = i + 1;; ++j_2) {
                        if (j_2 >= length || (code = data[j_2]) === 0x18 || code === 0x1a || code === 0x1b || (code > 0x7f && code < NON_ASCII_PRINTABLE)) {
                            dcs.put(data, i, j_2);
                            i = j_2 - 1;
                            break;
                        }
                    }
                    break;
                case 14:
                    dcs.unhook(code !== 0x18 && code !== 0x1a);
                    if (code === 0x1b)
                        transition |= 1;
                    params.reset();
                    params.addParam(0);
                    collect = 0;
                    this.precedingCodepoint = 0;
                    break;
                case 4:
                    osc.start();
                    break;
                case 5:
                    for (var j_3 = i + 1;; j_3++) {
                        if (j_3 >= length || (code = data[j_3]) < 0x20 || (code > 0x7f && code <= 0x9f)) {
                            osc.put(data, i, j_3);
                            i = j_3 - 1;
                            break;
                        }
                    }
                    break;
                case 6:
                    osc.end(code !== 0x18 && code !== 0x1a);
                    if (code === 0x1b)
                        transition |= 1;
                    params.reset();
                    params.addParam(0);
                    collect = 0;
                    this.precedingCodepoint = 0;
                    break;
            }
            currentState = transition & 15;
        }
        this._collect = collect;
        this.currentState = currentState;
    };
    return EscapeSequenceParser;
}(Lifecycle_1.Disposable));
exports.EscapeSequenceParser = EscapeSequenceParser;


/***/ }),

/***/ "./out/common/parser/OscParser.js":
/*!****************************************!*\
  !*** ./out/common/parser/OscParser.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Constants_1 = __webpack_require__(/*! common/parser/Constants */ "./out/common/parser/Constants.js");
var TextDecoder_1 = __webpack_require__(/*! common/input/TextDecoder */ "./out/common/input/TextDecoder.js");
var OscParser = (function () {
    function OscParser() {
        this._state = 0;
        this._id = -1;
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
    }
    OscParser.prototype.addHandler = function (ident, handler) {
        if (this._handlers[ident] === undefined) {
            this._handlers[ident] = [];
        }
        var handlerList = this._handlers[ident];
        handlerList.push(handler);
        return {
            dispose: function () {
                var handlerIndex = handlerList.indexOf(handler);
                if (handlerIndex !== -1) {
                    handlerList.splice(handlerIndex, 1);
                }
            }
        };
    };
    OscParser.prototype.setHandler = function (ident, handler) {
        this._handlers[ident] = [handler];
    };
    OscParser.prototype.clearHandler = function (ident) {
        if (this._handlers[ident])
            delete this._handlers[ident];
    };
    OscParser.prototype.setHandlerFallback = function (handler) {
        this._handlerFb = handler;
    };
    OscParser.prototype.dispose = function () {
        this._handlers = Object.create(null);
        this._handlerFb = function () { };
    };
    OscParser.prototype.reset = function () {
        if (this._state === 2) {
            this.end(false);
        }
        this._id = -1;
        this._state = 0;
    };
    OscParser.prototype._start = function () {
        var handlers = this._handlers[this._id];
        if (!handlers) {
            this._handlerFb(this._id, 'START');
        }
        else {
            for (var j = handlers.length - 1; j >= 0; j--) {
                handlers[j].start();
            }
        }
    };
    OscParser.prototype._put = function (data, start, end) {
        var handlers = this._handlers[this._id];
        if (!handlers) {
            this._handlerFb(this._id, 'PUT', TextDecoder_1.utf32ToString(data, start, end));
        }
        else {
            for (var j = handlers.length - 1; j >= 0; j--) {
                handlers[j].put(data, start, end);
            }
        }
    };
    OscParser.prototype._end = function (success) {
        var handlers = this._handlers[this._id];
        if (!handlers) {
            this._handlerFb(this._id, 'END', success);
        }
        else {
            var j = handlers.length - 1;
            for (; j >= 0; j--) {
                if (handlers[j].end(success) !== false) {
                    break;
                }
            }
            j--;
            for (; j >= 0; j--) {
                handlers[j].end(false);
            }
        }
    };
    OscParser.prototype.start = function () {
        this.reset();
        this._id = -1;
        this._state = 1;
    };
    OscParser.prototype.put = function (data, start, end) {
        if (this._state === 3) {
            return;
        }
        if (this._state === 1) {
            while (start < end) {
                var code = data[start++];
                if (code === 0x3b) {
                    this._state = 2;
                    this._start();
                    break;
                }
                if (code < 0x30 || 0x39 < code) {
                    this._state = 3;
                    return;
                }
                if (this._id === -1) {
                    this._id = 0;
                }
                this._id = this._id * 10 + code - 48;
            }
        }
        if (this._state === 2 && end - start > 0) {
            this._put(data, start, end);
        }
    };
    OscParser.prototype.end = function (success) {
        if (this._state === 0) {
            return;
        }
        if (this._state !== 3) {
            if (this._state === 1) {
                this._start();
            }
            this._end(success);
        }
        this._id = -1;
        this._state = 0;
    };
    return OscParser;
}());
exports.OscParser = OscParser;
var OscHandler = (function () {
    function OscHandler(_handler) {
        this._handler = _handler;
        this._data = '';
        this._hitLimit = false;
    }
    OscHandler.prototype.start = function () {
        this._data = '';
        this._hitLimit = false;
    };
    OscHandler.prototype.put = function (data, start, end) {
        if (this._hitLimit) {
            return;
        }
        this._data += TextDecoder_1.utf32ToString(data, start, end);
        if (this._data.length > Constants_1.PAYLOAD_LIMIT) {
            this._data = '';
            this._hitLimit = true;
        }
    };
    OscHandler.prototype.end = function (success) {
        var ret;
        if (this._hitLimit) {
            ret = false;
        }
        else if (success) {
            ret = this._handler(this._data);
        }
        this._data = '';
        this._hitLimit = false;
        return ret;
    };
    return OscHandler;
}());
exports.OscHandler = OscHandler;


/***/ }),

/***/ "./out/common/parser/Params.js":
/*!*************************************!*\
  !*** ./out/common/parser/Params.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var MAX_VALUE = 0x7FFFFFFF;
var MAX_SUBPARAMS = 256;
var Params = (function () {
    function Params(maxLength, maxSubParamsLength) {
        if (maxLength === void 0) { maxLength = 32; }
        if (maxSubParamsLength === void 0) { maxSubParamsLength = 32; }
        this.maxLength = maxLength;
        this.maxSubParamsLength = maxSubParamsLength;
        if (maxSubParamsLength > MAX_SUBPARAMS) {
            throw new Error('maxSubParamsLength must not be greater than 256');
        }
        this.params = new Int32Array(maxLength);
        this.length = 0;
        this._subParams = new Int32Array(maxSubParamsLength);
        this._subParamsLength = 0;
        this._subParamsIdx = new Uint16Array(maxLength);
        this._rejectDigits = false;
        this._rejectSubDigits = false;
        this._digitIsSub = false;
    }
    Params.fromArray = function (values) {
        var params = new Params();
        if (!values.length) {
            return params;
        }
        for (var i = (values[0] instanceof Array) ? 1 : 0; i < values.length; ++i) {
            var value = values[i];
            if (value instanceof Array) {
                for (var k = 0; k < value.length; ++k) {
                    params.addSubParam(value[k]);
                }
            }
            else {
                params.addParam(value);
            }
        }
        return params;
    };
    Params.prototype.clone = function () {
        var newParams = new Params(this.maxLength, this.maxSubParamsLength);
        newParams.params.set(this.params);
        newParams.length = this.length;
        newParams._subParams.set(this._subParams);
        newParams._subParamsLength = this._subParamsLength;
        newParams._subParamsIdx.set(this._subParamsIdx);
        newParams._rejectDigits = this._rejectDigits;
        newParams._rejectSubDigits = this._rejectSubDigits;
        newParams._digitIsSub = this._digitIsSub;
        return newParams;
    };
    Params.prototype.toArray = function () {
        var res = [];
        for (var i = 0; i < this.length; ++i) {
            res.push(this.params[i]);
            var start = this._subParamsIdx[i] >> 8;
            var end = this._subParamsIdx[i] & 0xFF;
            if (end - start > 0) {
                res.push(Array.prototype.slice.call(this._subParams, start, end));
            }
        }
        return res;
    };
    Params.prototype.reset = function () {
        this.length = 0;
        this._subParamsLength = 0;
        this._rejectDigits = false;
        this._rejectSubDigits = false;
        this._digitIsSub = false;
    };
    Params.prototype.addParam = function (value) {
        this._digitIsSub = false;
        if (this.length >= this.maxLength) {
            this._rejectDigits = true;
            return;
        }
        if (value < -1) {
            throw new Error('values lesser than -1 are not allowed');
        }
        this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength;
        this.params[this.length++] = value > MAX_VALUE ? MAX_VALUE : value;
    };
    Params.prototype.addSubParam = function (value) {
        this._digitIsSub = true;
        if (!this.length) {
            return;
        }
        if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) {
            this._rejectSubDigits = true;
            return;
        }
        if (value < -1) {
            throw new Error('values lesser than -1 are not allowed');
        }
        this._subParams[this._subParamsLength++] = value > MAX_VALUE ? MAX_VALUE : value;
        this._subParamsIdx[this.length - 1]++;
    };
    Params.prototype.hasSubParams = function (idx) {
        return ((this._subParamsIdx[idx] & 0xFF) - (this._subParamsIdx[idx] >> 8) > 0);
    };
    Params.prototype.getSubParams = function (idx) {
        var start = this._subParamsIdx[idx] >> 8;
        var end = this._subParamsIdx[idx] & 0xFF;
        if (end - start > 0) {
            return this._subParams.subarray(start, end);
        }
        return null;
    };
    Params.prototype.getSubParamsAll = function () {
        var result = {};
        for (var i = 0; i < this.length; ++i) {
            var start = this._subParamsIdx[i] >> 8;
            var end = this._subParamsIdx[i] & 0xFF;
            if (end - start > 0) {
                result[i] = this._subParams.slice(start, end);
            }
        }
        return result;
    };
    Params.prototype.addDigit = function (value) {
        var length;
        if (this._rejectDigits
            || !(length = this._digitIsSub ? this._subParamsLength : this.length)
            || (this._digitIsSub && this._rejectSubDigits)) {
            return;
        }
        var store = this._digitIsSub ? this._subParams : this.params;
        var cur = store[length - 1];
        store[length - 1] = ~cur ? Math.min(cur * 10 + value, MAX_VALUE) : value;
    };
    return Params;
}());
exports.Params = Params;


/***/ }),

/***/ "./out/common/services/BufferService.js":
/*!**********************************************!*\
  !*** ./out/common/services/BufferService.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var BufferSet_1 = __webpack_require__(/*! common/buffer/BufferSet */ "./out/common/buffer/BufferSet.js");
exports.MINIMUM_COLS = 2;
exports.MINIMUM_ROWS = 1;
var BufferService = (function () {
    function BufferService(_optionsService) {
        this._optionsService = _optionsService;
        this.cols = Math.max(_optionsService.options.cols, exports.MINIMUM_COLS);
        this.rows = Math.max(_optionsService.options.rows, exports.MINIMUM_ROWS);
        this.buffers = new BufferSet_1.BufferSet(_optionsService, this);
    }
    Object.defineProperty(BufferService.prototype, "buffer", {
        get: function () { return this.buffers.active; },
        enumerable: true,
        configurable: true
    });
    BufferService.prototype.resize = function (cols, rows) {
        this.cols = cols;
        this.rows = rows;
    };
    BufferService.prototype.reset = function () {
        this.buffers = new BufferSet_1.BufferSet(this._optionsService, this);
    };
    BufferService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], BufferService);
    return BufferService;
}());
exports.BufferService = BufferService;


/***/ }),

/***/ "./out/common/services/CoreMouseService.js":
/*!*************************************************!*\
  !*** ./out/common/services/CoreMouseService.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var DEFAULT_PROTOCOLS = {
    NONE: {
        events: 0,
        restrict: function () { return false; }
    },
    X10: {
        events: 1,
        restrict: function (e) {
            if (e.button === 4 || e.action !== 1) {
                return false;
            }
            e.ctrl = false;
            e.alt = false;
            e.shift = false;
            return true;
        }
    },
    VT200: {
        events: 1 | 2 | 16,
        restrict: function (e) {
            if (e.action === 32) {
                return false;
            }
            return true;
        }
    },
    DRAG: {
        events: 1 | 2 | 16 | 4,
        restrict: function (e) {
            if (e.action === 32 && e.button === 3) {
                return false;
            }
            return true;
        }
    },
    ANY: {
        events: 1 | 2 | 16
            | 4 | 8,
        restrict: function (e) { return true; }
    }
};
function eventCode(e, isSGR) {
    var code = (e.ctrl ? 16 : 0) | (e.shift ? 4 : 0) | (e.alt ? 8 : 0);
    if (e.button === 4) {
        code |= 64;
        code |= e.action;
    }
    else {
        code |= e.button & 3;
        if (e.button & 4) {
            code |= 64;
        }
        if (e.button & 8) {
            code |= 128;
        }
        if (e.action === 32) {
            code |= 32;
        }
        else if (e.action === 0 && !isSGR) {
            code |= 3;
        }
    }
    return code;
}
var S = String.fromCharCode;
var DEFAULT_ENCODINGS = {
    DEFAULT: function (e) {
        var params = [eventCode(e, false) + 32, e.col + 32, e.row + 32];
        params = params.map(function (v) { return (v > 127) ? 127 : v; });
        return "\u001B[M" + S(params[0]) + S(params[1]) + S(params[2]);
    },
    UTF8: function (e) {
        var params = [eventCode(e, false) + 32, e.col + 32, e.row + 32];
        params = params.map(function (v) { return (v > 2047) ? 0 : v; });
        return "\u001B[M" + S(params[0]) + S(params[1]) + S(params[2]);
    },
    SGR: function (e) {
        var final = (e.action === 0 && e.button !== 4) ? 'm' : 'M';
        return "\u001B[<" + eventCode(e, true) + ";" + e.col + ";" + e.row + final;
    },
    URXVT: function (e) {
        return "\u001B[" + (eventCode(e, false) + 32) + ";" + e.col + ";" + e.row + "M";
    }
};
var CoreMouseService = (function () {
    function CoreMouseService(_bufferService, _coreService) {
        var _this = this;
        this._bufferService = _bufferService;
        this._coreService = _coreService;
        this._protocols = {};
        this._encodings = {};
        this._activeProtocol = '';
        this._activeEncoding = '';
        this._onProtocolChange = new EventEmitter_1.EventEmitter();
        this._lastEvent = null;
        Object.keys(DEFAULT_PROTOCOLS).forEach(function (name) { return _this.addProtocol(name, DEFAULT_PROTOCOLS[name]); });
        Object.keys(DEFAULT_ENCODINGS).forEach(function (name) { return _this.addEncoding(name, DEFAULT_ENCODINGS[name]); });
        this.reset();
    }
    CoreMouseService.prototype.addProtocol = function (name, protocol) {
        this._protocols[name] = protocol;
    };
    CoreMouseService.prototype.addEncoding = function (name, encoding) {
        this._encodings[name] = encoding;
    };
    Object.defineProperty(CoreMouseService.prototype, "activeProtocol", {
        get: function () {
            return this._activeProtocol;
        },
        set: function (name) {
            if (!this._protocols[name]) {
                throw new Error("unknown protocol \"" + name + "\"");
            }
            this._activeProtocol = name;
            this._onProtocolChange.fire(this._protocols[name].events);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CoreMouseService.prototype, "activeEncoding", {
        get: function () {
            return this._activeEncoding;
        },
        set: function (name) {
            if (!this._encodings[name]) {
                throw new Error("unknown encoding \"" + name + "\"");
            }
            this._activeEncoding = name;
        },
        enumerable: true,
        configurable: true
    });
    CoreMouseService.prototype.reset = function () {
        this.activeProtocol = 'NONE';
        this.activeEncoding = 'DEFAULT';
        this._lastEvent = null;
    };
    Object.defineProperty(CoreMouseService.prototype, "onProtocolChange", {
        get: function () {
            return this._onProtocolChange.event;
        },
        enumerable: true,
        configurable: true
    });
    CoreMouseService.prototype.triggerMouseEvent = function (e) {
        if (e.col < 0 || e.col >= this._bufferService.cols
            || e.row < 0 || e.row >= this._bufferService.rows) {
            return false;
        }
        if (e.button === 4 && e.action === 32) {
            return false;
        }
        if (e.button === 3 && e.action !== 32) {
            return false;
        }
        if (e.button !== 4 && (e.action === 2 || e.action === 3)) {
            return false;
        }
        e.col++;
        e.row++;
        if (e.action === 32 && this._lastEvent && this._compareEvents(this._lastEvent, e)) {
            return false;
        }
        if (!this._protocols[this._activeProtocol].restrict(e)) {
            return false;
        }
        var report = this._encodings[this._activeEncoding](e);
        this._coreService.triggerDataEvent(report, true);
        this._lastEvent = e;
        return true;
    };
    CoreMouseService.prototype.explainEvents = function (events) {
        return {
            DOWN: !!(events & 1),
            UP: !!(events & 2),
            DRAG: !!(events & 4),
            MOVE: !!(events & 8),
            WHEEL: !!(events & 16)
        };
    };
    CoreMouseService.prototype._compareEvents = function (e1, e2) {
        if (e1.col !== e2.col)
            return false;
        if (e1.row !== e2.row)
            return false;
        if (e1.button !== e2.button)
            return false;
        if (e1.action !== e2.action)
            return false;
        if (e1.ctrl !== e2.ctrl)
            return false;
        if (e1.alt !== e2.alt)
            return false;
        if (e1.shift !== e2.shift)
            return false;
        return true;
    };
    CoreMouseService = __decorate([
        __param(0, Services_1.IBufferService),
        __param(1, Services_1.ICoreService)
    ], CoreMouseService);
    return CoreMouseService;
}());
exports.CoreMouseService = CoreMouseService;


/***/ }),

/***/ "./out/common/services/CoreService.js":
/*!********************************************!*\
  !*** ./out/common/services/CoreService.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Clone_1 = __webpack_require__(/*! common/Clone */ "./out/common/Clone.js");
var DEFAULT_DEC_PRIVATE_MODES = Object.freeze({
    applicationCursorKeys: false
});
var CoreService = (function () {
    function CoreService(_scrollToBottom, _bufferService, _logService, _optionsService) {
        this._scrollToBottom = _scrollToBottom;
        this._bufferService = _bufferService;
        this._logService = _logService;
        this._optionsService = _optionsService;
        this._onData = new EventEmitter_1.EventEmitter();
        this._onUserInput = new EventEmitter_1.EventEmitter();
        this.decPrivateModes = Clone_1.clone(DEFAULT_DEC_PRIVATE_MODES);
    }
    Object.defineProperty(CoreService.prototype, "onData", {
        get: function () { return this._onData.event; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CoreService.prototype, "onUserInput", {
        get: function () { return this._onUserInput.event; },
        enumerable: true,
        configurable: true
    });
    CoreService.prototype.reset = function () {
        this.decPrivateModes = Clone_1.clone(DEFAULT_DEC_PRIVATE_MODES);
    };
    CoreService.prototype.triggerDataEvent = function (data, wasUserInput) {
        if (wasUserInput === void 0) { wasUserInput = false; }
        if (this._optionsService.options.disableStdin) {
            return;
        }
        var buffer = this._bufferService.buffer;
        if (buffer.ybase !== buffer.ydisp) {
            this._scrollToBottom();
        }
        if (wasUserInput) {
            this._onUserInput.fire();
        }
        this._logService.debug('sending data', data);
        this._onData.fire(data);
    };
    CoreService = __decorate([
        __param(1, Services_1.IBufferService),
        __param(2, Services_1.ILogService),
        __param(3, Services_1.IOptionsService)
    ], CoreService);
    return CoreService;
}());
exports.CoreService = CoreService;


/***/ }),

/***/ "./out/common/services/DirtyRowService.js":
/*!************************************************!*\
  !*** ./out/common/services/DirtyRowService.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var DirtyRowService = (function () {
    function DirtyRowService(_bufferService) {
        this._bufferService = _bufferService;
        this.clearRange();
    }
    Object.defineProperty(DirtyRowService.prototype, "start", {
        get: function () { return this._start; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DirtyRowService.prototype, "end", {
        get: function () { return this._end; },
        enumerable: true,
        configurable: true
    });
    DirtyRowService.prototype.clearRange = function () {
        this._start = this._bufferService.buffer.y;
        this._end = this._bufferService.buffer.y;
    };
    DirtyRowService.prototype.markDirty = function (y) {
        if (y < this._start) {
            this._start = y;
        }
        else if (y > this._end) {
            this._end = y;
        }
    };
    DirtyRowService.prototype.markRangeDirty = function (y1, y2) {
        if (y1 > y2) {
            var temp = y1;
            y1 = y2;
            y2 = temp;
        }
        if (y1 < this._start) {
            this._start = y1;
        }
        if (y2 > this._end) {
            this._end = y2;
        }
    };
    DirtyRowService.prototype.markAllDirty = function () {
        this.markRangeDirty(0, this._bufferService.rows - 1);
    };
    DirtyRowService = __decorate([
        __param(0, Services_1.IBufferService)
    ], DirtyRowService);
    return DirtyRowService;
}());
exports.DirtyRowService = DirtyRowService;


/***/ }),

/***/ "./out/common/services/InstantiationService.js":
/*!*****************************************************!*\
  !*** ./out/common/services/InstantiationService.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
var ServiceCollection = (function () {
    function ServiceCollection() {
        var entries = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            entries[_i] = arguments[_i];
        }
        this._entries = new Map();
        for (var _a = 0, entries_1 = entries; _a < entries_1.length; _a++) {
            var _b = entries_1[_a], id = _b[0], service = _b[1];
            this.set(id, service);
        }
    }
    ServiceCollection.prototype.set = function (id, instance) {
        var result = this._entries.get(id);
        this._entries.set(id, instance);
        return result;
    };
    ServiceCollection.prototype.forEach = function (callback) {
        this._entries.forEach(function (value, key) { return callback(key, value); });
    };
    ServiceCollection.prototype.has = function (id) {
        return this._entries.has(id);
    };
    ServiceCollection.prototype.get = function (id) {
        return this._entries.get(id);
    };
    return ServiceCollection;
}());
exports.ServiceCollection = ServiceCollection;
var InstantiationService = (function () {
    function InstantiationService() {
        this._services = new ServiceCollection();
        this._services.set(Services_1.IInstantiationService, this);
    }
    InstantiationService.prototype.setService = function (id, instance) {
        this._services.set(id, instance);
    };
    InstantiationService.prototype.createInstance = function (ctor) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var serviceDependencies = ServiceRegistry_1.getServiceDependencies(ctor).sort(function (a, b) { return a.index - b.index; });
        var serviceArgs = [];
        for (var _a = 0, serviceDependencies_1 = serviceDependencies; _a < serviceDependencies_1.length; _a++) {
            var dependency = serviceDependencies_1[_a];
            var service = this._services.get(dependency.id);
            if (!service) {
                throw new Error("[createInstance] " + ctor.name + " depends on UNKNOWN service " + dependency.id + ".");
            }
            serviceArgs.push(service);
        }
        var firstServiceArgPos = serviceDependencies.length > 0 ? serviceDependencies[0].index : args.length;
        if (args.length !== firstServiceArgPos) {
            throw new Error("[createInstance] First service dependency of " + ctor.name + " at position " + (firstServiceArgPos + 1) + " conflicts with " + args.length + " static arguments");
        }
        return new (ctor.bind.apply(ctor, [void 0].concat(args.concat(serviceArgs))))();
    };
    return InstantiationService;
}());
exports.InstantiationService = InstantiationService;


/***/ }),

/***/ "./out/common/services/LogService.js":
/*!*******************************************!*\
  !*** ./out/common/services/LogService.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
Object.defineProperty(exports, "__esModule", { value: true });
var Services_1 = __webpack_require__(/*! common/services/Services */ "./out/common/services/Services.js");
var LogLevel;
(function (LogLevel) {
    LogLevel[LogLevel["DEBUG"] = 0] = "DEBUG";
    LogLevel[LogLevel["INFO"] = 1] = "INFO";
    LogLevel[LogLevel["WARN"] = 2] = "WARN";
    LogLevel[LogLevel["ERROR"] = 3] = "ERROR";
    LogLevel[LogLevel["OFF"] = 4] = "OFF";
})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));
var optionsKeyToLogLevel = {
    debug: LogLevel.DEBUG,
    info: LogLevel.INFO,
    warn: LogLevel.WARN,
    error: LogLevel.ERROR,
    off: LogLevel.OFF
};
var LOG_PREFIX = 'xterm.js: ';
var LogService = (function () {
    function LogService(_optionsService) {
        var _this = this;
        this._optionsService = _optionsService;
        this._updateLogLevel();
        this._optionsService.onOptionChange(function (key) {
            if (key === 'logLevel') {
                _this._updateLogLevel();
            }
        });
    }
    LogService.prototype._updateLogLevel = function () {
        this._logLevel = optionsKeyToLogLevel[this._optionsService.options.logLevel];
    };
    LogService.prototype.debug = function (message) {
        var _a;
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.DEBUG) {
            (_a = console.log).call.apply(_a, [console, LOG_PREFIX + message].concat(optionalParams));
        }
    };
    LogService.prototype.info = function (message) {
        var _a;
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.INFO) {
            (_a = console.info).call.apply(_a, [console, LOG_PREFIX + message].concat(optionalParams));
        }
    };
    LogService.prototype.warn = function (message) {
        var _a;
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.WARN) {
            (_a = console.warn).call.apply(_a, [console, LOG_PREFIX + message].concat(optionalParams));
        }
    };
    LogService.prototype.error = function (message) {
        var _a;
        var optionalParams = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            optionalParams[_i - 1] = arguments[_i];
        }
        if (this._logLevel <= LogLevel.ERROR) {
            (_a = console.error).call.apply(_a, [console, LOG_PREFIX + message].concat(optionalParams));
        }
    };
    LogService = __decorate([
        __param(0, Services_1.IOptionsService)
    ], LogService);
    return LogService;
}());
exports.LogService = LogService;


/***/ }),

/***/ "./out/common/services/OptionsService.js":
/*!***********************************************!*\
  !*** ./out/common/services/OptionsService.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var EventEmitter_1 = __webpack_require__(/*! common/EventEmitter */ "./out/common/EventEmitter.js");
var Platform_1 = __webpack_require__(/*! common/Platform */ "./out/common/Platform.js");
var Clone_1 = __webpack_require__(/*! common/Clone */ "./out/common/Clone.js");
exports.DEFAULT_BELL_SOUND = 'data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==';
exports.DEFAULT_OPTIONS = Object.freeze({
    cols: 80,
    rows: 24,
    cursorBlink: false,
    cursorStyle: 'block',
    bellSound: exports.DEFAULT_BELL_SOUND,
    bellStyle: 'none',
    drawBoldTextInBrightColors: true,
    fontFamily: 'courier-new, courier, monospace',
    fontSize: 15,
    fontWeight: 'normal',
    fontWeightBold: 'bold',
    lineHeight: 1.0,
    letterSpacing: 0,
    logLevel: 'info',
    scrollback: 1000,
    screenReaderMode: false,
    macOptionIsMeta: false,
    macOptionClickForcesSelection: false,
    disableStdin: false,
    allowTransparency: false,
    tabStopWidth: 8,
    theme: {},
    rightClickSelectsWord: Platform_1.isMac,
    rendererType: 'canvas',
    windowsMode: false,
    convertEol: false,
    termName: 'xterm',
    screenKeys: false,
    cancelEvents: false,
    useFlowControl: false,
    wordSeparator: ' ()[]{}\'"'
});
var CONSTRUCTOR_ONLY_OPTIONS = ['cols', 'rows'];
var OptionsService = (function () {
    function OptionsService(options) {
        var _this = this;
        this._onOptionChange = new EventEmitter_1.EventEmitter();
        this.options = Clone_1.clone(exports.DEFAULT_OPTIONS);
        Object.keys(options).forEach(function (k) {
            if (k in _this.options) {
                var newValue = options[k];
                _this.options[k] = newValue;
            }
        });
    }
    Object.defineProperty(OptionsService.prototype, "onOptionChange", {
        get: function () { return this._onOptionChange.event; },
        enumerable: true,
        configurable: true
    });
    OptionsService.prototype.setOption = function (key, value) {
        if (!(key in exports.DEFAULT_OPTIONS)) {
            throw new Error('No option with key "' + key + '"');
        }
        if (CONSTRUCTOR_ONLY_OPTIONS.indexOf(key) !== -1) {
            throw new Error("Option \"" + key + "\" can only be set in the constructor");
        }
        if (this.options[key] === value) {
            return;
        }
        value = this._sanitizeAndValidateOption(key, value);
        if (this.options[key] === value) {
            return;
        }
        this.options[key] = value;
        this._onOptionChange.fire(key);
    };
    OptionsService.prototype._sanitizeAndValidateOption = function (key, value) {
        switch (key) {
            case 'bellStyle':
            case 'cursorStyle':
            case 'fontWeight':
            case 'fontWeightBold':
            case 'rendererType':
            case 'wordSeparator':
                if (!value) {
                    value = exports.DEFAULT_OPTIONS[key];
                }
                break;
            case 'lineHeight':
            case 'tabStopWidth':
                if (value < 1) {
                    throw new Error(key + " cannot be less than 1, value: " + value);
                }
                break;
            case 'scrollback':
                value = Math.min(value, 4294967295);
                if (value < 0) {
                    throw new Error(key + " cannot be less than 0, value: " + value);
                }
                break;
        }
        return value;
    };
    OptionsService.prototype.getOption = function (key) {
        if (!(key in exports.DEFAULT_OPTIONS)) {
            throw new Error("No option with key \"" + key + "\"");
        }
        return this.options[key];
    };
    return OptionsService;
}());
exports.OptionsService = OptionsService;


/***/ }),

/***/ "./out/common/services/ServiceRegistry.js":
/*!************************************************!*\
  !*** ./out/common/services/ServiceRegistry.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var DI_TARGET = 'di$target';
var DI_DEPENDENCIES = 'di$dependencies';
exports.serviceRegistry = new Map();
function getServiceDependencies(ctor) {
    return ctor[DI_DEPENDENCIES] || [];
}
exports.getServiceDependencies = getServiceDependencies;
function createDecorator(id) {
    if (exports.serviceRegistry.has(id)) {
        return exports.serviceRegistry.get(id);
    }
    var decorator = function (target, key, index) {
        if (arguments.length !== 3) {
            throw new Error('@IServiceName-decorator can only be used to decorate a parameter');
        }
        storeServiceDependency(decorator, target, index);
    };
    decorator.toString = function () { return id; };
    exports.serviceRegistry.set(id, decorator);
    return decorator;
}
exports.createDecorator = createDecorator;
function storeServiceDependency(id, target, index) {
    if (target[DI_TARGET] === target) {
        target[DI_DEPENDENCIES].push({ id: id, index: index });
    }
    else {
        target[DI_DEPENDENCIES] = [{ id: id, index: index }];
        target[DI_TARGET] = target;
    }
}


/***/ }),

/***/ "./out/common/services/Services.js":
/*!*****************************************!*\
  !*** ./out/common/services/Services.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ServiceRegistry_1 = __webpack_require__(/*! common/services/ServiceRegistry */ "./out/common/services/ServiceRegistry.js");
exports.IBufferService = ServiceRegistry_1.createDecorator('BufferService');
exports.ICoreMouseService = ServiceRegistry_1.createDecorator('CoreMouseService');
exports.ICoreService = ServiceRegistry_1.createDecorator('CoreService');
exports.IDirtyRowService = ServiceRegistry_1.createDecorator('DirtyRowService');
exports.IInstantiationService = ServiceRegistry_1.createDecorator('InstantiationService');
exports.ILogService = ServiceRegistry_1.createDecorator('LogService');
exports.IOptionsService = ServiceRegistry_1.createDecorator('OptionsService');


/***/ }),

/***/ "./out/public/AddonManager.js":
/*!************************************!*\
  !*** ./out/public/AddonManager.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var AddonManager = (function () {
    function AddonManager() {
        this._addons = [];
    }
    AddonManager.prototype.dispose = function () {
        for (var i = this._addons.length - 1; i >= 0; i--) {
            this._addons[i].instance.dispose();
        }
    };
    AddonManager.prototype.loadAddon = function (terminal, instance) {
        var _this = this;
        var loadedAddon = {
            instance: instance,
            dispose: instance.dispose,
            isDisposed: false
        };
        this._addons.push(loadedAddon);
        instance.dispose = function () { return _this._wrappedAddonDispose(loadedAddon); };
        instance.activate(terminal);
    };
    AddonManager.prototype._wrappedAddonDispose = function (loadedAddon) {
        if (loadedAddon.isDisposed) {
            return;
        }
        var index = -1;
        for (var i = 0; i < this._addons.length; i++) {
            if (this._addons[i] === loadedAddon) {
                index = i;
                break;
            }
        }
        if (index === -1) {
            throw new Error('Could not dispose an addon that has not been loaded');
        }
        loadedAddon.isDisposed = true;
        loadedAddon.dispose.apply(loadedAddon.instance);
        this._addons.splice(index, 1);
    };
    return AddonManager;
}());
exports.AddonManager = AddonManager;


/***/ }),

/***/ "./out/public/Terminal.js":
/*!********************************!*\
  !*** ./out/public/Terminal.js ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Terminal_1 = __webpack_require__(/*! ../Terminal */ "./out/Terminal.js");
var Strings = __webpack_require__(/*! ../browser/LocalizableStrings */ "./out/browser/LocalizableStrings.js");
var AddonManager_1 = __webpack_require__(/*! ./AddonManager */ "./out/public/AddonManager.js");
var Terminal = (function () {
    function Terminal(options) {
        this._core = new Terminal_1.Terminal(options);
        this._addonManager = new AddonManager_1.AddonManager();
    }
    Object.defineProperty(Terminal.prototype, "onCursorMove", {
        get: function () { return this._core.onCursorMove; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onLineFeed", {
        get: function () { return this._core.onLineFeed; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onSelectionChange", {
        get: function () { return this._core.onSelectionChange; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onData", {
        get: function () { return this._core.onData; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onTitleChange", {
        get: function () { return this._core.onTitleChange; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onScroll", {
        get: function () { return this._core.onScroll; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onKey", {
        get: function () { return this._core.onKey; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onRender", {
        get: function () { return this._core.onRender; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "onResize", {
        get: function () { return this._core.onResize; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "element", {
        get: function () { return this._core.element; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "parser", {
        get: function () {
            if (!this._parser) {
                this._parser = new ParserApi(this._core);
            }
            return this._parser;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "textarea", {
        get: function () { return this._core.textarea; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "rows", {
        get: function () { return this._core.rows; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "cols", {
        get: function () { return this._core.cols; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "buffer", {
        get: function () { return new BufferApiView(this._core.buffer); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Terminal.prototype, "markers", {
        get: function () { return this._core.markers; },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype.blur = function () {
        this._core.blur();
    };
    Terminal.prototype.focus = function () {
        this._core.focus();
    };
    Terminal.prototype.resize = function (columns, rows) {
        this._verifyIntegers(columns, rows);
        this._core.resize(columns, rows);
    };
    Terminal.prototype.writeln = function (data) {
        this._core.writeln(data);
    };
    Terminal.prototype.open = function (parent) {
        this._core.open(parent);
    };
    Terminal.prototype.attachCustomKeyEventHandler = function (customKeyEventHandler) {
        this._core.attachCustomKeyEventHandler(customKeyEventHandler);
    };
    Terminal.prototype.registerLinkMatcher = function (regex, handler, options) {
        return this._core.registerLinkMatcher(regex, handler, options);
    };
    Terminal.prototype.deregisterLinkMatcher = function (matcherId) {
        this._core.deregisterLinkMatcher(matcherId);
    };
    Terminal.prototype.registerCharacterJoiner = function (handler) {
        return this._core.registerCharacterJoiner(handler);
    };
    Terminal.prototype.deregisterCharacterJoiner = function (joinerId) {
        this._core.deregisterCharacterJoiner(joinerId);
    };
    Terminal.prototype.addMarker = function (cursorYOffset) {
        this._verifyIntegers(cursorYOffset);
        return this._core.addMarker(cursorYOffset);
    };
    Terminal.prototype.hasSelection = function () {
        return this._core.hasSelection();
    };
    Terminal.prototype.select = function (column, row, length) {
        this._verifyIntegers(column, row, length);
        this._core.select(column, row, length);
    };
    Terminal.prototype.getSelection = function () {
        return this._core.getSelection();
    };
    Terminal.prototype.getSelectionPosition = function () {
        return this._core.getSelectionPosition();
    };
    Terminal.prototype.clearSelection = function () {
        this._core.clearSelection();
    };
    Terminal.prototype.selectAll = function () {
        this._core.selectAll();
    };
    Terminal.prototype.selectLines = function (start, end) {
        this._verifyIntegers(start, end);
        this._core.selectLines(start, end);
    };
    Terminal.prototype.dispose = function () {
        this._addonManager.dispose();
        this._core.dispose();
    };
    Terminal.prototype.scrollLines = function (amount) {
        this._verifyIntegers(amount);
        this._core.scrollLines(amount);
    };
    Terminal.prototype.scrollPages = function (pageCount) {
        this._verifyIntegers(pageCount);
        this._core.scrollPages(pageCount);
    };
    Terminal.prototype.scrollToTop = function () {
        this._core.scrollToTop();
    };
    Terminal.prototype.scrollToBottom = function () {
        this._core.scrollToBottom();
    };
    Terminal.prototype.scrollToLine = function (line) {
        this._verifyIntegers(line);
        this._core.scrollToLine(line);
    };
    Terminal.prototype.clear = function () {
        this._core.clear();
    };
    Terminal.prototype.write = function (data) {
        this._core.write(data);
    };
    Terminal.prototype.writeUtf8 = function (data) {
        this._core.writeUtf8(data);
    };
    Terminal.prototype.paste = function (data) {
        this._core.paste(data);
    };
    Terminal.prototype.getOption = function (key) {
        return this._core.optionsService.getOption(key);
    };
    Terminal.prototype.setOption = function (key, value) {
        this._core.optionsService.setOption(key, value);
    };
    Terminal.prototype.refresh = function (start, end) {
        this._verifyIntegers(start, end);
        this._core.refresh(start, end);
    };
    Terminal.prototype.reset = function () {
        this._core.reset();
    };
    Terminal.prototype.loadAddon = function (addon) {
        return this._addonManager.loadAddon(this, addon);
    };
    Object.defineProperty(Terminal, "strings", {
        get: function () {
            return Strings;
        },
        enumerable: true,
        configurable: true
    });
    Terminal.prototype._verifyIntegers = function () {
        var values = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            values[_i] = arguments[_i];
        }
        values.forEach(function (value) {
            if (value % 1 !== 0) {
                throw new Error('This API does not accept floating point numbers');
            }
        });
    };
    return Terminal;
}());
exports.Terminal = Terminal;
var BufferApiView = (function () {
    function BufferApiView(_buffer) {
        this._buffer = _buffer;
    }
    Object.defineProperty(BufferApiView.prototype, "cursorY", {
        get: function () { return this._buffer.y; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "cursorX", {
        get: function () { return this._buffer.x; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "viewportY", {
        get: function () { return this._buffer.ydisp; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "baseY", {
        get: function () { return this._buffer.ybase; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferApiView.prototype, "length", {
        get: function () { return this._buffer.lines.length; },
        enumerable: true,
        configurable: true
    });
    BufferApiView.prototype.getLine = function (y) {
        var line = this._buffer.lines.get(y);
        if (!line) {
            return undefined;
        }
        return new BufferLineApiView(line);
    };
    return BufferApiView;
}());
var BufferLineApiView = (function () {
    function BufferLineApiView(_line) {
        this._line = _line;
    }
    Object.defineProperty(BufferLineApiView.prototype, "isWrapped", {
        get: function () { return this._line.isWrapped; },
        enumerable: true,
        configurable: true
    });
    BufferLineApiView.prototype.getCell = function (x) {
        if (x < 0 || x >= this._line.length) {
            return undefined;
        }
        return new BufferCellApiView(this._line, x);
    };
    BufferLineApiView.prototype.translateToString = function (trimRight, startColumn, endColumn) {
        return this._line.translateToString(trimRight, startColumn, endColumn);
    };
    return BufferLineApiView;
}());
var BufferCellApiView = (function () {
    function BufferCellApiView(_line, _x) {
        this._line = _line;
        this._x = _x;
    }
    Object.defineProperty(BufferCellApiView.prototype, "char", {
        get: function () { return this._line.getString(this._x); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BufferCellApiView.prototype, "width", {
        get: function () { return this._line.getWidth(this._x); },
        enumerable: true,
        configurable: true
    });
    return BufferCellApiView;
}());
var ParserApi = (function () {
    function ParserApi(_core) {
        this._core = _core;
    }
    ParserApi.prototype.addCsiHandler = function (id, callback) {
        return this._core.addCsiHandler(id, function (params) { return callback(params.toArray()); });
    };
    ParserApi.prototype.addDcsHandler = function (id, callback) {
        return this._core.addDcsHandler(id, function (data, params) { return callback(data, params.toArray()); });
    };
    ParserApi.prototype.addEscHandler = function (id, handler) {
        return this._core.addEscHandler(id, handler);
    };
    ParserApi.prototype.addOscHandler = function (ident, callback) {
        return this._core.addOscHandler(ident, callback);
    };
    return ParserApi;
}());


/***/ }),

/***/ "./out/renderer/CursorRenderLayer.js":
/*!*******************************************!*\
  !*** ./out/renderer/CursorRenderLayer.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var BaseRenderLayer_1 = __webpack_require__(/*! ../browser/renderer/BaseRenderLayer */ "./out/browser/renderer/BaseRenderLayer.js");
var CellData_1 = __webpack_require__(/*! common/buffer/CellData */ "./out/common/buffer/CellData.js");
var BLINK_INTERVAL = 600;
var CursorRenderLayer = (function (_super) {
    __extends(CursorRenderLayer, _super);
    function CursorRenderLayer(container, zIndex, colors, _terminal, rendererId, bufferService, optionsService) {
        var _this = _super.call(this, container, 'cursor', zIndex, true, colors, rendererId, bufferService, optionsService) || this;
        _this._terminal = _terminal;
        _this.bufferService = bufferService;
        _this.optionsService = optionsService;
        _this._cell = new CellData_1.CellData();
        _this._state = {
            x: null,
            y: null,
            isFocused: null,
            style: null,
            width: null
        };
        _this._cursorRenderers = {
            'bar': _this._renderBarCursor.bind(_this),
            'block': _this._renderBlockCursor.bind(_this),
            'underline': _this._renderUnderlineCursor.bind(_this)
        };
        return _this;
    }
    CursorRenderLayer.prototype.resize = function (dim) {
        _super.prototype.resize.call(this, dim);
        this._state = {
            x: null,
            y: null,
            isFocused: null,
            style: null,
            width: null
        };
    };
    CursorRenderLayer.prototype.reset = function () {
        this._clearCursor();
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.dispose();
            this._cursorBlinkStateManager = null;
            this.onOptionsChanged();
        }
    };
    CursorRenderLayer.prototype.onBlur = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.pause();
        }
        this._terminal.refresh(this._bufferService.buffer.y, this._bufferService.buffer.y);
    };
    CursorRenderLayer.prototype.onFocus = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.resume();
        }
        else {
            this._terminal.refresh(this._bufferService.buffer.y, this._bufferService.buffer.y);
        }
    };
    CursorRenderLayer.prototype.onOptionsChanged = function () {
        var _this = this;
        if (this._optionsService.options.cursorBlink) {
            if (!this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager = new CursorBlinkStateManager(this._terminal.isFocused, function () {
                    _this._render(true);
                });
            }
        }
        else {
            if (this._cursorBlinkStateManager) {
                this._cursorBlinkStateManager.dispose();
                this._cursorBlinkStateManager = null;
            }
            this._terminal.refresh(this._bufferService.buffer.y, this._bufferService.buffer.y);
        }
    };
    CursorRenderLayer.prototype.onCursorMove = function () {
        if (this._cursorBlinkStateManager) {
            this._cursorBlinkStateManager.restartBlinkAnimation();
        }
    };
    CursorRenderLayer.prototype.onGridChanged = function (startRow, endRow) {
        if (!this._cursorBlinkStateManager || this._cursorBlinkStateManager.isPaused) {
            this._render(false);
        }
        else {
            this._cursorBlinkStateManager.restartBlinkAnimation();
        }
    };
    CursorRenderLayer.prototype._render = function (triggeredByAnimationFrame) {
        if (!this._terminal.cursorState || this._terminal.cursorHidden) {
            this._clearCursor();
            return;
        }
        var cursorY = this._bufferService.buffer.ybase + this._bufferService.buffer.y;
        var viewportRelativeCursorY = cursorY - this._bufferService.buffer.ydisp;
        if (viewportRelativeCursorY < 0 || viewportRelativeCursorY >= this._bufferService.rows) {
            this._clearCursor();
            return;
        }
        this._bufferService.buffer.lines.get(cursorY).loadCell(this._bufferService.buffer.x, this._cell);
        if (this._cell.content === undefined) {
            return;
        }
        if (!this._terminal.isFocused) {
            this._clearCursor();
            this._ctx.save();
            this._ctx.fillStyle = this._colors.cursor.css;
            this._renderBlurCursor(this._bufferService.buffer.x, viewportRelativeCursorY, this._cell);
            this._ctx.restore();
            this._state.x = this._bufferService.buffer.x;
            this._state.y = viewportRelativeCursorY;
            this._state.isFocused = false;
            this._state.style = this._optionsService.options.cursorStyle;
            this._state.width = this._cell.getWidth();
            return;
        }
        if (this._cursorBlinkStateManager && !this._cursorBlinkStateManager.isCursorVisible) {
            this._clearCursor();
            return;
        }
        if (this._state) {
            if (this._state.x === this._bufferService.buffer.x &&
                this._state.y === viewportRelativeCursorY &&
                this._state.isFocused === this._terminal.isFocused &&
                this._state.style === this._optionsService.options.cursorStyle &&
                this._state.width === this._cell.getWidth()) {
                return;
            }
            this._clearCursor();
        }
        this._ctx.save();
        this._cursorRenderers[this._optionsService.options.cursorStyle || 'block'](this._bufferService.buffer.x, viewportRelativeCursorY, this._cell);
        this._ctx.restore();
        this._state.x = this._bufferService.buffer.x;
        this._state.y = viewportRelativeCursorY;
        this._state.isFocused = false;
        this._state.style = this._optionsService.options.cursorStyle;
        this._state.width = this._cell.getWidth();
    };
    CursorRenderLayer.prototype._clearCursor = function () {
        if (this._state) {
            this._clearCells(this._state.x, this._state.y, this._state.width, 1);
            this._state = {
                x: null,
                y: null,
                isFocused: null,
                style: null,
                width: null
            };
        }
    };
    CursorRenderLayer.prototype._renderBarCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillLeftLineAtCell(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlockCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillCells(x, y, cell.getWidth(), 1);
        this._ctx.fillStyle = this._colors.cursorAccent.css;
        this._fillCharTrueColor(cell, x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderUnderlineCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.fillStyle = this._colors.cursor.css;
        this._fillBottomLineAtCells(x, y);
        this._ctx.restore();
    };
    CursorRenderLayer.prototype._renderBlurCursor = function (x, y, cell) {
        this._ctx.save();
        this._ctx.strokeStyle = this._colors.cursor.css;
        this._strokeRectAtCell(x, y, cell.getWidth(), 1);
        this._ctx.restore();
    };
    return CursorRenderLayer;
}(BaseRenderLayer_1.BaseRenderLayer));
exports.CursorRenderLayer = CursorRenderLayer;
var CursorBlinkStateManager = (function () {
    function CursorBlinkStateManager(isFocused, _renderCallback) {
        this._renderCallback = _renderCallback;
        this.isCursorVisible = true;
        if (isFocused) {
            this._restartInterval();
        }
    }
    Object.defineProperty(CursorBlinkStateManager.prototype, "isPaused", {
        get: function () { return !(this._blinkStartTimeout || this._blinkInterval); },
        enumerable: true,
        configurable: true
    });
    CursorBlinkStateManager.prototype.dispose = function () {
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = null;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = null;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = null;
        }
    };
    CursorBlinkStateManager.prototype.restartBlinkAnimation = function () {
        var _this = this;
        if (this.isPaused) {
            return;
        }
        this._animationTimeRestarted = Date.now();
        this.isCursorVisible = true;
        if (!this._animationFrame) {
            this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = null;
            });
        }
    };
    CursorBlinkStateManager.prototype._restartInterval = function (timeToStart) {
        var _this = this;
        if (timeToStart === void 0) { timeToStart = BLINK_INTERVAL; }
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
        }
        this._blinkStartTimeout = setTimeout(function () {
            if (_this._animationTimeRestarted) {
                var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                _this._animationTimeRestarted = null;
                if (time > 0) {
                    _this._restartInterval(time);
                    return;
                }
            }
            _this.isCursorVisible = false;
            _this._animationFrame = window.requestAnimationFrame(function () {
                _this._renderCallback();
                _this._animationFrame = null;
            });
            _this._blinkInterval = setInterval(function () {
                if (_this._animationTimeRestarted) {
                    var time = BLINK_INTERVAL - (Date.now() - _this._animationTimeRestarted);
                    _this._animationTimeRestarted = null;
                    _this._restartInterval(time);
                    return;
                }
                _this.isCursorVisible = !_this.isCursorVisible;
                _this._animationFrame = window.requestAnimationFrame(function () {
                    _this._renderCallback();
                    _this._animationFrame = null;
                });
            }, BLINK_INTERVAL);
        }, timeToStart);
    };
    CursorBlinkStateManager.prototype.pause = function () {
        this.isCursorVisible = true;
        if (this._blinkInterval) {
            window.clearInterval(this._blinkInterval);
            this._blinkInterval = null;
        }
        if (this._blinkStartTimeout) {
            window.clearTimeout(this._blinkStartTimeout);
            this._blinkStartTimeout = null;
        }
        if (this._animationFrame) {
            window.cancelAnimationFrame(this._animationFrame);
            this._animationFrame = null;
        }
    };
    CursorBlinkStateManager.prototype.resume = function () {
        this._animationTimeRestarted = null;
        this._restartInterval();
        this.restartBlinkAnimation();
    };
    return CursorBlinkStateManager;
}());


/***/ }),

/***/ "./out/renderer/Renderer.js":
/*!**********************************!*\
  !*** ./out/renderer/Renderer.js ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var TextRenderLayer_1 = __webpack_require__(/*! ../browser/renderer/TextRenderLayer */ "./out/browser/renderer/TextRenderLayer.js");
var SelectionRenderLayer_1 = __webpack_require__(/*! ../browser/renderer/SelectionRenderLayer */ "./out/browser/renderer/SelectionRenderLayer.js");
var CursorRenderLayer_1 = __webpack_require__(/*! ./CursorRenderLayer */ "./out/renderer/CursorRenderLayer.js");
var LinkRenderLayer_1 = __webpack_require__(/*! ../browser/renderer/LinkRenderLayer */ "./out/browser/renderer/LinkRenderLayer.js");
var CharacterJoinerRegistry_1 = __webpack_require__(/*! browser/renderer/CharacterJoinerRegistry */ "./out/browser/renderer/CharacterJoinerRegistry.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var CharAtlasCache_1 = __webpack_require__(/*! browser/renderer/atlas/CharAtlasCache */ "./out/browser/renderer/atlas/CharAtlasCache.js");
var nextRendererId = 1;
var Renderer = (function (_super) {
    __extends(Renderer, _super);
    function Renderer(_colors, _terminal, bufferService, _charSizeService, optionsService) {
        var _this = _super.call(this) || this;
        _this._colors = _colors;
        _this._terminal = _terminal;
        _this.bufferService = bufferService;
        _this._charSizeService = _charSizeService;
        _this.optionsService = optionsService;
        _this._id = nextRendererId++;
        var allowTransparency = _this._terminal.options.allowTransparency;
        _this._characterJoinerRegistry = new CharacterJoinerRegistry_1.CharacterJoinerRegistry(bufferService);
        _this._renderLayers = [
            new TextRenderLayer_1.TextRenderLayer(_this._terminal.screenElement, 0, _this._colors, _this._characterJoinerRegistry, allowTransparency, _this._id, bufferService, optionsService),
            new SelectionRenderLayer_1.SelectionRenderLayer(_this._terminal.screenElement, 1, _this._colors, _this._id, bufferService, optionsService),
            new LinkRenderLayer_1.LinkRenderLayer(_this._terminal.screenElement, 2, _this._colors, _this._id, _this._terminal.linkifier, bufferService, optionsService),
            new CursorRenderLayer_1.CursorRenderLayer(_this._terminal.screenElement, 3, _this._colors, _this._terminal, _this._id, bufferService, optionsService)
        ];
        _this.dimensions = {
            scaledCharWidth: null,
            scaledCharHeight: null,
            scaledCellWidth: null,
            scaledCellHeight: null,
            scaledCharLeft: null,
            scaledCharTop: null,
            scaledCanvasWidth: null,
            scaledCanvasHeight: null,
            canvasWidth: null,
            canvasHeight: null,
            actualCellWidth: null,
            actualCellHeight: null
        };
        _this._devicePixelRatio = window.devicePixelRatio;
        _this._updateDimensions();
        _this.onOptionsChanged();
        return _this;
    }
    Renderer.prototype.dispose = function () {
        _super.prototype.dispose.call(this);
        this._renderLayers.forEach(function (l) { return l.dispose(); });
        CharAtlasCache_1.removeTerminalFromCache(this._id);
    };
    Renderer.prototype.onDevicePixelRatioChange = function () {
        if (this._devicePixelRatio !== window.devicePixelRatio) {
            this._devicePixelRatio = window.devicePixelRatio;
            this.onResize(this._terminal.cols, this._terminal.rows);
        }
    };
    Renderer.prototype.setColors = function (colors) {
        var _this = this;
        this._colors = colors;
        this._renderLayers.forEach(function (l) {
            l.setColors(_this._colors);
            l.reset();
        });
    };
    Renderer.prototype.onResize = function (cols, rows) {
        var _this = this;
        this._updateDimensions();
        this._renderLayers.forEach(function (l) { return l.resize(_this.dimensions); });
        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + "px";
    };
    Renderer.prototype.onCharSizeChanged = function () {
        this.onResize(this._terminal.cols, this._terminal.rows);
    };
    Renderer.prototype.onBlur = function () {
        this._runOperation(function (l) { return l.onBlur(); });
    };
    Renderer.prototype.onFocus = function () {
        this._runOperation(function (l) { return l.onFocus(); });
    };
    Renderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        if (columnSelectMode === void 0) { columnSelectMode = false; }
        this._runOperation(function (l) { return l.onSelectionChanged(start, end, columnSelectMode); });
    };
    Renderer.prototype.onCursorMove = function () {
        this._runOperation(function (l) { return l.onCursorMove(); });
    };
    Renderer.prototype.onOptionsChanged = function () {
        this._runOperation(function (l) { return l.onOptionsChanged(); });
    };
    Renderer.prototype.clear = function () {
        this._runOperation(function (l) { return l.reset(); });
    };
    Renderer.prototype._runOperation = function (operation) {
        this._renderLayers.forEach(function (l) { return operation(l); });
    };
    Renderer.prototype.renderRows = function (start, end) {
        this._renderLayers.forEach(function (l) { return l.onGridChanged(start, end); });
    };
    Renderer.prototype._updateDimensions = function () {
        if (!this._charSizeService.hasValidSize) {
            return;
        }
        this.dimensions.scaledCharWidth = Math.floor(this._charSizeService.width * window.devicePixelRatio);
        this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);
        this.dimensions.scaledCharTop = this._terminal.options.lineHeight === 1 ? 0 : Math.round((this.dimensions.scaledCellHeight - this.dimensions.scaledCharHeight) / 2);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);
        this.dimensions.scaledCharLeft = Math.floor(this._terminal.options.letterSpacing / 2);
        this.dimensions.scaledCanvasHeight = this._terminal.rows * this.dimensions.scaledCellHeight;
        this.dimensions.scaledCanvasWidth = this._terminal.cols * this.dimensions.scaledCellWidth;
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;
    };
    Renderer.prototype.registerCharacterJoiner = function (handler) {
        return this._characterJoinerRegistry.registerCharacterJoiner(handler);
    };
    Renderer.prototype.deregisterCharacterJoiner = function (joinerId) {
        return this._characterJoinerRegistry.deregisterCharacterJoiner(joinerId);
    };
    return Renderer;
}(Lifecycle_1.Disposable));
exports.Renderer = Renderer;


/***/ }),

/***/ "./out/renderer/dom/DomRenderer.js":
/*!*****************************************!*\
  !*** ./out/renderer/dom/DomRenderer.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var DomRendererRowFactory_1 = __webpack_require__(/*! browser/renderer/dom/DomRendererRowFactory */ "./out/browser/renderer/dom/DomRendererRowFactory.js");
var Constants_1 = __webpack_require__(/*! browser/renderer/atlas/Constants */ "./out/browser/renderer/atlas/Constants.js");
var Lifecycle_1 = __webpack_require__(/*! common/Lifecycle */ "./out/common/Lifecycle.js");
var TERMINAL_CLASS_PREFIX = 'xterm-dom-renderer-owner-';
var ROW_CONTAINER_CLASS = 'xterm-rows';
var FG_CLASS_PREFIX = 'xterm-fg-';
var BG_CLASS_PREFIX = 'xterm-bg-';
var FOCUS_CLASS = 'xterm-focus';
var SELECTION_CLASS = 'xterm-selection';
var nextTerminalId = 1;
var DomRenderer = (function (_super) {
    __extends(DomRenderer, _super);
    function DomRenderer(_terminal, _colors, _charSizeService, _optionsService) {
        var _this = _super.call(this) || this;
        _this._terminal = _terminal;
        _this._colors = _colors;
        _this._charSizeService = _charSizeService;
        _this._optionsService = _optionsService;
        _this._terminalClass = nextTerminalId++;
        _this._rowElements = [];
        _this._rowContainer = document.createElement('div');
        _this._rowContainer.classList.add(ROW_CONTAINER_CLASS);
        _this._rowContainer.style.lineHeight = 'normal';
        _this._rowContainer.setAttribute('aria-hidden', 'true');
        _this._refreshRowElements(_this._terminal.cols, _this._terminal.rows);
        _this._selectionContainer = document.createElement('div');
        _this._selectionContainer.classList.add(SELECTION_CLASS);
        _this._selectionContainer.setAttribute('aria-hidden', 'true');
        _this.dimensions = {
            scaledCharWidth: null,
            scaledCharHeight: null,
            scaledCellWidth: null,
            scaledCellHeight: null,
            scaledCharLeft: null,
            scaledCharTop: null,
            scaledCanvasWidth: null,
            scaledCanvasHeight: null,
            canvasWidth: null,
            canvasHeight: null,
            actualCellWidth: null,
            actualCellHeight: null
        };
        _this._updateDimensions();
        _this._injectCss();
        _this._rowFactory = new DomRendererRowFactory_1.DomRendererRowFactory(document, _this._optionsService);
        _this._terminal.element.classList.add(TERMINAL_CLASS_PREFIX + _this._terminalClass);
        _this._terminal.screenElement.appendChild(_this._rowContainer);
        _this._terminal.screenElement.appendChild(_this._selectionContainer);
        _this._terminal.linkifier.onLinkHover(function (e) { return _this._onLinkHover(e); });
        _this._terminal.linkifier.onLinkLeave(function (e) { return _this._onLinkLeave(e); });
        return _this;
    }
    DomRenderer.prototype.dispose = function () {
        this._terminal.element.classList.remove(TERMINAL_CLASS_PREFIX + this._terminalClass);
        this._terminal.screenElement.removeChild(this._rowContainer);
        this._terminal.screenElement.removeChild(this._selectionContainer);
        this._terminal.screenElement.removeChild(this._themeStyleElement);
        this._terminal.screenElement.removeChild(this._dimensionsStyleElement);
        _super.prototype.dispose.call(this);
    };
    DomRenderer.prototype._updateDimensions = function () {
        var _this = this;
        this.dimensions.scaledCharWidth = this._charSizeService.width * window.devicePixelRatio;
        this.dimensions.scaledCharHeight = Math.ceil(this._charSizeService.height * window.devicePixelRatio);
        this.dimensions.scaledCellWidth = this.dimensions.scaledCharWidth + Math.round(this._terminal.options.letterSpacing);
        this.dimensions.scaledCellHeight = Math.floor(this.dimensions.scaledCharHeight * this._terminal.options.lineHeight);
        this.dimensions.scaledCharLeft = 0;
        this.dimensions.scaledCharTop = 0;
        this.dimensions.scaledCanvasWidth = this.dimensions.scaledCellWidth * this._terminal.cols;
        this.dimensions.scaledCanvasHeight = this.dimensions.scaledCellHeight * this._terminal.rows;
        this.dimensions.canvasWidth = Math.round(this.dimensions.scaledCanvasWidth / window.devicePixelRatio);
        this.dimensions.canvasHeight = Math.round(this.dimensions.scaledCanvasHeight / window.devicePixelRatio);
        this.dimensions.actualCellWidth = this.dimensions.canvasWidth / this._terminal.cols;
        this.dimensions.actualCellHeight = this.dimensions.canvasHeight / this._terminal.rows;
        this._rowElements.forEach(function (element) {
            element.style.width = _this.dimensions.canvasWidth + "px";
            element.style.height = _this.dimensions.actualCellHeight + "px";
            element.style.lineHeight = _this.dimensions.actualCellHeight + "px";
            element.style.overflow = 'hidden';
        });
        if (!this._dimensionsStyleElement) {
            this._dimensionsStyleElement = document.createElement('style');
            this._terminal.screenElement.appendChild(this._dimensionsStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " span {" +
            " display: inline-block;" +
            " height: 100%;" +
            " vertical-align: top;" +
            (" width: " + this.dimensions.actualCellWidth + "px") +
            "}";
        this._dimensionsStyleElement.innerHTML = styles;
        this._selectionContainer.style.height = this._terminal._viewportElement.style.height;
        this._terminal.screenElement.style.width = this.dimensions.canvasWidth + "px";
        this._terminal.screenElement.style.height = this.dimensions.canvasHeight + "px";
    };
    DomRenderer.prototype.setColors = function (colors) {
        this._colors = colors;
        this._injectCss();
    };
    DomRenderer.prototype._injectCss = function () {
        var _this = this;
        if (!this._themeStyleElement) {
            this._themeStyleElement = document.createElement('style');
            this._terminal.screenElement.appendChild(this._themeStyleElement);
        }
        var styles = this._terminalSelector + " ." + ROW_CONTAINER_CLASS + " {" +
            (" color: " + this._colors.foreground.css + ";") +
            (" background-color: " + this._colors.background.css + ";") +
            (" font-family: " + this._terminal.options.fontFamily + ";") +
            (" font-size: " + this._terminal.options.fontSize + "px;") +
            "}";
        styles +=
            this._terminalSelector + " span:not(." + DomRendererRowFactory_1.BOLD_CLASS + ") {" +
                (" font-weight: " + this._terminal.options.fontWeight + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.BOLD_CLASS + " {") +
                (" font-weight: " + this._terminal.options.fontWeightBold + ";") +
                "}" +
                (this._terminalSelector + " span." + DomRendererRowFactory_1.ITALIC_CLASS + " {") +
                " font-style: italic;" +
                "}";
        styles +=
            "@keyframes blink_box_shadow {" +
                " 50% {" +
                "  box-shadow: none;" +
                " }" +
                "}";
        styles +=
            "@keyframes blink_block {" +
                " 0% {" +
                ("  background-color: " + this._colors.cursor.css + ";") +
                ("  color: " + this._colors.cursorAccent.css + ";") +
                " }" +
                " 50% {" +
                ("  background-color: " + this._colors.cursorAccent.css + ";") +
                ("  color: " + this._colors.cursor.css + ";") +
                " }" +
                "}";
        styles +=
            this._terminalSelector + " ." + ROW_CONTAINER_CLASS + ":not(." + FOCUS_CLASS + ") ." + DomRendererRowFactory_1.CURSOR_CLASS + " {" +
                (" outline: 1px solid " + this._colors.cursor.css + ";") +
                " outline-offset: -1px;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + ":not(." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + ") {") +
                " animation: blink_box_shadow 1s step-end infinite;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_BLINK_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {") +
                " animation: blink_block 1s step-end infinite;" +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BLOCK_CLASS + " {") +
                (" background-color: " + this._colors.cursor.css + ";") +
                (" color: " + this._colors.cursorAccent.css + ";") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_BAR_CLASS + " {") +
                (" box-shadow: 1px 0 0 " + this._colors.cursor.css + " inset;") +
                "}" +
                (this._terminalSelector + " ." + ROW_CONTAINER_CLASS + "." + FOCUS_CLASS + " ." + DomRendererRowFactory_1.CURSOR_CLASS + "." + DomRendererRowFactory_1.CURSOR_STYLE_UNDERLINE_CLASS + " {") +
                (" box-shadow: 0 -1px 0 " + this._colors.cursor.css + " inset;") +
                "}";
        styles +=
            this._terminalSelector + " ." + SELECTION_CLASS + " {" +
                " position: absolute;" +
                " top: 0;" +
                " left: 0;" +
                " z-index: 1;" +
                " pointer-events: none;" +
                "}" +
                (this._terminalSelector + " ." + SELECTION_CLASS + " div {") +
                " position: absolute;" +
                (" background-color: " + this._colors.selection.css + ";") +
                "}";
        this._colors.ansi.forEach(function (c, i) {
            styles +=
                _this._terminalSelector + " ." + FG_CLASS_PREFIX + i + " { color: " + c.css + "; }" +
                    (_this._terminalSelector + " ." + BG_CLASS_PREFIX + i + " { background-color: " + c.css + "; }");
        });
        styles +=
            this._terminalSelector + " ." + FG_CLASS_PREFIX + Constants_1.INVERTED_DEFAULT_COLOR + " { color: " + this._colors.background.css + "; }" +
                (this._terminalSelector + " ." + BG_CLASS_PREFIX + Constants_1.INVERTED_DEFAULT_COLOR + " { background-color: " + this._colors.foreground.css + "; }");
        this._themeStyleElement.innerHTML = styles;
    };
    DomRenderer.prototype.onDevicePixelRatioChange = function () {
        this._updateDimensions();
    };
    DomRenderer.prototype._refreshRowElements = function (cols, rows) {
        for (var i = this._rowElements.length; i <= rows; i++) {
            var row = document.createElement('div');
            this._rowContainer.appendChild(row);
            this._rowElements.push(row);
        }
        while (this._rowElements.length > rows) {
            this._rowContainer.removeChild(this._rowElements.pop());
        }
    };
    DomRenderer.prototype.onResize = function (cols, rows) {
        this._refreshRowElements(cols, rows);
        this._updateDimensions();
    };
    DomRenderer.prototype.onCharSizeChanged = function () {
        this._updateDimensions();
    };
    DomRenderer.prototype.onBlur = function () {
        this._rowContainer.classList.remove(FOCUS_CLASS);
    };
    DomRenderer.prototype.onFocus = function () {
        this._rowContainer.classList.add(FOCUS_CLASS);
    };
    DomRenderer.prototype.onSelectionChanged = function (start, end, columnSelectMode) {
        while (this._selectionContainer.children.length) {
            this._selectionContainer.removeChild(this._selectionContainer.children[0]);
        }
        if (!start || !end) {
            return;
        }
        var viewportStartRow = start[1] - this._terminal.buffer.ydisp;
        var viewportEndRow = end[1] - this._terminal.buffer.ydisp;
        var viewportCappedStartRow = Math.max(viewportStartRow, 0);
        var viewportCappedEndRow = Math.min(viewportEndRow, this._terminal.rows - 1);
        if (viewportCappedStartRow >= this._terminal.rows || viewportCappedEndRow < 0) {
            return;
        }
        var documentFragment = document.createDocumentFragment();
        if (columnSelectMode) {
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, start[0], end[0], viewportCappedEndRow - viewportCappedStartRow + 1));
        }
        else {
            var startCol = viewportStartRow === viewportCappedStartRow ? start[0] : 0;
            var endCol = viewportCappedStartRow === viewportCappedEndRow ? end[0] : this._terminal.cols;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow, startCol, endCol));
            var middleRowsCount = viewportCappedEndRow - viewportCappedStartRow - 1;
            documentFragment.appendChild(this._createSelectionElement(viewportCappedStartRow + 1, 0, this._terminal.cols, middleRowsCount));
            if (viewportCappedStartRow !== viewportCappedEndRow) {
                var endCol_1 = viewportEndRow === viewportCappedEndRow ? end[0] : this._terminal.cols;
                documentFragment.appendChild(this._createSelectionElement(viewportCappedEndRow, 0, endCol_1));
            }
        }
        this._selectionContainer.appendChild(documentFragment);
    };
    DomRenderer.prototype._createSelectionElement = function (row, colStart, colEnd, rowCount) {
        if (rowCount === void 0) { rowCount = 1; }
        var element = document.createElement('div');
        element.style.height = rowCount * this.dimensions.actualCellHeight + "px";
        element.style.top = row * this.dimensions.actualCellHeight + "px";
        element.style.left = colStart * this.dimensions.actualCellWidth + "px";
        element.style.width = this.dimensions.actualCellWidth * (colEnd - colStart) + "px";
        return element;
    };
    DomRenderer.prototype.onCursorMove = function () {
    };
    DomRenderer.prototype.onOptionsChanged = function () {
        this._updateDimensions();
        this._injectCss();
        this._terminal.refresh(0, this._terminal.rows - 1);
    };
    DomRenderer.prototype.clear = function () {
        this._rowElements.forEach(function (e) { return e.innerHTML = ''; });
    };
    DomRenderer.prototype.renderRows = function (start, end) {
        var terminal = this._terminal;
        var cursorAbsoluteY = terminal.buffer.ybase + terminal.buffer.y;
        var cursorX = this._terminal.buffer.x;
        var cursorBlink = this._terminal.options.cursorBlink;
        for (var y = start; y <= end; y++) {
            var rowElement = this._rowElements[y];
            rowElement.innerHTML = '';
            var row = y + terminal.buffer.ydisp;
            var lineData = terminal.buffer.lines.get(row);
            var cursorStyle = terminal.options.cursorStyle;
            rowElement.appendChild(this._rowFactory.createRow(lineData, row === cursorAbsoluteY, cursorStyle, cursorX, cursorBlink, this.dimensions.actualCellWidth, terminal.cols));
        }
    };
    Object.defineProperty(DomRenderer.prototype, "_terminalSelector", {
        get: function () {
            return "." + TERMINAL_CLASS_PREFIX + this._terminalClass;
        },
        enumerable: true,
        configurable: true
    });
    DomRenderer.prototype.registerCharacterJoiner = function (handler) { return -1; };
    DomRenderer.prototype.deregisterCharacterJoiner = function (joinerId) { return false; };
    DomRenderer.prototype._onLinkHover = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);
    };
    DomRenderer.prototype._onLinkLeave = function (e) {
        this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);
    };
    DomRenderer.prototype._setCellUnderline = function (x, x2, y, y2, cols, enabled) {
        while (x !== x2 || y !== y2) {
            var row = this._rowElements[y];
            if (!row) {
                return;
            }
            var span = row.children[x];
            if (span) {
                span.style.textDecoration = enabled ? 'underline' : 'none';
            }
            if (++x >= cols) {
                x = 0;
                y++;
            }
        }
    };
    return DomRenderer;
}(Lifecycle_1.Disposable));
exports.DomRenderer = DomRenderer;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLWF0dGFjaC9zcmMvQXR0YWNoQWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLWZpdC9zcmMvRml0QWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXNlYXJjaC9zcmMvU2VhcmNoQWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy9zcmMvV2ViTGlua3NBZGRvbi50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL0NoYXJEYXRhQ29tcGF0LnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvQ29sb3JVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL0dseXBoUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9SZWN0YW5nbGVSZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL1JlbmRlck1vZGVsLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvVHlwZWRBcnJheS50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL1dlYmdsQWRkb24udHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9XZWJnbFJlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvV2ViZ2xVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL2F0bGFzL0NoYXJBdGxhc0NhY2hlLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvYXRsYXMvQ2hhckF0bGFzVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vYWRkb25zL3h0ZXJtLWFkZG9uLXdlYmdsL3NyYy9hdGxhcy9XZWJnbENoYXJBdGxhcy50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL3JlbmRlckxheWVyL0Jhc2VSZW5kZXJMYXllci50cyIsIndlYnBhY2s6Ly8vLi9hZGRvbnMveHRlcm0tYWRkb24td2ViZ2wvc3JjL3JlbmRlckxheWVyL0N1cnNvclJlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9zcmMvcmVuZGVyTGF5ZXIvTGlua1JlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL2RlbW8vY2xpZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9BY2Nlc3NpYmlsaXR5TWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvSW5wdXRIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9UZXJtaW5hbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvV2luZG93c01vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvQ2xpcGJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL0NvbG9yTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9MaWZlY3ljbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvTGlua2lmaWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9Nb3VzZVpvbmVNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL1JlbmRlckRlYm91bmNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9TY3JlZW5EcHJNb25pdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL1ZpZXdwb3J0LnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL2lucHV0L0NvbXBvc2l0aW9uSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL2lucHV0L01vdXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL2lucHV0L01vdmVUb0NlbGwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvQmFzZVJlbmRlckxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3JlbmRlcmVyL0NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3JlbmRlcmVyL0dyaWRDYWNoZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9MaW5rUmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvUmVuZGVyZXJVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9TZWxlY3Rpb25SZW5kZXJMYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9UZXh0UmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQmFzZUNoYXJBdGxhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNDYWNoZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvRHluYW1pY0NoYXJBdGxhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9MUlVNYXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyUm93RmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9zZWxlY3Rpb24vU2VsZWN0aW9uTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvQ2hhclNpemVTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3NlcnZpY2VzL01vdXNlU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYnJvd3Nlci9zZXJ2aWNlcy9SZW5kZXJTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9icm93c2VyL3NlcnZpY2VzL1NlbGVjdGlvblNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jyb3dzZXIvc2VydmljZXMvU291bmRTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vQ2hhcldpZHRoLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vQ2lyY3VsYXJMaXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vQ2xvbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9FdmVudEVtaXR0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9MaWZlY3ljbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9QbGF0Zm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL1R5cGVkQXJyYXlVdGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vYnVmZmVyL0J1ZmZlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vYnVmZmVyL0J1ZmZlclJlZmxvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2J1ZmZlci9CdWZmZXJTZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9idWZmZXIvQ2VsbERhdGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vYnVmZmVyL01hcmtlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2RhdGEvQ2hhcnNldHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9kYXRhL0VzY2FwZVNlcXVlbmNlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2lucHV0L0tleWJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vaW5wdXQvVGV4dERlY29kZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vcGFyc2VyL0Rjc1BhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3BhcnNlci9Fc2NhcGVTZXF1ZW5jZVBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3BhcnNlci9Pc2NQYXJzZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9wYXJzZXIvUGFyYW1zLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvQnVmZmVyU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0NvcmVNb3VzZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9zZXJ2aWNlcy9Db3JlU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0RpcnR5Um93U2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvTG9nU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NlcnZpY2VzL09wdGlvbnNTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5LnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vc2VydmljZXMvU2VydmljZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3B1YmxpYy9BZGRvbk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3B1YmxpYy9UZXJtaW5hbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyZXIvQ3Vyc29yUmVuZGVyTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlcmVyL1JlbmRlcmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMENBQTBDLGdDQUFnQztRQUMxRTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLHdEQUF3RCxrQkFBa0I7UUFDMUU7UUFDQSxpREFBaUQsY0FBYztRQUMvRDs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EseUNBQXlDLGlDQUFpQztRQUMxRSxnSEFBZ0gsbUJBQW1CLEVBQUU7UUFDckk7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwyQkFBMkIsMEJBQTBCLEVBQUU7UUFDdkQsaUNBQWlDLGVBQWU7UUFDaEQ7UUFDQTtRQUNBOztRQUVBO1FBQ0Esc0RBQXNELCtEQUErRDs7UUFFckg7UUFDQTs7O1FB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QUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO1FBQzVDLElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUM1QyxJQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7UUFFNUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDN0osQ0FBQztJQUVPLHlDQUFhLEdBQXJCLFVBQXNCLEtBQW1CLEVBQUUsTUFBYyxFQUFFLEVBQVUsRUFBRSxFQUFVLEVBQUUsS0FBYSxFQUFFLE1BQWMsRUFBRSxDQUFTLEVBQUUsQ0FBUyxFQUFFLENBQVMsRUFBRSxDQUFTO1FBQzFKLEtBQUssQ0FBQyxNQUFNLENBQUssR0FBRyxFQUFFLENBQUM7UUFDdkIsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDdkIsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7UUFDMUIsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDM0IsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7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QUMsQ0FBQztRQUNsRSxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLEtBQUssRUFBRSxHQUFHLEVBQUMsRUFBRSxjQUFNLFlBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQWpCLENBQWlCLENBQUMsQ0FBQztRQUNsRSxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLEtBQUssRUFBRSxHQUFHLEVBQUMsRUFBRSxjQUFNLFlBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQWpCLENBQWlCLENBQUMsQ0FBQztRQUNsRSxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLEtBQUssRUFBRSxHQUFHLEVBQUMsRUFBRSxjQUFNLFlBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQWpCLENBQWlCLENBQUMsQ0FBQztRQUNsRSxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLEtBQUssRUFBRSxHQUFHLEVBQUMsRUFBRSxjQUFNLFlBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQWpCLENBQWlCLENBQUMsQ0FBQztRQUNsRSxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBQyxFQUFFLGNBQU0sWUFBSSxDQUFDLG9CQUFvQixFQUFFLEVBQTNCLENBQTJCLENBQUMsQ0FBQztRQUNoRyxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBQyxFQUFFLGNBQU0sWUFBSSxDQUFDLG9CQUFvQixFQUFFLEVBQTNCLENBQTJCLENBQUMsQ0FBQztnQ0FDckYsSUFBSTtZQUNiLE9BQUssT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLGNBQU0sWUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQTlCLENBQThCLENBQUMsQ0FBQztZQUNwRyxPQUFLLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBRSxjQUFNLFlBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUE5QixDQUE4QixDQUFDLENBQUM7WUFDcEcsT0FBSyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDLEVBQUUsY0FBTSxZQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBOUIsQ0FBOEIsQ0FBQyxDQUFDO1lBQ3BHLE9BQUssT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLGNBQU0sWUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQTlCLENBQThCLENBQUMsQ0FBQztZQUNwRyxPQUFLLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBRSxjQUFNLFlBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxFQUE5QixDQUE4QixDQUFDLENBQUM7WUFDcEcsT0FBSyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDLEVBQUUsY0FBTSxZQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBOUIsQ0FBOEIsQ0FBQyxDQUFDO1lBQ3BHLE9BQUssT0FBTyxDQUFDLGFBQWEsQ0FBQyxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQyxFQUFFLGNBQU0sWUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQTlCLENBQThCLENBQUMsQ0FBQzs7O1FBUHRHLEtBQUssSUFBTSxJQUFJLElBQUksbUJBQVE7b0JBQWhCLElBQUk7U0FRZDtRQUNELEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFDLEVBQUUsY0FBTSxZQUFJLENBQUMsc0JBQXNCLEVBQUUsRUFBN0IsQ0FBNkIsQ0FBQyxDQUFDO1FBS2xHLEtBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLFVBQUMsS0FBb0I7WUFDaEQsS0FBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDakQsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDLENBQUMsQ0FBQztRQUtILEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFDLEVBQUUsSUFBSSxPQUFPLENBQUMsS0FBSSxDQUFDLGNBQWMsRUFBRSxLQUFJLENBQUMsWUFBWSxFQUFFLEtBQUksQ0FBQyxXQUFXLEVBQUUsS0FBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7O0lBQzVKLENBQUM7SUFsTUQsc0JBQVcsc0NBQVk7YUFBdkIsY0FBMEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBRTVFLHNCQUFXLG9DQUFVO2FBQXJCLGNBQXdDLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQUV4RSxzQkFBVyxrQ0FBUTthQUFuQixjQUF3QyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUFnTS9ELDhCQUFPLEdBQWQ7UUFDRSxpQkFBTSxPQUFPLFdBQUUsQ0FBQztJQUNsQixDQUFDO0lBRU0sNEJBQUssR0FBWixVQUFhLElBQVk7UUFDdkIsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7UUFDeEMsSUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUM5QixJQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBRTlCLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUU3QyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDMUMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDbEQ7UUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUUzRixNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7UUFDcEMsSUFBSSxNQUFNLENBQUMsQ0FBQyxLQUFLLFlBQVksSUFBSSxNQUFNLENBQUMsQ0FBQyxLQUFLLFlBQVksRUFBRTtZQUMxRCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDO1NBQzNCO0lBQ0gsQ0FBQztJQUVNLGdDQUFTLEdBQWhCLFVBQWlCLElBQWdCO1FBQy9CLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO1FBQ3hDLElBQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDOUIsSUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUU5QixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFN0MsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQzFDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ2xEO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFFekYsTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO1FBQ3BDLElBQUksTUFBTSxDQUFDLENBQUMsS0FBSyxZQUFZLElBQUksTUFBTSxDQUFDLENBQUMsS0FBSyxZQUFZLEVBQUU7WUFDMUQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUMzQjtJQUNILENBQUM7SUFFTSw0QkFBSyxHQUFaLFVBQWEsSUFBaUIsRUFBRSxLQUFhLEVBQUUsR0FBVztRQUN4RCxJQUFJLElBQVksQ0FBQztRQUNqQixJQUFJLE9BQWUsQ0FBQztRQUNwQixJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQztRQUMxQyxJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQztRQUN2QyxJQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDO1FBQ3ZFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDO1FBQ3RDLElBQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDO1FBQ3JELElBQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDO1FBQzdDLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDO1FBQzNDLElBQUksU0FBUyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTFELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFDLEtBQUssSUFBSSxHQUFHLEdBQUcsS0FBSyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRSxHQUFHLEVBQUU7WUFDdEMsSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUlqQixPQUFPLEdBQUcsbUJBQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUt4QixJQUFJLElBQUksR0FBRyxHQUFHLElBQUksT0FBTyxFQUFFO2dCQUN6QixJQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUM5QyxJQUFJLEVBQUUsRUFBRTtvQkFDTixJQUFJLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDekI7YUFDRjtZQUVELElBQUksZ0JBQWdCLEVBQUU7Z0JBQ3BCLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGlDQUFtQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDbEU7WUFPRCxJQUFJLENBQUMsT0FBTyxJQUFJLE1BQU0sQ0FBQyxDQUFDLEVBQUU7Z0JBQ3hCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7b0JBSXJDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztpQkFDbEQ7cUJBQU07b0JBQ0wsU0FBUyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2lCQUNsRDtnQkFDRCxTQUFTO2FBQ1Y7WUFPRCxJQUFJLE1BQU0sQ0FBQyxDQUFDLEdBQUcsT0FBTyxHQUFHLENBQUMsSUFBSSxJQUFJLEVBQUU7Z0JBR2xDLElBQUksY0FBYyxFQUFFO29CQUNsQixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDYixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUM7b0JBQ1gsSUFBSSxNQUFNLENBQUMsQ0FBQyxLQUFLLE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxFQUFFO3dCQUN4QyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUM7d0JBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQzdCO3lCQUFNO3dCQUNMLElBQUksTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRTs0QkFDeEMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7eUJBQ3pDO3dCQUdELE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO3FCQUM3QztvQkFFRCxTQUFTLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7aUJBQ3ZEO3FCQUFNO29CQUNMLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQztvQkFDcEIsSUFBSSxPQUFPLEtBQUssQ0FBQyxFQUFFO3dCQUdqQixTQUFTO3FCQUNWO2lCQUNGO2FBQ0Y7WUFHRCxJQUFJLFVBQVUsRUFBRTtnQkFFZCxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFJdEUsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ3RDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLDBCQUFjLEVBQUUsMkJBQWUsRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztpQkFDbkc7YUFDRjtZQUdELFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUtsRixJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUU7Z0JBQ2YsT0FBTyxFQUFFLE9BQU8sRUFBRTtvQkFFaEIsU0FBUyxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUMxRTthQUNGO1NBQ0Y7UUFLRCxJQUFJLEdBQUcsRUFBRTtZQUNQLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ2pELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxNQUFNLEVBQUU7Z0JBQ3hFLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDO2FBQ3JDO2lCQUFNLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsRUFBRTtnQkFDdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMzRTtpQkFBTTtnQkFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDO2FBQzFEO1NBQ0Y7UUFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBS00sb0NBQWEsR0FBcEIsVUFBcUIsRUFBdUIsRUFBRSxRQUFzQztRQUNsRixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBS00sb0NBQWEsR0FBcEIsVUFBcUIsRUFBdUIsRUFBRSxRQUFtRDtRQUMvRixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxJQUFJLHNCQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBS00sb0NBQWEsR0FBcEIsVUFBcUIsRUFBdUIsRUFBRSxRQUF1QjtRQUNuRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBS00sb0NBQWEsR0FBcEIsVUFBcUIsS0FBYSxFQUFFLFFBQW1DO1FBQ3JFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLElBQUksc0JBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7SUFNTSwyQkFBSSxHQUFYO1FBQ0UsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBTU0sK0JBQVEsR0FBZjtRQUVFLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO1FBRTFDLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFO1lBQzNDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ2Q7UUFDRCxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDWCxJQUFJLE1BQU0sQ0FBQyxDQUFDLEtBQUssTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLEVBQUU7WUFDeEMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUN6QjthQUFNLElBQUksTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRTtZQUMvQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztTQUN6QztRQUVELElBQUksTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRTtZQUN4QyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUM7U0FDWjtRQUVELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDMUIsQ0FBQztJQU1NLHFDQUFjLEdBQXJCO1FBQ0UsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBTU0sZ0NBQVMsR0FBaEI7UUFDRSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3BDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDO1NBQ2hDO0lBQ0gsQ0FBQztJQU1NLDBCQUFHLEdBQVY7UUFDRSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRTtZQUM1RCxPQUFPO1NBQ1I7UUFDRCxJQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3JFLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUU7WUFDakQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO1NBQ2hGO0lBQ0gsQ0FBQztJQU9NLCtCQUFRLEdBQWY7UUFDRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBT00sOEJBQU8sR0FBZDtRQUNFLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFLTyxzQ0FBZSxHQUF2QjtRQUNFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pILElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVU7WUFDdEQsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hGLENBQUM7SUFLTyxpQ0FBVSxHQUFsQixVQUFtQixDQUFTLEVBQUUsQ0FBUztRQUNyQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFO1lBQzdCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7U0FDekU7YUFBTTtZQUNMLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNsQztRQUNELElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBS08sa0NBQVcsR0FBbkIsVUFBb0IsQ0FBUyxFQUFFLENBQVM7UUFHdEMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDdEYsQ0FBQztJQU1NLCtCQUFRLEdBQWYsVUFBZ0IsTUFBZTtRQUU3QixJQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQ3RGLElBQUksU0FBUyxJQUFJLENBQUMsRUFBRTtZQUNsQixJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNsRTthQUFNO1lBQ0wsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMvQztJQUNILENBQUM7SUFNTSxpQ0FBVSxHQUFqQixVQUFrQixNQUFlO1FBRS9CLElBQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDNUYsSUFBSSxZQUFZLElBQUksQ0FBQyxFQUFFO1lBQ3JCLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNwRTthQUFNO1lBQ0wsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztTQUM1QztJQUNILENBQUM7SUFNTSxvQ0FBYSxHQUFwQixVQUFxQixNQUFlO1FBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQU1NLHFDQUFjLEdBQXJCLFVBQXNCLE1BQWU7UUFDbkMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNoRCxDQUFDO0lBT00scUNBQWMsR0FBckIsVUFBc0IsTUFBZTtRQUNuQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQU9NLDBDQUFtQixHQUExQixVQUEyQixNQUFlO1FBQ3hDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBTU0seUNBQWtCLEdBQXpCLFVBQTBCLE1BQWU7UUFDdkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzdFLENBQUM7SUFNTSxxQ0FBYyxHQUFyQixVQUFzQixNQUFlO1FBQ25DLElBQUksQ0FBQyxVQUFVLENBRWIsQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBRXRELENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBT00sc0NBQWUsR0FBdEIsVUFBdUIsTUFBZTtRQUNwQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQU9NLHdDQUFpQixHQUF4QixVQUF5QixNQUFlO1FBQ3RDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQU1NLHNDQUFlLEdBQXRCLFVBQXVCLE1BQWU7UUFDcEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzdFLENBQUM7SUFPTSx3Q0FBaUIsR0FBeEIsVUFBeUIsTUFBZTtRQUN0QyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFRTSxpQ0FBVSxHQUFqQixVQUFrQixNQUFlO1FBQy9CLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQVVNLCtCQUFRLEdBQWYsVUFBZ0IsTUFBZTtRQUM3QixJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtZQUNmLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3RFO2FBQU0sSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ3RCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7U0FDdEM7SUFDSCxDQUFDO0lBTU0sdUNBQWdCLEdBQXZCLFVBQXdCLE1BQWU7UUFDckMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUU7WUFDNUQsT0FBTztTQUNSO1FBQ0QsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEMsT0FBTyxLQUFLLEVBQUUsRUFBRTtZQUNkLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUN0RTtJQUNILENBQUM7SUFLTSx3Q0FBaUIsR0FBeEIsVUFBeUIsTUFBZTtRQUN0QyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRTtZQUM1RCxPQUFPO1NBQ1I7UUFDRCxJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUdsQyxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQztRQUUxQyxPQUFPLEtBQUssRUFBRSxFQUFFO1lBQ2QsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDOUI7SUFDSCxDQUFDO0lBVU8seUNBQWtCLEdBQTFCLFVBQTJCLENBQVMsRUFBRSxLQUFhLEVBQUUsR0FBVyxFQUFFLFNBQTBCO1FBQTFCLDZDQUEwQjtRQUMxRixJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4RixJQUFJLENBQUMsWUFBWSxDQUNmLEtBQUssRUFDTCxHQUFHLEVBQ0gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FDdkUsQ0FBQztRQUNGLElBQUksU0FBUyxFQUFFO1lBQ2IsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7U0FDeEI7SUFDSCxDQUFDO0lBT08sdUNBQWdCLEdBQXhCLFVBQXlCLENBQVM7UUFDaEMsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEYsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEYsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQWNNLHFDQUFjLEdBQXJCLFVBQXNCLE1BQWU7UUFDbkMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxDQUFDO1FBQ04sUUFBUSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3hCLEtBQUssQ0FBQztnQkFDSixDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNqQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDekgsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQ3hDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDMUI7Z0JBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkMsTUFBTTtZQUNSLEtBQUssQ0FBQztnQkFDSixDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNqQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUVuQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUN0RSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUU7b0JBRWhFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7aUJBQy9EO2dCQUNELE9BQU8sQ0FBQyxFQUFFLEVBQUU7b0JBQ1YsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUMxQjtnQkFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxNQUFNO1lBQ1IsS0FBSyxDQUFDO2dCQUNKLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQztnQkFDN0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3ZDLE9BQU8sQ0FBQyxFQUFFLEVBQUU7b0JBQ1YsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUMxQjtnQkFDRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuQyxNQUFNO1lBQ1IsS0FBSyxDQUFDO2dCQUVKLElBQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUM7Z0JBQzFGLElBQUksY0FBYyxHQUFHLENBQUMsRUFBRTtvQkFDdEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQztvQkFDM0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDbEcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFFbEcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ3hCO2dCQUNELE1BQU07U0FDVDtJQUNILENBQUM7SUFhTSxrQ0FBVyxHQUFsQixVQUFtQixNQUFlO1FBQ2hDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN2QixRQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDeEIsS0FBSyxDQUFDO2dCQUNKLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzlHLE1BQU07WUFDUixLQUFLLENBQUM7Z0JBQ0osSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUMzRixNQUFNO1lBQ1IsS0FBSyxDQUFDO2dCQUNKLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ25GLE1BQU07U0FDVDtRQUNELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQU1NLGtDQUFXLEdBQWxCLFVBQW1CLE1BQWU7UUFDaEMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBR2xDLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO1FBRTFDLElBQUksTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsWUFBWSxJQUFJLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLFNBQVMsRUFBRTtZQUNqRSxPQUFPO1NBQ1I7UUFFRCxJQUFNLEdBQUcsR0FBVyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFFNUMsSUFBTSxzQkFBc0IsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztRQUNsRixJQUFNLG9CQUFvQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxHQUFHLHNCQUFzQixHQUFHLENBQUMsQ0FBQztRQUN0RyxPQUFPLEtBQUssRUFBRSxFQUFFO1lBR2QsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsb0JBQW9CLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pELE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNsRjtRQUVELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDcEUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDZixDQUFDO0lBTU0sa0NBQVcsR0FBbEIsVUFBbUIsTUFBZTtRQUNoQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFHbEMsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7UUFFMUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLElBQUksTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsU0FBUyxFQUFFO1lBQ2pFLE9BQU87U0FDUjtRQUVELElBQU0sR0FBRyxHQUFXLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUU1QyxJQUFJLENBQVMsQ0FBQztRQUNkLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztRQUN2RCxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ3BELE9BQU8sS0FBSyxFQUFFLEVBQUU7WUFHZCxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2hGO1FBRUQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNmLENBQUM7SUFNTSxrQ0FBVyxHQUFsQixVQUFtQixNQUFlO1FBQ2hDLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN2QixJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuSCxJQUFJLElBQUksRUFBRTtZQUNSLElBQUksQ0FBQyxXQUFXLENBQ2QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUM1QixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFDckIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FDdkUsQ0FBQztZQUNGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDL0Q7SUFDSCxDQUFDO0lBTU0sa0NBQVcsR0FBbEIsVUFBbUIsTUFBZTtRQUNoQyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkgsSUFBSSxJQUFJLEVBQUU7WUFDUixJQUFJLENBQUMsV0FBVyxDQUNkLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsRUFDNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQ3JCLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQ3ZFLENBQUM7WUFDRixJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQy9EO0lBQ0gsQ0FBQztJQUtNLCtCQUFRLEdBQWYsVUFBZ0IsTUFBZTtRQUM3QixJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUdsQyxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQztRQUUxQyxPQUFPLEtBQUssRUFBRSxFQUFFO1lBQ2QsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3hELE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNqSDtRQUNELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQUtNLGlDQUFVLEdBQWpCLFVBQWtCLE1BQWU7UUFDL0IsSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNyQixJQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUdsQyxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQztZQUUxQyxPQUFPLEtBQUssRUFBRSxFQUFFO2dCQUNkLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDM0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQzlHO1lBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUM3RTtJQUNILENBQUM7SUFNTSxpQ0FBVSxHQUFqQixVQUFrQixNQUFlO1FBQy9CLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN2QixJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuSCxJQUFJLElBQUksRUFBRTtZQUNSLElBQUksQ0FBQyxZQUFZLENBQ2YsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUM1QixJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUN0RCxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUN2RSxDQUFDO1lBQ0YsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUMvRDtJQUNILENBQUM7SUF3Qk0sK0NBQXdCLEdBQS9CLFVBQWdDLE1BQWU7UUFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLEVBQUU7WUFDcEMsT0FBTztTQUNSO1FBRUQsSUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsSUFBTSxJQUFJLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtZQUMvQixJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztTQUMzQztRQUNELElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQXVDTSxrREFBMkIsR0FBbEMsVUFBbUMsTUFBZTtRQUNoRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3hCLE9BQU87U0FDUjtRQUNELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDbEcsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBRSxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQztTQUN2RDthQUFNLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDckMsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBRSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQztTQUNyRDtJQUNILENBQUM7SUFDTSxvREFBNkIsR0FBcEMsVUFBcUMsTUFBZTtRQUNsRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ3hCLE9BQU87U0FDUjtRQUlELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDOUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBRSxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUMsQ0FBQztTQUMzRDthQUFNLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLEVBQUU7WUFDNUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBRSxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUMsQ0FBQztTQUMzRDthQUFNLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFHckMsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1NBQzVEO2FBQU0sSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN0QyxJQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLG9CQUFFLENBQUMsR0FBRyxHQUFHLGVBQWUsQ0FBQyxDQUFDO1NBQzlEO0lBQ0gsQ0FBQztJQXdGTSw4QkFBTyxHQUFkLFVBQWUsTUFBZTtRQUM1QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN0QyxRQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3hCLEtBQUssQ0FBQztvQkFDSixJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7b0JBQ2pDLE1BQU07Z0JBQ1IsS0FBSyxFQUFFO29CQUVMLE1BQU07YUFDVDtTQUNGO0lBQ0gsQ0FBQztJQUNNLHFDQUFjLEdBQXJCLFVBQXNCLE1BQWU7UUFDbkMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEMsUUFBUSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUN4QixLQUFLLENBQUM7b0JBQ0osSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDO29CQUMvRCxNQUFNO2dCQUNSLEtBQUssQ0FBQztvQkFDSixJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsMEJBQWUsQ0FBQyxDQUFDO29CQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsMEJBQWUsQ0FBQyxDQUFDO29CQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsMEJBQWUsQ0FBQyxDQUFDO29CQUMvQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsMEJBQWUsQ0FBQyxDQUFDO29CQUUvQyxNQUFNO2dCQUNSLEtBQUssQ0FBQztvQkFFSixJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQztvQkFDcEQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3JELElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ3ZCLE1BQU07Z0JBQ1IsS0FBSyxDQUFDO29CQUNKLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztvQkFDakMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ3RCLE1BQU07Z0JBQ1IsS0FBSyxDQUFDO29CQUNKLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztvQkFDckMsTUFBTTtnQkFDUixLQUFLLEVBQUU7b0JBRUwsTUFBTTtnQkFDUixLQUFLLEVBQUU7b0JBQ0wsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsMkNBQTJDLENBQUMsQ0FBQztvQkFDcEUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7b0JBQ3hDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7d0JBQzNCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO3FCQUMxQztvQkFDRCxNQUFNO2dCQUNSLEtBQUssQ0FBQztvQkFFSixJQUFJLENBQUMsaUJBQWlCLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztvQkFDOUMsTUFBTTtnQkFDUixLQUFLLElBQUk7b0JBRVAsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUM7b0JBQ2hELE1BQU07Z0JBQ1IsS0FBSyxJQUFJO29CQUNQLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO29CQUMvQyxNQUFNO2dCQUNSLEtBQUssSUFBSTtvQkFHUCxJQUFJLENBQUMsaUJBQWlCLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztvQkFDOUMsTUFBTTtnQkFDUixLQUFLLElBQUk7b0JBR1AsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO29CQUNoQyxNQUFNO2dCQUNSLEtBQUssSUFBSTtvQkFHUCxJQUFJLENBQUMsaUJBQWlCLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQztvQkFDL0MsTUFBTTtnQkFDUixLQUFLLElBQUk7b0JBQ1AsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7b0JBQzlDLE1BQU07Z0JBQ1IsS0FBSyxJQUFJO29CQUNQLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLEdBQUcsT0FBTyxDQUFDO29CQUNoRCxNQUFNO2dCQUNSLEtBQUssRUFBRTtvQkFDTCxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7b0JBQ3BDLE1BQU07Z0JBQ1IsS0FBSyxJQUFJO29CQUNQLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztvQkFDbEIsTUFBTTtnQkFDUixLQUFLLElBQUk7b0JBQ1AsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO2dCQUVwQixLQUFLLEVBQUUsQ0FBQztnQkFDUixLQUFLLElBQUk7b0JBQ1AsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDO29CQUM5RSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQ3hELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7d0JBQzNCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO3FCQUMxQztvQkFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO29CQUM1QixNQUFNO2dCQUNSLEtBQUssSUFBSTtvQkFDUCxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztvQkFDekMsTUFBTTthQUNUO1NBQ0Y7SUFDSCxDQUFDO0lBcUZNLGdDQUFTLEdBQWhCLFVBQWlCLE1BQWU7UUFDOUIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEMsUUFBUSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUN4QixLQUFLLENBQUM7b0JBQ0osSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO29CQUNsQyxNQUFNO2dCQUNSLEtBQUssRUFBRTtvQkFFTCxNQUFNO2FBQ1Q7U0FDRjtJQUNILENBQUM7SUFDTSx1Q0FBZ0IsR0FBdkIsVUFBd0IsTUFBZTtRQUNyQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN0QyxRQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3hCLEtBQUssQ0FBQztvQkFDSixJQUFJLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLENBQUM7b0JBQ2hFLE1BQU07Z0JBQ1IsS0FBSyxDQUFDO29CQUlKLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFO3dCQUNoRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO3FCQUMzRTtvQkFDRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO29CQUNoQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO29CQUN2QixNQUFNO2dCQUNSLEtBQUssQ0FBQztvQkFDSixJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7b0JBQ2xDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUN0QixNQUFNO2dCQUNSLEtBQUssQ0FBQztvQkFDSixJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7b0JBQ3RDLE1BQU07Z0JBQ1IsS0FBSyxFQUFFO29CQUVMLE1BQU07Z0JBQ1IsS0FBSyxFQUFFO29CQUNMLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7b0JBQzNELElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO29CQUN6QyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFO3dCQUMzQixJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQztxQkFDMUM7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLENBQUMsQ0FBQztnQkFDUCxLQUFLLElBQUksQ0FBQztnQkFDVixLQUFLLElBQUksQ0FBQztnQkFDVixLQUFLLElBQUk7b0JBQ1AsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsR0FBRyxNQUFNLENBQUM7b0JBQy9DLE1BQU07Z0JBQ1IsS0FBSyxJQUFJO29CQUNQLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztvQkFDakMsTUFBTTtnQkFDUixLQUFLLElBQUk7b0JBQ1AsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsR0FBRyxTQUFTLENBQUM7b0JBQ2xELE1BQU07Z0JBQ1IsS0FBSyxJQUFJO29CQUNQLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLEdBQUcsU0FBUyxDQUFDO29CQUNsRCxNQUFNO2dCQUNSLEtBQUssSUFBSTtvQkFDVCxJQUFJLENBQUMsaUJBQWlCLENBQUMsY0FBYyxHQUFHLFNBQVMsQ0FBQztvQkFDaEQsTUFBTTtnQkFDUixLQUFLLEVBQUU7b0JBQ0wsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO29CQUNuQyxNQUFNO2dCQUNSLEtBQUssSUFBSTtvQkFDUCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7b0JBQ3JCLE1BQU07Z0JBQ1IsS0FBSyxJQUFJLENBQUM7Z0JBRVYsS0FBSyxFQUFFLENBQUM7Z0JBQ1IsS0FBSyxJQUFJO29CQUVQLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLG9CQUFvQixFQUFFLENBQUM7b0JBQ25ELElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUU7d0JBQzdCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztxQkFDdEI7b0JBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUN4RCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFO3dCQUMzQixJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsQ0FBQztxQkFDMUM7b0JBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztvQkFDNUIsTUFBTTtnQkFDUixLQUFLLElBQUk7b0JBQ1AsSUFBSSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7b0JBQzFDLE1BQU07YUFDVDtTQUNGO0lBQ0gsQ0FBQztJQU1PLG9DQUFhLEdBQXJCLFVBQXNCLE1BQWUsRUFBRSxHQUFXLEVBQUUsSUFBb0I7UUFLdEUsSUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFHakMsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBR2YsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO1FBRWhCLEdBQUc7WUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDLEVBQUU7Z0JBQ3RDLElBQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDO2dCQUNyRCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ1YsR0FBRztvQkFDRCxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUU7d0JBQ2pCLE1BQU0sR0FBRyxDQUFDLENBQUM7cUJBQ1o7b0JBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDL0MsUUFBUSxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsR0FBRyxPQUFPLEdBQUcsQ0FBQyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUMzRSxNQUFNO2FBQ1A7WUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUMsQ0FBQzttQkFDckMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxDQUFDLEVBQUU7Z0JBQy9DLE1BQU07YUFDUDtZQUVELElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNYLE1BQU0sR0FBRyxDQUFDLENBQUM7YUFDWjtTQUNGLFFBQVEsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLElBQUksT0FBTyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFO1FBRzVFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFO1lBQ3BDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO2dCQUNsQixJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2I7U0FDRjtRQUdELElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUNsQixJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxFQUFFLFlBQXFCLENBQUM7Z0JBQzdCLElBQUksQ0FBQyxFQUFFLElBQUksU0FBb0IsQ0FBQztnQkFDaEMsSUFBSSxDQUFDLEVBQUUsSUFBSSw2QkFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNwRTtpQkFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ3hCLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLGNBQTJDLENBQUMsQ0FBQztnQkFDMUQsSUFBSSxDQUFDLEVBQUUsSUFBSSxXQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQzthQUNsRDtTQUNGO2FBQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ3pCLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDakIsSUFBSSxDQUFDLEVBQUUsWUFBcUIsQ0FBQztnQkFDN0IsSUFBSSxDQUFDLEVBQUUsSUFBSSxTQUFvQixDQUFDO2dCQUNoQyxJQUFJLENBQUMsRUFBRSxJQUFJLDZCQUFhLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3BFO2lCQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDeEIsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsY0FBMkMsQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLENBQUMsRUFBRSxJQUFJLFdBQXFCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO2FBQ2xEO1NBQ0Y7UUFFRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBbUVNLHFDQUFjLEdBQXJCLFVBQXNCLE1BQWU7UUFFbkMsSUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNqRCxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFFLEdBQUcsOEJBQWlCLENBQUMsRUFBRSxDQUFDO1lBQ3JELElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEVBQUUsR0FBRyw4QkFBaUIsQ0FBQyxFQUFFLENBQUM7WUFDckQsT0FBTztTQUNSO1FBRUQsSUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUN4QixJQUFJLENBQUMsQ0FBQztRQUNOLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDO1FBRXhDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDMUIsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckIsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUU7Z0JBRXRCLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLGNBQTJDLENBQUMsQ0FBQztnQkFDMUQsSUFBSSxDQUFDLEVBQUUsSUFBSSxXQUFvQixDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQzthQUN6QztpQkFBTSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFFN0IsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsY0FBMkMsQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLENBQUMsRUFBRSxJQUFJLFdBQW9CLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2FBQ3pDO2lCQUFNLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUU3QixJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxjQUEyQyxDQUFDLENBQUM7Z0JBQzFELElBQUksQ0FBQyxFQUFFLElBQUksV0FBb0IsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQzdDO2lCQUFNLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFO2dCQUUvQixJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxjQUEyQyxDQUFDLENBQUM7Z0JBQzFELElBQUksQ0FBQyxFQUFFLElBQUksV0FBb0IsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQzlDO2lCQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFFbEIsSUFBSSxDQUFDLEVBQUUsR0FBRyw4QkFBaUIsQ0FBQyxFQUFFLENBQUM7Z0JBQy9CLElBQUksQ0FBQyxFQUFFLEdBQUcsOEJBQWlCLENBQUMsRUFBRSxDQUFDO2FBQ2hDO2lCQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFFbEIsSUFBSSxDQUFDLEVBQUUsYUFBZ0IsQ0FBQzthQUN6QjtpQkFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBRWxCLElBQUksQ0FBQyxFQUFFLFlBQWtCLENBQUM7YUFDM0I7aUJBQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUVsQixJQUFJLENBQUMsRUFBRSxhQUFxQixDQUFDO2FBQzlCO2lCQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFFbEIsSUFBSSxDQUFDLEVBQUUsYUFBaUIsQ0FBQzthQUMxQjtpQkFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBR2xCLElBQUksQ0FBQyxFQUFFLFlBQW1CLENBQUM7YUFDNUI7aUJBQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUVsQixJQUFJLENBQUMsRUFBRSxjQUFxQixDQUFDO2FBQzlCO2lCQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFFbEIsSUFBSSxDQUFDLEVBQUUsYUFBZSxDQUFDO2FBQ3hCO2lCQUFNLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRTtnQkFFbkIsSUFBSSxDQUFDLEVBQUUsSUFBSSxVQUFhLENBQUM7Z0JBQ3pCLElBQUksQ0FBQyxFQUFFLElBQUksVUFBWSxDQUFDO2FBQ3pCO2lCQUFNLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRTtnQkFFbkIsSUFBSSxDQUFDLEVBQUUsSUFBSSxTQUFlLENBQUM7YUFDNUI7aUJBQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUVuQixJQUFJLENBQUMsRUFBRSxJQUFJLFVBQWtCLENBQUM7YUFDL0I7aUJBQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUVuQixJQUFJLENBQUMsRUFBRSxJQUFJLFVBQWMsQ0FBQzthQUMzQjtpQkFBTSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUU7Z0JBRW5CLElBQUksQ0FBQyxFQUFFLElBQUksU0FBZ0IsQ0FBQzthQUM3QjtpQkFBTSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUU7Z0JBRW5CLElBQUksQ0FBQyxFQUFFLElBQUksV0FBa0IsQ0FBQzthQUMvQjtpQkFBTSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUU7Z0JBRW5CLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLG1CQUF3QyxDQUFDLENBQUM7Z0JBQ3ZELElBQUksQ0FBQyxFQUFFLElBQUksOEJBQWlCLENBQUMsRUFBRSxHQUFHLENBQUMsY0FBNEMsQ0FBQyxDQUFDO2FBQ2xGO2lCQUFNLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRTtnQkFFbkIsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsbUJBQXdDLENBQUMsQ0FBQztnQkFDdkQsSUFBSSxDQUFDLEVBQUUsSUFBSSw4QkFBaUIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxjQUE0QyxDQUFDLENBQUM7YUFDbEY7aUJBQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUU7Z0JBRS9CLENBQUMsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDMUM7aUJBQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFO2dCQUVwQixJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxtQkFBd0MsQ0FBQyxDQUFDO2dCQUN2RCxJQUFJLENBQUMsRUFBRSxJQUFJLDhCQUFpQixDQUFDLEVBQUUsR0FBRyxDQUFDLGNBQTRDLENBQUMsQ0FBQztnQkFDakYsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsbUJBQXdDLENBQUMsQ0FBQztnQkFDdkQsSUFBSSxDQUFDLEVBQUUsSUFBSSw4QkFBaUIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxjQUE0QyxDQUFDLENBQUM7YUFDbEY7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsNEJBQTRCLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDekQ7U0FDRjtJQUNILENBQUM7SUF5Qk0sbUNBQVksR0FBbkIsVUFBb0IsTUFBZTtRQUNqQyxRQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDeEIsS0FBSyxDQUFDO2dCQUVKLElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUksb0JBQUUsQ0FBQyxHQUFHLFFBQUssQ0FBQyxDQUFDO2dCQUNuRCxNQUFNO1lBQ1IsS0FBSyxDQUFDO2dCQUVKLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUksb0JBQUUsQ0FBQyxHQUFHLFNBQUksQ0FBQyxTQUFJLENBQUMsTUFBRyxDQUFDLENBQUM7Z0JBQzNELE1BQU07U0FDVDtJQUNILENBQUM7SUFFTSwwQ0FBbUIsR0FBMUIsVUFBMkIsTUFBZTtRQUd4QyxRQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDeEIsS0FBSyxDQUFDO2dCQUVKLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLElBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUksb0JBQUUsQ0FBQyxHQUFHLFVBQUssQ0FBQyxTQUFJLENBQUMsTUFBRyxDQUFDLENBQUM7Z0JBQzVELE1BQU07WUFDUixLQUFLLEVBQUU7Z0JBR0wsTUFBTTtZQUNSLEtBQUssRUFBRTtnQkFHTCxNQUFNO1lBQ1IsS0FBSyxFQUFFO2dCQUdMLE1BQU07WUFDUixLQUFLLEVBQUU7Z0JBR0wsTUFBTTtTQUNUO0lBQ0gsQ0FBQztJQU1NLGdDQUFTLEdBQWhCLFVBQWlCLE1BQWU7UUFDOUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUNsQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDbEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDO1FBQ3pDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7WUFDM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDMUM7UUFDRCxJQUFJLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLENBQUM7UUFDaEUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLDhCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUM5QixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBWU0scUNBQWMsR0FBckIsVUFBc0IsTUFBZTtRQUNuQyxJQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwQyxRQUFRLEtBQUssRUFBRTtZQUNiLEtBQUssQ0FBQyxDQUFDO1lBQ1AsS0FBSyxDQUFDO2dCQUNKLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7Z0JBQ25ELE1BQU07WUFDUixLQUFLLENBQUMsQ0FBQztZQUNQLEtBQUssQ0FBQztnQkFDSixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO2dCQUN2RCxNQUFNO1lBQ1IsS0FBSyxDQUFDLENBQUM7WUFDUCxLQUFLLENBQUM7Z0JBQ0osSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztnQkFDakQsTUFBTTtTQUNUO1FBQ0QsSUFBTSxVQUFVLEdBQUcsS0FBSyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztJQUN4RCxDQUFDO0lBT00sc0NBQWUsR0FBdEIsVUFBdUIsTUFBZTtRQUNwQyxJQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxJQUFJLE1BQWMsQ0FBQztRQUVuQixJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksSUFBSSxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ2hHLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQztTQUNuQztRQUVELElBQUksTUFBTSxHQUFHLEdBQUcsRUFBRTtZQUNoQixJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUMvQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUNyRCxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUN2QjtJQUNILENBQUM7SUFRTSxpQ0FBVSxHQUFqQixVQUFrQixNQUFnQjtRQUNoQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3BHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUM7UUFDL0UsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQztRQUMvRSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUM7SUFDbkUsQ0FBQztJQVFNLG9DQUFhLEdBQXBCLFVBQXFCLE1BQWdCO1FBQ25DLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakgsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQztRQUMvRSxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDO1FBQy9FLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFJLElBQVksQ0FBQyxhQUFhLENBQUM7UUFDckQsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO1NBQ2xFO1FBQ0QsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFRTSwrQkFBUSxHQUFmLFVBQWdCLElBQVk7UUFDMUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQVFNLCtCQUFRLEdBQWY7UUFDRSxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNmLENBQUM7SUFPTSw0Q0FBcUIsR0FBNUI7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO1FBQ3BFLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQ3hDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7WUFDM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDMUM7SUFDSCxDQUFDO0lBT00sd0NBQWlCLEdBQXhCO1FBQ0UsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsa0NBQWtDLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztRQUN6QyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFO1lBQzNCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQzFDO0lBQ0gsQ0FBQztJQVFNLDJDQUFvQixHQUEzQjtRQUNFLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSwwQkFBZSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQWtCTSxvQ0FBYSxHQUFwQixVQUFxQixjQUFzQjtRQUN6QyxJQUFJLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQy9CLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1lBQzVCLE9BQU87U0FDUjtRQUNELElBQUksY0FBYyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUM3QixPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsbUJBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSwwQkFBZSxDQUFDLENBQUM7UUFDdEcsT0FBTztJQUNULENBQUM7SUFRTSw0QkFBSyxHQUFaO1FBQ0UsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO1FBQzFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQy9CLElBQUksTUFBTSxDQUFDLENBQUMsS0FBSyxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsRUFBRTtZQUN4QyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUM7WUFDWCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDO1NBQ3pCO2FBQU0sSUFBSSxNQUFNLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFO1lBQy9DLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO1NBQ3pDO1FBQ0QsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFTTSw2QkFBTSxHQUFiO1FBQ0UsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUN2RSxDQUFDO0lBU00sbUNBQVksR0FBbkI7UUFDRSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUM7UUFDMUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxLQUFLLE1BQU0sQ0FBQyxTQUFTLEVBQUU7WUFJakMsSUFBTSxrQkFBa0IsR0FBRyxNQUFNLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7WUFDbEUsTUFBTSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxFQUFFLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzNFLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQy9GLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDN0U7YUFBTTtZQUNMLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNYLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztTQUN4QjtJQUNILENBQUM7SUFPTSw0QkFBSyxHQUFaO1FBQ0UsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFZTSxnQ0FBUyxHQUFoQixVQUFpQixLQUFhO1FBQzVCLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFVTSw2Q0FBc0IsR0FBN0I7UUFFRSxJQUFNLElBQUksR0FBRyxJQUFJLG1CQUFRLEVBQUUsQ0FBQztRQUM1QixJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsTUFBdUIsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1FBRXhDLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDO1FBRTFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLEtBQUssSUFBSSxPQUFPLEdBQUcsQ0FBQyxFQUFFLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRTtZQUNuRSxJQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDO1lBQzlDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNqQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1NBQ3pDO1FBQ0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFDSCxtQkFBQztBQUFELENBQUMsQ0F4K0RpQyxzQkFBVSxHQXcrRDNDO0FBeCtEWSxvQ0FBWTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzlGekIsaUlBQW9FO0FBQ3BFLDBGQUE0QztBQUM1Qyw2RkFBMEg7QUFDMUgsdUhBQWlEO0FBQ2pELHdGQUE4QztBQUM5Qyw4RkFBK0M7QUFDL0MsNkZBQThDO0FBQzlDLG9JQUFxRTtBQUNyRSxxRkFBMkM7QUFDM0MsNkZBQTZEO0FBQzdELDJHQUFzRDtBQUN0RCx3SEFBNkQ7QUFDN0Qsa0hBQTREO0FBQzVELGdIQUE4RDtBQUU5RCwrR0FBeUQ7QUFFekQsb0dBQThEO0FBQzlELG9HQUEyRDtBQUMzRCw0R0FBNkQ7QUFDN0QscUZBQWlEO0FBQ2pELHNHQUFvRDtBQUNwRCwySEFBK0Q7QUFDL0QsMEdBQWtLO0FBQ2xLLDRIQUFnRTtBQUNoRSw0R0FBOEg7QUFDOUgsaUlBQW1FO0FBQ25FLHlIQUEwRjtBQUMxRiwyRkFBOEM7QUFHOUMsd0hBQTZEO0FBRTdELG1IQUEwRDtBQUMxRCxnSEFBd0Q7QUFFeEQsK0hBQWtFO0FBQ2xFLDhJQUE0RTtBQUM1RSxrSUFBb0U7QUFHcEUsSUFBTSxRQUFRLEdBQUcsQ0FBQyxPQUFPLE1BQU0sS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBTzFFLElBQU0sNEJBQTRCLEdBQUcsQ0FBQyxDQUFDO0FBUXZDLElBQU0sZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0FBQzVCLElBQU0sNkJBQTZCLEdBQUcsRUFBRSxDQUFDO0FBRXpDO0lBQThCLDRCQUFVO0lBeUp0QyxrQkFDRSxPQUE4QjtRQUE5QixzQ0FBOEI7UUFEaEMsWUFHRSxpQkFBTyxTQW9CUjtRQS9KTSxhQUFPLEdBQWtCLE9BQU8sQ0FBQztRQTBDakMsaUJBQVcsS0FBK0M7UUFvQ3pELHFCQUFlLEdBQVksS0FBSyxDQUFDO1FBYWpDLGdCQUFVLEdBQWdCLElBQUksQ0FBQztRQUsvQixtQkFBYSxHQUFHLElBQUksMkJBQVksRUFBUSxDQUFDO1FBRXpDLGFBQU8sR0FBRyxJQUFJLDJCQUFZLEVBQVUsQ0FBQztRQUVyQyxZQUFNLEdBQUcsSUFBSSwyQkFBWSxFQUE0QyxDQUFDO1FBRXRFLGlCQUFXLEdBQUcsSUFBSSwyQkFBWSxFQUFRLENBQUM7UUFFdkMsZUFBUyxHQUFHLElBQUksMkJBQVksRUFBa0MsQ0FBQztRQUUvRCxlQUFTLEdBQUcsSUFBSSwyQkFBWSxFQUFrQyxDQUFDO1FBRS9ELGVBQVMsR0FBRyxJQUFJLDJCQUFZLEVBQVUsQ0FBQztRQUV2Qyx3QkFBa0IsR0FBRyxJQUFJLDJCQUFZLEVBQVEsQ0FBQztRQUU5QyxvQkFBYyxHQUFHLElBQUksMkJBQVksRUFBVSxDQUFDO1FBRzVDLGNBQVEsR0FBRyxJQUFJLDJCQUFZLEVBQVEsQ0FBQztRQUVwQyxhQUFPLEdBQUcsSUFBSSwyQkFBWSxFQUFRLENBQUM7UUFFcEMsdUJBQWlCLEdBQUcsSUFBSSwyQkFBWSxFQUFVLENBQUM7UUFFL0Msc0JBQWdCLEdBQUcsSUFBSSwyQkFBWSxFQUFVLENBQUM7UUFxQm5ELEtBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLDJDQUFvQixFQUFFLENBQUM7UUFDeEQsS0FBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLCtCQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbEQsS0FBSSxDQUFDLHFCQUFxQixDQUFDLFVBQVUsQ0FBQywwQkFBZSxFQUFFLEtBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUM1RSxLQUFJLENBQUMsY0FBYyxHQUFHLEtBQUksQ0FBQyxxQkFBcUIsQ0FBQyxjQUFjLENBQUMsNkJBQWEsQ0FBQyxDQUFDO1FBQy9FLEtBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMseUJBQWMsRUFBRSxLQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDM0UsS0FBSSxDQUFDLFdBQVcsR0FBRyxLQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLHVCQUFVLENBQUMsQ0FBQztRQUN6RSxLQUFJLENBQUMscUJBQXFCLENBQUMsVUFBVSxDQUFDLHNCQUFXLEVBQUUsS0FBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3JFLEtBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyx5QkFBVyxFQUFFLGNBQU0sWUFBSSxDQUFDLGNBQWMsRUFBRSxFQUFyQixDQUFxQixDQUFDLENBQUM7UUFDeEcsS0FBSSxDQUFDLHFCQUFxQixDQUFDLFVBQVUsQ0FBQyx1QkFBWSxFQUFFLEtBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN2RSxLQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxXQUFDLElBQUksWUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQXBCLENBQW9CLENBQUMsQ0FBQztRQUNwRCxLQUFJLENBQUMsaUJBQWlCLEdBQUcsS0FBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxtQ0FBZ0IsQ0FBQyxDQUFDO1FBQ3JGLEtBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsNEJBQWlCLEVBQUUsS0FBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDakYsS0FBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUksQ0FBQyxxQkFBcUIsQ0FBQyxjQUFjLENBQUMsaUNBQWUsQ0FBQyxDQUFDO1FBQ25GLEtBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsMkJBQWdCLEVBQUUsS0FBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFFL0UsS0FBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsS0FBSSxDQUFDLE1BQU0sRUFBRSxDQUFDOztJQUNoQixDQUFDO0lBNUpELHNCQUFXLDZCQUFPO2FBQWxCLGNBQXlDLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQTBGOUUsc0JBQVcsMEJBQUk7YUFBZixjQUE0QixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUFDOUQsc0JBQVcsMEJBQUk7YUFBZixjQUE0QixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUFHOUQsc0JBQVcsa0NBQVk7YUFBdkIsY0FBMEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBRTVFLHNCQUFXLDRCQUFNO2FBQWpCLGNBQXNDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQUVsRSxzQkFBVywyQkFBSzthQUFoQixjQUF1RSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUFFbEcsc0JBQVcsZ0NBQVU7YUFBckIsY0FBd0MsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBRXhFLHNCQUFXLDhCQUFRO2FBQW5CLGNBQWdFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQUU5RixzQkFBVyw4QkFBUTthQUFuQixjQUFnRSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUFFOUYsc0JBQVcsOEJBQVE7YUFBbkIsY0FBd0MsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBRXRFLHNCQUFXLHVDQUFpQjthQUE1QixjQUErQyxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQUV0RixzQkFBVyxtQ0FBYTthQUF4QixjQUE2QyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzs7O09BQUE7SUFHaEYsc0JBQVcsNkJBQU87YUFBbEIsY0FBcUMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBRWxFLHNCQUFXLDRCQUFNO2FBQWpCLGNBQW9DLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQUVoRSxzQkFBVyxnQ0FBVTthQUFyQixjQUEwQyxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQUVoRixzQkFBVywrQkFBUzthQUFwQixjQUF5QyxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQXVDdkUsMEJBQU8sR0FBZDtRQUNFLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixPQUFPO1NBQ1I7UUFDRCxpQkFBTSxPQUFPLFdBQUUsQ0FBQztRQUNoQixJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDckIsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQztTQUMvQjtRQUNELElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUN2QixJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQy9CO1FBQ0QsSUFBSSxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQztRQUNuQyxJQUFJLENBQUMsS0FBSyxHQUFHLGNBQU8sQ0FBQyxDQUFDO1FBQ3RCLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRTtZQUMzQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ25EO0lBQ0gsQ0FBQztJQUVPLHlCQUFNLEdBQWQ7UUFBQSxpQkErQ0M7UUE5Q0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUUvQyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUMxQixJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDO1FBR25DLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7UUFDL0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDeEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDeEIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztRQUdoQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUVoQixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdkIsSUFBSSxDQUFDLFdBQVcsR0FBRyw4QkFBaUIsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUM3QyxJQUFJLENBQUMsY0FBYyxHQUFHLDhCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDO1FBRWhELElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1FBR3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO1FBQzFCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFFOUIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztRQUVoQyxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztRQUc1QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksMkJBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDMUssSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsY0FBTSxZQUFJLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxFQUF6QixDQUF5QixDQUFDLENBQUM7UUFDakUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsY0FBTSxZQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxFQUF2QixDQUF1QixDQUFDLENBQUM7UUFDN0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUkscUJBQVMsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUV4RixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFO1lBQzVCLElBQUksQ0FBQyxZQUFZLEdBQUcsOEJBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDNUM7SUFDSCxDQUFDO0lBS0Qsc0JBQVcsNEJBQU07YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQzdCLENBQUM7OztPQUFBO0lBRUQsc0JBQVcsNkJBQU87YUFBbEI7WUFDRSxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDO1FBQ3JDLENBQUM7OztPQUFBO0lBS00sZ0NBQWEsR0FBcEI7UUFDRSxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBcUIsUUFBUSxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUM7UUFDNUQsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQzdCLENBQUM7SUFLTSx3QkFBSyxHQUFaO1FBQ0UsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7U0FDOUM7SUFDSCxDQUFDO0lBRUQsc0JBQVcsK0JBQVM7YUFBcEI7WUFDRSxPQUFPLFFBQVEsQ0FBQyxhQUFhLEtBQUssSUFBSSxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekUsQ0FBQzs7O09BQUE7SUFFTyx5Q0FBc0IsR0FBOUI7UUFBQSxpQkFnRkM7UUE5RUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsYUFBRztZQUNwQyxRQUFRLEdBQUcsRUFBRTtnQkFDWCxLQUFLLFlBQVksQ0FBQztnQkFDbEIsS0FBSyxVQUFVO29CQUViLElBQUksS0FBSSxDQUFDLGNBQWMsRUFBRTt3QkFDdkIsS0FBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztxQkFDN0I7b0JBQ0QsSUFBSSxLQUFJLENBQUMsZ0JBQWdCLEVBQUU7d0JBQ3pCLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztxQkFDakM7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLDRCQUE0QixDQUFDO2dCQUNsQyxLQUFLLGVBQWUsQ0FBQztnQkFDckIsS0FBSyxZQUFZLENBQUM7Z0JBQ2xCLEtBQUssWUFBWSxDQUFDO2dCQUNsQixLQUFLLGdCQUFnQjtvQkFFbkIsSUFBSSxLQUFJLENBQUMsY0FBYyxFQUFFO3dCQUN2QixLQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDO3dCQUM1QixLQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxLQUFJLENBQUMsSUFBSSxFQUFFLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDbkQsS0FBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsS0FBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztxQkFDaEM7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLGNBQWM7b0JBQ2pCLElBQUksS0FBSSxDQUFDLGNBQWMsRUFBRTt3QkFDdkIsS0FBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsS0FBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUM7d0JBQ3hELEtBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLEtBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDO3FCQUNwRDtvQkFDRCxNQUFNO2dCQUNSLEtBQUssWUFBWTtvQkFDZixLQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFJLENBQUMsSUFBSSxFQUFFLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDMUMsSUFBSSxLQUFJLENBQUMsUUFBUSxFQUFFO3dCQUNqQixLQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO3FCQUNoQztvQkFDRCxNQUFNO2dCQUNSLEtBQUssa0JBQWtCO29CQUNyQixJQUFJLEtBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLGdCQUFnQixFQUFFO3dCQUNoRCxJQUFJLENBQUMsS0FBSSxDQUFDLHFCQUFxQixJQUFJLEtBQUksQ0FBQyxjQUFjLEVBQUU7NEJBQ3RELEtBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLDJDQUFvQixDQUFDLEtBQUksRUFBRSxLQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7eUJBQ2xGO3FCQUNGO3lCQUFNO3dCQUNMLElBQUksS0FBSSxDQUFDLHFCQUFxQixFQUFFOzRCQUM5QixLQUFJLENBQUMscUJBQXFCLENBQUMsT0FBTyxFQUFFLENBQUM7NEJBQ3JDLEtBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUM7eUJBQ25DO3FCQUNGO29CQUNELE1BQU07Z0JBQ1IsS0FBSyxjQUFjO29CQUFFLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUM7b0JBQUMsTUFBTTtnQkFDekQsS0FBSyxPQUFPO29CQUNWLEtBQUksQ0FBQyxTQUFTLENBQUMsS0FBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ2xELE1BQU07Z0JBQ1IsS0FBSyxZQUFZO29CQUNmLElBQU0sZUFBZSxHQUFHLEtBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO29CQUMzRSxJQUFJLEtBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxlQUFlLEVBQUU7d0JBQzlDLElBQU0sWUFBWSxHQUFHLEtBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxlQUFlLENBQUM7d0JBQ2hFLElBQU0sWUFBWSxHQUFHLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUM1RCxLQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7d0JBQzFDLEtBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDO3dCQUNsRSxLQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQzt3QkFDbEUsSUFBSSxZQUFZLEVBQUU7NEJBQ2hCLEtBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7eUJBQ2hDO3FCQUNGO2dCQUNILEtBQUssYUFBYTtvQkFDaEIsSUFBSSxLQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUU7d0JBQzNDLElBQUksQ0FBQyxLQUFJLENBQUMsWUFBWSxFQUFFOzRCQUN0QixLQUFJLENBQUMsWUFBWSxHQUFHLDhCQUFnQixDQUFDLEtBQUksQ0FBQyxDQUFDO3lCQUM1QztxQkFDRjt5QkFBTTt3QkFDTCxJQUFJLEtBQUksQ0FBQyxZQUFZLEVBQUU7NEJBQ3JCLEtBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLENBQUM7NEJBQzVCLEtBQUksQ0FBQyxZQUFZLEdBQUcsU0FBUyxDQUFDO3lCQUMvQjtxQkFDRjtvQkFDRCxNQUFNO2FBQ1Q7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFLTyxtQ0FBZ0IsR0FBeEIsVUFBeUIsRUFBaUI7UUFDeEMsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsb0JBQUUsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7U0FDbkQ7UUFDRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFNTSx1QkFBSSxHQUFYO1FBQ0UsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzlCLENBQUM7SUFLTyxrQ0FBZSxHQUF2QjtRQUdFLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0MsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2xCLElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsb0JBQUUsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7U0FDbkQ7UUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBS08sOEJBQVcsR0FBbkI7UUFBQSxpQkEwQ0M7UUF6Q0MsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBR2pCLElBQUksQ0FBQyxRQUFRLENBQUMsb0NBQXdCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBQyxLQUFxQjtZQUdqRixJQUFJLENBQUMsS0FBSSxDQUFDLFlBQVksRUFBRSxFQUFFO2dCQUN4QixPQUFPO2FBQ1I7WUFDRCx1QkFBVyxDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ0osSUFBTSxtQkFBbUIsR0FBRyxVQUFDLEtBQXFCLElBQUssbUNBQWdCLENBQUMsS0FBSyxFQUFFLEtBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSSxDQUFDLGtCQUFrQixFQUFFLEtBQUksQ0FBQyxZQUFZLENBQUMsRUFBbEYsQ0FBa0YsQ0FBQztRQUMxSSxJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLG1CQUFtQixDQUFDLENBQUMsQ0FBQztRQUNyRixJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLG1CQUFtQixDQUFDLENBQUMsQ0FBQztRQUdwRixJQUFJLE9BQU8sQ0FBQyxTQUFTLEVBQUU7WUFFckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQ0FBd0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxVQUFDLEtBQWlCO2dCQUNsRixJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO29CQUN0Qiw2QkFBaUIsQ0FBQyxLQUFLLEVBQUUsS0FBSSxDQUFDLFFBQVEsRUFBRSxLQUFJLENBQUMsYUFBYSxFQUFFLEtBQUksQ0FBQyxpQkFBaUIsRUFBRSxLQUFJLENBQUMsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7aUJBQ3pIO1lBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNMO2FBQU07WUFDTCxJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsYUFBYSxFQUFFLFVBQUMsS0FBaUI7Z0JBQ3BGLDZCQUFpQixDQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsUUFBUSxFQUFFLEtBQUksQ0FBQyxhQUFhLEVBQUUsS0FBSSxDQUFDLGlCQUFpQixFQUFFLEtBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUMxSCxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ0w7UUFLRCxJQUFJLE9BQU8sQ0FBQyxPQUFPLEVBQUU7WUFHbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQ0FBd0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxVQUFDLEtBQWlCO2dCQUNqRixJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO29CQUN0Qix3Q0FBNEIsQ0FBQyxLQUFLLEVBQUUsS0FBSSxDQUFDLFFBQVEsRUFBRSxLQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7aUJBQ3hFO1lBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNMO0lBQ0gsQ0FBQztJQUtPLDRCQUFTLEdBQWpCO1FBQUEsaUJBU0M7UUFSQyxJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLFVBQUMsRUFBaUIsSUFBSyxZQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFmLENBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzlHLElBQUksQ0FBQyxRQUFRLENBQUMsb0NBQXdCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsVUFBQyxFQUFpQixJQUFLLFlBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQWpCLENBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNsSCxJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLFVBQUMsRUFBaUIsSUFBSyxZQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFsQixDQUFrQixFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDcEgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQ0FBd0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLGtCQUFrQixFQUFFLGNBQU0sWUFBSSxDQUFDLGtCQUFrQixDQUFDLGdCQUFnQixFQUFFLEVBQTFDLENBQTBDLENBQUMsQ0FBQyxDQUFDO1FBQzdILElBQUksQ0FBQyxRQUFRLENBQUMsb0NBQXdCLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxtQkFBbUIsRUFBRSxVQUFDLENBQW1CLElBQUssWUFBSSxDQUFDLGtCQUFrQixDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUE1QyxDQUE0QyxDQUFDLENBQUMsQ0FBQztRQUNuSixJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsY0FBTSxZQUFJLENBQUMsa0JBQWtCLENBQUMsY0FBYyxFQUFFLEVBQXhDLENBQXdDLENBQUMsQ0FBQyxDQUFDO1FBQ3pILElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFNLFlBQUksQ0FBQyxrQkFBa0IsQ0FBQyx5QkFBeUIsRUFBRSxFQUFuRCxDQUFtRCxDQUFDLENBQUMsQ0FBQztRQUN4RixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBQyxJQUFJLFlBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBeEMsQ0FBd0MsQ0FBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQU9NLHVCQUFJLEdBQVgsVUFBWSxNQUFtQjtRQUEvQixpQkFnSkM7UUEvSUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUV0QyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLHFDQUFxQyxDQUFDLENBQUM7U0FDeEQ7UUFFRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBRzVDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNDLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUl2QyxJQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUNuRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3RELFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDNUMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekQsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUM1RCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBRTVELElBQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUM7UUFHakQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDckQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDdEQsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFekMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDOUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQ0FBd0IsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxVQUFDLEVBQWlCLElBQUssWUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxFQUF6QixDQUF5QixDQUFDLENBQUMsQ0FBQztRQUNsSCxJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBTSxFQUFFLGNBQU0sWUFBSSxDQUFDLGVBQWUsRUFBRSxFQUF0QixDQUFzQixDQUFDLENBQUMsQ0FBQztRQUM3RixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVqRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxpQ0FBZSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDMUgsSUFBSSxDQUFDLHFCQUFxQixDQUFDLFVBQVUsQ0FBQywyQkFBZ0IsRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUUvRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLHFDQUFpQixFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDN0gsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUd6RCxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVuQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksMkJBQVksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ2hGLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV6QyxJQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDeEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLDZCQUFhLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3hILElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMseUJBQWMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsV0FBQyxJQUFJLFlBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUF0QixDQUFzQixDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFDLElBQUksWUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQTFDLENBQTBDLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxjQUFjLENBQUMsMkJBQVksQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsd0JBQWEsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDekUsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLDJCQUFZLENBQUMsQ0FBQztRQUM3RSxJQUFJLENBQUMscUJBQXFCLENBQUMsVUFBVSxDQUFDLHdCQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRXpFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxtQkFBUSxFQUNoRSxVQUFDLE1BQWMsRUFBRSxhQUFzQixJQUFLLFlBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLGFBQWEsQ0FBQyxFQUF2QyxDQUF1QyxFQUNuRixJQUFJLENBQUMsZ0JBQWdCLEVBQ3JCLElBQUksQ0FBQyxtQkFBbUIsQ0FDekIsQ0FBQztRQUNGLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFN0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLGNBQU0sWUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsRUFBbEMsQ0FBa0MsQ0FBQyxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQU0sWUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsS0FBSSxDQUFDLElBQUksRUFBRSxLQUFJLENBQUMsSUFBSSxDQUFDLEVBQWxELENBQWtELENBQUMsQ0FBQyxDQUFDO1FBQ3ZGLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFNLFlBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLEVBQTVCLENBQTRCLENBQUMsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFNLFlBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxFQUFFLEVBQTdCLENBQTZCLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxjQUFNLFlBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLEVBQTlCLENBQThCLENBQUMsQ0FBQyxDQUFDO1FBRTVGLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLG1DQUFnQixFQUNqRixVQUFDLE1BQWMsRUFBRSxhQUFzQixJQUFLLFlBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLGFBQWEsQ0FBQyxFQUF2QyxDQUF1QyxFQUNuRixJQUFJLENBQUMsT0FBTyxFQUNaLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMscUJBQXFCLENBQUMsVUFBVSxDQUFDLDRCQUFpQixFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ2pGLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGlCQUFpQixDQUFDLGNBQU0sWUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxFQUE5QixDQUE4QixDQUFDLENBQUMsQ0FBQztRQUM5RixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsV0FBQyxJQUFJLFlBQUksQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUExRSxDQUEwRSxDQUFDLENBQUMsQ0FBQztRQUN2SSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxxQkFBcUIsQ0FBQyxjQUFJO1lBSTdELEtBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUMzQixLQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ3RCLEtBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNKLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUMxQixLQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQy9CLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ0osSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQ0FBd0IsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLGNBQU0sWUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxFQUFoQyxDQUFnQyxDQUFDLENBQUMsQ0FBQztRQUVqSCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxtQ0FBZ0IsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUN2SCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFNLFlBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsRUFBakMsQ0FBaUMsQ0FBQyxDQUFDLENBQUM7UUFDdEUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUdqRSxJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFVBQUMsQ0FBYSxJQUFLLFlBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQXJDLENBQXFDLENBQUMsQ0FBQyxDQUFDO1FBRzdILElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUM7U0FDbkQ7YUFBTTtZQUNMLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNqQztRQUVELElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRTtZQUdqQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSwyQ0FBb0IsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQ2xGO1FBR0QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDO1FBR2hDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFHL0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBSW5CLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBRU8sa0NBQWUsR0FBdkI7UUFDRSxRQUFRLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFO1lBQ2pDLEtBQUssUUFBUSxDQUFDLENBQUMsT0FBTyxJQUFJLG1CQUFRLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNySSxLQUFLLEtBQUssQ0FBQyxDQUFDLE9BQU8sSUFBSSx5QkFBVyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ2hILE9BQU8sQ0FBQyxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQThCLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxPQUFHLENBQUMsQ0FBQztTQUN0RjtJQUNILENBQUM7SUFNTyw0QkFBUyxHQUFqQixVQUFrQixLQUFhO1FBQzdCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUN0QixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNwQztRQUNELElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUN2QixJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzFEO1FBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDeEQ7SUFDSCxDQUFDO0lBaUJNLDRCQUFTLEdBQWhCO1FBQUEsaUJBK09DO1FBOU9DLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBR3hCLFNBQVMsU0FBUyxDQUFDLEVBQTJCO1lBQzVDLElBQUksR0FBRyxDQUFDO1lBR1IsR0FBRyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEYsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDUixPQUFPLEtBQUssQ0FBQzthQUNkO1lBRUQsSUFBSSxHQUFvQixDQUFDO1lBQ3pCLElBQUksTUFBdUIsQ0FBQztZQUM1QixRQUFjLEVBQUcsQ0FBQyxZQUFZLElBQUksRUFBRSxDQUFDLElBQUksRUFBRTtnQkFDekMsS0FBSyxXQUFXO29CQUNkLE1BQU0sS0FBdUIsQ0FBQztvQkFDOUIsSUFBSSxFQUFFLENBQUMsT0FBTyxLQUFLLFNBQVMsRUFBRTt3QkFFNUIsR0FBRyxJQUF1QixDQUFDO3dCQUMzQixJQUFJLEVBQUUsQ0FBQyxNQUFNLEtBQUssU0FBUyxFQUFFOzRCQUMzQixHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFxQixDQUFDO3lCQUN4RDtxQkFDRjt5QkFBTTt3QkFFTCxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFzQixDQUFDOzRCQUN2QyxFQUFFLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQXdCLENBQUM7Z0NBQ3pDLEVBQUUsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBdUIsQ0FBQztxQ0FDcEIsQ0FBQztxQkFDNUI7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLFNBQVM7b0JBQ1osTUFBTSxJQUFxQixDQUFDO29CQUM1QixHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFxQixDQUFDO29CQUN2RCxNQUFNO2dCQUNSLEtBQUssV0FBVztvQkFDZCxNQUFNLElBQXVCLENBQUM7b0JBQzlCLEdBQUcsR0FBRyxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQXFCLENBQUM7b0JBQ3ZELE1BQU07Z0JBQ1IsS0FBSyxPQUFPO29CQUVWLElBQUssRUFBaUIsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO3dCQUNuQyxNQUFNLEdBQUksRUFBaUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBb0IsQ0FBQyxFQUFxQixDQUFDO3FCQUNwRjtvQkFDRCxHQUFHLElBQXdCLENBQUM7b0JBQzVCLE1BQU07Z0JBQ1I7b0JBRUUsT0FBTyxLQUFLLENBQUM7YUFDaEI7WUFJRCxJQUFJLE1BQU0sS0FBSyxTQUFTLElBQUksR0FBRyxLQUFLLFNBQVMsSUFBSSxHQUFHLElBQXdCLEVBQUU7Z0JBQzVFLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7WUFFRCxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQztnQkFDOUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRTtnQkFDZixHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFO2dCQUNmLE1BQU0sRUFBRSxHQUFHO2dCQUNYLE1BQU07Z0JBQ04sSUFBSSxFQUFFLEVBQUUsQ0FBQyxPQUFPO2dCQUNoQixHQUFHLEVBQUUsRUFBRSxDQUFDLE1BQU07Z0JBQ2QsS0FBSyxFQUFFLEVBQUUsQ0FBQyxRQUFRO2FBQ25CLENBQUMsQ0FBQztRQUNMLENBQUM7UUFVRCxJQUFNLGVBQWUsR0FBa0Q7WUFDckUsT0FBTyxFQUFFLElBQUk7WUFDYixLQUFLLEVBQUUsSUFBSTtZQUNYLFNBQVMsRUFBRSxJQUFJO1lBQ2YsU0FBUyxFQUFFLElBQUk7U0FDaEIsQ0FBQztRQUNGLElBQU0sY0FBYyxHQUF5QztZQUMzRCxPQUFPLEVBQUUsVUFBQyxFQUFjO2dCQUN0QixTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUU7b0JBRWYsS0FBSSxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO29CQUN2RSxJQUFJLGVBQWUsQ0FBQyxTQUFTLEVBQUU7d0JBQzdCLEtBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFFLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztxQkFDNUU7aUJBQ0Y7Z0JBQ0QsT0FBTyxLQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3pCLENBQUM7WUFDRCxLQUFLLEVBQUUsVUFBQyxFQUFjO2dCQUNwQixTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2QsRUFBRSxDQUFDLGNBQWMsRUFBRSxDQUFDO2dCQUNwQixPQUFPLEtBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDekIsQ0FBQztZQUNELFNBQVMsRUFBRSxVQUFDLEVBQWM7Z0JBRXhCLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRTtvQkFDZCxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7aUJBQ2Y7WUFDSCxDQUFDO1lBQ0QsU0FBUyxFQUFFLFVBQUMsRUFBYztnQkFFeEIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUU7b0JBQ2YsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUNmO1lBQ0gsQ0FBQztTQUNGLENBQUM7UUFDRixJQUFJLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsZ0JBQU07WUFFNUMsS0FBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7WUFDMUIsSUFBSSxNQUFNLEVBQUU7Z0JBQ1YsSUFBSSxLQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEtBQUssT0FBTyxFQUFFO29CQUNwRCxLQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxLQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7aUJBQ2xHO2dCQUNELEtBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2dCQUNsRCxLQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDbEM7aUJBQU07Z0JBQ0wsS0FBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQztnQkFDdkQsS0FBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUM7Z0JBQ3JELEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQzthQUNqQztZQUlELElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBMEIsQ0FBQyxFQUFFO2dCQUN2QyxFQUFFLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFFLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDL0QsZUFBZSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7YUFDbEM7aUJBQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLEVBQUU7Z0JBQ3JDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUMzRCxlQUFlLENBQUMsU0FBUyxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUM7YUFDdEQ7WUFFRCxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQTJCLENBQUMsRUFBRTtnQkFDeEMsRUFBRSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3ZELGVBQWUsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO2FBQzlCO2lCQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFO2dCQUNqQyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbkQsZUFBZSxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDO2FBQzlDO1lBRUQsSUFBSSxDQUFDLENBQUMsTUFBTSxJQUF3QixDQUFDLEVBQUU7Z0JBQ3JDLEtBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsU0FBUyxFQUFFLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDdkUsZUFBZSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7YUFDaEM7aUJBQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUU7Z0JBQ25DLGVBQWUsQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQzthQUNsRDtZQUVELElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBMEIsQ0FBQyxFQUFFO2dCQUN2QyxLQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQzNFLGVBQWUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO2FBQ2xDO2lCQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxFQUFFO2dCQUNyQyxlQUFlLENBQUMsU0FBUyxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUM7YUFDdEQ7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQztRQUs5RSxJQUFJLENBQUMsUUFBUSxDQUFDLG9DQUF3QixDQUFDLEVBQUUsRUFBRSxXQUFXLEVBQUUsVUFBQyxFQUFjO1lBQ3JFLEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUNwQixLQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFLYixJQUFJLENBQUMsS0FBSSxDQUFDLFdBQVcsSUFBSSxLQUFJLENBQUMsaUJBQWlCLENBQUMsb0JBQW9CLENBQUMsRUFBRSxDQUFDLEVBQUU7Z0JBQ3hFLE9BQU87YUFDUjtZQUVELFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQU1kLElBQUksZUFBZSxDQUFDLE9BQU8sRUFBRTtnQkFDM0IsS0FBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQ3JFO1lBQ0QsSUFBSSxlQUFlLENBQUMsU0FBUyxFQUFFO2dCQUM3QixLQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDekU7WUFFRCxPQUFPLEtBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVKLElBQUksQ0FBQyxRQUFRLENBQUMsb0NBQXdCLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFDLEVBQWM7WUFDakUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUU7Z0JBRzFCLElBQUksQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRTtvQkFDOUIsSUFBTSxNQUFNLEdBQUcsS0FBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFHbEQsSUFBSSxNQUFNLEtBQUssQ0FBQyxFQUFFO3dCQUNoQixPQUFPO3FCQUNSO29CQUdELElBQU0sUUFBUSxHQUFHLG9CQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBRSxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDL0gsSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO29CQUNkLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO3dCQUN6QyxJQUFJLElBQUksUUFBUSxDQUFDO3FCQUNsQjtvQkFDRCxLQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztpQkFDaEQ7Z0JBQ0QsT0FBTzthQUNSO1FBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUlKLElBQUksQ0FBQyxRQUFRLENBQUMsb0NBQXdCLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFDLEVBQWM7WUFDakUsSUFBSSxlQUFlLENBQUMsS0FBSztnQkFBRSxPQUFPO1lBQ2xDLElBQUksQ0FBQyxLQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRTtnQkFDOUIsT0FBTyxLQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2FBQ3hCO1FBQ0gsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVKLElBQUksQ0FBQyxRQUFRLENBQUMsb0NBQXdCLENBQUMsRUFBRSxFQUFFLFlBQVksRUFBRSxVQUFDLEVBQWM7WUFDdEUsSUFBSSxLQUFJLENBQUMsV0FBVztnQkFBRSxPQUFPO1lBQzdCLEtBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLE9BQU8sS0FBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRUosSUFBSSxDQUFDLFFBQVEsQ0FBQyxvQ0FBd0IsQ0FBQyxFQUFFLEVBQUUsV0FBVyxFQUFFLFVBQUMsRUFBYztZQUNyRSxJQUFJLEtBQUksQ0FBQyxXQUFXO2dCQUFFLE9BQU87WUFDN0IsSUFBSSxDQUFDLEtBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxFQUFFO2dCQUNsQyxPQUFPLEtBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDeEI7UUFDSCxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ04sQ0FBQztJQVNNLDBCQUFPLEdBQWQsVUFBZSxLQUFhLEVBQUUsR0FBVztRQUN2QyxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDdkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQzdDO0lBQ0gsQ0FBQztJQU9PLHNDQUFtQixHQUEzQixVQUE0QixLQUFhLEVBQUUsR0FBVztRQUNwRCxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDbEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3hDO0lBQ0gsQ0FBQztJQUtNLG9DQUFpQixHQUF4QixVQUF5QixFQUFpQjtRQUN4QyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDLEVBQUU7WUFDM0UsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQzdDO2FBQU07WUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDaEQ7SUFDSCxDQUFDO0lBS00sNkJBQVUsR0FBakI7UUFDRSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDNUM7SUFDSCxDQUFDO0lBTU0seUJBQU0sR0FBYixVQUFjLFNBQTBCO1FBQTFCLDZDQUEwQjtRQUN0QyxJQUFJLE9BQW9CLENBQUM7UUFDekIsT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDMUIsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxDQUFDLEVBQUUsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsQ0FBQyxFQUFFLEVBQUU7WUFDdEgsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUN6RCxJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQztTQUMzQjtRQUNELE9BQU8sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBRTlCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDO1FBQ3pELElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO1FBRS9ELElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEtBQUssQ0FBQyxFQUFFO1lBRS9CLElBQU0sbUJBQW1CLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1lBR3JELElBQUksU0FBUyxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQzlDLElBQUksbUJBQW1CLEVBQUU7b0JBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztpQkFDL0M7cUJBQU07b0JBQ0wsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO2lCQUN6QzthQUNGO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQzthQUM3RDtZQUdELElBQUksQ0FBQyxtQkFBbUIsRUFBRTtnQkFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFFcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7b0JBQ3hCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7aUJBQ3JCO2FBQ0Y7aUJBQU07Z0JBR0wsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO29CQUN2QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztpQkFDeEQ7YUFDRjtTQUNGO2FBQU07WUFHTCxJQUFNLGtCQUFrQixHQUFHLFNBQVMsR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUF1QjtZQUN4RSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxrQkFBa0IsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4RSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1NBQ25EO1FBSUQsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDeEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7U0FDdkM7UUFHRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFdEYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBU00sOEJBQVcsR0FBbEIsVUFBbUIsSUFBWSxFQUFFLG1CQUE2QjtRQUM1RCxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUU7WUFDWixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxLQUFLLENBQUMsRUFBRTtnQkFDM0IsT0FBTzthQUNSO1lBQ0QsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7U0FDNUI7YUFBTSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRTtZQUN4RCxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztTQUM3QjtRQUVELElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUd2RixJQUFJLFFBQVEsS0FBSyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRTtZQUNsQyxPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsbUJBQW1CLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN4QztRQUVELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQU1NLDhCQUFXLEdBQWxCLFVBQW1CLFNBQWlCO1FBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFLTSw4QkFBVyxHQUFsQjtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFLTSxpQ0FBYyxHQUFyQjtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRU0sK0JBQVksR0FBbkIsVUFBb0IsSUFBWTtRQUM5QixJQUFNLFlBQVksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDOUMsSUFBSSxZQUFZLEtBQUssQ0FBQyxFQUFFO1lBQ3RCLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDaEM7SUFDSCxDQUFDO0lBTU0sNEJBQVMsR0FBaEIsVUFBaUIsSUFBZ0I7UUFBakMsaUJBK0JDO1FBN0JDLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixPQUFPO1NBQ1I7UUFHRCxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ1QsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFLaEMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sSUFBSSw0QkFBNEIsRUFBRTtZQUcxSCxJQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLG9CQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztTQUNoQztRQUVELElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBRTdELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7WUFFN0IsVUFBVSxDQUFDO2dCQUNULEtBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUN6QixDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUVTLGtDQUFlLEdBQXpCLFVBQTBCLFlBQXdCO1FBQWxELGlCQXNDQztRQXRDeUIsK0NBQXdCO1FBRWhELElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztTQUMzQjtRQUVELElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxHQUFHLFlBQVksRUFBRTtZQUNqRCxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ2hELFlBQVksRUFBRSxDQUFDO1lBSWYsSUFBSSxJQUFJLENBQUMsa0JBQWtCLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEtBQUssWUFBWSxFQUFFO2dCQUMzRSxJQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLG9CQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7YUFDakM7WUFFRCxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVuQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRXJFLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsSUFBSSxnQkFBZ0IsRUFBRTtnQkFDOUMsTUFBTTthQUNQO1NBQ0Y7UUFDRCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxHQUFHLFlBQVksRUFBRTtZQUc5QyxJQUFJLFlBQVksR0FBRyw2QkFBNkIsRUFBRTtnQkFDaEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDaEUsWUFBWSxHQUFHLENBQUMsQ0FBQzthQUNsQjtZQUNELFVBQVUsQ0FBQyxjQUFNLFlBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLEVBQWxDLENBQWtDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDekQ7YUFBTTtZQUNMLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7WUFDOUIsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7U0FDM0I7SUFDSCxDQUFDO0lBTU0sd0JBQUssR0FBWixVQUFhLElBQVk7UUFBekIsaUJBK0JDO1FBN0JDLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixPQUFPO1NBQ1I7UUFHRCxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ1QsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFLNUIsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sSUFBSSw0QkFBNEIsRUFBRTtZQUd0SCxJQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLG9CQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztTQUNoQztRQUVELElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBRXpELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7WUFFN0IsVUFBVSxDQUFDO2dCQUNULEtBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNyQixDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUVTLDhCQUFXLEdBQXJCLFVBQXNCLFlBQXdCO1FBQTlDLGlCQXNDQztRQXRDcUIsK0NBQXdCO1FBRTVDLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNwQixJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztTQUN2QjtRQUVELElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLFlBQVksRUFBRTtZQUM3QyxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzVDLFlBQVksRUFBRSxDQUFDO1lBSWYsSUFBSSxJQUFJLENBQUMsa0JBQWtCLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEtBQUssWUFBWSxFQUFFO2dCQUN2RSxJQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLG9CQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxLQUFLLENBQUM7YUFDakM7WUFFRCxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUvQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRXJFLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLFNBQVMsSUFBSSxnQkFBZ0IsRUFBRTtnQkFDOUMsTUFBTTthQUNQO1NBQ0Y7UUFDRCxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLFlBQVksRUFBRTtZQUcxQyxJQUFJLFlBQVksR0FBRyw2QkFBNkIsRUFBRTtnQkFDaEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDeEQsWUFBWSxHQUFHLENBQUMsQ0FBQzthQUNsQjtZQUNELFVBQVUsQ0FBQyxjQUFNLFlBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLEVBQTlCLENBQThCLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDckQ7YUFBTTtZQUNMLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7WUFDOUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7U0FDdkI7SUFDSCxDQUFDO0lBTU0sMEJBQU8sR0FBZCxVQUFlLElBQVk7UUFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVNLHdCQUFLLEdBQVosVUFBYSxJQUFZO1FBQ3ZCLGlCQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBV00sOENBQTJCLEdBQWxDLFVBQW1DLHFCQUE0QztRQUM3RSxJQUFJLENBQUMsc0JBQXNCLEdBQUcscUJBQXFCLENBQUM7SUFDdEQsQ0FBQztJQUdNLGdDQUFhLEdBQXBCLFVBQXFCLEVBQXVCLEVBQUUsUUFBdUI7UUFDbkUsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUdNLGdDQUFhLEdBQXBCLFVBQXFCLEVBQXVCLEVBQUUsUUFBbUQ7UUFDL0YsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUdNLGdDQUFhLEdBQXBCLFVBQXFCLEVBQXVCLEVBQUUsUUFBc0M7UUFDbEYsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUVNLGdDQUFhLEdBQXBCLFVBQXFCLEtBQWEsRUFBRSxRQUFtQztRQUNyRSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBWU0sc0NBQW1CLEdBQTFCLFVBQTJCLEtBQWEsRUFBRSxPQUEyQixFQUFFLE9BQTZCO1FBQ2xHLElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUM5RSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQy9CLE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFNTSx3Q0FBcUIsR0FBNUIsVUFBNkIsU0FBaUI7UUFDNUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ25ELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDaEM7SUFDSCxDQUFDO0lBRU0sMENBQXVCLEdBQTlCLFVBQStCLE9BQStCO1FBQzVELElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMvQixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0lBRU0sNENBQXlCLEdBQWhDLFVBQWlDLFFBQWdCO1FBQy9DLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyx5QkFBeUIsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUMzRCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQ2hDO0lBQ0gsQ0FBQztJQUVELHNCQUFXLDZCQUFPO2FBQWxCO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztRQUM3QixDQUFDOzs7T0FBQTtJQUVNLDRCQUFTLEdBQWhCLFVBQWlCLGFBQXFCO1FBRXBDLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtZQUN2QyxPQUFPO1NBQ1I7UUFFRCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDO0lBQ2xGLENBQUM7SUFLTSwrQkFBWSxHQUFuQjtRQUNFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDOUUsQ0FBQztJQVFNLHlCQUFNLEdBQWIsVUFBYyxNQUFjLEVBQUUsR0FBVyxFQUFFLE1BQWM7UUFDdkQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFNTSwrQkFBWSxHQUFuQjtRQUNFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDNUUsQ0FBQztJQUVNLHVDQUFvQixHQUEzQjtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxFQUFFO1lBQ3hDLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO1FBRUQsT0FBTztZQUNMLFdBQVcsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztZQUNyRCxRQUFRLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7WUFDbEQsU0FBUyxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ2pELE1BQU0sRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztTQUMvQyxDQUFDO0lBQ0osQ0FBQztJQUtNLGlDQUFjLEdBQXJCO1FBQ0UsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQ3pDO0lBQ0gsQ0FBQztJQUtNLDRCQUFTLEdBQWhCO1FBQ0UsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxDQUFDO1NBQ3BDO0lBQ0gsQ0FBQztJQUVNLDhCQUFXLEdBQWxCLFVBQW1CLEtBQWEsRUFBRSxHQUFXO1FBQzNDLElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFO1lBQzFCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ2hEO0lBQ0gsQ0FBQztJQVFTLDJCQUFRLEdBQWxCLFVBQW1CLEtBQW9CO1FBQ3JDLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO1FBRTdCLElBQUksSUFBSSxDQUFDLHNCQUFzQixJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLEVBQUU7WUFDL0UsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQzNDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7Z0JBQzNDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUN2QjtZQUNELE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxJQUFNLE1BQU0sR0FBRyxnQ0FBcUIsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUV2SixJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFOUIsSUFBSSxNQUFNLENBQUMsSUFBSSxNQUFpQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLE1BQStCLEVBQUU7WUFDOUYsSUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7WUFDbEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxNQUErQixDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDMUYsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztTQUNqQztRQUVELElBQUksTUFBTSxDQUFDLElBQUksTUFBa0MsRUFBRTtZQUNqRCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7U0FDbEI7UUFFRCxJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO1lBQ2hELE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFFRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7WUFFakIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDMUI7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRTtZQUNmLE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFLRCxJQUFJLE1BQU0sQ0FBQyxHQUFHLEtBQUssb0JBQUUsQ0FBQyxHQUFHLElBQUksTUFBTSxDQUFDLEdBQUcsS0FBSyxvQkFBRSxDQUFDLEVBQUUsRUFBRTtZQUNqRCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7U0FDMUI7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFNckQsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLGdCQUFnQixFQUFFO1lBQ2pELE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDakM7UUFFRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztJQUM5QixDQUFDO0lBRU8scUNBQWtCLEdBQTFCLFVBQTJCLE9BQWlCLEVBQUUsRUFBa0I7UUFDOUQsSUFBTSxhQUFhLEdBQ2YsQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDO1lBQzNGLENBQUMsT0FBTyxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFbEUsSUFBSSxFQUFFLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtZQUMxQixPQUFPLGFBQWEsQ0FBQztTQUN0QjtRQUdELE9BQU8sYUFBYSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQU1NLDRCQUFTLEdBQWhCLFVBQWlCLENBQVM7UUFDeEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7SUFPTSw4QkFBVyxHQUFsQixVQUFtQixDQUFTLEVBQUUsT0FBaUI7UUFDN0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUM7UUFDM0IsSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztTQUN4QjtJQUNILENBQUM7SUFFUyx5QkFBTSxHQUFoQixVQUFpQixFQUFpQjtRQUNoQyxJQUFJLElBQUksQ0FBQyxzQkFBc0IsSUFBSSxJQUFJLENBQUMsc0JBQXNCLENBQUMsRUFBRSxDQUFDLEtBQUssS0FBSyxFQUFFO1lBQzVFLE9BQU87U0FDUjtRQUVELElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNoQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDZDtRQUVELElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBUVMsNEJBQVMsR0FBbkIsVUFBb0IsRUFBaUI7UUFDbkMsSUFBSSxHQUFHLENBQUM7UUFFUixJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDeEIsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELElBQUksSUFBSSxDQUFDLHNCQUFzQixJQUFJLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFLENBQUMsS0FBSyxLQUFLLEVBQUU7WUFDNUUsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFaEIsSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFO1lBQ2YsR0FBRyxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUM7U0FDbkI7YUFBTSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssSUFBSSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEtBQUssU0FBUyxFQUFFO1lBQ3RELEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDO1NBQ2xCO2FBQU0sSUFBSSxFQUFFLENBQUMsS0FBSyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsUUFBUSxLQUFLLENBQUMsRUFBRTtZQUM5QyxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztTQUNoQjthQUFNO1lBQ0wsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELElBQUksQ0FBQyxHQUFHLElBQUksQ0FDVixDQUFDLEVBQUUsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FDdEYsRUFBRTtZQUNELE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxHQUFHLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUUvQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsT0FBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFOUMsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBTU0sdUJBQUksR0FBWDtRQUFBLGlCQVlDO1FBWEMsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLEVBQUU7WUFDckIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUNwQztRQUVELElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBQ2pELFlBQVksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNwQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztnQkFDeEMsS0FBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDdEQsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ1Q7SUFDSCxDQUFDO0lBUU0seUJBQU0sR0FBYixVQUFjLENBQVMsRUFBRSxDQUFTO1FBQ2hDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN4QixPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxFQUFFO1lBRXRDLElBQUksSUFBSSxDQUFDLGdCQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFlBQVksRUFBRTtnQkFDaEUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQ2pDO1lBQ0QsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLEdBQUcsNEJBQVk7WUFBRSxDQUFDLEdBQUcsNEJBQVksQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyw0QkFBWTtZQUFFLENBQUMsR0FBRyw0QkFBWSxDQUFDO1FBRXZDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUUxQixJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXRDLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztTQUNqQztRQUVELElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFLTSx3QkFBSyxHQUFaO1FBQ0UsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBRWxELE9BQU87U0FDUjtRQUNELElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyw4QkFBaUIsQ0FBQyxDQUFDLENBQUM7U0FDckU7UUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDekMsQ0FBQztJQU1NLHFCQUFFLEdBQVQsVUFBVSxJQUFZO1FBQ3BCLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFELENBQUM7SUE0Qk0sOEJBQVcsR0FBbEIsVUFBbUIsS0FBYTtRQUM5QixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBVU0sd0JBQUssR0FBWjtRQUtFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDOUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUM5QixJQUFNLHFCQUFxQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztRQUMxRCxJQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQ3hDLElBQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDckMsSUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUNyQyxJQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1FBQzdDLElBQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztRQUM5QyxJQUFNLGlCQUFpQixHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztRQUNsRCxJQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBRTFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNkLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDL0IsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7WUFDMUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ2hDO1FBR0QsSUFBSSxDQUFDLHNCQUFzQixHQUFHLHFCQUFxQixDQUFDO1FBQ3BELElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxlQUFlLENBQUM7UUFDeEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLGlCQUFpQixDQUFDO1FBQzVDLElBQUksQ0FBQyxjQUFjLEdBQUcsYUFBYSxDQUFDO1FBR3BDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDL0IsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDaEM7SUFDSCxDQUFDO0lBR00seUJBQU0sR0FBYixVQUFjLEVBQVMsRUFBRSxLQUFlO1FBQ3RDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUN4QyxPQUFPO1NBQ1I7UUFDRCxFQUFFLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDcEIsRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3JCLE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVPLDhCQUFXLEdBQW5CO1FBQ0UsT0FBTyxLQUFLLENBQUM7SUFHZixDQUFDO0lBRU8sNkJBQVUsR0FBbEI7UUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxLQUFLLE9BQU8sQ0FBQztJQUc1QyxDQUFDO0lBQ0gsZUFBQztBQUFELENBQUMsQ0FqckQ2QixzQkFBVSxHQWlyRHZDO0FBanJEWSw0QkFBUTtBQXVyRHJCLFNBQVMsdUJBQXVCLENBQUMsRUFBaUI7SUFDaEQsT0FBTyxFQUFFLENBQUMsT0FBTyxLQUFLLEVBQUU7UUFDdEIsRUFBRSxDQUFDLE9BQU8sS0FBSyxFQUFFO1FBQ2pCLEVBQUUsQ0FBQyxPQUFPLEtBQUssRUFBRSxDQUFDO0FBQ3RCLENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQ3h3REQseUdBQXFHO0FBRXJHLFNBQWdCLGdCQUFnQixDQUFDLFFBQW1CO0lBV2xELE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQztRQUN6QixJQUFNLElBQUksR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEYsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRTdDLElBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RGLFFBQVEsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxRQUFRLENBQUMsZ0NBQW9CLENBQUMsS0FBSywwQkFBYyxJQUFJLFFBQVEsQ0FBQyxnQ0FBb0IsQ0FBQyxLQUFLLGdDQUFvQixDQUFDLENBQUM7SUFDdEksQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBbEJELDRDQWtCQzs7Ozs7Ozs7Ozs7Ozs7O0FDZkQsU0FBZ0Isc0JBQXNCLENBQUMsSUFBWTtJQUNqRCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3RDLENBQUM7QUFGRCx3REFFQztBQU1ELFNBQWdCLG1CQUFtQixDQUFDLElBQVksRUFBRSxrQkFBMkI7SUFDM0UsSUFBSSxrQkFBa0IsRUFBRTtRQUN0QixPQUFPLFdBQVcsR0FBRyxJQUFJLEdBQUcsV0FBVyxDQUFDO0tBQ3pDO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBTEQsa0RBS0M7QUFNRCxTQUFnQixXQUFXLENBQUMsRUFBa0IsRUFBRSxnQkFBbUM7SUFDakYsSUFBSSxFQUFFLENBQUMsYUFBYSxFQUFFO1FBQ3BCLEVBQUUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztLQUN4RTtJQUVELEVBQUUsQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN0QixDQUFDO0FBTkQsa0NBTUM7QUFPRCxTQUFnQixnQkFBZ0IsQ0FBQyxFQUFrQixFQUFFLFFBQTZCLEVBQUUsa0JBQTJCLEVBQUUsV0FBeUI7SUFDeEksRUFBRSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3JCLElBQUksRUFBRSxDQUFDLGFBQWEsRUFBRTtRQUNwQixJQUFNLElBQUksR0FBRyxFQUFFLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNwRCxLQUFLLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxrQkFBa0IsRUFBRSxXQUFXLENBQUMsQ0FBQztLQUN4RDtBQUNILENBQUM7QUFORCw0Q0FNQztBQUVELFNBQWdCLEtBQUssQ0FBQyxJQUFZLEVBQUUsUUFBNkIsRUFBRSxrQkFBMkIsRUFBRSxXQUF5QjtJQUN2SCxJQUFJLEdBQUcsc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEMsSUFBSSxHQUFHLG1CQUFtQixDQUFDLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3JELFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDekMsUUFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDdEIsQ0FBQztBQUxELHNCQUtDO0FBT0QsU0FBZ0IsNEJBQTRCLENBQUMsRUFBYyxFQUFFLFFBQTZCLEVBQUUsYUFBMEI7SUFHcEgsSUFBTSxHQUFHLEdBQUcsYUFBYSxDQUFDLHFCQUFxQixFQUFFLENBQUM7SUFDbEQsSUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztJQUN4QyxJQUFNLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBR3RDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQztJQUNyQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7SUFDOUIsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBQy9CLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFNLElBQUksT0FBSSxDQUFDO0lBQ2xDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFNLEdBQUcsT0FBSSxDQUFDO0lBQ2hDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUUvQixRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7SUFJakIsVUFBVSxDQUFDO1FBQ1QsUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQy9CLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUM1QixRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDN0IsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQzNCLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztRQUMxQixRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7SUFDL0IsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ1YsQ0FBQztBQTNCRCxvRUEyQkM7QUFTRCxTQUFnQixpQkFBaUIsQ0FBQyxFQUFjLEVBQUUsUUFBNkIsRUFBRSxhQUEwQixFQUFFLGdCQUFtQyxFQUFFLGdCQUF5QjtJQUN6Syw0QkFBNEIsQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBRTFELElBQUksZ0JBQWdCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsRUFBRTtRQUNoRSxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsQ0FBQztLQUN6QztJQUdELFFBQVEsQ0FBQyxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsYUFBYSxDQUFDO0lBQ2hELFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNwQixDQUFDO0FBVkQsOENBVUM7Ozs7Ozs7Ozs7Ozs7OztBQ3RHRCxJQUFNLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM5QyxJQUFNLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM5QyxJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDMUMsSUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDakQsSUFBTSxpQkFBaUIsR0FBRztJQUN4QixHQUFHLEVBQUUsMEJBQTBCO0lBQy9CLElBQUksRUFBRSxVQUFVO0NBQ2pCLENBQUM7QUFJVywyQkFBbUIsR0FBRyxDQUFDO0lBQ2xDLElBQU0sTUFBTSxHQUFHO1FBRWIsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUNsQixPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDbEIsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUNsQixPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDbEIsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUNsQixPQUFPLENBQUMsU0FBUyxDQUFDO1FBRWxCLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDbEIsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUNsQixPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDbEIsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUNsQixPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ2xCLE9BQU8sQ0FBQyxTQUFTLENBQUM7UUFDbEIsT0FBTyxDQUFDLFNBQVMsQ0FBQztLQUNuQixDQUFDO0lBSUYsSUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQy9DLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDNUIsSUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM5QixJQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdCLElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNWLEdBQUcsRUFBRSxNQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBRztZQUUzRCxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1NBQ3RELENBQUMsQ0FBQztLQUNKO0lBR0QsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMzQixJQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNyQixJQUFNLEVBQUUsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNWLEdBQUcsRUFBRSxNQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBSTtZQUN2QixJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1NBQ3RELENBQUMsQ0FBQztLQUNKO0lBRUQsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDLEVBQUUsQ0FBQztBQUVMLFNBQVMsT0FBTyxDQUFDLEdBQVc7SUFDMUIsT0FBTztRQUNMLEdBQUc7UUFDSCxJQUFJLEVBQUUsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUk7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QUMsQ0FBQyxDQUFDO1FBQzVFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzlFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSwyQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hGLElBQUksQ0FBQyxNQUFNLENBQUMs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LENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3BELENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUNwRCxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFDcEQsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO0tBQ3JELENBQUM7SUFDRixJQUFNLGNBQWMsR0FBRztRQUNyQixDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUM7UUFDMUQsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDO1FBQzFELENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztRQUMxRCxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFP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YixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7SUFDYixHQUFHLEVBQUUsUUFBUTtJQUNiLEdBQUcsRUFBRSxRQUFRO0lBQ2IsR0FBRyxFQUFFLFFBQVE7Q0FDZCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU1GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBT3JCLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLElBQUk7SUFDVCxJQUFJLEVBQUUsR0FBRztJQUNULEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUM7SUFDYixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO1FBQ2QsR0FBRyxFQUFFLEdBQUc7UUFDUixJQUFJLEVBQUUsR0FBRztRQUNULEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO0tBQ1QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixJQUFJLEVBQUUsR0FBRztJQUNULEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7Q0FDVCxDQUFDO0FBT0YsZ0JBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRztJQUNkLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixJQUFJLEVBQUUsR0FBRztJQUNULEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQztBQU9GLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7SUFDZCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixJQUFJLEVBQUUsR0FBRztJQUNULEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQztJQUNiLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7UUFDZCxHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsSUFBSSxFQUFFLEdBQUc7UUFDVCxHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztLQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQztJQUNiLGdCQUFRLENBQUMsR0FBRyxDQUFDLEdBQUc7UUFDZCxHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsSUFBSSxFQUFFLEdBQUc7UUFDVCxHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztRQUNSLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixHQUFHLEVBQUUsR0FBRztLQUNULENBQUM7QUFPRixnQkFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHO0lBQ2QsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsSUFBSSxFQUFFLEdBQUc7SUFDVCxHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0NBQ1QsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FDclBGLElBQWlCLEVBQUUsQ0FxRWxCO0FBckVELFdBQWlCLEVBQUU7SUFFSixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENBQUM7SUFFYixLQUFFLEdBQUksTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsTUFBRyxHQUFHLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLE1BQUcsR0FBRyxNQUFNLENBQUM7SUFFYixNQUFHLEdBQUcsTUFBTSxDQUFDO0lBRWIsS0FBRSxHQUFJLE1BQU0sQ0FBQztJQUViLEtBQUUsR0FBSSxNQUFNLENB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Q0FBQyxLQUFLLENBQUMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7YUFDNUQ7WUFDRCxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRTtnQkFDZixDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNOLENBQUMsRUFBRSxDQUFDO2FBQ0w7U0FDRjtJQUNILENBQUM7SUFDSCxrQkFBQztBQUFELENBQUMsQ0EzV2dDLHNCQUFVLEdBMlcxQztBQTNXWSxrQ0FBVyIsImZpbGUiOiJjbGllbnQtYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9kZW1vL2NsaWVudC50c1wiKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogSW1wbGVtZW50cyB0aGUgYXR0YWNoIG1ldGhvZCwgdGhhdCBhdHRhY2hlcyB0aGUgdGVybWluYWwgdG8gYSBXZWJTb2NrZXQgc3RyZWFtLlxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsLCBJRGlzcG9zYWJsZSwgSVRlcm1pbmFsQWRkb24gfSBmcm9tICd4dGVybSc7XG5cbmludGVyZmFjZSBJQXR0YWNoT3B0aW9ucyB7XG4gIGJpZGlyZWN0aW9uYWw/OiBib29sZWFuO1xuICBpbnB1dFV0Zjg/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQXR0YWNoQWRkb24gaW1wbGVtZW50cyBJVGVybWluYWxBZGRvbiB7XG4gIHByaXZhdGUgX3NvY2tldDogV2ViU29ja2V0O1xuICBwcml2YXRlIF9iaWRpcmVjdGlvbmFsOiBib29sZWFuO1xuICBwcml2YXRlIF91dGY4OiBib29sZWFuO1xuICBwcml2YXRlIF9kaXNwb3NhYmxlczogSURpc3Bvc2FibGVbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHNvY2tldDogV2ViU29ja2V0LCBvcHRpb25zPzogSUF0dGFjaE9wdGlvbnMpIHtcbiAgICB0aGlzLl9zb2NrZXQgPSBzb2NrZXQ7XG4gICAgLy8gYWx3YXlzIHNldCBiaW5hcnkgdHlwZSB0byBhcnJheWJ1ZmZlciwgd2UgZG8gbm90IGhhbmRsZSBibG9ic1xuICAgIHRoaXMuX3NvY2tldC5iaW5hcnlUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICB0aGlzLl9iaWRpcmVjdGlvbmFsID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5iaWRpcmVjdGlvbmFsID09PSBmYWxzZSkgPyBmYWxzZSA6IHRydWU7XG4gICAgdGhpcy5fdXRmOCA9ICEhKG9wdGlvbnMgJiYgb3B0aW9ucy5pbnB1dFV0ZjgpO1xuICB9XG5cbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl91dGY4KSB7XG4gICAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGFkZFNvY2tldExpc3RlbmVyKHRoaXMuX3NvY2tldCwgJ21lc3NhZ2UnLFxuICAgICAgICAoZXY6IE1lc3NhZ2VFdmVudCB8IEV2ZW50IHwgQ2xvc2VFdmVudCkgPT4gdGVybWluYWwud3JpdGVVdGY4KG5ldyBVaW50OEFycmF5KChldiBhcyBhbnkpLmRhdGEgYXMgQXJyYXlCdWZmZXIpKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGFkZFNvY2tldExpc3RlbmVyKHRoaXMuX3NvY2tldCwgJ21lc3NhZ2UnLFxuICAgICAgICAoZXY6IE1lc3NhZ2VFdmVudCB8IEV2ZW50IHwgQ2xvc2VFdmVudCkgPT4gdGVybWluYWwud3JpdGUoKGV2IGFzIGFueSkuZGF0YSBhcyBzdHJpbmcpKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2JpZGlyZWN0aW9uYWwpIHtcbiAgICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2godGVybWluYWwub25EYXRhKGRhdGEgPT4gdGhpcy5fc2VuZERhdGEoZGF0YSkpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGFkZFNvY2tldExpc3RlbmVyKHRoaXMuX3NvY2tldCwgJ2Nsb3NlJywgKCkgPT4gdGhpcy5kaXNwb3NlKCkpKTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGFkZFNvY2tldExpc3RlbmVyKHRoaXMuX3NvY2tldCwgJ2Vycm9yJywgKCkgPT4gdGhpcy5kaXNwb3NlKCkpKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmZvckVhY2goZCA9PiBkLmRpc3Bvc2UoKSk7XG4gIH1cblxuICBwcml2YXRlIF9zZW5kRGF0YShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiBkbyBzb21ldGhpbmcgYmV0dGVyIHRoYW4ganVzdCBzd2FsbG93aW5nXG4gICAgLy8gdGhlIGRhdGEgaWYgdGhlIHNvY2tldCBpcyBub3QgaW4gYSB3b3JraW5nIGNvbmRpdGlvblxuICAgIGlmICh0aGlzLl9zb2NrZXQucmVhZHlTdGF0ZSAhPT0gMSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zb2NrZXQuc2VuZChkYXRhKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRTb2NrZXRMaXN0ZW5lcihzb2NrZXQ6IFdlYlNvY2tldCwgdHlwZTogc3RyaW5nLCBoYW5kbGVyOiAodGhpczogV2ViU29ja2V0LCBldjogTWVzc2FnZUV2ZW50IHwgRXZlbnQgfCBDbG9zZUV2ZW50KSA9PiBhbnkpOiBJRGlzcG9zYWJsZSB7XG4gIHNvY2tldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xuICByZXR1cm4ge1xuICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICAvLyBBbHJlYWR5IGRpc3Bvc2VkXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xuICAgIH1cbiAgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwsIElUZXJtaW5hbEFkZG9uIH0gZnJvbSAneHRlcm0nO1xuXG5pbnRlcmZhY2UgSVRlcm1pbmFsRGltZW5zaW9ucyB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHRlcm1pbmFsLlxuICAgKi9cbiAgcm93czogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIHRlcm1pbmFsLlxuICAgKi9cbiAgY29sczogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRml0QWRkb24gaW1wbGVtZW50cyBJVGVybWluYWxBZGRvbiB7XG4gIHByaXZhdGUgX3Rlcm1pbmFsOiBUZXJtaW5hbCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsID0gdGVybWluYWw7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHt9XG5cbiAgcHVibGljIGZpdCgpOiB2b2lkIHtcbiAgICBjb25zdCBkaW1zID0gdGhpcy5wcm9wb3NlRGltZW5zaW9ucygpO1xuICAgIGlmICghZGltcyB8fCAhdGhpcy5fdGVybWluYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBSZW1vdmUgcmVsaWFuY2Ugb24gcHJpdmF0ZSBBUElcbiAgICBjb25zdCBjb3JlID0gKDxhbnk+dGhpcy5fdGVybWluYWwpLl9jb3JlO1xuXG4gICAgLy8gRm9yY2UgYSBmdWxsIHJlbmRlclxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5yb3dzICE9PSBkaW1zLnJvd3MgfHwgdGhpcy5fdGVybWluYWwuY29scyAhPT0gZGltcy5jb2xzKSB7XG4gICAgICBjb3JlLl9yZW5kZXJTZXJ2aWNlLmNsZWFyKCk7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5yZXNpemUoZGltcy5jb2xzLCBkaW1zLnJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBwcm9wb3NlRGltZW5zaW9ucygpOiBJVGVybWluYWxEaW1lbnNpb25zIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFJlbW92ZSByZWxpYW5jZSBvbiBwcml2YXRlIEFQSVxuICAgIGNvbnN0IGNvcmUgPSAoPGFueT50aGlzLl90ZXJtaW5hbCkuX2NvcmU7XG5cbiAgICBjb25zdCBwYXJlbnRFbGVtZW50U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl90ZXJtaW5hbC5lbGVtZW50LnBhcmVudEVsZW1lbnQpO1xuICAgIGNvbnN0IHBhcmVudEVsZW1lbnRIZWlnaHQgPSBwYXJzZUludChwYXJlbnRFbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnaGVpZ2h0JykpO1xuICAgIGNvbnN0IHBhcmVudEVsZW1lbnRXaWR0aCA9IE1hdGgubWF4KDAsIHBhcnNlSW50KHBhcmVudEVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd3aWR0aCcpKSk7XG4gICAgY29uc3QgZWxlbWVudFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudCk7XG4gICAgY29uc3QgZWxlbWVudFBhZGRpbmcgPSB7XG4gICAgICB0b3A6IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXRvcCcpKSxcbiAgICAgIGJvdHRvbTogcGFyc2VJbnQoZWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctYm90dG9tJykpLFxuICAgICAgcmlnaHQ6IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JykpLFxuICAgICAgbGVmdDogcGFyc2VJbnQoZWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctbGVmdCcpKVxuICAgIH07XG4gICAgY29uc3QgZWxlbWVudFBhZGRpbmdWZXIgPSBlbGVtZW50UGFkZGluZy50b3AgKyBlbGVtZW50UGFkZGluZy5ib3R0b207XG4gICAgY29uc3QgZWxlbWVudFBhZGRpbmdIb3IgPSBlbGVtZW50UGFkZGluZy5yaWdodCArIGVsZW1lbnRQYWRkaW5nLmxlZnQ7XG4gICAgY29uc3QgYXZhaWxhYmxlSGVpZ2h0ID0gcGFyZW50RWxlbWVudEhlaWdodCAtIGVsZW1lbnRQYWRkaW5nVmVyO1xuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gcGFyZW50RWxlbWVudFdpZHRoIC0gZWxlbWVudFBhZGRpbmdIb3IgLSBjb3JlLnZpZXdwb3J0LnNjcm9sbEJhcldpZHRoO1xuICAgIGNvbnN0IGdlb21ldHJ5ID0ge1xuICAgICAgY29sczogTWF0aC5mbG9vcihhdmFpbGFibGVXaWR0aCAvIGNvcmUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgpLFxuICAgICAgcm93czogTWF0aC5mbG9vcihhdmFpbGFibGVIZWlnaHQgLyBjb3JlLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodClcbiAgICB9O1xuICAgIHJldHVybiBnZW9tZXRyeTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCwgSURpc3Bvc2FibGUsIElUZXJtaW5hbEFkZG9uIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTZWFyY2hPcHRpb25zIHtcbiAgcmVnZXg/OiBib29sZWFuO1xuICB3aG9sZVdvcmQ/OiBib29sZWFuO1xuICBjYXNlU2Vuc2l0aXZlPzogYm9vbGVhbjtcbiAgaW5jcmVtZW50YWw/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTZWFyY2hSZXN1bHQge1xuICB0ZXJtOiBzdHJpbmc7XG4gIGNvbDogbnVtYmVyO1xuICByb3c6IG51bWJlcjtcbn1cblxuY29uc3QgTk9OX1dPUkRfQ0hBUkFDVEVSUyA9ICcgfiFAIyQlXiYqKCkrYC09W117fXxcXDs6XCJcXCcsLi88Pj8nO1xuY29uc3QgTElORVNfQ0FDSEVfVElNRV9UT19MSVZFID0gMTUgKiAxMDAwOyAvLyAxNSBzZWNzXG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hBZGRvbiBpbXBsZW1lbnRzIElUZXJtaW5hbEFkZG9uIHtcbiAgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiB0cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmdXaXRoV3JhcCBpcyBhIGZhaXJseSBleHBlbnNpdmUgY2FsbC5cbiAgICogV2UgbWVtb2l6ZSB0aGUgY2FsbHMgaW50byBhbiBhcnJheSB0aGF0IGhhcyBhIHRpbWUgYmFzZWQgdHRsLlxuICAgKiBfbGluZXNDYWNoZSBpcyBhbHNvIGludmFsaWRhdGVkIHdoZW4gdGhlIHRlcm1pbmFsIGN1cnNvciBtb3Zlcy5cbiAgICovXG4gIHByaXZhdGUgX2xpbmVzQ2FjaGU6IHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9saW5lc0NhY2hlVGltZW91dElkID0gMDtcbiAgcHJpdmF0ZSBfY3Vyc29yTW92ZUxpc3RlbmVyOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcmVzaXplTGlzdGVuZXI6IElEaXNwb3NhYmxlIHwgdW5kZWZpbmVkO1xuXG4gIHB1YmxpYyBhY3RpdmF0ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbCA9IHRlcm1pbmFsO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7IH1cblxuICAvKipcbiAgICogRmluZCB0aGUgbmV4dCBpbnN0YW5jZSBvZiB0aGUgdGVybSwgdGhlbiBzY3JvbGwgdG8gYW5kIHNlbGVjdCBpdC4gSWYgaXRcbiAgICogZG9lc24ndCBleGlzdCwgZG8gbm90aGluZy5cbiAgICogQHBhcmFtIHRlcm0gVGhlIHNlYXJjaCB0ZXJtLlxuICAgKiBAcGFyYW0gc2VhcmNoT3B0aW9ucyBTZWFyY2ggb3B0aW9ucy5cbiAgICogQHJldHVybiBXaGV0aGVyIGEgcmVzdWx0IHdhcyBmb3VuZC5cbiAgICovXG4gIHB1YmxpYyBmaW5kTmV4dCh0ZXJtOiBzdHJpbmcsIHNlYXJjaE9wdGlvbnM/OiBJU2VhcmNoT3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5fdGVybWluYWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHVzZSBhZGRvbiB1bnRpbCBpdCBoYXMgYmVlbiBsb2FkZWQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRlcm0gfHwgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0Q29sID0gMDtcbiAgICBsZXQgc3RhcnRSb3cgPSAwO1xuXG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLmhhc1NlbGVjdGlvbigpKSB7XG4gICAgICBjb25zdCBpbmNyZW1lbnRhbCA9IHNlYXJjaE9wdGlvbnMgPyBzZWFyY2hPcHRpb25zLmluY3JlbWVudGFsIDogZmFsc2U7XG4gICAgICAvLyBTdGFydCBmcm9tIHRoZSBzZWxlY3Rpb24gZW5kIGlmIHRoZXJlIGlzIGEgc2VsZWN0aW9uXG4gICAgICAvLyBGb3IgaW5jcmVtZW50YWwgc2VhcmNoLCB1c2UgZXhpc3Rpbmcgcm93XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0aW9uID0gdGhpcy5fdGVybWluYWwuZ2V0U2VsZWN0aW9uUG9zaXRpb24oKSE7XG4gICAgICBzdGFydFJvdyA9IGluY3JlbWVudGFsID8gY3VycmVudFNlbGVjdGlvbi5zdGFydFJvdyA6IGN1cnJlbnRTZWxlY3Rpb24uZW5kUm93O1xuICAgICAgc3RhcnRDb2wgPSBpbmNyZW1lbnRhbCA/IGN1cnJlbnRTZWxlY3Rpb24uc3RhcnRDb2x1bW4gOiBjdXJyZW50U2VsZWN0aW9uLmVuZENvbHVtbjtcbiAgICB9XG5cbiAgICB0aGlzLl9pbml0TGluZXNDYWNoZSgpO1xuXG4gICAgLy8gU2VhcmNoIHN0YXJ0Um93XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgc3RhcnRSb3csIHN0YXJ0Q29sLCBzZWFyY2hPcHRpb25zKTtcblxuICAgIC8vIFNlYXJjaCBmcm9tIHN0YXJ0Um93ICsgMSB0byBlbmRcbiAgICBpZiAoIXJlc3VsdCkge1xuXG4gICAgICBmb3IgKGxldCB5ID0gc3RhcnRSb3cgKyAxOyB5IDwgdGhpcy5fdGVybWluYWwuYnVmZmVyLmJhc2VZICsgdGhpcy5fdGVybWluYWwucm93czsgeSsrKSB7XG5cbiAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgbGluZSBpcyB3cmFwcGVkIGxpbmUsIGluY3JlYXNlIGluZGV4IG9mIGNvbHVtbiB0byBpZ25vcmUgdGhlIHByZXZpb3VzIHNjYW5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCByZXNldCBiZWdpbm5pbmcgY29sdW1uIGluZGV4IHRvIHplcm8gd2l0aCBzZXQgbmV3IHVud3JhcHBlZCBsaW5lIGluZGV4XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgeSwgMCwgc2VhcmNoT3B0aW9ucyk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiB3ZSBoaXQgdGhlIGJvdHRvbSBhbmQgZGlkbid0IHNlYXJjaCBmcm9tIHRoZSB2ZXJ5IHRvcCB3cmFwIGJhY2sgdXBcbiAgICBpZiAoIXJlc3VsdCAmJiBzdGFydFJvdyAhPT0gMCkge1xuICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBzdGFydFJvdzsgeSsrKSB7XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgeSwgMCwgc2VhcmNoT3B0aW9ucyk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBzZWxlY3Rpb24gYW5kIHNjcm9sbCBpZiBhIHJlc3VsdCB3YXMgZm91bmRcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0UmVzdWx0KHJlc3VsdCk7XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgcHJldmlvdXMgaW5zdGFuY2Ugb2YgdGhlIHRlcm0sIHRoZW4gc2Nyb2xsIHRvIGFuZCBzZWxlY3QgaXQuIElmIGl0XG4gICAqIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAqIEBwYXJhbSB0ZXJtIFRoZSBzZWFyY2ggdGVybS5cbiAgICogQHBhcmFtIHNlYXJjaE9wdGlvbnMgU2VhcmNoIG9wdGlvbnMuXG4gICAqIEByZXR1cm4gV2hldGhlciBhIHJlc3VsdCB3YXMgZm91bmQuXG4gICAqL1xuICBwdWJsaWMgZmluZFByZXZpb3VzKHRlcm06IHN0cmluZywgc2VhcmNoT3B0aW9ucz86IElTZWFyY2hPcHRpb25zKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLl90ZXJtaW5hbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgdXNlIGFkZG9uIHVudGlsIGl0IGhhcyBiZWVuIGxvYWRlZCcpO1xuICAgIH1cblxuICAgIGlmICghdGVybSB8fCB0ZXJtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fdGVybWluYWwuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1JldmVyc2VTZWFyY2ggPSB0cnVlO1xuICAgIGxldCBzdGFydFJvdyA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5iYXNlWSArIHRoaXMuX3Rlcm1pbmFsLnJvd3M7XG4gICAgbGV0IHN0YXJ0Q29sID0gdGhpcy5fdGVybWluYWwuY29scztcbiAgICBsZXQgcmVzdWx0OiBJU2VhcmNoUmVzdWx0IHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGluY3JlbWVudGFsID0gc2VhcmNoT3B0aW9ucyA/IHNlYXJjaE9wdGlvbnMuaW5jcmVtZW50YWwgOiBmYWxzZTtcbiAgICBpZiAodGhpcy5fdGVybWluYWwuaGFzU2VsZWN0aW9uKCkpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3Rpb24gPSB0aGlzLl90ZXJtaW5hbC5nZXRTZWxlY3Rpb25Qb3NpdGlvbigpITtcbiAgICAgIC8vIFN0YXJ0IGZyb20gc2VsZWN0aW9uIHN0YXJ0IGlmIHRoZXJlIGlzIGEgc2VsZWN0aW9uXG4gICAgICBzdGFydFJvdyA9IGN1cnJlbnRTZWxlY3Rpb24uc3RhcnRSb3c7XG4gICAgICBzdGFydENvbCA9IGN1cnJlbnRTZWxlY3Rpb24uc3RhcnRDb2x1bW47XG4gICAgfVxuXG4gICAgdGhpcy5faW5pdExpbmVzQ2FjaGUoKTtcblxuICAgIGlmIChpbmNyZW1lbnRhbCkge1xuICAgICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzdGFydFJvdywgc3RhcnRDb2wsIHNlYXJjaE9wdGlvbnMsIGZhbHNlKTtcbiAgICAgIGlmICghKHJlc3VsdCAmJiByZXN1bHQucm93ID09PSBzdGFydFJvdyAmJiByZXN1bHQuY29sID09PSBzdGFydENvbCkpIHtcbiAgICAgICAgcmVzdWx0ID0gdGhpcy5fZmluZEluTGluZSh0ZXJtLCBzdGFydFJvdywgc3RhcnRDb2wsIHNlYXJjaE9wdGlvbnMsIHRydWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSB0aGlzLl9maW5kSW5MaW5lKHRlcm0sIHN0YXJ0Um93LCBzdGFydENvbCwgc2VhcmNoT3B0aW9ucywgaXNSZXZlcnNlU2VhcmNoKTtcbiAgICB9XG5cbiAgICAvLyBTZWFyY2ggZnJvbSBzdGFydFJvdyAtIDEgdG8gdG9wXG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHN0YXJ0Q29sID0gdGhpcy5fdGVybWluYWwuY29scztcbiAgICAgIGZvciAobGV0IHkgPSBzdGFydFJvdyAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgeSwgc3RhcnRDb2wsIHNlYXJjaE9wdGlvbnMsIGlzUmV2ZXJzZVNlYXJjaCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJZiB3ZSBoaXQgdGhlIHRvcCBhbmQgZGlkbid0IHNlYXJjaCBmcm9tIHRoZSB2ZXJ5IGJvdHRvbSB3cmFwIGJhY2sgZG93blxuICAgIGlmICghcmVzdWx0ICYmIHN0YXJ0Um93ICE9PSAodGhpcy5fdGVybWluYWwuYnVmZmVyLmJhc2VZICsgdGhpcy5fdGVybWluYWwucm93cykpIHtcbiAgICAgIGZvciAobGV0IHkgPSAodGhpcy5fdGVybWluYWwuYnVmZmVyLmJhc2VZICsgdGhpcy5fdGVybWluYWwucm93cyk7IHkgPiBzdGFydFJvdzsgeS0tKSB7XG4gICAgICAgIHJlc3VsdCA9IHRoaXMuX2ZpbmRJbkxpbmUodGVybSwgeSwgc3RhcnRDb2wsIHNlYXJjaE9wdGlvbnMsIGlzUmV2ZXJzZVNlYXJjaCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCBzZWxlY3Rpb24gYW5kIHNjcm9sbCBpZiBhIHJlc3VsdCB3YXMgZm91bmRcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0UmVzdWx0KHJlc3VsdCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCBhIGxpbmUgY2FjaGUgd2l0aCBhIHR0bFxuICAgKi9cbiAgcHJpdmF0ZSBfaW5pdExpbmVzQ2FjaGUoKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbCE7XG4gICAgaWYgKCF0aGlzLl9saW5lc0NhY2hlKSB7XG4gICAgICB0aGlzLl9saW5lc0NhY2hlID0gbmV3IEFycmF5KHRlcm1pbmFsLmJ1ZmZlci5sZW5ndGgpO1xuICAgICAgdGhpcy5fY3Vyc29yTW92ZUxpc3RlbmVyID0gdGVybWluYWwub25DdXJzb3JNb3ZlKCgpID0+IHRoaXMuX2Rlc3Ryb3lMaW5lc0NhY2hlKCkpO1xuICAgICAgdGhpcy5fcmVzaXplTGlzdGVuZXIgPSB0ZXJtaW5hbC5vblJlc2l6ZSgoKSA9PiB0aGlzLl9kZXN0cm95TGluZXNDYWNoZSgpKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2xpbmVzQ2FjaGVUaW1lb3V0SWQpO1xuICAgIHRoaXMuX2xpbmVzQ2FjaGVUaW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB0aGlzLl9kZXN0cm95TGluZXNDYWNoZSgpLCBMSU5FU19DQUNIRV9USU1FX1RPX0xJVkUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZGVzdHJveUxpbmVzQ2FjaGUoKTogdm9pZCB7XG4gICAgdGhpcy5fbGluZXNDYWNoZSA9IHVuZGVmaW5lZDtcbiAgICBpZiAodGhpcy5fY3Vyc29yTW92ZUxpc3RlbmVyKSB7XG4gICAgICB0aGlzLl9jdXJzb3JNb3ZlTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fY3Vyc29yTW92ZUxpc3RlbmVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcmVzaXplTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuX3Jlc2l6ZUxpc3RlbmVyLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX3Jlc2l6ZUxpc3RlbmVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fbGluZXNDYWNoZVRpbWVvdXRJZCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9saW5lc0NhY2hlVGltZW91dElkKTtcbiAgICAgIHRoaXMuX2xpbmVzQ2FjaGVUaW1lb3V0SWQgPSAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBIGZvdW5kIHN1YnN0cmluZyBpcyBhIHdob2xlIHdvcmQgaWYgaXQgZG9lc24ndCBoYXZlIGFuIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXIgZGlyZWN0bHkgYWRqYWNlbnQgdG8gaXQuXG4gICAqIEBwYXJhbSBzZWFyY2hJbmRleCBzdGFydGluZyBpbmRleHQgb2YgdGhlIHBvdGVudGlhbCB3aG9sZSB3b3JkIHN1YnN0cmluZ1xuICAgKiBAcGFyYW0gbGluZSBlbnRpcmUgc3RyaW5nIGluIHdoaWNoIHRoZSBwb3RlbnRpYWwgd2hvbGUgd29yZCB3YXMgZm91bmRcbiAgICogQHBhcmFtIHRlcm0gdGhlIHN1YnN0cmluZyB0aGF0IHN0YXJ0cyBhdCBzZWFyY2hJbmRleFxuICAgKi9cbiAgcHJpdmF0ZSBfaXNXaG9sZVdvcmQoc2VhcmNoSW5kZXg6IG51bWJlciwgbGluZTogc3RyaW5nLCB0ZXJtOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKCgoc2VhcmNoSW5kZXggPT09IDApIHx8IChOT05fV09SRF9DSEFSQUNURVJTLmluZGV4T2YobGluZVtzZWFyY2hJbmRleCAtIDFdKSAhPT0gLTEpKSAmJlxuICAgICAgKCgoc2VhcmNoSW5kZXggKyB0ZXJtLmxlbmd0aCkgPT09IGxpbmUubGVuZ3RoKSB8fCAoTk9OX1dPUkRfQ0hBUkFDVEVSUy5pbmRleE9mKGxpbmVbc2VhcmNoSW5kZXggKyB0ZXJtLmxlbmd0aF0pICE9PSAtMSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2hlcyBhIGxpbmUgZm9yIGEgc2VhcmNoIHRlcm0uIFRha2VzIHRoZSBwcm92aWRlZCB0ZXJtaW5hbCBsaW5lIGFuZCBzZWFyY2hlcyB0aGUgdGV4dCBsaW5lLCB3aGljaCBtYXkgY29udGFpblxuICAgKiBzdWJzZXF1ZW50IHRlcm1pbmFsIGxpbmVzIGlmIHRoZSB0ZXh0IGlzIHdyYXBwZWQuIElmIHRoZSBwcm92aWRlZCBsaW5lIG51bWJlciBpcyBwYXJ0IG9mIGEgd3JhcHBlZCB0ZXh0IGxpbmUgdGhhdFxuICAgKiBzdGFydGVkIG9uIGFuIGVhcmxpZXIgbGluZSB0aGVuIGl0IGlzIHNraXBwZWQgc2luY2UgaXQgd2lsbCBiZSBwcm9wZXJseSBzZWFyY2hlZCB3aGVuIHRoZSB0ZXJtaW5hbCBsaW5lIHRoYXQgdGhlXG4gICAqIHRleHQgc3RhcnRzIG9uIGlzIHNlYXJjaGVkLlxuICAgKiBAcGFyYW0gdGVybSBUaGUgc2VhcmNoIHRlcm0uXG4gICAqIEBwYXJhbSByb3cgVGhlIGxpbmUgdG8gIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbS5cbiAgICogQHBhcmFtIGNvbCBUaGUgY29sdW1uIHRvIHN0YXJ0IHRoZSBzZWFyY2ggZnJvbS5cbiAgICogQHBhcmFtIHNlYXJjaE9wdGlvbnMgU2VhcmNoIG9wdGlvbnMuXG4gICAqIEByZXR1cm4gVGhlIHNlYXJjaCByZXN1bHQgaWYgaXQgd2FzIGZvdW5kLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maW5kSW5MaW5lKHRlcm06IHN0cmluZywgcm93OiBudW1iZXIsIGNvbDogbnVtYmVyLCBzZWFyY2hPcHRpb25zOiBJU2VhcmNoT3B0aW9ucyA9IHt9LCBpc1JldmVyc2VTZWFyY2g6IGJvb2xlYW4gPSBmYWxzZSk6IElTZWFyY2hSZXN1bHQgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWwhO1xuXG4gICAgLy8gSWdub3JlIHdyYXBwZWQgbGluZXMsIG9ubHkgY29uc2lkZXIgb24gdW53cmFwcGVkIGxpbmUgKGZpcnN0IHJvdyBvZiBjb21tYW5kIHN0cmluZykuXG4gICAgY29uc3QgZmlyc3RMaW5lID0gdGVybWluYWwuYnVmZmVyLmdldExpbmUocm93KTtcbiAgICBpZiAoZmlyc3RMaW5lICYmIGZpcnN0TGluZS5pc1dyYXBwZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHN0cmluZ0xpbmUgPSB0aGlzLl9saW5lc0NhY2hlID8gdGhpcy5fbGluZXNDYWNoZVtyb3ddIDogdm9pZCAwO1xuICAgIGlmIChzdHJpbmdMaW5lID09PSB2b2lkIDApIHtcbiAgICAgIHN0cmluZ0xpbmUgPSB0aGlzLl90cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmdXaXRoV3JhcChyb3csIHRydWUpO1xuICAgICAgaWYgKHRoaXMuX2xpbmVzQ2FjaGUpIHtcbiAgICAgICAgdGhpcy5fbGluZXNDYWNoZVtyb3ddID0gc3RyaW5nTGluZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hUZXJtID0gc2VhcmNoT3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gdGVybSA6IHRlcm0udG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzZWFyY2hTdHJpbmdMaW5lID0gc2VhcmNoT3B0aW9ucy5jYXNlU2Vuc2l0aXZlID8gc3RyaW5nTGluZSA6IHN0cmluZ0xpbmUudG9Mb3dlckNhc2UoKTtcblxuICAgIGxldCByZXN1bHRJbmRleCA9IC0xO1xuICAgIGlmIChzZWFyY2hPcHRpb25zLnJlZ2V4KSB7XG4gICAgICBjb25zdCBzZWFyY2hSZWdleCA9IFJlZ0V4cChzZWFyY2hUZXJtLCAnZycpO1xuICAgICAgbGV0IGZvdW5kVGVybTogUmVnRXhwRXhlY0FycmF5IHwgbnVsbDtcbiAgICAgIGlmIChpc1JldmVyc2VTZWFyY2gpIHtcbiAgICAgICAgLy8gVGhpcyBsb29wIHdpbGwgZ2V0IHRoZSByZXN1bHRJbmRleCBvZiB0aGUgX2xhc3RfIHJlZ2V4IG1hdGNoIGluIHRoZSByYW5nZSAwLi5jb2xcbiAgICAgICAgd2hpbGUgKGZvdW5kVGVybSA9IHNlYXJjaFJlZ2V4LmV4ZWMoc2VhcmNoU3RyaW5nTGluZS5zbGljZSgwLCBjb2wpKSkge1xuICAgICAgICAgIHJlc3VsdEluZGV4ID0gc2VhcmNoUmVnZXgubGFzdEluZGV4IC0gZm91bmRUZXJtWzBdLmxlbmd0aDtcbiAgICAgICAgICB0ZXJtID0gZm91bmRUZXJtWzBdO1xuICAgICAgICAgIHNlYXJjaFJlZ2V4Lmxhc3RJbmRleCAtPSAodGVybS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm91bmRUZXJtID0gc2VhcmNoUmVnZXguZXhlYyhzZWFyY2hTdHJpbmdMaW5lLnNsaWNlKGNvbCkpO1xuICAgICAgICBpZiAoZm91bmRUZXJtICYmIGZvdW5kVGVybVswXS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVzdWx0SW5kZXggPSBjb2wgKyAoc2VhcmNoUmVnZXgubGFzdEluZGV4IC0gZm91bmRUZXJtWzBdLmxlbmd0aCk7XG4gICAgICAgICAgdGVybSA9IGZvdW5kVGVybVswXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNSZXZlcnNlU2VhcmNoKSB7XG4gICAgICAgIGlmIChjb2wgLSBzZWFyY2hUZXJtLmxlbmd0aCA+PSAwKSB7XG4gICAgICAgICAgcmVzdWx0SW5kZXggPSBzZWFyY2hTdHJpbmdMaW5lLmxhc3RJbmRleE9mKHNlYXJjaFRlcm0sIGNvbCAtIHNlYXJjaFRlcm0ubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0SW5kZXggPSBzZWFyY2hTdHJpbmdMaW5lLmluZGV4T2Yoc2VhcmNoVGVybSwgY29sKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVzdWx0SW5kZXggPj0gMCkge1xuICAgICAgLy8gQWRqdXN0IHRoZSByb3cgbnVtYmVyIGFuZCBzZWFyY2ggaW5kZXggaWYgbmVlZGVkIHNpbmNlIGEgXCJsaW5lXCIgb2YgdGV4dCBjYW4gc3BhbiBtdWx0aXBsZSByb3dzXG4gICAgICBpZiAocmVzdWx0SW5kZXggPj0gdGVybWluYWwuY29scykge1xuICAgICAgICByb3cgKz0gTWF0aC5mbG9vcihyZXN1bHRJbmRleCAvIHRlcm1pbmFsLmNvbHMpO1xuICAgICAgICByZXN1bHRJbmRleCA9IHJlc3VsdEluZGV4ICUgdGVybWluYWwuY29scztcbiAgICAgIH1cbiAgICAgIGlmIChzZWFyY2hPcHRpb25zLndob2xlV29yZCAmJiAhdGhpcy5faXNXaG9sZVdvcmQocmVzdWx0SW5kZXgsIHNlYXJjaFN0cmluZ0xpbmUsIHRlcm0pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5nZXRMaW5lKHJvdyk7XG5cbiAgICAgIGlmIChsaW5lKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0SW5kZXg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGNlbGwgPSBsaW5lLmdldENlbGwoaSk7XG4gICAgICAgICAgaWYgKCFjZWxsKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQWRqdXN0IHRoZSBzZWFyY2hJbmRleCB0byBub3JtYWxpemUgZW1vamkgaW50byBzaW5nbGUgY2hhcnNcbiAgICAgICAgICBjb25zdCBjaGFyID0gY2VsbC5jaGFyO1xuICAgICAgICAgIGlmIChjaGFyLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJlc3VsdEluZGV4IC09IGNoYXIubGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQWRqdXN0IHRoZSBzZWFyY2hJbmRleCBmb3IgZW1wdHkgY2hhcmFjdGVycyBmb2xsb3dpbmcgd2lkZSB1bmljb2RlXG4gICAgICAgICAgLy8gY2hhcnMgKGVnLiBDSkspXG4gICAgICAgICAgY29uc3QgY2hhcldpZHRoID0gY2VsbC53aWR0aDtcbiAgICAgICAgICBpZiAoY2hhcldpZHRoID09PSAwKSB7XG4gICAgICAgICAgICByZXN1bHRJbmRleCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGVybSxcbiAgICAgICAgY29sOiByZXN1bHRJbmRleCxcbiAgICAgICAgcm93XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIGEgYnVmZmVyIGxpbmUgdG8gYSBzdHJpbmcsIGluY2x1ZGluZyBzdWJzZXF1ZW50IGxpbmVzIGlmIHRoZXkgYXJlIHdyYXBzLlxuICAgKiBXaWRlIGNoYXJhY3RlcnMgd2lsbCBjb3VudCBhcyB0d28gY29sdW1ucyBpbiB0aGUgcmVzdWx0aW5nIHN0cmluZy4gVGhpc1xuICAgKiBmdW5jdGlvbiBpcyB1c2VmdWwgZm9yIGdldHRpbmcgdGhlIGFjdHVhbCB0ZXh0IHVuZGVybmVhdGggdGhlIHJhdyBzZWxlY3Rpb25cbiAgICogcG9zaXRpb24uXG4gICAqIEBwYXJhbSBsaW5lIFRoZSBsaW5lIGJlaW5nIHRyYW5zbGF0ZWQuXG4gICAqIEBwYXJhbSB0cmltUmlnaHQgV2hldGhlciB0byB0cmltIHdoaXRlc3BhY2UgdG8gdGhlIHJpZ2h0LlxuICAgKi9cbiAgcHJpdmF0ZSBfdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAobGluZUluZGV4OiBudW1iZXIsIHRyaW1SaWdodDogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbCE7XG4gICAgbGV0IGxpbmVTdHJpbmcgPSAnJztcbiAgICBsZXQgbGluZVdyYXBzVG9OZXh0OiBib29sZWFuO1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgbmV4dExpbmUgPSB0ZXJtaW5hbC5idWZmZXIuZ2V0TGluZShsaW5lSW5kZXggKyAxKTtcbiAgICAgIGxpbmVXcmFwc1RvTmV4dCA9IG5leHRMaW5lID8gbmV4dExpbmUuaXNXcmFwcGVkIDogZmFsc2U7XG4gICAgICBjb25zdCBsaW5lID0gdGVybWluYWwuYnVmZmVyLmdldExpbmUobGluZUluZGV4KTtcbiAgICAgIGlmICghbGluZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGxpbmVTdHJpbmcgKz0gbGluZS50cmFuc2xhdGVUb1N0cmluZyghbGluZVdyYXBzVG9OZXh0ICYmIHRyaW1SaWdodCkuc3Vic3RyaW5nKDAsIHRlcm1pbmFsLmNvbHMpO1xuICAgICAgbGluZUluZGV4Kys7XG4gICAgfSB3aGlsZSAobGluZVdyYXBzVG9OZXh0KTtcblxuICAgIHJldHVybiBsaW5lU3RyaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYW5kIHNjcm9sbHMgdG8gYSByZXN1bHQuXG4gICAqIEBwYXJhbSByZXN1bHQgVGhlIHJlc3VsdCB0byBzZWxlY3QuXG4gICAqIEByZXR1cm4gV2hldGhlcmEgcmVzdWx0IHdhcyBzZWxlY3RlZC5cbiAgICovXG4gIHByaXZhdGUgX3NlbGVjdFJlc3VsdChyZXN1bHQ6IElTZWFyY2hSZXN1bHQgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsITtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgdGVybWluYWwuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGVybWluYWwuc2VsZWN0KHJlc3VsdC5jb2wsIHJlc3VsdC5yb3csIHJlc3VsdC50ZXJtLmxlbmd0aCk7XG4gICAgLy8gSWYgaXQgaXMgbm90IGluIHRoZSB2aWV3cG9ydCB0aGVuIHdlIHNjcm9sbCBlbHNlIGl0IGp1c3QgZ2V0cyBzZWxlY3RlZFxuICAgIGlmIChyZXN1bHQucm93ID4gKHRlcm1pbmFsLmJ1ZmZlci52aWV3cG9ydFkgKyB0ZXJtaW5hbC5yb3dzKSB8fCByZXN1bHQucm93IDwgdGVybWluYWwuYnVmZmVyLnZpZXdwb3J0WSkge1xuICAgICAgbGV0IHNjcm9sbCA9IHJlc3VsdC5yb3cgLSB0ZXJtaW5hbC5idWZmZXIudmlld3BvcnRZO1xuICAgICAgc2Nyb2xsID0gc2Nyb2xsIC0gTWF0aC5mbG9vcih0ZXJtaW5hbC5yb3dzIC8gMik7XG4gICAgICB0ZXJtaW5hbC5zY3JvbGxMaW5lcyhzY3JvbGwpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCwgSUxpbmtNYXRjaGVyT3B0aW9ucywgSVRlcm1pbmFsQWRkb24gfSBmcm9tICd4dGVybSc7XG5cbmNvbnN0IHByb3RvY29sQ2xhdXNlID0gJyhodHRwcz86XFxcXC9cXFxcLyknO1xuY29uc3QgZG9tYWluQ2hhcmFjdGVyU2V0ID0gJ1tcXFxcZGEtelxcXFwuLV0rJztcbmNvbnN0IG5lZ2F0ZWREb21haW5DaGFyYWN0ZXJTZXQgPSAnW15cXFxcZGEtelxcXFwuLV0rJztcbmNvbnN0IGRvbWFpbkJvZHlDbGF1c2UgPSAnKCcgKyBkb21haW5DaGFyYWN0ZXJTZXQgKyAnKSc7XG5jb25zdCB0bGRDbGF1c2UgPSAnKFthLXpcXFxcLl17Miw2fSknO1xuY29uc3QgaXBDbGF1c2UgPSAnKChcXFxcZHsxLDN9XFxcXC4pezN9XFxcXGR7MSwzfSknO1xuY29uc3QgbG9jYWxIb3N0Q2xhdXNlID0gJyhsb2NhbGhvc3QpJztcbmNvbnN0IHBvcnRDbGF1c2UgPSAnKDpcXFxcZHsxLDV9KSc7XG5jb25zdCBob3N0Q2xhdXNlID0gJygoJyArIGRvbWFpbkJvZHlDbGF1c2UgKyAnXFxcXC4nICsgdGxkQ2xhdXNlICsgJyl8JyArIGlwQ2xhdXNlICsgJ3wnICsgbG9jYWxIb3N0Q2xhdXNlICsgJyknICsgcG9ydENsYXVzZSArICc/JztcbmNvbnN0IHBhdGhDaGFyYWN0ZXJTZXQgPSAnKFxcXFwvW1xcXFwvXFxcXHdcXFxcLlxcXFwtJX46K10qKSooW146XCJcXCdcXFxcc10pJztcbmNvbnN0IHBhdGhDbGF1c2UgPSAnKCcgKyBwYXRoQ2hhcmFjdGVyU2V0ICsgJyk/JztcbmNvbnN0IHF1ZXJ5U3RyaW5nSGFzaEZyYWdtZW50Q2hhcmFjdGVyU2V0ID0gJ1swLTlcXFxcd1xcXFxbXFxcXF1cXFxcKFxcXFwpXFxcXC9cXFxcP1xcXFwhI0AkJSZcXCcqKyw6O35cXFxcPVxcXFwuXFxcXC1dKic7XG5jb25zdCBxdWVyeVN0cmluZ0NsYXVzZSA9ICcoXFxcXD8nICsgcXVlcnlTdHJpbmdIYXNoRnJhZ21lbnRDaGFyYWN0ZXJTZXQgKyAnKT8nO1xuY29uc3QgaGFzaEZyYWdtZW50Q2xhdXNlID0gJygjJyArIHF1ZXJ5U3RyaW5nSGFzaEZyYWdtZW50Q2hhcmFjdGVyU2V0ICsgJyk/JztcbmNvbnN0IG5lZ2F0ZWRQYXRoQ2hhcmFjdGVyU2V0ID0gJ1teXFxcXC9cXFxcd1xcXFwuXFxcXC0lXSsnO1xuY29uc3QgYm9keUNsYXVzZSA9IGhvc3RDbGF1c2UgKyBwYXRoQ2xhdXNlICsgcXVlcnlTdHJpbmdDbGF1c2UgKyBoYXNoRnJhZ21lbnRDbGF1c2U7XG5jb25zdCBzdGFydCA9ICcoPzpefCcgKyBuZWdhdGVkRG9tYWluQ2hhcmFjdGVyU2V0ICsgJykoJztcbmNvbnN0IGVuZCA9ICcpKCR8JyArIG5lZ2F0ZWRQYXRoQ2hhcmFjdGVyU2V0ICsgJyknO1xuY29uc3Qgc3RyaWN0VXJsUmVnZXggPSBuZXcgUmVnRXhwKHN0YXJ0ICsgcHJvdG9jb2xDbGF1c2UgKyBib2R5Q2xhdXNlICsgZW5kKTtcblxuZnVuY3Rpb24gaGFuZGxlTGluayhldmVudDogTW91c2VFdmVudCwgdXJpOiBzdHJpbmcpOiB2b2lkIHtcbiAgd2luZG93Lm9wZW4odXJpLCAnX2JsYW5rJyk7XG59XG5cbmV4cG9ydCBjbGFzcyBXZWJMaW5rc0FkZG9uIGltcGxlbWVudHMgSVRlcm1pbmFsQWRkb24ge1xuICBwcml2YXRlIF9saW5rTWF0Y2hlcklkOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Rlcm1pbmFsOiBUZXJtaW5hbCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9oYW5kbGVyOiAoZXZlbnQ6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKSA9PiB2b2lkID0gaGFuZGxlTGluayxcbiAgICBwcml2YXRlIF9vcHRpb25zOiBJTGlua01hdGNoZXJPcHRpb25zID0ge31cbiAgKSB7XG4gICAgdGhpcy5fb3B0aW9ucy5tYXRjaEluZGV4ID0gMTtcbiAgfVxuXG4gIHB1YmxpYyBhY3RpdmF0ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbCA9IHRlcm1pbmFsO1xuICAgIHRoaXMuX2xpbmtNYXRjaGVySWQgPSB0aGlzLl90ZXJtaW5hbC5yZWdpc3RlckxpbmtNYXRjaGVyKHN0cmljdFVybFJlZ2V4LCB0aGlzLl9oYW5kbGVyLCB0aGlzLl9vcHRpb25zKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9saW5rTWF0Y2hlcklkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fdGVybWluYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fdGVybWluYWwuZGVyZWdpc3RlckxpbmtNYXRjaGVyKHRoaXMuX2xpbmtNYXRjaGVySWQpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgRkxBR1MgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wYXRBdHRyKGJ1ZmZlckxpbmU6IElCdWZmZXJMaW5lLCBpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgLy8gVE9ETzogTmVlZCB0byBtb3ZlIFdlYkdMIG92ZXIgdG8gdGhlIG5ldyBzeXN0ZW0gYW5kIHJlbW92ZSB0aGlzIGJsb2NrXG4gIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbERhdGEoKTtcbiAgYnVmZmVyTGluZS5sb2FkQ2VsbChpbmRleCwgY2VsbCk7XG4gIGNvbnN0IG9sZEJnID0gY2VsbC5nZXRCZ0NvbG9yKCkgPT09IC0xID8gMjU2IDogY2VsbC5nZXRCZ0NvbG9yKCk7XG4gIGNvbnN0IG9sZEZnID0gY2VsbC5nZXRGZ0NvbG9yKCkgPT09IC0xID8gMjU2IDogY2VsbC5nZXRGZ0NvbG9yKCk7XG4gIGNvbnN0IG9sZEF0dHIgPVxuICAgIChjZWxsLmlzQm9sZCgpID8gRkxBR1MuQk9MRCA6IDApIHxcbiAgICAoY2VsbC5pc1VuZGVybGluZSgpID8gRkxBR1MuVU5ERVJMSU5FIDogMCkgfFxuICAgIChjZWxsLmlzQmxpbmsoKSA/IEZMQUdTLkJMSU5LIDogMCkgfFxuICAgIChjZWxsLmlzSW52ZXJzZSgpID8gRkxBR1MuSU5WRVJTRSA6IDApIHxcbiAgICAoY2VsbC5pc0RpbSgpID8gRkxBR1MuRElNIDogMCkgfFxuICAgIChjZWxsLmlzSXRhbGljKCkgPyBGTEFHUy5JVEFMSUMgOiAwKTtcbiAgY29uc3QgYXR0ckNvbXBhdCA9XG4gICAgb2xkQmcgfFxuICAgIChvbGRGZyA8PCA5KSB8XG4gICAgKG9sZEF0dHIgPDwgMTgpO1xuICByZXR1cm4gYXR0ckNvbXBhdDtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2UgTUlUXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuaW1wb3J0IHsgSUNvbG9yIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMdW1pbmFuY2UoY29sb3I6IElDb2xvcik6IG51bWJlciB7XG4gIC8vIENvZWZmaWNpZW50cyB0YWtlbiBmcm9tOiBodHRwczovL3d3dy53My5vcmcvVFIvQUVSVC8jY29sb3ItY29udHJhc3RcbiAgY29uc3QgciA9IGNvbG9yLnJnYmEgPj4gMjQgJiAweGZmO1xuICBjb25zdCBnID0gY29sb3IucmdiYSA+PiAxNiAmIDB4ZmY7XG4gIGNvbnN0IGIgPSBjb2xvci5yZ2JhID4+IDggJiAweGZmO1xuICByZXR1cm4gKDAuMjk5ICogciArIDAuNTg3ICogZyArIDAuMTE0ICogYikgLyAyNTU7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZVByb2dyYW0sIFBST0pFQ1RJT05fTUFUUklYLCB0aHJvd0lmRmFsc3kgfSBmcm9tICcuL1dlYmdsVXRpbHMnO1xuaW1wb3J0IHsgV2ViZ2xDaGFyQXRsYXMgfSBmcm9tICcuL2F0bGFzL1dlYmdsQ2hhckF0bGFzJztcbmltcG9ydCB7IElXZWJHTDJSZW5kZXJpbmdDb250ZXh0LCBJV2ViR0xWZXJ0ZXhBcnJheU9iamVjdCwgSVJlbmRlck1vZGVsLCBJUmFzdGVyaXplZEdseXBoIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBJTkRJQ0lFU19QRVJfQ0VMTCB9IGZyb20gJy4vV2ViZ2xSZW5kZXJlcic7XG5pbXBvcnQgeyBDT01CSU5FRF9DSEFSX0JJVF9NQVNLIH0gZnJvbSAnLi9SZW5kZXJNb2RlbCc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBzbGljZSB9IGZyb20gJy4vVHlwZWRBcnJheSc7XG5pbXBvcnQgeyBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NPREUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBnZXRMdW1pbmFuY2UgfSBmcm9tICcuL0NvbG9yVXRpbHMnO1xuaW1wb3J0IHsgVGVybWluYWwsIElCdWZmZXJMaW5lIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuXG5pbnRlcmZhY2UgSVZlcnRpY2VzIHtcbiAgYXR0cmlidXRlczogRmxvYXQzMkFycmF5O1xuICAvKipcbiAgICogVGhlc2UgYnVmZmVycyBhcmUgdGhlIG9uZXMgdXNlZCB0byBiaW5kIHRvIFdlYkdMLCB0aGUgcmVhc29uIHRoZXJlIGFyZVxuICAgKiBtdWx0aXBsZSBpcyB0byBhbGxvdyBkb3VibGUgYnVmZmVyaW5nIHRvIHdvcmsgYXMgeW91IGNhbm5vdCBtb2RpZnkgdGhlXG4gICAqIGJ1ZmZlciB3aGlsZSBpdCdzIGJlaW5nIHVzZWQgYnkgdGhlIEdQVS4gSGF2aW5nIG11bHRpcGxlIGxldHMgdXMgc3RhcnRcbiAgICogd29ya2luZyBvbiB0aGUgbmV4dCBmcmFtZS5cbiAgICovXG4gIGF0dHJpYnV0ZXNCdWZmZXJzOiBGbG9hdDMyQXJyYXlbXTtcbiAgc2VsZWN0aW9uQXR0cmlidXRlczogRmxvYXQzMkFycmF5O1xuICBjb3VudDogbnVtYmVyO1xufVxuXG5jb25zdCBlbnVtIFZlcnRleEF0dHJpYkxvY2F0aW9ucyB7XG4gIFVOSVRfUVVBRCA9IDAsXG4gIENFTExfUE9TSVRJT04gPSAxLFxuICBPRkZTRVQgPSAyLFxuICBTSVpFID0gMyxcbiAgVEVYQ09PUkQgPSA0LFxuICBURVhTSVpFID0gNVxufVxuXG5jb25zdCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBgI3ZlcnNpb24gMzAwIGVzXG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFEfSkgaW4gdmVjMiBhX3VuaXRxdWFkO1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLkNFTExfUE9TSVRJT059KSBpbiB2ZWMyIGFfY2VsbHBvcztcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5PRkZTRVR9KSBpbiB2ZWMyIGFfb2Zmc2V0O1xubGF5b3V0IChsb2NhdGlvbiA9ICR7VmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkV9KSBpbiB2ZWMyIGFfc2l6ZTtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhDT09SRH0pIGluIHZlYzIgYV90ZXhjb29yZDtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFfSkgaW4gdmVjMiBhX3RleHNpemU7XG5cbnVuaWZvcm0gbWF0NCB1X3Byb2plY3Rpb247XG51bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uO1xuXG5vdXQgdmVjMiB2X3RleGNvb3JkO1xuXG52b2lkIG1haW4oKSB7XG4gIHZlYzIgemVyb1RvT25lID0gKGFfb2Zmc2V0IC8gdV9yZXNvbHV0aW9uKSArIGFfY2VsbHBvcyArIChhX3VuaXRxdWFkICogYV9zaXplKTtcbiAgZ2xfUG9zaXRpb24gPSB1X3Byb2plY3Rpb24gKiB2ZWM0KHplcm9Ub09uZSwgMC4wLCAxLjApO1xuICB2X3RleGNvb3JkID0gYV90ZXhjb29yZCArIGFfdW5pdHF1YWQgKiBhX3RleHNpemU7XG59YDtcblxuY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBgI3ZlcnNpb24gMzAwIGVzXG5wcmVjaXNpb24gbG93cCBmbG9hdDtcblxuaW4gdmVjMiB2X3RleGNvb3JkO1xuXG51bmlmb3JtIHNhbXBsZXIyRCB1X3RleHR1cmU7XG5cbm91dCB2ZWM0IG91dENvbG9yO1xuXG52b2lkIG1haW4oKSB7XG4gIG91dENvbG9yID0gdGV4dHVyZSh1X3RleHR1cmUsIHZfdGV4Y29vcmQpO1xufWA7XG5cbmNvbnN0IElORElDRVNfUEVSX0NFTEwgPSAxMDtcbmNvbnN0IEJZVEVTX1BFUl9DRUxMID0gSU5ESUNFU19QRVJfQ0VMTCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcbmNvbnN0IENFTExfUE9TSVRJT05fSU5ESUNFUyA9IDI7XG5cbmV4cG9ydCBjbGFzcyBHbHlwaFJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfYXRsYXM6IFdlYmdsQ2hhckF0bGFzIHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3Byb2dyYW06IFdlYkdMUHJvZ3JhbTtcbiAgcHJpdmF0ZSBfdmVydGV4QXJyYXlPYmplY3Q6IElXZWJHTFZlcnRleEFycmF5T2JqZWN0O1xuICBwcml2YXRlIF9wcm9qZWN0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF9yZXNvbHV0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF90ZXh0dXJlTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF9hdGxhc1RleHR1cmU6IFdlYkdMVGV4dHVyZTtcbiAgcHJpdmF0ZSBfYXR0cmlidXRlc0J1ZmZlcjogV2ViR0xCdWZmZXI7XG4gIHByaXZhdGUgX2FjdGl2ZUJ1ZmZlcjogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF92ZXJ0aWNlczogSVZlcnRpY2VzID0ge1xuICAgIGNvdW50OiAwLFxuICAgIGF0dHJpYnV0ZXM6IG5ldyBGbG9hdDMyQXJyYXkoMCksXG4gICAgYXR0cmlidXRlc0J1ZmZlcnM6IFtcbiAgICAgIG5ldyBGbG9hdDMyQXJyYXkoMCksXG4gICAgICBuZXcgRmxvYXQzMkFycmF5KDApXG4gICAgXSxcbiAgICBzZWxlY3Rpb25BdHRyaWJ1dGVzOiBuZXcgRmxvYXQzMkFycmF5KDApXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsLFxuICAgIHByaXZhdGUgX2NvbG9yczogSUNvbG9yU2V0LFxuICAgIHByaXZhdGUgX2dsOiBJV2ViR0wyUmVuZGVyaW5nQ29udGV4dCxcbiAgICBwcml2YXRlIF9kaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9uc1xuICApIHtcbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuXG4gICAgY29uc3QgcHJvZ3JhbSA9IHRocm93SWZGYWxzeShjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UsIGZyYWdtZW50U2hhZGVyU291cmNlKSk7XG4gICAgaWYgKHByb2dyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgY3JlYXRlIFdlYkdMIHByb2dyYW0nKTtcbiAgICB9XG4gICAgdGhpcy5fcHJvZ3JhbSA9IHByb2dyYW07XG5cbiAgICAvLyBVbmlmb3JtIGxvY2F0aW9uc1xuICAgIHRoaXMuX3Byb2plY3Rpb25Mb2NhdGlvbiA9IHRocm93SWZGYWxzeShnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgJ3VfcHJvamVjdGlvbicpKTtcbiAgICB0aGlzLl9yZXNvbHV0aW9uTG9jYXRpb24gPSB0aHJvd0lmRmFsc3koZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sICd1X3Jlc29sdXRpb24nKSk7XG4gICAgdGhpcy5fdGV4dHVyZUxvY2F0aW9uID0gdGhyb3dJZkZhbHN5KGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLl9wcm9ncmFtLCAndV90ZXh0dXJlJykpO1xuXG4gICAgLy8gQ3JlYXRlIGFuZCBzZXQgdGhlIHZlcnRleCBhcnJheSBvYmplY3RcbiAgICB0aGlzLl92ZXJ0ZXhBcnJheU9iamVjdCA9IGdsLmNyZWF0ZVZlcnRleEFycmF5KCk7XG4gICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuX3ZlcnRleEFycmF5T2JqZWN0KTtcblxuICAgIC8vIFNldHVwIGFfdW5pdHF1YWQsIHRoaXMgZGVmaW5lcyB0aGUgNCB2ZXJ0aWNlcyBvZiBhIHJlY3RhbmdsZVxuICAgIGNvbnN0IHVuaXRRdWFkVmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAwLCAxLCAwLCAwLCAxLCAxLCAxXSk7XG4gICAgY29uc3QgdW5pdFF1YWRWZXJ0aWNlc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB1bml0UXVhZFZlcnRpY2VzQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgdW5pdFF1YWRWZXJ0aWNlcywgZ2wuU1RBVElDX0RSQVcpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFZlcnRleEF0dHJpYkxvY2F0aW9ucy5VTklUX1FVQUQpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLlVOSVRfUVVBRCwgMiwgdGhpcy5fZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcblxuICAgIC8vIFNldHVwIHRoZSB1bml0IHF1YWQgZWxlbWVudCBhcnJheSBidWZmZXIsIHRoaXMgcG9pbnRzIHRvIGluZGljZXMgaW5cbiAgICAvLyB1bml0UXVhZFZlcnR1Y2VzIHRvIGFsbG93IGlzIHRvIGRyYXcgMiB0cmlhbmdsZXMgZnJvbSB0aGUgdmVydGljZXNcbiAgICBjb25zdCB1bml0UXVhZEVsZW1lbnRJbmRpY2VzID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDMsIDAsIDIsIDNdKTtcbiAgICBjb25zdCBlbGVtZW50SW5kaWNlc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGVsZW1lbnRJbmRpY2VzQnVmZmVyKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB1bml0UXVhZEVsZW1lbnRJbmRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG5cbiAgICAvLyBTZXR1cCBhdHRyaWJ1dGVzXG4gICAgdGhpcy5fYXR0cmlidXRlc0J1ZmZlciA9IHRocm93SWZGYWxzeShnbC5jcmVhdGVCdWZmZXIoKSk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX2F0dHJpYnV0ZXNCdWZmZXIpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFZlcnRleEF0dHJpYkxvY2F0aW9ucy5PRkZTRVQpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLk9GRlNFVCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgMCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuT0ZGU0VULCAxKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSk7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgMiAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlRFWENPT1JEKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhDT09SRCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgNCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVEVYQ09PUkQsIDEpO1xuICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFLCAyLCBnbC5GTE9BVCwgZmFsc2UsIEJZVEVTX1BFUl9DRUxMLCA2ICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5URVhTSVpFLCAxKTtcbiAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ0VMTF9QT1NJVElPTik7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ0VMTF9QT1NJVElPTiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfQ0VMTCwgOCAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ0VMTF9QT1NJVElPTiwgMSk7XG5cbiAgICAvLyBTZXR1cCBlbXB0eSB0ZXh0dXJlIGF0bGFzXG4gICAgdGhpcy5fYXRsYXNUZXh0dXJlID0gdGhyb3dJZkZhbHN5KGdsLmNyZWF0ZVRleHR1cmUoKSk7XG4gICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGhpcy5fYXRsYXNUZXh0dXJlKTtcbiAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIDEsIDEsIDAsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIG5ldyBVaW50OEFycmF5KFswLCAwLCAyNTUsIDI1NV0pKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5DTEFNUF9UT19FREdFKTtcbiAgICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKTtcblxuICAgIC8vIEFsbG93IGRyYXdpbmcgb2YgdHJhbnNwYXJlbnQgdGV4dHVyZVxuICAgIGdsLmVuYWJsZShnbC5CTEVORCk7XG4gICAgZ2wuYmxlbmRGdW5jKGdsLlNSQ19BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cbiAgICAvLyBTZXQgdmlld3BvcnRcbiAgICB0aGlzLm9uUmVzaXplKCk7XG4gIH1cblxuICBwdWJsaWMgYmVnaW5GcmFtZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fYXRsYXMgPyB0aGlzLl9hdGxhcy5iZWdpbkZyYW1lKCkgOiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUNlbGwoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvZGU6IG51bWJlciwgYXR0cjogbnVtYmVyLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyLCBjaGFyczogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlQ2VsbCh0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzLCB4LCB5LCBjb2RlLCBhdHRyLCBiZywgZmcsIGNoYXJzKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUNlbGwoYXJyYXk6IEZsb2F0MzJBcnJheSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvZGU6IG51bWJlciB8IHVuZGVmaW5lZCwgYXR0cjogbnVtYmVyLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyLCBjaGFycz86IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG5cbiAgICBjb25zdCBpID0gKHkgKiB0ZXJtaW5hbC5jb2xzICsgeCkgKiBJTkRJQ0VTX1BFUl9DRUxMO1xuXG4gICAgLy8gRXhpdCBlYXJseSBpZiB0aGlzIGlzIGEgbnVsbC9zcGFjZSBjaGFyYWN0ZXJcbiAgICBpZiAoY29kZSA9PT0gTlVMTF9DRUxMX0NPREUgfHwgY29kZSA9PT0gV0hJVEVTUEFDRV9DRUxMX0NPREUgfHwgY29kZSA9PT0gdW5kZWZpbmVkLyogVGhpcyBpcyB1c2VkIGZvciB0aGUgcmlnaHQgc2lkZSBvZiB3aWRlIGNoYXJzICovKSB7XG4gICAgICBmaWxsKGFycmF5LCAwLCBpLCBpICsgSU5ESUNFU19QRVJfQ0VMTCAtIDEgLSBDRUxMX1BPU0lUSU9OX0lORElDRVMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCByYXN0ZXJpemVkR2x5cGg6IElSYXN0ZXJpemVkR2x5cGg7XG4gICAgaWYgKCF0aGlzLl9hdGxhcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdhdGxhcyBtdXN0IGJlIHNldCBiZWZvcmUgdXBkYXRpbmcgY2VsbCcpO1xuICAgIH1cbiAgICBpZiAoY2hhcnMgJiYgY2hhcnMubGVuZ3RoID4gMSkge1xuICAgICAgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fYXRsYXMuZ2V0UmFzdGVyaXplZEdseXBoQ29tYmluZWRDaGFyKGNoYXJzLCBhdHRyLCBiZywgZmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSB0aGlzLl9hdGxhcy5nZXRSYXN0ZXJpemVkR2x5cGgoY29kZSwgYXR0ciwgYmcsIGZnKTtcbiAgICB9XG5cbiAgICAvLyBGaWxsIGVtcHR5IGlmIG5vIGdseXBoIHdhcyBmb3VuZFxuICAgIGlmICghcmFzdGVyaXplZEdseXBoKSB7XG4gICAgICBmaWxsKGFycmF5LCAwLCBpLCBpICsgSU5ESUNFU19QRVJfQ0VMTCAtIDEgLSBDRUxMX1BPU0lUSU9OX0lORElDRVMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFfb3JpZ2luXG4gICAgYXJyYXlbaSAgICBdID0gLXJhc3Rlcml6ZWRHbHlwaC5vZmZzZXQueCArIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2hhckxlZnQ7XG4gICAgYXJyYXlbaSArIDFdID0gLXJhc3Rlcml6ZWRHbHlwaC5vZmZzZXQueSArIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcDtcbiAgICAvLyBhX3NpemVcbiAgICBhcnJheVtpICsgMl0gPSByYXN0ZXJpemVkR2x5cGguc2l6ZS54IC8gdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aDtcbiAgICBhcnJheVtpICsgM10gPSByYXN0ZXJpemVkR2x5cGguc2l6ZS55IC8gdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgLy8gYV90ZXhjb29yZFxuICAgIGFycmF5W2kgKyA0XSA9IHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb25DbGlwU3BhY2UueDtcbiAgICBhcnJheVtpICsgNV0gPSByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uQ2xpcFNwYWNlLnk7XG4gICAgLy8gYV90ZXhzaXplXG4gICAgYXJyYXlbaSArIDZdID0gcmFzdGVyaXplZEdseXBoLnNpemVDbGlwU3BhY2UueDtcbiAgICBhcnJheVtpICsgN10gPSByYXN0ZXJpemVkR2x5cGguc2l6ZUNsaXBTcGFjZS55O1xuICAgIC8vIGFfY2VsbHBvcyBvbmx5IGNoYW5nZXMgb24gcmVzaXplXG4gIH1cblxuICBwdWJsaWMgdXBkYXRlU2VsZWN0aW9uKG1vZGVsOiBJUmVuZGVyTW9kZWwsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuXG4gICAgdGhpcy5fdmVydGljZXMuc2VsZWN0aW9uQXR0cmlidXRlcyA9IHNsaWNlKHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMsIDApO1xuXG4gICAgLy8gVE9ETzogTWFrZSBmZyBhbmQgYmcgY29uZmlndXJhYmxlLCBjdXJyZW50bHkgc2luY2UgdGhlIGJ1ZmZlciBkb2Vzbid0XG4gICAgLy8gc3VwcG9ydCB0cnVlY29sb3IgdGhlIGNoYXIgYXRsYXMgY2Fubm90IHN0b3JlIGl0LlxuICAgIGNvbnN0IGx1bWkgPSBnZXRMdW1pbmFuY2UodGhpcy5fY29sb3JzLmJhY2tncm91bmQpO1xuICAgIGNvbnN0IGZnID0gbHVtaSA+IDAuNSA/IDcgOiAwO1xuICAgIGNvbnN0IGJnID0gbHVtaSA+IDAuNSA/IDAgOiA3O1xuXG4gICAgaWYgKGNvbHVtblNlbGVjdE1vZGUpIHtcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gbW9kZWwuc2VsZWN0aW9uLnN0YXJ0Q29sO1xuICAgICAgY29uc3Qgd2lkdGggPSBtb2RlbC5zZWxlY3Rpb24uZW5kQ29sIC0gc3RhcnRDb2w7XG4gICAgICBjb25zdCBoZWlnaHQgPSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRFbmRSb3cgLSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDE7XG4gICAgICBmb3IgKGxldCB5ID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3c7IHkgPCBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyArIGhlaWdodDsgeSsrKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVNlbGVjdGlvblJhbmdlKHN0YXJ0Q29sLCBzdGFydENvbCArIHdpZHRoLCB5LCBtb2RlbCwgYmcsIGZnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0U3RhcnRSb3cgPT09IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID8gbW9kZWwuc2VsZWN0aW9uLnN0YXJ0Q29sIDogMDtcbiAgICAgIGNvbnN0IHN0YXJ0Um93RW5kQ29sID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPT09IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdyA/IG1vZGVsLnNlbGVjdGlvbi5lbmRDb2wgOiB0ZXJtaW5hbC5jb2xzO1xuICAgICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uUmFuZ2Uoc3RhcnRDb2wsIHN0YXJ0Um93RW5kQ29sLCBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdywgbW9kZWwsIGJnLCBmZyk7XG5cbiAgICAgIC8vIERyYXcgbWlkZGxlIHJvd3NcbiAgICAgIGNvbnN0IG1pZGRsZVJvd3NDb3VudCA9IE1hdGgubWF4KG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdyAtIG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93IC0gMSwgMCk7XG4gICAgICBmb3IgKGxldCB5ID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxOyB5IDw9IG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgbWlkZGxlUm93c0NvdW50OyB5KyspIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uUmFuZ2UoMCwgc3RhcnRSb3dFbmRDb2wsIHksIG1vZGVsLCBiZywgZmcpO1xuICAgICAgfVxuXG4gICAgICAvLyBEcmF3IGZpbmFsIHJvd1xuICAgICAgaWYgKG1vZGVsLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICE9PSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0U3RhcnRSb3dcbiAgICAgICAgY29uc3QgZW5kQ29sID0gbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0RW5kUm93ID09PSBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRFbmRSb3cgPyBtb2RlbC5zZWxlY3Rpb24uZW5kQ29sIDogdGVybWluYWwuY29scztcbiAgICAgICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uUmFuZ2UoMCwgZW5kQ29sLCBtb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRFbmRSb3csIG1vZGVsLCBiZywgZmcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVNlbGVjdGlvblJhbmdlKHN0YXJ0Q29sOiBudW1iZXIsIGVuZENvbDogbnVtYmVyLCB5OiBudW1iZXIsIG1vZGVsOiBJUmVuZGVyTW9kZWwsIGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuICAgIGNvbnN0IHJvdyA9IHkgKyB0ZXJtaW5hbC5idWZmZXIudmlld3BvcnRZO1xuICAgIGxldCBsaW5lOiBJQnVmZmVyTGluZSB8IHVuZGVmaW5lZDtcbiAgICBmb3IgKGxldCB4ID0gc3RhcnRDb2w7IHggPCBlbmRDb2w7IHgrKykge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gKHkgKiB0aGlzLl90ZXJtaW5hbC5jb2xzICsgeCkgKiBJTkRJQ0lFU19QRVJfQ0VMTDtcbiAgICAgIC8vIEJlY2F1c2UgdGhlIGNhY2hlIHVzZXMgYXR0ciBhcyBhIGxvb2t1cCBrZXkgaXQgbmVlZHMgdG8gY29udGFpbiB0aGUgc2VsZWN0aW9uIGNvbG9ycyBhcyB3ZWxsXG4gICAgICBsZXQgYXR0ciA9IG1vZGVsLmNlbGxzW29mZnNldCArIDFdO1xuICAgICAgYXR0ciA9IGF0dHIgJiB+MHgzZmZmZiB8IGJnIDw8IDkgfCBmZztcbiAgICAgIGNvbnN0IGNvZGUgPSBtb2RlbC5jZWxsc1tvZmZzZXRdO1xuICAgICAgaWYgKGNvZGUgJiBDT01CSU5FRF9DSEFSX0JJVF9NQVNLKSB7XG4gICAgICAgIGlmICghbGluZSkge1xuICAgICAgICAgIGxpbmUgPSB0ZXJtaW5hbC5idWZmZXIuZ2V0TGluZShyb3cpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoYXJzID0gbGluZSEuZ2V0Q2VsbCh4KSEuY2hhcjtcbiAgICAgICAgdGhpcy5fdXBkYXRlQ2VsbCh0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb25BdHRyaWJ1dGVzLCB4LCB5LCBtb2RlbC5jZWxsc1tvZmZzZXRdLCBhdHRyLCBiZywgZmcsIGNoYXJzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUNlbGwodGhpcy5fdmVydGljZXMuc2VsZWN0aW9uQXR0cmlidXRlcywgeCwgeSwgbW9kZWwuY2VsbHNbb2Zmc2V0XSwgYXR0ciwgYmcsIGZnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbDtcbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIFVwZGF0ZSB2ZXJ0aWNlc1xuICAgIGNvbnN0IG5ld0NvdW50ID0gdGVybWluYWwuY29scyAqIHRlcm1pbmFsLnJvd3MgKiBJTkRJQ0VTX1BFUl9DRUxMO1xuICAgIGlmICh0aGlzLl92ZXJ0aWNlcy5jb3VudCAhPT0gbmV3Q291bnQpIHtcbiAgICAgIHRoaXMuX3ZlcnRpY2VzLmNvdW50ID0gbmV3Q291bnQ7XG4gICAgICB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzID0gbmV3IEZsb2F0MzJBcnJheShuZXdDb3VudCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXNCdWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXNCdWZmZXJzW2ldID0gbmV3IEZsb2F0MzJBcnJheShuZXdDb3VudCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBpID0gMDtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgdGVybWluYWwucm93czsgeSsrKSB7XG4gICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGVybWluYWwuY29sczsgeCsrKSB7XG4gICAgICAgICAgdGhpcy5fdmVydGljZXMuYXR0cmlidXRlc1tpICsgOF0gPSB4IC8gdGVybWluYWwuY29scztcbiAgICAgICAgICB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzW2kgKyA5XSA9IHkgLyB0ZXJtaW5hbC5yb3dzO1xuICAgICAgICAgIGkgKz0gSU5ESUNFU19QRVJfQ0VMTDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZXRDb2xvcnMoKTogdm9pZCB7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyKHJlbmRlck1vZGVsOiBJUmVuZGVyTW9kZWwsIGlzU2VsZWN0aW9uVmlzaWJsZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYXRsYXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuXG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLl9wcm9ncmFtKTtcbiAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5fdmVydGV4QXJyYXlPYmplY3QpO1xuXG4gICAgLy8gQWx0ZXJuYXRlIGJ1ZmZlcnMgZWFjaCBmcmFtZSBhcyB0aGUgYWN0aXZlIGJ1ZmZlciBnZXRzIGxvY2tlZCB3aGlsZSBpdCdzIGluIHVzZSBieSB0aGUgR1BVXG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyID0gKHRoaXMuX2FjdGl2ZUJ1ZmZlciArIDEpICUgMjtcbiAgICBjb25zdCBhY3RpdmVCdWZmZXIgPSB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzQnVmZmVyc1t0aGlzLl9hY3RpdmVCdWZmZXJdO1xuXG4gICAgLy8gQ29weSBkYXRhIGZvciBlYWNoIGNlbGwgb2YgZWFjaCBsaW5lIHVwIHRvIGl0cyBsaW5lIGxlbmd0aCAodGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2UgY2VsbClcbiAgICAvLyBmcm9tIHRoZSBhdHRyaWJ1dGVzIGJ1ZmZlciBpbnRvIGFjdGl2ZUJ1ZmZlciwgd2hpY2ggaXMgdGhlIG9uZSB0aGF0IGdldHMgYm91bmQgdG8gdGhlIEdQVS5cbiAgICAvLyBUaGUgcmVhc29ucyBmb3IgdGhpcyBhcmUgYXMgZm9sbG93czpcbiAgICAvLyAtIFNvIHRoZSBhY3RpdmUgYnVmZmVyIGNhbiBiZSBhbHRlcm5hdGVkIHNvIHdlIGRvbid0IGdldCBibG9ja2VkIG9uIHJlbmRlcmluZyBmaW5pc2hpbmdcbiAgICAvLyAtIFRvIGNvcHkgZWl0aGVyIHRoZSBub3JtYWwgYXR0cmlidXRlcyBidWZmZXIgb3IgdGhlIHNlbGVjdGlvbiBhdHRyaWJ1dGVzIGJ1ZmZlciB3aGVuIHRoZXJlXG4gICAgLy8gICBpcyBhIHNlbGVjdGlvblxuICAgIC8vIC0gU28gd2UgZG9uJ3Qgc2VuZCB2ZXJ0aWNlcyBmb3IgYWxsIHRoZSBsaW5lLWVuZGluZyB3aGl0ZXNwYWNlIHRvIHRoZSBHUFVcbiAgICBsZXQgYnVmZmVyTGVuZ3RoID0gMDtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHJlbmRlck1vZGVsLmxpbmVMZW5ndGhzLmxlbmd0aDsgeSsrKSB7XG4gICAgICBjb25zdCBzaSA9IHkgKiB0aGlzLl90ZXJtaW5hbC5jb2xzICogSU5ESUNFU19QRVJfQ0VMTDtcbiAgICAgIGNvbnN0IHN1YiA9IChpc1NlbGVjdGlvblZpc2libGUgPyB0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb25BdHRyaWJ1dGVzIDogdGhpcy5fdmVydGljZXMuYXR0cmlidXRlcykuc3ViYXJyYXkoc2ksIHNpICsgcmVuZGVyTW9kZWwubGluZUxlbmd0aHNbeV0gKiBJTkRJQ0VTX1BFUl9DRUxMKTtcbiAgICAgIGFjdGl2ZUJ1ZmZlci5zZXQoc3ViLCBidWZmZXJMZW5ndGgpO1xuICAgICAgYnVmZmVyTGVuZ3RoICs9IHN1Yi5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gQmluZCB0aGUgYXR0cmlidXRlcyBidWZmZXJcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYXR0cmlidXRlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIGFjdGl2ZUJ1ZmZlci5zdWJhcnJheSgwLCBidWZmZXJMZW5ndGgpLCBnbC5TVFJFQU1fRFJBVyk7XG5cbiAgICAvLyBCaW5kIHRoZSB0ZXh0dXJlIGF0bGFzIGlmIGl0J3MgY2hhbmdlZFxuICAgIGlmICh0aGlzLl9hdGxhcy5oYXNDYW52YXNDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9hdGxhcy5oYXNDYW52YXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICBnbC51bmlmb3JtMWkodGhpcy5fdGV4dHVyZUxvY2F0aW9uLCAwKTtcbiAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyAwKTtcbiAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX2F0bGFzVGV4dHVyZSk7XG4gICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIHRoaXMuX2F0bGFzLmNhY2hlQ2FudmFzKTtcbiAgICAgIGdsLmdlbmVyYXRlTWlwbWFwKGdsLlRFWFRVUkVfMkQpO1xuICAgIH1cblxuICAgIC8vIFNldCB1bmlmb3Jtc1xuICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5fcHJvamVjdGlvbkxvY2F0aW9uLCBmYWxzZSwgUFJPSkVDVElPTl9NQVRSSVgpO1xuICAgIGdsLnVuaWZvcm0yZih0aGlzLl9yZXNvbHV0aW9uTG9jYXRpb24sIGdsLmNhbnZhcy53aWR0aCwgZ2wuY2FudmFzLmhlaWdodCk7XG5cbiAgICAvLyBEcmF3IHRoZSB2aWV3cG9ydFxuICAgIGdsLmRyYXdFbGVtZW50c0luc3RhbmNlZChnbC5UUklBTkdMRVMsIDYsIGdsLlVOU0lHTkVEX0JZVEUsIDAsIGJ1ZmZlckxlbmd0aCAvIElORElDRVNfUEVSX0NFTEwpO1xuICB9XG5cbiAgcHVibGljIHNldEF0bGFzKGF0bGFzOiBXZWJnbENoYXJBdGxhcyk6IHZvaWQge1xuICAgIGNvbnN0IGdsID0gdGhpcy5fZ2w7XG4gICAgdGhpcy5fYXRsYXMgPSBhdGxhcztcblxuICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRoaXMuX2F0bGFzVGV4dHVyZSk7XG4gICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBhdGxhcy5jYWNoZUNhbnZhcyk7XG4gICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XG4gIH1cblxuICBwdWJsaWMgc2V0RGltZW5zaW9ucyhkaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHRoaXMuX2RpbWVuc2lvbnMgPSBkaW1lbnNpb25zO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IGNyZWF0ZVByb2dyYW0sIGV4cGFuZEZsb2F0MzJBcnJheSwgUFJPSkVDVElPTl9NQVRSSVgsIHRocm93SWZGYWxzeSB9IGZyb20gJy4vV2ViZ2xVdGlscyc7XG5pbXBvcnQgeyBJUmVuZGVyTW9kZWwsIElXZWJHTFZlcnRleEFycmF5T2JqZWN0LCBJV2ViR0wyUmVuZGVyaW5nQ29udGV4dCwgSVNlbGVjdGlvblJlbmRlck1vZGVsIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgaXMyNTZDb2xvciB9IGZyb20gJy4vYXRsYXMvQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IHsgREVGQVVMVF9DT0xPUiB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJQ29sb3IgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5cbmNvbnN0IGVudW0gVmVydGV4QXR0cmliTG9jYXRpb25zIHtcbiAgUE9TSVRJT04gPSAwLFxuICBTSVpFID0gMSxcbiAgQ09MT1IgPSAyLFxuICBVTklUX1FVQUQgPSAzXG59XG5cbmNvbnN0IHZlcnRleFNoYWRlclNvdXJjZSA9IGAjdmVyc2lvbiAzMDAgZXNcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5QT1NJVElPTn0pIGluIHZlYzIgYV9wb3NpdGlvbjtcbmxheW91dCAobG9jYXRpb24gPSAke1ZlcnRleEF0dHJpYkxvY2F0aW9ucy5TSVpFfSkgaW4gdmVjMiBhX3NpemU7XG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuQ09MT1J9KSBpbiB2ZWMzIGFfY29sb3I7XG5sYXlvdXQgKGxvY2F0aW9uID0gJHtWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFEfSkgaW4gdmVjMiBhX3VuaXRxdWFkO1xuXG51bmlmb3JtIG1hdDQgdV9wcm9qZWN0aW9uO1xudW5pZm9ybSB2ZWMyIHVfcmVzb2x1dGlvbjtcblxub3V0IHZlYzMgdl9jb2xvcjtcblxudm9pZCBtYWluKCkge1xuICB2ZWMyIHplcm9Ub09uZSA9IChhX3Bvc2l0aW9uICsgKGFfdW5pdHF1YWQgKiBhX3NpemUpKSAvIHVfcmVzb2x1dGlvbjtcbiAgZ2xfUG9zaXRpb24gPSB1X3Byb2plY3Rpb24gKiB2ZWM0KHplcm9Ub09uZSwgMC4wLCAxLjApO1xuICB2X2NvbG9yID0gYV9jb2xvcjtcbn1gO1xuXG5jb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGAjdmVyc2lvbiAzMDAgZXNcbnByZWNpc2lvbiBsb3dwIGZsb2F0O1xuXG5pbiB2ZWMzIHZfY29sb3I7XG5cbm91dCB2ZWM0IG91dENvbG9yO1xuXG52b2lkIG1haW4oKSB7XG4gIG91dENvbG9yID0gdmVjNCh2X2NvbG9yLCAxKTtcbn1gO1xuXG5pbnRlcmZhY2UgSVZlcnRpY2VzIHtcbiAgYXR0cmlidXRlczogRmxvYXQzMkFycmF5O1xuICBzZWxlY3Rpb246IEZsb2F0MzJBcnJheTtcbiAgY291bnQ6IG51bWJlcjtcbn1cblxuY29uc3QgSU5ESUNFU19QRVJfUkVDVEFOR0xFID0gODtcbmNvbnN0IEJZVEVTX1BFUl9SRUNUQU5HTEUgPSBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG5cbmNvbnN0IElOSVRJQUxfQlVGRkVSX1JFQ1RBTkdMRV9DQVBBQ0lUWSA9IDIwICogSU5ESUNFU19QRVJfUkVDVEFOR0xFO1xuXG5leHBvcnQgY2xhc3MgUmVjdGFuZ2xlUmVuZGVyZXIge1xuXG4gIHByaXZhdGUgX3Byb2dyYW06IFdlYkdMUHJvZ3JhbTtcbiAgcHJpdmF0ZSBfdmVydGV4QXJyYXlPYmplY3Q6IElXZWJHTFZlcnRleEFycmF5T2JqZWN0O1xuICBwcml2YXRlIF9yZXNvbHV0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uO1xuICBwcml2YXRlIF9hdHRyaWJ1dGVzQnVmZmVyOiBXZWJHTEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfcHJvamVjdGlvbkxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbjtcbiAgcHJpdmF0ZSBfYmdGbG9hdCE6IEZsb2F0MzJBcnJheTtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uRmxvYXQhOiBGbG9hdDMyQXJyYXk7XG5cbiAgcHJpdmF0ZSBfdmVydGljZXM6IElWZXJ0aWNlcyA9IHtcbiAgICBjb3VudDogMCxcbiAgICBhdHRyaWJ1dGVzOiBuZXcgRmxvYXQzMkFycmF5KElOSVRJQUxfQlVGRkVSX1JFQ1RBTkdMRV9DQVBBQ0lUWSksXG4gICAgc2VsZWN0aW9uOiBuZXcgRmxvYXQzMkFycmF5KDMgKiBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUpXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGVybWluYWw6IFRlcm1pbmFsLFxuICAgIHByaXZhdGUgX2NvbG9yczogSUNvbG9yU2V0LFxuICAgIHByaXZhdGUgX2dsOiBJV2ViR0wyUmVuZGVyaW5nQ29udGV4dCxcbiAgICBwcml2YXRlIF9kaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9uc1xuICApIHtcbiAgICBjb25zdCBnbCA9IHRoaXMuX2dsO1xuXG4gICAgdGhpcy5fcHJvZ3JhbSA9IHRocm93SWZGYWxzeShjcmVhdGVQcm9ncmFtKGdsLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UsIGZyYWdtZW50U2hhZGVyU291cmNlKSk7XG5cbiAgICAvLyBVbmlmb3JtIGxvY2F0aW9uc1xuICAgIHRoaXMuX3Jlc29sdXRpb25Mb2NhdGlvbiA9IHRocm93SWZGYWxzeShnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgJ3VfcmVzb2x1dGlvbicpKTtcbiAgICB0aGlzLl9wcm9qZWN0aW9uTG9jYXRpb24gPSB0aHJvd0lmRmFsc3koZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sICd1X3Byb2plY3Rpb24nKSk7XG5cbiAgICAvLyBDcmVhdGUgYW5kIHNldCB0aGUgdmVydGV4IGFycmF5IG9iamVjdFxuICAgIHRoaXMuX3ZlcnRleEFycmF5T2JqZWN0ID0gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtcbiAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5fdmVydGV4QXJyYXlPYmplY3QpO1xuXG4gICAgLy8gU2V0dXAgYV91bml0cXVhZCwgdGhpcyBkZWZpbmVzIHRoZSA0IHZlcnRpY2VzIG9mIGEgcmVjdGFuZ2xlXG4gICAgY29uc3QgdW5pdFF1YWRWZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoWzAsIDAsIDEsIDAsIDAsIDEsIDEsIDFdKTtcbiAgICBjb25zdCB1bml0UXVhZFZlcnRpY2VzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHVuaXRRdWFkVmVydGljZXNCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB1bml0UXVhZFZlcnRpY2VzLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlVOSVRfUVVBRCk7XG4gICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuVU5JVF9RVUFELCAyLCB0aGlzLl9nbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuXG4gICAgLy8gU2V0dXAgdGhlIHVuaXQgcXVhZCBlbGVtZW50IGFycmF5IGJ1ZmZlciwgdGhpcyBwb2ludHMgdG8gaW5kaWNlcyBpblxuICAgIC8vIHVuaXRRdWFkVmVydHVjZXMgdG8gYWxsb3cgaXMgdG8gZHJhdyAyIHRyaWFuZ2xlcyBmcm9tIHRoZSB2ZXJ0aWNlc1xuICAgIGNvbnN0IHVuaXRRdWFkRWxlbWVudEluZGljZXMgPSBuZXcgVWludDhBcnJheShbMCwgMSwgMywgMCwgMiwgM10pO1xuICAgIGNvbnN0IGVsZW1lbnRJbmRpY2VzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZWxlbWVudEluZGljZXNCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHVuaXRRdWFkRWxlbWVudEluZGljZXMsIGdsLlNUQVRJQ19EUkFXKTtcblxuICAgIC8vIFNldHVwIGF0dHJpYnV0ZXNcbiAgICB0aGlzLl9hdHRyaWJ1dGVzQnVmZmVyID0gdGhyb3dJZkZhbHN5KGdsLmNyZWF0ZUJ1ZmZlcigpKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYXR0cmlidXRlc0J1ZmZlcik7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlBPU0lUSU9OKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5QT1NJVElPTiwgMiwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfUkVDVEFOR0xFLCAwKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5QT1NJVElPTiwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkUpO1xuICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoVmVydGV4QXR0cmliTG9jYXRpb25zLlNJWkUsIDIsIGdsLkZMT0FULCBmYWxzZSwgQllURVNfUEVSX1JFQ1RBTkdMRSwgMiAqIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XG4gICAgZ2wudmVydGV4QXR0cmliRGl2aXNvcihWZXJ0ZXhBdHRyaWJMb2NhdGlvbnMuU0laRSwgMSk7XG4gICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoVmVydGV4QXR0cmliTG9jYXRpb25zLkNPTE9SKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5DT0xPUiwgNCwgZ2wuRkxPQVQsIGZhbHNlLCBCWVRFU19QRVJfUkVDVEFOR0xFLCA0ICogRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICBnbC52ZXJ0ZXhBdHRyaWJEaXZpc29yKFZlcnRleEF0dHJpYkxvY2F0aW9ucy5DT0xPUiwgMSk7XG5cbiAgICB0aGlzLl91cGRhdGVDYWNoZWRDb2xvcnMoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKTogdm9pZCB7XG4gICAgY29uc3QgZ2wgPSB0aGlzLl9nbDtcblxuICAgIGdsLnVzZVByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XG5cbiAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5fdmVydGV4QXJyYXlPYmplY3QpO1xuXG4gICAgZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLl9wcm9qZWN0aW9uTG9jYXRpb24sIGZhbHNlLCBQUk9KRUNUSU9OX01BVFJJWCk7XG4gICAgZ2wudW5pZm9ybTJmKHRoaXMuX3Jlc29sdXRpb25Mb2NhdGlvbiwgZ2wuY2FudmFzLndpZHRoLCBnbC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIC8vIEJpbmQgYXR0cmlidXRlcyBidWZmZXIgYW5kIGRyYXdcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5fYXR0cmlidXRlc0J1ZmZlcik7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX3ZlcnRpY2VzLmF0dHJpYnV0ZXMsIGdsLkRZTkFNSUNfRFJBVyk7XG4gICAgZ2wuZHJhd0VsZW1lbnRzSW5zdGFuY2VkKHRoaXMuX2dsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfQllURSwgMCwgdGhpcy5fdmVydGljZXMuY291bnQpO1xuXG4gICAgLy8gQmluZCBzZWxlY3Rpb24gYnVmZmVyIGFuZCBkcmF3XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuX2F0dHJpYnV0ZXNCdWZmZXIpO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb24sIGdsLkRZTkFNSUNfRFJBVyk7XG4gICAgZ2wuZHJhd0VsZW1lbnRzSW5zdGFuY2VkKHRoaXMuX2dsLlRSSUFOR0xFUywgNiwgZ2wuVU5TSUdORURfQllURSwgMCwgMyk7XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlVmlld3BvcnRSZWN0YW5nbGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb2xvcnMoKTogdm9pZCB7XG4gICAgdGhpcy5fdXBkYXRlQ2FjaGVkQ29sb3JzKCk7XG4gICAgdGhpcy5fdXBkYXRlVmlld3BvcnRSZWN0YW5nbGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUNhY2hlZENvbG9ycygpOiB2b2lkIHtcbiAgICB0aGlzLl9iZ0Zsb2F0ID0gdGhpcy5fY29sb3JUb0Zsb2F0MzJBcnJheSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCk7XG4gICAgdGhpcy5fc2VsZWN0aW9uRmxvYXQgPSB0aGlzLl9jb2xvclRvRmxvYXQzMkFycmF5KHRoaXMuX2NvbG9ycy5zZWxlY3Rpb24pO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlVmlld3BvcnRSZWN0YW5nbGUoKTogdm9pZCB7XG4gICAgLy8gU2V0IGZpcnN0IHJlY3RhbmdsZSB0aGF0IGNsZWFycyB0aGUgc2NyZWVuXG4gICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICB0aGlzLl92ZXJ0aWNlcy5hdHRyaWJ1dGVzLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICAwLFxuICAgICAgdGhpcy5fdGVybWluYWwuY29scyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgdGhpcy5fdGVybWluYWwucm93cyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgIHRoaXMuX2JnRmxvYXRcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVNlbGVjdGlvbihtb2RlbDogSVNlbGVjdGlvblJlbmRlck1vZGVsLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl90ZXJtaW5hbDtcblxuICAgIGlmICghbW9kZWwuaGFzU2VsZWN0aW9uKSB7XG4gICAgICBmaWxsKHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbiwgMCwgMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNvbHVtblNlbGVjdE1vZGUpIHtcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gbW9kZWwuc3RhcnRDb2w7XG4gICAgICBjb25zdCB3aWR0aCA9IG1vZGVsLmVuZENvbCAtIHN0YXJ0Q29sO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gbW9kZWwudmlld3BvcnRDYXBwZWRFbmRSb3cgLSBtb2RlbC52aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMTtcbiAgICAgIHRoaXMuX2FkZFJlY3RhbmdsZUZsb2F0KFxuICAgICAgICB0aGlzLl92ZXJ0aWNlcy5zZWxlY3Rpb24sXG4gICAgICAgIDAsXG4gICAgICAgIHN0YXJ0Q29sICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIG1vZGVsLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHdpZHRoICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIGhlaWdodCAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICk7XG4gICAgICBmaWxsKHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbiwgMCwgSU5ESUNFU19QRVJfUkVDVEFOR0xFKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gbW9kZWwudmlld3BvcnRTdGFydFJvdyA9PT0gbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyA/IG1vZGVsLnN0YXJ0Q29sIDogMDtcbiAgICAgIGNvbnN0IHN0YXJ0Um93RW5kQ29sID0gbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyA9PT0gbW9kZWwudmlld3BvcnRDYXBwZWRFbmRSb3cgPyBtb2RlbC5lbmRDb2wgOiB0ZXJtaW5hbC5jb2xzO1xuICAgICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbixcbiAgICAgICAgMCxcbiAgICAgICAgc3RhcnRDb2wgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgKHN0YXJ0Um93RW5kQ29sIC0gc3RhcnRDb2wpICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICk7XG5cbiAgICAgIC8vIERyYXcgbWlkZGxlIHJvd3NcbiAgICAgIGNvbnN0IG1pZGRsZVJvd3NDb3VudCA9IE1hdGgubWF4KG1vZGVsLnZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gbW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyAtIDEsIDApO1xuICAgICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICAgIHRoaXMuX3ZlcnRpY2VzLnNlbGVjdGlvbixcbiAgICAgICAgSU5ESUNFU19QRVJfUkVDVEFOR0xFLFxuICAgICAgICAwLFxuICAgICAgICAobW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDEpICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICB0ZXJtaW5hbC5jb2xzICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIG1pZGRsZVJvd3NDb3VudCAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICk7XG5cbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAobW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gbW9kZWwudmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0U3RhcnRSb3dcbiAgICAgICAgY29uc3QgZW5kQ29sID0gbW9kZWwudmlld3BvcnRFbmRSb3cgPT09IG1vZGVsLnZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gbW9kZWwuZW5kQ29sIDogdGVybWluYWwuY29scztcbiAgICAgICAgdGhpcy5fYWRkUmVjdGFuZ2xlRmxvYXQoXG4gICAgICAgICAgdGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLFxuICAgICAgICAgIElORElDRVNfUEVSX1JFQ1RBTkdMRSAqIDIsXG4gICAgICAgICAgMCxcbiAgICAgICAgICBtb2RlbC52aWV3cG9ydENhcHBlZEVuZFJvdyAqIHRoaXMuX2RpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCxcbiAgICAgICAgICBlbmRDb2wgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgICB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgICAgdGhpcy5fc2VsZWN0aW9uRmxvYXRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGwodGhpcy5fdmVydGljZXMuc2VsZWN0aW9uLCAwLCBJTkRJQ0VTX1BFUl9SRUNUQU5HTEUgKiAyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdXBkYXRlQmFja2dyb3VuZHMobW9kZWw6IElSZW5kZXJNb2RlbCk6IHZvaWQge1xuICAgIGNvbnN0IHRlcm1pbmFsID0gdGhpcy5fdGVybWluYWw7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLl92ZXJ0aWNlcztcblxuICAgIGxldCByZWN0YW5nbGVDb3VudCA9IDE7XG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRlcm1pbmFsLnJvd3M7IHkrKykge1xuICAgICAgbGV0IGN1cnJlbnRTdGFydFggPSAtMTtcbiAgICAgIGxldCBjdXJyZW50QmcgPSBERUZBVUxUX0NPTE9SO1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0ZXJtaW5hbC5jb2xzOyB4KyspIHtcbiAgICAgICAgY29uc3QgbW9kZWxJbmRleCA9ICgoeSAqIHRlcm1pbmFsLmNvbHMpICsgeCkgKiA0O1xuICAgICAgICBjb25zdCBiZyA9IG1vZGVsLmNlbGxzW21vZGVsSW5kZXggKyAyXTtcbiAgICAgICAgaWYgKGJnICE9PSBjdXJyZW50QmcpIHtcbiAgICAgICAgICAvLyBBIHJlY3RhbmdsZSBuZWVkcyB0byBiZSBkcmF3biBpZiBnb2luZyBmcm9tIG5vbi1kZWZhdWx0IHRvIGFub3RoZXIgY29sb3JcbiAgICAgICAgICBpZiAoY3VycmVudEJnICE9PSBERUZBVUxUX0NPTE9SKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSByZWN0YW5nbGVDb3VudCsrICogSU5ESUNFU19QRVJfUkVDVEFOR0xFO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlUmVjdGFuZ2xlKHZlcnRpY2VzLCBvZmZzZXQsIGN1cnJlbnRCZywgY3VycmVudFN0YXJ0WCwgeCwgeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnJlbnRTdGFydFggPSB4O1xuICAgICAgICAgIGN1cnJlbnRCZyA9IGJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBGaW5pc2ggcmVjdGFuZ2xlIGlmIGl0J3Mgc3RpbGwgZ29pbmdcbiAgICAgIGlmIChjdXJyZW50QmcgIT09IERFRkFVTFRfQ09MT1IpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gcmVjdGFuZ2xlQ291bnQrKyAqIElORElDRVNfUEVSX1JFQ1RBTkdMRTtcbiAgICAgICAgdGhpcy5fdXBkYXRlUmVjdGFuZ2xlKHZlcnRpY2VzLCBvZmZzZXQsIGN1cnJlbnRCZywgY3VycmVudFN0YXJ0WCwgdGVybWluYWwuY29scywgeSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZlcnRpY2VzLmNvdW50ID0gcmVjdGFuZ2xlQ291bnQ7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVSZWN0YW5nbGUodmVydGljZXM6IElWZXJ0aWNlcywgb2Zmc2V0OiBudW1iZXIsIGJnOiBudW1iZXIsIHN0YXJ0WDogbnVtYmVyLCBlbmRYOiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBjb2xvcjogSUNvbG9yIHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKGJnID09PSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SKSB7XG4gICAgICBjb2xvciA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kO1xuICAgIH0gZWxzZSBpZiAoaXMyNTZDb2xvcihiZykpIHtcbiAgICAgIGNvbG9yID0gdGhpcy5fY29sb3JzLmFuc2lbYmddO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUT0RPOiBBZGQgc3VwcG9ydCBmb3IgdHJ1ZSBjb2xvclxuICAgICAgY29sb3IgPSB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZDtcbiAgICB9XG4gICAgaWYgKHZlcnRpY2VzLmF0dHJpYnV0ZXMubGVuZ3RoIDwgb2Zmc2V0ICsgNCkge1xuICAgICAgdmVydGljZXMuYXR0cmlidXRlcyA9IGV4cGFuZEZsb2F0MzJBcnJheSh2ZXJ0aWNlcy5hdHRyaWJ1dGVzLCB0aGlzLl90ZXJtaW5hbC5yb3dzICogdGhpcy5fdGVybWluYWwuY29scyAqIElORElDRVNfUEVSX1JFQ1RBTkdMRSk7XG4gICAgfVxuICAgIGNvbnN0IHgxID0gc3RhcnRYICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGg7XG4gICAgY29uc3QgeTEgPSB5ICogdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIGNvbnN0IHIgPSAoKGNvbG9yLnJnYmEgPj4gMjQpICYgMHhGRikgLyAyNTU7XG4gICAgY29uc3QgZyA9ICgoY29sb3IucmdiYSA+PiAxNikgJiAweEZGKSAvIDI1NTtcbiAgICBjb25zdCBiID0gKChjb2xvci5yZ2JhID4+IDggKSAmIDB4RkYpIC8gMjU1O1xuXG4gICAgdGhpcy5fYWRkUmVjdGFuZ2xlKHZlcnRpY2VzLmF0dHJpYnV0ZXMsIG9mZnNldCwgeDEsIHkxLCAoZW5kWCAtIHN0YXJ0WCkgKiB0aGlzLl9kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCwgdGhpcy5fZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LCByLCBnLCBiLCAxKTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZFJlY3RhbmdsZShhcnJheTogRmxvYXQzMkFycmF5LCBvZmZzZXQ6IG51bWJlciwgeDE6IG51bWJlciwgeTE6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIsIGE6IG51bWJlcik6IHZvaWQge1xuICAgIGFycmF5W29mZnNldCAgICBdID0geDE7XG4gICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSB5MTtcbiAgICBhcnJheVtvZmZzZXQgKyAyXSA9IHdpZHRoO1xuICAgIGFycmF5W29mZnNldCArIDNdID0gaGVpZ2h0O1xuICAgIGFycmF5W29mZnNldCArIDRdID0gcjtcbiAgICBhcnJheVtvZmZzZXQgKyA1XSA9IGc7XG4gICAgYXJyYXlbb2Zmc2V0ICsgNl0gPSBiO1xuICAgIGFycmF5W29mZnNldCArIDddID0gYTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZFJlY3RhbmdsZUZsb2F0KGFycmF5OiBGbG9hdDMyQXJyYXksIG9mZnNldDogbnVtYmVyLCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgY29sb3I6IEZsb2F0MzJBcnJheSk6IHZvaWQge1xuICAgIGFycmF5W29mZnNldCAgICBdID0geDE7XG4gICAgYXJyYXlbb2Zmc2V0ICsgMV0gPSB5MTtcbiAgICBhcnJheVtvZmZzZXQgKyAyXSA9IHdpZHRoO1xuICAgIGFycmF5W29mZnNldCArIDNdID0gaGVpZ2h0O1xuICAgIGFycmF5W29mZnNldCArIDRdID0gY29sb3JbMF07XG4gICAgYXJyYXlbb2Zmc2V0ICsgNV0gPSBjb2xvclsxXTtcbiAgICBhcnJheVtvZmZzZXQgKyA2XSA9IGNvbG9yWzJdO1xuICAgIGFycmF5W29mZnNldCArIDddID0gY29sb3JbM107XG4gIH1cblxuICBwcml2YXRlIF9jb2xvclRvRmxvYXQzMkFycmF5KGNvbG9yOiBJQ29sb3IpOiBGbG9hdDMyQXJyYXkge1xuICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICgoY29sb3IucmdiYSA+PiAyNCkgJiAweEZGKSAvIDI1NSxcbiAgICAgICgoY29sb3IucmdiYSA+PiAxNikgJiAweEZGKSAvIDI1NSxcbiAgICAgICgoY29sb3IucmdiYSA+PiA4ICkgJiAweEZGKSAvIDI1NSxcbiAgICAgICgoY29sb3IucmdiYSAgICAgICkgJiAweEZGKSAvIDI1NVxuICAgIF0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJNb2RlbCwgSVNlbGVjdGlvblJlbmRlck1vZGVsIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5cbmV4cG9ydCBjb25zdCBSRU5ERVJfTU9ERUxfSU5ESUNJRVNfUEVSX0NFTEwgPSA0O1xuXG5leHBvcnQgY29uc3QgQ09NQklORURfQ0hBUl9CSVRfTUFTSyA9IDB4ODAwMDAwMDA7XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJNb2RlbCBpbXBsZW1lbnRzIElSZW5kZXJNb2RlbCB7XG4gIHB1YmxpYyBjZWxsczogVWludDMyQXJyYXk7XG4gIHB1YmxpYyBsaW5lTGVuZ3RoczogVWludDMyQXJyYXk7XG4gIHB1YmxpYyBzZWxlY3Rpb246IElTZWxlY3Rpb25SZW5kZXJNb2RlbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNlbGxzID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICAgIHRoaXMubGluZUxlbmd0aHMgPSBuZXcgVWludDMyQXJyYXkoMCk7XG4gICAgdGhpcy5zZWxlY3Rpb24gPSB7XG4gICAgICBoYXNTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgdmlld3BvcnRTdGFydFJvdzogMCxcbiAgICAgIHZpZXdwb3J0RW5kUm93OiAwLFxuICAgICAgdmlld3BvcnRDYXBwZWRTdGFydFJvdzogMCxcbiAgICAgIHZpZXdwb3J0Q2FwcGVkRW5kUm93OiAwLFxuICAgICAgc3RhcnRDb2w6IDAsXG4gICAgICBlbmRDb2w6IDBcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4Q291bnQgPSBjb2xzICogcm93cyAqIFJFTkRFUl9NT0RFTF9JTkRJQ0lFU19QRVJfQ0VMTDtcbiAgICBpZiAoaW5kZXhDb3VudCAhPT0gdGhpcy5jZWxscy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuY2VsbHMgPSBuZXcgVWludDMyQXJyYXkoaW5kZXhDb3VudCk7XG4gICAgICB0aGlzLmxpbmVMZW5ndGhzID0gbmV3IFVpbnQzMkFycmF5KHJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICBmaWxsKHRoaXMuY2VsbHMsIDAsIDApO1xuICAgIGZpbGwodGhpcy5saW5lTGVuZ3RocywgMCwgMCk7XG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uLmhhc1NlbGVjdGlvbiA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0aW9uLnZpZXdwb3J0U3RhcnRSb3cgPSAwO1xuICAgIHRoaXMuc2VsZWN0aW9uLnZpZXdwb3J0RW5kUm93ID0gMDtcbiAgICB0aGlzLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gMDtcbiAgICB0aGlzLnNlbGVjdGlvbi52aWV3cG9ydENhcHBlZEVuZFJvdyA9IDA7XG4gICAgdGhpcy5zZWxlY3Rpb24uc3RhcnRDb2wgPSAwO1xuICAgIHRoaXMuc2VsZWN0aW9uLmVuZENvbCA9IDA7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IHR5cGUgVHlwZWRBcnJheSA9IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQzMkFycmF5IHwgVWludDhDbGFtcGVkQXJyYXlcbiAgfCBJbnQ4QXJyYXkgfCBJbnQxNkFycmF5IHwgSW50MzJBcnJheVxuICB8IEZsb2F0MzJBcnJheSB8IEZsb2F0NjRBcnJheTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNsaWNlPFQgZXh0ZW5kcyBUeXBlZEFycmF5PihhcnJheTogVCwgc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IFQge1xuICAvLyBhbGwgbW9kZXJuIGVuZ2luZXMgdGhhdCBzdXBwb3J0IC5zbGljZVxuICBpZiAoYXJyYXkuc2xpY2UpIHtcbiAgICByZXR1cm4gYXJyYXkuc2xpY2Uoc3RhcnQsIGVuZCkgYXMgVDtcbiAgfVxuICByZXR1cm4gc2xpY2VGYWxsYmFjayhhcnJheSwgc3RhcnQsIGVuZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzbGljZUZhbGxiYWNrPFQgZXh0ZW5kcyBUeXBlZEFycmF5PihhcnJheTogVCwgc3RhcnQ6IG51bWJlciA9IDAsIGVuZDogbnVtYmVyID0gYXJyYXkubGVuZ3RoKTogVCB7XG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCA9IChhcnJheS5sZW5ndGggKyBzdGFydCkgJSBhcnJheS5sZW5ndGg7XG4gIH1cbiAgaWYgKGVuZCA+PSBhcnJheS5sZW5ndGgpIHtcbiAgICBlbmQgPSBhcnJheS5sZW5ndGg7XG4gIH0gZWxzZSB7XG4gICAgZW5kID0gKGFycmF5Lmxlbmd0aCArIGVuZCkgJSBhcnJheS5sZW5ndGg7XG4gIH1cbiAgc3RhcnQgPSBNYXRoLm1pbihzdGFydCwgZW5kKTtcblxuICBjb25zdCByZXN1bHQ6IFQgPSBuZXcgKGFycmF5LmNvbnN0cnVjdG9yIGFzIGFueSkoZW5kIC0gc3RhcnQpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcbiAgICByZXN1bHRbaV0gPSBhcnJheVtpICsgc3RhcnRdO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IFRlcm1pbmFsLCBJVGVybWluYWxBZGRvbiB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IFdlYmdsUmVuZGVyZXIgfSBmcm9tICcuL1dlYmdsUmVuZGVyZXInO1xuaW1wb3J0IHsgSVJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV2ViZ2xBZGRvbiBpbXBsZW1lbnRzIElUZXJtaW5hbEFkZG9uIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfcHJlc2VydmVEcmF3aW5nQnVmZmVyPzogYm9vbGVhblxuICApIHt9XG5cbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICghdGVybWluYWwuZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgYWN0aXZhdGUgV2ViZ2xSZW5kZXJlckFkZG9uIGJlZm9yZSBUZXJtaW5hbC5vcGVuJyk7XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlID0gICg8YW55PnRlcm1pbmFsKS5fY29yZS5fcmVuZGVyU2VydmljZTtcbiAgICBjb25zdCBjb2xvcnM6IElDb2xvclNldCA9ICg8YW55PnRlcm1pbmFsKS5fY29yZS5fY29sb3JNYW5hZ2VyLmNvbG9ycztcbiAgICByZW5kZXJTZXJ2aWNlLnNldFJlbmRlcmVyKG5ldyBXZWJnbFJlbmRlcmVyKHRlcm1pbmFsLCBjb2xvcnMsIHRoaXMuX3ByZXNlcnZlRHJhd2luZ0J1ZmZlcikpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdXZWJnbFJlbmRlcmVyQWRkb24uZGlzcG9zZSBOb3QgeWV0IGltcGxlbWVudGVkJyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi4vLi4vLi4vc3JjL1R5cGVzJztcbmltcG9ydCB7IEdseXBoUmVuZGVyZXIgfSBmcm9tICcuL0dseXBoUmVuZGVyZXInO1xuaW1wb3J0IHsgTGlua1JlbmRlckxheWVyIH0gZnJvbSAnLi9yZW5kZXJMYXllci9MaW5rUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgQ3Vyc29yUmVuZGVyTGF5ZXIgfSBmcm9tICcuL3JlbmRlckxheWVyL0N1cnNvclJlbmRlckxheWVyJztcbmltcG9ydCB7IGFjcXVpcmVDaGFyQXRsYXMgfSBmcm9tICcuL2F0bGFzL0NoYXJBdGxhc0NhY2hlJztcbmltcG9ydCB7IFdlYmdsQ2hhckF0bGFzIH0gZnJvbSAnLi9hdGxhcy9XZWJnbENoYXJBdGxhcyc7XG5pbXBvcnQgeyBSZWN0YW5nbGVSZW5kZXJlciB9IGZyb20gJy4vUmVjdGFuZ2xlUmVuZGVyZXInO1xuaW1wb3J0IHsgSVdlYkdMMlJlbmRlcmluZ0NvbnRleHQgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBSZW5kZXJNb2RlbCwgQ09NQklORURfQ0hBUl9CSVRfTUFTSyB9IGZyb20gJy4vUmVuZGVyTW9kZWwnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgREVGQVVMVF9DT0xPUiwgQ0hBUl9EQVRBX0NIQVJfSU5ERVgsIENIQVJfREFUQV9DT0RFX0lOREVYLCBDSEFSX0RBVEFfQVRUUl9JTkRFWCwgTlVMTF9DRUxMX0NPREUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IGdldEx1bWluYW5jZSB9IGZyb20gJy4vQ29sb3JVdGlscyc7XG5pbXBvcnQgeyBJUmVuZGVyTGF5ZXIgfSBmcm9tICcuL3JlbmRlckxheWVyL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJEaW1lbnNpb25zLCBJUmVuZGVyZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgRkxBR1MgfSBmcm9tICcuL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBnZXRDb21wYXRBdHRyIH0gZnJvbSAnLi9DaGFyRGF0YUNvbXBhdCc7XG5cbmV4cG9ydCBjb25zdCBJTkRJQ0lFU19QRVJfQ0VMTCA9IDQ7XG5cbmV4cG9ydCBjbGFzcyBXZWJnbFJlbmRlcmVyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElSZW5kZXJlciB7XG4gIHByaXZhdGUgX3JlbmRlckxheWVyczogSVJlbmRlckxheWVyW107XG4gIHByaXZhdGUgX2NoYXJBdGxhczogV2ViZ2xDaGFyQXRsYXMgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2RldmljZVBpeGVsUmF0aW86IG51bWJlcjtcblxuICBwcml2YXRlIF9tb2RlbDogUmVuZGVyTW9kZWwgPSBuZXcgUmVuZGVyTW9kZWwoKTtcblxuICBwcml2YXRlIF9jYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9nbDogSVdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XG4gIHByaXZhdGUgX3JlY3RhbmdsZVJlbmRlcmVyOiBSZWN0YW5nbGVSZW5kZXJlcjtcbiAgcHJpdmF0ZSBfZ2x5cGhSZW5kZXJlcjogR2x5cGhSZW5kZXJlcjtcblxuICBwdWJsaWMgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgcHJpdmF0ZSBfY29yZTogSVRlcm1pbmFsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3Rlcm1pbmFsOiBUZXJtaW5hbCxcbiAgICBwcml2YXRlIF9jb2xvcnM6IElDb2xvclNldCxcbiAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI/OiBib29sZWFuXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9jb3JlID0gKDxhbnk+dGhpcy5fdGVybWluYWwpLl9jb3JlO1xuXG4gICAgdGhpcy5fYXBwbHlCZ0x1bWluYW5jZUJhc2VkU2VsZWN0aW9uKCk7XG5cbiAgICB0aGlzLl9yZW5kZXJMYXllcnMgPSBbXG4gICAgICBuZXcgTGlua1JlbmRlckxheWVyKHRoaXMuX2NvcmUuc2NyZWVuRWxlbWVudCwgMiwgdGhpcy5fY29sb3JzLCB0aGlzLl9jb3JlKSxcbiAgICAgIG5ldyBDdXJzb3JSZW5kZXJMYXllcih0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQsIDMsIHRoaXMuX2NvbG9ycylcbiAgICBdO1xuICAgIHRoaXMuZGltZW5zaW9ucyA9IHtcbiAgICAgIHNjYWxlZENoYXJXaWR0aDogMCxcbiAgICAgIHNjYWxlZENoYXJIZWlnaHQ6IDAsXG4gICAgICBzY2FsZWRDZWxsV2lkdGg6IDAsXG4gICAgICBzY2FsZWRDZWxsSGVpZ2h0OiAwLFxuICAgICAgc2NhbGVkQ2hhckxlZnQ6IDAsXG4gICAgICBzY2FsZWRDaGFyVG9wOiAwLFxuICAgICAgc2NhbGVkQ2FudmFzV2lkdGg6IDAsXG4gICAgICBzY2FsZWRDYW52YXNIZWlnaHQ6IDAsXG4gICAgICBjYW52YXNXaWR0aDogMCxcbiAgICAgIGNhbnZhc0hlaWdodDogMCxcbiAgICAgIGFjdHVhbENlbGxXaWR0aDogMCxcbiAgICAgIGFjdHVhbENlbGxIZWlnaHQ6IDBcbiAgICB9O1xuICAgIHRoaXMuX2RldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG5cbiAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuICAgIGNvbnN0IGNvbnRleHRBdHRyaWJ1dGVzID0ge1xuICAgICAgYW50aWFsaWFzOiBmYWxzZSxcbiAgICAgIGRlcHRoOiBmYWxzZSxcbiAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlclxuICAgIH07XG4gICAgdGhpcy5fZ2wgPSB0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJywgY29udGV4dEF0dHJpYnV0ZXMpIGFzIElXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xuICAgIGlmICghdGhpcy5fZ2wpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJHTDIgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cbiAgICB0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY2FudmFzKTtcblxuICAgIHRoaXMuX3JlY3RhbmdsZVJlbmRlcmVyID0gbmV3IFJlY3RhbmdsZVJlbmRlcmVyKHRoaXMuX3Rlcm1pbmFsLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2dsLCB0aGlzLmRpbWVuc2lvbnMpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIgPSBuZXcgR2x5cGhSZW5kZXJlcih0aGlzLl90ZXJtaW5hbCwgdGhpcy5fY29sb3JzLCB0aGlzLl9nbCwgdGhpcy5kaW1lbnNpb25zKTtcblxuICAgIC8vIFVwZGF0ZSBkaW1lbnNpb25zIGFuZCBhY3F1aXJlIGNoYXIgYXRsYXNcbiAgICB0aGlzLm9uQ2hhclNpemVDaGFuZ2VkKCk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IGwuZGlzcG9zZSgpKTtcbiAgICB0aGlzLl9jb3JlLnNjcmVlbkVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fY2FudmFzKTtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICBwcml2YXRlIF9hcHBseUJnTHVtaW5hbmNlQmFzZWRTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgLy8gSEFDSzogVGhpcyBpcyBuZWVkZWQgdW50aWwgd2ViZ2wgcmVuZGVyZXIgYWRkcyBzdXBwb3J0IGZvciBzZWxlY3Rpb24gY29sb3JzXG4gICAgaWYgKGdldEx1bWluYW5jZSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCkgPiAwLjUpIHtcbiAgICAgIHRoaXMuX2NvbG9ycy5zZWxlY3Rpb24gPSB7IGNzczogJyMwMDAnLCByZ2JhOiAyNTUgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29sb3JzLnNlbGVjdGlvbiA9IHsgY3NzOiAnI2ZmZicsIHJnYmE6IDQyOTQ5NjcyOTUgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0Q29sb3JzKGNvbG9yczogSUNvbG9yU2V0KTogdm9pZCB7XG4gICAgdGhpcy5fY29sb3JzID0gY29sb3JzO1xuXG4gICAgdGhpcy5fYXBwbHlCZ0x1bWluYW5jZUJhc2VkU2VsZWN0aW9uKCk7XG5cbiAgICAvLyBDbGVhciBsYXllcnMgYW5kIGZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGwuc2V0Q29sb3JzKHRoaXMuX3Rlcm1pbmFsLCB0aGlzLl9jb2xvcnMpO1xuICAgICAgbC5yZXNldCh0aGlzLl90ZXJtaW5hbCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9yZWN0YW5nbGVSZW5kZXJlci5zZXRDb2xvcnMoKTtcbiAgICB0aGlzLl9nbHlwaFJlbmRlcmVyLnNldENvbG9ycygpO1xuXG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcygpO1xuXG4gICAgLy8gRm9yY2UgYSBmdWxsIHJlZnJlc2hcbiAgICB0aGlzLl9tb2RlbC5jbGVhcigpO1xuICB9XG5cbiAgcHVibGljIG9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpOiB2b2lkIHtcbiAgICAvLyBJZiB0aGUgZGV2aWNlIHBpeGVsIHJhdGlvIGNoYW5nZWQsIHRoZSBjaGFyIGF0bGFzIG5lZWRzIHRvIGJlIHJlZ2VuZXJhdGVkXG4gICAgLy8gYW5kIHRoZSB0ZXJtaW5hbCBuZWVkcyB0byByZWZyZXNoZWRcbiAgICBpZiAodGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyAhPT0gd2luZG93LmRldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgIHRoaXMuX2RldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIHRoaXMub25SZXNpemUodGhpcy5fdGVybWluYWwuY29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uUmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIGNoYXJhY3RlciBhbmQgY2FudmFzIGRpbWVuc2lvbnNcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG5cbiAgICB0aGlzLl9tb2RlbC5yZXNpemUodGhpcy5fdGVybWluYWwuY29scywgdGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgdGhpcy5fcmVjdGFuZ2xlUmVuZGVyZXIub25SZXNpemUoKTtcblxuICAgIC8vIFJlc2l6ZSBhbGwgcmVuZGVyIGxheWVyc1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5yZXNpemUodGhpcy5fdGVybWluYWwsIHRoaXMuZGltZW5zaW9ucykpO1xuXG4gICAgLy8gUmVzaXplIHRoZSBjYW52YXNcbiAgICB0aGlzLl9jYW52YXMud2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGg7XG4gICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodH1weGA7XG5cbiAgICAvLyBSZXNpemUgdGhlIHNjcmVlblxuICAgIHRoaXMuX2NvcmUuc2NyZWVuRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aH1weGA7XG4gICAgdGhpcy5fY29yZS5zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIuc2V0RGltZW5zaW9ucyh0aGlzLmRpbWVuc2lvbnMpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIub25SZXNpemUoKTtcblxuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXMoKTtcblxuICAgIC8vIEZvcmNlIGEgZnVsbCByZWZyZXNoXG4gICAgdGhpcy5fbW9kZWwuY2xlYXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkNoYXJTaXplQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICB0aGlzLm9uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICB9XG5cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IGwub25CbHVyKHRoaXMuX3Rlcm1pbmFsKSk7XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IGwub25Gb2N1cyh0aGlzLl90ZXJtaW5hbCkpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBsLm9uU2VsZWN0aW9uQ2hhbmdlZCh0aGlzLl90ZXJtaW5hbCwgc3RhcnQsIGVuZCwgY29sdW1uU2VsZWN0TW9kZSkpO1xuXG4gICAgdGhpcy5fdXBkYXRlU2VsZWN0aW9uTW9kZWwoc3RhcnQsIGVuZCk7XG5cbiAgICB0aGlzLl9yZWN0YW5nbGVSZW5kZXJlci51cGRhdGVTZWxlY3Rpb24odGhpcy5fbW9kZWwuc2VsZWN0aW9uLCBjb2x1bW5TZWxlY3RNb2RlKTtcbiAgICB0aGlzLl9nbHlwaFJlbmRlcmVyLnVwZGF0ZVNlbGVjdGlvbih0aGlzLl9tb2RlbCwgY29sdW1uU2VsZWN0TW9kZSk7XG5cbiAgICAvLyBUT0RPOiAjMjEwMiBTaG91bGQgdGhpcyBtb3ZlIHRvIFJlbmRlckNvb3JkaW5hdG9yP1xuICAgIHRoaXMuX2NvcmUucmVmcmVzaCgwLCB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMSk7XG4gIH1cblxuICBwdWJsaWMgb25DdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5vbkN1cnNvck1vdmUodGhpcy5fdGVybWluYWwpKTtcbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5vbk9wdGlvbnNDaGFuZ2VkKHRoaXMuX3Rlcm1pbmFsKSk7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX3JlZnJlc2hDaGFyQXRsYXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIGNoYXIgYXRsYXMsIGFxdWlyaW5nIGEgbmV3IG9uZSBpZiBuZWNlc3NhcnkuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBjb2xvclNldCBUaGUgY29sb3Igc2V0IHRvIHVzZSBmb3IgdGhlIGNoYXIgYXRsYXMuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoQ2hhckF0bGFzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoIDw9IDAgJiYgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGF0bGFzID0gYWNxdWlyZUNoYXJBdGxhcyh0aGlzLl90ZXJtaW5hbCwgdGhpcy5fY29sb3JzLCB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoLCB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCk7XG4gICAgaWYgKCEoJ2dldFJhc3Rlcml6ZWRHbHlwaCcgaW4gYXRsYXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB3ZWJnbCByZW5kZXJlciBvbmx5IHdvcmtzIHdpdGggdGhlIHdlYmdsIGNoYXIgYXRsYXMnKTtcbiAgICB9XG4gICAgdGhpcy5fY2hhckF0bGFzID0gYXRsYXMgYXMgV2ViZ2xDaGFyQXRsYXM7XG4gICAgdGhpcy5fY2hhckF0bGFzLndhcm1VcCgpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIuc2V0QXRsYXModGhpcy5fY2hhckF0bGFzKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IGwucmVzZXQodGhpcy5fdGVybWluYWwpKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiAodGV4dDogc3RyaW5nKSA9PiBbbnVtYmVyLCBudW1iZXJdW10pOiBudW1iZXIge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHB1YmxpYyBkZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGpvaW5lcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSByZW5kZXIgbGF5ZXJzXG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBsLm9uR3JpZENoYW5nZWQodGhpcy5fdGVybWluYWwsIHN0YXJ0LCBlbmQpKTtcblxuICAgIC8vIFRlbGwgcmVuZGVyZXIgdGhlIGZyYW1lIGlzIGJlZ2lubmluZ1xuICAgIGlmICh0aGlzLl9nbHlwaFJlbmRlcmVyLmJlZ2luRnJhbWUoKSkge1xuICAgICAgdGhpcy5fbW9kZWwuY2xlYXIoKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgbW9kZWwgdG8gcmVmbGVjdCB3aGF0J3MgZHJhd25cbiAgICB0aGlzLl91cGRhdGVNb2RlbChzdGFydCwgZW5kKTtcblxuICAgIC8vIFJlbmRlclxuICAgIHRoaXMuX3JlY3RhbmdsZVJlbmRlcmVyLnJlbmRlcigpO1xuICAgIHRoaXMuX2dseXBoUmVuZGVyZXIucmVuZGVyKHRoaXMuX21vZGVsLCB0aGlzLl9tb2RlbC5zZWxlY3Rpb24uaGFzU2VsZWN0aW9uKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZU1vZGVsKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgdGVybWluYWwgPSB0aGlzLl9jb3JlO1xuXG4gICAgZm9yIChsZXQgeSA9IHN0YXJ0OyB5IDw9IGVuZDsgeSsrKSB7XG4gICAgICBjb25zdCByb3cgPSB5ICsgdGVybWluYWwuYnVmZmVyLnlkaXNwO1xuICAgICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQocm93KSE7XG4gICAgICB0aGlzLl9tb2RlbC5saW5lTGVuZ3Roc1t5XSA9IDA7XG4gICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRlcm1pbmFsLmNvbHM7IHgrKykge1xuICAgICAgICBjb25zdCBjaGFyRGF0YSA9IGxpbmUuZ2V0KHgpO1xuICAgICAgICBjb25zdCBjaGFycyA9IGNoYXJEYXRhW0NIQVJfREFUQV9DSEFSX0lOREVYXTtcbiAgICAgICAgbGV0IGNvZGUgPSBjaGFyRGF0YVtDSEFSX0RBVEFfQ09ERV9JTkRFWF07XG4gICAgICAgIGNvbnN0IGF0dHIgPSBnZXRDb21wYXRBdHRyKGxpbmUsIHgpOyAvLyBjaGFyRGF0YVtDSEFSX0RBVEFfQVRUUl9JTkRFWF07XG4gICAgICAgIGNvbnN0IGkgPSAoKHkgKiB0ZXJtaW5hbC5jb2xzKSArIHgpICogSU5ESUNJRVNfUEVSX0NFTEw7XG5cbiAgICAgICAgaWYgKGNvZGUgIT09IE5VTExfQ0VMTF9DT0RFKSB7XG4gICAgICAgICAgdGhpcy5fbW9kZWwubGluZUxlbmd0aHNbeV0gPSB4ICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vdGhpbmcgaGFzIGNoYW5nZWQsIG5vIHVwZGF0ZXMgbmVlZGVkXG4gICAgICAgIGlmICh0aGlzLl9tb2RlbC5jZWxsc1tpXSA9PT0gY29kZSAmJiB0aGlzLl9tb2RlbC5jZWxsc1tpICsgMV0gPT09IGF0dHIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlc29sdmUgYmcgYW5kIGZnIGFuZCBjYWNoZSBpbiB0aGUgbW9kZWxcbiAgICAgICAgY29uc3QgZmxhZ3MgPSBhdHRyID4+IDE4O1xuICAgICAgICBsZXQgYmcgPSBhdHRyICYgMHgxZmY7XG4gICAgICAgIGxldCBmZyA9IChhdHRyID4+IDkpICYgMHgxZmY7XG5cbiAgICAgICAgLy8gSWYgaW52ZXJzZSBmbGFnIGlzIG9uLCB0aGUgZm9yZWdyb3VuZCBzaG91bGQgYmVjb21lIHRoZSBiYWNrZ3JvdW5kLlxuICAgICAgICBpZiAoZmxhZ3MgJiBGTEFHUy5JTlZFUlNFKSB7XG4gICAgICAgICAgY29uc3QgdGVtcCA9IGJnO1xuICAgICAgICAgIGJnID0gZmc7XG4gICAgICAgICAgZmcgPSB0ZW1wO1xuICAgICAgICAgIGlmIChmZyA9PT0gREVGQVVMVF9DT0xPUikge1xuICAgICAgICAgICAgZmcgPSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYmcgPT09IERFRkFVTFRfQ09MT1IpIHtcbiAgICAgICAgICAgIGJnID0gSU5WRVJURURfREVGQVVMVF9DT0xPUjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHJhd0luQnJpZ2h0Q29sb3IgPSB0ZXJtaW5hbC5vcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmICEhKGZsYWdzICYgRkxBR1MuQk9MRCkgJiYgZmcgPCA4ICYmIGZnICE9PSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SO1xuICAgICAgICBmZyArPSBkcmF3SW5CcmlnaHRDb2xvciA/IDggOiAwO1xuXG4gICAgICAgIC8vIEZsYWcgY29tYmluZWQgY2hhcnMgd2l0aCBhIGJpdCBtYXNrIHNvIHRoZXkncmUgZWFzaWx5IGlkZW50aWZpYWJsZVxuICAgICAgICBpZiAoY2hhcnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGNvZGUgPSBjb2RlIHwgQ09NQklORURfQ0hBUl9CSVRfTUFTSztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX21vZGVsLmNlbGxzW2kgICAgXSA9IGNvZGU7XG4gICAgICAgIHRoaXMuX21vZGVsLmNlbGxzW2kgKyAxXSA9IGF0dHI7XG4gICAgICAgIHRoaXMuX21vZGVsLmNlbGxzW2kgKyAyXSA9IGJnO1xuICAgICAgICB0aGlzLl9tb2RlbC5jZWxsc1tpICsgM10gPSBmZztcblxuICAgICAgICB0aGlzLl9nbHlwaFJlbmRlcmVyLnVwZGF0ZUNlbGwoeCwgeSwgY29kZSwgYXR0ciwgYmcsIGZnLCBjaGFycyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3JlY3RhbmdsZVJlbmRlcmVyLnVwZGF0ZUJhY2tncm91bmRzKHRoaXMuX21vZGVsKTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZVNlbGVjdGlvbk1vZGVsKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0pOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuXG4gICAgLy8gU2VsZWN0aW9uIGRvZXMgbm90IGV4aXN0XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kIHx8IChzdGFydFswXSA9PT0gZW5kWzBdICYmIHN0YXJ0WzFdID09PSBlbmRbMV0pKSB7XG4gICAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyYW5zbGF0ZSBmcm9tIGJ1ZmZlciBwb3NpdGlvbiB0byB2aWV3cG9ydCBwb3NpdGlvblxuICAgIGNvbnN0IHZpZXdwb3J0U3RhcnRSb3cgPSBzdGFydFsxXSAtIHRlcm1pbmFsLmJ1ZmZlci52aWV3cG9ydFk7XG4gICAgY29uc3Qgdmlld3BvcnRFbmRSb3cgPSBlbmRbMV0gLSB0ZXJtaW5hbC5idWZmZXIudmlld3BvcnRZO1xuICAgIGNvbnN0IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPSBNYXRoLm1heCh2aWV3cG9ydFN0YXJ0Um93LCAwKTtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZEVuZFJvdyA9IE1hdGgubWluKHZpZXdwb3J0RW5kUm93LCB0ZXJtaW5hbC5yb3dzIC0gMSk7XG5cbiAgICAvLyBObyBuZWVkIHRvIGRyYXcgdGhlIHNlbGVjdGlvblxuICAgIGlmICh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID49IHRlcm1pbmFsLnJvd3MgfHwgdmlld3BvcnRDYXBwZWRFbmRSb3cgPCAwKSB7XG4gICAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbi5oYXNTZWxlY3Rpb24gPSB0cnVlO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbi52aWV3cG9ydFN0YXJ0Um93ID0gdmlld3BvcnRTdGFydFJvdztcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb24udmlld3BvcnRFbmRSb3cgPSB2aWV3cG9ydEVuZFJvdztcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb24udmlld3BvcnRDYXBwZWRTdGFydFJvdyA9IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3c7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLnZpZXdwb3J0Q2FwcGVkRW5kUm93ID0gdmlld3BvcnRDYXBwZWRFbmRSb3c7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLnN0YXJ0Q29sID0gc3RhcnRbMF07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uLmVuZENvbCA9IGVuZFswXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNhbGN1bGF0ZXMgdGhlIGNoYXJhY3RlciBhbmQgY2FudmFzIGRpbWVuc2lvbnMuXG4gICAqL1xuICBwcml2YXRlIF91cGRhdGVEaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIC8vIFRPRE86IEFjcXVpcmUgQ2hhclNpemVTZXJ2aWNlIHByb3Blcmx5XG5cbiAgICAvLyBQZXJmb3JtIGEgbmV3IG1lYXN1cmUgaWYgdGhlIENoYXJNZWFzdXJlIGRpbWVuc2lvbnMgYXJlIG5vdCB5ZXQgYXZhaWxhYmxlXG4gICAgaWYgKCEoPGFueT50aGlzLl9jb3JlKS5fY2hhclNpemVTZXJ2aWNlLndpZHRoIHx8ICEoPGFueT50aGlzLl9jb3JlKS5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNoYXJhY3RlciB3aWR0aC4gV2lkdGggaXMgZmxvb3JlZCBhcyBpdCBtdXN0IGJlXG4gICAgLy8gZHJhd24gdG8gYW4gaW50ZWdlciBncmlkIGluIG9yZGVyIGZvciB0aGUgQ2hhckF0bGFzIFwic3RhbXBzXCIgdG8gbm90IGJlXG4gICAgLy8gYmx1cnJ5LiBXaGVuIHRleHQgaXMgZHJhd24gdG8gdGhlIGdyaWQgbm90IHVzaW5nIHRoZSBDaGFyQXRsYXMsIGl0IGlzXG4gICAgLy8gY2xpcHBlZCB0byBlbnN1cmUgdGhlcmUgaXMgbm8gb3ZlcmxhcCB3aXRoIHRoZSBuZXh0IGNlbGwuXG5cbiAgICAvLyBOT1RFOiBjZWlsIGZpeGVzIHNvbWV0aW1lLCBmbG9vciBkb2VzIG90aGVycyA6c1xuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCA9IE1hdGguZmxvb3IoKDxhbnk+dGhpcy5fY29yZSkuX2NoYXJTaXplU2VydmljZS53aWR0aCAqIHRoaXMuX2RldmljZVBpeGVsUmF0aW8pO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2hhcmFjdGVyIGhlaWdodC4gSGVpZ2h0IGlzIGNlaWxlZCBpbiBjYXNlXG4gICAgLy8gZGV2aWNlUGl4ZWxSYXRpbyBpcyBhIGZsb2F0aW5nIHBvaW50IG51bWJlciBpbiBvcmRlciB0byBlbnN1cmUgdGhlcmUgaXNcbiAgICAvLyBlbm91Z2ggc3BhY2UgdG8gZHJhdyB0aGUgY2hhcmFjdGVyIHRvIHRoZSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0ID0gTWF0aC5jZWlsKCg8YW55PnRoaXMuX2NvcmUpLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0ICogdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjZWxsIGhlaWdodCwgaWYgbGluZUhlaWdodCBpcyBub3QgMSB0aGVuIHRoZSB2YWx1ZVxuICAgIC8vIHdpbGwgYmUgZmxvb3JlZCBiZWNhdXNlIHNpbmNlIGxpbmVIZWlnaHQgY2FuIG5ldmVyIGJlIGxvd2VyIHRoZW4gMSwgdGhlcmVcbiAgICAvLyBpcyBhIGd1YXJlbnRlZSB0aGF0IHRoZSBzY2FsZWQgbGluZSBoZWlnaHQgd2lsbCBhbHdheXMgYmUgbGFyZ2VyIHRoYW5cbiAgICAvLyBzY2FsZWQgY2hhciBoZWlnaHQuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgPSBNYXRoLmZsb29yKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0ICogdGhpcy5fdGVybWluYWwuZ2V0T3B0aW9uKCdsaW5lSGVpZ2h0JykpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSB5IGNvb3JkaW5hdGUgd2l0aGluIGEgY2VsbCB0aGF0IHRleHQgc2hvdWxkIGRyYXcgZnJvbSBpblxuICAgIC8vIG9yZGVyIHRvIGRyYXcgaW4gdGhlIGNlbnRlciBvZiBhIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJUb3AgPSB0aGlzLl90ZXJtaW5hbC5nZXRPcHRpb24oJ2xpbmVIZWlnaHQnKSA9PT0gMSA/IDAgOiBNYXRoLnJvdW5kKCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCAtIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0KSAvIDIpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2VsbCB3aWR0aCwgdGFraW5nIHRoZSBsZXR0ZXJTcGFjaW5nIGludG8gYWNjb3VudC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCArIE1hdGgucm91bmQodGhpcy5fdGVybWluYWwuZ2V0T3B0aW9uKCdsZXR0ZXJTcGFjaW5nJykpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSB4IGNvb3JkaW5hdGUgd2l0aCBhIGNlbGwgdGhhdCB0ZXh0IHNob3VsZCBkcmF3IGZyb20gaW5cbiAgICAvLyBvcmRlciB0byBkcmF3IGluIHRoZSBjZW50ZXIgb2YgYSBjZWxsLlxuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdCA9IE1hdGguZmxvb3IodGhpcy5fdGVybWluYWwuZ2V0T3B0aW9uKCdsZXR0ZXJTcGFjaW5nJykgLyAyKTtcblxuICAgIC8vIFJlY2FsY3VsYXRlIHRoZSBjYW52YXMgZGltZW5zaW9uczsgc2NhbGVkKiBkZWZpbmUgdGhlIGFjdHVhbCBudW1iZXIgb2ZcbiAgICAvLyBwaXhlbCBpbiB0aGUgY2FudmFzXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCA9IHRoaXMuX3Rlcm1pbmFsLnJvd3MgKiB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodDtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggPSB0aGlzLl90ZXJtaW5hbC5jb2xzICogdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aDtcblxuICAgIC8vIFRoZSB0aGUgc2l6ZSBvZiB0aGUgY2FudmFzIG9uIHRoZSBwYWdlLiBJdCdzIHZlcnkgaW1wb3J0YW50IHRoYXQgdGhpc1xuICAgIC8vIHJvdW5kcyB0byBuZWFyZXN0IGludGVnZXIgYW5kIG5vdCBjZWlscyBhcyBicm93c2VycyBvZnRlbiBzZXRcbiAgICAvLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyBhcyBzb21ldGhpbmcgbGlrZSAxLjEwMDAwMDAyMzg0MTg1OCwgd2hlbiBpdCdzXG4gICAgLy8gYWN0dWFsbHkgMS4xLiBDZWlsaW5nIGNhdXNlcyBibHVycmluZXNzIGFzIHRoZSBiYWNraW5nIGNhbnZhcyBpbWFnZSBpcyAxXG4gICAgLy8gcGl4ZWwgdG9vIGxhcmdlIGZvciB0aGUgY2FudmFzIGVsZW1lbnQgc2l6ZS5cbiAgICB0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0ID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0IC8gdGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggLyB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgIC8vIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0ICogZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAvLyB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGggKiBkZXZpY2VQaXhlbFJhdGlvO1xuXG4gICAgLy8gR2V0IHRoZSBfYWN0dWFsXyBkaW1lbnNpb25zIG9mIGFuIGluZGl2aWR1YWwgY2VsbC4gVGhpcyBuZWVkcyB0byBiZVxuICAgIC8vIGRlcml2ZWQgZnJvbSB0aGUgY2FudmFzV2lkdGgvSGVpZ2h0IGNhbGN1bGF0ZWQgYWJvdmUgd2hpY2ggdGFrZXMgaW50b1xuICAgIC8vIGFjY291bnQgd2luZG93LmRldmljZVBpeGVsUmF0aW8uIENoYXJNZWFzdXJlLndpZHRoL2hlaWdodCBieSBpdHNlbGYgaXNcbiAgICAvLyBpbnN1ZmZpY2llbnQgd2hlbiB0aGUgcGFnZSBpcyBub3QgYXQgMTAwJSB6b29tIGxldmVsIGFzIENoYXJNZWFzdXJlIGlzXG4gICAgLy8gbWVhc3VyZWQgaW4gQ1NTIHBpeGVscywgYnV0IHRoZSBhY3R1YWwgY2hhciBzaXplIG9uIHRoZSBjYW52YXMgY2FuXG4gICAgLy8gZGlmZmVyLlxuICAgIC8vIHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCAvIHRoaXMuX3Rlcm1pbmFsLnJvd3M7XG4gICAgLy8gdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCAvIHRoaXMuX3Rlcm1pbmFsLmNvbHM7XG5cbiAgICAvLyBUaGlzIGZpeGVzIDExMCUgYW5kIDEyNSUsIG5vdCAxNTAlIG9yIDE3NSUgdGhvdWdoXG4gICAgdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCAvIHRoaXMuX2RldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggLyB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogQSBtYXRyaXggdGhhdCB3aGVuIG11bHRpcGxpZXMgd2lsbCB0cmFuc2xhdGUgMC0xIGNvb3JkaW5hdGVzIChsZWZ0IHRvIHJpZ2h0LFxuICogdG9wIHRvIGJvdHRvbSkgdG8gY2xpcCBzcGFjZS5cbiAqL1xuZXhwb3J0IGNvbnN0IFBST0pFQ1RJT05fTUFUUklYID0gbmV3IEZsb2F0MzJBcnJheShbXG4gIDIsIDAsIDAsIDAsXG4gIDAsIC0yLCAwLCAwLFxuICAwLCAwLCAxLCAwLFxuICAtMSwgMSwgMCwgMVxuXSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9ncmFtKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZlcnRleFNvdXJjZTogc3RyaW5nLCBmcmFnbWVudFNvdXJjZTogc3RyaW5nKTogV2ViR0xQcm9ncmFtIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgcHJvZ3JhbSA9IHRocm93SWZGYWxzeShnbC5jcmVhdGVQcm9ncmFtKCkpO1xuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdGhyb3dJZkZhbHN5KGNyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdmVydGV4U291cmNlKSkpO1xuICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdGhyb3dJZkZhbHN5KGNyZWF0ZVNoYWRlcihnbCwgZ2wuRlJBR01FTlRfU0hBREVSLCBmcmFnbWVudFNvdXJjZSkpKTtcbiAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gIGNvbnN0IHN1Y2Nlc3MgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKTtcbiAgaWYgKHN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gcHJvZ3JhbTtcbiAgfVxuXG4gIGNvbnNvbGUuZXJyb3IoZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xuICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2hhZGVyKGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHR5cGU6IG51bWJlciwgc291cmNlOiBzdHJpbmcpOiBXZWJHTFNoYWRlciB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHNoYWRlciA9IHRocm93SWZGYWxzeShnbC5jcmVhdGVTaGFkZXIodHlwZSkpO1xuICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gIGNvbnN0IHN1Y2Nlc3MgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XG4gIGlmIChzdWNjZXNzKSB7XG4gICAgcmV0dXJuIHNoYWRlcjtcbiAgfVxuXG4gIGNvbnNvbGUuZXJyb3IoZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRGbG9hdDMyQXJyYXkoc291cmNlOiBGbG9hdDMyQXJyYXksIG1heDogbnVtYmVyKTogRmxvYXQzMkFycmF5IHtcbiAgY29uc3QgbmV3TGVuZ3RoID0gTWF0aC5taW4oc291cmNlLmxlbmd0aCAqIDIsIG1heCk7XG4gIGNvbnN0IG5ld0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheShuZXdMZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgIG5ld0FycmF5W2ldID0gc291cmNlW2ldO1xuICB9XG4gIHJldHVybiBuZXdBcnJheTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRocm93SWZGYWxzeTxUPih2YWx1ZTogVCB8IHVuZGVmaW5lZCB8IG51bGwpOiBUIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigndmFsdWUgbXVzdCBub3QgYmUgZmFsc3knKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IGdlbmVyYXRlQ29uZmlnLCBjb25maWdFcXVhbHMgfSBmcm9tICcuL0NoYXJBdGxhc1V0aWxzJztcbmltcG9ydCB7IFdlYmdsQ2hhckF0bGFzIH0gZnJvbSAnLi9XZWJnbENoYXJBdGxhcyc7XG5pbXBvcnQgeyBJQ2hhckF0bGFzQ29uZmlnIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuXG5pbnRlcmZhY2UgSUNoYXJBdGxhc0NhY2hlRW50cnkge1xuICBhdGxhczogV2ViZ2xDaGFyQXRsYXM7XG4gIGNvbmZpZzogSUNoYXJBdGxhc0NvbmZpZztcbiAgLy8gTi5CLiBUaGlzIGltcGxlbWVudGF0aW9uIHBvdGVudGlhbGx5IGhvbGRzIG9udG8gY29waWVzIG9mIHRoZSB0ZXJtaW5hbCBmb3JldmVyLCBzb1xuICAvLyB0aGlzIG1heSBjYXVzZSBtZW1vcnkgbGVha3MuXG4gIG93bmVkQnk6IFRlcm1pbmFsW107XG59XG5cbmNvbnN0IGNoYXJBdGxhc0NhY2hlOiBJQ2hhckF0bGFzQ2FjaGVFbnRyeVtdID0gW107XG5cbi8qKlxuICogQWNxdWlyZXMgYSBjaGFyIGF0bGFzLCBlaXRoZXIgZ2VuZXJhdGluZyBhIG5ldyBvbmUgb3IgcmV0dXJuaW5nIGFuIGV4aXN0aW5nXG4gKiBvbmUgdGhhdCBpcyBpbiB1c2UgYnkgYW5vdGhlciB0ZXJtaW5hbC5cbiAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gKiBAcGFyYW0gY29sb3JzIFRoZSBjb2xvcnMgdG8gdXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWNxdWlyZUNoYXJBdGxhcyhcbiAgdGVybWluYWw6IFRlcm1pbmFsLFxuICBjb2xvcnM6IElDb2xvclNldCxcbiAgc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIsXG4gIHNjYWxlZENoYXJIZWlnaHQ6IG51bWJlclxuKTogV2ViZ2xDaGFyQXRsYXMge1xuICBjb25zdCBuZXdDb25maWcgPSBnZW5lcmF0ZUNvbmZpZyhzY2FsZWRDaGFyV2lkdGgsIHNjYWxlZENoYXJIZWlnaHQsIHRlcm1pbmFsLCBjb2xvcnMpO1xuXG4gIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgdGVybWluYWwgYWxyZWFkeSBvd25zIHRoaXMgY29uZmlnXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGNoYXJBdGxhc0NhY2hlW2ldO1xuICAgIGNvbnN0IG93bmVkQnlJbmRleCA9IGVudHJ5Lm93bmVkQnkuaW5kZXhPZih0ZXJtaW5hbCk7XG4gICAgaWYgKG93bmVkQnlJbmRleCA+PSAwKSB7XG4gICAgICBpZiAoY29uZmlnRXF1YWxzKGVudHJ5LmNvbmZpZywgbmV3Q29uZmlnKSkge1xuICAgICAgICByZXR1cm4gZW50cnkuYXRsYXM7XG4gICAgICB9XG4gICAgICAvLyBUaGUgY29uZmlncyBkaWZmZXIsIHJlbGVhc2UgdGhlIHRlcm1pbmFsIGZyb20gdGhlIGVudHJ5XG4gICAgICBpZiAoZW50cnkub3duZWRCeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZW50cnkuYXRsYXMuZGlzcG9zZSgpO1xuICAgICAgICBjaGFyQXRsYXNDYWNoZS5zcGxpY2UoaSwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnRyeS5vd25lZEJ5LnNwbGljZShvd25lZEJ5SW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gVHJ5IG1hdGNoIGEgY2hhciBhdGxhcyBmcm9tIHRoZSBjYWNoZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJBdGxhc0NhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZW50cnkgPSBjaGFyQXRsYXNDYWNoZVtpXTtcbiAgICBpZiAoY29uZmlnRXF1YWxzKGVudHJ5LmNvbmZpZywgbmV3Q29uZmlnKSkge1xuICAgICAgLy8gQWRkIHRoZSB0ZXJtaW5hbCB0byB0aGUgY2FjaGUgZW50cnkgYW5kIHJldHVyblxuICAgICAgZW50cnkub3duZWRCeS5wdXNoKHRlcm1pbmFsKTtcbiAgICAgIHJldHVybiBlbnRyeS5hdGxhcztcbiAgICB9XG4gIH1cblxuICBjb25zdCBuZXdFbnRyeTogSUNoYXJBdGxhc0NhY2hlRW50cnkgPSB7XG4gICAgYXRsYXM6IG5ldyBXZWJnbENoYXJBdGxhcyhkb2N1bWVudCwgbmV3Q29uZmlnKSxcbiAgICBjb25maWc6IG5ld0NvbmZpZyxcbiAgICBvd25lZEJ5OiBbdGVybWluYWxdXG4gIH07XG4gIGNoYXJBdGxhc0NhY2hlLnB1c2gobmV3RW50cnkpO1xuICByZXR1cm4gbmV3RW50cnkuYXRsYXM7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIHRlcm1pbmFsIHJlZmVyZW5jZSBmcm9tIHRoZSBjYWNoZSwgYWxsb3dpbmcgaXRzIG1lbW9yeSB0byBiZSBmcmVlZC5cbiAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwgdG8gcmVtb3ZlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckF0bGFzQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpbmRleCA9IGNoYXJBdGxhc0NhY2hlW2ldLm93bmVkQnkuaW5kZXhPZih0ZXJtaW5hbCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgaWYgKGNoYXJBdGxhc0NhY2hlW2ldLm93bmVkQnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgY2FjaGUgZW50cnkgaWYgaXQncyB0aGUgb25seSB0ZXJtaW5hbFxuICAgICAgICBjaGFyQXRsYXNDYWNoZVtpXS5hdGxhcy5kaXNwb3NlKCk7XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlLnNwbGljZShpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcmVmZXJlbmNlIGZyb20gdGhlIGNhY2hlIGVudHJ5XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlW2ldLm93bmVkQnkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhckF0bGFzQ29uZmlnIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBERUZBVUxUX0NPTE9SIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgVGVybWluYWwsIEZvbnRXZWlnaHQgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElDb2xvciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuXG5jb25zdCBOVUxMX0NPTE9SOiBJQ29sb3IgPSB7XG4gIGNzczogJycsXG4gIHJnYmE6IDBcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNvbmZpZyhzY2FsZWRDaGFyV2lkdGg6IG51bWJlciwgc2NhbGVkQ2hhckhlaWdodDogbnVtYmVyLCB0ZXJtaW5hbDogVGVybWluYWwsIGNvbG9yczogSUNvbG9yU2V0KTogSUNoYXJBdGxhc0NvbmZpZyB7XG4gIC8vIG51bGwgb3V0IHNvbWUgZmllbGRzIHRoYXQgZG9uJ3QgbWF0dGVyXG4gIGNvbnN0IGNsb25lZENvbG9yczogSUNvbG9yU2V0ID0ge1xuICAgIGZvcmVncm91bmQ6IGNvbG9ycy5mb3JlZ3JvdW5kLFxuICAgIGJhY2tncm91bmQ6IGNvbG9ycy5iYWNrZ3JvdW5kLFxuICAgIGN1cnNvcjogTlVMTF9DT0xPUixcbiAgICBjdXJzb3JBY2NlbnQ6IE5VTExfQ09MT1IsXG4gICAgc2VsZWN0aW9uOiBOVUxMX0NPTE9SLFxuICAgIC8vIEZvciB0aGUgc3RhdGljIGNoYXIgYXRsYXMsIHdlIG9ubHkgdXNlIHRoZSBmaXJzdCAxNiBjb2xvcnMsIGJ1dCB3ZSBuZWVkIGFsbCAyNTYgZm9yIHRoZVxuICAgIC8vIGR5bmFtaWMgY2hhcmFjdGVyIGF0bGFzLlxuICAgIGFuc2k6IGNvbG9ycy5hbnNpLnNsaWNlKClcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBkZXZpY2VQaXhlbFJhdGlvOiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICBzY2FsZWRDaGFyV2lkdGgsXG4gICAgc2NhbGVkQ2hhckhlaWdodCxcbiAgICBmb250RmFtaWx5OiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRGYW1pbHknKSxcbiAgICBmb250U2l6ZTogdGVybWluYWwuZ2V0T3B0aW9uKCdmb250U2l6ZScpLFxuICAgIGZvbnRXZWlnaHQ6IHRlcm1pbmFsLmdldE9wdGlvbignZm9udFdlaWdodCcpIGFzIEZvbnRXZWlnaHQsXG4gICAgZm9udFdlaWdodEJvbGQ6IHRlcm1pbmFsLmdldE9wdGlvbignZm9udFdlaWdodEJvbGQnKSBhcyBGb250V2VpZ2h0LFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2FsbG93VHJhbnNwYXJlbmN5JyksXG4gICAgY29sb3JzOiBjbG9uZWRDb2xvcnNcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ0VxdWFscyhhOiBJQ2hhckF0bGFzQ29uZmlnLCBiOiBJQ2hhckF0bGFzQ29uZmlnKTogYm9vbGVhbiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYS5jb2xvcnMuYW5zaS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhLmNvbG9ycy5hbnNpW2ldLnJnYmEgIT09IGIuY29sb3JzLmFuc2lbaV0ucmdiYSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYS5kZXZpY2VQaXhlbFJhdGlvID09PSBiLmRldmljZVBpeGVsUmF0aW8gJiZcbiAgICAgIGEuZm9udEZhbWlseSA9PT0gYi5mb250RmFtaWx5ICYmXG4gICAgICBhLmZvbnRTaXplID09PSBiLmZvbnRTaXplICYmXG4gICAgICBhLmZvbnRXZWlnaHQgPT09IGIuZm9udFdlaWdodCAmJlxuICAgICAgYS5mb250V2VpZ2h0Qm9sZCA9PT0gYi5mb250V2VpZ2h0Qm9sZCAmJlxuICAgICAgYS5hbGxvd1RyYW5zcGFyZW5jeSA9PT0gYi5hbGxvd1RyYW5zcGFyZW5jeSAmJlxuICAgICAgYS5zY2FsZWRDaGFyV2lkdGggPT09IGIuc2NhbGVkQ2hhcldpZHRoICYmXG4gICAgICBhLnNjYWxlZENoYXJIZWlnaHQgPT09IGIuc2NhbGVkQ2hhckhlaWdodCAmJlxuICAgICAgYS5jb2xvcnMuZm9yZWdyb3VuZCA9PT0gYi5jb2xvcnMuZm9yZWdyb3VuZCAmJlxuICAgICAgYS5jb2xvcnMuYmFja2dyb3VuZCA9PT0gYi5jb2xvcnMuYmFja2dyb3VuZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzMjU2Q29sb3IoY29sb3JDb2RlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGNvbG9yQ29kZSA8IERFRkFVTFRfQ09MT1I7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IERJTV9PUEFDSVRZLCBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgSVJhc3Rlcml6ZWRHbHlwaCwgSUJvdW5kaW5nQm94LCBJUmFzdGVyaXplZEdseXBoU2V0IH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9DT0xPUiwgREVGQVVMVF9BVFRSIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgaXMyNTZDb2xvciB9IGZyb20gJy4vQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IHsgdGhyb3dJZkZhbHN5IH0gZnJvbSAnLi4vV2ViZ2xVdGlscyc7XG5pbXBvcnQgeyBJQ29sb3IgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IEZMQUdTIH0gZnJvbSAnLi4vQ29uc3RhbnRzJztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAneHRlcm0nO1xuXG4vLyBJbiBwcmFjdGljZSB3ZSdyZSBwcm9iYWJseSBuZXZlciBnb2luZyB0byBleGhhdXN0IGEgdGV4dHVyZSB0aGlzIGxhcmdlLiBGb3IgZGVidWdnaW5nIHB1cnBvc2VzLFxuLy8gaG93ZXZlciwgaXQgY2FuIGJlIHVzZWZ1bCB0byBzZXQgdGhpcyB0byBhIHJlYWxseSB0aW55IHZhbHVlLCB0byB2ZXJpZnkgdGhhdCBMUlUgZXZpY3Rpb24gd29ya3MuXG5jb25zdCBURVhUVVJFX1dJRFRIID0gMTAyNDtcbmNvbnN0IFRFWFRVUkVfSEVJR0hUID0gMTAyNDtcblxuLyoqXG4gKiBUaGUgYW1vdW50IG9mIHRoZSB0ZXh0dXJlIHRvIGJlIGZpbGxlZCBiZWZvcmUgdGhyb3dpbmcgaXQgYXdheSBhbmQgc3RhcnRpbmdcbiAqIGFnYWluLiBTaW5jZSB0aGUgdGhyb3cgYXdheSBhbmQgaW5kaXZpZHVhbCBnbHlwaCBkcmF3cyBkb24ndCBjb3N0IHRvbyBtdWNoLFxuICogdGhpcyBwcmV2ZW50IGp1Z2dsaW5nIG11bHRpcGxlIHRleHR1cmVzIGluIHRoZSBHTCBjb250ZXh0LlxuICovXG5jb25zdCBURVhUVVJFX0NBUEFDSVRZID0gTWF0aC5mbG9vcihURVhUVVJFX0hFSUdIVCAqIDAuOCk7XG5cbmNvbnN0IFRSQU5TUEFSRU5UX0NPTE9SID0ge1xuICBjc3M6ICdyZ2JhKDAsIDAsIDAsIDApJyxcbiAgcmdiYTogMFxufTtcblxuLyoqXG4gKiBBIHNoYXJlZCBvYmplY3Qgd2hpY2ggaXMgdXNlZCB0byBkcmF3IG5vdGhpbmcgZm9yIGEgcGFydGljdWxhciBjZWxsLlxuICovXG5jb25zdCBOVUxMX1JBU1RFUklaRURfR0xZUEg6IElSYXN0ZXJpemVkR2x5cGggPSB7XG4gIG9mZnNldDogeyB4OiAwLCB5OiAwIH0sXG4gIHRleHR1cmVQb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG4gIHRleHR1cmVQb3NpdGlvbkNsaXBTcGFjZTogeyB4OiAwLCB5OiAwIH0sXG4gIHNpemU6IHsgeDogMCwgeTogMCB9LFxuICBzaXplQ2xpcFNwYWNlOiB7IHg6IDAsIHk6IDAgfVxufTtcblxuY29uc3QgVE1QX0NBTlZBU19HTFlQSF9QQURESU5HID0gMjtcblxuZXhwb3J0IGNsYXNzIFdlYmdsQ2hhckF0bGFzIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcml2YXRlIF9kaWRXYXJtVXA6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIF9jYWNoZU1hcDogeyBbY29kZTogbnVtYmVyXTogSVJhc3Rlcml6ZWRHbHlwaFNldCB9ID0ge307XG4gIHByaXZhdGUgX2NhY2hlTWFwQ29tYmluZWQ6IHsgW2NoYXJzOiBzdHJpbmddOiBJUmFzdGVyaXplZEdseXBoU2V0IH0gPSB7fTtcblxuICAvLyBUaGUgdGV4dHVyZSB0aGF0IHRoZSBhdGxhcyBpcyBkcmF3biB0b1xuICBwdWJsaWMgY2FjaGVDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9jYWNoZUN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIHByaXZhdGUgX3RtcENhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIC8vIEEgdGVtcG9yYXJ5IGNvbnRleHQgdGhhdCBnbHlwaHMgYXJlIGRyYXduIHRvIGJlZm9yZSBiZWluZyB0cmFuc2ZlcmVkIHRvIHRoZSBhdGxhcy5cbiAgcHJpdmF0ZSBfdG1wQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgLy8gU2luY2UgZ2x5cGhzIGFyZSBleHBlY3RlZCB0byBiZSBhcm91bmQgdGhlIHNhbWUgaGVpZ2h0LCB0aGUgcGFja2luZ1xuICAvLyBzdHJhdGVneSB1c2VkIGl0IHRvIGZpbGwgYSByb3cgd2l0aCBnbHlwaHMgd2hpbGUga2VlcGluZyB0cmFjayBvZiB0aGVcbiAgLy8gdGFsbGVzdCBnbHlwaCBpbiB0aGUgcm93LiBPbmNlIHRoZSByb3cgaXMgZnVsbCBhIG5ldyByb3cgaXMgc3RhcnRlZCBhdFxuICAvLyAoMCxsYXN0Um93K2xhc3RSb3dUYWxsZXN0R2x5cGgpLlxuICBwcml2YXRlIF9jdXJyZW50Um93WTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfY3VycmVudFJvd1g6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3dIZWlnaHQ6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIGhhc0NhbnZhc0NoYW5nZWQgPSBmYWxzZTtcblxuICBwcml2YXRlIF93b3JrQm91bmRpbmdCb3g6IElCb3VuZGluZ0JveCA9IHsgdG9wOiAwLCBsZWZ0OiAwLCBib3R0b206IDAsIHJpZ2h0OiAwIH07XG5cbiAgY29uc3RydWN0b3IoZG9jdW1lbnQ6IERvY3VtZW50LCBwcml2YXRlIF9jb25maWc6IElDaGFyQXRsYXNDb25maWcpIHtcbiAgICB0aGlzLmNhY2hlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5jYWNoZUNhbnZhcy53aWR0aCA9IFRFWFRVUkVfV0lEVEg7XG4gICAgdGhpcy5jYWNoZUNhbnZhcy5oZWlnaHQgPSBURVhUVVJFX0hFSUdIVDtcbiAgICAvLyBUaGUgY2FudmFzIG5lZWRzIGFscGhhIGJlY2F1c2Ugd2UgdXNlIGNsZWFyQ29sb3IgdG8gY29udmVydCB0aGUgYmFja2dyb3VuZCBjb2xvciB0byBhbHBoYS5cbiAgICAvLyBJdCBtaWdodCBhbHNvIGNvbnRhaW4gc29tZSBjaGFyYWN0ZXJzIHdpdGggdHJhbnNwYXJlbnQgYmFja2dyb3VuZHMgaWYgYWxsb3dUcmFuc3BhcmVuY3kgaXNcbiAgICAvLyBzZXQuXG4gICAgdGhpcy5fY2FjaGVDdHggPSB0aHJvd0lmRmFsc3kodGhpcy5jYWNoZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHthbHBoYTogdHJ1ZX0pKTtcblxuICAgIHRoaXMuX3RtcENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuX3RtcENhbnZhcy53aWR0aCA9IHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGggKiAyICsgVE1QX0NBTlZBU19HTFlQSF9QQURESU5HICogMjtcbiAgICB0aGlzLl90bXBDYW52YXMuaGVpZ2h0ID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQgKyBUTVBfQ0FOVkFTX0dMWVBIX1BBRERJTkcgKiAyO1xuICAgIHRoaXMuX3RtcEN0eCA9IHRocm93SWZGYWxzeSh0aGlzLl90bXBDYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7YWxwaGE6IHRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeX0pKTtcblxuICAgIC8vIFRoaXMgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmdcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY2FjaGVDYW52YXMpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2FjaGVDYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5jYWNoZUNhbnZhcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuY2FjaGVDYW52YXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB3YXJtVXAoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9kaWRXYXJtVXApIHtcbiAgICAgIHRoaXMuX2RvV2FybVVwKCk7XG4gICAgICB0aGlzLl9kaWRXYXJtVXAgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfZG9XYXJtVXAoKTogdm9pZCB7XG4gICAgLy8gUHJlLWZpbGwgd2l0aCBBU0NJSSAzMy0xMjZcbiAgICBmb3IgKGxldCBpID0gMzM7IGkgPCAxMjY7IGkrKykge1xuICAgICAgY29uc3QgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fZHJhd1RvQ2FjaGUoaSwgREVGQVVMVF9BVFRSLCBERUZBVUxUX0NPTE9SLCBERUZBVUxUX0NPTE9SKTtcbiAgICAgIHRoaXMuX2NhY2hlTWFwW2ldID0ge1xuICAgICAgICBbREVGQVVMVF9BVFRSXTogcmFzdGVyaXplZEdseXBoXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBiZWdpbkZyYW1lKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9jdXJyZW50Um93WSA+IFRFWFRVUkVfQ0FQQUNJVFkpIHtcbiAgICAgIHRoaXMuX2NhY2hlQ3R4LmNsZWFyUmVjdCgwLCAwLCBURVhUVVJFX1dJRFRILCBURVhUVVJFX0hFSUdIVCk7XG4gICAgICB0aGlzLl9jYWNoZU1hcCA9IHt9O1xuICAgICAgdGhpcy5fY3VycmVudFJvd0hlaWdodCA9IDA7XG4gICAgICB0aGlzLl9jdXJyZW50Um93WCA9IDA7XG4gICAgICB0aGlzLl9jdXJyZW50Um93WSA9IDA7XG4gICAgICB0aGlzLl9kb1dhcm1VcCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRSYXN0ZXJpemVkR2x5cGhDb21iaW5lZENoYXIoY2hhcnM6IHN0cmluZywgYXR0cjogbnVtYmVyLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyKTogSVJhc3Rlcml6ZWRHbHlwaCB7XG4gICAgbGV0IHJhc3Rlcml6ZWRHbHlwaFNldCA9IHRoaXMuX2NhY2hlTWFwQ29tYmluZWRbY2hhcnNdO1xuICAgIGlmICghcmFzdGVyaXplZEdseXBoU2V0KSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGhTZXQgPSB7fTtcbiAgICAgIHRoaXMuX2NhY2hlTWFwQ29tYmluZWRbY2hhcnNdID0gcmFzdGVyaXplZEdseXBoU2V0O1xuICAgIH1cbiAgICBsZXQgcmFzdGVyaXplZEdseXBoID0gcmFzdGVyaXplZEdseXBoU2V0W2F0dHJdO1xuICAgIGlmICghcmFzdGVyaXplZEdseXBoKSB7XG4gICAgICByYXN0ZXJpemVkR2x5cGggPSB0aGlzLl9kcmF3VG9DYWNoZShjaGFycywgYXR0ciwgYmcsIGZnKTtcbiAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldFthdHRyXSA9IHJhc3Rlcml6ZWRHbHlwaDtcbiAgICB9XG4gICAgcmV0dXJuIHJhc3Rlcml6ZWRHbHlwaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBnbHlwaHMgdGV4dHVyZSBjb29yZHMsIGRyYXdpbmcgdGhlIHRleHR1cmUgaWYgaXQncyBub3QgYWxyZWFkeVxuICAgKi9cbiAgcHVibGljIGdldFJhc3Rlcml6ZWRHbHlwaChjb2RlOiBudW1iZXIsIGF0dHI6IG51bWJlciwgYmc6IG51bWJlciwgZmc6IG51bWJlcik6IElSYXN0ZXJpemVkR2x5cGgge1xuICAgIGxldCByYXN0ZXJpemVkR2x5cGhTZXQgPSB0aGlzLl9jYWNoZU1hcFtjb2RlXTtcbiAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaFNldCkge1xuICAgICAgcmFzdGVyaXplZEdseXBoU2V0ID0ge307XG4gICAgICB0aGlzLl9jYWNoZU1hcFtjb2RlXSA9IHJhc3Rlcml6ZWRHbHlwaFNldDtcbiAgICB9XG4gICAgbGV0IHJhc3Rlcml6ZWRHbHlwaCA9IHJhc3Rlcml6ZWRHbHlwaFNldFthdHRyXTtcbiAgICBpZiAoIXJhc3Rlcml6ZWRHbHlwaCkge1xuICAgICAgcmFzdGVyaXplZEdseXBoID0gdGhpcy5fZHJhd1RvQ2FjaGUoY29kZSwgYXR0ciwgYmcsIGZnKTtcbiAgICAgIHJhc3Rlcml6ZWRHbHlwaFNldFthdHRyXSA9IHJhc3Rlcml6ZWRHbHlwaDtcbiAgICB9XG4gICAgcmV0dXJuIHJhc3Rlcml6ZWRHbHlwaDtcbiAgfVxuXG4gIHByaXZhdGUgX2dldENvbG9yRnJvbUFuc2lJbmRleChpZHg6IG51bWJlcik6IElDb2xvciB7XG4gICAgaWYgKGlkeCA+PSB0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbG9yIGZvdW5kIGZvciBpZHggJyArIGlkeCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmFuc2lbaWR4XTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEJhY2tncm91bmRDb2xvcihiZzogbnVtYmVyKTogSUNvbG9yIHtcbiAgICBpZiAodGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5KSB7XG4gICAgICAvLyBUaGUgYmFja2dyb3VuZCBjb2xvciBtaWdodCBoYXZlIHNvbWUgdHJhbnNwYXJlbmN5LCBzbyB3ZSBuZWVkIHRvIHJlbmRlciBpdCBhcyBmdWxseVxuICAgICAgLy8gdHJhbnNwYXJlbnQgaW4gdGhlIGF0bGFzLiBPdGhlcndpc2Ugd2UnZCBlbmQgdXAgZHJhd2luZyB0aGUgdHJhbnNwYXJlbnQgYmFja2dyb3VuZCB0d2ljZVxuICAgICAgLy8gYXJvdW5kIHRoZSBhbnRpLWFsaWFzZWQgZWRnZXMgb2YgdGhlIGdseXBoLCBhbmQgaXQgd291bGQgbG9vayB0b28gZGFyay5cbiAgICAgIHJldHVybiBUUkFOU1BBUkVOVF9DT0xPUjtcbiAgICB9IGVsc2UgaWYgKGJnID09PSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5mb3JlZ3JvdW5kO1xuICAgIH0gZWxzZSBpZiAoaXMyNTZDb2xvcihiZykpIHtcbiAgICAgIHJldHVybiB0aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgoYmcpO1xuICAgIH1cbiAgICAvLyBUT0RPOiBTdXBwb3J0IHRydWUgY29sb3JcbiAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5iYWNrZ3JvdW5kO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0Rm9yZWdyb3VuZENvbG9yKGZnOiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIGlmIChmZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZDtcbiAgICB9IGVsc2UgaWYgKGlzMjU2Q29sb3IoZmcpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZ2V0Q29sb3JGcm9tQW5zaUluZGV4KGZnKTtcbiAgICB9XG4gICAgLy8gVE9ETzogU3VwcG9ydCB0cnVlIGNvbG9yXG4gICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuZm9yZWdyb3VuZDtcbiAgfVxuXG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlKGNvZGU6IG51bWJlciwgYXR0cjogbnVtYmVyLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyKTogSVJhc3Rlcml6ZWRHbHlwaDtcbiAgcHJpdmF0ZSBfZHJhd1RvQ2FjaGUoY2hhcnM6IHN0cmluZywgYXR0cjogbnVtYmVyLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyKTogSVJhc3Rlcml6ZWRHbHlwaDtcbiAgcHJpdmF0ZSBfZHJhd1RvQ2FjaGUoY29kZU9yQ2hhcnM6IG51bWJlciB8IHN0cmluZywgYXR0cjogbnVtYmVyLCBiZzogbnVtYmVyLCBmZzogbnVtYmVyKTogSVJhc3Rlcml6ZWRHbHlwaCB7XG4gICAgY29uc3QgY2hhcnMgPSB0eXBlb2YgY29kZU9yQ2hhcnMgPT09ICdudW1iZXInID8gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlT3JDaGFycykgOiBjb2RlT3JDaGFycztcblxuICAgIHRoaXMuaGFzQ2FudmFzQ2hhbmdlZCA9IHRydWU7XG5cbiAgICBjb25zdCBmbGFncyA9IGF0dHIgPj4gMTg7XG5cbiAgICBjb25zdCBib2xkID0gISEoZmxhZ3MgJiBGTEFHUy5CT0xEKTtcbiAgICBjb25zdCBkaW0gPSAhIShmbGFncyAmIEZMQUdTLkRJTSk7XG4gICAgY29uc3QgaXRhbGljID0gISEoZmxhZ3MgJiBGTEFHUy5JVEFMSUMpO1xuXG4gICAgdGhpcy5fdG1wQ3R4LnNhdmUoKTtcblxuICAgIC8vIGRyYXcgdGhlIGJhY2tncm91bmRcbiAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9nZXRCYWNrZ3JvdW5kQ29sb3IoYmcpO1xuICAgIC8vIFVzZSBhICdjb3B5JyBjb21wb3NpdGUgb3BlcmF0aW9uIHRvIGNsZWFyIGFueSBleGlzdGluZyBnbHlwaCBvdXQgb2YgX3RtcEN0eFdpdGhBbHBoYSwgcmVnYXJkbGVzcyBvZlxuICAgIC8vIHRyYW5zcGFyZW5jeSBpbiBiYWNrZ3JvdW5kQ29sb3JcbiAgICB0aGlzLl90bXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2NvcHknO1xuICAgIHRoaXMuX3RtcEN0eC5maWxsU3R5bGUgPSBiYWNrZ3JvdW5kQ29sb3IuY3NzO1xuICAgIHRoaXMuX3RtcEN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLl90bXBDYW52YXMud2lkdGgsIHRoaXMuX3RtcENhbnZhcy5oZWlnaHQpO1xuICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuXG4gICAgLy8gZHJhdyB0aGUgZm9yZWdyb3VuZC9nbHlwaFxuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBib2xkID8gdGhpcy5fY29uZmlnLmZvbnRXZWlnaHRCb2xkIDogdGhpcy5fY29uZmlnLmZvbnRXZWlnaHQ7XG4gICAgY29uc3QgZm9udFN0eWxlID0gaXRhbGljID8gJ2l0YWxpYycgOiAnJztcbiAgICB0aGlzLl90bXBDdHguZm9udCA9XG4gICAgICBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0aGlzLl9jb25maWcuZm9udFNpemUgKiB0aGlzLl9jb25maWcuZGV2aWNlUGl4ZWxSYXRpb31weCAke3RoaXMuX2NvbmZpZy5mb250RmFtaWx5fWA7XG4gICAgdGhpcy5fdG1wQ3R4LnRleHRCYXNlbGluZSA9ICd0b3AnO1xuXG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxTdHlsZSA9IHRoaXMuX2dldEZvcmVncm91bmRDb2xvcihmZykuY3NzO1xuXG4gICAgLy8gQXBwbHkgYWxwaGEgdG8gZGltIHRoZSBjaGFyYWN0ZXJcbiAgICBpZiAoZGltKSB7XG4gICAgICB0aGlzLl90bXBDdHguZ2xvYmFsQWxwaGEgPSBESU1fT1BBQ0lUWTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IHRoZSBjaGFyYWN0ZXJcbiAgICB0aGlzLl90bXBDdHguZmlsbFRleHQoY2hhcnMsIFRNUF9DQU5WQVNfR0xZUEhfUEFERElORywgVE1QX0NBTlZBU19HTFlQSF9QQURESU5HKTtcbiAgICB0aGlzLl90bXBDdHgucmVzdG9yZSgpO1xuXG4gICAgLy8gY2xlYXIgdGhlIGJhY2tncm91bmQgZnJvbSB0aGUgY2hhcmFjdGVyIHRvIGF2b2lkIGlzc3VlcyB3aXRoIGRyYXdpbmcgb3ZlciB0aGUgcHJldmlvdXNcbiAgICAvLyBjaGFyYWN0ZXIgaWYgaXQgZXh0ZW5kcyBwYXN0IGl0J3MgYm91bmRzXG4gICAgY29uc3QgaW1hZ2VEYXRhID0gdGhpcy5fdG1wQ3R4LmdldEltYWdlRGF0YShcbiAgICAgIDAsIDAsIHRoaXMuX3RtcENhbnZhcy53aWR0aCwgdGhpcy5fdG1wQ2FudmFzLmhlaWdodFxuICAgICk7XG5cbiAgICAvLyBUT0RPOiBTdXBwb3J0IHRyYW5zcGFyZW5jeVxuICAgIC8vIGxldCBpc0VtcHR5ID0gZmFsc2U7XG4gICAgLy8gaWYgKCF0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAvLyAgIGlzRW1wdHkgPSBjbGVhckNvbG9yKGltYWdlRGF0YSwgYmFja2dyb3VuZENvbG9yKTtcbiAgICAvLyB9XG5cbiAgICAvLyBDbGVhciBvdXQgdGhlIGJhY2tncm91bmQgY29sb3IgYW5kIGRldGVybWluZSBpZiB0aGUgZ2x5cGggaXMgZW1wdHkuXG4gICAgY29uc3QgaXNFbXB0eSA9IGNsZWFyQ29sb3IoaW1hZ2VEYXRhLCBiYWNrZ3JvdW5kQ29sb3IpO1xuXG4gICAgLy8gSGFuZGxlIGVtcHR5IGdseXBoc1xuICAgIGlmIChpc0VtcHR5KSB7XG4gICAgICByZXR1cm4gTlVMTF9SQVNURVJJWkVEX0dMWVBIO1xuICAgIH1cblxuICAgIGNvbnN0IHJhc3Rlcml6ZWRHbHlwaCA9IHRoaXMuX2ZpbmRHbHlwaEJvdW5kaW5nQm94KGltYWdlRGF0YSwgdGhpcy5fd29ya0JvdW5kaW5nQm94KTtcbiAgICBjb25zdCBjbGlwcGVkSW1hZ2VEYXRhID0gdGhpcy5fY2xpcEltYWdlRGF0YShpbWFnZURhdGEsIHRoaXMuX3dvcmtCb3VuZGluZ0JveCk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBlbm91Z2ggcm9vbSBpbiB0aGUgY3VycmVudCByb3cgYW5kIGdvIHRvIG5leHQgaWYgbmVlZGVkXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRSb3dYICsgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCA+IFRFWFRVUkVfV0lEVEgpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3dYID0gMDtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3dZICs9IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQ7XG4gICAgICB0aGlzLl9jdXJyZW50Um93SGVpZ2h0ID0gMDtcbiAgICB9XG5cbiAgICAvLyBSZWNvcmQgdGV4dHVyZSBwb3NpdGlvblxuICAgIHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb24ueCA9IHRoaXMuX2N1cnJlbnRSb3dYO1xuICAgIHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb24ueSA9IHRoaXMuX2N1cnJlbnRSb3dZO1xuICAgIHJhc3Rlcml6ZWRHbHlwaC50ZXh0dXJlUG9zaXRpb25DbGlwU3BhY2UueCA9IHRoaXMuX2N1cnJlbnRSb3dYIC8gVEVYVFVSRV9XSURUSDtcbiAgICByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uQ2xpcFNwYWNlLnkgPSB0aGlzLl9jdXJyZW50Um93WSAvIFRFWFRVUkVfSEVJR0hUO1xuXG4gICAgLy8gVXBkYXRlIGF0bGFzIGN1cnJlbnQgcm93XG4gICAgdGhpcy5fY3VycmVudFJvd0hlaWdodCA9IE1hdGgubWF4KHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQsIHJhc3Rlcml6ZWRHbHlwaC5zaXplLnkpO1xuICAgIHRoaXMuX2N1cnJlbnRSb3dYICs9IHJhc3Rlcml6ZWRHbHlwaC5zaXplLng7XG5cbiAgICAvLyBwdXRJbWFnZURhdGEgZG9lc24ndCBkbyBhbnkgYmxlbmRpbmcsIHNvIGl0IHdpbGwgb3ZlcndyaXRlIGFueSBleGlzdGluZyBjYWNoZSBlbnRyeSBmb3IgdXNcbiAgICB0aGlzLl9jYWNoZUN0eC5wdXRJbWFnZURhdGEoY2xpcHBlZEltYWdlRGF0YSwgcmFzdGVyaXplZEdseXBoLnRleHR1cmVQb3NpdGlvbi54LCByYXN0ZXJpemVkR2x5cGgudGV4dHVyZVBvc2l0aW9uLnkpO1xuXG4gICAgcmV0dXJuIHJhc3Rlcml6ZWRHbHlwaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhbiBJbWFnZURhdGEgb2JqZWN0LCBmaW5kIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG5vbi10cmFuc3BhcmVudFxuICAgKiBwb3J0aW9uIG9mIHRoZSB0ZXh0dXJlIGFuZCByZXR1cm4gYW4gSVJhc3Rlcml6ZWRHbHlwaCB3aXRoIHRoZXNlXG4gICAqIGRpbWVuc2lvbnMuXG4gICAqIEBwYXJhbSBpbWFnZURhdGEgVGhlIGltYWdlIGRhdGEgdG8gcmVhZC5cbiAgICogQHBhcmFtIGJvdW5kaW5nQm94IEFuIElCb3VuZGluZ0JveCB0byBwdXQgdGhlIGNsaXBwZWQgYm91bmRpbmcgYm94IHZhbHVlcy5cbiAgICovXG4gIHByaXZhdGUgX2ZpbmRHbHlwaEJvdW5kaW5nQm94KGltYWdlRGF0YTogSW1hZ2VEYXRhLCBib3VuZGluZ0JveDogSUJvdW5kaW5nQm94KTogSVJhc3Rlcml6ZWRHbHlwaCB7XG4gICAgYm91bmRpbmdCb3gudG9wID0gMDtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuX3RtcENhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLl90bXBDYW52YXMud2lkdGg7IHgrKykge1xuICAgICAgICBjb25zdCBhbHBoYU9mZnNldCA9IHkgKiB0aGlzLl90bXBDYW52YXMud2lkdGggKiA0ICsgeCAqIDQgKyAzO1xuICAgICAgICBpZiAoaW1hZ2VEYXRhLmRhdGFbYWxwaGFPZmZzZXRdICE9PSAwKSB7XG4gICAgICAgICAgYm91bmRpbmdCb3gudG9wID0geTtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgYm91bmRpbmdCb3gubGVmdCA9IDA7XG4gICAgZm91bmQgPSBmYWxzZTtcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHRoaXMuX3RtcENhbnZhcy53aWR0aDsgeCsrKSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuX3RtcENhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICBjb25zdCBhbHBoYU9mZnNldCA9IHkgKiB0aGlzLl90bXBDYW52YXMud2lkdGggKiA0ICsgeCAqIDQgKyAzO1xuICAgICAgICBpZiAoaW1hZ2VEYXRhLmRhdGFbYWxwaGFPZmZzZXRdICE9PSAwKSB7XG4gICAgICAgICAgYm91bmRpbmdCb3gubGVmdCA9IHg7XG4gICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGJvdW5kaW5nQm94LnJpZ2h0ID0gdGhpcy5fdG1wQ2FudmFzLndpZHRoO1xuICAgIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yIChsZXQgeCA9IHRoaXMuX3RtcENhbnZhcy53aWR0aCAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuX3RtcENhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICBjb25zdCBhbHBoYU9mZnNldCA9IHkgKiB0aGlzLl90bXBDYW52YXMud2lkdGggKiA0ICsgeCAqIDQgKyAzO1xuICAgICAgICBpZiAoaW1hZ2VEYXRhLmRhdGFbYWxwaGFPZmZzZXRdICE9PSAwKSB7XG4gICAgICAgICAgYm91bmRpbmdCb3gucmlnaHQgPSB4O1xuICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBib3VuZGluZ0JveC5ib3R0b20gPSB0aGlzLl90bXBDYW52YXMuaGVpZ2h0O1xuICAgIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yIChsZXQgeSA9IHRoaXMuX3RtcENhbnZhcy5oZWlnaHQgLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLl90bXBDYW52YXMud2lkdGg7IHgrKykge1xuICAgICAgICBjb25zdCBhbHBoYU9mZnNldCA9IHkgKiB0aGlzLl90bXBDYW52YXMud2lkdGggKiA0ICsgeCAqIDQgKyAzO1xuICAgICAgICBpZiAoaW1hZ2VEYXRhLmRhdGFbYWxwaGFPZmZzZXRdICE9PSAwKSB7XG4gICAgICAgICAgYm91bmRpbmdCb3guYm90dG9tID0geTtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHR1cmVQb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG4gICAgICB0ZXh0dXJlUG9zaXRpb25DbGlwU3BhY2U6IHsgeDogMCwgeTogMCB9LFxuICAgICAgc2l6ZToge1xuICAgICAgICB4OiBib3VuZGluZ0JveC5yaWdodCAtIGJvdW5kaW5nQm94LmxlZnQgKyAxLFxuICAgICAgICB5OiBib3VuZGluZ0JveC5ib3R0b20gLSBib3VuZGluZ0JveC50b3AgKyAxXG4gICAgICB9LFxuICAgICAgc2l6ZUNsaXBTcGFjZToge1xuICAgICAgICB4OiAoYm91bmRpbmdCb3gucmlnaHQgLSBib3VuZGluZ0JveC5sZWZ0ICsgMSkgLyBURVhUVVJFX1dJRFRILFxuICAgICAgICB5OiAoYm91bmRpbmdCb3guYm90dG9tIC0gYm91bmRpbmdCb3gudG9wICsgMSkgLyBURVhUVVJFX0hFSUdIVFxuICAgICAgfSxcbiAgICAgIG9mZnNldDoge1xuICAgICAgICB4OiAtYm91bmRpbmdCb3gubGVmdCArIFRNUF9DQU5WQVNfR0xZUEhfUEFERElORyxcbiAgICAgICAgeTogLWJvdW5kaW5nQm94LnRvcCArIFRNUF9DQU5WQVNfR0xZUEhfUEFERElOR1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIF9jbGlwSW1hZ2VEYXRhKGltYWdlRGF0YTogSW1hZ2VEYXRhLCBib3VuZGluZ0JveDogSUJvdW5kaW5nQm94KTogSW1hZ2VEYXRhIHtcbiAgICBjb25zdCB3aWR0aCA9IGJvdW5kaW5nQm94LnJpZ2h0IC0gYm91bmRpbmdCb3gubGVmdCArIDE7XG4gICAgY29uc3QgaGVpZ2h0ID0gYm91bmRpbmdCb3guYm90dG9tIC0gYm91bmRpbmdCb3gudG9wICsgMTtcbiAgICBjb25zdCBjbGlwcGVkRGF0YSA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xuICAgIGZvciAobGV0IHkgPSBib3VuZGluZ0JveC50b3A7IHkgPD0gYm91bmRpbmdCb3guYm90dG9tOyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSBib3VuZGluZ0JveC5sZWZ0OyB4IDw9IGJvdW5kaW5nQm94LnJpZ2h0OyB4KyspIHtcbiAgICAgICAgY29uc3Qgb2xkT2Zmc2V0ID0geSAqIHRoaXMuX3RtcENhbnZhcy53aWR0aCAqIDQgKyB4ICogNDtcbiAgICAgICAgY29uc3QgbmV3T2Zmc2V0ID0gKHkgLSBib3VuZGluZ0JveC50b3ApICogd2lkdGggKiA0ICsgKHggLSBib3VuZGluZ0JveC5sZWZ0KSAqIDQ7XG4gICAgICAgIGNsaXBwZWREYXRhW25ld09mZnNldF0gPSBpbWFnZURhdGEuZGF0YVtvbGRPZmZzZXRdO1xuICAgICAgICBjbGlwcGVkRGF0YVtuZXdPZmZzZXQgKyAxXSA9IGltYWdlRGF0YS5kYXRhW29sZE9mZnNldCArIDFdO1xuICAgICAgICBjbGlwcGVkRGF0YVtuZXdPZmZzZXQgKyAyXSA9IGltYWdlRGF0YS5kYXRhW29sZE9mZnNldCArIDJdO1xuICAgICAgICBjbGlwcGVkRGF0YVtuZXdPZmZzZXQgKyAzXSA9IGltYWdlRGF0YS5kYXRhW29sZE9mZnNldCArIDNdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IEltYWdlRGF0YShjbGlwcGVkRGF0YSwgd2lkdGgsIGhlaWdodCk7XG4gIH1cbn1cblxuLyoqXG4gKiBNYWtlcyBhIHBhcnRpaWN1bGFyIHJnYiBjb2xvciBpbiBhbiBJbWFnZURhdGEgY29tcGxldGVseSB0cmFuc3BhcmVudC5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHJlc3VsdCBpcyBcImVtcHR5XCIsIG1lYW5pbmcgYWxsIHBpeGVscyBhcmUgZnVsbHkgdHJhbnNwYXJlbnQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFyQ29sb3IoaW1hZ2VEYXRhOiBJbWFnZURhdGEsIGNvbG9yOiBJQ29sb3IpOiBib29sZWFuIHtcbiAgbGV0IGlzRW1wdHkgPSB0cnVlO1xuICBjb25zdCByID0gY29sb3IucmdiYSA+Pj4gMjQ7XG4gIGNvbnN0IGcgPSBjb2xvci5yZ2JhID4+PiAxNiAmIDB4RkY7XG4gIGNvbnN0IGIgPSBjb2xvci5yZ2JhID4+PiA4ICYgMHhGRjtcbiAgZm9yIChsZXQgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgaW1hZ2VEYXRhLmRhdGEubGVuZ3RoOyBvZmZzZXQgKz0gNCkge1xuICAgIGlmIChpbWFnZURhdGEuZGF0YVtvZmZzZXRdID09PSByICYmXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDFdID09PSBnICYmXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDJdID09PSBiKSB7XG4gICAgICBpbWFnZURhdGEuZGF0YVtvZmZzZXQgKyAzXSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlzRW1wdHkgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGlzRW1wdHk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJMYXllciB9IGZyb20gJy4vVHlwZXMnO1xuaW1wb3J0IHsgSUdseXBoSWRlbnRpZmllciB9IGZyb20gJy4uL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IGFjcXVpcmVDaGFyQXRsYXMgfSBmcm9tICcuLi9hdGxhcy9DaGFyQXRsYXNDYWNoZSc7XG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ3h0ZXJtJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBXZWJnbENoYXJBdGxhcyB9IGZyb20gJ2F0bGFzL1dlYmdsQ2hhckF0bGFzJztcbmltcG9ydCB7IHRocm93SWZGYWxzeSB9IGZyb20gJy4uL1dlYmdsVXRpbHMnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZVJlbmRlckxheWVyIGltcGxlbWVudHMgSVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJvdGVjdGVkIF9jdHghOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJXaWR0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhckhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2VsbFdpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDZWxsSGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFyTGVmdDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhclRvcDogbnVtYmVyID0gMDtcblxuICBwcm90ZWN0ZWQgX2NoYXJBdGxhczogV2ViZ2xDaGFyQXRsYXMgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCB0aGF0J3MgcmV1c2VkIHdoZW4gZHJhd2luZyBnbHlwaHMgaW4gb3JkZXIgdG8gcmVkdWNlIEdDLlxuICAgKi9cbiAgcHJpdmF0ZSBfY3VycmVudEdseXBoSWRlbnRpZmllcjogSUdseXBoSWRlbnRpZmllciA9IHtcbiAgICBjaGFyczogJycsXG4gICAgY29kZTogMCxcbiAgICBiZzogMCxcbiAgICBmZzogMCxcbiAgICBib2xkOiBmYWxzZSxcbiAgICBkaW06IGZhbHNlLFxuICAgIGl0YWxpYzogZmFsc2VcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9jb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGlkOiBzdHJpbmcsXG4gICAgekluZGV4OiBudW1iZXIsXG4gICAgcHJpdmF0ZSBfYWxwaGE6IGJvb2xlYW4sXG4gICAgcHJvdGVjdGVkIF9jb2xvcnM6IElDb2xvclNldFxuICApIHtcbiAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLl9jYW52YXMuY2xhc3NMaXN0LmFkZChgeHRlcm0tJHtpZH0tbGF5ZXJgKTtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuekluZGV4ID0gekluZGV4LnRvU3RyaW5nKCk7XG4gICAgdGhpcy5faW5pdENhbnZhcygpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXMpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX2NhbnZhcyk7XG4gICAgaWYgKHRoaXMuX2NoYXJBdGxhcykge1xuICAgICAgdGhpcy5fY2hhckF0bGFzLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pbml0Q2FudmFzKCk6IHZvaWQge1xuICAgIHRoaXMuX2N0eCA9IHRocm93SWZGYWxzeSh0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7YWxwaGE6IHRoaXMuX2FscGhhfSkpO1xuICAgIC8vIERyYXcgdGhlIGJhY2tncm91bmQgaWYgdGhpcyBpcyBhbiBvcGFxdWUgbGF5ZXJcbiAgICBpZiAoIXRoaXMuX2FscGhhKSB7XG4gICAgICB0aGlzLl9jbGVhckFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge31cbiAgcHVibGljIG9uQmx1cih0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkZvY3VzKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge31cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkdyaWRDaGFuZ2VkKHRlcm1pbmFsOiBUZXJtaW5hbCwgc3RhcnRSb3c6IG51bWJlciwgZW5kUm93OiBudW1iZXIpOiB2b2lkIHt9XG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsLCBzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHt9XG5cbiAgcHVibGljIHNldENvbG9ycyh0ZXJtaW5hbDogVGVybWluYWwsIGNvbG9yU2V0OiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRlcm1pbmFsLCBjb2xvclNldCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3NldFRyYW5zcGFyZW5jeSh0ZXJtaW5hbDogVGVybWluYWwsIGFscGhhOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gRG8gbm90aGluZyB3aGVuIGFscGhhIGRvZXNuJ3QgY2hhbmdlXG4gICAgaWYgKGFscGhhID09PSB0aGlzLl9hbHBoYSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgY2FudmFzIGFuZCByZXBsYWNlIG9sZCBvbmVcbiAgICBjb25zdCBvbGRDYW52YXMgPSB0aGlzLl9jYW52YXM7XG4gICAgdGhpcy5fYWxwaGEgPSBhbHBoYTtcbiAgICAvLyBDbG9uaW5nIHByZXNlcnZlcyBwcm9wZXJ0aWVzXG4gICAgdGhpcy5fY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PnRoaXMuX2NhbnZhcy5jbG9uZU5vZGUoKTtcbiAgICB0aGlzLl9pbml0Q2FudmFzKCk7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlcGxhY2VDaGlsZCh0aGlzLl9jYW52YXMsIG9sZENhbnZhcyk7XG5cbiAgICAvLyBSZWdlbmVyYXRlIGNoYXIgYXRsYXMgYW5kIGZvcmNlIGEgZnVsbCByZWRyYXdcbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRlcm1pbmFsLCB0aGlzLl9jb2xvcnMpO1xuICAgIHRoaXMub25HcmlkQ2hhbmdlZCh0ZXJtaW5hbCwgMCwgdGVybWluYWwucm93cyAtIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgY2hhciBhdGxhcywgYXF1aXJpbmcgYSBuZXcgb25lIGlmIG5lY2Vzc2FyeS5cbiAgICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGNvbG9yU2V0IFRoZSBjb2xvciBzZXQgdG8gdXNlIGZvciB0aGUgY2hhciBhdGxhcy5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2hDaGFyQXRsYXModGVybWluYWw6IFRlcm1pbmFsLCBjb2xvclNldDogSUNvbG9yU2V0KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NjYWxlZENoYXJXaWR0aCA8PSAwICYmIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jaGFyQXRsYXMgPSBhY3F1aXJlQ2hhckF0bGFzKHRlcm1pbmFsLCBjb2xvclNldCwgdGhpcy5fc2NhbGVkQ2hhcldpZHRoLCB0aGlzLl9zY2FsZWRDaGFySGVpZ2h0KTtcbiAgICB0aGlzLl9jaGFyQXRsYXMud2FybVVwKCk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKHRlcm1pbmFsOiBUZXJtaW5hbCwgZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHRoaXMuX3NjYWxlZENlbGxXaWR0aCA9IGRpbS5zY2FsZWRDZWxsV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCA9IGRpbS5zY2FsZWRDZWxsSGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJXaWR0aCA9IGRpbS5zY2FsZWRDaGFyV2lkdGg7XG4gICAgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCA9IGRpbS5zY2FsZWRDaGFySGVpZ2h0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJMZWZ0ID0gZGltLnNjYWxlZENoYXJMZWZ0O1xuICAgIHRoaXMuX3NjYWxlZENoYXJUb3AgPSBkaW0uc2NhbGVkQ2hhclRvcDtcbiAgICB0aGlzLl9jYW52YXMud2lkdGggPSBkaW0uc2NhbGVkQ2FudmFzV2lkdGg7XG4gICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IGRpbS5zY2FsZWRDYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoID0gYCR7ZGltLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7ZGltLmNhbnZhc0hlaWdodH1weGA7XG5cbiAgICAvLyBEcmF3IHRoZSBiYWNrZ3JvdW5kIGlmIHRoaXMgaXMgYW4gb3BhcXVlIGxheWVyXG4gICAgaWYgKCF0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY2xlYXJBbGwoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRlcm1pbmFsLCB0aGlzLl9jb2xvcnMpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IHJlc2V0KHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEZpbGxzIDErIGNlbGxzIGNvbXBsZXRlbHkuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIHN0YXJ0IGF0XG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gZmlsbC5cbiAgICogQHBhcmFtIGhlaWdodCBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBfZmlsbENlbGxzKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICBoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxscyBhIDFweCBsaW5lICgycHggb24gSERQSSkgYXQgdGhlIGJvdHRvbSBvZiB0aGUgY2VsbC4gVGhpcyB1c2VzIHRoZVxuICAgKiBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maWxsQm90dG9tTGluZUF0Q2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIgPSAxKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAoeSArIDEpICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCAtIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC0gMSAvKiBFbnN1cmUgaXQncyBkcmF3biB3aXRoaW4gdGhlIGNlbGwgKi8sXG4gICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gIH1cblxuICAvKipcbiAgICogRmlsbHMgYSAxcHggbGluZSAoMnB4IG9uIEhEUEkpIGF0IHRoZSBsZWZ0IG9mIHRoZSBjZWxsLiBUaGlzIHVzZXMgdGhlXG4gICAqIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBmaWxsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxMZWZ0TGluZUF0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJva2VzIGEgMXB4IHJlY3RhbmdsZSAoMnB4IG9uIEhEUEkpIGFyb3VuZCBhIGNlbGwuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmdcbiAgICogc3Ryb2tlU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9zdHJva2VSZWN0QXRDZWxsKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5saW5lV2lkdGggPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLl9jdHguc3Ryb2tlUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCArIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC8gMixcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgKyAod2luZG93LmRldmljZVBpeGVsUmF0aW8gLyAyKSxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggLSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICAgICAgKGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpIC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgZW50aXJlIGNhbnZhcy5cbiAgICovXG4gIHByb3RlY3RlZCBfY2xlYXJBbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FscGhhKSB7XG4gICAgICB0aGlzLl9jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgICB0aGlzLl9jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIDErIGNlbGxzIGNvbXBsZXRlbHkuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gY2xlYXIuXG4gICAqIEBwYXJhbSBoZWlnaHQgVGhlIG51bWJlciBvZiByb3dzIHRvIGNsZWFyLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9jbGVhckNlbGxzKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdChcbiAgICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGEgdHJ1ZWNvbG9yIGNoYXJhY3RlciBhdCB0aGUgY2VsbC4gVGhlIGNoYXJhY3RlciB3aWxsIGJlIGNsaXBwZWQgdG9cbiAgICogZW5zdXJlIHRoYXQgaXQgZml0cyB3aXRoIHRoZSBjZWxsLCBpbmNsdWRpbmcgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGlmIGl0J3NcbiAgICogYSB3aWRlIGNoYXJhY3Rlci4gVGhpcyB1c2VzIHRoZSBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB0ZXJtaW5hbCBUaGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBjZWxsIFRoZSBjZWxsIGRhdGEgZm9yIHRoZSBjaGFyYWN0ZXIgdG8gZHJhdy5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3Igb2YgdGhlIGNoYXJhY3Rlci5cbiAgICovXG4gIHByb3RlY3RlZCBfZmlsbENoYXJUcnVlQ29sb3IodGVybWluYWw6IFRlcm1pbmFsLCBjZWxsOiBDZWxsRGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguZm9udCA9IHRoaXMuX2dldEZvbnQodGVybWluYWwsIGZhbHNlLCBmYWxzZSk7XG4gICAgdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgIHRoaXMuX2NsaXBSb3codGVybWluYWwsIHkpO1xuICAgIHRoaXMuX2N0eC5maWxsVGV4dChcbiAgICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcCArIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGlwcyBhIHJvdyB0byBlbnN1cmUgbm8gcGl4ZWxzIHdpbGwgYmUgZHJhd24gb3V0c2lkZSB0aGUgY2VsbHMgaW4gdGhlIHJvdy5cbiAgICogQHBhcmFtIHRlcm1pbmFsIFRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBjbGlwLlxuICAgKi9cbiAgcHJpdmF0ZSBfY2xpcFJvdyh0ZXJtaW5hbDogVGVybWluYWwsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLl9jdHgucmVjdChcbiAgICAgICAgMCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHRlcm1pbmFsLmNvbHMgKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIHRoaXMuX2N0eC5jbGlwKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY3VycmVudCBmb250LlxuICAgKiBAcGFyYW0gdGVybWluYWwgVGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gaXNCb2xkIElmIHdlIHNob3VsZCB1c2UgdGhlIGJvbGQgZm9udFdlaWdodC5cbiAgICovXG4gIHByb3RlY3RlZCBfZ2V0Rm9udCh0ZXJtaW5hbDogVGVybWluYWwsIGlzQm9sZDogYm9vbGVhbiwgaXNJdGFsaWM6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBpc0JvbGQgPyB0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRXZWlnaHRCb2xkJykgOiB0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRXZWlnaHQnKTtcbiAgICBjb25zdCBmb250U3R5bGUgPSBpc0l0YWxpYyA/ICdpdGFsaWMnIDogJyc7XG5cbiAgICByZXR1cm4gYCR7Zm9udFN0eWxlfSAke2ZvbnRXZWlnaHR9ICR7dGVybWluYWwuZ2V0T3B0aW9uKCdmb250U2l6ZScpICogd2luZG93LmRldmljZVBpeGVsUmF0aW99cHggJHt0ZXJtaW5hbC5nZXRPcHRpb24oJ2ZvbnRGYW1pbHknKX1gO1xuICB9XG59XG5cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBCYXNlUmVuZGVyTGF5ZXIgfSBmcm9tICcuL0Jhc2VSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcblxuaW50ZXJmYWNlIElDdXJzb3JTdGF0ZSB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xuICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gIHN0eWxlOiBzdHJpbmc7XG4gIHdpZHRoOiBudW1iZXI7XG59XG5cbi8qKlxuICogVGhlIHRpbWUgYmV0d2VlbiBjdXJzb3IgYmxpbmtzLlxuICovXG5jb25zdCBCTElOS19JTlRFUlZBTCA9IDYwMDtcblxuZXhwb3J0IGNsYXNzIEN1cnNvclJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IElDdXJzb3JTdGF0ZTtcbiAgcHJpdmF0ZSBfY3Vyc29yUmVuZGVyZXJzOiB7W2tleTogc3RyaW5nXTogKHRlcm1pbmFsOiBUZXJtaW5hbCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSkgPT4gdm9pZH07XG4gIHByaXZhdGUgX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyOiBDdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY2VsbDogSUNlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgekluZGV4OiBudW1iZXIsIGNvbG9yczogSUNvbG9yU2V0KSB7XG4gICAgc3VwZXIoY29udGFpbmVyLCAnY3Vyc29yJywgekluZGV4LCB0cnVlLCBjb2xvcnMpO1xuICAgIHRoaXMuX3N0YXRlID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICBpc0ZvY3VzZWQ6IGZhbHNlLFxuICAgICAgc3R5bGU6ICcnLFxuICAgICAgd2lkdGg6IDBcbiAgICB9O1xuICAgIHRoaXMuX2N1cnNvclJlbmRlcmVycyA9IHtcbiAgICAgICdiYXInOiB0aGlzLl9yZW5kZXJCYXJDdXJzb3IuYmluZCh0aGlzKSxcbiAgICAgICdibG9jayc6IHRoaXMuX3JlbmRlckJsb2NrQ3Vyc29yLmJpbmQodGhpcyksXG4gICAgICAndW5kZXJsaW5lJzogdGhpcy5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yLmJpbmQodGhpcylcbiAgICB9O1xuICAgIC8vIFRPRE86IENvbnNpZGVyIGluaXRpYWwgb3B0aW9ucz8gTWF5YmUgb25PcHRpb25zQ2hhbmdlZCBzaG91bGQgYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2Ygb3Blbj9cbiAgfVxuXG4gIHB1YmxpYyByZXNpemUodGVybWluYWw6IFRlcm1pbmFsLCBkaW06IElSZW5kZXJEaW1lbnNpb25zKTogdm9pZCB7XG4gICAgc3VwZXIucmVzaXplKHRlcm1pbmFsLCBkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgaXNGb2N1c2VkOiBmYWxzZSxcbiAgICAgIHN0eWxlOiAnJyxcbiAgICAgIHdpZHRoOiAwXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5vbk9wdGlvbnNDaGFuZ2VkKHRlcm1pbmFsKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25CbHVyKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucGF1c2UoKTtcbiAgICB9XG4gICAgdGVybWluYWwucmVmcmVzaCh0ZXJtaW5hbC5idWZmZXIuY3Vyc29yWSwgdGVybWluYWwuYnVmZmVyLmN1cnNvclkpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXModGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN1bWUodGVybWluYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZXJtaW5hbC5yZWZyZXNoKHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JZLCB0ZXJtaW5hbC5idWZmZXIuY3Vyc29yWSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgaWYgKHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yQmxpbmsnKSkge1xuICAgICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciA9IG5ldyBDdXJzb3JCbGlua1N0YXRlTWFuYWdlcih0ZXJtaW5hbCwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3JlbmRlcih0ZXJtaW5hbCwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgICAgLy8gUmVxdWVzdCBhIHJlZnJlc2ggZnJvbSB0aGUgdGVybWluYWwgYXMgbWFuYWdlbWVudCBvZiByZW5kZXJpbmcgaXMgYmVpbmdcbiAgICAgIC8vIG1vdmVkIGJhY2sgdG8gdGhlIHRlcm1pbmFsXG4gICAgICB0ZXJtaW5hbC5yZWZyZXNoKHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JZLCB0ZXJtaW5hbC5idWZmZXIuY3Vyc29yWSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSh0ZXJtaW5hbDogVGVybWluYWwpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3RhcnRCbGlua0FuaW1hdGlvbih0ZXJtaW5hbCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uR3JpZENoYW5nZWQodGVybWluYWw6IFRlcm1pbmFsLCBzdGFydFJvdzogbnVtYmVyLCBlbmRSb3c6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgfHwgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuaXNQYXVzZWQpIHtcbiAgICAgIHRoaXMuX3JlbmRlcih0ZXJtaW5hbCwgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN0YXJ0QmxpbmtBbmltYXRpb24odGVybWluYWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlcih0ZXJtaW5hbDogVGVybWluYWwsIHRyaWdnZXJlZEJ5QW5pbWF0aW9uRnJhbWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBEb24ndCBkcmF3IHRoZSBjdXJzb3IgaWYgaXQncyBoaWRkZW5cbiAgICAvLyBUT0RPOiBOZWVkIHRvIGV4cG9zZSBBUEkgZm9yIHRoaXNcbiAgICBpZiAoISh0ZXJtaW5hbCBhcyBhbnkpLl9jb3JlLmN1cnNvclN0YXRlIHx8ICh0ZXJtaW5hbCBhcyBhbnkpLl9jb3JlLmN1cnNvckhpZGRlbikge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3JZID0gdGVybWluYWwuYnVmZmVyLmJhc2VZICsgdGVybWluYWwuYnVmZmVyLmN1cnNvclk7XG4gICAgY29uc3Qgdmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgPSBjdXJzb3JZIC0gdGVybWluYWwuYnVmZmVyLnZpZXdwb3J0WTtcblxuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIG9mZi1zY3JlZW5cbiAgICBpZiAodmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgPCAwIHx8IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZID49IHRlcm1pbmFsLnJvd3MpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVE9ETzogTmVlZCBmYXN0IGJ1ZmZlciBBUEkgZm9yIGxvYWRpbmcgY2VsbFxuICAgICh0ZXJtaW5hbCBhcyBhbnkpLl9jb3JlLmJ1ZmZlci5saW5lcy5nZXQoY3Vyc29yWSkubG9hZENlbGwodGVybWluYWwuYnVmZmVyLmN1cnNvclgsIHRoaXMuX2NlbGwpO1xuICAgIGlmICh0aGlzLl9jZWxsLmNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghaXNUZXJtaW5hbEZvY3VzZWQodGVybWluYWwpKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICAgIHRoaXMuX3JlbmRlckJsdXJDdXJzb3IodGVybWluYWwsIHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JYLCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICAgICAgdGhpcy5fc3RhdGUueCA9IHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JYO1xuICAgICAgdGhpcy5fc3RhdGUueSA9IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZO1xuICAgICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdGF0ZS5zdHlsZSA9IHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yU3R5bGUnKTtcbiAgICAgIHRoaXMuX3N0YXRlLndpZHRoID0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IGRyYXcgdGhlIGN1cnNvciBpZiBpdCdzIGJsaW5raW5nXG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyICYmICF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc0N1cnNvclZpc2libGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3Vyc29yKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICAvLyBUaGUgY3Vyc29yIGlzIGFscmVhZHkgaW4gdGhlIGNvcnJlY3Qgc3BvdCwgZG9uJ3QgcmVkcmF3XG4gICAgICBpZiAodGhpcy5fc3RhdGUueCA9PT0gdGVybWluYWwuYnVmZmVyLmN1cnNvclggJiZcbiAgICAgICAgICB0aGlzLl9zdGF0ZS55ID09PSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLmlzRm9jdXNlZCA9PT0gaXNUZXJtaW5hbEZvY3VzZWQodGVybWluYWwpICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUuc3R5bGUgPT09IHRlcm1pbmFsLmdldE9wdGlvbignY3Vyc29yU3R5bGUnKSAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLndpZHRoID09PSB0aGlzLl9jZWxsLmdldFdpZHRoKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N1cnNvclJlbmRlcmVyc1t0ZXJtaW5hbC5nZXRPcHRpb24oJ2N1cnNvclN0eWxlJykgfHwgJ2Jsb2NrJ10odGVybWluYWwsIHRlcm1pbmFsLmJ1ZmZlci5jdXJzb3JYLCB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSwgdGhpcy5fY2VsbCk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcblxuICAgIHRoaXMuX3N0YXRlLnggPSB0ZXJtaW5hbC5idWZmZXIuY3Vyc29yWDtcbiAgICB0aGlzLl9zdGF0ZS55ID0gdmlld3BvcnRSZWxhdGl2ZUN1cnNvclk7XG4gICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5fc3RhdGUuc3R5bGUgPSB0ZXJtaW5hbC5nZXRPcHRpb24oJ2N1cnNvclN0eWxlJyk7XG4gICAgdGhpcy5fc3RhdGUud2lkdGggPSB0aGlzLl9jZWxsLmdldFdpZHRoKCk7XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckN1cnNvcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueCwgdGhpcy5fc3RhdGUueSwgdGhpcy5fc3RhdGUud2lkdGgsIDEpO1xuICAgICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICAgIHg6IDAsXG4gICAgICAgIHk6IDAsXG4gICAgICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgICAgIHN0eWxlOiAnJyxcbiAgICAgICAgd2lkdGg6IDBcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmFyQ3Vyc29yKHRlcm1pbmFsOiBUZXJtaW5hbCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX2ZpbGxMZWZ0TGluZUF0Q2VsbCh4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmxvY2tDdXJzb3IodGVybWluYWw6IFRlcm1pbmFsLCB4OiBudW1iZXIsIHk6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgdGhpcy5fZmlsbENlbGxzKHgsIHksIGNlbGwuZ2V0V2lkdGgoKSwgMSk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzO1xuICAgIHRoaXMuX2ZpbGxDaGFyVHJ1ZUNvbG9yKHRlcm1pbmFsLCBjZWxsLCB4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyVW5kZXJsaW5lQ3Vyc29yKHRlcm1pbmFsOiBUZXJtaW5hbCwgeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyh4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmx1ckN1cnNvcih0ZXJtaW5hbDogVGVybWluYWwsIHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5zdHJva2VTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX3N0cm9rZVJlY3RBdENlbGwoeCwgeSwgY2VsbC5nZXRXaWR0aCgpLCAxKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG59XG5cbmNsYXNzIEN1cnNvckJsaW5rU3RhdGVNYW5hZ2VyIHtcbiAgcHVibGljIGlzQ3Vyc29yVmlzaWJsZTogYm9vbGVhbjtcblxuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua1N0YXJ0VGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9ibGlua0ludGVydmFsOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIGF0IHdoaWNoIHRoZSBhbmltYXRpb24gZnJhbWUgd2FzIHJlc3RhcnRlZCwgdGhpcyBpcyB1c2VkIG9uIHRoZVxuICAgKiBuZXh0IHJlbmRlciB0byByZXN0YXJ0IHRoZSB0aW1lcnMgc28gdGhleSBkb24ndCBuZWVkIHRvIHJlc3RhcnQgdGhlIHRpbWVyc1xuICAgKiBtdWx0aXBsZSB0aW1lcyBvdmVyIGEgc2hvcnQgcGVyaW9kLlxuICAgKi9cbiAgcHJpdmF0ZSBfYW5pbWF0aW9uVGltZVJlc3RhcnRlZDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHRlcm1pbmFsOiBUZXJtaW5hbCxcbiAgICBwcml2YXRlIF9yZW5kZXJDYWxsYmFjazogKCkgPT4gdm9pZFxuICApIHtcbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKGlzVGVybWluYWxGb2N1c2VkKHRlcm1pbmFsKSkge1xuICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBpc1BhdXNlZCgpOiBib29sZWFuIHsgcmV0dXJuICEodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgfHwgdGhpcy5fYmxpbmtJbnRlcnZhbCk7IH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN0YXJ0QmxpbmtBbmltYXRpb24odGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNQYXVzZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gU2F2ZSBhIHRpbWVzdGFtcCBzbyB0aGF0IHRoZSByZXN0YXJ0IGNhbiBiZSBkb25lIG9uIHRoZSBuZXh0IGludGVydmFsXG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IERhdGUubm93KCk7XG4gICAgLy8gRm9yY2UgYSBjdXJzb3IgcmVuZGVyIHRvIGVuc3VyZSBpdCdzIHZpc2libGUgYW5kIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uXG4gICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSB0cnVlO1xuICAgIGlmICghdGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVzdGFydEludGVydmFsKHRpbWVUb1N0YXJ0OiBudW1iZXIgPSBCTElOS19JTlRFUlZBTCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIGlmICh0aGlzLl9ibGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgaW5pdGlhbCB0aW1lb3V0IHdoaWNoIHdpbGwgaGlkZSB0aGUgY3Vyc29yLCB0aGlzIGlzIGRvbmUgYmVmb3JlXG4gICAgLy8gdGhlIHJlZ3VsYXIgaW50ZXJ2YWwgaXMgc2V0dXAgaW4gb3JkZXIgdG8gc3VwcG9ydCByZXN0YXJ0aW5nIHRoZSBibGlua1xuICAgIC8vIGFuaW1hdGlvbiBpbiBhIGxpZ2h0d2VpZ2h0IHdheSAod2l0aG91dCB0aHJhc2hpbmcgY2xlYXJJbnRlcnZhbCBhbmRcbiAgICAvLyBzZXRJbnRlcnZhbCkuXG4gICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSA8bnVtYmVyPjxhbnk+c2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBhbm90aGVyIGFuaW1hdGlvbiByZXN0YXJ0IHdhcyByZXF1ZXN0ZWQgd2hpbGUgdGhpcyB3YXMgYmVpbmdcbiAgICAgIC8vIHN0YXJ0ZWRcbiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aW1lID4gMCkge1xuICAgICAgICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCh0aW1lKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSGlkZSB0aGUgY3Vyc29yXG4gICAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2V0dXAgdGhlIGJsaW5rIGludGVydmFsXG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gPG51bWJlcj48YW55PnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgLy8gQWRqdXN0IHRoZSBhbmltYXRpb24gdGltZSBpZiBpdCB3YXMgcmVzdGFydGVkXG4gICAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgICAgLy8gY2FsYyB0aW1lIGRpZmZcbiAgICAgICAgICAvLyBNYWtlIHJlc3RhcnQgaW50ZXJ2YWwgZG8gYSBzZXRUaW1lb3V0IGluaXRpYWxseT9cbiAgICAgICAgICBjb25zdCB0aW1lID0gQkxJTktfSU5URVJWQUwgLSAoRGF0ZS5ub3coKSAtIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpO1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKHRpbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEludmVydCB2aXNpYmlsaXR5IGFuZCByZW5kZXJcbiAgICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSAhdGhpcy5pc0N1cnNvclZpc2libGU7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICB9LCBCTElOS19JTlRFUlZBTCk7XG4gICAgfSwgdGltZVRvU3RhcnQpO1xuICB9XG5cbiAgcHVibGljIHBhdXNlKCk6IHZvaWQge1xuICAgIHRoaXMuaXNDdXJzb3JWaXNpYmxlID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fYmxpbmtJbnRlcnZhbCkge1xuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCk7XG4gICAgICB0aGlzLl9ibGlua0ludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXN1bWUodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKTtcbiAgICB0aGlzLnJlc3RhcnRCbGlua0FuaW1hdGlvbih0ZXJtaW5hbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNUZXJtaW5hbEZvY3VzZWQodGVybWluYWw6IFRlcm1pbmFsKTogYm9vbGVhbiB7XG4gIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0ZXJtaW5hbC50ZXh0YXJlYSAmJiBkb2N1bWVudC5oYXNGb2N1cygpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJTGlua2lmaWVyQWNjZXNzb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvVHlwZXMnO1xuaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBCYXNlUmVuZGVyTGF5ZXIgfSBmcm9tICcuL0Jhc2VSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9Db25zdGFudHMnO1xuaW1wb3J0IHsgaXMyNTZDb2xvciB9IGZyb20gJy4uL2F0bGFzL0NoYXJBdGxhc1V0aWxzJztcbmltcG9ydCB7IElDb2xvclNldCwgSUxpbmtpZmllckV2ZW50IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgTGlua1JlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IElMaW5raWZpZXJFdmVudCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxFbGVtZW50LCB6SW5kZXg6IG51bWJlciwgY29sb3JzOiBJQ29sb3JTZXQsIHRlcm1pbmFsOiBJTGlua2lmaWVyQWNjZXNzb3IpIHtcbiAgICBzdXBlcihjb250YWluZXIsICdsaW5rJywgekluZGV4LCB0cnVlLCBjb2xvcnMpO1xuICAgIHRlcm1pbmFsLmxpbmtpZmllci5vbkxpbmtIb3ZlcihlID0+IHRoaXMuX29uTGlua0hvdmVyKGUpKTtcbiAgICB0ZXJtaW5hbC5saW5raWZpZXIub25MaW5rTGVhdmUoZSA9PiB0aGlzLl9vbkxpbmtMZWF2ZShlKSk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKHRlcm1pbmFsOiBUZXJtaW5hbCwgZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZSh0ZXJtaW5hbCwgZGltKTtcbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQodGVybWluYWw6IFRlcm1pbmFsKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJDdXJyZW50TGluaygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJDdXJyZW50TGluaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueDEsIHRoaXMuX3N0YXRlLnkxLCB0aGlzLl9zdGF0ZS5jb2xzIC0gdGhpcy5fc3RhdGUueDEsIDEpO1xuICAgICAgY29uc3QgbWlkZGxlUm93Q291bnQgPSB0aGlzLl9zdGF0ZS55MiAtIHRoaXMuX3N0YXRlLnkxIC0gMTtcbiAgICAgIGlmIChtaWRkbGVSb3dDb3VudCA+IDApIHtcbiAgICAgICAgdGhpcy5fY2xlYXJDZWxscygwLCB0aGlzLl9zdGF0ZS55MSArIDEsIHRoaXMuX3N0YXRlLmNvbHMsIG1pZGRsZVJvd0NvdW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHMoMCwgdGhpcy5fc3RhdGUueTIsIHRoaXMuX3N0YXRlLngyLCAxKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0hvdmVyKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIGlmIChlLmZnID09PSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SKSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgIH0gZWxzZSBpZiAoZS5mZyAhPT0gdW5kZWZpbmVkICYmIGlzMjU2Q29sb3IoZS5mZykpIHtcbiAgICAgIC8vIDI1NiBjb2xvciBzdXBwb3J0XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbZS5mZyFdLmNzcztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztcbiAgICB9XG5cbiAgICBpZiAoZS55MSA9PT0gZS55Mikge1xuICAgICAgLy8gU2luZ2xlIGxpbmUgbGlua1xuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsIGUueTEsIGUueDIgLSBlLngxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTXVsdGktbGluZSBsaW5rXG4gICAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoZS54MSwgZS55MSwgZS5jb2xzIC0gZS54MSk7XG4gICAgICBmb3IgKGxldCB5ID0gZS55MSArIDE7IHkgPCBlLnkyOyB5KyspIHtcbiAgICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKDAsIHksIGUuY29scyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoMCwgZS55MiwgZS54Mik7XG4gICAgfVxuICAgIHRoaXMuX3N0YXRlID0gZTtcbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0xlYXZlKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBUaGlzIGZpbGUgaXMgdGhlIGVudHJ5IHBvaW50IGZvciBicm93c2VyaWZ5LlxuICovXG5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3h0ZXJtLmQudHNcIi8+XG5cbi8vIFVzZSB0c2MgdmVyc2lvbiAoeWFybiB3YXRjaClcbmltcG9ydCB7IFRlcm1pbmFsIH0gZnJvbSAnLi4vb3V0L3B1YmxpYy9UZXJtaW5hbCc7XG5pbXBvcnQgeyBBdHRhY2hBZGRvbiB9IGZyb20gJy4uL2FkZG9ucy94dGVybS1hZGRvbi1hdHRhY2gvb3V0L0F0dGFjaEFkZG9uJztcbmltcG9ydCB7IEZpdEFkZG9uIH0gZnJvbSAnLi4vYWRkb25zL3h0ZXJtLWFkZG9uLWZpdC9vdXQvRml0QWRkb24nO1xuaW1wb3J0IHsgU2VhcmNoQWRkb24sIElTZWFyY2hPcHRpb25zIH0gZnJvbSAnLi4vYWRkb25zL3h0ZXJtLWFkZG9uLXNlYXJjaC9vdXQvU2VhcmNoQWRkb24nO1xuaW1wb3J0IHsgV2ViTGlua3NBZGRvbiB9IGZyb20gJy4uL2FkZG9ucy94dGVybS1hZGRvbi13ZWItbGlua3Mvb3V0L1dlYkxpbmtzQWRkb24nO1xuaW1wb3J0IHsgV2ViZ2xBZGRvbiB9IGZyb20gJy4uL2FkZG9ucy94dGVybS1hZGRvbi13ZWJnbC9vdXQvV2ViZ2xBZGRvbic7XG5cbi8vIFVzZSB3ZWJwYWNrZWQgdmVyc2lvbiAoeWFybiBwYWNrYWdlKVxuLy8gaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICcuLi9saWIveHRlcm0nO1xuLy8gaW1wb3J0IHsgQXR0YWNoQWRkb24gfSBmcm9tICd4dGVybS1hZGRvbi1hdHRhY2gnO1xuLy8gaW1wb3J0IHsgRml0QWRkb24gfSBmcm9tICd4dGVybS1hZGRvbi1maXQnO1xuLy8gaW1wb3J0IHsgU2VhcmNoQWRkb24sIElTZWFyY2hPcHRpb25zIH0gZnJvbSAneHRlcm0tYWRkb24tc2VhcmNoJztcbi8vIGltcG9ydCB7IFdlYkxpbmtzQWRkb24gfSBmcm9tICd4dGVybS1hZGRvbi13ZWItbGlua3MnO1xuLy8gaW1wb3J0IHsgV2ViZ2xBZGRvbiB9IGZyb20gJ3h0ZXJtLWFkZG9uLXdlYmdsJztcblxuLy8gUHVsbGluZyBpbiB0aGUgbW9kdWxlJ3MgdHlwZXMgcmVsaWVzIG9uIHRoZSA8cmVmZXJlbmNlPiBhYm92ZSwgaXQncyBsb29rcyBhXG4vLyBsaXR0bGUgd2VpcmQgaGVyZSBhcyB3ZSdyZSBpbXBvcnRpbmcgXCJ0aGlzXCIgbW9kdWxlXG5pbXBvcnQgeyBUZXJtaW5hbCBhcyBUZXJtaW5hbFR5cGUsIElUZXJtaW5hbE9wdGlvbnMgfSBmcm9tICd4dGVybSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdpbmRvd1dpdGhUZXJtaW5hbCBleHRlbmRzIFdpbmRvdyB7XG4gIHRlcm06IFRlcm1pbmFsVHlwZTtcbiAgVGVybWluYWw/OiB0eXBlb2YgVGVybWluYWxUeXBlO1xuICBBdHRhY2hBZGRvbj86IHR5cGVvZiBBdHRhY2hBZGRvbjtcbiAgRml0QWRkb24/OiB0eXBlb2YgRml0QWRkb247XG4gIFNlYXJjaEFkZG9uPzogdHlwZW9mIFNlYXJjaEFkZG9uO1xuICBXZWJMaW5rc0FkZG9uPzogdHlwZW9mIFdlYkxpbmtzQWRkb247XG4gIFdlYmdsQWRkb24/OiB0eXBlb2YgV2ViZ2xBZGRvbjtcbn1cbmRlY2xhcmUgbGV0IHdpbmRvdzogSVdpbmRvd1dpdGhUZXJtaW5hbDtcblxubGV0IHRlcm07XG5sZXQgZml0QWRkb246IEZpdEFkZG9uO1xubGV0IHNlYXJjaEFkZG9uOiBTZWFyY2hBZGRvbjtcbmxldCBwcm90b2NvbDtcbmxldCBzb2NrZXRVUkw7XG5sZXQgc29ja2V0O1xubGV0IHBpZDtcblxuY29uc3QgdGVybWluYWxDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVybWluYWwtY29udGFpbmVyJyk7XG5jb25zdCBhY3Rpb25FbGVtZW50cyA9IHtcbiAgZmluZE5leHQ6IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaW5kLW5leHQnKSxcbiAgZmluZFByZXZpb3VzOiA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmluZC1wcmV2aW91cycpXG59O1xuY29uc3QgcGFkZGluZ0VsZW1lbnQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFkZGluZycpO1xuXG5mdW5jdGlvbiBzZXRQYWRkaW5nKCk6IHZvaWQge1xuICB0ZXJtLmVsZW1lbnQuc3R5bGUucGFkZGluZyA9IHBhcnNlSW50KHBhZGRpbmdFbGVtZW50LnZhbHVlLCAxMCkudG9TdHJpbmcoKSArICdweCc7XG4gIHRlcm0uZml0KCk7XG59XG5cbmZ1bmN0aW9uIGdldFNlYXJjaE9wdGlvbnMoZTogS2V5Ym9hcmRFdmVudCk6IElTZWFyY2hPcHRpb25zIHtcbiAgcmV0dXJuIHtcbiAgICByZWdleDogKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdleCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQsXG4gICAgd2hvbGVXb3JkOiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dob2xlLXdvcmQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkLFxuICAgIGNhc2VTZW5zaXRpdmU6IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FzZS1zZW5zaXRpdmUnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkLFxuICAgIGluY3JlbWVudGFsOiBlLmtleSAhPT0gYEVudGVyYFxuICB9O1xufVxuXG5jb25zdCBkaXNwb3NlUmVjcmVhdGVCdXR0b25IYW5kbGVyID0gKCkgPT4ge1xuICAvLyBJZiB0aGUgdGVybWluYWwgZXhpc3RzIGRpc3Bvc2Ugb2YgaXQsIG90aGVyd2lzZSByZWNyZWF0ZSBpdFxuICBpZiAodGVybSkge1xuICAgIHRlcm0uZGlzcG9zZSgpO1xuICAgIHRlcm0gPSBudWxsO1xuICAgIHdpbmRvdy50ZXJtID0gbnVsbDtcbiAgICBzb2NrZXQgPSBudWxsO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwb3NlJykuaW5uZXJIVE1MID0gJ1JlY3JlYXRlIFRlcm1pbmFsJztcbiAgfVxuICBlbHNlIHtcbiAgICBjcmVhdGVUZXJtaW5hbCgpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNwb3NlJykuaW5uZXJIVE1MID0gJ0Rpc3Bvc2UgdGVybWluYWwnO1xuICB9XG59O1xuXG5pZiAoZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUgPT09ICcvdGVzdCcpIHtcbiAgd2luZG93LlRlcm1pbmFsID0gVGVybWluYWw7XG4gIHdpbmRvdy5BdHRhY2hBZGRvbiA9IEF0dGFjaEFkZG9uO1xuICB3aW5kb3cuRml0QWRkb24gPSBGaXRBZGRvbjtcbiAgd2luZG93LlNlYXJjaEFkZG9uID0gU2VhcmNoQWRkb247XG4gIHdpbmRvdy5XZWJMaW5rc0FkZG9uID0gV2ViTGlua3NBZGRvbjtcbiAgd2luZG93LldlYmdsQWRkb24gPSBXZWJnbEFkZG9uO1xufSBlbHNlIHtcbiAgY3JlYXRlVGVybWluYWwoKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3Bvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRpc3Bvc2VSZWNyZWF0ZUJ1dHRvbkhhbmRsZXIpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2ViZ2wnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRlcm0ubG9hZEFkZG9uKG5ldyBXZWJnbEFkZG9uKCkpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGVybWluYWwoKTogdm9pZCB7XG4gIC8vIENsZWFuIHRlcm1pbmFsXG4gIHdoaWxlICh0ZXJtaW5hbENvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICB0ZXJtaW5hbENvbnRhaW5lci5yZW1vdmVDaGlsZCh0ZXJtaW5hbENvbnRhaW5lci5jaGlsZHJlblswXSk7XG4gIH1cblxuICBjb25zdCBpc1dpbmRvd3MgPSBbJ1dpbmRvd3MnLCAnV2luMTYnLCAnV2luMzInLCAnV2luQ0UnXS5pbmRleE9mKG5hdmlnYXRvci5wbGF0Zm9ybSkgPj0gMDtcbiAgdGVybSA9IG5ldyBUZXJtaW5hbCh7XG4gICAgd2luZG93c01vZGU6IGlzV2luZG93c1xuICB9IGFzIElUZXJtaW5hbE9wdGlvbnMpO1xuXG4gIC8vIExvYWQgYWRkb25zXG4gIGNvbnN0IHR5cGVkVGVybSA9IHRlcm0gYXMgVGVybWluYWxUeXBlO1xuICB0eXBlZFRlcm0ubG9hZEFkZG9uKG5ldyBXZWJMaW5rc0FkZG9uKCkpO1xuICBzZWFyY2hBZGRvbiA9IG5ldyBTZWFyY2hBZGRvbigpO1xuICB0eXBlZFRlcm0ubG9hZEFkZG9uKHNlYXJjaEFkZG9uKTtcbiAgZml0QWRkb24gPSBuZXcgRml0QWRkb24oKTtcbiAgdHlwZWRUZXJtLmxvYWRBZGRvbihmaXRBZGRvbik7XG5cbiAgd2luZG93LnRlcm0gPSB0ZXJtOyAgLy8gRXhwb3NlIGB0ZXJtYCB0byB3aW5kb3cgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xuICB0ZXJtLm9uUmVzaXplKChzaXplOiB7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0pID0+IHtcbiAgICBpZiAoIXBpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb2xzID0gc2l6ZS5jb2xzO1xuICAgIGNvbnN0IHJvd3MgPSBzaXplLnJvd3M7XG4gICAgY29uc3QgdXJsID0gJy90ZXJtaW5hbHMvJyArIHBpZCArICcvc2l6ZT9jb2xzPScgKyBjb2xzICsgJyZyb3dzPScgKyByb3dzO1xuXG4gICAgZmV0Y2godXJsLCB7bWV0aG9kOiAnUE9TVCd9KTtcbiAgfSk7XG4gIHByb3RvY29sID0gKGxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JykgPyAnd3NzOi8vJyA6ICd3czovLyc7XG4gIHNvY2tldFVSTCA9IHByb3RvY29sICsgbG9jYXRpb24uaG9zdG5hbWUgKyAoKGxvY2F0aW9uLnBvcnQpID8gKCc6JyArIGxvY2F0aW9uLnBvcnQpIDogJycpICsgJy90ZXJtaW5hbHMvJztcblxuICB0ZXJtLm9wZW4odGVybWluYWxDb250YWluZXIpO1xuICBmaXRBZGRvbi5maXQoKTtcbiAgdGVybS5mb2N1cygpO1xuXG4gIGFkZERvbUxpc3RlbmVyKHBhZGRpbmdFbGVtZW50LCAnY2hhbmdlJywgc2V0UGFkZGluZyk7XG5cbiAgYWRkRG9tTGlzdGVuZXIoYWN0aW9uRWxlbWVudHMuZmluZE5leHQsICdrZXl1cCcsIChlKSA9PiB7XG4gICAgc2VhcmNoQWRkb24uZmluZE5leHQoYWN0aW9uRWxlbWVudHMuZmluZE5leHQudmFsdWUsIGdldFNlYXJjaE9wdGlvbnMoZSkpO1xuICB9KTtcblxuICBhZGREb21MaXN0ZW5lcihhY3Rpb25FbGVtZW50cy5maW5kUHJldmlvdXMsICdrZXl1cCcsIChlKSA9PiB7XG4gICAgc2VhcmNoQWRkb24uZmluZFByZXZpb3VzKGFjdGlvbkVsZW1lbnRzLmZpbmRQcmV2aW91cy52YWx1ZSwgZ2V0U2VhcmNoT3B0aW9ucyhlKSk7XG4gIH0pO1xuXG4gIC8vIGZpdCBpcyBjYWxsZWQgd2l0aGluIGEgc2V0VGltZW91dCwgY29scyBhbmQgcm93cyBuZWVkIHRoaXMuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGluaXRPcHRpb25zKHRlcm0pO1xuICAgIC8vIFRPRE86IENsZWFuIHRoaXMgdXAsIG9wdC1jb2xzL3Jvd3MgZG9lc24ndCBleGlzdCBhbnltb3JlXG4gICAgKDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtY29sc2ApKS52YWx1ZSA9IHRlcm0uY29scztcbiAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1yb3dzYCkpLnZhbHVlID0gdGVybS5yb3dzO1xuICAgIHBhZGRpbmdFbGVtZW50LnZhbHVlID0gJzAnO1xuXG4gICAgLy8gU2V0IHRlcm1pbmFsIHNpemUgYWdhaW4gdG8gc2V0IHRoZSBzcGVjaWZpYyBkaW1lbnNpb25zIG9uIHRoZSBkZW1vXG4gICAgdXBkYXRlVGVybWluYWxTaXplKCk7XG5cbiAgICBmZXRjaCgnL3Rlcm1pbmFscz9jb2xzPScgKyB0ZXJtLmNvbHMgKyAnJnJvd3M9JyArIHRlcm0ucm93cywge21ldGhvZDogJ1BPU1QnfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXMudGV4dCgpLnRoZW4oKHByb2Nlc3NJZCkgPT4ge1xuICAgICAgICBwaWQgPSBwcm9jZXNzSWQ7XG4gICAgICAgIHNvY2tldFVSTCArPSBwcm9jZXNzSWQ7XG4gICAgICAgIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoc29ja2V0VVJMKTtcbiAgICAgICAgc29ja2V0Lm9ub3BlbiA9IHJ1blJlYWxUZXJtaW5hbDtcbiAgICAgICAgc29ja2V0Lm9uY2xvc2UgPSBydW5GYWtlVGVybWluYWw7XG4gICAgICAgIHNvY2tldC5vbmVycm9yID0gcnVuRmFrZVRlcm1pbmFsO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sIDApO1xufVxuXG5mdW5jdGlvbiBydW5SZWFsVGVybWluYWwoKTogdm9pZCB7XG4gIC8qKlxuICAgKiBUaGUgZGVtbyBkZWZhdWx0cyB0byBzdHJpbmcgdHJhbnNwb3J0IGJ5IGRlZmF1bHQuXG4gICAqIFRvIHJ1biBpdCB3aXRoIFVURjggYmluYXJ5IHRyYW5zcG9ydCwgc3dhcCBjb21tZW50IG9uXG4gICAqIHRoZSBsaW5lcyBiZWxvdy4gKE11c3QgYWxzbyBiZSBzd2l0Y2hlZCBpbiBzZXJ2ZXIuanMpXG4gICAqL1xuICB0ZXJtLmxvYWRBZGRvbihuZXcgQXR0YWNoQWRkb24oc29ja2V0KSk7XG4gIC8vIHRlcm0ubG9hZEFkZG9uKG5ldyBBdHRhY2hBZGRvbihzb2NrZXQsIHtpbnB1dFV0Zjg6IHRydWV9KSk7XG5cbiAgdGVybS5faW5pdGlhbGl6ZWQgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBydW5GYWtlVGVybWluYWwoKTogdm9pZCB7XG4gIGlmICh0ZXJtLl9pbml0aWFsaXplZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHRlcm0uX2luaXRpYWxpemVkID0gdHJ1ZTtcblxuICB0ZXJtLnByb21wdCA9ICgpID0+IHtcbiAgICB0ZXJtLndyaXRlKCdcXHJcXG4kICcpO1xuICB9O1xuXG4gIHRlcm0ud3JpdGVsbignV2VsY29tZSB0byB4dGVybS5qcycpO1xuICB0ZXJtLndyaXRlbG4oJ1RoaXMgaXMgYSBsb2NhbCB0ZXJtaW5hbCBlbXVsYXRpb24sIHdpdGhvdXQgYSByZWFsIHRlcm1pbmFsIGluIHRoZSBiYWNrLWVuZC4nKTtcbiAgdGVybS53cml0ZWxuKCdUeXBlIHNvbWUga2V5cyBhbmQgY29tbWFuZHMgdG8gcGxheSBhcm91bmQuJyk7XG4gIHRlcm0ud3JpdGVsbignJyk7XG4gIHRlcm0ucHJvbXB0KCk7XG5cbiAgdGVybS5vbktleSgoZTogeyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfSkgPT4ge1xuICAgIGNvbnN0IGV2ID0gZS5kb21FdmVudDtcbiAgICBjb25zdCBwcmludGFibGUgPSAhZXYuYWx0S2V5ICYmICFldi5jdHJsS2V5ICYmICFldi5tZXRhS2V5O1xuXG4gICAgaWYgKGV2LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICB0ZXJtLnByb21wdCgpO1xuICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gOCkge1xuICAgICAvLyBEbyBub3QgZGVsZXRlIHRoZSBwcm9tcHRcbiAgICAgIGlmICh0ZXJtLl9jb3JlLmJ1ZmZlci54ID4gMikge1xuICAgICAgICB0ZXJtLndyaXRlKCdcXGIgXFxiJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwcmludGFibGUpIHtcbiAgICAgIHRlcm0ud3JpdGUoZS5rZXkpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRPcHRpb25zKHRlcm06IFRlcm1pbmFsVHlwZSk6IHZvaWQge1xuICBjb25zdCBibGFja2xpc3RlZE9wdGlvbnMgPSBbXG4gICAgLy8gSW50ZXJuYWwgb25seSBvcHRpb25zXG4gICAgJ2NhbmNlbEV2ZW50cycsXG4gICAgJ2NvbnZlcnRFb2wnLFxuICAgICdoYW5kbGVyJyxcbiAgICAnc2NyZWVuS2V5cycsXG4gICAgJ3Rlcm1OYW1lJyxcbiAgICAndXNlRmxvd0NvbnRyb2wnLFxuICAgIC8vIENvbXBsZXggb3B0aW9uXG4gICAgJ3RoZW1lJ1xuICBdO1xuICBjb25zdCBzdHJpbmdPcHRpb25zID0ge1xuICAgIGJlbGxTb3VuZDogbnVsbCxcbiAgICBiZWxsU3R5bGU6IFsnbm9uZScsICdzb3VuZCddLFxuICAgIGN1cnNvclN0eWxlOiBbJ2Jsb2NrJywgJ3VuZGVybGluZScsICdiYXInXSxcbiAgICBmb250RmFtaWx5OiBudWxsLFxuICAgIGZvbnRXZWlnaHQ6IFsnbm9ybWFsJywgJ2JvbGQnLCAnMTAwJywgJzIwMCcsICczMDAnLCAnNDAwJywgJzUwMCcsICc2MDAnLCAnNzAwJywgJzgwMCcsICc5MDAnXSxcbiAgICBmb250V2VpZ2h0Qm9sZDogWydub3JtYWwnLCAnYm9sZCcsICcxMDAnLCAnMjAwJywgJzMwMCcsICc0MDAnLCAnNTAwJywgJzYwMCcsICc3MDAnLCAnODAwJywgJzkwMCddLFxuICAgIGxvZ0xldmVsOiBbJ2RlYnVnJywgJ2luZm8nLCAnd2FybicsICdlcnJvcicsICdvZmYnXSxcbiAgICByZW5kZXJlclR5cGU6IFsnZG9tJywgJ2NhbnZhcyddLFxuICAgIHdvcmRTZXBhcmF0b3I6IG51bGxcbiAgfTtcbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5rZXlzKCg8YW55PnRlcm0pLl9jb3JlLm9wdGlvbnMpO1xuICBjb25zdCBib29sZWFuT3B0aW9ucyA9IFtdO1xuICBjb25zdCBudW1iZXJPcHRpb25zID0gW107XG4gIG9wdGlvbnMuZmlsdGVyKG8gPT4gYmxhY2tsaXN0ZWRPcHRpb25zLmluZGV4T2YobykgPT09IC0xKS5mb3JFYWNoKG8gPT4ge1xuICAgIHN3aXRjaCAodHlwZW9mIHRlcm0uZ2V0T3B0aW9uKG8pKSB7XG4gICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgYm9vbGVhbk9wdGlvbnMucHVzaChvKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICBudW1iZXJPcHRpb25zLnB1c2gobyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHN0cmluZ09wdGlvbnMpLmluZGV4T2YobykgPT09IC0xKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBVbnJlY29nbml6ZWQgb3B0aW9uOiBcIiR7b31cImApO1xuICAgICAgICB9XG4gICAgfVxuICB9KTtcblxuICBsZXQgaHRtbCA9ICcnO1xuICBodG1sICs9ICc8ZGl2IGNsYXNzPVwib3B0aW9uLWdyb3VwXCI+JztcbiAgYm9vbGVhbk9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwib3B0aW9uXCI+PGxhYmVsPjxpbnB1dCBpZD1cIm9wdC0ke299XCIgdHlwZT1cImNoZWNrYm94XCIgJHt0ZXJtLmdldE9wdGlvbihvKSA/ICdjaGVja2VkJyA6ICcnfS8+ICR7b308L2xhYmVsPjwvZGl2PmA7XG4gIH0pO1xuICBodG1sICs9ICc8L2Rpdj48ZGl2IGNsYXNzPVwib3B0aW9uLWdyb3VwXCI+JztcbiAgbnVtYmVyT3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJvcHRpb25cIj48bGFiZWw+JHtvfSA8aW5wdXQgaWQ9XCJvcHQtJHtvfVwiIHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIiR7dGVybS5nZXRPcHRpb24obyl9XCIgc3RlcD1cIiR7byA9PT0gJ2xpbmVIZWlnaHQnID8gJzAuMScgOiAnMSd9XCIvPjwvbGFiZWw+PC9kaXY+YDtcbiAgfSk7XG4gIGh0bWwgKz0gJzwvZGl2PjxkaXYgY2xhc3M9XCJvcHRpb24tZ3JvdXBcIj4nO1xuICBPYmplY3Qua2V5cyhzdHJpbmdPcHRpb25zKS5mb3JFYWNoKG8gPT4ge1xuICAgIGlmIChzdHJpbmdPcHRpb25zW29dKSB7XG4gICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwib3B0aW9uXCI+PGxhYmVsPiR7b30gPHNlbGVjdCBpZD1cIm9wdC0ke299XCI+JHtzdHJpbmdPcHRpb25zW29dLm1hcCh2ID0+IGA8b3B0aW9uICR7dGVybS5nZXRPcHRpb24obykgPT09IHYgPyAnc2VsZWN0ZWQnIDogJyd9PiR7dn08L29wdGlvbj5gKS5qb2luKCcnKX08L3NlbGVjdD48L2xhYmVsPjwvZGl2PmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJvcHRpb25cIj48bGFiZWw+JHtvfSA8aW5wdXQgaWQ9XCJvcHQtJHtvfVwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCIke3Rlcm0uZ2V0T3B0aW9uKG8pfVwiLz48L2xhYmVsPjwvZGl2PmA7XG4gICAgfVxuICB9KTtcbiAgaHRtbCArPSAnPC9kaXY+JztcblxuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3B0aW9ucy1jb250YWluZXInKTtcbiAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgLy8gQXR0YWNoIGxpc3RlbmVyc1xuICBib29sZWFuT3B0aW9ucy5mb3JFYWNoKG8gPT4ge1xuICAgIGNvbnN0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC0ke299YCk7XG4gICAgYWRkRG9tTGlzdGVuZXIoaW5wdXQsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnY2hhbmdlJywgbywgaW5wdXQuY2hlY2tlZCk7XG4gICAgICB0ZXJtLnNldE9wdGlvbihvLCBpbnB1dC5jaGVja2VkKTtcbiAgICB9KTtcbiAgfSk7XG4gIG51bWJlck9wdGlvbnMuZm9yRWFjaChvID0+IHtcbiAgICBjb25zdCBpbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBvcHQtJHtvfWApO1xuICAgIGFkZERvbUxpc3RlbmVyKGlucHV0LCAnY2hhbmdlJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2NoYW5nZScsIG8sIGlucHV0LnZhbHVlKTtcbiAgICAgIGlmIChvID09PSAnY29scycgfHwgbyA9PT0gJ3Jvd3MnKSB7XG4gICAgICAgIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgICAgfSBlbHNlIGlmIChvID09PSAnbGluZUhlaWdodCcpIHtcbiAgICAgICAgdGVybS5zZXRPcHRpb24obywgcGFyc2VGbG9hdChpbnB1dC52YWx1ZSkpO1xuICAgICAgICB1cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRlcm0uc2V0T3B0aW9uKG8sIHBhcnNlSW50KGlucHV0LnZhbHVlKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBPYmplY3Qua2V5cyhzdHJpbmdPcHRpb25zKS5mb3JFYWNoKG8gPT4ge1xuICAgIGNvbnN0IGlucHV0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC0ke299YCk7XG4gICAgYWRkRG9tTGlzdGVuZXIoaW5wdXQsICdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnY2hhbmdlJywgbywgaW5wdXQudmFsdWUpO1xuICAgICAgdGVybS5zZXRPcHRpb24obywgaW5wdXQudmFsdWUpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRG9tTGlzdGVuZXIoZWxlbWVudDogSFRNTEVsZW1lbnQsIHR5cGU6IHN0cmluZywgaGFuZGxlcjogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkpOiB2b2lkIHtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpO1xuICB0ZXJtLl9jb3JlLnJlZ2lzdGVyKHsgZGlzcG9zZTogKCkgPT4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpIH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gIGNvbnN0IGNvbHMgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1jb2xzYCkpLnZhbHVlLCAxMCk7XG4gIGNvbnN0IHJvd3MgPSBwYXJzZUludCgoPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG9wdC1yb3dzYCkpLnZhbHVlLCAxMCk7XG4gIGNvbnN0IHdpZHRoID0gKGNvbHMgKiB0ZXJtLl9jb3JlLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoICsgdGVybS5fY29yZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aCkudG9TdHJpbmcoKSArICdweCc7XG4gIGNvbnN0IGhlaWdodCA9IChyb3dzICogdGVybS5fY29yZS5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQpLnRvU3RyaW5nKCkgKyAncHgnO1xuICB0ZXJtaW5hbENvbnRhaW5lci5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICB0ZXJtaW5hbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQ7XG4gIGZpdEFkZG9uLmZpdCgpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgKiBhcyBTdHJpbmdzIGZyb20gJy4vYnJvd3Nlci9Mb2NhbGl6YWJsZVN0cmluZ3MnO1xuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBpc01hYyB9IGZyb20gJ2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBSZW5kZXJEZWJvdW5jZXIgfSBmcm9tICdicm93c2VyL1JlbmRlckRlYm91bmNlcic7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIgfSBmcm9tICdicm93c2VyL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBTY3JlZW5EcHJNb25pdG9yIH0gZnJvbSAnYnJvd3Nlci9TY3JlZW5EcHJNb25pdG9yJztcbmltcG9ydCB7IElSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmNvbnN0IE1BWF9ST1dTX1RPX1JFQUQgPSAyMDtcblxuY29uc3QgZW51bSBCb3VuZGFyeVBvc2l0aW9uIHtcbiAgVE9QLFxuICBCT1RUT01cbn1cblxuZXhwb3J0IGNsYXNzIEFjY2Vzc2liaWxpdHlNYW5hZ2VyIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX2FjY2Vzc2liaWxpdHlUcmVlUm9vdDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0VsZW1lbnRzOiBIVE1MRWxlbWVudFtdO1xuICBwcml2YXRlIF9saXZlUmVnaW9uOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfbGl2ZVJlZ2lvbkxpbmVDb3VudDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9yZW5kZXJSb3dzRGVib3VuY2VyOiBSZW5kZXJEZWJvdW5jZXI7XG4gIHByaXZhdGUgX3NjcmVlbkRwck1vbml0b3I6IFNjcmVlbkRwck1vbml0b3I7XG5cbiAgcHJpdmF0ZSBfdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyOiAoZTogRm9jdXNFdmVudCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBfYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyOiAoZTogRm9jdXNFdmVudCkgPT4gdm9pZDtcblxuICAvKipcbiAgICogVGhpcyBxdWV1ZSBoYXMgYSBjaGFyYWN0ZXIgcHVzaGVkIHRvIGl0IGZvciBrZXlzIHRoYXQgYXJlIHByZXNzZWQsIGlmIHRoZVxuICAgKiBuZXh0IGNoYXJhY3RlciBhZGRlZCB0byB0aGUgdGVybWluYWwgaXMgZXF1YWwgdG8gdGhlIGtleSBjaGFyIHRoZW4gaXQgaXNcbiAgICogbm90IGFubm91bmNlZCAoYWRkZWQgdG8gbGl2ZSByZWdpb24pIGJlY2F1c2UgaXQgaGFzIGFscmVhZHkgYmVlbiBhbm5vdW5jZWRcbiAgICogYnkgdGhlIHRleHRhcmVhIGV2ZW50ICh3aGljaCBjYW5ub3QgYmUgY2FuY2VsZWQpLiBUaGVyZSBhcmUgc29tZSByYWNlXG4gICAqIGNvbmRpdGlvbiBjYXNlcyBpZiB0aGVyZSBpcyB0eXBpbmcgd2hpbGUgZGF0YSBpcyBzdHJlYW1pbmcsIGJ1dCB0aGlzIGNvdmVyc1xuICAgKiB0aGUgbWFpbiBjYXNlIG9mIHR5cGluZyBpbnRvIHRoZSBwcm9tcHQgYW5kIGlucHV0dGluZyB0aGUgYW5zd2VyIHRvIGFcbiAgICogcXVlc3Rpb24gKFkvTiwgZXRjLikuXG4gICAqL1xuICBwcml2YXRlIF9jaGFyc1RvQ29uc3VtZTogc3RyaW5nW10gPSBbXTtcblxuICBwcml2YXRlIF9jaGFyc1RvQW5ub3VuY2U6IHN0cmluZyA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Rlcm1pbmFsOiBJVGVybWluYWwsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuY2xhc3NMaXN0LmFkZCgneHRlcm0tYWNjZXNzaWJpbGl0eScpO1xuXG4gICAgdGhpcy5fcm93Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWFjY2Vzc2liaWxpdHktdHJlZScpO1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90ZXJtaW5hbC5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuX3Jvd0VsZW1lbnRzW2ldID0gdGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm93RWxlbWVudHNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciA9IGUgPT4gdGhpcy5fb25Cb3VuZGFyeUZvY3VzKGUsIEJvdW5kYXJ5UG9zaXRpb24uVE9QKTtcbiAgICB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIgPSBlID0+IHRoaXMuX29uQm91bmRhcnlGb2N1cyhlLCBCb3VuZGFyeVBvc2l0aW9uLkJPVFRPTSk7XG4gICAgdGhpcy5fcm93RWxlbWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZCh0aGlzLl9yb3dDb250YWluZXIpO1xuXG4gICAgdGhpcy5fcmVuZGVyUm93c0RlYm91bmNlciA9IG5ldyBSZW5kZXJEZWJvdW5jZXIodGhpcy5fcmVuZGVyUm93cy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLl9yZWZyZXNoUm93cygpO1xuXG4gICAgdGhpcy5fbGl2ZVJlZ2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2xpdmVSZWdpb24uY2xhc3NMaXN0LmFkZCgnbGl2ZS1yZWdpb24nKTtcbiAgICB0aGlzLl9saXZlUmVnaW9uLnNldEF0dHJpYnV0ZSgnYXJpYS1saXZlJywgJ2Fzc2VydGl2ZScpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZCh0aGlzLl9saXZlUmVnaW9uKTtcblxuICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290KTtcblxuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyUm93c0RlYm91bmNlcik7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vblJlc2l6ZShlID0+IHRoaXMuX29uUmVzaXplKGUucm93cykpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uUmVuZGVyKGUgPT4gdGhpcy5fcmVmcmVzaFJvd3MoZS5zdGFydCwgZS5lbmQpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vblNjcm9sbCgoKSA9PiB0aGlzLl9yZWZyZXNoUm93cygpKSk7XG4gICAgLy8gTGluZSBmZWVkIGlzIGFuIGlzc3VlIGFzIHRoZSBwcm9tcHQgd29uJ3QgYmUgcmVhZCBvdXQgYWZ0ZXIgYSBjb21tYW5kIGlzIHJ1blxuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25BMTF5Q2hhcihjaGFyID0+IHRoaXMuX29uQ2hhcihjaGFyKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25MaW5lRmVlZCgoKSA9PiB0aGlzLl9vbkNoYXIoJ1xcbicpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkExMXlUYWIoc3BhY2VDb3VudCA9PiB0aGlzLl9vblRhYihzcGFjZUNvdW50KSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25LZXkoZSA9PiB0aGlzLl9vbktleShlLmtleSkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uQmx1cigoKSA9PiB0aGlzLl9jbGVhckxpdmVSZWdpb24oKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKCkgPT4gdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKTtcblxuICAgIHRoaXMuX3NjcmVlbkRwck1vbml0b3IgPSBuZXcgU2NyZWVuRHByTW9uaXRvcigpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fc2NyZWVuRHByTW9uaXRvcik7XG4gICAgdGhpcy5fc2NyZWVuRHByTW9uaXRvci5zZXRMaXN0ZW5lcigoKSA9PiB0aGlzLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKSk7XG4gICAgLy8gVGhpcyBzaG91bGRuJ3QgYmUgbmVlZGVkIG9uIG1vZGVybiBicm93c2VycyBidXQgaXMgcHJlc2VudCBpbiBjYXNlIHRoZVxuICAgIC8vIG1lZGlhIHF1ZXJ5IHRoYXQgZHJpdmVzIHRoZSBTY3JlZW5EcHJNb25pdG9yIGlzbid0IHN1cHBvcnRlZFxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHdpbmRvdywgJ3Jlc2l6ZScsICgpID0+IHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpKSk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fdGVybWluYWwuZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QpO1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwcml2YXRlIF9vbkJvdW5kYXJ5Rm9jdXMoZTogRm9jdXNFdmVudCwgcG9zaXRpb246IEJvdW5kYXJ5UG9zaXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCBib3VuZGFyeUVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+ZS50YXJnZXQ7XG4gICAgY29uc3QgYmVmb3JlQm91bmRhcnlFbGVtZW50ID0gdGhpcy5fcm93RWxlbWVudHNbcG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QID8gMSA6IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDJdO1xuXG4gICAgLy8gRG9uJ3Qgc2Nyb2xsIGlmIHRoZSBidWZmZXIgdG9wIGhhcyByZWFjaGVkIHRoZSBlbmQgaW4gdGhhdCBkaXJlY3Rpb25cbiAgICBjb25zdCBwb3NJblNldCA9IGJvdW5kYXJ5RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtcG9zaW5zZXQnKTtcbiAgICBjb25zdCBsYXN0Um93UG9zID0gcG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QID8gJzEnIDogYCR7dGhpcy5fdGVybWluYWwuYnVmZmVyLmxpbmVzLmxlbmd0aH1gO1xuICAgIGlmIChwb3NJblNldCA9PT0gbGFzdFJvd1Bvcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IHNjcm9sbCB3aGVuIHRoZSBsYXN0IGZvY3VzZWQgaXRlbSB3YXMgbm90IHRoZSBzZWNvbmQgcm93IChmb2N1cyBpcyBnb2luZyB0aGUgb3RoZXJcbiAgICAvLyBkaXJlY3Rpb24pXG4gICAgaWYgKGUucmVsYXRlZFRhcmdldCAhPT0gYmVmb3JlQm91bmRhcnlFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIG9sZCBib3VuZGFyeSBlbGVtZW50IGZyb20gYXJyYXlcbiAgICBsZXQgdG9wQm91bmRhcnlFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBsZXQgYm90dG9tQm91bmRhcnlFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBpZiAocG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QKSB7XG4gICAgICB0b3BCb3VuZGFyeUVsZW1lbnQgPSBib3VuZGFyeUVsZW1lbnQ7XG4gICAgICBib3R0b21Cb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50cy5wb3AoKSE7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQoYm90dG9tQm91bmRhcnlFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9wQm91bmRhcnlFbGVtZW50ID0gdGhpcy5fcm93RWxlbWVudHMuc2hpZnQoKSE7XG4gICAgICBib3R0b21Cb3VuZGFyeUVsZW1lbnQgPSBib3VuZGFyeUVsZW1lbnQ7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQodG9wQm91bmRhcnlFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgbGlzdGVuZXJzIGZyb20gb2xkIGJvdW5kYXJ5IGVsZW1lbnRzXG4gICAgdG9wQm91bmRhcnlFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcbiAgICBib3R0b21Cb3VuZGFyeUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuXG4gICAgLy8gQWRkIG5ldyBlbGVtZW50IHRvIGFycmF5L0RPTVxuICAgIGlmIChwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1ApIHtcbiAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSB0aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTtcbiAgICAgIHRoaXMuX3Jvd0VsZW1lbnRzLnVuc2hpZnQobmV3RWxlbWVudCk7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbmV3RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSB0aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTtcbiAgICAgIHRoaXMuX3Jvd0VsZW1lbnRzLnB1c2gobmV3RWxlbWVudCk7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3RWxlbWVudCk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGxpc3RlbmVycyB0byBuZXcgYm91bmRhcnkgZWxlbWVudHNcbiAgICB0aGlzLl9yb3dFbGVtZW50c1swXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG4gICAgdGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMV0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuXG4gICAgLy8gU2Nyb2xsIHVwXG4gICAgdGhpcy5fdGVybWluYWwuc2Nyb2xsTGluZXMocG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QID8gLTEgOiAxKTtcblxuICAgIC8vIEZvY3VzIG5ldyBib3VuZGFyeSBiZWZvcmUgZWxlbWVudFxuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3Bvc2l0aW9uID09PSBCb3VuZGFyeVBvc2l0aW9uLlRPUCA/IDEgOiB0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggLSAyXS5mb2N1cygpO1xuXG4gICAgLy8gUHJldmVudCB0aGUgc3RhbmRhcmQgYmVoYXZpb3JcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uUmVzaXplKHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIFJlbW92ZSBib3R0b20gYm91bmRhcnkgbGlzdGVuZXJcbiAgICB0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggLSAxXS5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBHcm93IHJvd3MgYXMgcmVxdWlyZWRcbiAgICBmb3IgKGxldCBpID0gdGhpcy5fcm93Q29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aDsgaSA8IHRoaXMuX3Rlcm1pbmFsLnJvd3M7IGkrKykge1xuICAgICAgdGhpcy5fcm93RWxlbWVudHNbaV0gPSB0aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yb3dFbGVtZW50c1tpXSk7XG4gICAgfVxuICAgIC8vIFNocmluayByb3dzIGFzIHJlcXVpcmVkXG4gICAgd2hpbGUgKHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCA+IHJvd3MpIHtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9yb3dFbGVtZW50cy5wb3AoKSEpO1xuICAgIH1cblxuICAgIC8vIEFkZCBib3R0b20gYm91bmRhcnkgbGlzdGVuZXJcbiAgICB0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggLSAxXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICB0aGlzLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2xpc3RpdGVtJyk7XG4gICAgZWxlbWVudC50YWJJbmRleCA9IC0xO1xuICAgIHRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKGVsZW1lbnQpO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBfb25UYWIoc3BhY2VDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGFjZUNvdW50OyBpKyspIHtcbiAgICAgIHRoaXMuX29uQ2hhcignICcpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uQ2hhcihjaGFyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCA8IE1BWF9ST1dTX1RPX1JFQUQgKyAxKSB7XG4gICAgICBpZiAodGhpcy5fY2hhcnNUb0NvbnN1bWUubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBIYXZlIHRoZSBzY3JlZW4gcmVhZGVyIGlnbm9yZSB0aGUgY2hhciBpZiBpdCB3YXMganVzdCBpbnB1dFxuICAgICAgICBjb25zdCBzaGlmdGVkQ2hhciA9IHRoaXMuX2NoYXJzVG9Db25zdW1lLnNoaWZ0KCk7XG4gICAgICAgIGlmIChzaGlmdGVkQ2hhciAhPT0gY2hhcikge1xuICAgICAgICAgIHRoaXMuX2NoYXJzVG9Bbm5vdW5jZSArPSBjaGFyO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jaGFyc1RvQW5ub3VuY2UgKz0gY2hhcjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICdcXG4nKSB7XG4gICAgICAgIHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQrKztcbiAgICAgICAgaWYgKHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQgPT09IE1BWF9ST1dTX1RPX1JFQUQgKyAxKSB7XG4gICAgICAgICAgdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCArPSBTdHJpbmdzLnRvb011Y2hPdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gT25seSBkZXRhY2gvYXR0YWNoIG9uIG1hYyBhcyBvdGhlcndpc2UgbWVzc2FnZXMgY2FuIGdvIHVuYWNjb3VuY2VkXG4gICAgICBpZiAoaXNNYWMpIHtcbiAgICAgICAgaWYgKHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQgJiYgdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudC5sZW5ndGggPiAwICYmICF0aGlzLl9saXZlUmVnaW9uLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZCh0aGlzLl9saXZlUmVnaW9uKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFyTGl2ZVJlZ2lvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50ID0gJyc7XG4gICAgdGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCA9IDA7XG5cbiAgICAvLyBPbmx5IGRldGFjaC9hdHRhY2ggb24gbWFjIGFzIG90aGVyd2lzZSBtZXNzYWdlcyBjYW4gZ28gdW5hY2NvdW5jZWRcbiAgICBpZiAoaXNNYWMpIHtcbiAgICAgIGlmICh0aGlzLl9saXZlUmVnaW9uLnBhcmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290LnJlbW92ZUNoaWxkKHRoaXMuX2xpdmVSZWdpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uS2V5KGtleUNoYXI6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyTGl2ZVJlZ2lvbigpO1xuICAgIHRoaXMuX2NoYXJzVG9Db25zdW1lLnB1c2goa2V5Q2hhcik7XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoUm93cyhzdGFydD86IG51bWJlciwgZW5kPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyUm93c0RlYm91bmNlci5yZWZyZXNoKHN0YXJ0LCBlbmQsIHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGJ1ZmZlcjogSUJ1ZmZlciA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcjtcbiAgICBjb25zdCBzZXRTaXplID0gYnVmZmVyLmxpbmVzLmxlbmd0aC50b1N0cmluZygpO1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKykge1xuICAgICAgY29uc3QgbGluZURhdGEgPSBidWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGJ1ZmZlci55ZGlzcCArIGksIHRydWUpO1xuICAgICAgY29uc3QgcG9zSW5TZXQgPSAoYnVmZmVyLnlkaXNwICsgaSArIDEpLnRvU3RyaW5nKCk7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcm93RWxlbWVudHNbaV07XG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBpZiAobGluZURhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSAnJm5ic3A7JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbGluZURhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcG9zaW5zZXQnLCBwb3NJblNldCk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXNldHNpemUnLCBzZXRTaXplKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fYW5ub3VuY2VDaGFyYWN0ZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoICE9PSB0aGlzLl90ZXJtaW5hbC5yb3dzKSB7XG4gICAgICB0aGlzLl9vblJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90ZXJtaW5hbC5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKHRoaXMuX3Jvd0VsZW1lbnRzW2ldKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoUm93RGltZW5zaW9ucyhlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHR9cHhgO1xuICB9XG5cbiAgcHJpdmF0ZSBfYW5ub3VuY2VDaGFyYWN0ZXJzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jaGFyc1RvQW5ub3VuY2UubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQgKz0gdGhpcy5fY2hhcnNUb0Fubm91bmNlO1xuICAgIHRoaXMuX2NoYXJzVG9Bbm5vdW5jZSA9ICcnO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElJbnB1dEhhbmRsZXIsIElJbnB1dEhhbmRsaW5nVGVybWluYWwgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IEMwLCBDMSB9IGZyb20gJ2NvbW1vbi9kYXRhL0VzY2FwZVNlcXVlbmNlcyc7XG5pbXBvcnQgeyBDSEFSU0VUUywgREVGQVVMVF9DSEFSU0VUIH0gZnJvbSAnY29tbW9uL2RhdGEvQ2hhcnNldHMnO1xuaW1wb3J0IHsgd2N3aWR0aCB9IGZyb20gJ2NvbW1vbi9DaGFyV2lkdGgnO1xuaW1wb3J0IHsgRXNjYXBlU2VxdWVuY2VQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0VzY2FwZVNlcXVlbmNlUGFyc2VyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gJ2NvbW1vbi9UeXBlZEFycmF5VXRpbHMnO1xuaW1wb3J0IHsgU3RyaW5nVG9VdGYzMiwgc3RyaW5nRnJvbUNvZGVQb2ludCwgdXRmMzJUb1N0cmluZywgVXRmOFRvVXRmMzIgfSBmcm9tICdjb21tb24vaW5wdXQvVGV4dERlY29kZXInO1xuaW1wb3J0IHsgREVGQVVMVF9BVFRSX0RBVEEgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlckxpbmUnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElQYXJzaW5nU3RhdGUsIElEY3NIYW5kbGVyLCBJRXNjYXBlU2VxdWVuY2VQYXJzZXIsIElQYXJhbXMsIElGdW5jdGlvbklkZW50aWZpZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBOVUxMX0NFTExfV0lEVEgsIEF0dHJpYnV0ZXMsIEZnRmxhZ3MsIEJnRmxhZ3MsIENvbnRlbnQgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBJQXR0cmlidXRlRGF0YSwgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUNvcmVTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJTG9nU2VydmljZSwgSURpcnR5Um93U2VydmljZSwgSUNvcmVNb3VzZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgT3NjSGFuZGxlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvT3NjUGFyc2VyJztcbmltcG9ydCB7IERjc0hhbmRsZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0Rjc1BhcnNlcic7XG5cbi8qKlxuICogTWFwIGNvbGxlY3QgdG8gZ2xldmVsLiBVc2VkIGluIGBzZWxlY3RDaGFyc2V0YC5cbiAqL1xuY29uc3QgR0xFVkVMOiB7W2tleTogc3RyaW5nXTogbnVtYmVyfSA9IHsnKCc6IDAsICcpJzogMSwgJyonOiAyLCAnKyc6IDMsICctJzogMSwgJy4nOiAyfTtcblxuXG4vKipcbiAqIERDUyBzdWJwYXJzZXIgaW1wbGVtZW50YXRpb25zXG4gKi9cblxuLyoqXG4gKiBEQ1MgJCBxIFB0IFNUXG4gKiAgIERFQ1JRU1MgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDUlFTUy5odG1sKVxuICogICBSZXF1ZXN0IFN0YXR1cyBTdHJpbmcgKERFQ1JRU1MpLCBWVDQyMCBhbmQgdXAuXG4gKiAgIFJlc3BvbnNlOiBERUNSUFNTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ1JQU1MuaHRtbClcbiAqL1xuY2xhc3MgREVDUlFTUyBpbXBsZW1lbnRzIElEY3NIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfZGF0YTogVWludDMyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoMCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSxcbiAgICBwcml2YXRlIF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZSxcbiAgICBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkgeyB9XG5cbiAgaG9vayhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KDApO1xuICB9XG5cbiAgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RhdGEgPSBjb25jYXQodGhpcy5fZGF0YSwgZGF0YS5zdWJhcnJheShzdGFydCwgZW5kKSk7XG4gIH1cblxuICB1bmhvb2soc3VjY2VzczogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSgwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHV0ZjMyVG9TdHJpbmcodGhpcy5fZGF0YSk7XG4gICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSgwKTtcbiAgICBzd2l0Y2ggKGRhdGEpIHtcbiAgICAgIC8vIHZhbGlkOiBEQ1MgMSAkIHIgUHQgU1QgKHh0ZXJtKVxuICAgICAgY2FzZSAnXCJxJzogLy8gREVDU0NBXG4gICAgICAgIHJldHVybiB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyMFwicSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgIGNhc2UgJ1wicCc6IC8vIERFQ1NDTFxuICAgICAgICByZXR1cm4gdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9UDEkcjYxXCJwJHtDMC5FU0N9XFxcXGApO1xuICAgICAgY2FzZSAncic6IC8vIERFQ1NUQk1cbiAgICAgICAgY29uc3QgcHQgPSAnJyArICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AgKyAxKSArXG4gICAgICAgICAgICAgICAgJzsnICsgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpICsgJ3InO1xuICAgICAgICByZXR1cm4gdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9UDEkciR7cHR9JHtDMC5FU0N9XFxcXGApO1xuICAgICAgY2FzZSAnbSc6IC8vIFNHUlxuICAgICAgICAvLyBUT0RPOiByZXBvcnQgcmVhbCBzZXR0aW5ncyBpbnN0ZWFkIG9mIDBtXG4gICAgICAgIHJldHVybiB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyMG0ke0MwLkVTQ31cXFxcYCk7XG4gICAgICBjYXNlICcgcSc6IC8vIERFQ1NDVVNSXG4gICAgICAgIGNvbnN0IFNUWUxFUzoge1trZXk6IHN0cmluZ106IG51bWJlcn0gPSB7J2Jsb2NrJzogMiwgJ3VuZGVybGluZSc6IDQsICdiYXInOiA2fTtcbiAgICAgICAgbGV0IHN0eWxlID0gU1RZTEVTW3RoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGVdO1xuICAgICAgICBzdHlsZSAtPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rID8gMSA6IDA7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31QMSRyJHtzdHlsZX0gcSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIGludmFsaWQ6IERDUyAwICQgciBQdCBTVCAoeHRlcm0pXG4gICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gRENTICRxICVzJywgZGF0YSk7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVAwJHIke0MwLkVTQ31cXFxcYCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRENTIFBzOyBQc3wgUHQgU1RcbiAqICAgREVDVURLIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ1VESy5odG1sKVxuICogICBub3Qgc3VwcG9ydGVkXG4gKi9cblxuLyoqXG4gKiBEQ1MgKyBxIFB0IFNUICh4dGVybSlcbiAqICAgUmVxdWVzdCBUZXJtaW5mbyBTdHJpbmdcbiAqICAgbm90IGltcGxlbWVudGVkXG4gKi9cblxuLyoqXG4gKiBEQ1MgKyBwIFB0IFNUICh4dGVybSlcbiAqICAgU2V0IFRlcm1pbmZvIERhdGFcbiAqICAgbm90IHN1cHBvcnRlZFxuICovXG5cblxuXG4vKipcbiAqIFRoZSB0ZXJtaW5hbCdzIHN0YW5kYXJkIGltcGxlbWVudGF0aW9uIG9mIElJbnB1dEhhbmRsZXIsIHRoaXMgaGFuZGxlcyBhbGxcbiAqIGlucHV0IGZyb20gdGhlIFBhcnNlci5cbiAqXG4gKiBSZWZlciB0byBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLmh0bWwgdG8gdW5kZXJzdGFuZFxuICogZWFjaCBmdW5jdGlvbidzIGhlYWRlciBjb21tZW50LlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRIYW5kbGVyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElJbnB1dEhhbmRsZXIge1xuICBwcml2YXRlIF9wYXJzZUJ1ZmZlcjogVWludDMyQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoNDA5Nik7XG4gIHByaXZhdGUgX3N0cmluZ0RlY29kZXI6IFN0cmluZ1RvVXRmMzIgPSBuZXcgU3RyaW5nVG9VdGYzMigpO1xuICBwcml2YXRlIF91dGY4RGVjb2RlcjogVXRmOFRvVXRmMzIgPSBuZXcgVXRmOFRvVXRmMzIoKTtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgcHJpdmF0ZSBfb25DdXJzb3JNb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQ3Vyc29yTW92ZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uTGluZUZlZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25MaW5lRmVlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25MaW5lRmVlZC5ldmVudDsgfVxuICBwcml2YXRlIF9vblNjcm9sbCA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX29uU2Nyb2xsLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIF90ZXJtaW5hbDogSUlucHV0SGFuZGxpbmdUZXJtaW5hbCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2RpcnR5Um93U2VydmljZTogSURpcnR5Um93U2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVNb3VzZVNlcnZpY2U6IElDb3JlTW91c2VTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3BhcnNlcjogSUVzY2FwZVNlcXVlbmNlUGFyc2VyID0gbmV3IEVzY2FwZVNlcXVlbmNlUGFyc2VyKCkpXG4gIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9wYXJzZXIpO1xuXG4gICAgLyoqXG4gICAgICogY3VzdG9tIGZhbGxiYWNrIGhhbmRsZXJzXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXJGYWxsYmFjaygoaWRlbnQsIHBhcmFtcykgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBDU0kgY29kZTogJywgeyBpZGVudGlmaWVyOiB0aGlzLl9wYXJzZXIuaWRlbnRUb1N0cmluZyhpZGVudCksIHBhcmFtczogcGFyYW1zLnRvQXJyYXkoKSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlckZhbGxiYWNrKGlkZW50ID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gRVNDIGNvZGU6ICcsIHsgaWRlbnRpZmllcjogdGhpcy5fcGFyc2VyLmlkZW50VG9TdHJpbmcoaWRlbnQpIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrKGNvZGUgPT4ge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBFWEVDVVRFIGNvZGU6ICcsIHsgY29kZSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0T3NjSGFuZGxlckZhbGxiYWNrKChpZGVudGlmaWVyLCBhY3Rpb24sIGRhdGEpID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gT1NDIGNvZGU6ICcsIHsgaWRlbnRpZmllciwgYWN0aW9uLCBkYXRhIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX3BhcnNlci5zZXREY3NIYW5kbGVyRmFsbGJhY2soKGlkZW50LCBhY3Rpb24sIHBheWxvYWQpID0+IHtcbiAgICAgIGlmIChhY3Rpb24gPT09ICdIT09LJykge1xuICAgICAgICBwYXlsb2FkID0gcGF5bG9hZC50b0FycmF5KCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIERDUyBjb2RlOiAnLCB7IGlkZW50aWZpZXI6IHRoaXMuX3BhcnNlci5pZGVudFRvU3RyaW5nKGlkZW50KSwgYWN0aW9uLCBwYXlsb2FkIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogcHJpbnQgaGFuZGxlclxuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRQcmludEhhbmRsZXIoKGRhdGEsIHN0YXJ0LCBlbmQpID0+IHRoaXMucHJpbnQoZGF0YSwgc3RhcnQsIGVuZCkpO1xuXG4gICAgLyoqXG4gICAgICogQ1NJIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdAJ30sIHBhcmFtcyA9PiB0aGlzLmluc2VydENoYXJzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0EnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yVXAocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnQid9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JEb3duKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0MnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yRm9yd2FyZChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdEJ30sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckJhY2t3YXJkKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0UnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yTmV4dExpbmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnRid9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JQcmVjZWRpbmdMaW5lKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0cnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yQ2hhckFic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0gnfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yUG9zaXRpb24ocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnSSd9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JGb3J3YXJkVGFiKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ0onfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VJbkRpc3BsYXkocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe3ByZWZpeDogJz8nLCBmaW5hbDogJ0onfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VJbkRpc3BsYXkocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnSyd9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluTGluZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7cHJlZml4OiAnPycsIGZpbmFsOiAnSyd9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluTGluZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdMJ30sIHBhcmFtcyA9PiB0aGlzLmluc2VydExpbmVzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ00nfSwgcGFyYW1zID0+IHRoaXMuZGVsZXRlTGluZXMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnUCd9LCBwYXJhbXMgPT4gdGhpcy5kZWxldGVDaGFycyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdTJ30sIHBhcmFtcyA9PiB0aGlzLnNjcm9sbFVwKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ1QnfSwgcGFyYW1zID0+IHRoaXMuc2Nyb2xsRG93bihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdYJ30sIHBhcmFtcyA9PiB0aGlzLmVyYXNlQ2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnWid9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JCYWNrd2FyZFRhYihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdgJ30sIHBhcmFtcyA9PiB0aGlzLmNoYXJQb3NBYnNvbHV0ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICdhJ30sIHBhcmFtcyA9PiB0aGlzLmhQb3NpdGlvblJlbGF0aXZlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2InfSwgcGFyYW1zID0+IHRoaXMucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2MnfSwgcGFyYW1zID0+IHRoaXMuc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtwcmVmaXg6ICc+JywgZmluYWw6ICdjJ30sIHBhcmFtcyA9PiB0aGlzLnNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2QnfSwgcGFyYW1zID0+IHRoaXMubGluZVBvc0Fic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2UnfSwgcGFyYW1zID0+IHRoaXMudlBvc2l0aW9uUmVsYXRpdmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnZid9LCBwYXJhbXMgPT4gdGhpcy5oVlBvc2l0aW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2cnfSwgcGFyYW1zID0+IHRoaXMudGFiQ2xlYXIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnaCd9LCBwYXJhbXMgPT4gdGhpcy5zZXRNb2RlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtwcmVmaXg6ICc/JywgZmluYWw6ICdoJ30sIHBhcmFtcyA9PiB0aGlzLnNldE1vZGVQcml2YXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ2wnfSwgcGFyYW1zID0+IHRoaXMucmVzZXRNb2RlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtwcmVmaXg6ICc/JywgZmluYWw6ICdsJ30sIHBhcmFtcyA9PiB0aGlzLnJlc2V0TW9kZVByaXZhdGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ZpbmFsOiAnbSd9LCBwYXJhbXMgPT4gdGhpcy5jaGFyQXR0cmlidXRlcyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICduJ30sIHBhcmFtcyA9PiB0aGlzLmRldmljZVN0YXR1cyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7cHJlZml4OiAnPycsIGZpbmFsOiAnbid9LCBwYXJhbXMgPT4gdGhpcy5kZXZpY2VTdGF0dXNQcml2YXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiAnIScsIGZpbmFsOiAncCd9LCBwYXJhbXMgPT4gdGhpcy5zb2Z0UmVzZXQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldENzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcgJywgZmluYWw6ICdxJ30sIHBhcmFtcyA9PiB0aGlzLnNldEN1cnNvclN0eWxlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ3InfSwgcGFyYW1zID0+IHRoaXMuc2V0U2Nyb2xsUmVnaW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyKHtmaW5hbDogJ3MnfSwgcGFyYW1zID0+IHRoaXMuc2F2ZUN1cnNvcihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0Q3NpSGFuZGxlcih7ZmluYWw6ICd1J30sIHBhcmFtcyA9PiB0aGlzLnJlc3RvcmVDdXJzb3IocGFyYW1zKSk7XG5cbiAgICAvKipcbiAgICAgKiBleGVjdXRlIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuQkVMLCAoKSA9PiB0aGlzLmJlbGwoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkxGLCAoKSA9PiB0aGlzLmxpbmVGZWVkKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5WVCwgKCkgPT4gdGhpcy5saW5lRmVlZCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuRkYsICgpID0+IHRoaXMubGluZUZlZWQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkNSLCAoKSA9PiB0aGlzLmNhcnJpYWdlUmV0dXJuKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5CUywgKCkgPT4gdGhpcy5iYWNrc3BhY2UoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkhULCAoKSA9PiB0aGlzLnRhYigpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuU08sICgpID0+IHRoaXMuc2hpZnRPdXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLlNJLCAoKSA9PiB0aGlzLnNoaWZ0SW4oKSk7XG4gICAgLy8gRklYTUU6ICAgV2hhdCBkbyB0byB3aXRoIG1pc3Npbmc/IE9sZCBjb2RlIGp1c3QgYWRkZWQgdGhvc2UgdG8gcHJpbnQuXG5cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzEuSU5ELCAoKSA9PiB0aGlzLmluZGV4KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMS5ORUwsICgpID0+IHRoaXMubmV4dExpbmUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMxLkhUUywgKCkgPT4gdGhpcy50YWJTZXQoKSk7XG5cbiAgICAvKipcbiAgICAgKiBPU0MgaGFuZGxlclxuICAgICAqL1xuICAgIC8vICAgMCAtIGljb24gbmFtZSArIHRpdGxlXG4gICAgdGhpcy5fcGFyc2VyLnNldE9zY0hhbmRsZXIoMCwgbmV3IE9zY0hhbmRsZXIoKGRhdGE6IHN0cmluZykgPT4gdGhpcy5zZXRUaXRsZShkYXRhKSkpO1xuICAgIC8vICAgMSAtIGljb24gbmFtZVxuICAgIC8vICAgMiAtIHRpdGxlXG4gICAgdGhpcy5fcGFyc2VyLnNldE9zY0hhbmRsZXIoMiwgbmV3IE9zY0hhbmRsZXIoKGRhdGE6IHN0cmluZykgPT4gdGhpcy5zZXRUaXRsZShkYXRhKSkpO1xuICAgIC8vICAgMyAtIHNldCBwcm9wZXJ0eSBYIGluIHRoZSBmb3JtIFwicHJvcD12YWx1ZVwiXG4gICAgLy8gICA0IC0gQ2hhbmdlIENvbG9yIE51bWJlclxuICAgIC8vICAgNSAtIENoYW5nZSBTcGVjaWFsIENvbG9yIE51bWJlclxuICAgIC8vICAgNiAtIEVuYWJsZS9kaXNhYmxlIFNwZWNpYWwgQ29sb3IgTnVtYmVyIGNcbiAgICAvLyAgIDcgLSBjdXJyZW50IGRpcmVjdG9yeT8gKG5vdCBpbiB4dGVybSBzcGVjLCBzZWUgaHR0cHM6Ly9naXRsYWIuY29tL2duYWNobWFuL2l0ZXJtMi9pc3N1ZXMvMzkzOSlcbiAgICAvLyAgMTAgLSBDaGFuZ2UgVlQxMDAgdGV4dCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxMSAtIENoYW5nZSBWVDEwMCB0ZXh0IGJhY2tncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDEyIC0gQ2hhbmdlIHRleHQgY3Vyc29yIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxMyAtIENoYW5nZSBtb3VzZSBmb3JlZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNCAtIENoYW5nZSBtb3VzZSBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNSAtIENoYW5nZSBUZWt0cm9uaXggZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTYgLSBDaGFuZ2UgVGVrdHJvbml4IGJhY2tncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDE3IC0gQ2hhbmdlIGhpZ2hsaWdodCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxOCAtIENoYW5nZSBUZWt0cm9uaXggY3Vyc29yIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxOSAtIENoYW5nZSBoaWdobGlnaHQgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgNDYgLSBDaGFuZ2UgTG9nIEZpbGUgdG8gUHQuXG4gICAgLy8gIDUwIC0gU2V0IEZvbnQgdG8gUHQuXG4gICAgLy8gIDUxIC0gcmVzZXJ2ZWQgZm9yIEVtYWNzIHNoZWxsLlxuICAgIC8vICA1MiAtIE1hbmlwdWxhdGUgU2VsZWN0aW9uIERhdGEuXG4gICAgLy8gMTA0IDsgYyAtIFJlc2V0IENvbG9yIE51bWJlciBjLlxuICAgIC8vIDEwNSA7IGMgLSBSZXNldCBTcGVjaWFsIENvbG9yIE51bWJlciBjLlxuICAgIC8vIDEwNiA7IGM7IGYgLSBFbmFibGUvZGlzYWJsZSBTcGVjaWFsIENvbG9yIE51bWJlciBjLlxuICAgIC8vIDExMCAtIFJlc2V0IFZUMTAwIHRleHQgZm9yZWdyb3VuZCBjb2xvci5cbiAgICAvLyAxMTEgLSBSZXNldCBWVDEwMCB0ZXh0IGJhY2tncm91bmQgY29sb3IuXG4gICAgLy8gMTEyIC0gUmVzZXQgdGV4dCBjdXJzb3IgY29sb3IuXG4gICAgLy8gMTEzIC0gUmVzZXQgbW91c2UgZm9yZWdyb3VuZCBjb2xvci5cbiAgICAvLyAxMTQgLSBSZXNldCBtb3VzZSBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgIC8vIDExNSAtIFJlc2V0IFRla3Ryb25peCBmb3JlZ3JvdW5kIGNvbG9yLlxuICAgIC8vIDExNiAtIFJlc2V0IFRla3Ryb25peCBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgIC8vIDExNyAtIFJlc2V0IGhpZ2hsaWdodCBjb2xvci5cbiAgICAvLyAxMTggLSBSZXNldCBUZWt0cm9uaXggY3Vyc29yIGNvbG9yLlxuICAgIC8vIDExOSAtIFJlc2V0IGhpZ2hsaWdodCBmb3JlZ3JvdW5kIGNvbG9yLlxuXG4gICAgLyoqXG4gICAgICogRVNDIGhhbmRsZXJzXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnNyd9LCAoKSA9PiB0aGlzLnNhdmVDdXJzb3IoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnOCd9LCAoKSA9PiB0aGlzLnJlc3RvcmVDdXJzb3IoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnRCd9LCAoKSA9PiB0aGlzLmluZGV4KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ0UnfSwgKCkgPT4gdGhpcy5uZXh0TGluZSgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7ZmluYWw6ICdIJ30sICgpID0+IHRoaXMudGFiU2V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ00nfSwgKCkgPT4gdGhpcy5yZXZlcnNlSW5kZXgoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnPSd9LCAoKSA9PiB0aGlzLmtleXBhZEFwcGxpY2F0aW9uTW9kZSgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXNjSGFuZGxlcih7ZmluYWw6ICc+J30sICgpID0+IHRoaXMua2V5cGFkTnVtZXJpY01vZGUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnYyd9LCAoKSA9PiB0aGlzLnJlc2V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ24nfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMikpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ28nfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ3wnfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMykpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ30nfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMikpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtmaW5hbDogJ34nfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMSkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiAnJScsIGZpbmFsOiAnQCd9LCAoKSA9PiB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiAnJScsIGZpbmFsOiAnRyd9LCAoKSA9PiB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCkpO1xuICAgIGZvciAoY29uc3QgZmxhZyBpbiBDSEFSU0VUUykge1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcoJywgZmluYWw6IGZsYWd9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJygnICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcpJywgZmluYWw6IGZsYWd9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJyknICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcqJywgZmluYWw6IGZsYWd9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJyonICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcrJywgZmluYWw6IGZsYWd9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJysnICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICctJywgZmluYWw6IGZsYWd9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJy0nICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcuJywgZmluYWw6IGZsYWd9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJy4nICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICcvJywgZmluYWw6IGZsYWd9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJy8nICsgZmxhZykpOyAvLyBUT0RPOiBzdXBwb3J0ZWQ/XG4gICAgfVxuICAgIHRoaXMuX3BhcnNlci5zZXRFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiAnIycsIGZpbmFsOiAnOCd9LCAoKSA9PiB0aGlzLnNjcmVlbkFsaWdubWVudFBhdHRlcm4oKSk7XG5cbiAgICAvKipcbiAgICAgKiBlcnJvciBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldEVycm9ySGFuZGxlcigoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZXJyb3IoJ1BhcnNpbmcgZXJyb3I6ICcsIHN0YXRlKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIERDUyBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldERjc0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6ICckJywgZmluYWw6ICdxJ30sIG5ldyBERUNSUVNTKHRoaXMuX2J1ZmZlclNlcnZpY2UsIHRoaXMuX2NvcmVTZXJ2aWNlLCB0aGlzLl9sb2dTZXJ2aWNlLCB0aGlzLl9vcHRpb25zU2VydmljZSkpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHBhcnNlKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIGxldCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBjb25zdCBjdXJzb3JTdGFydFggPSBidWZmZXIueDtcbiAgICBjb25zdCBjdXJzb3JTdGFydFkgPSBidWZmZXIueTtcblxuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ3BhcnNpbmcgZGF0YScsIGRhdGEpO1xuXG4gICAgaWYgKHRoaXMuX3BhcnNlQnVmZmVyLmxlbmd0aCA8IGRhdGEubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9wYXJzZUJ1ZmZlciA9IG5ldyBVaW50MzJBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgfVxuICAgIHRoaXMuX3BhcnNlci5wYXJzZSh0aGlzLl9wYXJzZUJ1ZmZlciwgdGhpcy5fc3RyaW5nRGVjb2Rlci5kZWNvZGUoZGF0YSwgdGhpcy5fcGFyc2VCdWZmZXIpKTtcblxuICAgIGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueCAhPT0gY3Vyc29yU3RhcnRYIHx8IGJ1ZmZlci55ICE9PSBjdXJzb3JTdGFydFkpIHtcbiAgICAgIHRoaXMuX29uQ3Vyc29yTW92ZS5maXJlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHBhcnNlVXRmOChkYXRhOiBVaW50OEFycmF5KTogdm9pZCB7XG4gICAgbGV0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGNvbnN0IGN1cnNvclN0YXJ0WCA9IGJ1ZmZlci54O1xuICAgIGNvbnN0IGN1cnNvclN0YXJ0WSA9IGJ1ZmZlci55O1xuXG4gICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygncGFyc2luZyBkYXRhJywgZGF0YSk7XG5cbiAgICBpZiAodGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoIDwgZGF0YS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3BhcnNlQnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICB9XG4gICAgdGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLCB0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUoZGF0YSwgdGhpcy5fcGFyc2VCdWZmZXIpKTtcblxuICAgIGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueCAhPT0gY3Vyc29yU3RhcnRYIHx8IGJ1ZmZlci55ICE9PSBjdXJzb3JTdGFydFkpIHtcbiAgICAgIHRoaXMuX29uQ3Vyc29yTW92ZS5maXJlKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHByaW50KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBjb2RlOiBudW1iZXI7XG4gICAgbGV0IGNoV2lkdGg6IG51bWJlcjtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBjb25zdCBjaGFyc2V0ID0gdGhpcy5fdGVybWluYWwuY2hhcnNldDtcbiAgICBjb25zdCBzY3JlZW5SZWFkZXJNb2RlID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlO1xuICAgIGNvbnN0IGNvbHMgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgY29uc3Qgd3JhcGFyb3VuZE1vZGUgPSB0aGlzLl90ZXJtaW5hbC53cmFwYXJvdW5kTW9kZTtcbiAgICBjb25zdCBpbnNlcnRNb2RlID0gdGhpcy5fdGVybWluYWwuaW5zZXJ0TW9kZTtcbiAgICBjb25zdCBjdXJBdHRyID0gdGhpcy5fdGVybWluYWwuY3VyQXR0ckRhdGE7XG4gICAgbGV0IGJ1ZmZlclJvdyA9IGJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyLnkgKyBidWZmZXIueWJhc2UpO1xuXG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShidWZmZXIueSk7XG4gICAgZm9yIChsZXQgcG9zID0gc3RhcnQ7IHBvcyA8IGVuZDsgKytwb3MpIHtcbiAgICAgIGNvZGUgPSBkYXRhW3Bvc107XG5cbiAgICAgIC8vIGNhbGN1bGF0ZSBwcmludCBzcGFjZVxuICAgICAgLy8gZXhwZW5zaXZlIGNhbGwsIHRoZXJlZm9yZSB3ZSBzYXZlIHdpZHRoIGluIGxpbmUgYnVmZmVyXG4gICAgICBjaFdpZHRoID0gd2N3aWR0aChjb2RlKTtcblxuICAgICAgLy8gZ2V0IGNoYXJzZXQgcmVwbGFjZW1lbnQgY2hhcmFjdGVyXG4gICAgICAvLyBjaGFyc2V0IGlzIG9ubHkgZGVmaW5lZCBmb3IgQVNDSUksIHRoZXJlZm9yZSB3ZSBvbmx5XG4gICAgICAvLyBzZWFyY2ggZm9yIGFuIHJlcGxhY2VtZW50IGNoYXIgaWYgY29kZSA8IDEyN1xuICAgICAgaWYgKGNvZGUgPCAxMjcgJiYgY2hhcnNldCkge1xuICAgICAgICBjb25zdCBjaCA9IGNoYXJzZXRbU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKV07XG4gICAgICAgIGlmIChjaCkge1xuICAgICAgICAgIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICAgIHRoaXMuX3Rlcm1pbmFsLm9uQTExeUNoYXJFbWl0dGVyLmZpcmUoc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGluc2VydCBjb21iaW5pbmcgY2hhciBhdCBsYXN0IGN1cnNvciBwb3NpdGlvblxuICAgICAgLy8gRklYTUU6IG5lZWRzIGhhbmRsaW5nIGFmdGVyIGN1cnNvciBqdW1wc1xuICAgICAgLy8gYnVmZmVyLnggc2hvdWxkIG5ldmVyIGJlIDAgZm9yIGEgY29tYmluaW5nIGNoYXJcbiAgICAgIC8vIHNpbmNlIHRoZXkgYWx3YXlzIGZvbGxvdyBhIGNlbGwgY29uc3VtaW5nIGNoYXJcbiAgICAgIC8vIHRoZXJlZm9yZSB3ZSBjYW4gdGVzdCBmb3IgYnVmZmVyLnggdG8gYXZvaWQgb3ZlcmZsb3cgbGVmdFxuICAgICAgaWYgKCFjaFdpZHRoICYmIGJ1ZmZlci54KSB7XG4gICAgICAgIGlmICghYnVmZmVyUm93LmdldFdpZHRoKGJ1ZmZlci54IC0gMSkpIHtcbiAgICAgICAgICAvLyBmb3VuZCBlbXB0eSBjZWxsIGFmdGVyIGZ1bGx3aWR0aCwgbmVlZCB0byBnbyAyIGNlbGxzIGJhY2tcbiAgICAgICAgICAvLyBpdCBpcyBzYXZlIHRvIHN0ZXAgMiBjZWxscyBiYWNrIGhlcmVcbiAgICAgICAgICAvLyBzaW5jZSBhbiBlbXB0eSBjZWxsIGlzIG9ubHkgc2V0IGJ5IGZ1bGx3aWR0aCBjaGFyc1xuICAgICAgICAgIGJ1ZmZlclJvdy5hZGRDb2RlcG9pbnRUb0NlbGwoYnVmZmVyLnggLSAyLCBjb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBidWZmZXJSb3cuYWRkQ29kZXBvaW50VG9DZWxsKGJ1ZmZlci54IC0gMSwgY29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGdvdG8gbmV4dCBsaW5lIGlmIGNoIHdvdWxkIG92ZXJmbG93XG4gICAgICAvLyBUT0RPOiBuZWVkcyBhIGdsb2JhbCBtaW4gdGVybWluYWwgd2lkdGggb2YgMlxuICAgICAgLy8gRklYTUU6IGFkZGl0aW9uYWxseSBlbnN1cmUgY2hXaWR0aCBmaXRzIGludG8gYSBsaW5lXG4gICAgICAvLyAgIC0tPiAgbWF5YmUgZm9yYmlkIGNvbHM8eHkgYXQgaGlnaGVyIGxldmVsIGFzIGl0IHdvdWxkXG4gICAgICAvLyAgICAgICAgaW50cm9kdWNlIGEgYmFkIHJ1bnRpbWUgcGVuYWx0eSBoZXJlXG4gICAgICBpZiAoYnVmZmVyLnggKyBjaFdpZHRoIC0gMSA+PSBjb2xzKSB7XG4gICAgICAgIC8vIGF1dG93cmFwIC0gREVDQVdNXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgd3JhcHMgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCBsaW5lXG4gICAgICAgIGlmICh3cmFwYXJvdW5kTW9kZSkge1xuICAgICAgICAgIGJ1ZmZlci54ID0gMDtcbiAgICAgICAgICBidWZmZXIueSsrO1xuICAgICAgICAgIGlmIChidWZmZXIueSA9PT0gYnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpIHtcbiAgICAgICAgICAgIGJ1ZmZlci55LS07XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zY3JvbGwodHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChidWZmZXIueSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgICAgICAgICAgYnVmZmVyLnkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIGxpbmUgYWxyZWFkeSBleGlzdHMgKGVnLiB0aGUgaW5pdGlhbCB2aWV3cG9ydCksIG1hcmsgaXQgYXMgYVxuICAgICAgICAgICAgLy8gd3JhcHBlZCBsaW5lXG4gICAgICAgICAgICBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55KS5pc1dyYXBwZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyByb3cgY2hhbmdlZCwgZ2V0IGl0IGFnYWluXG4gICAgICAgICAgYnVmZmVyUm93ID0gYnVmZmVyLmxpbmVzLmdldChidWZmZXIueSArIGJ1ZmZlci55YmFzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZmVyLnggPSBjb2xzIC0gMTtcbiAgICAgICAgICBpZiAoY2hXaWR0aCA9PT0gMikge1xuICAgICAgICAgICAgLy8gRklYTUU6IGNoZWNrIGZvciB4dGVybSBiZWhhdmlvclxuICAgICAgICAgICAgLy8gV2hhdCB0byBkbyBoZXJlPyBXZSBnb3QgYSB3aWRlIGNoYXIgdGhhdCBkb2VzIG5vdCBmaXQgaW50byBsYXN0IGNlbGxcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpbnNlcnQgbW9kZTogbW92ZSBjaGFyYWN0ZXJzIHRvIHJpZ2h0XG4gICAgICBpZiAoaW5zZXJ0TW9kZSkge1xuICAgICAgICAvLyByaWdodCBzaGlmdCBjZWxscyBhY2NvcmRpbmcgdG8gdGhlIHdpZHRoXG4gICAgICAgIGJ1ZmZlclJvdy5pbnNlcnRDZWxscyhidWZmZXIueCwgY2hXaWR0aCwgYnVmZmVyLmdldE51bGxDZWxsKGN1ckF0dHIpKTtcbiAgICAgICAgLy8gdGVzdCBsYXN0IGNlbGwgLSBzaW5jZSB0aGUgbGFzdCBjZWxsIGhhcyBvbmx5IHJvb20gZm9yXG4gICAgICAgIC8vIGEgaGFsZndpZHRoIGNoYXIgYW55IGZ1bGx3aWR0aCBzaGlmdGVkIHRoZXJlIGlzIGxvc3RcbiAgICAgICAgLy8gYW5kIHdpbGwgYmUgc2V0IHRvIGVtcHR5IGNlbGxcbiAgICAgICAgaWYgKGJ1ZmZlclJvdy5nZXRXaWR0aChjb2xzIC0gMSkgPT09IDIpIHtcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoY29scyAtIDEsIE5VTExfQ0VMTF9DT0RFLCBOVUxMX0NFTExfV0lEVEgsIGN1ckF0dHIuZmcsIGN1ckF0dHIuYmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdyaXRlIGN1cnJlbnQgY2hhciB0byBidWZmZXIgYW5kIGFkdmFuY2UgY3Vyc29yXG4gICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLngrKywgY29kZSwgY2hXaWR0aCwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZyk7XG5cbiAgICAgIC8vIGZ1bGx3aWR0aCBjaGFyIC0gYWxzbyBzZXQgbmV4dCBjZWxsIHRvIHBsYWNlaG9sZGVyIHN0dWIgYW5kIGFkdmFuY2UgY3Vyc29yXG4gICAgICAvLyBmb3IgZ3JhcGhlbWVzIGJpZ2dlciB0aGFuIGZ1bGx3aWR0aCB3ZSBjYW4gc2ltcGx5IGxvb3AgdG8gemVyb1xuICAgICAgLy8gd2UgYWxyZWFkeSBtYWRlIHN1cmUgYWJvdmUsIHRoYXQgYnVmZmVyLnggKyBjaFdpZHRoIHdpbGwgbm90IG92ZXJmbG93IHJpZ2h0XG4gICAgICBpZiAoY2hXaWR0aCA+IDApIHtcbiAgICAgICAgd2hpbGUgKC0tY2hXaWR0aCkge1xuICAgICAgICAgIC8vIG90aGVyIHRoYW4gYSByZWd1bGFyIGVtcHR5IGNlbGwgYSBjZWxsIGZvbGxvd2luZyBhIHdpZGUgY2hhciBoYXMgbm8gd2lkdGhcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYnVmZmVyLngrKywgMCwgMCwgY3VyQXR0ci5mZywgY3VyQXR0ci5iZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gc3RvcmUgbGFzdCBjaGFyIGluIFBhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQgZm9yIFJFUCB0byB3b3JrIGNvcnJlY3RseVxuICAgIC8vIFRoaXMgbmVlZHMgdG8gY2hlY2sgd2hldGhlcjpcbiAgICAvLyAgLSBmdWxsd2lkdGggKyBzdXJyb2dhdGVzOiByZXNldFxuICAgIC8vICAtIGNvbWJpbmluZzogb25seSBiYXNlIGNoYXIgZ2V0cyBjYXJyaWVkIG9uIChidWcgaW4geHRlcm0/KVxuICAgIGlmIChlbmQpIHtcbiAgICAgIGJ1ZmZlclJvdy5sb2FkQ2VsbChidWZmZXIueCAtIDEsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAyIHx8IHRoaXMuX3dvcmtDZWxsLmdldENvZGUoKSA+IDB4RkZGRikge1xuICAgICAgICB0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50ID0gMDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd29ya0NlbGwuaXNDb21iaW5lZCgpKSB7XG4gICAgICAgIHRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQgPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmNoYXJDb2RlQXQoMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50ID0gdGhpcy5fd29ya0NlbGwuY29udGVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShidWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogRm9yd2FyZCBhZGRDc2lIYW5kbGVyIGZyb20gcGFyc2VyLlxuICAgKi9cbiAgcHVibGljIGFkZENzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAocGFyYW1zOiBJUGFyYW1zKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9wYXJzZXIuYWRkQ3NpSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgYWRkRGNzSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyBhZGREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZywgcGFyYW06IElQYXJhbXMpID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5hZGREY3NIYW5kbGVyKGlkLCBuZXcgRGNzSGFuZGxlcihjYWxsYmFjaykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgYWRkRXNjSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyBhZGRFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKCkgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLmFkZEVzY0hhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIGFkZE9zY0hhbmRsZXIgZnJvbSBwYXJzZXIuXG4gICAqL1xuICBwdWJsaWMgYWRkT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLmFkZE9zY0hhbmRsZXIoaWRlbnQsIG5ldyBPc2NIYW5kbGVyKGNhbGxiYWNrKSk7XG4gIH1cblxuICAvKipcbiAgICogQkVMXG4gICAqIEJlbGwgKEN0cmwtRykuXG4gICAqL1xuICBwdWJsaWMgYmVsbCgpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5iZWxsKCk7XG4gIH1cblxuICAvKipcbiAgICogTEZcbiAgICogTGluZSBGZWVkIG9yIE5ldyBMaW5lIChOTCkuICAoTEYgIGlzIEN0cmwtSikuXG4gICAqL1xuICBwdWJsaWMgbGluZUZlZWQoKTogdm9pZCB7XG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmNvbnZlcnRFb2wpIHtcbiAgICAgIGJ1ZmZlci54ID0gMDtcbiAgICB9XG4gICAgYnVmZmVyLnkrKztcbiAgICBpZiAoYnVmZmVyLnkgPT09IGJ1ZmZlci5zY3JvbGxCb3R0b20gKyAxKSB7XG4gICAgICBidWZmZXIueS0tO1xuICAgICAgdGhpcy5fdGVybWluYWwuc2Nyb2xsKCk7XG4gICAgfSBlbHNlIGlmIChidWZmZXIueSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIGJ1ZmZlci55ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB9XG4gICAgLy8gSWYgdGhlIGVuZCBvZiB0aGUgbGluZSBpcyBoaXQsIHByZXZlbnQgdGhpcyBhY3Rpb24gZnJvbSB3cmFwcGluZyBhcm91bmQgdG8gdGhlIG5leHQgbGluZS5cbiAgICBpZiAoYnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICBidWZmZXIueC0tO1xuICAgIH1cblxuICAgIHRoaXMuX29uTGluZUZlZWQuZmlyZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENSXG4gICAqIENhcnJpYWdlIFJldHVybiAoQ3RybC1NKS5cbiAgICovXG4gIHB1YmxpYyBjYXJyaWFnZVJldHVybigpOiB2b2lkIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCU1xuICAgKiBCYWNrc3BhY2UgKEN0cmwtSCkuXG4gICAqL1xuICBwdWJsaWMgYmFja3NwYWNlKCk6IHZvaWQge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPiAwKSB7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LS07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRBQlxuICAgKiBIb3Jpem9udGFsIFRhYiAoSFQpIChDdHJsLUkpLlxuICAgKi9cbiAgcHVibGljIHRhYigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luYWxYID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubmV4dFN0b3AoKTtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5vbkExMXlUYWJFbWl0dGVyLmZpcmUodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCAtIG9yaWdpbmFsWCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNPXG4gICAqIFNoaWZ0IE91dCAoQ3RybC1OKSAtPiBTd2l0Y2ggdG8gQWx0ZXJuYXRlIENoYXJhY3RlciBTZXQuICBUaGlzIGludm9rZXMgdGhlXG4gICAqIEcxIGNoYXJhY3RlciBzZXQuXG4gICAqL1xuICBwdWJsaWMgc2hpZnRPdXQoKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuc2V0Z0xldmVsKDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNJXG4gICAqIFNoaWZ0IEluIChDdHJsLU8pIC0+IFN3aXRjaCB0byBTdGFuZGFyZCBDaGFyYWN0ZXIgU2V0LiAgVGhpcyBpbnZva2VzIHRoZSBHMFxuICAgKiBjaGFyYWN0ZXIgc2V0ICh0aGUgZGVmYXVsdCkuXG4gICAqL1xuICBwdWJsaWMgc2hpZnRJbigpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5zZXRnTGV2ZWwoMCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzdHJpY3QgY3Vyc29yIHRvIHZpZXdwb3J0IHNpemUgLyBzY3JvbGwgbWFyZ2luIChvcmlnaW4gbW9kZSkuXG4gICAqL1xuICBwcml2YXRlIF9yZXN0cmljdEN1cnNvcigpOiB2b2lkIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0gTWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSwgTWF0aC5tYXgoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCkpO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSB0aGlzLl90ZXJtaW5hbC5vcmlnaW5Nb2RlXG4gICAgICA/IE1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSwgTWF0aC5tYXgodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KSlcbiAgICAgIDogTWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSwgTWF0aC5tYXgoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhYnNvbHV0ZSBjdXJzb3IgcG9zaXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9zZXRDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fdGVybWluYWwub3JpZ2luTW9kZSkge1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHg7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wICsgeTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHg7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ID0geTtcbiAgICB9XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgcmVsYXRpdmUgY3Vyc29yIHBvc2l0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfbW92ZUN1cnNvcih4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIGZvciByZWxhdGl2ZSBjaGFuZ2VzIHdlIGhhdmUgdG8gbWFrZSBzdXJlIHdlIGFyZSB3aXRoaW4gMCAuLiBjb2xzL3Jvd3MgLSAxXG4gICAgLy8gYmVmb3JlIGNhbGN1bGF0aW5nIHRoZSBuZXcgcG9zaXRpb25cbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIHRoaXMuX3NldEN1cnNvcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICsgeCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSArIHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBBXG4gICAqIEN1cnNvciBVcCBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVVUpLlxuICAgKi9cbiAgcHVibGljIGN1cnNvclVwKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIC8vIHN0b3AgYXQgc2Nyb2xsVG9wXG4gICAgY29uc3QgZGlmZlRvVG9wID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcDtcbiAgICBpZiAoZGlmZlRvVG9wID49IDApIHtcbiAgICAgIHRoaXMuX21vdmVDdXJzb3IoMCwgLU1hdGgubWluKGRpZmZUb1RvcCwgcGFyYW1zLnBhcmFtc1swXSB8fCAxKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21vdmVDdXJzb3IoMCwgLShwYXJhbXMucGFyYW1zWzBdIHx8IDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEJcbiAgICogQ3Vyc29yIERvd24gUHMgVGltZXMgKGRlZmF1bHQgPSAxKSAoQ1VEKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JEb3duKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIC8vIHN0b3AgYXQgc2Nyb2xsQm90dG9tXG4gICAgY29uc3QgZGlmZlRvQm90dG9tID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgICBpZiAoZGlmZlRvQm90dG9tID49IDApIHtcbiAgICAgIHRoaXMuX21vdmVDdXJzb3IoMCwgTWF0aC5taW4oZGlmZlRvQm90dG9tLCBwYXJhbXMucGFyYW1zWzBdIHx8IDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCBwYXJhbXMucGFyYW1zWzBdIHx8IDEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgQ1xuICAgKiBDdXJzb3IgRm9yd2FyZCBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVUYpLlxuICAgKi9cbiAgcHVibGljIGN1cnNvckZvcndhcmQocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fbW92ZUN1cnNvcihwYXJhbXMucGFyYW1zWzBdIHx8IDEsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBEXG4gICAqIEN1cnNvciBCYWNrd2FyZCBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVUIpLlxuICAgKi9cbiAgcHVibGljIGN1cnNvckJhY2t3YXJkKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX21vdmVDdXJzb3IoLShwYXJhbXMucGFyYW1zWzBdIHx8IDEpLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRVxuICAgKiBDdXJzb3IgTmV4dCBMaW5lIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENOTCkuXG4gICAqIE90aGVyIHRoYW4gY3Vyc29yRG93biAoQ1VEKSBhbHNvIHNldCB0aGUgY3Vyc29yIHRvIGZpcnN0IGNvbHVtbi5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JOZXh0TGluZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvckRvd24ocGFyYW1zKTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRlxuICAgKiBDdXJzb3IgUHJldmlvdXMgTGluZSBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDUEwpLlxuICAgKiBPdGhlciB0aGFuIGN1cnNvclVwIChDVVUpIGFsc28gc2V0IHRoZSBjdXJzb3IgdG8gZmlyc3QgY29sdW1uLlxuICAgKi9cbiAgcHVibGljIGN1cnNvclByZWNlZGluZ0xpbmUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5jdXJzb3JVcChwYXJhbXMpO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBHXG4gICAqIEN1cnNvciBDaGFyYWN0ZXIgQWJzb2x1dGUgIFtjb2x1bW5dIChkZWZhdWx0ID0gW3JvdywxXSkgKENIQSkuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yQ2hhckFic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3NldEN1cnNvcigocGFyYW1zLnBhcmFtc1swXSB8fCAxKSAtIDEsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyA7IFBzIEhcbiAgICogQ3Vyc29yIFBvc2l0aW9uIFtyb3c7Y29sdW1uXSAoZGVmYXVsdCA9IFsxLDFdKSAoQ1VQKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JQb3NpdGlvbihwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRDdXJzb3IoXG4gICAgICAvLyBjb2xcbiAgICAgIChwYXJhbXMubGVuZ3RoID49IDIpID8gKHBhcmFtcy5wYXJhbXNbMV0gfHwgMSkgLSAxIDogMCxcbiAgICAgIC8vIHJvd1xuICAgICAgKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkgLSAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gYCAgQ2hhcmFjdGVyIFBvc2l0aW9uIEFic29sdXRlXG4gICAqICAgW2NvbHVtbl0gKGRlZmF1bHQgPSBbcm93LDFdKSAoSFBBKS5cbiAgICogQ3VycmVudGx5IHNhbWUgZnVuY3Rpb25hbGl0eSBhcyBDSEEuXG4gICAqL1xuICBwdWJsaWMgY2hhclBvc0Fic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3NldEN1cnNvcigocGFyYW1zLnBhcmFtc1swXSB8fCAxKSAtIDEsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBhICBDaGFyYWN0ZXIgUG9zaXRpb24gUmVsYXRpdmVcbiAgICogICBbY29sdW1uc10gKGRlZmF1bHQgPSBbcm93LGNvbCsxXSkgKEhQUilcbiAgICogQ3VycmVudGx5IHNhbWUgZnVuY3Rpb25hbGl0eSBhcyBDVUYuXG4gICAqL1xuICBwdWJsaWMgaFBvc2l0aW9uUmVsYXRpdmUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fbW92ZUN1cnNvcihwYXJhbXMucGFyYW1zWzBdIHx8IDEsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBkICBWZXJ0aWNhbCBQb3NpdGlvbiBBYnNvbHV0ZSAoVlBBKVxuICAgKiAgIFtyb3ddIChkZWZhdWx0ID0gWzEsY29sdW1uXSlcbiAgICovXG4gIHB1YmxpYyBsaW5lUG9zQWJzb2x1dGUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsIChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGUgIFZlcnRpY2FsIFBvc2l0aW9uIFJlbGF0aXZlIChWUFIpXG4gICAqICAgW3Jvd3NdIChkZWZhdWx0ID0gW3JvdysxLGNvbHVtbl0pXG4gICAqIHJldXNlIENTSSBQcyBCID9cbiAgICovXG4gIHB1YmxpYyB2UG9zaXRpb25SZWxhdGl2ZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIDsgUHMgZlxuICAgKiAgIEhvcml6b250YWwgYW5kIFZlcnRpY2FsIFBvc2l0aW9uIFtyb3c7Y29sdW1uXSAoZGVmYXVsdCA9XG4gICAqICAgWzEsMV0pIChIVlApLlxuICAgKiAgIFNhbWUgYXMgQ1VQLlxuICAgKi9cbiAgcHVibGljIGhWUG9zaXRpb24ocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5jdXJzb3JQb3NpdGlvbihwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBnICBUYWIgQ2xlYXIgKFRCQykuXG4gICAqICAgICBQcyA9IDAgIC0+IENsZWFyIEN1cnJlbnQgQ29sdW1uIChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMyAgLT4gQ2xlYXIgQWxsLlxuICAgKiBQb3RlbnRpYWxseTpcbiAgICogICBQcyA9IDIgIC0+IENsZWFyIFN0b3BzIG9uIExpbmUuXG4gICAqICAgaHR0cDovL3Z0MTAwLm5ldC9hbm5hcmJvci9hYWEtdWcvc2VjdGlvbjYuaHRtbFxuICAgKi9cbiAgcHVibGljIHRhYkNsZWFyKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPT09IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci50YWJzW3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnhdO1xuICAgIH0gZWxzZSBpZiAocGFyYW0gPT09IDMpIHtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnRhYnMgPSB7fTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIElcbiAgICogICBDdXJzb3IgRm9yd2FyZCBUYWJ1bGF0aW9uIFBzIHRhYiBzdG9wcyAoZGVmYXVsdCA9IDEpIChDSFQpLlxuICAgKi9cbiAgcHVibGljIGN1cnNvckZvcndhcmRUYWIocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLm5leHRTdG9wKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBaICBDdXJzb3IgQmFja3dhcmQgVGFidWxhdGlvbiBQcyB0YWIgc3RvcHMgKGRlZmF1bHQgPSAxKSAoQ0JUKS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JCYWNrd2FyZFRhYihwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICBidWZmZXIueCA9IGJ1ZmZlci5wcmV2U3RvcCgpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gZXJhc2UgY2VsbHMgaW4gYSB0ZXJtaW5hbCByb3cuXG4gICAqIFRoZSBjZWxsIGdldHMgcmVwbGFjZWQgd2l0aCB0aGUgZXJhc2VDaGFyIG9mIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIHkgcm93IGluZGV4XG4gICAqIEBwYXJhbSBzdGFydCBmaXJzdCBjZWxsIGluZGV4IHRvIGJlIGVyYXNlZFxuICAgKiBAcGFyYW0gZW5kICAgZW5kIC0gMSBpcyBsYXN0IGVyYXNlZCBjZWxsXG4gICAqL1xuICBwcml2YXRlIF9lcmFzZUluQnVmZmVyTGluZSh5OiBudW1iZXIsIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBjbGVhcldyYXA6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB5KTtcbiAgICBsaW5lLnJlcGxhY2VDZWxscyhcbiAgICAgIHN0YXJ0LFxuICAgICAgZW5kLFxuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fdGVybWluYWwuZXJhc2VBdHRyRGF0YSgpKVxuICAgICk7XG4gICAgaWYgKGNsZWFyV3JhcCkge1xuICAgICAgbGluZS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byByZXNldCBjZWxscyBpbiBhIHRlcm1pbmFsIHJvdy5cbiAgICogVGhlIGNlbGwgZ2V0cyByZXBsYWNlZCB3aXRoIHRoZSBlcmFzZUNoYXIgb2YgdGhlIHRlcm1pbmFsIGFuZCB0aGUgaXNXcmFwcGVkIHByb3BlcnR5IGlzIHNldCB0byBmYWxzZS5cbiAgICogQHBhcmFtIHkgcm93IGluZGV4XG4gICAqL1xuICBwcml2YXRlIF9yZXNldEJ1ZmZlckxpbmUoeTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSArIHkpO1xuICAgIGxpbmUuZmlsbCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBKICBFcmFzZSBpbiBEaXNwbGF5IChFRCkuXG4gICAqICAgICBQcyA9IDAgIC0+IEVyYXNlIEJlbG93IChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMSAgLT4gRXJhc2UgQWJvdmUuXG4gICAqICAgICBQcyA9IDIgIC0+IEVyYXNlIEFsbC5cbiAgICogICAgIFBzID0gMyAgLT4gRXJhc2UgU2F2ZWQgTGluZXMgKHh0ZXJtKS5cbiAgICogQ1NJID8gUHMgSlxuICAgKiAgIEVyYXNlIGluIERpc3BsYXkgKERFQ1NFRCkuXG4gICAqICAgICBQcyA9IDAgIC0+IFNlbGVjdGl2ZSBFcmFzZSBCZWxvdyAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IFNlbGVjdGl2ZSBFcmFzZSBBYm92ZS5cbiAgICogICAgIFBzID0gMiAgLT4gU2VsZWN0aXZlIEVyYXNlIEFsbC5cbiAgICovXG4gIHB1YmxpYyBlcmFzZUluRGlzcGxheShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGxldCBqO1xuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICBqID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShqKTtcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUoaisrLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggPT09IDApO1xuICAgICAgICBmb3IgKDsgaiA8IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93czsgaisrKSB7XG4gICAgICAgICAgdGhpcy5fcmVzZXRCdWZmZXJMaW5lKGopO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoaik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBqID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShqKTtcbiAgICAgICAgLy8gRGVsZXRlZCBmcm9udCBwYXJ0IG9mIGxpbmUgYW5kIGV2ZXJ5dGhpbmcgYmVmb3JlLiBUaGlzIGxpbmUgd2lsbCBubyBsb25nZXIgYmUgd3JhcHBlZC5cbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUoaiwgMCwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIDEsIHRydWUpO1xuICAgICAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIDEgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICAgICAgLy8gRGVsZXRlZCBlbnRpcmUgcHJldmlvdXMgbGluZS4gVGhpcyBuZXh0IGxpbmUgY2FuIG5vIGxvbmdlciBiZSB3cmFwcGVkLlxuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChqICsgMSkuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyTGluZShqKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eShqIC0gMSk7XG4gICAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSgwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIC8vIENsZWFyIHNjcm9sbGJhY2sgKGV2ZXJ5dGhpbmcgbm90IGluIHZpZXdwb3J0KVxuICAgICAgICBjb25zdCBzY3JvbGxCYWNrU2l6ZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aCAtIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICAgICAgaWYgKHNjcm9sbEJhY2tTaXplID4gMCkge1xuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLnRyaW1TdGFydChzY3JvbGxCYWNrU2l6ZSk7XG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgPSBNYXRoLm1heCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSAtIHNjcm9sbEJhY2tTaXplLCAwKTtcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwIC0gc2Nyb2xsQmFja1NpemUsIDApO1xuICAgICAgICAgIC8vIEZvcmNlIGEgc2Nyb2xsIGV2ZW50IHRvIHJlZnJlc2ggdmlld3BvcnRcbiAgICAgICAgICB0aGlzLl9vblNjcm9sbC5maXJlKDApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgSyAgRXJhc2UgaW4gTGluZSAoRUwpLlxuICAgKiAgICAgUHMgPSAwICAtPiBFcmFzZSB0byBSaWdodCAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEVyYXNlIHRvIExlZnQuXG4gICAqICAgICBQcyA9IDIgIC0+IEVyYXNlIEFsbC5cbiAgICogQ1NJID8gUHMgS1xuICAgKiAgIEVyYXNlIGluIExpbmUgKERFQ1NFTCkuXG4gICAqICAgICBQcyA9IDAgIC0+IFNlbGVjdGl2ZSBFcmFzZSB0byBSaWdodCAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IFNlbGVjdGl2ZSBFcmFzZSB0byBMZWZ0LlxuICAgKiAgICAgUHMgPSAyICAtPiBTZWxlY3RpdmUgRXJhc2UgQWxsLlxuICAgKi9cbiAgcHVibGljIGVyYXNlSW5MaW5lKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgc3dpdGNoIChwYXJhbXMucGFyYW1zWzBdKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LCAwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICsgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LCAwLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgTFxuICAgKiBJbnNlcnQgUHMgTGluZShzKSAoZGVmYXVsdCA9IDEpIChJTCkuXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0TGluZXMocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuXG4gICAgaWYgKGJ1ZmZlci55ID4gYnVmZmVyLnNjcm9sbEJvdHRvbSB8fCBidWZmZXIueSA8IGJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByb3c6IG51bWJlciA9IGJ1ZmZlci55ICsgYnVmZmVyLnliYXNlO1xuXG4gICAgY29uc3Qgc2Nyb2xsQm90dG9tUm93c09mZnNldCA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEgLSBidWZmZXIuc2Nyb2xsQm90dG9tO1xuICAgIGNvbnN0IHNjcm9sbEJvdHRvbUFic29sdXRlID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSArIGJ1ZmZlci55YmFzZSAtIHNjcm9sbEJvdHRvbVJvd3NPZmZzZXQgKyAxO1xuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICAvLyB0ZXN0OiBlY2hvIC1lICdcXGVbNDRtXFxlWzFMXFxlWzBtJ1xuICAgICAgLy8gYmxhbmtMaW5lKHRydWUpIC0geHRlcm0vbGludXggYmVoYXZpb3JcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2Uoc2Nyb2xsQm90dG9tQWJzb2x1dGUgLSAxLCAxKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2Uocm93LCAwLCBidWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX3Rlcm1pbmFsLmVyYXNlQXR0ckRhdGEoKSkpO1xuICAgIH1cblxuICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIueSwgYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgYnVmZmVyLnggPSAwOyAvLyBzZWUgaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS9jaGFwdGVyNC5odG1sIC0gdnQyMjAgb25seT9cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgTVxuICAgKiBEZWxldGUgUHMgTGluZShzKSAoZGVmYXVsdCA9IDEpIChETCkuXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlTGluZXMocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuXG4gICAgaWYgKGJ1ZmZlci55ID4gYnVmZmVyLnNjcm9sbEJvdHRvbSB8fCBidWZmZXIueSA8IGJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByb3c6IG51bWJlciA9IGJ1ZmZlci55ICsgYnVmZmVyLnliYXNlO1xuXG4gICAgbGV0IGo6IG51bWJlcjtcbiAgICBqID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSAtIGJ1ZmZlci5zY3JvbGxCb3R0b207XG4gICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEgKyBidWZmZXIueWJhc2UgLSBqO1xuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICAvLyB0ZXN0OiBlY2hvIC1lICdcXGVbNDRtXFxlWzFNXFxlWzBtJ1xuICAgICAgLy8gYmxhbmtMaW5lKHRydWUpIC0geHRlcm0vbGludXggYmVoYXZpb3JcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2Uocm93LCAxKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoaiwgMCwgYnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnksIGJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIGJ1ZmZlci54ID0gMDsgLy8gc2VlIGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vY2hhcHRlcjQuaHRtbCAtIHZ0MjIwIG9ubHk/XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEBcbiAgICogSW5zZXJ0IFBzIChCbGFuaykgQ2hhcmFjdGVyKHMpIChkZWZhdWx0ID0gMSkgKElDSCkuXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0Q2hhcnMocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSk7XG4gICAgaWYgKGxpbmUpIHtcbiAgICAgIGxpbmUuaW5zZXJ0Q2VsbHMoXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsXG4gICAgICAgIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSxcbiAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fdGVybWluYWwuZXJhc2VBdHRyRGF0YSgpKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBQXG4gICAqIERlbGV0ZSBQcyBDaGFyYWN0ZXIocykgKGRlZmF1bHQgPSAxKSAoRENIKS5cbiAgICovXG4gIHB1YmxpYyBkZWxldGVDaGFycyhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlKTtcbiAgICBpZiAobGluZSkge1xuICAgICAgbGluZS5kZWxldGVDZWxscyhcbiAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCxcbiAgICAgICAgcGFyYW1zLnBhcmFtc1swXSB8fCAxLFxuICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpXG4gICAgICApO1xuICAgICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFMgIFNjcm9sbCB1cCBQcyBsaW5lcyAoZGVmYXVsdCA9IDEpIChTVSkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsVXAocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgLy8gbWFrZSBidWZmZXIgbG9jYWwgZm9yIGZhc3RlciBhY2Nlc3NcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICBidWZmZXIubGluZXMuc3BsaWNlKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxUb3AsIDEpO1xuICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShidWZmZXIueWJhc2UgKyBidWZmZXIuc2Nyb2xsQm90dG9tLCAwLCBidWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX3Rlcm1pbmFsLmVyYXNlQXR0ckRhdGEoKSkpO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoYnVmZmVyLnNjcm9sbFRvcCwgYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFQgIFNjcm9sbCBkb3duIFBzIGxpbmVzIChkZWZhdWx0ID0gMSkgKFNEKS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxEb3duKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGlmIChwYXJhbXMubGVuZ3RoIDwgMikge1xuICAgICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgICAvLyBtYWtlIGJ1ZmZlciBsb2NhbCBmb3IgZmFzdGVyIGFjY2Vzc1xuICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG5cbiAgICAgIHdoaWxlIChwYXJhbS0tKSB7XG4gICAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoYnVmZmVyLnliYXNlICsgYnVmZmVyLnNjcm9sbEJvdHRvbSwgMSk7XG4gICAgICAgIGJ1ZmZlci5saW5lcy5zcGxpY2UoYnVmZmVyLnliYXNlICsgYnVmZmVyLnNjcm9sbFRvcCwgMCwgYnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFhcbiAgICogRXJhc2UgUHMgQ2hhcmFjdGVyKHMpIChkZWZhdWx0ID0gMSkgKEVDSCkuXG4gICAqL1xuICBwdWJsaWMgZXJhc2VDaGFycyhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlKTtcbiAgICBpZiAobGluZSkge1xuICAgICAgbGluZS5yZXBsYWNlQ2VsbHMoXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggKyAocGFyYW1zLnBhcmFtc1swXSB8fCAxKSxcbiAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fdGVybWluYWwuZXJhc2VBdHRyRGF0YSgpKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBiICBSZXBlYXQgdGhlIHByZWNlZGluZyBncmFwaGljIGNoYXJhY3RlciBQcyB0aW1lcyAoUkVQKS5cbiAgICogRnJvbSBFQ01BIDQ4IChAc2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9wdWJsaWNhdGlvbnMvZmlsZXMvRUNNQS1TVC9FY21hLTA0OC5wZGYpXG4gICAqICAgIE5vdGF0aW9uOiAoUG4pXG4gICAqICAgIFJlcHJlc2VudGF0aW9uOiBDU0kgUG4gMDYvMDJcbiAgICogICAgUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWU6IFBuID0gMVxuICAgKiAgICBSRVAgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcmVjZWRpbmcgY2hhcmFjdGVyIGluIHRoZSBkYXRhIHN0cmVhbSxcbiAgICogICAgaWYgaXQgaXMgYSBncmFwaGljIGNoYXJhY3RlciAocmVwcmVzZW50ZWQgYnkgb25lIG9yIG1vcmUgYml0IGNvbWJpbmF0aW9ucykgaW5jbHVkaW5nIFNQQUNFLFxuICAgKiAgICBpcyB0byBiZSByZXBlYXRlZCBuIHRpbWVzLCB3aGVyZSBuIGVxdWFscyB0aGUgdmFsdWUgb2YgUG4uXG4gICAqICAgIElmIHRoZSBjaGFyYWN0ZXIgcHJlY2VkaW5nIFJFUCBpcyBhIGNvbnRyb2wgZnVuY3Rpb24gb3IgcGFydCBvZiBhIGNvbnRyb2wgZnVuY3Rpb24sXG4gICAqICAgIHRoZSBlZmZlY3Qgb2YgUkVQIGlzIG5vdCBkZWZpbmVkIGJ5IHRoaXMgU3RhbmRhcmQuXG4gICAqXG4gICAqIFNpbmNlIHdlIHByb3BhZ2F0ZSB0aGUgdGVybWluYWwgYXMgeHRlcm0tMjU2Y29sb3Igd2UgaGF2ZSB0byBmb2xsb3cgeHRlcm0ncyBiZWhhdmlvcjpcbiAgICogICAgLSBmdWxsd2lkdGggKyBzdXJyb2dhdGUgY2hhcnMgYXJlIGlnbm9yZWRcbiAgICogICAgLSBmb3IgY29tYmluaW5nIGNoYXJzIG9ubHkgdGhlIGJhc2UgY2hhciBnZXRzIHJlcGVhdGVkXG4gICAqICAgIC0gdGV4dCBhdHRycyBhcmUgYXBwbGllZCBub3JtYWxseVxuICAgKiAgICAtIHdyYXAgYXJvdW5kIGlzIHJlc3BlY3RlZFxuICAgKiAgICAtIGFueSB2YWxpZCBzZXF1ZW5jZSByZXNldHMgdGhlIGNhcnJpZWQgZm9yd2FyZCBjaGFyXG4gICAqXG4gICAqIE5vdGU6IFRvIGdldCByZXNldCBvbiBhIHZhbGlkIHNlcXVlbmNlIHdvcmtpbmcgY29ycmVjdGx5IHdpdGhvdXQgbXVjaCBydW50aW1lIHBlbmFsdHksXG4gICAqIHRoZSBwcmVjZWRpbmcgY29kZXBvaW50IGlzIHN0b3JlZCBvbiB0aGUgcGFyc2VyIGluIGB0aGlzLnByaW50YCBhbmQgcmVzZXQgZHVyaW5nIGBwYXJzZXIucGFyc2VgLlxuICAgKi9cbiAgcHVibGljIHJlcGVhdFByZWNlZGluZ0NoYXJhY3RlcihwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY2FsbCBwcmludCB0byBpbnNlcnQgdGhlIGNoYXJzIGFuZCBoYW5kbGUgY29ycmVjdCB3cmFwcGluZ1xuICAgIGNvbnN0IGxlbmd0aCA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQzMkFycmF5KGxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgZGF0YVtpXSA9IHRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQ7XG4gICAgfVxuICAgIHRoaXMucHJpbnQoZGF0YSwgMCwgZGF0YS5sZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBjICBTZW5kIERldmljZSBBdHRyaWJ1dGVzIChQcmltYXJ5IERBKS5cbiAgICogICAgIFBzID0gMCAgb3Igb21pdHRlZCAtPiByZXF1ZXN0IGF0dHJpYnV0ZXMgZnJvbSB0ZXJtaW5hbC4gIFRoZVxuICAgKiAgICAgcmVzcG9uc2UgZGVwZW5kcyBvbiB0aGUgZGVjVGVybWluYWxJRCByZXNvdXJjZSBzZXR0aW5nLlxuICAgKiAgICAgLT4gQ1NJID8gMSA7IDIgYyAgKGBgVlQxMDAgd2l0aCBBZHZhbmNlZCBWaWRlbyBPcHRpb24nJylcbiAgICogICAgIC0+IENTSSA/IDEgOyAwIGMgIChgYFZUMTAxIHdpdGggTm8gT3B0aW9ucycnKVxuICAgKiAgICAgLT4gQ1NJID8gNiBjICAoYGBWVDEwMicnKVxuICAgKiAgICAgLT4gQ1NJID8gNiAwIDsgMSA7IDIgOyA2IDsgOCA7IDkgOyAxIDUgOyBjICAoYGBWVDIyMCcnKVxuICAgKiAgIFRoZSBWVDEwMC1zdHlsZSByZXNwb25zZSBwYXJhbWV0ZXJzIGRvIG5vdCBtZWFuIGFueXRoaW5nIGJ5XG4gICAqICAgdGhlbXNlbHZlcy4gIFZUMjIwIHBhcmFtZXRlcnMgZG8sIHRlbGxpbmcgdGhlIGhvc3Qgd2hhdCBmZWEtXG4gICAqICAgdHVyZXMgdGhlIHRlcm1pbmFsIHN1cHBvcnRzOlxuICAgKiAgICAgUHMgPSAxICAtPiAxMzItY29sdW1ucy5cbiAgICogICAgIFBzID0gMiAgLT4gUHJpbnRlci5cbiAgICogICAgIFBzID0gNiAgLT4gU2VsZWN0aXZlIGVyYXNlLlxuICAgKiAgICAgUHMgPSA4ICAtPiBVc2VyLWRlZmluZWQga2V5cy5cbiAgICogICAgIFBzID0gOSAgLT4gTmF0aW9uYWwgcmVwbGFjZW1lbnQgY2hhcmFjdGVyIHNldHMuXG4gICAqICAgICBQcyA9IDEgNSAgLT4gVGVjaG5pY2FsIGNoYXJhY3RlcnMuXG4gICAqICAgICBQcyA9IDIgMiAgLT4gQU5TSSBjb2xvciwgZS5nLiwgVlQ1MjUuXG4gICAqICAgICBQcyA9IDIgOSAgLT4gQU5TSSB0ZXh0IGxvY2F0b3IgKGkuZS4sIERFQyBMb2NhdG9yIG1vZGUpLlxuICAgKiBDU0kgPiBQcyBjXG4gICAqICAgU2VuZCBEZXZpY2UgQXR0cmlidXRlcyAoU2Vjb25kYXJ5IERBKS5cbiAgICogICAgIFBzID0gMCAgb3Igb21pdHRlZCAtPiByZXF1ZXN0IHRoZSB0ZXJtaW5hbCdzIGlkZW50aWZpY2F0aW9uXG4gICAqICAgICBjb2RlLiAgVGhlIHJlc3BvbnNlIGRlcGVuZHMgb24gdGhlIGRlY1Rlcm1pbmFsSUQgcmVzb3VyY2Ugc2V0LVxuICAgKiAgICAgdGluZy4gIEl0IHNob3VsZCBhcHBseSBvbmx5IHRvIFZUMjIwIGFuZCB1cCwgYnV0IHh0ZXJtIGV4dGVuZHNcbiAgICogICAgIHRoaXMgdG8gVlQxMDAuXG4gICAqICAgICAtPiBDU0kgID4gUHAgOyBQdiA7IFBjIGNcbiAgICogICB3aGVyZSBQcCBkZW5vdGVzIHRoZSB0ZXJtaW5hbCB0eXBlXG4gICAqICAgICBQcCA9IDAgIC0+IGBgVlQxMDAnJy5cbiAgICogICAgIFBwID0gMSAgLT4gYGBWVDIyMCcnLlxuICAgKiAgIGFuZCBQdiBpcyB0aGUgZmlybXdhcmUgdmVyc2lvbiAoZm9yIHh0ZXJtLCB0aGlzIHdhcyBvcmlnaW5hbGx5XG4gICAqICAgdGhlIFhGcmVlODYgcGF0Y2ggbnVtYmVyLCBzdGFydGluZyB3aXRoIDk1KS4gIEluIGEgREVDIHRlcm1pLVxuICAgKiAgIG5hbCwgUGMgaW5kaWNhdGVzIHRoZSBST00gY2FydHJpZGdlIHJlZ2lzdHJhdGlvbiBudW1iZXIgYW5kIGlzXG4gICAqICAgYWx3YXlzIHplcm8uXG4gICAqIE1vcmUgaW5mb3JtYXRpb246XG4gICAqICAgeHRlcm0vY2hhcnByb2MuYyAtIGxpbmUgMjAxMiwgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqICAgdmltIHJlc3BvbmRzIHdpdGggXltbPzBjIG9yIF5bWz8xYyBhZnRlciB0aGUgdGVybWluYWwncyByZXNwb25zZSAoPylcbiAgICovXG4gIHB1YmxpYyBzZW5kRGV2aWNlQXR0cmlidXRlc1ByaW1hcnkocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgaWYgKHBhcmFtcy5wYXJhbXNbMF0gPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5pcygneHRlcm0nKSB8fCB0aGlzLl90ZXJtaW5hbC5pcygncnh2dC11bmljb2RlJykgfHwgdGhpcy5fdGVybWluYWwuaXMoJ3NjcmVlbicpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPzE7MmMnKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3Rlcm1pbmFsLmlzKCdsaW51eCcpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPzZjJyk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzZW5kRGV2aWNlQXR0cmlidXRlc1NlY29uZGFyeShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBpZiAocGFyYW1zLnBhcmFtc1swXSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8geHRlcm0gYW5kIHVyeHZ0XG4gICAgLy8gc2VlbSB0byBzcGl0IHRoaXNcbiAgICAvLyBvdXQgYXJvdW5kIH4zNzAgdGltZXMgKD8pLlxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5pcygneHRlcm0nKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz4wOzI3NjswYycpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fdGVybWluYWwuaXMoJ3J4dnQtdW5pY29kZScpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPjg1Ozk1OzBjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90ZXJtaW5hbC5pcygnbGludXgnKSkge1xuICAgICAgLy8gbm90IHN1cHBvcnRlZCBieSBsaW51eCBjb25zb2xlLlxuICAgICAgLy8gbGludXggY29uc29sZSBlY2hvZXMgcGFyYW1ldGVycy5cbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocGFyYW1zLnBhcmFtc1swXSArICdjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90ZXJtaW5hbC5pcygnc2NyZWVuJykpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1s+ODM7NDAwMDM7MGMnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGggIFNldCBNb2RlIChTTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IEtleWJvYXJkIEFjdGlvbiBNb2RlIChBTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IEluc2VydCBNb2RlIChJUk0pLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFNlbmQvcmVjZWl2ZSAoU1JNKS5cbiAgICogICAgIFBzID0gMiAwICAtPiBBdXRvbWF0aWMgTmV3bGluZSAoTE5NKS5cbiAgICogQ1NJID8gUG0gaFxuICAgKiAgIERFQyBQcml2YXRlIE1vZGUgU2V0IChERUNTRVQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBBcHBsaWNhdGlvbiBDdXJzb3IgS2V5cyAoREVDQ0tNKS5cbiAgICogICAgIFBzID0gMiAgLT4gRGVzaWduYXRlIFVTQVNDSUkgZm9yIGNoYXJhY3RlciBzZXRzIEcwLUczXG4gICAqICAgICAoREVDQU5NKSwgYW5kIHNldCBWVDEwMCBtb2RlLlxuICAgKiAgICAgUHMgPSAzICAtPiAxMzIgQ29sdW1uIE1vZGUgKERFQ0NPTE0pLlxuICAgKiAgICAgUHMgPSA0ICAtPiBTbW9vdGggKFNsb3cpIFNjcm9sbCAoREVDU0NMTSkuXG4gICAqICAgICBQcyA9IDUgIC0+IFJldmVyc2UgVmlkZW8gKERFQ1NDTk0pLlxuICAgKiAgICAgUHMgPSA2ICAtPiBPcmlnaW4gTW9kZSAoREVDT00pLlxuICAgKiAgICAgUHMgPSA3ICAtPiBXcmFwYXJvdW5kIE1vZGUgKERFQ0FXTSkuXG4gICAqICAgICBQcyA9IDggIC0+IEF1dG8tcmVwZWF0IEtleXMgKERFQ0FSTSkuXG4gICAqICAgICBQcyA9IDkgIC0+IFNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzLiAgU2VlIHRoZSBzZWMtXG4gICAqICAgICB0aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgIC0+IFNob3cgdG9vbGJhciAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMiAgLT4gU3RhcnQgQmxpbmtpbmcgQ3Vyc29yIChhdHQ2MTApLlxuICAgKiAgICAgUHMgPSAxIDggIC0+IFByaW50IGZvcm0gZmVlZCAoREVDUEZGKS5cbiAgICogICAgIFBzID0gMSA5ICAtPiBTZXQgcHJpbnQgZXh0ZW50IHRvIGZ1bGwgc2NyZWVuIChERUNQRVgpLlxuICAgKiAgICAgUHMgPSAyIDUgIC0+IFNob3cgQ3Vyc29yIChERUNUQ0VNKS5cbiAgICogICAgIFBzID0gMyAwICAtPiBTaG93IHNjcm9sbGJhciAocnh2dCkuXG4gICAqICAgICBQcyA9IDMgNSAgLT4gRW5hYmxlIGZvbnQtc2hpZnRpbmcgZnVuY3Rpb25zIChyeHZ0KS5cbiAgICogICAgIFBzID0gMyA4ICAtPiBFbnRlciBUZWt0cm9uaXggTW9kZSAoREVDVEVLKS5cbiAgICogICAgIFBzID0gNCAwICAtPiBBbGxvdyA4MCAtPiAxMzIgTW9kZS5cbiAgICogICAgIFBzID0gNCAxICAtPiBtb3JlKDEpIGZpeCAoc2VlIGN1cnNlcyByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDQgMiAgLT4gRW5hYmxlIE5hdGlvbiBSZXBsYWNlbWVudCBDaGFyYWN0ZXIgc2V0cyAoREVDTi1cbiAgICogICAgIFJDTSkuXG4gICAqICAgICBQcyA9IDQgNCAgLT4gVHVybiBPbiBNYXJnaW4gQmVsbC5cbiAgICogICAgIFBzID0gNCA1ICAtPiBSZXZlcnNlLXdyYXBhcm91bmQgTW9kZS5cbiAgICogICAgIFBzID0gNCA2ICAtPiBTdGFydCBMb2dnaW5nLiAgVGhpcyBpcyBub3JtYWxseSBkaXNhYmxlZCBieSBhXG4gICAqICAgICBjb21waWxlLXRpbWUgb3B0aW9uLlxuICAgKiAgICAgUHMgPSA0IDcgIC0+IFVzZSBBbHRlcm5hdGUgU2NyZWVuIEJ1ZmZlci4gIChUaGlzIG1heSBiZSBkaXMtXG4gICAqICAgICBhYmxlZCBieSB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSA2IDYgIC0+IEFwcGxpY2F0aW9uIGtleXBhZCAoREVDTktNKS5cbiAgICogICAgIFBzID0gNiA3ICAtPiBCYWNrYXJyb3cga2V5IHNlbmRzIGJhY2tzcGFjZSAoREVDQktNKS5cbiAgICogICAgIFBzID0gMSAwIDAgMCAgLT4gU2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MgYW5kXG4gICAqICAgICByZWxlYXNlLiAgU2VlIHRoZSBzZWN0aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAxICAtPiBVc2UgSGlsaXRlIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAyICAtPiBVc2UgQ2VsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDMgIC0+IFVzZSBBbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCA0ICAtPiBTZW5kIEZvY3VzSW4vRm9jdXNPdXQgZXZlbnRzLlxuICAgKiAgICAgUHMgPSAxIDAgMCA1ICAtPiBFbmFibGUgRXh0ZW5kZWQgTW91c2UgTW9kZS5cbiAgICogICAgIFBzID0gMSAwIDEgMCAgLT4gU2Nyb2xsIHRvIGJvdHRvbSBvbiB0dHkgb3V0cHV0IChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDEgMSAgLT4gU2Nyb2xsIHRvIGJvdHRvbSBvbiBrZXkgcHJlc3MgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA0ICAtPiBJbnRlcnByZXQgXCJtZXRhXCIga2V5LCBzZXRzIGVpZ2h0aCBiaXQuXG4gICAqICAgICAoZW5hYmxlcyB0aGUgZWlnaHRCaXRJbnB1dCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDUgIC0+IEVuYWJsZSBzcGVjaWFsIG1vZGlmaWVycyBmb3IgQWx0IGFuZCBOdW0tXG4gICAqICAgICBMb2NrIGtleXMuICAoVGhpcyBlbmFibGVzIHRoZSBudW1Mb2NrIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNiAgLT4gU2VuZCBFU0MgICB3aGVuIE1ldGEgbW9kaWZpZXMgYSBrZXkuICAoVGhpc1xuICAgKiAgICAgZW5hYmxlcyB0aGUgbWV0YVNlbmRzRXNjYXBlIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNyAgLT4gU2VuZCBERUwgZnJvbSB0aGUgZWRpdGluZy1rZXlwYWQgRGVsZXRlXG4gICAqICAgICBrZXkuXG4gICAqICAgICBQcyA9IDEgMCAzIDkgIC0+IFNlbmQgRVNDICB3aGVuIEFsdCBtb2RpZmllcyBhIGtleS4gIChUaGlzXG4gICAqICAgICBlbmFibGVzIHRoZSBhbHRTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDAgIC0+IEtlZXAgc2VsZWN0aW9uIGV2ZW4gaWYgbm90IGhpZ2hsaWdodGVkLlxuICAgKiAgICAgKFRoaXMgZW5hYmxlcyB0aGUga2VlcFNlbGVjdGlvbiByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDEgIC0+IFVzZSB0aGUgQ0xJUEJPQVJEIHNlbGVjdGlvbi4gIChUaGlzIGVuYWJsZXNcbiAgICogICAgIHRoZSBzZWxlY3RUb0NsaXBib2FyZCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDIgIC0+IEVuYWJsZSBVcmdlbmN5IHdpbmRvdyBtYW5hZ2VyIGhpbnQgd2hlblxuICAgKiAgICAgQ29udHJvbC1HIGlzIHJlY2VpdmVkLiAgKFRoaXMgZW5hYmxlcyB0aGUgYmVsbElzVXJnZW50XG4gICAqICAgICByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDMgIC0+IEVuYWJsZSByYWlzaW5nIG9mIHRoZSB3aW5kb3cgd2hlbiBDb250cm9sLUdcbiAgICogICAgIGlzIHJlY2VpdmVkLiAgKGVuYWJsZXMgdGhlIHBvcE9uQmVsbCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDcgIC0+IFVzZSBBbHRlcm5hdGUgU2NyZWVuIEJ1ZmZlci4gIChUaGlzIG1heSBiZVxuICAgKiAgICAgZGlzYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOCAgLT4gU2F2ZSBjdXJzb3IgYXMgaW4gREVDU0MuICAoVGhpcyBtYXkgYmUgZGlzLVxuICAgKiAgICAgYWJsZWQgYnkgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOSAgLT4gU2F2ZSBjdXJzb3IgYXMgaW4gREVDU0MgYW5kIHVzZSBBbHRlcm5hdGVcbiAgICogICAgIFNjcmVlbiBCdWZmZXIsIGNsZWFyaW5nIGl0IGZpcnN0LiAgKFRoaXMgbWF5IGJlIGRpc2FibGVkIGJ5XG4gICAqICAgICB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLiAgVGhpcyBjb21iaW5lcyB0aGUgZWZmZWN0cyBvZiB0aGUgMVxuICAgKiAgICAgMCA0IDcgIGFuZCAxIDAgNCA4ICBtb2Rlcy4gIFVzZSB0aGlzIHdpdGggdGVybWluZm8tYmFzZWRcbiAgICogICAgIGFwcGxpY2F0aW9ucyByYXRoZXIgdGhhbiB0aGUgNCA3ICBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAwICAtPiBTZXQgdGVybWluZm8vdGVybWNhcCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMSAgLT4gU2V0IFN1biBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMiAgLT4gU2V0IEhQIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAzICAtPiBTZXQgU0NPIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNiAwICAtPiBTZXQgbGVnYWN5IGtleWJvYXJkIGVtdWxhdGlvbiAoWDExUjYpLlxuICAgKiAgICAgUHMgPSAxIDAgNiAxICAtPiBTZXQgVlQyMjAga2V5Ym9hcmQgZW11bGF0aW9uLlxuICAgKiAgICAgUHMgPSAyIDAgMCA0ICAtPiBTZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuXG4gICAqIE1vZGVzOlxuICAgKiAgIGh0dHA6ICp2dDEwMC5uZXQvZG9jcy92dDIyMC1ybS9jaGFwdGVyNC5odG1sXG4gICAqL1xuICBwdWJsaWMgc2V0TW9kZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3dpdGNoIChwYXJhbXMucGFyYW1zW2ldKSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5pbnNlcnRNb2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMDpcbiAgICAgICAgICAvLyB0aGlzLl90LmNvbnZlcnRFb2wgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgc2V0TW9kZVByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1tpXSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZXRnQ2hhcnNldCgwLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNldGdDaGFyc2V0KDEsIERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuc2V0Z0NoYXJzZXQoMiwgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zZXRnQ2hhcnNldCgzLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIC8vIHNldCBWVDEwMCBtb2RlIGhlcmVcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOiAvLyAxMzIgY29sIG1vZGVcbiAgICAgICAgICAvLyBUT0RPOiBtb3ZlIERFQ0NPTE0gaW50byBjb21wYXQgYWRkb25cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHMgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwucmVzaXplKDEzMiwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5yZXNldCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwub3JpZ2luTW9kZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwud3JhcGFyb3VuZE1vZGUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgIC8vIHRoaXMuY3Vyc29yQmxpbmsgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY2OlxuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1NlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuJyk7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuYXBwbGljYXRpb25LZXlwYWQgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGlzLl90ZXJtaW5hbC52aWV3cG9ydCkge1xuICAgICAgICAgICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgOTogLy8gWDEwIE1vdXNlXG4gICAgICAgICAgLy8gbm8gcmVsZWFzZSwgbm8gbW90aW9uLCBubyB3aGVlbCwgbm8gbW9kaWZpZXJzLlxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnWDEwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDAwOiAvLyB2dDIwMCBtb3VzZVxuICAgICAgICAgIC8vIG5vIG1vdGlvbi5cbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ1ZUMjAwJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDAyOiAvLyBidXR0b24gZXZlbnQgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ0RSQUcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDM6IC8vIGFueSBldmVudCBtb3VzZVxuICAgICAgICAgIC8vIGFueSBldmVudCAtIHNlbmRzIG1vdGlvbiBldmVudHMsXG4gICAgICAgICAgLy8gZXZlbiBpZiB0aGVyZSBpcyBubyBidXR0b24gaGVsZCBkb3duLlxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnQU5ZJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA0OiAvLyBzZW5kIGZvY3VzaW4vZm9jdXNvdXQgZXZlbnRzXG4gICAgICAgICAgLy8gZm9jdXNpbjogXltbSVxuICAgICAgICAgIC8vIGZvY3Vzb3V0OiBeW1tPXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuc2VuZEZvY3VzID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA1OiAvLyB1dGY4IGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgLy8gZm9yIHdpZGUgdGVybWluYWxzXG4gICAgICAgICAgLy8gc2ltcGx5IGVuY29kZXMgbGFyZ2UgdmFsdWVzIGFzIHV0ZjggY2hhcmFjdGVyc1xuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2RpbmcgPSAnVVRGOCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNjogLy8gc2dyIGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVFbmNvZGluZyA9ICdTR1InO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTU6IC8vIHVyeHZ0IGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVFbmNvZGluZyA9ICdVUlhWVCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjU6IC8vIHNob3cgY3Vyc29yXG4gICAgICAgICAgdGhpcy5fdGVybWluYWwuY3Vyc29ySGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0ODogLy8gYWx0IHNjcmVlbiBjdXJzb3JcbiAgICAgICAgICB0aGlzLnNhdmVDdXJzb3IoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ5OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlciBjdXJzb3JcbiAgICAgICAgICB0aGlzLnNhdmVDdXJzb3IoKTtcbiAgICAgICAgICAvLyBGQUxMLVRIUk9VR0hcbiAgICAgICAgY2FzZSA0NzogLy8gYWx0IHNjcmVlbiBidWZmZXJcbiAgICAgICAgY2FzZSAxMDQ3OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlclxuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmF0ZUFsdEJ1ZmZlcih0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpO1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlZnJlc2goMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gICAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zaG93Q3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5icmFja2V0ZWRQYXN0ZU1vZGUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIENTSSBQbSBsICBSZXNldCBNb2RlIChSTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IEtleWJvYXJkIEFjdGlvbiBNb2RlIChBTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IFJlcGxhY2UgTW9kZSAoSVJNKS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTZW5kL3JlY2VpdmUgKFNSTSkuXG4gICAqICAgICBQcyA9IDIgMCAgLT4gTm9ybWFsIExpbmVmZWVkIChMTk0pLlxuICAgKiBDU0kgPyBQbSBsXG4gICAqICAgREVDIFByaXZhdGUgTW9kZSBSZXNldCAoREVDUlNUKS5cbiAgICogICAgIFBzID0gMSAgLT4gTm9ybWFsIEN1cnNvciBLZXlzIChERUNDS00pLlxuICAgKiAgICAgUHMgPSAyICAtPiBEZXNpZ25hdGUgVlQ1MiBtb2RlIChERUNBTk0pLlxuICAgKiAgICAgUHMgPSAzICAtPiA4MCBDb2x1bW4gTW9kZSAoREVDQ09MTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IEp1bXAgKEZhc3QpIFNjcm9sbCAoREVDU0NMTSkuXG4gICAqICAgICBQcyA9IDUgIC0+IE5vcm1hbCBWaWRlbyAoREVDU0NOTSkuXG4gICAqICAgICBQcyA9IDYgIC0+IE5vcm1hbCBDdXJzb3IgTW9kZSAoREVDT00pLlxuICAgKiAgICAgUHMgPSA3ICAtPiBObyBXcmFwYXJvdW5kIE1vZGUgKERFQ0FXTSkuXG4gICAqICAgICBQcyA9IDggIC0+IE5vIEF1dG8tcmVwZWF0IEtleXMgKERFQ0FSTSkuXG4gICAqICAgICBQcyA9IDkgIC0+IERvbid0IHNlbmQgTW91c2UgWCAmIFkgb24gYnV0dG9uIHByZXNzLlxuICAgKiAgICAgUHMgPSAxIDAgIC0+IEhpZGUgdG9vbGJhciAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMiAgLT4gU3RvcCBCbGlua2luZyBDdXJzb3IgKGF0dDYxMCkuXG4gICAqICAgICBQcyA9IDEgOCAgLT4gRG9uJ3QgcHJpbnQgZm9ybSBmZWVkIChERUNQRkYpLlxuICAgKiAgICAgUHMgPSAxIDkgIC0+IExpbWl0IHByaW50IHRvIHNjcm9sbGluZyByZWdpb24gKERFQ1BFWCkuXG4gICAqICAgICBQcyA9IDIgNSAgLT4gSGlkZSBDdXJzb3IgKERFQ1RDRU0pLlxuICAgKiAgICAgUHMgPSAzIDAgIC0+IERvbid0IHNob3cgc2Nyb2xsYmFyIChyeHZ0KS5cbiAgICogICAgIFBzID0gMyA1ICAtPiBEaXNhYmxlIGZvbnQtc2hpZnRpbmcgZnVuY3Rpb25zIChyeHZ0KS5cbiAgICogICAgIFBzID0gNCAwICAtPiBEaXNhbGxvdyA4MCAtPiAxMzIgTW9kZS5cbiAgICogICAgIFBzID0gNCAxICAtPiBObyBtb3JlKDEpIGZpeCAoc2VlIGN1cnNlcyByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDQgMiAgLT4gRGlzYWJsZSBOYXRpb24gUmVwbGFjZW1lbnQgQ2hhcmFjdGVyIHNldHMgKERFQy1cbiAgICogICAgIE5SQ00pLlxuICAgKiAgICAgUHMgPSA0IDQgIC0+IFR1cm4gT2ZmIE1hcmdpbiBCZWxsLlxuICAgKiAgICAgUHMgPSA0IDUgIC0+IE5vIFJldmVyc2Utd3JhcGFyb3VuZCBNb2RlLlxuICAgKiAgICAgUHMgPSA0IDYgIC0+IFN0b3AgTG9nZ2luZy4gIChUaGlzIGlzIG5vcm1hbGx5IGRpc2FibGVkIGJ5IGFcbiAgICogICAgIGNvbXBpbGUtdGltZSBvcHRpb24pLlxuICAgKiAgICAgUHMgPSA0IDcgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlci5cbiAgICogICAgIFBzID0gNiA2ICAtPiBOdW1lcmljIGtleXBhZCAoREVDTktNKS5cbiAgICogICAgIFBzID0gNiA3ICAtPiBCYWNrYXJyb3cga2V5IHNlbmRzIGRlbGV0ZSAoREVDQktNKS5cbiAgICogICAgIFBzID0gMSAwIDAgMCAgLT4gRG9uJ3Qgc2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MgYW5kXG4gICAqICAgICByZWxlYXNlLiAgU2VlIHRoZSBzZWN0aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAxICAtPiBEb24ndCB1c2UgSGlsaXRlIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCAyICAtPiBEb24ndCB1c2UgQ2VsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDMgIC0+IERvbid0IHVzZSBBbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLlxuICAgKiAgICAgUHMgPSAxIDAgMCA0ICAtPiBEb24ndCBzZW5kIEZvY3VzSW4vRm9jdXNPdXQgZXZlbnRzLlxuICAgKiAgICAgUHMgPSAxIDAgMCA1ICAtPiBEaXNhYmxlIEV4dGVuZGVkIE1vdXNlIE1vZGUuXG4gICAqICAgICBQcyA9IDEgMCAxIDAgIC0+IERvbid0IHNjcm9sbCB0byBib3R0b20gb24gdHR5IG91dHB1dFxuICAgKiAgICAgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDAgMSAxICAtPiBEb24ndCBzY3JvbGwgdG8gYm90dG9tIG9uIGtleSBwcmVzcyAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAzIDQgIC0+IERvbid0IGludGVycHJldCBcIm1ldGFcIiBrZXkuICAoVGhpcyBkaXNhYmxlc1xuICAgKiAgICAgdGhlIGVpZ2h0Qml0SW5wdXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA1ICAtPiBEaXNhYmxlIHNwZWNpYWwgbW9kaWZpZXJzIGZvciBBbHQgYW5kIE51bS1cbiAgICogICAgIExvY2sga2V5cy4gIChUaGlzIGRpc2FibGVzIHRoZSBudW1Mb2NrIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNiAgLT4gRG9uJ3Qgc2VuZCBFU0MgIHdoZW4gTWV0YSBtb2RpZmllcyBhIGtleS5cbiAgICogICAgIChUaGlzIGRpc2FibGVzIHRoZSBtZXRhU2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA3ICAtPiBTZW5kIFZUMjIwIFJlbW92ZSBmcm9tIHRoZSBlZGl0aW5nLWtleXBhZFxuICAgKiAgICAgRGVsZXRlIGtleS5cbiAgICogICAgIFBzID0gMSAwIDMgOSAgLT4gRG9uJ3Qgc2VuZCBFU0MgIHdoZW4gQWx0IG1vZGlmaWVzIGEga2V5LlxuICAgKiAgICAgKFRoaXMgZGlzYWJsZXMgdGhlIGFsdFNlbmRzRXNjYXBlIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMCAgLT4gRG8gbm90IGtlZXAgc2VsZWN0aW9uIHdoZW4gbm90IGhpZ2hsaWdodGVkLlxuICAgKiAgICAgKFRoaXMgZGlzYWJsZXMgdGhlIGtlZXBTZWxlY3Rpb24gcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAxICAtPiBVc2UgdGhlIFBSSU1BUlkgc2VsZWN0aW9uLiAgKFRoaXMgZGlzYWJsZXNcbiAgICogICAgIHRoZSBzZWxlY3RUb0NsaXBib2FyZCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDIgIC0+IERpc2FibGUgVXJnZW5jeSB3aW5kb3cgbWFuYWdlciBoaW50IHdoZW5cbiAgICogICAgIENvbnRyb2wtRyBpcyByZWNlaXZlZC4gIChUaGlzIGRpc2FibGVzIHRoZSBiZWxsSXNVcmdlbnRcbiAgICogICAgIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMyAgLT4gRGlzYWJsZSByYWlzaW5nIG9mIHRoZSB3aW5kb3cgd2hlbiBDb250cm9sLVxuICAgKiAgICAgRyBpcyByZWNlaXZlZC4gIChUaGlzIGRpc2FibGVzIHRoZSBwb3BPbkJlbGwgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA3ICAtPiBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIsIGNsZWFyaW5nIHNjcmVlblxuICAgKiAgICAgZmlyc3QgaWYgaW4gdGhlIEFsdGVybmF0ZSBTY3JlZW4uICAoVGhpcyBtYXkgYmUgZGlzYWJsZWQgYnlcbiAgICogICAgIHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDggIC0+IFJlc3RvcmUgY3Vyc29yIGFzIGluIERFQ1JDLiAgKFRoaXMgbWF5IGJlXG4gICAqICAgICBkaXNhYmxlZCBieSB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA5ICAtPiBVc2UgTm9ybWFsIFNjcmVlbiBCdWZmZXIgYW5kIHJlc3RvcmUgY3Vyc29yXG4gICAqICAgICBhcyBpbiBERUNSQy4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieSB0aGUgdGl0ZUluaGliaXRcbiAgICogICAgIHJlc291cmNlKS4gIFRoaXMgY29tYmluZXMgdGhlIGVmZmVjdHMgb2YgdGhlIDEgMCA0IDcgIGFuZCAxIDBcbiAgICogICAgIDQgOCAgbW9kZXMuICBVc2UgdGhpcyB3aXRoIHRlcm1pbmZvLWJhc2VkIGFwcGxpY2F0aW9ucyByYXRoZXJcbiAgICogICAgIHRoYW4gdGhlIDQgNyAgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMCAgLT4gUmVzZXQgdGVybWluZm8vdGVybWNhcCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMSAgLT4gUmVzZXQgU3VuIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAyICAtPiBSZXNldCBIUCBmdW5jdGlvbi1rZXkgbW9kZS5cbiAgICogICAgIFBzID0gMSAwIDUgMyAgLT4gUmVzZXQgU0NPIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNiAwICAtPiBSZXNldCBsZWdhY3kga2V5Ym9hcmQgZW11bGF0aW9uIChYMTFSNikuXG4gICAqICAgICBQcyA9IDEgMCA2IDEgIC0+IFJlc2V0IGtleWJvYXJkIGVtdWxhdGlvbiB0byBTdW4vUEMgc3R5bGUuXG4gICAqICAgICBQcyA9IDIgMCAwIDQgIC0+IFJlc2V0IGJyYWNrZXRlZCBwYXN0ZSBtb2RlLlxuICAgKi9cbiAgcHVibGljIHJlc2V0TW9kZShwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3dpdGNoIChwYXJhbXMucGFyYW1zW2ldKSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5pbnNlcnRNb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgLy8gdGhpcy5fdC5jb252ZXJ0RW9sID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyByZXNldE1vZGVQcml2YXRlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbaV0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIC8vIFRPRE86IG1vdmUgREVDQ09MTSBpbnRvIGNvbXBhdCBhZGRvblxuICAgICAgICAgIC8vIE5vdGU6IFRoaXMgaW1wbCBjdXJyZW50bHkgZG9lcyBub3QgZW5mb3JjZSBjb2wgODAsIGluc3RlYWQgcmV2ZXJ0c1xuICAgICAgICAgIC8vIHRvIHByZXZpb3VzIHRlcm1pbmFsIHdpZHRoIGJlZm9yZSBlbnRlcmluZyBERUNDT0xNIDEzMlxuICAgICAgICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgPT09IDEzMiAmJiB0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl90ZXJtaW5hbC5zYXZlZENvbHM7XG4gICAgICAgICAgdGhpcy5fdGVybWluYWwucmVzZXQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLm9yaWdpbk1vZGUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9zZXRDdXJzb3IoMCwgMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC53cmFwYXJvdW5kTW9kZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgIC8vIHRoaXMuY3Vyc29yQmxpbmsgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2NjpcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdTd2l0Y2hpbmcgYmFjayB0byBub3JtYWwga2V5cGFkLicpO1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLmFwcGxpY2F0aW9uS2V5cGFkID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5OiAvLyBYMTAgTW91c2VcbiAgICAgICAgY2FzZSAxMDAwOiAvLyB2dDIwMCBtb3VzZVxuICAgICAgICBjYXNlIDEwMDI6IC8vIGJ1dHRvbiBldmVudCBtb3VzZVxuICAgICAgICBjYXNlIDEwMDM6IC8vIGFueSBldmVudCBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnTk9ORSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNDogLy8gc2VuZCBmb2N1c2luL2ZvY3Vzb3V0IGV2ZW50c1xuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnNlbmRGb2N1cyA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDU6IC8vIHV0ZjggZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMDY6IC8vIHNnciBleHQgbW9kZSBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2RpbmcgPSAnREVGQVVMVCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAxNTogLy8gdXJ4dnQgZXh0IG1vZGUgbW91c2VcbiAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVFbmNvZGluZyA9ICdERUZBVUxUJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyNTogLy8gaGlkZSBjdXJzb3JcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5jdXJzb3JIaWRkZW4gPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDg6IC8vIGFsdCBzY3JlZW4gY3Vyc29yXG4gICAgICAgICAgdGhpcy5yZXN0b3JlQ3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0OTogLy8gYWx0IHNjcmVlbiBidWZmZXIgY3Vyc29yXG4gICAgICAgICAgIC8vIEZBTEwtVEhST1VHSFxuICAgICAgICBjYXNlIDQ3OiAvLyBub3JtYWwgc2NyZWVuIGJ1ZmZlclxuICAgICAgICBjYXNlIDEwNDc6IC8vIG5vcm1hbCBzY3JlZW4gYnVmZmVyIC0gY2xlYXJpbmcgaXQgZmlyc3RcbiAgICAgICAgICAvLyBFbnN1cmUgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGhhcyB0aGUgY29ycmVjdCBidWZmZXJcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVOb3JtYWxCdWZmZXIoKTtcbiAgICAgICAgICBpZiAocGFyYW1zLnBhcmFtc1tpXSA9PT0gMTA0OSkge1xuICAgICAgICAgICAgdGhpcy5yZXN0b3JlQ3Vyc29yKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlZnJlc2goMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gICAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5zaG93Q3Vyc29yKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl90ZXJtaW5hbC5icmFja2V0ZWRQYXN0ZU1vZGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGV4dHJhY3QgYW5kIGFwcGx5IGNvbG9yIHBhcmFtcy9zdWJwYXJhbXMuXG4gICAqIFJldHVybnMgYWR2YW5jZSBmb3IgcGFyYW1zIGluZGV4LlxuICAgKi9cbiAgcHJpdmF0ZSBfZXh0cmFjdENvbG9yKHBhcmFtczogSVBhcmFtcywgcG9zOiBudW1iZXIsIGF0dHI6IElBdHRyaWJ1dGVEYXRhKTogbnVtYmVyIHtcbiAgICAvLyBub3JtYWxpemUgcGFyYW1zXG4gICAgLy8gbWVhbmluZzogW3RhcmdldCwgQ00sIGlnbiwgdmFsLCB2YWwsIHZhbF1cbiAgICAvLyBSR0IgICAgOiBbIDM4LzQ4LCAgMiwgaWduLCAgIHIsICAgZywgICBiXVxuICAgIC8vIFAyNTYgICA6IFsgMzgvNDgsICA1LCBpZ24sICAgdiwgaWduLCBpZ25dXG4gICAgY29uc3QgYWNjdSA9IFswLCAwLCAtMSwgMCwgMCwgMF07XG5cbiAgICAvLyBhbGlnbm1lbnQgcGxhY2Vob2xkZXIgZm9yIG5vbiBjb2xvciBzcGFjZSBzZXF1ZW5jZXNcbiAgICBsZXQgY1NwYWNlID0gMDtcblxuICAgIC8vIHJldHVybiBhZHZhbmNlIHdlIHRvb2sgaW4gcGFyYW1zXG4gICAgbGV0IGFkdmFuY2UgPSAwO1xuXG4gICAgZG8ge1xuICAgICAgYWNjdVthZHZhbmNlICsgY1NwYWNlXSA9IHBhcmFtcy5wYXJhbXNbcG9zICsgYWR2YW5jZV07XG4gICAgICBpZiAocGFyYW1zLmhhc1N1YlBhcmFtcyhwb3MgKyBhZHZhbmNlKSkge1xuICAgICAgICBjb25zdCBzdWJwYXJhbXMgPSBwYXJhbXMuZ2V0U3ViUGFyYW1zKHBvcyArIGFkdmFuY2UpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAoYWNjdVsxXSA9PT0gNSkge1xuICAgICAgICAgICAgY1NwYWNlID0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWNjdVthZHZhbmNlICsgaSArIDEgKyBjU3BhY2VdID0gc3VicGFyYW1zW2ldO1xuICAgICAgICB9IHdoaWxlICgrK2kgPCBzdWJwYXJhbXMubGVuZ3RoICYmIGkgKyBhZHZhbmNlICsgMSArIGNTcGFjZSA8IGFjY3UubGVuZ3RoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBleGl0IGVhcmx5IGlmIGNhbiBkZWNpZGUgY29sb3IgbW9kZSB3aXRoIHNlbWljb2xvbnNcbiAgICAgIGlmICgoYWNjdVsxXSA9PT0gNSAmJiBhZHZhbmNlICsgY1NwYWNlID49IDIpXG4gICAgICAgICAgfHwgKGFjY3VbMV0gPT09IDIgJiYgYWR2YW5jZSArIGNTcGFjZSA+PSA1KSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIG9mZnNldCBjb2xvclNwYWNlIHNsb3QgZm9yIHNlbWljb2xvbiBtb2RlXG4gICAgICBpZiAoYWNjdVsxXSkge1xuICAgICAgICBjU3BhY2UgPSAxO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKCsrYWR2YW5jZSArIHBvcyA8IHBhcmFtcy5sZW5ndGggJiYgYWR2YW5jZSArIGNTcGFjZSA8IGFjY3UubGVuZ3RoKTtcblxuICAgIC8vIHNldCBkZWZhdWx0IHZhbHVlcyB0byAwXG4gICAgZm9yIChsZXQgaSA9IDI7IGkgPCBhY2N1Lmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAoYWNjdVtpXSA9PT0gLTEpIHtcbiAgICAgICAgYWNjdVtpXSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgY29sb3JzXG4gICAgaWYgKGFjY3VbMF0gPT09IDM4KSB7XG4gICAgICBpZiAoYWNjdVsxXSA9PT0gMikge1xuICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZXMuQ01fUkdCO1xuICAgICAgICBhdHRyLmZnICY9IH5BdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZURhdGEuZnJvbUNvbG9yUkdCKFthY2N1WzNdLCBhY2N1WzRdLCBhY2N1WzVdXSk7XG4gICAgICB9IGVsc2UgaWYgKGFjY3VbMV0gPT09IDUpIHtcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IEF0dHJpYnV0ZXMuQ01fUDI1NiB8IChhY2N1WzNdICYgMHhmZik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhY2N1WzBdID09PSA0OCkge1xuICAgICAgaWYgKGFjY3VbMV0gPT09IDIpIHtcbiAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1JHQjtcbiAgICAgICAgYXR0ci5iZyAmPSB+QXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVEYXRhLmZyb21Db2xvclJHQihbYWNjdVszXSwgYWNjdVs0XSwgYWNjdVs1XV0pO1xuICAgICAgfSBlbHNlIGlmIChhY2N1WzFdID09PSA1KSB7XG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1AyNTYgfCAoYWNjdVszXSAmIDB4ZmYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhZHZhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBtICBDaGFyYWN0ZXIgQXR0cmlidXRlcyAoU0dSKS5cbiAgICogICAgIFBzID0gMCAgLT4gTm9ybWFsIChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMSAgLT4gQm9sZC5cbiAgICogICAgIFBzID0gMiAgLT4gRmFpbnQsIGRlY3JlYXNlZCBpbnRlbnNpdHkgKElTTyA2NDI5KS5cbiAgICogICAgIFBzID0gNCAgLT4gVW5kZXJsaW5lZC5cbiAgICogICAgIFBzID0gNSAgLT4gQmxpbmsgKGFwcGVhcnMgYXMgQm9sZCkuXG4gICAqICAgICBQcyA9IDcgIC0+IEludmVyc2UuXG4gICAqICAgICBQcyA9IDggIC0+IEludmlzaWJsZSwgaS5lLiwgaGlkZGVuIChWVDMwMCkuXG4gICAqICAgICBQcyA9IDIgMiAgLT4gTm9ybWFsIChuZWl0aGVyIGJvbGQgbm9yIGZhaW50KS5cbiAgICogICAgIFBzID0gMiA0ICAtPiBOb3QgdW5kZXJsaW5lZC5cbiAgICogICAgIFBzID0gMiA1ICAtPiBTdGVhZHkgKG5vdCBibGlua2luZykuXG4gICAqICAgICBQcyA9IDIgNyAgLT4gUG9zaXRpdmUgKG5vdCBpbnZlcnNlKS5cbiAgICogICAgIFBzID0gMiA4ICAtPiBWaXNpYmxlLCBpLmUuLCBub3QgaGlkZGVuIChWVDMwMCkuXG4gICAqICAgICBQcyA9IDMgMCAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gQmxhY2suXG4gICAqICAgICBQcyA9IDMgMSAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gUmVkLlxuICAgKiAgICAgUHMgPSAzIDIgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEdyZWVuLlxuICAgKiAgICAgUHMgPSAzIDMgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFllbGxvdy5cbiAgICogICAgIFBzID0gMyA0ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBCbHVlLlxuICAgKiAgICAgUHMgPSAzIDUgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIE1hZ2VudGEuXG4gICAqICAgICBQcyA9IDMgNiAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gQ3lhbi5cbiAgICogICAgIFBzID0gMyA3ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBXaGl0ZS5cbiAgICogICAgIFBzID0gMyA5ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBkZWZhdWx0IChvcmlnaW5hbCkuXG4gICAqICAgICBQcyA9IDQgMCAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gQmxhY2suXG4gICAqICAgICBQcyA9IDQgMSAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gUmVkLlxuICAgKiAgICAgUHMgPSA0IDIgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEdyZWVuLlxuICAgKiAgICAgUHMgPSA0IDMgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFllbGxvdy5cbiAgICogICAgIFBzID0gNCA0ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBCbHVlLlxuICAgKiAgICAgUHMgPSA0IDUgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIE1hZ2VudGEuXG4gICAqICAgICBQcyA9IDQgNiAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gQ3lhbi5cbiAgICogICAgIFBzID0gNCA3ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBXaGl0ZS5cbiAgICogICAgIFBzID0gNCA5ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBkZWZhdWx0IChvcmlnaW5hbCkuXG4gICAqXG4gICAqICAgSWYgMTYtY29sb3Igc3VwcG9ydCBpcyBjb21waWxlZCwgdGhlIGZvbGxvd2luZyBhcHBseS4gIEFzc3VtZVxuICAgKiAgIHRoYXQgeHRlcm0ncyByZXNvdXJjZXMgYXJlIHNldCBzbyB0aGF0IHRoZSBJU08gY29sb3IgY29kZXMgYXJlXG4gICAqICAgdGhlIGZpcnN0IDggb2YgYSBzZXQgb2YgMTYuICBUaGVuIHRoZSBhaXh0ZXJtIGNvbG9ycyBhcmUgdGhlXG4gICAqICAgYnJpZ2h0IHZlcnNpb25zIG9mIHRoZSBJU08gY29sb3JzOlxuICAgKiAgICAgUHMgPSA5IDAgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEJsYWNrLlxuICAgKiAgICAgUHMgPSA5IDEgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFJlZC5cbiAgICogICAgIFBzID0gOSAyICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBHcmVlbi5cbiAgICogICAgIFBzID0gOSAzICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBZZWxsb3cuXG4gICAqICAgICBQcyA9IDkgNCAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gQmx1ZS5cbiAgICogICAgIFBzID0gOSA1ICAtPiBTZXQgZm9yZWdyb3VuZCBjb2xvciB0byBNYWdlbnRhLlxuICAgKiAgICAgUHMgPSA5IDYgIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIEN5YW4uXG4gICAqICAgICBQcyA9IDkgNyAgLT4gU2V0IGZvcmVncm91bmQgY29sb3IgdG8gV2hpdGUuXG4gICAqICAgICBQcyA9IDEgMCAwICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBCbGFjay5cbiAgICogICAgIFBzID0gMSAwIDEgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFJlZC5cbiAgICogICAgIFBzID0gMSAwIDIgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIEdyZWVuLlxuICAgKiAgICAgUHMgPSAxIDAgMyAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gWWVsbG93LlxuICAgKiAgICAgUHMgPSAxIDAgNCAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gQmx1ZS5cbiAgICogICAgIFBzID0gMSAwIDUgIC0+IFNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIE1hZ2VudGEuXG4gICAqICAgICBQcyA9IDEgMCA2ICAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byBDeWFuLlxuICAgKiAgICAgUHMgPSAxIDAgNyAgLT4gU2V0IGJhY2tncm91bmQgY29sb3IgdG8gV2hpdGUuXG4gICAqXG4gICAqICAgSWYgeHRlcm0gaXMgY29tcGlsZWQgd2l0aCB0aGUgMTYtY29sb3Igc3VwcG9ydCBkaXNhYmxlZCwgaXRcbiAgICogICBzdXBwb3J0cyB0aGUgZm9sbG93aW5nLCBmcm9tIHJ4dnQ6XG4gICAqICAgICBQcyA9IDEgMCAwICAtPiBTZXQgZm9yZWdyb3VuZCBhbmQgYmFja2dyb3VuZCBjb2xvciB0b1xuICAgKiAgICAgZGVmYXVsdC5cbiAgICpcbiAgICogICBJZiA4OC0gb3IgMjU2LWNvbG9yIHN1cHBvcnQgaXMgY29tcGlsZWQsIHRoZSBmb2xsb3dpbmcgYXBwbHkuXG4gICAqICAgICBQcyA9IDMgOCAgOyA1ICA7IFBzIC0+IFNldCBmb3JlZ3JvdW5kIGNvbG9yIHRvIHRoZSBzZWNvbmRcbiAgICogICAgIFBzLlxuICAgKiAgICAgUHMgPSA0IDggIDsgNSAgOyBQcyAtPiBTZXQgYmFja2dyb3VuZCBjb2xvciB0byB0aGUgc2Vjb25kXG4gICAqICAgICBQcy5cbiAgICovXG4gIHB1YmxpYyBjaGFyQXR0cmlidXRlcyhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICAvLyBPcHRpbWl6ZSBhIHNpbmdsZSBTR1IwLlxuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAxICYmIHBhcmFtcy5wYXJhbXNbMF0gPT09IDApIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLmN1ckF0dHJEYXRhLmZnID0gREVGQVVMVF9BVFRSX0RBVEEuZmc7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YS5iZyA9IERFRkFVTFRfQVRUUl9EQVRBLmJnO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGwgPSBwYXJhbXMubGVuZ3RoO1xuICAgIGxldCBwO1xuICAgIGNvbnN0IGF0dHIgPSB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICBwID0gcGFyYW1zLnBhcmFtc1tpXTtcbiAgICAgIGlmIChwID49IDMwICYmIHAgPD0gMzcpIHtcbiAgICAgICAgLy8gZmcgY29sb3IgOFxuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDMwKTtcbiAgICAgIH0gZWxzZSBpZiAocCA+PSA0MCAmJiBwIDw9IDQ3KSB7XG4gICAgICAgIC8vIGJnIGNvbG9yIDhcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSA0MCk7XG4gICAgICB9IGVsc2UgaWYgKHAgPj0gOTAgJiYgcCA8PSA5Nykge1xuICAgICAgICAvLyBmZyBjb2xvciAxNlxuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDkwKSB8IDg7XG4gICAgICB9IGVsc2UgaWYgKHAgPj0gMTAwICYmIHAgPD0gMTA3KSB7XG4gICAgICAgIC8vIGJnIGNvbG9yIDE2XG4gICAgICAgIGF0dHIuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gMTAwKSB8IDg7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDApIHtcbiAgICAgICAgLy8gZGVmYXVsdFxuICAgICAgICBhdHRyLmZnID0gREVGQVVMVF9BVFRSX0RBVEEuZmc7XG4gICAgICAgIGF0dHIuYmcgPSBERUZBVUxUX0FUVFJfREFUQS5iZztcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMSkge1xuICAgICAgICAvLyBib2xkIHRleHRcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLkJPTEQ7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDMpIHtcbiAgICAgICAgLy8gaXRhbGljIHRleHRcbiAgICAgICAgYXR0ci5iZyB8PSBCZ0ZsYWdzLklUQUxJQztcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNCkge1xuICAgICAgICAvLyB1bmRlcmxpbmVkIHRleHRcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLlVOREVSTElORTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gNSkge1xuICAgICAgICAvLyBibGlua1xuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuQkxJTks7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDcpIHtcbiAgICAgICAgLy8gaW52ZXJzZSBhbmQgcG9zaXRpdmVcbiAgICAgICAgLy8gdGVzdCB3aXRoOiBlY2hvIC1lICdcXGVbMzFtXFxlWzQybWhlbGxvXFxlWzdtd29ybGRcXGVbMjdtaGlcXGVbbSdcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLklOVkVSU0U7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDgpIHtcbiAgICAgICAgLy8gaW52aXNpYmxlXG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5JTlZJU0lCTEU7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIpIHtcbiAgICAgICAgLy8gZGltbWVkIHRleHRcbiAgICAgICAgYXR0ci5iZyB8PSBCZ0ZsYWdzLkRJTTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjIpIHtcbiAgICAgICAgLy8gbm90IGJvbGQgbm9yIGZhaW50XG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuQk9MRDtcbiAgICAgICAgYXR0ci5iZyAmPSB+QmdGbGFncy5ESU07XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIzKSB7XG4gICAgICAgIC8vIG5vdCBpdGFsaWNcbiAgICAgICAgYXR0ci5iZyAmPSB+QmdGbGFncy5JVEFMSUM7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI0KSB7XG4gICAgICAgIC8vIG5vdCB1bmRlcmxpbmVkXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuVU5ERVJMSU5FO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyNSkge1xuICAgICAgICAvLyBub3QgYmxpbmtcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5CTElOSztcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjcpIHtcbiAgICAgICAgLy8gbm90IGludmVyc2VcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5JTlZFUlNFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyOCkge1xuICAgICAgICAvLyBub3QgaW52aXNpYmxlXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuSU5WSVNJQkxFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAzOSkge1xuICAgICAgICAvLyByZXNldCBmZ1xuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuZmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA0OSkge1xuICAgICAgICAvLyByZXNldCBiZ1xuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuYmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAzOCB8fCBwID09PSA0OCkge1xuICAgICAgICAvLyBmZyBjb2xvciAyNTYgYW5kIFJHQlxuICAgICAgICBpICs9IHRoaXMuX2V4dHJhY3RDb2xvcihwYXJhbXMsIGksIGF0dHIpO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAxMDApIHtcbiAgICAgICAgLy8gcmVzZXQgZmcvYmdcbiAgICAgICAgYXR0ci5mZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmZnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmZnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IERFRkFVTFRfQVRUUl9EQVRBLmJnICYgKEF0dHJpYnV0ZXMuUENPTE9SX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gU0dSIGF0dHJpYnV0ZTogJWQuJywgcCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBuICBEZXZpY2UgU3RhdHVzIFJlcG9ydCAoRFNSKS5cbiAgICogICAgIFBzID0gNSAgLT4gU3RhdHVzIFJlcG9ydC4gIFJlc3VsdCAoYGBPSycnKSBpc1xuICAgKiAgIENTSSAwIG5cbiAgICogICAgIFBzID0gNiAgLT4gUmVwb3J0IEN1cnNvciBQb3NpdGlvbiAoQ1BSKSBbcm93O2NvbHVtbl0uXG4gICAqICAgUmVzdWx0IGlzXG4gICAqICAgQ1NJIHIgOyBjIFJcbiAgICogQ1NJID8gUHMgblxuICAgKiAgIERldmljZSBTdGF0dXMgUmVwb3J0IChEU1IsIERFQy1zcGVjaWZpYykuXG4gICAqICAgICBQcyA9IDYgIC0+IFJlcG9ydCBDdXJzb3IgUG9zaXRpb24gKENQUikgW3Jvdztjb2x1bW5dIGFzIENTSVxuICAgKiAgICAgPyByIDsgYyBSIChhc3N1bWVzIHBhZ2UgaXMgemVybykuXG4gICAqICAgICBQcyA9IDEgNSAgLT4gUmVwb3J0IFByaW50ZXIgc3RhdHVzIGFzIENTSSA/IDEgMCAgbiAgKHJlYWR5KS5cbiAgICogICAgIG9yIENTSSA/IDEgMSAgbiAgKG5vdCByZWFkeSkuXG4gICAqICAgICBQcyA9IDIgNSAgLT4gUmVwb3J0IFVESyBzdGF0dXMgYXMgQ1NJID8gMiAwICBuICAodW5sb2NrZWQpXG4gICAqICAgICBvciBDU0kgPyAyIDEgIG4gIChsb2NrZWQpLlxuICAgKiAgICAgUHMgPSAyIDYgIC0+IFJlcG9ydCBLZXlib2FyZCBzdGF0dXMgYXNcbiAgICogICBDU0kgPyAyIDcgIDsgIDEgIDsgIDAgIDsgIDAgIG4gIChOb3J0aCBBbWVyaWNhbikuXG4gICAqICAgVGhlIGxhc3QgdHdvIHBhcmFtZXRlcnMgYXBwbHkgdG8gVlQ0MDAgJiB1cCwgYW5kIGRlbm90ZSBrZXktXG4gICAqICAgYm9hcmQgcmVhZHkgYW5kIExLMDEgcmVzcGVjdGl2ZWx5LlxuICAgKiAgICAgUHMgPSA1IDMgIC0+IFJlcG9ydCBMb2NhdG9yIHN0YXR1cyBhc1xuICAgKiAgIENTSSA/IDUgMyAgbiAgTG9jYXRvciBhdmFpbGFibGUsIGlmIGNvbXBpbGVkLWluLCBvclxuICAgKiAgIENTSSA/IDUgMCAgbiAgTm8gTG9jYXRvciwgaWYgbm90LlxuICAgKi9cbiAgcHVibGljIGRldmljZVN0YXR1cyhwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgNTpcbiAgICAgICAgLy8gc3RhdHVzIHJlcG9ydFxuICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31bMG5gKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDY6XG4gICAgICAgIC8vIGN1cnNvciBwb3NpdGlvblxuICAgICAgICBjb25zdCB5ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSArIDE7XG4gICAgICAgIGNvbnN0IHggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICsgMTtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9WyR7eX07JHt4fVJgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRldmljZVN0YXR1c1ByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgLy8gbW9kZXJuIHh0ZXJtIGRvZXNudCBzZWVtIHRvXG4gICAgLy8gcmVzcG9uZCB0byBhbnkgb2YgdGhlc2UgZXhjZXB0ID82LCA2LCBhbmQgNVxuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSA2OlxuICAgICAgICAvLyBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgY29uc3QgeSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgKyAxO1xuICAgICAgICBjb25zdCB4ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCArIDE7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVs/JHt5fTske3h9UmApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTU6XG4gICAgICAgIC8vIG5vIHByaW50ZXJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzExbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjU6XG4gICAgICAgIC8vIGRvbnQgc3VwcG9ydCB1c2VyIGRlZmluZWQga2V5c1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXIoQzAuRVNDICsgJ1s/MjFuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyNjpcbiAgICAgICAgLy8gbm9ydGggYW1lcmljYW4ga2V5Ym9hcmRcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzI3OzE7MDswbicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTM6XG4gICAgICAgIC8vIG5vIGRlYyBsb2NhdG9yL21vdXNlXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz81MG4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENTSSAhIHAgICBTb2Z0IHRlcm1pbmFsIHJlc2V0IChERUNTVFIpLlxuICAgKiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGU0LTEwLmh0bWxcbiAgICovXG4gIHB1YmxpYyBzb2Z0UmVzZXQocGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuY3Vyc29ySGlkZGVuID0gZmFsc2U7XG4gICAgdGhpcy5fdGVybWluYWwuaW5zZXJ0TW9kZSA9IGZhbHNlO1xuICAgIHRoaXMuX3Rlcm1pbmFsLm9yaWdpbk1vZGUgPSBmYWxzZTtcbiAgICB0aGlzLl90ZXJtaW5hbC53cmFwYXJvdW5kTW9kZSA9IHRydWU7ICAvLyBkZWZhdWx0czogeHRlcm0gLSB0cnVlLCB2dDEwMCAtIGZhbHNlXG4gICAgdGhpcy5fdGVybWluYWwuYXBwbGljYXRpb25LZXlwYWQgPSBmYWxzZTsgLy8gP1xuICAgIGlmICh0aGlzLl90ZXJtaW5hbC52aWV3cG9ydCkge1xuICAgICAgdGhpcy5fdGVybWluYWwudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKTtcbiAgICB9XG4gICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA9IGZhbHNlO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCA9IDA7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgPSAwOyAvLyA/XG4gICAgdGhpcy5fdGVybWluYWwuY2hhcnNldCA9IG51bGw7XG4gICAgdGhpcy5fdGVybWluYWwuZ2xldmVsID0gMDsgLy8gPz9cbiAgICB0aGlzLl90ZXJtaW5hbC5jaGFyc2V0cyA9IFtudWxsXTsgLy8gPz9cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgU1AgcSAgU2V0IGN1cnNvciBzdHlsZSAoREVDU0NVU1IsIFZUNTIwKS5cbiAgICogICBQcyA9IDAgIC0+IGJsaW5raW5nIGJsb2NrLlxuICAgKiAgIFBzID0gMSAgLT4gYmxpbmtpbmcgYmxvY2sgKGRlZmF1bHQpLlxuICAgKiAgIFBzID0gMiAgLT4gc3RlYWR5IGJsb2NrLlxuICAgKiAgIFBzID0gMyAgLT4gYmxpbmtpbmcgdW5kZXJsaW5lLlxuICAgKiAgIFBzID0gNCAgLT4gc3RlYWR5IHVuZGVybGluZS5cbiAgICogICBQcyA9IDUgIC0+IGJsaW5raW5nIGJhciAoeHRlcm0pLlxuICAgKiAgIFBzID0gNiAgLT4gc3RlYWR5IGJhciAoeHRlcm0pLlxuICAgKi9cbiAgcHVibGljIHNldEN1cnNvclN0eWxlKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuICAgIHN3aXRjaCAocGFyYW0pIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZSA9ICdibG9jayc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgY2FzZSA0OlxuICAgICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlID0gJ3VuZGVybGluZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1OlxuICAgICAgY2FzZSA2OlxuICAgICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlID0gJ2Jhcic7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBpc0JsaW5raW5nID0gcGFyYW0gJSAyID09PSAxO1xuICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yQmxpbmsgPSBpc0JsaW5raW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyA7IFBzIHJcbiAgICogICBTZXQgU2Nyb2xsaW5nIFJlZ2lvbiBbdG9wO2JvdHRvbV0gKGRlZmF1bHQgPSBmdWxsIHNpemUgb2Ygd2luLVxuICAgKiAgIGRvdykgKERFQ1NUQk0pLlxuICAgKi9cbiAgcHVibGljIHNldFNjcm9sbFJlZ2lvbihwYXJhbXM6IElQYXJhbXMpOiB2b2lkIHtcbiAgICBjb25zdCB0b3AgPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgbGV0IGJvdHRvbTogbnVtYmVyO1xuXG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPCAyIHx8IChib3R0b20gPSBwYXJhbXMucGFyYW1zWzFdKSA+ICB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgfHwgYm90dG9tID09PSAwKSB7XG4gICAgICBib3R0b20gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgfVxuXG4gICAgaWYgKGJvdHRvbSA+IHRvcCkge1xuICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wID0gdG9wIC0gMTtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSA9IGJvdHRvbSAtIDE7XG4gICAgICB0aGlzLl9zZXRDdXJzb3IoMCwgMCk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQ1NJIHNcbiAgICogRVNDIDdcbiAgICogICBTYXZlIGN1cnNvciAoQU5TSS5TWVMpLlxuICAgKi9cbiAgcHVibGljIHNhdmVDdXJzb3IocGFyYW1zPzogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkWCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLng7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRZID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmcgPSB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YS5mZztcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnID0gdGhpcy5fdGVybWluYWwuY3VyQXR0ckRhdGEuYmc7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRDaGFyc2V0ID0gdGhpcy5fdGVybWluYWwuY2hhcnNldDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENTSSB1XG4gICAqIEVTQyA4XG4gICAqICAgUmVzdG9yZSBjdXJzb3IgKEFOU0kuU1lTKS5cbiAgICovXG4gIHB1YmxpYyByZXN0b3JlQ3Vyc29yKHBhcmFtcz86IElQYXJhbXMpOiB2b2lkIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2F2ZWRYIHx8IDA7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSA9IE1hdGgubWF4KHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkWSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlLCAwKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YS5mZyA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmc7XG4gICAgdGhpcy5fdGVybWluYWwuY3VyQXR0ckRhdGEuYmcgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmNoYXJzZXQgPSAodGhpcyBhcyBhbnkpLl9zYXZlZENoYXJzZXQ7XG4gICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ2hhcnNldCkge1xuICAgICAgdGhpcy5fdGVybWluYWwuY2hhcnNldCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNhdmVkQ2hhcnNldDtcbiAgICB9XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIE9TQyAwOyA8ZGF0YT4gU1QgKHNldCBpY29uIG5hbWUgKyB3aW5kb3cgdGl0bGUpXG4gICAqIE9TQyAyOyA8ZGF0YT4gU1QgKHNldCB3aW5kb3cgdGl0bGUpXG4gICAqICAgUHJveHkgdG8gc2V0IHdpbmRvdyB0aXRsZS4gSWNvbiBuYW1lIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAqL1xuICBwdWJsaWMgc2V0VGl0bGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuaGFuZGxlVGl0bGUoZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogRVNDIEVcbiAgICogQzEuTkVMXG4gICAqICAgREVDIG1uZW1vbmljOiBORUwgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vTkVMKVxuICAgKiAgIE1vdmVzIGN1cnNvciB0byBmaXJzdCBwb3NpdGlvbiBvbiBuZXh0IGxpbmUuXG4gICAqL1xuICBwdWJsaWMgbmV4dExpbmUoKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCA9IDA7XG4gICAgdGhpcy5pbmRleCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyA9XG4gICAqICAgREVDIG1uZW1vbmljOiBERUNLUEFNIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0tQQU0uaHRtbClcbiAgICogICBFbmFibGVzIHRoZSBudW1lcmljIGtleXBhZCB0byBzZW5kIGFwcGxpY2F0aW9uIHNlcXVlbmNlcyB0byB0aGUgaG9zdC5cbiAgICovXG4gIHB1YmxpYyBrZXlwYWRBcHBsaWNhdGlvbk1vZGUoKTogdm9pZCB7XG4gICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnU2VyaWFsIHBvcnQgcmVxdWVzdGVkIGFwcGxpY2F0aW9uIGtleXBhZC4nKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5hcHBsaWNhdGlvbktleXBhZCA9IHRydWU7XG4gICAgaWYgKHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0KSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgPlxuICAgKiAgIERFQyBtbmVtb25pYzogREVDS1BOTSAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ERUNLUE5NLmh0bWwpXG4gICAqICAgRW5hYmxlcyB0aGUga2V5cGFkIHRvIHNlbmQgbnVtZXJpYyBjaGFyYWN0ZXJzIHRvIHRoZSBob3N0LlxuICAgKi9cbiAgcHVibGljIGtleXBhZE51bWVyaWNNb2RlKCk6IHZvaWQge1xuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1N3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuJyk7XG4gICAgdGhpcy5fdGVybWluYWwuYXBwbGljYXRpb25LZXlwYWQgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5fdGVybWluYWwudmlld3BvcnQpIHtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVTQyAlIEBcbiAgICogRVNDICUgR1xuICAgKiAgIFNlbGVjdCBkZWZhdWx0IGNoYXJhY3RlciBzZXQuIFVURi04IGlzIG5vdCBzdXBwb3J0ZWQgKHN0cmluZyBhcmUgdW5pY29kZSBhbnl3YXlzKVxuICAgKiAgIHRoZXJlZm9yZSBFU0MgJSBHIGRvZXMgdGhlIHNhbWUuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0RGVmYXVsdENoYXJzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fdGVybWluYWwuc2V0Z0xldmVsKDApO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNldGdDaGFyc2V0KDAsIERFRkFVTFRfQ0hBUlNFVCk7IC8vIFVTIChkZWZhdWx0KVxuICB9XG5cbiAgLyoqXG4gICAqIEVTQyAoIENcbiAgICogICBEZXNpZ25hdGUgRzAgQ2hhcmFjdGVyIFNldCwgVlQxMDAsIElTTyAyMDIyLlxuICAgKiBFU0MgKSBDXG4gICAqICAgRGVzaWduYXRlIEcxIENoYXJhY3RlciBTZXQgKElTTyAyMDIyLCBWVDEwMCkuXG4gICAqIEVTQyAqIENcbiAgICogICBEZXNpZ25hdGUgRzIgQ2hhcmFjdGVyIFNldCAoSVNPIDIwMjIsIFZUMjIwKS5cbiAgICogRVNDICsgQ1xuICAgKiAgIERlc2lnbmF0ZSBHMyBDaGFyYWN0ZXIgU2V0IChJU08gMjAyMiwgVlQyMjApLlxuICAgKiBFU0MgLSBDXG4gICAqICAgRGVzaWduYXRlIEcxIENoYXJhY3RlciBTZXQgKFZUMzAwKS5cbiAgICogRVNDIC4gQ1xuICAgKiAgIERlc2lnbmF0ZSBHMiBDaGFyYWN0ZXIgU2V0IChWVDMwMCkuXG4gICAqIEVTQyAvIENcbiAgICogICBEZXNpZ25hdGUgRzMgQ2hhcmFjdGVyIFNldCAoVlQzMDApLiBDID0gQSAgLT4gSVNPIExhdGluLTEgU3VwcGxlbWVudGFsLiAtIFN1cHBvcnRlZD9cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RDaGFyc2V0KGNvbGxlY3RBbmRGbGFnOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoY29sbGVjdEFuZEZsYWcubGVuZ3RoICE9PSAyKSB7XG4gICAgICB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb2xsZWN0QW5kRmxhZ1swXSA9PT0gJy8nKSB7XG4gICAgICByZXR1cm47ICAvLyBUT0RPOiBJcyB0aGlzIHN1cHBvcnRlZD9cbiAgICB9XG4gICAgdGhpcy5fdGVybWluYWwuc2V0Z0NoYXJzZXQoR0xFVkVMW2NvbGxlY3RBbmRGbGFnWzBdXSwgQ0hBUlNFVFNbY29sbGVjdEFuZEZsYWdbMV1dIHx8IERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBEXG4gICAqIEMxLklORFxuICAgKiAgIERFQyBtbmVtb25pYzogSU5EIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0lORC5odG1sKVxuICAgKiAgIE1vdmVzIHRoZSBjdXJzb3IgZG93biBvbmUgbGluZSBpbiB0aGUgc2FtZSBjb2x1bW4uXG4gICAqL1xuICBwdWJsaWMgaW5kZXgoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55Kys7XG4gICAgaWYgKGJ1ZmZlci55ID09PSBidWZmZXIuc2Nyb2xsQm90dG9tICsgMSkge1xuICAgICAgYnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnNjcm9sbCgpO1xuICAgIH0gZWxzZSBpZiAoYnVmZmVyLnkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICBidWZmZXIueSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgfVxuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gIH1cblxuICAvKipcbiAgICogRVNDIEhcbiAgICogQzEuSFRTXG4gICAqICAgREVDIG1uZW1vbmljOiBIVFMgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vSFRTLmh0bWwpXG4gICAqICAgU2V0cyBhIGhvcml6b250YWwgdGFiIHN0b3AgYXQgdGhlIGNvbHVtbiBwb3NpdGlvbiBpbmRpY2F0ZWQgYnlcbiAgICogICB0aGUgdmFsdWUgb2YgdGhlIGFjdGl2ZSBjb2x1bW4gd2hlbiB0aGUgdGVybWluYWwgcmVjZWl2ZXMgYW4gSFRTLlxuICAgKi9cbiAgcHVibGljIHRhYlNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci50YWJzW3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnhdID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgTVxuICAgKiBDMS5SSVxuICAgKiAgIERFQyBtbmVtb25pYzogSFRTXG4gICAqICAgTW92ZXMgdGhlIGN1cnNvciB1cCBvbmUgbGluZSBpbiB0aGUgc2FtZSBjb2x1bW4uIElmIHRoZSBjdXJzb3IgaXMgYXQgdGhlIHRvcCBtYXJnaW4sXG4gICAqICAgdGhlIHBhZ2Ugc2Nyb2xscyBkb3duLlxuICAgKi9cbiAgcHVibGljIHJldmVyc2VJbmRleCgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmIChidWZmZXIueSA9PT0gYnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgLy8gcG9zc2libHkgbW92ZSB0aGUgY29kZSBiZWxvdyB0byB0ZXJtLnJldmVyc2VTY3JvbGwoKTtcbiAgICAgIC8vIHRlc3Q6IGVjaG8gLW5lICdcXGVbMTsxSFxcZVs0NG1cXGVNXFxlWzBtJ1xuICAgICAgLy8gYmxhbmtMaW5lKHRydWUpIGlzIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICBjb25zdCBzY3JvbGxSZWdpb25IZWlnaHQgPSBidWZmZXIuc2Nyb2xsQm90dG9tIC0gYnVmZmVyLnNjcm9sbFRvcDtcbiAgICAgIGJ1ZmZlci5saW5lcy5zaGlmdEVsZW1lbnRzKGJ1ZmZlci55ICsgYnVmZmVyLnliYXNlLCBzY3JvbGxSZWdpb25IZWlnaHQsIDEpO1xuICAgICAgYnVmZmVyLmxpbmVzLnNldChidWZmZXIueSArIGJ1ZmZlci55YmFzZSwgYnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl90ZXJtaW5hbC5lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShidWZmZXIuc2Nyb2xsVG9wLCBidWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7IC8vIHF1aWNrZml4IHRvIG5vdCBydW4gb3V0IG9mIGJvdW5kc1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgY1xuICAgKiAgIERFQyBtbmVtb25pYzogUklTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL1JJUy5odG1sKVxuICAgKiAgIFJlc2V0IHRvIGluaXRpYWwgc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fcGFyc2VyLnJlc2V0KCk7XG4gICAgdGhpcy5fdGVybWluYWwucmVzZXQoKTsgIC8vIFRPRE86IHNhdmUgdG8gbW92ZSBmcm9tIHRlcm1pbmFsP1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBuXG4gICAqIEVTQyBvXG4gICAqIEVTQyB8XG4gICAqIEVTQyB9XG4gICAqIEVTQyB+XG4gICAqICAgREVDIG1uZW1vbmljOiBMUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9MUy5odG1sKVxuICAgKiAgIFdoZW4geW91IHVzZSBhIGxvY2tpbmcgc2hpZnQsIHRoZSBjaGFyYWN0ZXIgc2V0IHJlbWFpbnMgaW4gR0wgb3IgR1IgdW50aWxcbiAgICogICB5b3UgdXNlIGFub3RoZXIgbG9ja2luZyBzaGlmdC4gKHBhcnRseSBzdXBwb3J0ZWQpXG4gICAqL1xuICBwdWJsaWMgc2V0Z0xldmVsKGxldmVsOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXJtaW5hbC5zZXRnTGV2ZWwobGV2ZWwpOyAgLy8gVE9ETzogc2F2ZSB0byBtb3ZlIGZyb20gdGVybWluYWw/XG4gIH1cblxuICAvKipcbiAgICogRVNDICMgOFxuICAgKiAgIERFQyBtbmVtb25pYzogREVDQUxOIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0FMTi5odG1sKVxuICAgKiAgIFRoaXMgY29udHJvbCBmdW5jdGlvbiBmaWxscyB0aGUgY29tcGxldGUgc2NyZWVuIGFyZWEgd2l0aFxuICAgKiAgIGEgdGVzdCBwYXR0ZXJuIChFKSB1c2VkIGZvciBhZGp1c3Rpbmcgc2NyZWVuIGFsaWdubWVudC5cbiAgICpcbiAgICogVE9ETzogbW92ZSBERUNBTE4gaW50byBjb21wYXQgYWRkb25cbiAgICovXG4gIHB1YmxpYyBzY3JlZW5BbGlnbm1lbnRQYXR0ZXJuKCk6IHZvaWQge1xuICAgIC8vIHByZXBhcmUgY2VsbCBkYXRhXG4gICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuICAgIGNlbGwuY29udGVudCA9IDEgPDwgQ29udGVudC5XSURUSF9TSElGVCB8ICdFJy5jaGFyQ29kZUF0KDApO1xuICAgIGNlbGwuZmcgPSB0aGlzLl90ZXJtaW5hbC5jdXJBdHRyRGF0YS5mZztcbiAgICBjZWxsLmJnID0gdGhpcy5fdGVybWluYWwuY3VyQXR0ckRhdGEuYmc7XG5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgICBmb3IgKGxldCB5T2Zmc2V0ID0gMDsgeU9mZnNldCA8IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93czsgKyt5T2Zmc2V0KSB7XG4gICAgICBjb25zdCByb3cgPSBidWZmZXIueSArIGJ1ZmZlci55YmFzZSArIHlPZmZzZXQ7XG4gICAgICBidWZmZXIubGluZXMuZ2V0KHJvdykuZmlsbChjZWxsKTtcbiAgICAgIGJ1ZmZlci5saW5lcy5nZXQocm93KS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtBbGxEaXJ0eSgpO1xuICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBPcmlnaW5hbGx5IGZvcmtlZCBmcm9tICh3aXRoIHRoZSBhdXRob3IncyBwZXJtaXNzaW9uKTpcbiAqICAgRmFicmljZSBCZWxsYXJkJ3MgamF2YXNjcmlwdCB2dDEwMCBmb3IganNsaW51eDpcbiAqICAgaHR0cDovL2JlbGxhcmQub3JnL2pzbGludXgvXG4gKiAgIENvcHlyaWdodCAoYykgMjAxMSBGYWJyaWNlIEJlbGxhcmRcbiAqICAgVGhlIG9yaWdpbmFsIGRlc2lnbiByZW1haW5zLiBUaGUgdGVybWluYWwgaXRzZWxmXG4gKiAgIGhhcyBiZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgeHRlcm0gQ1NJIGNvZGVzLCBhbW9uZ1xuICogICBvdGhlciBmZWF0dXJlcy5cbiAqXG4gKiBUZXJtaW5hbCBFbXVsYXRpb24gUmVmZXJlbmNlczpcbiAqICAgaHR0cDovL3Z0MTAwLm5ldC9cbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy50eHRcbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy5odG1sXG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC92dHRlc3QvXG4gKiAgIGh0dHA6Ly93d3cuaW53YXAuY29tL3BkcDEwL2Fuc2ljb2RlLnR4dFxuICogICBodHRwOi8vbGludXguZGllLm5ldC9tYW4vNC9jb25zb2xlX2NvZGVzXG4gKiAgIGh0dHA6Ly9saW51eC5kaWUubmV0L21hbi83L3VyeHZ0XG4gKi9cblxuaW1wb3J0IHsgSUlucHV0SGFuZGxpbmdUZXJtaW5hbCwgSUNvbXBvc2l0aW9uSGVscGVyLCBJVGVybWluYWxPcHRpb25zLCBJVGVybWluYWwsIElCcm93c2VyLCBDdXN0b21LZXlFdmVudEhhbmRsZXIgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IElSZW5kZXJlciwgQ2hhcmFjdGVySm9pbmVySGFuZGxlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ29tcG9zaXRpb25IZWxwZXIgfSBmcm9tICdicm93c2VyL2lucHV0L0NvbXBvc2l0aW9uSGVscGVyJztcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnYnJvd3Nlci9WaWV3cG9ydCc7XG5pbXBvcnQgeyByaWdodENsaWNrSGFuZGxlciwgbW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvciwgaGFuZGxlUGFzdGVFdmVudCwgY29weUhhbmRsZXIsIHBhc3RlIH0gZnJvbSAnYnJvd3Nlci9DbGlwYm9hcmQnO1xuaW1wb3J0IHsgQzAgfSBmcm9tICdjb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuaW1wb3J0IHsgSW5wdXRIYW5kbGVyIH0gZnJvbSAnLi9JbnB1dEhhbmRsZXInO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuL3JlbmRlcmVyL1JlbmRlcmVyJztcbmltcG9ydCB7IExpbmtpZmllciB9IGZyb20gJ2Jyb3dzZXIvTGlua2lmaWVyJztcbmltcG9ydCB7IFNlbGVjdGlvblNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlbGVjdGlvblNlcnZpY2UnO1xuaW1wb3J0ICogYXMgQnJvd3NlciBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnYnJvd3Nlci9MaWZlY3ljbGUnO1xuaW1wb3J0ICogYXMgU3RyaW5ncyBmcm9tICdicm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncyc7XG5pbXBvcnQgeyBTb3VuZFNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NvdW5kU2VydmljZSc7XG5pbXBvcnQgeyBNb3VzZVpvbmVNYW5hZ2VyIH0gZnJvbSAnYnJvd3Nlci9Nb3VzZVpvbmVNYW5hZ2VyJztcbmltcG9ydCB7IEFjY2Vzc2liaWxpdHlNYW5hZ2VyIH0gZnJvbSAnLi9BY2Nlc3NpYmlsaXR5TWFuYWdlcic7XG5pbXBvcnQgeyBJVGhlbWUsIElNYXJrZXIsIElEaXNwb3NhYmxlLCBJU2VsZWN0aW9uUG9zaXRpb24gfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBEb21SZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyJztcbmltcG9ydCB7IElLZXlib2FyZEV2ZW50LCBLZXlib2FyZFJlc3VsdFR5cGUsIElDaGFyc2V0LCBJQnVmZmVyTGluZSwgSUF0dHJpYnV0ZURhdGEsIENvcmVNb3VzZUV2ZW50VHlwZSwgQ29yZU1vdXNlQnV0dG9uLCBDb3JlTW91c2VBY3Rpb24gfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgZXZhbHVhdGVLZXlib2FyZEV2ZW50IH0gZnJvbSAnY29tbW9uL2lucHV0L0tleWJvYXJkJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBhcHBseVdpbmRvd3NNb2RlIH0gZnJvbSAnLi9XaW5kb3dzTW9kZSc7XG5pbXBvcnQgeyBDb2xvck1hbmFnZXIgfSBmcm9tICdicm93c2VyL0NvbG9yTWFuYWdlcic7XG5pbXBvcnQgeyBSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9SZW5kZXJTZXJ2aWNlJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UsIElDb3JlTW91c2VTZXJ2aWNlLCBJQ29yZVNlcnZpY2UsIElMb2dTZXJ2aWNlLCBJRGlydHlSb3dTZXJ2aWNlLCBJSW5zdGFudGlhdGlvblNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvT3B0aW9uc1NlcnZpY2UnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSwgSVJlbmRlclNlcnZpY2UsIElNb3VzZVNlcnZpY2UsIElTZWxlY3Rpb25TZXJ2aWNlLCBJU291bmRTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBDaGFyU2l6ZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL0NoYXJTaXplU2VydmljZSc7XG5pbXBvcnQgeyBCdWZmZXJTZXJ2aWNlLCBNSU5JTVVNX0NPTFMsIE1JTklNVU1fUk9XUyB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9CdWZmZXJTZXJ2aWNlJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IElCdWZmZXJTZXQsIElCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IEF0dHJpYnV0ZXMgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBNb3VzZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL01vdXNlU2VydmljZSc7XG5pbXBvcnQgeyBJUGFyYW1zLCBJRnVuY3Rpb25JZGVudGlmaWVyIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBDb3JlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9Db3JlU2VydmljZSc7XG5pbXBvcnQgeyBMb2dTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0xvZ1NlcnZpY2UnO1xuaW1wb3J0IHsgSUxpbmtpZmllciwgSU1vdXNlWm9uZU1hbmFnZXIsIExpbmtNYXRjaGVySGFuZGxlciwgSUxpbmtNYXRjaGVyT3B0aW9ucywgSVZpZXdwb3J0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBEaXJ0eVJvd1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvRGlydHlSb3dTZXJ2aWNlJztcbmltcG9ydCB7IEluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IENvcmVNb3VzZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvQ29yZU1vdXNlU2VydmljZSc7XG5cbi8vIExldCBpdCB3b3JrIGluc2lkZSBOb2RlLmpzIGZvciBhdXRvbWF0ZWQgdGVzdGluZyBwdXJwb3Nlcy5cbmNvbnN0IGRvY3VtZW50ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdy5kb2N1bWVudCA6IG51bGw7XG5cbi8qKlxuICogVGhlIGFtb3VudCBvZiB3cml0ZSByZXF1ZXN0cyB0byBxdWV1ZSBiZWZvcmUgc2VuZGluZyBhbiBYT0ZGIHNpZ25hbCB0byB0aGVcbiAqIHB0eSBwcm9jZXNzLiBUaGlzIG51bWJlciBtdXN0IGJlIHNtYWxsIGluIG9yZGVyIGZvciBeQyBhbmQgc2ltaWxhciBzZXF1ZW5jZXNcbiAqIHRvIGJlIHJlc3BvbnNpdmUuXG4gKi9cbmNvbnN0IFdSSVRFX0JVRkZFUl9QQVVTRV9USFJFU0hPTEQgPSA1O1xuXG4vKipcbiAqIFRoZSBtYXggbnVtYmVyIG9mIG1zIHRvIHNwZW5kIG9uIHdyaXRlcyBiZWZvcmUgYWxsb3dpbmcgdGhlIHJlbmRlcmVyIHRvXG4gKiBjYXRjaCB1cCB3aXRoIGEgMG1zIHNldFRpbWVvdXQuIEEgdmFsdWUgb2YgPCAzMyB0byBrZWVwIHVzIGNsb3NlIHRvXG4gKiAzMGZwcywgYW5kIGEgdmFsdWUgb2YgPCAxNiB0byB0cnkgdG8gcnVuIGF0IDYwZnBzLiBPZiBjb3Vyc2UsIHRoZSByZWFsIEZQU1xuICogZGVwZW5kcyBvbiB0aGUgdGltZSBpdCB0YWtlcyBmb3IgdGhlIHJlbmRlcmVyIHRvIGRyYXcgdGhlIGZyYW1lLlxuICovXG5jb25zdCBXUklURV9USU1FT1VUX01TID0gMTI7XG5jb25zdCBXUklURV9CVUZGRVJfTEVOR1RIX1RIUkVTSE9MRCA9IDUwO1xuXG5leHBvcnQgY2xhc3MgVGVybWluYWwgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVRlcm1pbmFsLCBJRGlzcG9zYWJsZSwgSUlucHV0SGFuZGxpbmdUZXJtaW5hbCB7XG4gIHB1YmxpYyB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgcHVibGljIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBwdWJsaWMgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgLyoqXG4gICAqIFRoZSBIVE1MRWxlbWVudCB0aGF0IHRoZSB0ZXJtaW5hbCBpcyBjcmVhdGVkIGluLCBzZXQgYnkgVGVybWluYWwub3Blbi5cbiAgICovXG4gIHByaXZhdGUgX3BhcmVudDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX2RvY3VtZW50OiBEb2N1bWVudDtcbiAgcHJpdmF0ZSBfdmlld3BvcnRTY3JvbGxBcmVhOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfdmlld3BvcnRFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfaGVscGVyQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfY29tcG9zaXRpb25WaWV3OiBIVE1MRWxlbWVudDtcblxuICBwcml2YXRlIF92aXN1YWxCZWxsVGltZXI6IG51bWJlcjtcblxuICBwdWJsaWMgYnJvd3NlcjogSUJyb3dzZXIgPSA8YW55PkJyb3dzZXI7XG5cbiAgLy8gVE9ETzogV2Ugc2hvdWxkIHJlbW92ZSBvcHRpb25zIG9uY2UgY29tcG9uZW50cyBhZG9wdCBvcHRpb25zU2VydmljZVxuICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogSVRlcm1pbmFsT3B0aW9ucyB7IHJldHVybiB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnM7IH1cblxuICAvLyBUT0RPOiBUaGlzIGNhbiBiZSBjaGFuZ2VkIHRvIGFuIGVudW0gb3IgYm9vbGVhbiwgMCBhbmQgMSBzZWVtIHRvIGJlIHRoZSBvbmx5IG9wdGlvbnNcbiAgcHVibGljIGN1cnNvclN0YXRlOiBudW1iZXI7XG4gIHB1YmxpYyBjdXJzb3JIaWRkZW46IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBfY3VzdG9tS2V5RXZlbnRIYW5kbGVyOiBDdXN0b21LZXlFdmVudEhhbmRsZXI7XG5cbiAgLy8gY29tbW9uIHNlcnZpY2VzXG4gIHByaXZhdGUgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlO1xuICBwcml2YXRlIF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlO1xuICBwcml2YXRlIF9jb3JlTW91c2VTZXJ2aWNlOiBJQ29yZU1vdXNlU2VydmljZTtcbiAgcHJpdmF0ZSBfZGlydHlSb3dTZXJ2aWNlOiBJRGlydHlSb3dTZXJ2aWNlO1xuICBwcml2YXRlIF9pbnN0YW50aWF0aW9uU2VydmljZTogSUluc3RhbnRpYXRpb25TZXJ2aWNlO1xuICBwcml2YXRlIF9sb2dTZXJ2aWNlOiBJTG9nU2VydmljZTtcbiAgcHVibGljIG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2U7XG5cbiAgLy8gYnJvd3NlciBzZXJ2aWNlc1xuICBwcml2YXRlIF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2U7XG4gIHByaXZhdGUgX21vdXNlU2VydmljZTogSU1vdXNlU2VydmljZTtcbiAgcHJpdmF0ZSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2U7XG4gIHByaXZhdGUgX3NlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlO1xuICBwcml2YXRlIF9zb3VuZFNlcnZpY2U6IElTb3VuZFNlcnZpY2U7XG5cbiAgLy8gbW9kZXNcbiAgcHVibGljIGFwcGxpY2F0aW9uS2V5cGFkOiBib29sZWFuO1xuICBwdWJsaWMgb3JpZ2luTW9kZTogYm9vbGVhbjtcbiAgcHVibGljIGluc2VydE1vZGU6IGJvb2xlYW47XG4gIHB1YmxpYyB3cmFwYXJvdW5kTW9kZTogYm9vbGVhbjsgLy8gZGVmYXVsdHM6IHh0ZXJtIC0gdHJ1ZSwgdnQxMDAgLSBmYWxzZVxuICBwdWJsaWMgYnJhY2tldGVkUGFzdGVNb2RlOiBib29sZWFuO1xuXG4gIC8vIGNoYXJzZXRcbiAgLy8gVGhlIGN1cnJlbnQgY2hhcnNldFxuICBwdWJsaWMgY2hhcnNldDogSUNoYXJzZXQ7XG4gIHB1YmxpYyBnY2hhcnNldDogbnVtYmVyO1xuICBwdWJsaWMgZ2xldmVsOiBudW1iZXI7XG4gIHB1YmxpYyBjaGFyc2V0czogSUNoYXJzZXRbXTtcblxuICAvLyBtb3VzZSBwcm9wZXJ0aWVzXG4gIHB1YmxpYyBtb3VzZUV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlID0gQ29yZU1vdXNlRXZlbnRUeXBlLk5PTkU7XG4gIHB1YmxpYyBzZW5kRm9jdXM6IGJvb2xlYW47XG5cbiAgLy8gbWlzY1xuICBwdWJsaWMgc2F2ZWRDb2xzOiBudW1iZXI7XG5cbiAgcHVibGljIGN1ckF0dHJEYXRhOiBJQXR0cmlidXRlRGF0YTtcbiAgcHJpdmF0ZSBfZXJhc2VBdHRyRGF0YTogSUF0dHJpYnV0ZURhdGE7XG5cbiAgcHVibGljIHBhcmFtczogKHN0cmluZyB8IG51bWJlcilbXTtcbiAgcHVibGljIGN1cnJlbnRQYXJhbTogc3RyaW5nIHwgbnVtYmVyO1xuXG4gIC8vIHVzZXIgaW5wdXQgc3RhdGVzXG4gIHB1YmxpYyB3cml0ZUJ1ZmZlcjogc3RyaW5nW107XG4gIHB1YmxpYyB3cml0ZUJ1ZmZlclV0Zjg6IFVpbnQ4QXJyYXlbXTtcbiAgcHJpdmF0ZSBfd3JpdGVJblByb2dyZXNzOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIF94dGVybS5qc18gc2VudCBYT0ZGIGluIG9yZGVyIHRvIGNhdGNoIHVwIHdpdGggdGhlIHB0eSBwcm9jZXNzLlxuICAgKiBUaGlzIGlzIGEgZGlzdGluY3Qgc3RhdGUgZnJvbSB3cml0ZVN0b3BwZWQgc28gdGhhdCBpZiB0aGUgdXNlciByZXF1ZXN0ZWRcbiAgICogWE9GRiB2aWEgXlMgdGhhdCBpdCB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHJlc3VtZSB3aGVuIHRoZSB3cml0ZUJ1ZmZlciBnb2VzXG4gICAqIGJlbG93IHRocmVzaG9sZC5cbiAgICovXG4gIHByaXZhdGUgX3hvZmZTZW50VG9DYXRjaFVwOiBib29sZWFuO1xuXG4gIC8qKiBXaGV0aGVyIHdyaXRpbmcgaGFzIGJlZW4gc3RvcHBlZCBhcyBhIHJlc3VsdCBvZiBYT0ZGICovXG4gIC8vIHByaXZhdGUgX3dyaXRlU3RvcHBlZDogYm9vbGVhbjtcblxuICAvLyBTdG9yZSBpZiB1c2VyIHdlbnQgYnJvd3NpbmcgaGlzdG9yeSBpbiBzY3JvbGxiYWNrXG4gIHByaXZhdGUgX3VzZXJTY3JvbGxpbmc6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFJlY29yZHMgd2hldGhlciB0aGUga2V5ZG93biBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWQgYW5kIHRyaWdnZXJlZCBhIGRhdGEgZXZlbnQsIGlmIHNvXG4gICAqIHRoZSBrZXlwcmVzcyBldmVudCBzaG91bGQgbm90IHRyaWdnZXIgYSBkYXRhIGV2ZW50IGJ1dCBzaG91bGQgc3RpbGwgcHJpbnQgdG8gdGhlIHRleHRhcmVhIHNvXG4gICAqIHNjcmVlbiByZWFkZXJzIHdpbGwgYW5ub3VuY2UgaXQuXG4gICAqL1xuICBwcml2YXRlIF9rZXlEb3duSGFuZGxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2lucHV0SGFuZGxlcjogSW5wdXRIYW5kbGVyO1xuICBwdWJsaWMgbGlua2lmaWVyOiBJTGlua2lmaWVyO1xuICBwdWJsaWMgdmlld3BvcnQ6IElWaWV3cG9ydDtcbiAgcHJpdmF0ZSBfY29tcG9zaXRpb25IZWxwZXI6IElDb21wb3NpdGlvbkhlbHBlcjtcbiAgcHJpdmF0ZSBfbW91c2Vab25lTWFuYWdlcjogSU1vdXNlWm9uZU1hbmFnZXI7XG4gIHByaXZhdGUgX2FjY2Vzc2liaWxpdHlNYW5hZ2VyOiBBY2Nlc3NpYmlsaXR5TWFuYWdlcjtcbiAgcHJpdmF0ZSBfY29sb3JNYW5hZ2VyOiBDb2xvck1hbmFnZXI7XG4gIHByaXZhdGUgX3RoZW1lOiBJVGhlbWU7XG4gIHByaXZhdGUgX3dpbmRvd3NNb2RlOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcblxuICAvLyBidWZmZXJsaW5lIHRvIGNsb25lL2NvcHkgZnJvbSBmb3IgbmV3IGJsYW5rIGxpbmVzXG4gIHByaXZhdGUgX2JsYW5rTGluZTogSUJ1ZmZlckxpbmUgPSBudWxsO1xuXG4gIHB1YmxpYyBnZXQgY29scygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOyB9XG4gIHB1YmxpYyBnZXQgcm93cygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOyB9XG5cbiAgcHJpdmF0ZSBfb25DdXJzb3JNb3ZlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uQ3Vyc29yTW92ZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uRGF0YSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uRGF0YSgpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkRhdGEuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25LZXkgPSBuZXcgRXZlbnRFbWl0dGVyPHsga2V5OiBzdHJpbmcsIGRvbUV2ZW50OiBLZXlib2FyZEV2ZW50IH0+KCk7XG4gIHB1YmxpYyBnZXQgb25LZXkoKTogSUV2ZW50PHsga2V5OiBzdHJpbmcsIGRvbUV2ZW50OiBLZXlib2FyZEV2ZW50IH0+IHsgcmV0dXJuIHRoaXMuX29uS2V5LmV2ZW50OyB9XG4gIHByaXZhdGUgX29uTGluZUZlZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25MaW5lRmVlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25MaW5lRmVlZC5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlbmRlciA9IG5ldyBFdmVudEVtaXR0ZXI8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PigpO1xuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX29uUmVuZGVyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVzaXplID0gbmV3IEV2ZW50RW1pdHRlcjx7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0+KCk7XG4gIHB1YmxpYyBnZXQgb25SZXNpemUoKTogSUV2ZW50PHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4geyByZXR1cm4gdGhpcy5fb25SZXNpemUuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25TY3JvbGwgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcbiAgcHVibGljIGdldCBvblNjcm9sbCgpOiBJRXZlbnQ8bnVtYmVyPiB7IHJldHVybiB0aGlzLl9vblNjcm9sbC5ldmVudDsgfVxuICBwcml2YXRlIF9vblNlbGVjdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25UaXRsZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uVGl0bGVDaGFuZ2UoKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fb25UaXRsZUNoYW5nZS5ldmVudDsgfVxuXG4gIHByaXZhdGUgX29uRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25Gb2N1cygpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25Gb2N1cy5ldmVudDsgfVxuICBwcml2YXRlIF9vbkJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25CbHVyKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkJsdXIuZXZlbnQ7IH1cbiAgcHVibGljIG9uQTExeUNoYXJFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIHB1YmxpYyBnZXQgb25BMTF5Q2hhcigpOiBJRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLm9uQTExeUNoYXJFbWl0dGVyLmV2ZW50OyB9XG4gIHB1YmxpYyBvbkExMXlUYWJFbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XG4gIHB1YmxpYyBnZXQgb25BMTF5VGFiKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMub25BMTF5VGFiRW1pdHRlci5ldmVudDsgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBUZXJtaW5hbGAgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyBBbiBvYmplY3QgY29udGFpbmluZyBhIHNldCBvZiBvcHRpb25zLCB0aGUgYXZhaWxhYmxlIG9wdGlvbnMgYXJlOlxuICAgKiAgIC0gYGN1cnNvckJsaW5rYCAoYm9vbGVhbik6IFdoZXRoZXIgdGhlIHRlcm1pbmFsIGN1cnNvciBibGlua3NcbiAgICogICAtIGBjb2xzYCAobnVtYmVyKTogVGhlIG51bWJlciBvZiBjb2x1bW5zIG9mIHRoZSB0ZXJtaW5hbCAoaG9yaXpvbnRhbCBzaXplKVxuICAgKiAgIC0gYHJvd3NgIChudW1iZXIpOiBUaGUgbnVtYmVyIG9mIHJvd3Mgb2YgdGhlIHRlcm1pbmFsICh2ZXJ0aWNhbCBzaXplKVxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBjbGFzcyBYdGVybSBYdGVybVxuICAgKiBAYWxpYXMgbW9kdWxlOnh0ZXJtL3NyYy94dGVybVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucyA9IHt9XG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyBTZXR1cCBhbmQgaW5pdGlhbGl6ZSBjb21tb24gc2VydmljZXNcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZSA9IG5ldyBJbnN0YW50aWF0aW9uU2VydmljZSgpO1xuICAgIHRoaXMub3B0aW9uc1NlcnZpY2UgPSBuZXcgT3B0aW9uc1NlcnZpY2Uob3B0aW9ucyk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJT3B0aW9uc1NlcnZpY2UsIHRoaXMub3B0aW9uc1NlcnZpY2UpO1xuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShCdWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElCdWZmZXJTZXJ2aWNlLCB0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTG9nU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJTG9nU2VydmljZSwgdGhpcy5fbG9nU2VydmljZSk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDb3JlU2VydmljZSwgKCkgPT4gdGhpcy5zY3JvbGxUb0JvdHRvbSgpKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDb3JlU2VydmljZSwgdGhpcy5fY29yZVNlcnZpY2UpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm9uRGF0YShlID0+IHRoaXMuX29uRGF0YS5maXJlKGUpKTtcbiAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQ29yZU1vdXNlU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJQ29yZU1vdXNlU2VydmljZSwgdGhpcy5fY29yZU1vdXNlU2VydmljZSk7XG4gICAgdGhpcy5fZGlydHlSb3dTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoRGlydHlSb3dTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElEaXJ0eVJvd1NlcnZpY2UsIHRoaXMuX2RpcnR5Um93U2VydmljZSk7XG5cbiAgICB0aGlzLl9zZXR1cE9wdGlvbnNMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9zZXR1cCgpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzRGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIGlmICh0aGlzLl93aW5kb3dzTW9kZSkge1xuICAgICAgdGhpcy5fd2luZG93c01vZGUuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fd2luZG93c01vZGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gbnVsbDtcbiAgICB0aGlzLndyaXRlID0gKCkgPT4ge307XG4gICAgaWYgKHRoaXMuZWxlbWVudCAmJiB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9zZXR1cCgpOiB2b2lkIHtcbiAgICB0aGlzLl9wYXJlbnQgPSBkb2N1bWVudCA/IGRvY3VtZW50LmJvZHkgOiBudWxsO1xuXG4gICAgdGhpcy5jdXJzb3JTdGF0ZSA9IDA7XG4gICAgdGhpcy5jdXJzb3JIaWRkZW4gPSBmYWxzZTtcbiAgICB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgPSBudWxsO1xuXG4gICAgLy8gbW9kZXNcbiAgICB0aGlzLmFwcGxpY2F0aW9uS2V5cGFkID0gZmFsc2U7XG4gICAgdGhpcy5vcmlnaW5Nb2RlID0gZmFsc2U7XG4gICAgdGhpcy5pbnNlcnRNb2RlID0gZmFsc2U7XG4gICAgdGhpcy53cmFwYXJvdW5kTW9kZSA9IHRydWU7IC8vIGRlZmF1bHRzOiB4dGVybSAtIHRydWUsIHZ0MTAwIC0gZmFsc2VcbiAgICB0aGlzLmJyYWNrZXRlZFBhc3RlTW9kZSA9IGZhbHNlO1xuXG4gICAgLy8gY2hhcnNldFxuICAgIHRoaXMuY2hhcnNldCA9IG51bGw7XG4gICAgdGhpcy5nY2hhcnNldCA9IG51bGw7XG4gICAgdGhpcy5nbGV2ZWwgPSAwO1xuICAgIC8vIFRPRE86IENhbiB0aGlzIGJlIGp1c3QgW10/XG4gICAgdGhpcy5jaGFyc2V0cyA9IFtudWxsXTtcblxuICAgIHRoaXMuY3VyQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICAgIHRoaXMuX2VyYXNlQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuXG4gICAgdGhpcy5wYXJhbXMgPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRQYXJhbSA9IDA7XG5cbiAgICAvLyB1c2VyIGlucHV0IHN0YXRlc1xuICAgIHRoaXMud3JpdGVCdWZmZXIgPSBbXTtcbiAgICB0aGlzLndyaXRlQnVmZmVyVXRmOCA9IFtdO1xuICAgIHRoaXMuX3dyaXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuXG4gICAgdGhpcy5feG9mZlNlbnRUb0NhdGNoVXAgPSBmYWxzZTtcbiAgICAvLyB0aGlzLl93cml0ZVN0b3BwZWQgPSBmYWxzZTtcbiAgICB0aGlzLl91c2VyU2Nyb2xsaW5nID0gZmFsc2U7XG5cbiAgICAvLyBSZWdpc3RlciBpbnB1dCBoYW5kbGVyIGFuZCByZWZpcmUvaGFuZGxlIGV2ZW50c1xuICAgIHRoaXMuX2lucHV0SGFuZGxlciA9IG5ldyBJbnB1dEhhbmRsZXIodGhpcywgdGhpcy5fYnVmZmVyU2VydmljZSwgdGhpcy5fY29yZVNlcnZpY2UsIHRoaXMuX2RpcnR5Um93U2VydmljZSwgdGhpcy5fbG9nU2VydmljZSwgdGhpcy5vcHRpb25zU2VydmljZSwgdGhpcy5fY29yZU1vdXNlU2VydmljZSk7XG4gICAgdGhpcy5faW5wdXRIYW5kbGVyLm9uQ3Vyc29yTW92ZSgoKSA9PiB0aGlzLl9vbkN1cnNvck1vdmUuZmlyZSgpKTtcbiAgICB0aGlzLl9pbnB1dEhhbmRsZXIub25MaW5lRmVlZCgoKSA9PiB0aGlzLl9vbkxpbmVGZWVkLmZpcmUoKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIpO1xuXG4gICAgdGhpcy5saW5raWZpZXIgPSB0aGlzLmxpbmtpZmllciB8fCBuZXcgTGlua2lmaWVyKHRoaXMuX2J1ZmZlclNlcnZpY2UsIHRoaXMuX2xvZ1NlcnZpY2UpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy53aW5kb3dzTW9kZSkge1xuICAgICAgdGhpcy5fd2luZG93c01vZGUgPSBhcHBseVdpbmRvd3NNb2RlKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBwcm9wZXJ0eSB0byBhY3RpdmUgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIGdldCBidWZmZXIoKTogSUJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVycy5hY3RpdmU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGJ1ZmZlcnMoKTogSUJ1ZmZlclNldCB7XG4gICAgcmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBiYWNrX2NvbG9yX2VyYXNlIGZlYXR1cmUgZm9yIHh0ZXJtLlxuICAgKi9cbiAgcHVibGljIGVyYXNlQXR0ckRhdGEoKTogSUF0dHJpYnV0ZURhdGEge1xuICAgIHRoaXMuX2VyYXNlQXR0ckRhdGEuYmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCAweEZGRkZGRik7XG4gICAgdGhpcy5fZXJhc2VBdHRyRGF0YS5iZyB8PSB0aGlzLmN1ckF0dHJEYXRhLmJnICYgfjB4RkMwMDAwMDA7XG4gICAgcmV0dXJuIHRoaXMuX2VyYXNlQXR0ckRhdGE7XG4gIH1cblxuICAvKipcbiAgICogRm9jdXMgdGhlIHRlcm1pbmFsLiBEZWxlZ2F0ZXMgZm9jdXMgaGFuZGxpbmcgdG8gdGhlIHRlcm1pbmFsJ3MgRE9NIGVsZW1lbnQuXG4gICAqL1xuICBwdWJsaWMgZm9jdXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGV4dGFyZWEpIHtcbiAgICAgIHRoaXMudGV4dGFyZWEuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgaXNGb2N1c2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLnRleHRhcmVhICYmIGRvY3VtZW50Lmhhc0ZvY3VzKCk7XG4gIH1cblxuICBwcml2YXRlIF9zZXR1cE9wdGlvbnNMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgLy8gVE9ETzogVGhlc2UgbGlzdGVuZXJzIHNob3VsZCBiZSBvd25lZCBieSBpbmRpdmlkdWFsIGNvbXBvbmVudHNcbiAgICB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKGtleSA9PiB7XG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlICdmb250RmFtaWx5JzpcbiAgICAgICAgY2FzZSAnZm9udFNpemUnOlxuICAgICAgICAgIC8vIFdoZW4gdGhlIGZvbnQgY2hhbmdlcyB0aGUgc2l6ZSBvZiB0aGUgY2VsbHMgbWF5IGNoYW5nZSB3aGljaCByZXF1aXJlcyBhIHJlbmRlcmVyIGNsZWFyXG4gICAgICAgICAgaWYgKHRoaXMuX3JlbmRlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2UuY2xlYXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX2NoYXJTaXplU2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJzpcbiAgICAgICAgY2FzZSAnbGV0dGVyU3BhY2luZyc6XG4gICAgICAgIGNhc2UgJ2xpbmVIZWlnaHQnOlxuICAgICAgICBjYXNlICdmb250V2VpZ2h0JzpcbiAgICAgICAgY2FzZSAnZm9udFdlaWdodEJvbGQnOlxuICAgICAgICAgIC8vIFdoZW4gdGhlIGZvbnQgY2hhbmdlcyB0aGUgc2l6ZSBvZiB0aGUgY2VsbHMgbWF5IGNoYW5nZSB3aGljaCByZXF1aXJlcyBhIHJlbmRlcmVyIGNsZWFyXG4gICAgICAgICAgaWYgKHRoaXMuX3JlbmRlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2UuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5jb2xzLCB0aGlzLnJvd3MpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmVuZGVyZXJUeXBlJzpcbiAgICAgICAgICBpZiAodGhpcy5fcmVuZGVyU2VydmljZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5zZXRSZW5kZXJlcih0aGlzLl9jcmVhdGVSZW5kZXJlcigpKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5jb2xzLCB0aGlzLnJvd3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2Nyb2xsYmFjayc6XG4gICAgICAgICAgdGhpcy5idWZmZXJzLnJlc2l6ZSh0aGlzLmNvbHMsIHRoaXMucm93cyk7XG4gICAgICAgICAgaWYgKHRoaXMudmlld3BvcnQpIHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NjcmVlblJlYWRlck1vZGUnOlxuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciAmJiB0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gbmV3IEFjY2Vzc2liaWxpdHlNYW5hZ2VyKHRoaXMsIHRoaXMuX3JlbmRlclNlcnZpY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0YWJTdG9wV2lkdGgnOiB0aGlzLmJ1ZmZlcnMuc2V0dXBUYWJTdG9wcygpOyBicmVhaztcbiAgICAgICAgY2FzZSAndGhlbWUnOlxuICAgICAgICAgIHRoaXMuX3NldFRoZW1lKHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucy50aGVtZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Njcm9sbGJhY2snOlxuICAgICAgICAgIGNvbnN0IG5ld0J1ZmZlckxlbmd0aCA9IHRoaXMucm93cyArIHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5zY3JvbGxiYWNrO1xuICAgICAgICAgIGlmICh0aGlzLmJ1ZmZlci5saW5lcy5sZW5ndGggPiBuZXdCdWZmZXJMZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudFRvVHJpbSA9IHRoaXMuYnVmZmVyLmxpbmVzLmxlbmd0aCAtIG5ld0J1ZmZlckxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IG5lZWRzUmVmcmVzaCA9ICh0aGlzLmJ1ZmZlci55ZGlzcCAtIGFtb3VudFRvVHJpbSA8IDApO1xuICAgICAgICAgICAgdGhpcy5idWZmZXIubGluZXMudHJpbVN0YXJ0KGFtb3VudFRvVHJpbSk7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci55YmFzZSA9IE1hdGgubWF4KHRoaXMuYnVmZmVyLnliYXNlIC0gYW1vdW50VG9UcmltLCAwKTtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyLnlkaXNwID0gTWF0aC5tYXgodGhpcy5idWZmZXIueWRpc3AgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICAgICAgaWYgKG5lZWRzUmVmcmVzaCkge1xuICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBjYXNlICd3aW5kb3dzTW9kZSc6XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucy53aW5kb3dzTW9kZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl93aW5kb3dzTW9kZSkge1xuICAgICAgICAgICAgICB0aGlzLl93aW5kb3dzTW9kZSA9IGFwcGx5V2luZG93c01vZGUodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl93aW5kb3dzTW9kZSkge1xuICAgICAgICAgICAgICB0aGlzLl93aW5kb3dzTW9kZS5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgIHRoaXMuX3dpbmRvd3NNb2RlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kcyB0aGUgZGVzaXJlZCBmb2N1cyBiZWhhdmlvciBvbiBhIGdpdmVuIHRlcm1pbmFsIG9iamVjdC5cbiAgICovXG4gIHByaXZhdGUgX29uVGV4dEFyZWFGb2N1cyhldjogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNlbmRGb2N1cykge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnW0knKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVDdXJzb3JTdHlsZShldik7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZvY3VzJyk7XG4gICAgdGhpcy5zaG93Q3Vyc29yKCk7XG4gICAgdGhpcy5fb25Gb2N1cy5maXJlKCk7XG4gIH1cblxuICAvKipcbiAgICogQmx1ciB0aGUgdGVybWluYWwsIGNhbGxpbmcgdGhlIGJsdXIgZnVuY3Rpb24gb24gdGhlIHRlcm1pbmFsJ3MgdW5kZXJseWluZ1xuICAgKiB0ZXh0YXJlYS5cbiAgICovXG4gIHB1YmxpYyBibHVyKCk6IHZvaWQge1xuICAgIHJldHVybiB0aGlzLnRleHRhcmVhLmJsdXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kcyB0aGUgZGVzaXJlZCBibHVyIGJlaGF2aW9yIG9uIGEgZ2l2ZW4gdGVybWluYWwgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSBfb25UZXh0QXJlYUJsdXIoKTogdm9pZCB7XG4gICAgLy8gVGV4dCBjYW4gc2FmZWx5IGJlIHJlbW92ZWQgb24gYmx1ci4gRG9pbmcgaXQgZWFybGllciBjb3VsZCBpbnRlcmZlcmUgd2l0aFxuICAgIC8vIHNjcmVlbiByZWFkZXJzIHJlYWRpbmcgaXQgb3V0LlxuICAgIHRoaXMudGV4dGFyZWEudmFsdWUgPSAnJztcbiAgICB0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSwgdGhpcy5idWZmZXIueSk7XG4gICAgaWYgKHRoaXMuc2VuZEZvY3VzKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbTycpO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMnKTtcbiAgICB0aGlzLl9vbkJsdXIuZmlyZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgZGVmYXVsdCBiZWhhdmlvclxuICAgKi9cbiAgcHJpdmF0ZSBfaW5pdEdsb2JhbCgpOiB2b2lkIHtcbiAgICB0aGlzLl9iaW5kS2V5cygpO1xuXG4gICAgLy8gQmluZCBjbGlwYm9hcmQgZnVuY3Rpb25hbGl0eVxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ2NvcHknLCAoZXZlbnQ6IENsaXBib2FyZEV2ZW50KSA9PiB7XG4gICAgICAvLyBJZiBtb3VzZSBldmVudHMgYXJlIGFjdGl2ZSBpdCBtZWFucyB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgaXMgZGlzYWJsZWQgYW5kXG4gICAgICAvLyBjb3B5IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBob3N0IHByb2dyYW0uXG4gICAgICBpZiAoIXRoaXMuaGFzU2VsZWN0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29weUhhbmRsZXIoZXZlbnQsIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UpO1xuICAgIH0pKTtcbiAgICBjb25zdCBwYXN0ZUhhbmRsZXJXcmFwcGVyID0gKGV2ZW50OiBDbGlwYm9hcmRFdmVudCkgPT4gaGFuZGxlUGFzdGVFdmVudChldmVudCwgdGhpcy50ZXh0YXJlYSwgdGhpcy5icmFja2V0ZWRQYXN0ZU1vZGUsIHRoaXMuX2NvcmVTZXJ2aWNlKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAncGFzdGUnLCBwYXN0ZUhhbmRsZXJXcmFwcGVyKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50LCAncGFzdGUnLCBwYXN0ZUhhbmRsZXJXcmFwcGVyKSk7XG5cbiAgICAvLyBIYW5kbGUgcmlnaHQgY2xpY2sgY29udGV4dCBtZW51c1xuICAgIGlmIChCcm93c2VyLmlzRmlyZWZveCkge1xuICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IGFwcGVhciB0byBmaXJlIHRoZSBjb250ZXh0bWVudSBldmVudCBvbiByaWdodCBjbGlja1xuICAgICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50LCAnbW91c2Vkb3duJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgICAgICByaWdodENsaWNrSGFuZGxlcihldmVudCwgdGhpcy50ZXh0YXJlYSwgdGhpcy5zY3JlZW5FbGVtZW50LCB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLCB0aGlzLm9wdGlvbnMucmlnaHRDbGlja1NlbGVjdHNXb3JkKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLmVsZW1lbnQsICdjb250ZXh0bWVudScsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICByaWdodENsaWNrSGFuZGxlcihldmVudCwgdGhpcy50ZXh0YXJlYSwgdGhpcy5zY3JlZW5FbGVtZW50LCB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLCB0aGlzLm9wdGlvbnMucmlnaHRDbGlja1NlbGVjdHNXb3JkKTtcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICAvLyBNb3ZlIHRoZSB0ZXh0YXJlYSB1bmRlciB0aGUgY3Vyc29yIHdoZW4gbWlkZGxlIGNsaWNraW5nIG9uIExpbnV4IHRvIGVuc3VyZVxuICAgIC8vIG1pZGRsZSBjbGljayB0byBwYXN0ZSBzZWxlY3Rpb24gd29ya3MuIFRoaXMgb25seSBhcHBlYXJzIHRvIHdvcmsgaW4gQ2hyb21lXG4gICAgLy8gYXQgdGhlIHRpbWUgaXMgd3JpdGluZy5cbiAgICBpZiAoQnJvd3Nlci5pc0xpbnV4KSB7XG4gICAgICAvLyBVc2UgYXV4Y2xpY2sgZXZlbnQgb3ZlciBtb3VzZWRvd24gdGhlIGxhdHRlciBkb2Vzbid0IHNlZW0gdG8gd29yay4gTm90ZVxuICAgICAgLy8gdGhhdCB0aGUgcmVndWxhciBjbGljayBldmVudCBkb2Vzbid0IGZpcmUgZm9yIHRoZSBtaWRkbGUgbW91c2UgYnV0dG9uLlxuICAgICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5lbGVtZW50LCAnYXV4Y2xpY2snLCAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgIG1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IoZXZlbnQsIHRoaXMudGV4dGFyZWEsIHRoaXMuc2NyZWVuRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkga2V5IGhhbmRsaW5nIHRvIHRoZSB0ZXJtaW5hbFxuICAgKi9cbiAgcHJpdmF0ZSBfYmluZEtleXMoKTogdm9pZCB7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2tleXVwJywgKGV2OiBLZXlib2FyZEV2ZW50KSA9PiB0aGlzLl9rZXlVcChldiksIHRydWUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAna2V5ZG93bicsIChldjogS2V5Ym9hcmRFdmVudCkgPT4gdGhpcy5fa2V5RG93bihldiksIHRydWUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAna2V5cHJlc3MnLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX2tleVByZXNzKGV2KSwgdHJ1ZSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdjb21wb3NpdGlvbnN0YXJ0JywgKCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb25zdGFydCgpKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2NvbXBvc2l0aW9udXBkYXRlJywgKGU6IENvbXBvc2l0aW9uRXZlbnQpID0+IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9udXBkYXRlKGUpKSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy50ZXh0YXJlYSwgJ2NvbXBvc2l0aW9uZW5kJywgKCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb25lbmQoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vblJlbmRlcigoKSA9PiB0aGlzLl9jb21wb3NpdGlvbkhlbHBlci51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25SZW5kZXIoZSA9PiB0aGlzLl9xdWV1ZUxpbmtpZmljYXRpb24oZS5zdGFydCwgZS5lbmQpKSk7XG4gIH1cblxuICAvKipcbiAgICogT3BlbnMgdGhlIHRlcm1pbmFsIHdpdGhpbiBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IFRoZSBlbGVtZW50IHRvIGNyZWF0ZSB0aGUgdGVybWluYWwgd2l0aGluLlxuICAgKi9cbiAgcHVibGljIG9wZW4ocGFyZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudCB8fCB0aGlzLl9wYXJlbnQ7XG5cbiAgICBpZiAoIXRoaXMuX3BhcmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXJtaW5hbCByZXF1aXJlcyBhIHBhcmVudCBlbGVtZW50LicpO1xuICAgIH1cblxuICAgIHRoaXMuX2RvY3VtZW50ID0gdGhpcy5fcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG5cbiAgICAvLyBDcmVhdGUgbWFpbiBlbGVtZW50IGNvbnRhaW5lclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZWxlbWVudC5kaXIgPSAnbHRyJzsgICAvLyB4dGVybS5jc3MgYXNzdW1lcyBMVFJcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGVybWluYWwnKTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneHRlcm0nKTtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgdGhpcy5fcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG5cbiAgICAvLyBQZXJmb3JtYW5jZTogVXNlIGEgZG9jdW1lbnQgZnJhZ21lbnQgdG8gYnVpbGQgdGhlIHRlcm1pbmFsXG4gICAgLy8gdmlld3BvcnQgYW5kIGhlbHBlciBlbGVtZW50cyBkZXRhY2hlZCBmcm9tIHRoZSBET01cbiAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneHRlcm0tdmlld3BvcnQnKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLl92aWV3cG9ydEVsZW1lbnQpO1xuICAgIHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYS5jbGFzc0xpc3QuYWRkKCd4dGVybS1zY3JvbGwtYXJlYScpO1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEpO1xuXG4gICAgdGhpcy5zY3JlZW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5zY3JlZW5FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLXNjcmVlbicpO1xuICAgIC8vIENyZWF0ZSB0aGUgY29udGFpbmVyIHRoYXQgd2lsbCBob2xkIGhlbHBlcnMgbGlrZSB0aGUgdGV4dGFyZWEgZm9yXG4gICAgLy8gY2FwdHVyaW5nIERPTSBFdmVudHMuIFRoZW4gcHJvZHVjZSB0aGUgaGVscGVycy5cbiAgICB0aGlzLl9oZWxwZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9oZWxwZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgneHRlcm0taGVscGVycycpO1xuICAgIHRoaXMuc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9oZWxwZXJDb250YWluZXIpO1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuc2NyZWVuRWxlbWVudCk7XG5cbiAgICB0aGlzLnRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0aGlzLnRleHRhcmVhLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWhlbHBlci10ZXh0YXJlYScpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgU3RyaW5ncy5wcm9tcHRMYWJlbCk7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbXVsdGlsaW5lJywgJ2ZhbHNlJyk7XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2F1dG9jb3JyZWN0JywgJ29mZicpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhdXRvY2FwaXRhbGl6ZScsICdvZmYnKTtcbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnc3BlbGxjaGVjaycsICdmYWxzZScpO1xuICAgIHRoaXMudGV4dGFyZWEudGFiSW5kZXggPSAwO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdmb2N1cycsIChldjogS2V5Ym9hcmRFdmVudCkgPT4gdGhpcy5fb25UZXh0QXJlYUZvY3VzKGV2KSkpO1xuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdibHVyJywgKCkgPT4gdGhpcy5fb25UZXh0QXJlYUJsdXIoKSkpO1xuICAgIHRoaXMuX2hlbHBlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnRleHRhcmVhKTtcblxuICAgIHRoaXMuX2NoYXJTaXplU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENoYXJTaXplU2VydmljZSwgdGhpcy5fZG9jdW1lbnQsIHRoaXMuX2hlbHBlckNvbnRhaW5lcik7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJQ2hhclNpemVTZXJ2aWNlLCB0aGlzLl9jaGFyU2l6ZVNlcnZpY2UpO1xuXG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5hZGQoJ2NvbXBvc2l0aW9uLXZpZXcnKTtcbiAgICB0aGlzLl9jb21wb3NpdGlvbkhlbHBlciA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvbXBvc2l0aW9uSGVscGVyLCB0aGlzLnRleHRhcmVhLCB0aGlzLl9jb21wb3NpdGlvblZpZXcpO1xuICAgIHRoaXMuX2hlbHBlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jb21wb3NpdGlvblZpZXcpO1xuXG4gICAgLy8gUGVyZm9ybWFuY2U6IEFkZCB2aWV3cG9ydCBhbmQgaGVscGVyIGVsZW1lbnRzIGZyb20gdGhlIGZyYWdtZW50XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIHRoaXMuX3RoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lO1xuICAgIHRoaXMub3B0aW9ucy50aGVtZSA9IG51bGw7XG4gICAgdGhpcy5fY29sb3JNYW5hZ2VyID0gbmV3IENvbG9yTWFuYWdlcihkb2N1bWVudCwgdGhpcy5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KTtcbiAgICB0aGlzLl9jb2xvck1hbmFnZXIuc2V0VGhlbWUodGhpcy5fdGhlbWUpO1xuXG4gICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLl9jcmVhdGVSZW5kZXJlcigpO1xuICAgIHRoaXMuX3JlbmRlclNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShSZW5kZXJTZXJ2aWNlLCByZW5kZXJlciwgdGhpcy5yb3dzLCB0aGlzLnNjcmVlbkVsZW1lbnQpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSVJlbmRlclNlcnZpY2UsIHRoaXMuX3JlbmRlclNlcnZpY2UpO1xuICAgIHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXIoZSA9PiB0aGlzLl9vblJlbmRlci5maXJlKGUpKTtcbiAgICB0aGlzLm9uUmVzaXplKGUgPT4gdGhpcy5fcmVuZGVyU2VydmljZS5yZXNpemUoZS5jb2xzLCBlLnJvd3MpKTtcblxuICAgIHRoaXMuX3NvdW5kU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFNvdW5kU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJU291bmRTZXJ2aWNlLCB0aGlzLl9zb3VuZFNlcnZpY2UpO1xuICAgIHRoaXMuX21vdXNlU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKE1vdXNlU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJTW91c2VTZXJ2aWNlLCB0aGlzLl9tb3VzZVNlcnZpY2UpO1xuXG4gICAgdGhpcy52aWV3cG9ydCA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFZpZXdwb3J0LFxuICAgICAgKGFtb3VudDogbnVtYmVyLCBzdXBwcmVzc0V2ZW50OiBib29sZWFuKSA9PiB0aGlzLnNjcm9sbExpbmVzKGFtb3VudCwgc3VwcHJlc3NFdmVudCksXG4gICAgICB0aGlzLl92aWV3cG9ydEVsZW1lbnQsXG4gICAgICB0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWFcbiAgICApO1xuICAgIHRoaXMudmlld3BvcnQub25UaGVtZUNoYW5nZSh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMudmlld3BvcnQpO1xuXG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uQ3Vyc29yTW92ZSgoKSA9PiB0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uQ3Vyc29yTW92ZSgpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVzaXplKCgpID0+IHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5jb2xzLCB0aGlzLnJvd3MpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uQmx1cigoKSA9PiB0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uQmx1cigpKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9uRm9jdXMoKCkgPT4gdGhpcy5fcmVuZGVyU2VydmljZS5vbkZvY3VzKCkpKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKCgpID0+IHRoaXMudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKSkpO1xuXG4gICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFNlbGVjdGlvblNlcnZpY2UsXG4gICAgICAoYW1vdW50OiBudW1iZXIsIHN1cHByZXNzRXZlbnQ6IGJvb2xlYW4pID0+IHRoaXMuc2Nyb2xsTGluZXMoYW1vdW50LCBzdXBwcmVzc0V2ZW50KSxcbiAgICAgIHRoaXMuZWxlbWVudCxcbiAgICAgIHRoaXMuc2NyZWVuRWxlbWVudCk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJU2VsZWN0aW9uU2VydmljZSwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0aW9uQ2hhbmdlKCgpID0+IHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblJlZHJhd1JlcXVlc3QoZSA9PiB0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uU2VsZWN0aW9uQ2hhbmdlZChlLnN0YXJ0LCBlLmVuZCwgZS5jb2x1bW5TZWxlY3RNb2RlKSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vbkxpbnV4TW91c2VTZWxlY3Rpb24odGV4dCA9PiB7XG4gICAgICAvLyBJZiB0aGVyZSdzIGEgbmV3IHNlbGVjdGlvbiwgcHV0IGl0IGludG8gdGhlIHRleHRhcmVhLCBmb2N1cyBhbmQgc2VsZWN0IGl0XG4gICAgICAvLyBpbiBvcmRlciB0byByZWdpc3RlciBpdCBhcyBhIHNlbGVjdGlvbiBvbiB0aGUgT1MuIFRoaXMgZXZlbnQgaXMgZmlyZWRcbiAgICAgIC8vIG9ubHkgb24gTGludXggdG8gZW5hYmxlIG1pZGRsZSBjbGljayB0byBwYXN0ZSBzZWxlY3Rpb24uXG4gICAgICB0aGlzLnRleHRhcmVhLnZhbHVlID0gdGV4dDtcbiAgICAgIHRoaXMudGV4dGFyZWEuZm9jdXMoKTtcbiAgICAgIHRoaXMudGV4dGFyZWEuc2VsZWN0KCk7XG4gICAgfSkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vblNjcm9sbCgoKSA9PiB7XG4gICAgICB0aGlzLnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCk7XG4gICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnJlZnJlc2goKTtcbiAgICB9KSk7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5fdmlld3BvcnRFbGVtZW50LCAnc2Nyb2xsJywgKCkgPT4gdGhpcy5fc2VsZWN0aW9uU2VydmljZS5yZWZyZXNoKCkpKTtcblxuICAgIHRoaXMuX21vdXNlWm9uZU1hbmFnZXIgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShNb3VzZVpvbmVNYW5hZ2VyLCB0aGlzLmVsZW1lbnQsIHRoaXMuc2NyZWVuRWxlbWVudCk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKTtcbiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub25TY3JvbGwoKCkgPT4gdGhpcy5fbW91c2Vab25lTWFuYWdlci5jbGVhckFsbCgpKSk7XG4gICAgdGhpcy5saW5raWZpZXIuYXR0YWNoVG9Eb20odGhpcy5lbGVtZW50LCB0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKTtcblxuICAgIC8vIFRoaXMgZXZlbnQgbGlzdGVuZXIgbXVzdCBiZSByZWdpc3RlcmVkIGFmdHJlIE1vdXNlWm9uZU1hbmFnZXIgaXMgY3JlYXRlZFxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ21vdXNlZG93bicsIChlOiBNb3VzZUV2ZW50KSA9PiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uTW91c2VEb3duKGUpKSk7XG5cbiAgICAvLyBhcHBseSBtb3VzZSBldmVudCBjbGFzc2VzIHNldCBieSBlc2NhcGUgY29kZXMgYmVmb3JlIHRlcm1pbmFsIHdhcyBhdHRhY2hlZFxuICAgIGlmICh0aGlzLm1vdXNlRXZlbnRzKSB7XG4gICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmRpc2FibGUoKTtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlbmFibGUtbW91c2UtZXZlbnRzJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UuZW5hYmxlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICAvLyBOb3RlIHRoYXQgdGhpcyBtdXN0IGJlIGRvbmUgKmFmdGVyKiB0aGUgcmVuZGVyZXIgaXMgY3JlYXRlZCBpbiBvcmRlciB0b1xuICAgICAgLy8gZW5zdXJlIHRoZSBjb3JyZWN0IG9yZGVyIG9mIHRoZSBkcHJjaGFuZ2UgZXZlbnRcbiAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyID0gbmV3IEFjY2Vzc2liaWxpdHlNYW5hZ2VyKHRoaXMsIHRoaXMuX3JlbmRlclNlcnZpY2UpO1xuICAgIH1cblxuICAgIC8vIE1lYXN1cmUgdGhlIGNoYXJhY3RlciBzaXplXG4gICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKTtcblxuICAgIC8vIFNldHVwIGxvb3AgdGhhdCBkcmF3cyB0byBzY3JlZW5cbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG5cbiAgICAvLyBJbml0aWFsaXplIGdsb2JhbCBhY3Rpb25zIHRoYXQgbmVlZCB0byBiZSB0YWtlbiBvbiB0aGUgZG9jdW1lbnQuXG4gICAgdGhpcy5faW5pdEdsb2JhbCgpO1xuXG4gICAgLy8gTGlzdGVuIGZvciBtb3VzZSBldmVudHMgYW5kIHRyYW5zbGF0ZVxuICAgIC8vIHRoZW0gaW50byB0ZXJtaW5hbCBtb3VzZSBwcm90b2NvbHMuXG4gICAgdGhpcy5iaW5kTW91c2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZVJlbmRlcmVyKCk6IElSZW5kZXJlciB7XG4gICAgc3dpdGNoICh0aGlzLm9wdGlvbnMucmVuZGVyZXJUeXBlKSB7XG4gICAgICBjYXNlICdjYW52YXMnOiByZXR1cm4gbmV3IFJlbmRlcmVyKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMsIHRoaXMsIHRoaXMuX2J1ZmZlclNlcnZpY2UsIHRoaXMuX2NoYXJTaXplU2VydmljZSwgdGhpcy5vcHRpb25zU2VydmljZSk7XG4gICAgICBjYXNlICdkb20nOiByZXR1cm4gbmV3IERvbVJlbmRlcmVyKHRoaXMsIHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMsIHRoaXMuX2NoYXJTaXplU2VydmljZSwgdGhpcy5vcHRpb25zU2VydmljZSk7XG4gICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCByZW5kZXJlclR5cGUgXCIke3RoaXMub3B0aW9ucy5yZW5kZXJlclR5cGV9XCJgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdGhlbWUgb24gdGhlIHJlbmRlcmVyLiBUaGUgcmVuZGVyZXIgbXVzdCBoYXZlIGJlZW4gaW5pdGlhbGl6ZWQuXG4gICAqIEBwYXJhbSB0aGVtZSBUaGUgdGhlbWUgdG8gc2V0LlxuICAgKi9cbiAgcHJpdmF0ZSBfc2V0VGhlbWUodGhlbWU6IElUaGVtZSk6IHZvaWQge1xuICAgIHRoaXMuX3RoZW1lID0gdGhlbWU7XG4gICAgaWYgKHRoaXMuX2NvbG9yTWFuYWdlcikge1xuICAgICAgdGhpcy5fY29sb3JNYW5hZ2VyLnNldFRoZW1lKHRoZW1lKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3JlbmRlclNlcnZpY2UpIHtcbiAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2Uuc2V0Q29sb3JzKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpO1xuICAgIH1cbiAgICBpZiAodGhpcy52aWV3cG9ydCkge1xuICAgICAgdGhpcy52aWV3cG9ydC5vblRoZW1lQ2hhbmdlKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGNlcnRhaW4gbW91c2UgZXZlbnRzIHRvIHRoZSB0ZXJtaW5hbC5cbiAgICogQnkgZGVmYXVsdCBvbmx5IDMgYnV0dG9uICsgd2hlZWwgdXAvZG93biBpcyBhdGl2YXRlZC4gRm9yIGhpZ2hlciBidXR0b25zXG4gICAqIG5vIG1vdXNlIHJlcG9ydCB3aWxsIGJlIGNyZWF0ZWQuIFR5cGljYWxseSB0aGUgc3RhbmRhcmQgYWN0aW9ucyB3aWxsIGJlIGFjdGl2ZS5cbiAgICpcbiAgICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyBub3QgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIGhpZ2hlciBidXR0b25zL3doZWVsOlxuICAgKiAtIEJ1dHRvbiA0IGFuZCA1IGFyZSB0eXBpY2FsbHkgdXNlZCBmb3IgaGlzdG9yeSBiYWNrIGFuZCBmb3J3YXJkIG5hdmlnYXRpb24sXG4gICAqICAgdGhlcmUgaXMgbm8gc3RyYWlnaHQgZm9yd2FyZCB3YXkgdG8gc3VwcmVzcy9pbnRlcmNlcHQgdGhvc2Ugc3RhbmRhcmQgYWN0aW9ucy5cbiAgICogLSBTdXBwb3J0IGZvciBoaWdoZXIgYnV0dG9ucyBkb2VzIG5vdCB3b3JrIGluIHNvbWUgcGxhdGZvcm0vYnJvd3NlciBjb21iaW5hdGlvbnMuXG4gICAqIC0gTGVmdC9yaWdodCB3aGVlbCB3YXMgbm90IHRlc3RlZC5cbiAgICogLSBFbXVsYXRvcnMgdmFyeSBpbiBtb3VzZSBidXR0b24gc3VwcG9ydCwgdHlwaWNhbGx5IG9ubHkgMyBidXR0b25zIGFuZFxuICAgKiAgIHdoZWVsIHVwL2Rvd24gd29yayByZWxpYWJsZS5cbiAgICpcbiAgICogVE9ETzogTW92ZSBtb3VzZSBldmVudCBjb2RlIGludG8gaXRzIG93biBmaWxlLlxuICAgKi9cbiAgcHVibGljIGJpbmRNb3VzZSgpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBlbCA9IHRoaXMuZWxlbWVudDtcblxuICAgIC8vIHNlbmQgZXZlbnQgdG8gQ29yZU1vdXNlU2VydmljZVxuICAgIGZ1bmN0aW9uIHNlbmRFdmVudChldjogTW91c2VFdmVudCB8IFdoZWVsRXZlbnQpOiBib29sZWFuIHtcbiAgICAgIGxldCBwb3M7XG5cbiAgICAgIC8vIGdldCBtb3VzZSBjb29yZGluYXRlc1xuICAgICAgcG9zID0gc2VsZi5fbW91c2VTZXJ2aWNlLmdldFJhd0J5dGVDb29yZHMoZXYsIHNlbGYuc2NyZWVuRWxlbWVudCwgc2VsZi5jb2xzLCBzZWxmLnJvd3MpO1xuICAgICAgaWYgKCFwb3MpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBsZXQgYnV0OiBDb3JlTW91c2VCdXR0b247XG4gICAgICBsZXQgYWN0aW9uOiBDb3JlTW91c2VBY3Rpb247XG4gICAgICBzd2l0Y2ggKCg8YW55PmV2KS5vdmVycmlkZVR5cGUgfHwgZXYudHlwZSkge1xuICAgICAgICBjYXNlICdtb3VzZW1vdmUnOlxuICAgICAgICAgIGFjdGlvbiA9IENvcmVNb3VzZUFjdGlvbi5NT1ZFO1xuICAgICAgICAgIGlmIChldi5idXR0b25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGJ1dHRvbnMgaXMgbm90IHN1cHBvcnRlZCBvbiBtYWNPUywgdHJ5IHRvIGdldCBhIHZhbHVlIGZyb20gYnV0dG9uIGluc3RlYWRcbiAgICAgICAgICAgIGJ1dCA9IENvcmVNb3VzZUJ1dHRvbi5OT05FO1xuICAgICAgICAgICAgaWYgKGV2LmJ1dHRvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGJ1dCA9IGV2LmJ1dHRvbiA8IDMgPyBldi5idXR0b24gOiBDb3JlTW91c2VCdXR0b24uTk9ORTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gYWNjb3JkaW5nIHRvIE1ETiBidXR0b25zIG9ubHkgcmVwb3J0cyB1cCB0byBidXR0b24gNSAoQVVYMilcbiAgICAgICAgICAgIGJ1dCA9IGV2LmJ1dHRvbnMgJiAxID8gQ29yZU1vdXNlQnV0dG9uLkxFRlQgOlxuICAgICAgICAgICAgICAgICAgZXYuYnV0dG9ucyAmIDQgPyBDb3JlTW91c2VCdXR0b24uTUlERExFIDpcbiAgICAgICAgICAgICAgICAgIGV2LmJ1dHRvbnMgJiAyID8gQ29yZU1vdXNlQnV0dG9uLlJJR0hUIDpcbiAgICAgICAgICAgICAgICAgIENvcmVNb3VzZUJ1dHRvbi5OT05FOyAvLyBmYWxsYmFjayB0byBOT05FXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3VzZXVwJzpcbiAgICAgICAgICBhY3Rpb24gPSBDb3JlTW91c2VBY3Rpb24uVVA7XG4gICAgICAgICAgYnV0ID0gZXYuYnV0dG9uIDwgMyA/IGV2LmJ1dHRvbiA6IENvcmVNb3VzZUJ1dHRvbi5OT05FO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3VzZWRvd24nOlxuICAgICAgICAgIGFjdGlvbiA9IENvcmVNb3VzZUFjdGlvbi5ET1dOO1xuICAgICAgICAgIGJ1dCA9IGV2LmJ1dHRvbiA8IDMgPyBldi5idXR0b24gOiBDb3JlTW91c2VCdXR0b24uTk9ORTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2hlZWwnOlxuICAgICAgICAgIC8vIG9ubHkgVVAvRE9XTiB3aGVlbCBldmVudHMgYXJlIHJlc3BlY3RlZFxuICAgICAgICAgIGlmICgoZXYgYXMgV2hlZWxFdmVudCkuZGVsdGFZICE9PSAwKSB7XG4gICAgICAgICAgICBhY3Rpb24gPSAoZXYgYXMgV2hlZWxFdmVudCkuZGVsdGFZIDwgMCA/IENvcmVNb3VzZUFjdGlvbi5VUCA6IENvcmVNb3VzZUFjdGlvbi5ET1dOO1xuICAgICAgICAgIH1cbiAgICAgICAgICBidXQgPSBDb3JlTW91c2VCdXR0b24uV0hFRUw7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gZG9udCBoYW5kbGUgb3RoZXIgZXZlbnQgdHlwZXMgYnkgYWNjaWRlbnRcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4aXQgaWYgd2UgY2Fubm90IGRldGVybWluZSB2YWxpZCBidXR0b24vYWN0aW9uIHZhbHVlc1xuICAgICAgLy8gZG8gbm90aGluZyBmb3IgaGlnaGVyIGJ1dHRvbnMgdGhhbiB3aGVlbFxuICAgICAgaWYgKGFjdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGJ1dCA9PT0gdW5kZWZpbmVkIHx8IGJ1dCA+IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmLl9jb3JlTW91c2VTZXJ2aWNlLnRyaWdnZXJNb3VzZUV2ZW50KHtcbiAgICAgICAgY29sOiBwb3MueCAtIDMzLCAvLyBGSVhNRTogd2h5IC0zMyBoZXJlP1xuICAgICAgICByb3c6IHBvcy55IC0gMzMsXG4gICAgICAgIGJ1dHRvbjogYnV0LFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIGN0cmw6IGV2LmN0cmxLZXksXG4gICAgICAgIGFsdDogZXYuYWx0S2V5LFxuICAgICAgICBzaGlmdDogZXYuc2hpZnRLZXlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGxpc3RlbmVyIHN0YXRlIGhhbmRsaW5nLlxuICAgICAqIFdlIGxpc3RlbiB0byB0aGUgb25Qcm90b2NvbENoYW5nZSBldmVudCBvZiBDb3JlTW91c2VTZXJ2aWNlIGFuZCBwdXRcbiAgICAgKiByZXF1ZXN0ZWQgbGlzdGVuZXJzIGluIGByZXF1ZXN0ZWRFdmVudHNgLiBXaXRoIHRoaXMgdGhlIGxpc3RlbmVyc1xuICAgICAqIGhhdmUgYWxsIGJpdHMgdG8gZG8gdGhlIGV2ZW50IGxpc3RlbmVyIGp1Z2dsaW5nLlxuICAgICAqIE5vdGU6ICdtb3VzZWRvd24nIGN1cnJlbnRseSBpcyBcImFsd2F5cyBvblwiIGFuZCBub3QgbWFuYWdlZFxuICAgICAqIGJ5IG9uUHJvdG9jb2xDaGFuZ2UuXG4gICAgICovXG4gICAgY29uc3QgcmVxdWVzdGVkRXZlbnRzOiB7W2tleTogc3RyaW5nXTogKChldjogRXZlbnQpID0+IHZvaWQpIHwgbnVsbH0gPSB7XG4gICAgICBtb3VzZXVwOiBudWxsLFxuICAgICAgd2hlZWw6IG51bGwsXG4gICAgICBtb3VzZWRyYWc6IG51bGwsXG4gICAgICBtb3VzZW1vdmU6IG51bGxcbiAgICB9O1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJzOiB7W2tleTogc3RyaW5nXTogKGV2OiBFdmVudCkgPT4gdm9pZH0gPSB7XG4gICAgICBtb3VzZXVwOiAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgc2VuZEV2ZW50KGV2KTtcbiAgICAgICAgaWYgKCFldi5idXR0b25zKSB7XG4gICAgICAgICAgLy8gaWYgbm8gb3RoZXIgYnV0dG9uIGlzIGhlbGQgcmVtb3ZlIGdsb2JhbCBoYW5kbGVyc1xuICAgICAgICAgIHRoaXMuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCByZXF1ZXN0ZWRFdmVudHMubW91c2V1cCk7XG4gICAgICAgICAgaWYgKHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcpIHtcbiAgICAgICAgICAgIHRoaXMuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgICAgfSxcbiAgICAgIHdoZWVsOiAoZXY6IFdoZWVsRXZlbnQpID0+IHtcbiAgICAgICAgc2VuZEV2ZW50KGV2KTtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICAgIH0sXG4gICAgICBtb3VzZWRyYWc6IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAvLyBkZWFsIG9ubHkgd2l0aCBtb3ZlIHdoaWxlIGEgYnV0dG9uIGlzIGhlbGRcbiAgICAgICAgaWYgKGV2LmJ1dHRvbnMpIHtcbiAgICAgICAgICBzZW5kRXZlbnQoZXYpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbW91c2Vtb3ZlOiAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgLy8gZGVhbCBvbmx5IHdpdGggbW92ZSB3aXRob3V0IGFueSBidXR0b25cbiAgICAgICAgaWYgKCFldi5idXR0b25zKSB7XG4gICAgICAgICAgc2VuZEV2ZW50KGV2KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5vblByb3RvY29sQ2hhbmdlKGV2ZW50cyA9PiB7XG4gICAgICAvLyBhcHBseSBnbG9iYWwgY2hhbmdlcyBvbiBldmVudHNcbiAgICAgIHRoaXMubW91c2VFdmVudHMgPSBldmVudHM7XG4gICAgICBpZiAoZXZlbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nTGV2ZWwgPT09ICdkZWJ1ZycpIHtcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdCaW5kaW5nIHRvIG1vdXNlIGV2ZW50czonLCB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmV4cGxhaW5FdmVudHMoZXZlbnRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VuYWJsZS1tb3VzZS1ldmVudHMnKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmJpbmRpbmcgZnJvbSBtb3VzZSBldmVudHMuJyk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGUtbW91c2UtZXZlbnRzJyk7XG4gICAgICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UuZW5hYmxlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZC9yZW1vdmUgaGFuZGxlcnMgZnJvbSByZXF1ZXN0ZWRFdmVudHNcblxuICAgICAgaWYgKCEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLk1PVkUpKSB7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZW1vdmUpO1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMubW91c2Vtb3ZlID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXJlcXVlc3RlZEV2ZW50cy5tb3VzZW1vdmUpIHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZlbnRMaXN0ZW5lcnMubW91c2Vtb3ZlKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNlbW92ZSA9IGV2ZW50TGlzdGVuZXJzLm1vdXNlbW92ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMKSkge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHJlcXVlc3RlZEV2ZW50cy53aGVlbCk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy53aGVlbCA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCFyZXF1ZXN0ZWRFdmVudHMud2hlZWwpIHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBldmVudExpc3RlbmVycy53aGVlbCk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy53aGVlbCA9IGV2ZW50TGlzdGVuZXJzLndoZWVsO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuVVApKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCByZXF1ZXN0ZWRFdmVudHMubW91c2V1cCk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKSB7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwID0gZXZlbnRMaXN0ZW5lcnMubW91c2V1cDtcbiAgICAgIH1cblxuICAgICAgaWYgKCEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLkRSQUcpKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcpO1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcpIHtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZyA9IGV2ZW50TGlzdGVuZXJzLm1vdXNlZHJhZztcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBmb3JjZSBpbml0aWFsIG9uUHJvdG9jb2xDaGFuZ2Ugc28gd2UgZG9udCBtaXNzIGVhcmx5IG1vdXNlIHJlcXVlc3RzXG4gICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCA9IHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w7XG5cbiAgICAvKipcbiAgICAgKiBcIkFsd2F5cyBvblwiIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgKi9cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ21vdXNlZG93bicsIChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuZm9jdXMoKTtcblxuICAgICAgLy8gRG9uJ3Qgc2VuZCB0aGUgbW91c2UgYnV0dG9uIHRvIHRoZSBwdHkgaWYgbW91c2UgZXZlbnRzIGFyZSBkaXNhYmxlZCBvclxuICAgICAgLy8gaWYgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIGlzIGhhdmluZyBzZWxlY3Rpb24gZm9yY2VkIChpZS4gYSBtb2RpZmllciBpc1xuICAgICAgLy8gaGVsZCkuXG4gICAgICBpZiAoIXRoaXMubW91c2VFdmVudHMgfHwgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zaG91bGRGb3JjZVNlbGVjdGlvbihldikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZW5kRXZlbnQoZXYpO1xuXG4gICAgICAvLyBSZWdpc3RlciBhZGRpdGlvbmFsIGdsb2JhbCBoYW5kbGVycyB3aGljaCBzaG91bGQga2VlcCByZXBvcnRpbmcgb3V0c2lkZVxuICAgICAgLy8gb2YgdGhlIHRlcm1pbmFsIGVsZW1lbnQuXG4gICAgICAvLyBOb3RlOiBPdGhlciBlbXVsYXRvcnMgYWxzbyBkbyB0aGlzIGZvciAnbW91c2Vkb3duJyB3aGlsZSBhIGJ1dHRvblxuICAgICAgLy8gaXMgaGVsZCwgd2UgY3VycmVudGx5IGxpbWl0ICdtb3VzZWRvd24nIHRvIHRoZSB0ZXJtaW5hbCBvbmx5LlxuICAgICAgaWYgKHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCByZXF1ZXN0ZWRFdmVudHMubW91c2V1cCk7XG4gICAgICB9XG4gICAgICBpZiAocmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZykge1xuICAgICAgICB0aGlzLl9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICB9KSk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ3doZWVsJywgKGV2OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgICBpZiAoIXJlcXVlc3RlZEV2ZW50cy53aGVlbCkge1xuICAgICAgICAvLyBDb252ZXJ0IHdoZWVsIGV2ZW50cyBpbnRvIHVwL2Rvd24gZXZlbnRzIHdoZW4gdGhlIGJ1ZmZlciBkb2VzIG5vdCBoYXZlIHNjcm9sbGJhY2ssIHRoaXNcbiAgICAgICAgLy8gZW5hYmxlcyBzY3JvbGxpbmcgaW4gYXBwcyBob3N0ZWQgaW4gdGhlIGFsdCBidWZmZXIgc3VjaCBhcyB2aW0gb3IgdG11eC5cbiAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlci5oYXNTY3JvbGxiYWNrKSB7XG4gICAgICAgICAgY29uc3QgYW1vdW50ID0gdGhpcy52aWV3cG9ydC5nZXRMaW5lc1Njcm9sbGVkKGV2KTtcblxuICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlcmUncyBubyB2ZXJ0aWNhbCBzY3JvbGxcbiAgICAgICAgICBpZiAoYW1vdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ29uc3RydWN0IGFuZCBzZW5kIHNlcXVlbmNlc1xuICAgICAgICAgIGNvbnN0IHNlcXVlbmNlID0gQzAuRVNDICsgKHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMgPyAnTycgOiAnWycpICsgKCBldi5kZWx0YVkgPCAwID8gJ0EnIDogJ0InKTtcbiAgICAgICAgICBsZXQgZGF0YSA9ICcnO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5hYnMoYW1vdW50KTsgaSsrKSB7XG4gICAgICAgICAgICBkYXRhICs9IHNlcXVlbmNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGRhdGEsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvLyBhbGxvdyB3aGVlbCBzY3JvbGxpbmcgaW5cbiAgICAvLyB0aGUgc2hlbGwgZm9yIGV4YW1wbGVcbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ3doZWVsJywgKGV2OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgICBpZiAocmVxdWVzdGVkRXZlbnRzLndoZWVsKSByZXR1cm47XG4gICAgICBpZiAoIXRoaXMudmlld3BvcnQub25XaGVlbChldikpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcihlbCwgJ3RvdWNoc3RhcnQnLCAoZXY6IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vdXNlRXZlbnRzKSByZXR1cm47XG4gICAgICB0aGlzLnZpZXdwb3J0Lm9uVG91Y2hTdGFydChldik7XG4gICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgIH0pKTtcblxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKGVsLCAndG91Y2htb3ZlJywgKGV2OiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5tb3VzZUV2ZW50cykgcmV0dXJuO1xuICAgICAgaWYgKCF0aGlzLnZpZXdwb3J0Lm9uVG91Y2hNb3ZlKGV2KSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXYpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFRlbGxzIHRoZSByZW5kZXJlciB0byByZWZyZXNoIHRlcm1pbmFsIGNvbnRlbnQgYmV0d2VlbiB0d28gcm93cyAoaW5jbHVzaXZlKSBhdCB0aGUgbmV4dFxuICAgKiBvcHBvcnR1bml0eS5cbiAgICogQHBhcmFtIHN0YXJ0IFRoZSByb3cgdG8gc3RhcnQgZnJvbSAoYmV0d2VlbiAwIGFuZCB0aGlzLnJvd3MgLSAxKS5cbiAgICogQHBhcmFtIGVuZCBUaGUgcm93IHRvIGVuZCBhdCAoYmV0d2VlbiBzdGFydCBhbmQgdGhpcy5yb3dzIC0gMSkuXG4gICAqL1xuICBwdWJsaWMgcmVmcmVzaChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLnJlZnJlc2hSb3dzKHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZXMgbGlua2lmaWNhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCByb3dzLlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIHJvdyB0byBzdGFydCBmcm9tIChiZXR3ZWVuIDAgYW5kIHRoaXMucm93cyAtIDEpLlxuICAgKiBAcGFyYW0gZW5kIFRoZSByb3cgdG8gZW5kIGF0IChiZXR3ZWVuIHN0YXJ0IGFuZCB0aGlzLnJvd3MgLSAxKS5cbiAgICovXG4gIHByaXZhdGUgX3F1ZXVlTGlua2lmaWNhdGlvbihzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLmxpbmtpZmllcikge1xuICAgICAgdGhpcy5saW5raWZpZXIubGlua2lmeVJvd3Moc3RhcnQsIGVuZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgY3Vyc29yIHN0eWxlIGZvciBkaWZmZXJlbnQgc2VsZWN0aW9uIG1vZGVzXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlQ3Vyc29yU3R5bGUoZXY6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uU2VydmljZSAmJiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNob3VsZENvbHVtblNlbGVjdChldikpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjb2x1bW4tc2VsZWN0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjb2x1bW4tc2VsZWN0Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdGhlIGN1cnNvciBlbGVtZW50XG4gICAqL1xuICBwdWJsaWMgc2hvd0N1cnNvcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY3Vyc29yU3RhdGUpIHtcbiAgICAgIHRoaXMuY3Vyc29yU3RhdGUgPSAxO1xuICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksIHRoaXMuYnVmZmVyLnkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIHRlcm1pbmFsIGRvd24gMSByb3csIGNyZWF0aW5nIGEgYmxhbmsgbGluZS5cbiAgICogQHBhcmFtIGlzV3JhcHBlZCBXaGV0aGVyIHRoZSBuZXcgbGluZSBpcyB3cmFwcGVkIGZyb20gdGhlIHByZXZpb3VzIGxpbmUuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsKGlzV3JhcHBlZDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgbGV0IG5ld0xpbmU6IElCdWZmZXJMaW5lO1xuICAgIG5ld0xpbmUgPSB0aGlzLl9ibGFua0xpbmU7XG4gICAgY29uc3QgZXJhc2VBdHRyID0gdGhpcy5lcmFzZUF0dHJEYXRhKCk7XG4gICAgaWYgKCFuZXdMaW5lIHx8IG5ld0xpbmUubGVuZ3RoICE9PSB0aGlzLmNvbHMgfHwgbmV3TGluZS5nZXRGZygwKSAhPT0gZXJhc2VBdHRyLmZnIHx8IG5ld0xpbmUuZ2V0QmcoMCkgIT09IGVyYXNlQXR0ci5iZykge1xuICAgICAgbmV3TGluZSA9IHRoaXMuYnVmZmVyLmdldEJsYW5rTGluZShlcmFzZUF0dHIsIGlzV3JhcHBlZCk7XG4gICAgICB0aGlzLl9ibGFua0xpbmUgPSBuZXdMaW5lO1xuICAgIH1cbiAgICBuZXdMaW5lLmlzV3JhcHBlZCA9IGlzV3JhcHBlZDtcblxuICAgIGNvbnN0IHRvcFJvdyA9IHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIuc2Nyb2xsVG9wO1xuICAgIGNvbnN0IGJvdHRvbVJvdyA9IHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIuc2Nyb2xsQm90dG9tO1xuXG4gICAgaWYgKHRoaXMuYnVmZmVyLnNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGJ1ZmZlciBpcyBnb2luZyB0byBiZSB0cmltbWVkIGFmdGVyIGluc2VydGlvbi5cbiAgICAgIGNvbnN0IHdpbGxCdWZmZXJCZVRyaW1tZWQgPSB0aGlzLmJ1ZmZlci5saW5lcy5pc0Z1bGw7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgbGluZSB1c2luZyB0aGUgZmFzdGVzdCBtZXRob2RcbiAgICAgIGlmIChib3R0b21Sb3cgPT09IHRoaXMuYnVmZmVyLmxpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgaWYgKHdpbGxCdWZmZXJCZVRyaW1tZWQpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlci5saW5lcy5yZWN5Y2xlKCkuY29weUZyb20obmV3TGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIubGluZXMucHVzaChuZXdMaW5lLmNsb25lKCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJ1ZmZlci5saW5lcy5zcGxpY2UoYm90dG9tUm93ICsgMSwgMCwgbmV3TGluZS5jbG9uZSgpKTtcbiAgICAgIH1cblxuICAgICAgLy8gT25seSBhZGp1c3QgeWJhc2UgYW5kIHlkaXNwIHdoZW4gdGhlIGJ1ZmZlciBpcyBub3QgdHJpbW1lZFxuICAgICAgaWYgKCF3aWxsQnVmZmVyQmVUcmltbWVkKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLnliYXNlKys7XG4gICAgICAgIC8vIE9ubHkgc2Nyb2xsIHRoZSB5ZGlzcCB3aXRoIHliYXNlIGlmIHRoZSB1c2VyIGhhcyBub3Qgc2Nyb2xsZWQgdXBcbiAgICAgICAgaWYgKCF0aGlzLl91c2VyU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIueWRpc3ArKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2hlbiB0aGUgYnVmZmVyIGlzIGZ1bGwgYW5kIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCB1cCwga2VlcCB0aGUgdGV4dFxuICAgICAgICAvLyBzdGFibGUgdW5sZXNzIHlkaXNwIGlzIHJpZ2h0IGF0IHRoZSB0b3BcbiAgICAgICAgaWYgKHRoaXMuX3VzZXJTY3JvbGxpbmcpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KHRoaXMuYnVmZmVyLnlkaXNwIC0gMSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc2Nyb2xsVG9wIGlzIG5vbi16ZXJvIHdoaWNoIG1lYW5zIG5vIGxpbmUgd2lsbCBiZSBnb2luZyB0byB0aGVcbiAgICAgIC8vIHNjcm9sbGJhY2ssIGluc3RlYWQgd2UgY2FuIGp1c3Qgc2hpZnQgdGhlbSBpbi1wbGFjZS5cbiAgICAgIGNvbnN0IHNjcm9sbFJlZ2lvbkhlaWdodCA9IGJvdHRvbVJvdyAtIHRvcFJvdyArIDEvKmFzIGl0J3MgemVyby1iYXNlZCovO1xuICAgICAgdGhpcy5idWZmZXIubGluZXMuc2hpZnRFbGVtZW50cyh0b3BSb3cgKyAxLCBzY3JvbGxSZWdpb25IZWlnaHQgLSAxLCAtMSk7XG4gICAgICB0aGlzLmJ1ZmZlci5saW5lcy5zZXQoYm90dG9tUm93LCBuZXdMaW5lLmNsb25lKCkpO1xuICAgIH1cblxuICAgIC8vIE1vdmUgdGhlIHZpZXdwb3J0IHRvIHRoZSBib3R0b20gb2YgdGhlIGJ1ZmZlciB1bmxlc3MgdGhlIHVzZXIgaXNcbiAgICAvLyBzY3JvbGxpbmcuXG4gICAgaWYgKCF0aGlzLl91c2VyU2Nyb2xsaW5nKSB7XG4gICAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IHRoaXMuYnVmZmVyLnliYXNlO1xuICAgIH1cblxuICAgIC8vIEZsYWcgcm93cyB0aGF0IG5lZWQgdXBkYXRpbmdcbiAgICB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5idWZmZXIuc2Nyb2xsVG9wLCB0aGlzLmJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuXG4gICAgdGhpcy5fb25TY3JvbGwuZmlyZSh0aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbFxuICAgKiBAcGFyYW0gZGlzcCBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIHNjcm9sbCBkb3duIChuZWdhdGl2ZSBzY3JvbGwgdXApLlxuICAgKiBAcGFyYW0gc3VwcHJlc3NTY3JvbGxFdmVudCBEb24ndCBlbWl0IHRoZSBzY3JvbGwgZXZlbnQgYXMgc2Nyb2xsTGluZXMuIFRoaXMgaXMgdXNlZFxuICAgKiB0byBhdm9pZCB1bndhbnRlZCBldmVudHMgYmVpbmcgaGFuZGxlZCBieSB0aGUgdmlld3BvcnQgd2hlbiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZCBmcm9tIHRoZVxuICAgKiB2aWV3cG9ydCBvcmlnaW5hbGx5LlxuICAgKi9cbiAgcHVibGljIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlciwgc3VwcHJlc3NTY3JvbGxFdmVudD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoZGlzcCA8IDApIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci55ZGlzcCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl91c2VyU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGRpc3AgKyB0aGlzLmJ1ZmZlci55ZGlzcCA+PSB0aGlzLmJ1ZmZlci55YmFzZSkge1xuICAgICAgdGhpcy5fdXNlclNjcm9sbGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZFlkaXNwID0gdGhpcy5idWZmZXIueWRpc3A7XG4gICAgdGhpcy5idWZmZXIueWRpc3AgPSBNYXRoLm1heChNYXRoLm1pbih0aGlzLmJ1ZmZlci55ZGlzcCArIGRpc3AsIHRoaXMuYnVmZmVyLnliYXNlKSwgMCk7XG5cbiAgICAvLyBObyBjaGFuZ2Ugb2NjdXJyZWQsIGRvbid0IHRyaWdnZXIgc2Nyb2xsL3JlZnJlc2hcbiAgICBpZiAob2xkWWRpc3AgPT09IHRoaXMuYnVmZmVyLnlkaXNwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFzdXBwcmVzc1Njcm9sbEV2ZW50KSB7XG4gICAgICB0aGlzLl9vblNjcm9sbC5maXJlKHRoaXMuYnVmZmVyLnlkaXNwKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbCBieSBhIG51bWJlciBvZiBwYWdlcy5cbiAgICogQHBhcmFtIHBhZ2VDb3VudCBUaGUgbnVtYmVyIG9mIHBhZ2VzIHRvIHNjcm9sbCAobmVnYXRpdmUgc2Nyb2xscyB1cCkuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsUGFnZXMocGFnZUNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHBhZ2VDb3VudCAqICh0aGlzLnJvd3MgLSAxKSk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWwgdG8gdGhlIHRvcC5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKC10aGlzLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWwgdG8gdGhlIGJvdHRvbS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxUb0JvdHRvbSgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHRoaXMuYnVmZmVyLnliYXNlIC0gdGhpcy5idWZmZXIueWRpc3ApO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzY3JvbGxBbW91bnQgPSBsaW5lIC0gdGhpcy5idWZmZXIueWRpc3A7XG4gICAgaWYgKHNjcm9sbEFtb3VudCAhPT0gMCkge1xuICAgICAgdGhpcy5zY3JvbGxMaW5lcyhzY3JvbGxBbW91bnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgcmF3IHV0ZjggYnl0ZXMgdG8gdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gZGF0YSBVaW50QXJyYXkgd2l0aCBVVEY4IGJ5dGVzIHRvIHdyaXRlIHRvIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyB3cml0ZVV0ZjgoZGF0YTogVWludDhBcnJheSk6IHZvaWQge1xuICAgIC8vIEVuc3VyZSB0aGUgdGVybWluYWwgaXNuJ3QgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5faXNEaXNwb3NlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElnbm9yZSBmYWxzeSBkYXRhIHZhbHVlc1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMud3JpdGVCdWZmZXJVdGY4LnB1c2goZGF0YSk7XG5cbiAgICAvLyBTZW5kIFhPRkYgdG8gcGF1c2UgdGhlIHB0eSBwcm9jZXNzIGlmIHRoZSB3cml0ZSBidWZmZXIgYmVjb21lcyB0b28gbGFyZ2Ugc29cbiAgICAvLyB4dGVybS5qcyBjYW4gY2F0Y2ggdXAgYmVmb3JlIG1vcmUgZGF0YSBpcyBzZW50LiBUaGlzIGlzIG5lY2Vzc2FyeSBpbiBvcmRlclxuICAgIC8vIHRvIGtlZXAgc2lnbmFscyBzdWNoIGFzIF5DIHJlc3BvbnNpdmUuXG4gICAgaWYgKHRoaXMub3B0aW9ucy51c2VGbG93Q29udHJvbCAmJiAhdGhpcy5feG9mZlNlbnRUb0NhdGNoVXAgJiYgdGhpcy53cml0ZUJ1ZmZlclV0ZjgubGVuZ3RoID49IFdSSVRFX0JVRkZFUl9QQVVTRV9USFJFU0hPTEQpIHtcbiAgICAgIC8vIFhPRkYgLSBzdG9wIHB0eSBwaXBlXG4gICAgICAvLyBYT04gd2lsbCBiZSB0cmlnZ2VyZWQgYnkgZW11bGF0b3IgYmVmb3JlIHByb2Nlc3NpbmcgZGF0YSBjaHVua1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5EQzMpO1xuICAgICAgdGhpcy5feG9mZlNlbnRUb0NhdGNoVXAgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fd3JpdGVJblByb2dyZXNzICYmIHRoaXMud3JpdGVCdWZmZXJVdGY4Lmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEtpY2sgb2ZmIGEgd3JpdGUgd2hpY2ggd2lsbCB3cml0ZSBhbGwgZGF0YSBpbiBzZXF1ZW5jZSByZWN1cnNpdmVseVxuICAgICAgdGhpcy5fd3JpdGVJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgIC8vIEtpY2sgb2ZmIGFuIGFzeW5jIGlubmVyV3JpdGUgc28gbW9yZSB3cml0ZXMgY2FuIGNvbWUgaW4gd2hpbGUgcHJvY2Vzc2luZyBkYXRhXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5faW5uZXJXcml0ZVV0ZjgoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfaW5uZXJXcml0ZVV0ZjgoYnVmZmVyT2Zmc2V0OiBudW1iZXIgPSAwKTogdm9pZCB7XG4gICAgLy8gRW5zdXJlIHRoZSB0ZXJtaW5hbCBpc24ndCBkaXNwb3NlZFxuICAgIGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLndyaXRlQnVmZmVyVXRmOCA9IFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgd2hpbGUgKHRoaXMud3JpdGVCdWZmZXJVdGY4Lmxlbmd0aCA+IGJ1ZmZlck9mZnNldCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMud3JpdGVCdWZmZXJVdGY4W2J1ZmZlck9mZnNldF07XG4gICAgICBidWZmZXJPZmZzZXQrKztcblxuICAgICAgLy8gSWYgWE9GRiB3YXMgc2VudCBpbiBvcmRlciB0byBjYXRjaCB1cCB3aXRoIHRoZSBwdHkgcHJvY2VzcywgcmVzdW1lIGl0IGlmXG4gICAgICAvLyB3ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIHdyaXRlQnVmZmVyIHRvIGFsbG93IG1vcmUgZGF0YSB0byBjb21lIGluLlxuICAgICAgaWYgKHRoaXMuX3hvZmZTZW50VG9DYXRjaFVwICYmIHRoaXMud3JpdGVCdWZmZXJVdGY4Lmxlbmd0aCA9PT0gYnVmZmVyT2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuREMxKTtcbiAgICAgICAgdGhpcy5feG9mZlNlbnRUb0NhdGNoVXAgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faW5wdXRIYW5kbGVyLnBhcnNlVXRmOChkYXRhKTtcblxuICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuX2RpcnR5Um93U2VydmljZS5zdGFydCwgdGhpcy5fZGlydHlSb3dTZXJ2aWNlLmVuZCk7XG5cbiAgICAgIGlmIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lID49IFdSSVRFX1RJTUVPVVRfTVMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLndyaXRlQnVmZmVyVXRmOC5sZW5ndGggPiBidWZmZXJPZmZzZXQpIHtcbiAgICAgIC8vIEFsbG93IHJlbmRlcmVyIHRvIGNhdGNoIHVwIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBuZXh0IGJhdGNoXG4gICAgICAvLyB0cmltIGFscmVhZHkgcHJvY2Vzc2VkIGNodW5rcyBpZiB3ZSBhcmUgYWJvdmUgdGhyZXNob2xkXG4gICAgICBpZiAoYnVmZmVyT2Zmc2V0ID4gV1JJVEVfQlVGRkVSX0xFTkdUSF9USFJFU0hPTEQpIHtcbiAgICAgICAgdGhpcy53cml0ZUJ1ZmZlclV0ZjggPSB0aGlzLndyaXRlQnVmZmVyVXRmOC5zbGljZShidWZmZXJPZmZzZXQpO1xuICAgICAgICBidWZmZXJPZmZzZXQgPSAwO1xuICAgICAgfVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLl9pbm5lcldyaXRlVXRmOChidWZmZXJPZmZzZXQpLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd3JpdGVJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICB0aGlzLndyaXRlQnVmZmVyVXRmOCA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgdGV4dCB0byB0aGUgdGVybWluYWwuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSB0ZXh0IHRvIHdyaXRlIHRvIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyB3cml0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBFbnN1cmUgdGhlIHRlcm1pbmFsIGlzbid0IGRpc3Bvc2VkXG4gICAgaWYgKHRoaXMuX2lzRGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZ25vcmUgZmFsc3kgZGF0YSB2YWx1ZXMgKGluY2x1ZGluZyB0aGUgZW1wdHkgc3RyaW5nKVxuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMud3JpdGVCdWZmZXIucHVzaChkYXRhKTtcblxuICAgIC8vIFNlbmQgWE9GRiB0byBwYXVzZSB0aGUgcHR5IHByb2Nlc3MgaWYgdGhlIHdyaXRlIGJ1ZmZlciBiZWNvbWVzIHRvbyBsYXJnZSBzb1xuICAgIC8vIHh0ZXJtLmpzIGNhbiBjYXRjaCB1cCBiZWZvcmUgbW9yZSBkYXRhIGlzIHNlbnQuIFRoaXMgaXMgbmVjZXNzYXJ5IGluIG9yZGVyXG4gICAgLy8gdG8ga2VlcCBzaWduYWxzIHN1Y2ggYXMgXkMgcmVzcG9uc2l2ZS5cbiAgICBpZiAodGhpcy5vcHRpb25zLnVzZUZsb3dDb250cm9sICYmICF0aGlzLl94b2ZmU2VudFRvQ2F0Y2hVcCAmJiB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCA+PSBXUklURV9CVUZGRVJfUEFVU0VfVEhSRVNIT0xEKSB7XG4gICAgICAvLyBYT0ZGIC0gc3RvcCBwdHkgcGlwZVxuICAgICAgLy8gWE9OIHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IGVtdWxhdG9yIGJlZm9yZSBwcm9jZXNzaW5nIGRhdGEgY2h1bmtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuREMzKTtcbiAgICAgIHRoaXMuX3hvZmZTZW50VG9DYXRjaFVwID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3dyaXRlSW5Qcm9ncmVzcyAmJiB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEtpY2sgb2ZmIGEgd3JpdGUgd2hpY2ggd2lsbCB3cml0ZSBhbGwgZGF0YSBpbiBzZXF1ZW5jZSByZWN1cnNpdmVseVxuICAgICAgdGhpcy5fd3JpdGVJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgIC8vIEtpY2sgb2ZmIGFuIGFzeW5jIGlubmVyV3JpdGUgc28gbW9yZSB3cml0ZXMgY2FuIGNvbWUgaW4gd2hpbGUgcHJvY2Vzc2luZyBkYXRhXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5faW5uZXJXcml0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9pbm5lcldyaXRlKGJ1ZmZlck9mZnNldDogbnVtYmVyID0gMCk6IHZvaWQge1xuICAgIC8vIEVuc3VyZSB0aGUgdGVybWluYWwgaXNuJ3QgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5faXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy53cml0ZUJ1ZmZlciA9IFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgd2hpbGUgKHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoID4gYnVmZmVyT2Zmc2V0KSB7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy53cml0ZUJ1ZmZlcltidWZmZXJPZmZzZXRdO1xuICAgICAgYnVmZmVyT2Zmc2V0Kys7XG5cbiAgICAgIC8vIElmIFhPRkYgd2FzIHNlbnQgaW4gb3JkZXIgdG8gY2F0Y2ggdXAgd2l0aCB0aGUgcHR5IHByb2Nlc3MsIHJlc3VtZSBpdCBpZlxuICAgICAgLy8gd2UgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSB3cml0ZUJ1ZmZlciB0byBhbGxvdyBtb3JlIGRhdGEgdG8gY29tZSBpbi5cbiAgICAgIGlmICh0aGlzLl94b2ZmU2VudFRvQ2F0Y2hVcCAmJiB0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCA9PT0gYnVmZmVyT2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuREMxKTtcbiAgICAgICAgdGhpcy5feG9mZlNlbnRUb0NhdGNoVXAgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faW5wdXRIYW5kbGVyLnBhcnNlKGRhdGEpO1xuXG4gICAgICB0aGlzLnJlZnJlc2godGhpcy5fZGlydHlSb3dTZXJ2aWNlLnN0YXJ0LCB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UuZW5kKTtcblxuICAgICAgaWYgKERhdGUubm93KCkgLSBzdGFydFRpbWUgPj0gV1JJVEVfVElNRU9VVF9NUykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoID4gYnVmZmVyT2Zmc2V0KSB7XG4gICAgICAvLyBBbGxvdyByZW5kZXJlciB0byBjYXRjaCB1cCBiZWZvcmUgcHJvY2Vzc2luZyB0aGUgbmV4dCBiYXRjaFxuICAgICAgLy8gdHJpbSBhbHJlYWR5IHByb2Nlc3NlZCBjaHVua3MgaWYgd2UgYXJlIGFib3ZlIHRocmVzaG9sZFxuICAgICAgaWYgKGJ1ZmZlck9mZnNldCA+IFdSSVRFX0JVRkZFUl9MRU5HVEhfVEhSRVNIT0xEKSB7XG4gICAgICAgIHRoaXMud3JpdGVCdWZmZXIgPSB0aGlzLndyaXRlQnVmZmVyLnNsaWNlKGJ1ZmZlck9mZnNldCk7XG4gICAgICAgIGJ1ZmZlck9mZnNldCA9IDA7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoYnVmZmVyT2Zmc2V0KSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dyaXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgdGhpcy53cml0ZUJ1ZmZlciA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgdGV4dCB0byB0aGUgdGVybWluYWwsIGZvbGxvd2VkIGJ5IGEgYnJlYWsgbGluZSBjaGFyYWN0ZXIgKFxcbikuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSB0ZXh0IHRvIHdyaXRlIHRvIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyB3cml0ZWxuKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMud3JpdGUoZGF0YSArICdcXHJcXG4nKTtcbiAgfVxuXG4gIHB1YmxpYyBwYXN0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBwYXN0ZShkYXRhLCB0aGlzLnRleHRhcmVhLCB0aGlzLmJyYWNrZXRlZFBhc3RlTW9kZSwgdGhpcy5fY29yZVNlcnZpY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIGEgY3VzdG9tIGtleSBldmVudCBoYW5kbGVyIHdoaWNoIGlzIHJ1biBiZWZvcmUga2V5cyBhcmUgcHJvY2Vzc2VkLFxuICAgKiBnaXZpbmcgY29uc3VtZXJzIG9mIHh0ZXJtLmpzIHVsdGltYXRlIGNvbnRyb2wgYXMgdG8gd2hhdCBrZXlzIHNob3VsZCBiZVxuICAgKiBwcm9jZXNzZWQgYnkgdGhlIHRlcm1pbmFsIGFuZCB3aGF0IGtleXMgc2hvdWxkIG5vdC5cbiAgICogQHBhcmFtIGN1c3RvbUtleUV2ZW50SGFuZGxlciBUaGUgY3VzdG9tIEtleWJvYXJkRXZlbnQgaGFuZGxlciB0byBhdHRhY2guXG4gICAqIFRoaXMgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgS2V5Ym9hcmRFdmVudCwgYWxsb3dpbmcgY29uc3VtZXJzIHRvIHN0b3BcbiAgICogcHJvcGFnYXRpb24gYW5kL29yIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uLiBUaGUgZnVuY3Rpb24gcmV0dXJucyB3aGV0aGVyXG4gICAqIHRoZSBldmVudCBzaG91bGQgYmUgcHJvY2Vzc2VkIGJ5IHh0ZXJtLmpzLlxuICAgKi9cbiAgcHVibGljIGF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihjdXN0b21LZXlFdmVudEhhbmRsZXI6IEN1c3RvbUtleUV2ZW50SGFuZGxlcik6IHZvaWQge1xuICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IGN1c3RvbUtleUV2ZW50SGFuZGxlcjtcbiAgfVxuXG4gIC8qKiBBZGQgaGFuZGxlciBmb3IgRVNDIGVzY2FwZSBzZXF1ZW5jZS4gU2VlIHh0ZXJtLmQudHMgZm9yIGRldGFpbHMuICovXG4gIHB1YmxpYyBhZGRFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKCkgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLmFkZEVzY0hhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBBZGQgaGFuZGxlciBmb3IgRENTIGVzY2FwZSBzZXF1ZW5jZS4gU2VlIHh0ZXJtLmQudHMgZm9yIGRldGFpbHMuICovXG4gIHB1YmxpYyBhZGREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZywgcGFyYW06IElQYXJhbXMpID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5hZGREY3NIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQWRkIGhhbmRsZXIgZm9yIENTSSBlc2NhcGUgc2VxdWVuY2UuIFNlZSB4dGVybS5kLnRzIGZvciBkZXRhaWxzLiAqL1xuICBwdWJsaWMgYWRkQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IElQYXJhbXMpID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5hZGRDc2lIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBPU0MgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIGFkZE9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcpID0+IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5hZGRPc2NIYW5kbGVyKGlkZW50LCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayBtYXRjaGVyLCBhbGxvd2luZyBjdXN0b20gbGluayBwYXR0ZXJucyB0byBiZSBtYXRjaGVkIGFuZFxuICAgKiBoYW5kbGVkLlxuICAgKiBAcGFyYW0gcmVnZXggVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggZm9yLCBzcGVjaWZpY2FsbHlcbiAgICogdGhpcyBzZWFyY2hlcyB0aGUgdGV4dENvbnRlbnQgb2YgdGhlIHJvd3MuIFlvdSB3aWxsIHdhbnQgdG8gdXNlIFxccyB0byBtYXRjaFxuICAgKiBhIHNwYWNlICcgJyBjaGFyYWN0ZXIgZm9yIGV4YW1wbGUuXG4gICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBjYWxsYmFjayB3aGVuIHRoZSBsaW5rIGlzIGNhbGxlZC5cbiAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGxpbmsgbWF0Y2hlci5cbiAgICogQHJldHVybiBUaGUgSUQgb2YgdGhlIG5ldyBtYXRjaGVyLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGRlcmVnaXN0ZXIuXG4gICAqL1xuICBwdWJsaWMgcmVnaXN0ZXJMaW5rTWF0Y2hlcihyZWdleDogUmVnRXhwLCBoYW5kbGVyOiBMaW5rTWF0Y2hlckhhbmRsZXIsIG9wdGlvbnM/OiBJTGlua01hdGNoZXJPcHRpb25zKTogbnVtYmVyIHtcbiAgICBjb25zdCBtYXRjaGVySWQgPSB0aGlzLmxpbmtpZmllci5yZWdpc3RlckxpbmtNYXRjaGVyKHJlZ2V4LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgcmV0dXJuIG1hdGNoZXJJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXJlZ2lzdGVycyBhIGxpbmsgbWF0Y2hlciBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICAgKiBAcGFyYW0gbWF0Y2hlcklkIFRoZSBsaW5rIG1hdGNoZXIncyBJRCAocmV0dXJuZWQgYWZ0ZXIgcmVnaXN0ZXIpXG4gICAqL1xuICBwdWJsaWMgZGVyZWdpc3RlckxpbmtNYXRjaGVyKG1hdGNoZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGlua2lmaWVyLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihtYXRjaGVySWQpKSB7XG4gICAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXI6IENoYXJhY3RlckpvaW5lckhhbmRsZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGpvaW5lcklkID0gdGhpcy5fcmVuZGVyU2VydmljZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyKTtcbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgcmV0dXJuIGpvaW5lcklkO1xuICB9XG5cbiAgcHVibGljIGRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQpKSB7XG4gICAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBtYXJrZXJzKCk6IElNYXJrZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyLm1hcmtlcnM7XG4gIH1cblxuICBwdWJsaWMgYWRkTWFya2VyKGN1cnNvcllPZmZzZXQ6IG51bWJlcik6IElNYXJrZXIge1xuICAgIC8vIERpc2FsbG93IG1hcmtlcnMgb24gdGhlIGFsdCBidWZmZXJcbiAgICBpZiAodGhpcy5idWZmZXIgIT09IHRoaXMuYnVmZmVycy5ub3JtYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5idWZmZXIuYWRkTWFya2VyKHRoaXMuYnVmZmVyLnliYXNlICsgdGhpcy5idWZmZXIueSArIGN1cnNvcllPZmZzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgd2hldGhlciB0aGUgdGVybWluYWwgaGFzIGFuIGFjdGl2ZSBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgaGFzU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlID8gdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb24gOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIGNvbHVtbiBUaGUgY29sdW1uIHRoZSBzZWxlY3Rpb24gc3RhcnRzIGF0Li5cbiAgICogQHBhcmFtIHJvdyBUaGUgcm93IHRoZSBzZWxlY3Rpb24gc3RhcnRzIGF0LlxuICAgKiBAcGFyYW0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgdGhlIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3QoY29sdW1uOiBudW1iZXIsIHJvdzogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2V0U2VsZWN0aW9uKGNvbHVtbiwgcm93LCBsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRlcm1pbmFsJ3MgY3VycmVudCBzZWxlY3Rpb24sIHRoaXMgaXMgdXNlZnVsIGZvciBpbXBsZW1lbnRpbmcgY29weVxuICAgKiBiZWhhdmlvciBvdXRzaWRlIG9mIHh0ZXJtLmpzLlxuICAgKi9cbiAgcHVibGljIGdldFNlbGVjdGlvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlID8gdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0IDogJyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2VsZWN0aW9uUG9zaXRpb24oKTogSVNlbGVjdGlvblBvc2l0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuX3NlbGVjdGlvblNlcnZpY2UuaGFzU2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdGFydENvbHVtbjogdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25TdGFydFswXSxcbiAgICAgIHN0YXJ0Um93OiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblN0YXJ0WzFdLFxuICAgICAgZW5kQ29sdW1uOiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvbkVuZFswXSxcbiAgICAgIGVuZFJvdzogdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25FbmRbMV1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCB0ZXJtaW5hbCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3NlbGVjdGlvblNlcnZpY2UpIHtcbiAgICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyBhbGwgdGV4dCB3aXRoaW4gdGhlIHRlcm1pbmFsLlxuICAgKi9cbiAgcHVibGljIHNlbGVjdEFsbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uU2VydmljZSkge1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3RBbGwoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2VsZWN0TGluZXMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2VsZWN0aW9uU2VydmljZSkge1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3RMaW5lcyhzdGFydCwgZW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGEga2V5ZG93biBldmVudFxuICAgKiBLZXkgUmVzb3VyY2VzOlxuICAgKiAgIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vS2V5Ym9hcmRFdmVudFxuICAgKiBAcGFyYW0gZXYgVGhlIGtleWRvd24gZXZlbnQgdG8gYmUgaGFuZGxlZC5cbiAgICovXG4gIHByb3RlY3RlZCBfa2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2tleURvd25IYW5kbGVkID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihldmVudCkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9jb21wb3NpdGlvbkhlbHBlci5rZXlkb3duKGV2ZW50KSkge1xuICAgICAgaWYgKHRoaXMuYnVmZmVyLnliYXNlICE9PSB0aGlzLmJ1ZmZlci55ZGlzcCkge1xuICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gZXZhbHVhdGVLZXlib2FyZEV2ZW50KGV2ZW50LCB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzLCB0aGlzLmJyb3dzZXIuaXNNYWMsIHRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEpO1xuXG4gICAgdGhpcy51cGRhdGVDdXJzb3JTdHlsZShldmVudCk7XG5cbiAgICBpZiAocmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX0RPV04gfHwgcmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX1VQKSB7XG4gICAgICBjb25zdCBzY3JvbGxDb3VudCA9IHRoaXMucm93cyAtIDE7XG4gICAgICB0aGlzLnNjcm9sbExpbmVzKHJlc3VsdC50eXBlID09PSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9VUCA/IC1zY3JvbGxDb3VudCA6IHNjcm9sbENvdW50KTtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldmVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC50eXBlID09PSBLZXlib2FyZFJlc3VsdFR5cGUuU0VMRUNUX0FMTCkge1xuICAgICAgdGhpcy5zZWxlY3RBbGwoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faXNUaGlyZExldmVsU2hpZnQodGhpcy5icm93c2VyLCBldmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHQuY2FuY2VsKSB7XG4gICAgICAvLyBUaGUgZXZlbnQgaXMgY2FuY2VsZWQgYXQgdGhlIGVuZCBhbHJlYWR5LCBpcyB0aGlzIG5lY2Vzc2FyeT9cbiAgICAgIHRoaXMuY2FuY2VsKGV2ZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdC5rZXkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIElmIGN0cmwrYyBvciBlbnRlciBpcyBiZWluZyBzZW50LCBjbGVhciBvdXQgdGhlIHRleHRhcmVhLiBUaGlzIGlzIGRvbmUgc28gdGhhdCBzY3JlZW4gcmVhZGVyc1xuICAgIC8vIHdpbGwgYW5ub3VuY2UgZGVsZXRlZCBjaGFyYWN0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgMTAwJSBvZiB0aGUgdGltZSBidXQgaXQgc2hvdWxkIGNvdmVyXG4gICAgLy8gbW9zdCBzY2VuYXJpb3MuXG4gICAgaWYgKHJlc3VsdC5rZXkgPT09IEMwLkVUWCB8fCByZXN1bHQua2V5ID09PSBDMC5DUikge1xuICAgICAgdGhpcy50ZXh0YXJlYS52YWx1ZSA9ICcnO1xuICAgIH1cblxuICAgIHRoaXMuX29uS2V5LmZpcmUoeyBrZXk6IHJlc3VsdC5rZXksIGRvbUV2ZW50OiBldmVudCB9KTtcbiAgICB0aGlzLnNob3dDdXJzb3IoKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHJlc3VsdC5rZXksIHRydWUpO1xuXG4gICAgLy8gQ2FuY2VsIGV2ZW50cyB3aGVuIG5vdCBpbiBzY3JlZW4gcmVhZGVyIG1vZGUgc28gZXZlbnRzIGRvbid0IGdldCBidWJibGVkIHVwIGFuZCBoYW5kbGVkIGJ5XG4gICAgLy8gb3RoZXIgbGlzdGVuZXJzLiBXaGVuIHNjcmVlbiByZWFkZXIgbW9kZSBpcyBlbmFibGVkLCB0aGlzIGNvdWxkIGNhdXNlIGlzc3VlcyBpZiB0aGUgZXZlbnRcbiAgICAvLyBpcyBoYW5kbGVkIGF0IGEgaGlnaGVyIGxldmVsLCB0aGlzIGlzIGEgY29tcHJvbWlzZSBpbiBvcmRlciB0byBlY2hvIGtleXMgdG8gdGhlIHNjcmVlblxuICAgIC8vIHJlYWRlci5cbiAgICBpZiAoIXRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXZlbnQsIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuX2tleURvd25IYW5kbGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2lzVGhpcmRMZXZlbFNoaWZ0KGJyb3dzZXI6IElCcm93c2VyLCBldjogSUtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgICBjb25zdCB0aGlyZExldmVsS2V5ID1cbiAgICAgICAgKGJyb3dzZXIuaXNNYWMgJiYgIXRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEgJiYgZXYuYWx0S2V5ICYmICFldi5jdHJsS2V5ICYmICFldi5tZXRhS2V5KSB8fFxuICAgICAgICAoYnJvd3Nlci5pc1dpbmRvd3MgJiYgZXYuYWx0S2V5ICYmIGV2LmN0cmxLZXkgJiYgIWV2Lm1ldGFLZXkpO1xuXG4gICAgaWYgKGV2LnR5cGUgPT09ICdrZXlwcmVzcycpIHtcbiAgICAgIHJldHVybiB0aGlyZExldmVsS2V5O1xuICAgIH1cblxuICAgIC8vIERvbid0IGludm9rZSBmb3IgYXJyb3dzLCBwYWdlRG93biwgaG9tZSwgYmFja3NwYWNlLCBldGMuIChvbiBub24ta2V5cHJlc3MgZXZlbnRzKVxuICAgIHJldHVybiB0aGlyZExldmVsS2V5ICYmICghZXYua2V5Q29kZSB8fCBldi5rZXlDb2RlID4gNDcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgRyBsZXZlbCBvZiB0aGUgdGVybWluYWxcbiAgICogQHBhcmFtIGdcbiAgICovXG4gIHB1YmxpYyBzZXRnTGV2ZWwoZzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5nbGV2ZWwgPSBnO1xuICAgIHRoaXMuY2hhcnNldCA9IHRoaXMuY2hhcnNldHNbZ107XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjaGFyc2V0IGZvciB0aGUgZ2l2ZW4gRyBsZXZlbCBvZiB0aGUgdGVybWluYWxcbiAgICogQHBhcmFtIGdcbiAgICogQHBhcmFtIGNoYXJzZXRcbiAgICovXG4gIHB1YmxpYyBzZXRnQ2hhcnNldChnOiBudW1iZXIsIGNoYXJzZXQ6IElDaGFyc2V0KTogdm9pZCB7XG4gICAgdGhpcy5jaGFyc2V0c1tnXSA9IGNoYXJzZXQ7XG4gICAgaWYgKHRoaXMuZ2xldmVsID09PSBnKSB7XG4gICAgICB0aGlzLmNoYXJzZXQgPSBjaGFyc2V0O1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfa2V5VXAoZXY6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF3YXNNb2RpZmllcktleU9ubHlFdmVudChldikpIHtcbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGV2KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBrZXlwcmVzcyBldmVudC5cbiAgICogS2V5IFJlc291cmNlczpcbiAgICogICAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL0tleWJvYXJkRXZlbnRcbiAgICogQHBhcmFtIGV2IFRoZSBrZXlwcmVzcyBldmVudCB0byBiZSBoYW5kbGVkLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9rZXlQcmVzcyhldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGxldCBrZXk7XG5cbiAgICBpZiAodGhpcy5fa2V5RG93bkhhbmRsZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5jYW5jZWwoZXYpO1xuXG4gICAgaWYgKGV2LmNoYXJDb2RlKSB7XG4gICAgICBrZXkgPSBldi5jaGFyQ29kZTtcbiAgICB9IGVsc2UgaWYgKGV2LndoaWNoID09PSBudWxsIHx8IGV2LndoaWNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IGV2LmtleUNvZGU7XG4gICAgfSBlbHNlIGlmIChldi53aGljaCAhPT0gMCAmJiBldi5jaGFyQ29kZSAhPT0gMCkge1xuICAgICAga2V5ID0gZXYud2hpY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIWtleSB8fCAoXG4gICAgICAoZXYuYWx0S2V5IHx8IGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkgJiYgIXRoaXMuX2lzVGhpcmRMZXZlbFNoaWZ0KHRoaXMuYnJvd3NlciwgZXYpXG4gICAgKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5KTtcblxuICAgIHRoaXMuX29uS2V5LmZpcmUoeyBrZXksIGRvbUV2ZW50OiBldiB9KTtcbiAgICB0aGlzLnNob3dDdXJzb3IoKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGtleSwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSaW5nIHRoZSBiZWxsLlxuICAgKiBOb3RlOiBXZSBjb3VsZCBkbyBzd2VldCB0aGluZ3Mgd2l0aCB3ZWJhdWRpbyBoZXJlXG4gICAqL1xuICBwdWJsaWMgYmVsbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc291bmRCZWxsKCkpIHtcbiAgICAgIHRoaXMuX3NvdW5kU2VydmljZS5wbGF5QmVsbFNvdW5kKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Zpc3VhbEJlbGwoKSkge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbC1iZWxsLWFjdGl2ZScpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Zpc3VhbEJlbGxUaW1lcik7XG4gICAgICB0aGlzLl92aXN1YWxCZWxsVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXN1YWwtYmVsbC1hY3RpdmUnKTtcbiAgICAgIH0sIDIwMCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2l6ZXMgdGhlIHRlcm1pbmFsLlxuICAgKlxuICAgKiBAcGFyYW0geCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gcmVzaXplIHRvLlxuICAgKiBAcGFyYW0geSBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gcmVzaXplIHRvLlxuICAgKi9cbiAgcHVibGljIHJlc2l6ZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChpc05hTih4KSB8fCBpc05hTih5KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh4ID09PSB0aGlzLmNvbHMgJiYgeSA9PT0gdGhpcy5yb3dzKSB7XG4gICAgICAvLyBDaGVjayBpZiB3ZSBzdGlsbCBuZWVkIHRvIG1lYXN1cmUgdGhlIGNoYXIgc2l6ZSAoZml4ZXMgIzc4NSkuXG4gICAgICBpZiAodGhpcy5fY2hhclNpemVTZXJ2aWNlICYmICF0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplKSB7XG4gICAgICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHggPCBNSU5JTVVNX0NPTFMpIHggPSBNSU5JTVVNX0NPTFM7XG4gICAgaWYgKHkgPCBNSU5JTVVNX1JPV1MpIHkgPSBNSU5JTVVNX1JPV1M7XG5cbiAgICB0aGlzLmJ1ZmZlcnMucmVzaXplKHgsIHkpO1xuXG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoeCwgeSk7XG4gICAgdGhpcy5idWZmZXJzLnNldHVwVGFiU3RvcHModGhpcy5jb2xzKTtcblxuICAgIGlmICh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UpIHtcbiAgICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIHRoaXMuX29uUmVzaXplLmZpcmUoeyBjb2xzOiB4LCByb3dzOiB5IH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSBlbnRpcmUgYnVmZmVyLCBtYWtpbmcgdGhlIHByb21wdCBsaW5lIHRoZSBuZXcgZmlyc3QgbGluZS5cbiAgICovXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5idWZmZXIueWJhc2UgPT09IDAgJiYgdGhpcy5idWZmZXIueSA9PT0gMCkge1xuICAgICAgLy8gRG9uJ3QgY2xlYXIgaWYgaXQncyBhbHJlYWR5IGNsZWFyXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyLmxpbmVzLnNldCgwLCB0aGlzLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5idWZmZXIueWJhc2UgKyB0aGlzLmJ1ZmZlci55KSk7XG4gICAgdGhpcy5idWZmZXIubGluZXMubGVuZ3RoID0gMTtcbiAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IDA7XG4gICAgdGhpcy5idWZmZXIueWJhc2UgPSAwO1xuICAgIHRoaXMuYnVmZmVyLnkgPSAwO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnB1c2godGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKERFRkFVTFRfQVRUUl9EQVRBKSk7XG4gICAgfVxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgICB0aGlzLl9vblNjcm9sbC5maXJlKHRoaXMuYnVmZmVyLnlkaXNwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBpZiB0aGUgY3VycmVudCB0ZXJtaW5hbCBpcyB0aGUgZ2l2ZW4gYXJndW1lbnQuXG4gICAqIEBwYXJhbSB0ZXJtIFRoZSB0ZXJtaW5hbCBuYW1lIHRvIGV2YWx1YXRlXG4gICAqL1xuICBwdWJsaWMgaXModGVybTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLm9wdGlvbnMudGVybU5hbWUgKyAnJykuaW5kZXhPZih0ZXJtKSA9PT0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbWl0IHRoZSBkYXRhIGV2ZW50IGFuZCBwb3B1bGF0ZSB0aGUgZ2l2ZW4gZGF0YS5cbiAgICogQHBhcmFtIGRhdGEgVGhlIGRhdGEgdG8gcG9wdWxhdGUgaW4gdGhlIGV2ZW50LlxuICAgKi9cbiAgLy8gcHVibGljIGhhbmRsZXIoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gIC8vICAgLy8gUHJldmVudHMgYWxsIGV2ZW50cyB0byBwdHkgcHJvY2VzcyBpZiBzdGRpbiBpcyBkaXNhYmxlZFxuICAvLyAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZVN0ZGluKSB7XG4gIC8vICAgICByZXR1cm47XG4gIC8vICAgfVxuXG4gIC8vICAgLy8gQ2xlYXIgdGhlIHNlbGVjdGlvbiBpZiB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgaXMgYXZhaWxhYmxlIGFuZCBoYXMgYW4gYWN0aXZlIHNlbGVjdGlvblxuICAvLyAgIGlmICh0aGlzLnNlbGVjdGlvblNlcnZpY2UgJiYgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmhhc1NlbGVjdGlvbikge1xuICAvLyAgICAgdGhpcy5zZWxlY3Rpb25TZXJ2aWNlLmNsZWFyU2VsZWN0aW9uKCk7XG4gIC8vICAgfVxuXG4gIC8vICAgLy8gSW5wdXQgaXMgYmVpbmcgc2VudCB0byB0aGUgdGVybWluYWwsIHRoZSB0ZXJtaW5hbCBzaG91bGQgZm9jdXMgdGhlIHByb21wdC5cbiAgLy8gICBpZiAodGhpcy5idWZmZXIueWJhc2UgIT09IHRoaXMuYnVmZmVyLnlkaXNwKSB7XG4gIC8vICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIC8vICAgfVxuICAvLyAgIHRoaXMuX29uRGF0YS5maXJlKGRhdGEpO1xuICAvLyB9XG5cbiAgLyoqXG4gICAqIEVtaXQgdGhlICd0aXRsZScgZXZlbnQgYW5kIHBvcHVsYXRlIHRoZSBnaXZlbiB0aXRsZS5cbiAgICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSB0byBwb3B1bGF0ZSBpbiB0aGUgZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgaGFuZGxlVGl0bGUodGl0bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuX29uVGl0bGVDaGFuZ2UuZmlyZSh0aXRsZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGVybWluYWwuXG4gICAqIE5vdGU6IENhbGxpbmcgdGhpcyBkaXJlY3RseSBmcm9tIEpTIGlzIHN5bmNocm9ub3VzIGJ1dCBkb2VzIG5vdCBjbGVhclxuICAgKiBpbnB1dCBidWZmZXJzIGFuZCBkb2VzIG5vdCByZXNldCB0aGUgcGFyc2VyLCB0aHVzIHRoZSB0ZXJtaW5hbCB3aWxsXG4gICAqIGNvbnRpbnVlIHRvIGFwcGx5IHBlbmRpbmcgaW5wdXQgZGF0YS5cbiAgICogSWYgeW91IG5lZWQgaW4gYmFuZCByZXNldCAoc3luY2hyb25vdXMgd2l0aCBpbnB1dCBkYXRhKSBjb25zaWRlclxuICAgKiB1c2luZyBERUNTVFIgKHNvZnQgcmVzZXQsIENTSSAhIHApIG9yIFJJUyBpbnN0ZWFkIChoYXJkIHJlc2V0LCBFU0MgYykuXG4gICAqL1xuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgLyoqXG4gICAgICogU2luY2UgX3NldHVwIGhhbmRsZXMgYSBmdWxsIHRlcm1pbmFsIGNyZWF0aW9uLCB3ZSBoYXZlIHRvIGNhcnJ5IGZvcndhcmRcbiAgICAgKiBhIGZldyB0aGluZ3MgdGhhdCBzaG91bGQgbm90IHJlc2V0LlxuICAgICAqL1xuICAgIHRoaXMub3B0aW9ucy5yb3dzID0gdGhpcy5yb3dzO1xuICAgIHRoaXMub3B0aW9ucy5jb2xzID0gdGhpcy5jb2xzO1xuICAgIGNvbnN0IGN1c3RvbUtleUV2ZW50SGFuZGxlciA9IHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcjtcbiAgICBjb25zdCBpbnB1dEhhbmRsZXIgPSB0aGlzLl9pbnB1dEhhbmRsZXI7XG4gICAgY29uc3QgY3Vyc29yU3RhdGUgPSB0aGlzLmN1cnNvclN0YXRlO1xuICAgIGNvbnN0IHdyaXRlQnVmZmVyID0gdGhpcy53cml0ZUJ1ZmZlcjtcbiAgICBjb25zdCB3cml0ZUJ1ZmZlclV0ZjggPSB0aGlzLndyaXRlQnVmZmVyVXRmODtcbiAgICBjb25zdCB3cml0ZUluUHJvZ3Jlc3MgPSB0aGlzLl93cml0ZUluUHJvZ3Jlc3M7XG4gICAgY29uc3QgeG9mZlNlbnRUb0NhdGNoVXAgPSB0aGlzLl94b2ZmU2VudFRvQ2F0Y2hVcDtcbiAgICBjb25zdCB1c2VyU2Nyb2xsaW5nID0gdGhpcy5fdXNlclNjcm9sbGluZztcblxuICAgIHRoaXMuX3NldHVwKCk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnJlc2V0KCk7XG4gICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5yZXNldCgpO1xuICAgIGlmICh0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgLy8gcmVhdHRhY2hcbiAgICB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgPSBjdXN0b21LZXlFdmVudEhhbmRsZXI7XG4gICAgdGhpcy5faW5wdXRIYW5kbGVyID0gaW5wdXRIYW5kbGVyO1xuICAgIHRoaXMuY3Vyc29yU3RhdGUgPSBjdXJzb3JTdGF0ZTtcbiAgICB0aGlzLndyaXRlQnVmZmVyID0gd3JpdGVCdWZmZXI7XG4gICAgdGhpcy53cml0ZUJ1ZmZlclV0ZjggPSB3cml0ZUJ1ZmZlclV0Zjg7XG4gICAgdGhpcy5fd3JpdGVJblByb2dyZXNzID0gd3JpdGVJblByb2dyZXNzO1xuICAgIHRoaXMuX3hvZmZTZW50VG9DYXRjaFVwID0geG9mZlNlbnRUb0NhdGNoVXA7XG4gICAgdGhpcy5fdXNlclNjcm9sbGluZyA9IHVzZXJTY3JvbGxpbmc7XG5cbiAgICAvLyBkbyBhIGZ1bGwgc2NyZWVuIHJlZnJlc2hcbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgaWYgKHRoaXMudmlld3BvcnQpIHtcbiAgICAgIHRoaXMudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKTtcbiAgICB9XG4gIH1cblxuICAvLyBUT0RPOiBSZW1vdmUgY2FuY2VsIGZ1bmN0aW9uIGFuZCBjYW5jZWxFdmVudHMgb3B0aW9uXG4gIHB1YmxpYyBjYW5jZWwoZXY6IEV2ZW50LCBmb3JjZT86IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5jYW5jZWxFdmVudHMgJiYgIWZvcmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfdmlzdWFsQmVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gcmV0dXJuIHRoaXMub3B0aW9ucy5iZWxsU3R5bGUgPT09ICd2aXN1YWwnIHx8XG4gICAgLy8gICAgIHRoaXMub3B0aW9ucy5iZWxsU3R5bGUgPT09ICdib3RoJztcbiAgfVxuXG4gIHByaXZhdGUgX3NvdW5kQmVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmJlbGxTdHlsZSA9PT0gJ3NvdW5kJztcbiAgICAvLyByZXR1cm4gdGhpcy5vcHRpb25zLmJlbGxTdHlsZSA9PT0gJ3NvdW5kJyB8fFxuICAgIC8vICAgICB0aGlzLm9wdGlvbnMuYmVsbFN0eWxlID09PSAnYm90aCc7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXJzXG4gKi9cblxuZnVuY3Rpb24gd2FzTW9kaWZpZXJLZXlPbmx5RXZlbnQoZXY6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgcmV0dXJuIGV2LmtleUNvZGUgPT09IDE2IHx8IC8vIFNoaWZ0XG4gICAgZXYua2V5Q29kZSA9PT0gMTcgfHwgLy8gQ3RybFxuICAgIGV2LmtleUNvZGUgPT09IDE4OyAvLyBBbHRcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICd4dGVybSc7XG5pbXBvcnQgeyBJVGVybWluYWwgfSBmcm9tICcuL1R5cGVzJztcbmltcG9ydCB7IENIQVJfREFUQV9DT0RFX0lOREVYLCBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NPREUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVdpbmRvd3NNb2RlKHRlcm1pbmFsOiBJVGVybWluYWwpOiBJRGlzcG9zYWJsZSB7XG4gIC8vIFdpbnB0eSBkb2VzIG5vdCBzdXBwb3J0IHdyYXBhcm91bmQgbW9kZSB3aGljaCBtZWFucyB0aGF0IGxpbmVzIHdpbGwgbmV2ZXJcbiAgLy8gYmUgbWFya2VkIGFzIHdyYXBwZWQuIFRoaXMgY2F1c2VzIGlzc3VlcyBmb3IgdGhpbmdzIGxpa2UgY29weWluZyBhIGxpbmVcbiAgLy8gcmV0YWluaW5nIHRoZSB3cmFwcGVkIG5ldyBsaW5lIGNoYXJhY3RlcnMgb3IgaWYgY29uc3VtZXJzIGFyZSBsaXN0ZW5pbmdcbiAgLy8gaW4gb24gdGhlIGRhdGEgc3RyZWFtLlxuICAvL1xuICAvLyBUaGUgd29ya2Fyb3VuZCBmb3IgdGhpcyBpcyB0byBsaXN0ZW4gdG8gZXZlcnkgaW5jb21pbmcgbGluZSBmZWVkIGFuZCBtYXJrXG4gIC8vIHRoZSBsaW5lIGFzIHdyYXBwZWQgaWYgdGhlIGxhc3QgY2hhcmFjdGVyIGluIHRoZSBwcmV2aW91cyBsaW5lIGlzIG5vdCBhXG4gIC8vIHNwYWNlLiBUaGlzIGlzIGNlcnRhaW5seSBub3Qgd2l0aG91dCBpdHMgcHJvYmxlbXMsIGJ1dCBnZW5lcmFsbHkgb25cbiAgLy8gV2luZG93cyB3aGVuIHRleHQgcmVhY2hlcyB0aGUgZW5kIG9mIHRoZSB0ZXJtaW5hbCBpdCdzIGxpa2VseSBnb2luZyB0byBiZVxuICAvLyB3cmFwcGVkLlxuICByZXR1cm4gdGVybWluYWwub25MaW5lRmVlZCgoKSA9PiB7XG4gICAgY29uc3QgbGluZSA9IHRlcm1pbmFsLmJ1ZmZlci5saW5lcy5nZXQodGVybWluYWwuYnVmZmVyLnliYXNlICsgdGVybWluYWwuYnVmZmVyLnkgLSAxKTtcbiAgICBjb25zdCBsYXN0Q2hhciA9IGxpbmUuZ2V0KHRlcm1pbmFsLmNvbHMgLSAxKTtcblxuICAgIGNvbnN0IG5leHRMaW5lID0gdGVybWluYWwuYnVmZmVyLmxpbmVzLmdldCh0ZXJtaW5hbC5idWZmZXIueWJhc2UgKyB0ZXJtaW5hbC5idWZmZXIueSk7XG4gICAgbmV4dExpbmUuaXNXcmFwcGVkID0gKGxhc3RDaGFyW0NIQVJfREFUQV9DT0RFX0lOREVYXSAhPT0gTlVMTF9DRUxMX0NPREUgJiYgbGFzdENoYXJbQ0hBUl9EQVRBX0NPREVfSU5ERVhdICE9PSBXSElURVNQQUNFX0NFTExfQ09ERSk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJU2VsZWN0aW9uU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUNvcmVTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuLyoqXG4gKiBQcmVwYXJlcyB0ZXh0IHRvIGJlIHBhc3RlZCBpbnRvIHRoZSB0ZXJtaW5hbCBieSBub3JtYWxpemluZyB0aGUgbGluZSBlbmRpbmdzXG4gKiBAcGFyYW0gdGV4dCBUaGUgcGFzdGVkIHRleHQgdGhhdCBuZWVkcyBwcm9jZXNzaW5nIGJlZm9yZSBpbnNlcnRpbmcgaW50byB0aGUgdGVybWluYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVUZXh0Rm9yVGVybWluYWwodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFxyP1xcbi9nLCAnXFxyJyk7XG59XG5cbi8qKlxuICogQnJhY2tldCB0ZXh0IGZvciBwYXN0ZSwgaWYgbmVjZXNzYXJ5LCBhcyBwZXIgaHR0cHM6Ly9jaXJ3LmluL2Jsb2cvYnJhY2tldGVkLXBhc3RlXG4gKiBAcGFyYW0gdGV4dCBUaGUgcGFzdGVkIHRleHQgdG8gYnJhY2tldFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnJhY2tldFRleHRGb3JQYXN0ZSh0ZXh0OiBzdHJpbmcsIGJyYWNrZXRlZFBhc3RlTW9kZTogYm9vbGVhbik6IHN0cmluZyB7XG4gIGlmIChicmFja2V0ZWRQYXN0ZU1vZGUpIHtcbiAgICByZXR1cm4gJ1xceDFiWzIwMH4nICsgdGV4dCArICdcXHgxYlsyMDF+JztcbiAgfVxuICByZXR1cm4gdGV4dDtcbn1cblxuLyoqXG4gKiBCaW5kcyBjb3B5IGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGdpdmVuIHRlcm1pbmFsLlxuICogQHBhcmFtIGV2IFRoZSBvcmlnaW5hbCBjb3B5IGV2ZW50IHRvIGJlIGhhbmRsZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlIYW5kbGVyKGV2OiBDbGlwYm9hcmRFdmVudCwgc2VsZWN0aW9uU2VydmljZTogSVNlbGVjdGlvblNlcnZpY2UpOiB2b2lkIHtcbiAgaWYgKGV2LmNsaXBib2FyZERhdGEpIHtcbiAgICBldi5jbGlwYm9hcmREYXRhLnNldERhdGEoJ3RleHQvcGxhaW4nLCBzZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQpO1xuICB9XG4gIC8vIFByZXZlbnQgb3IgdGhlIG9yaWdpbmFsIHRleHQgd2lsbCBiZSBjb3BpZWQuXG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XG59XG5cbi8qKlxuICogUmVkaXJlY3QgdGhlIGNsaXBib2FyZCdzIGRhdGEgdG8gdGhlIHRlcm1pbmFsJ3MgaW5wdXQgaGFuZGxlci5cbiAqIEBwYXJhbSBldiBUaGUgb3JpZ2luYWwgcGFzdGUgZXZlbnQgdG8gYmUgaGFuZGxlZFxuICogQHBhcmFtIHRlcm0gVGhlIHRlcm1pbmFsIG9uIHdoaWNoIHRvIGFwcGx5IHRoZSBoYW5kbGVkIHBhc3RlIGV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQYXN0ZUV2ZW50KGV2OiBDbGlwYm9hcmRFdmVudCwgdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQsIGJyYWNrZXRlZFBhc3RlTW9kZTogYm9vbGVhbiwgY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSk6IHZvaWQge1xuICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgaWYgKGV2LmNsaXBib2FyZERhdGEpIHtcbiAgICBjb25zdCB0ZXh0ID0gZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgcGFzdGUodGV4dCwgdGV4dGFyZWEsIGJyYWNrZXRlZFBhc3RlTW9kZSwgY29yZVNlcnZpY2UpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZSh0ZXh0OiBzdHJpbmcsIHRleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50LCBicmFja2V0ZWRQYXN0ZU1vZGU6IGJvb2xlYW4sIGNvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UpOiB2b2lkIHtcbiAgdGV4dCA9IHByZXBhcmVUZXh0Rm9yVGVybWluYWwodGV4dCk7XG4gIHRleHQgPSBicmFja2V0VGV4dEZvclBhc3RlKHRleHQsIGJyYWNrZXRlZFBhc3RlTW9kZSk7XG4gIGNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodGV4dCwgdHJ1ZSk7XG4gIHRleHRhcmVhLnZhbHVlID0gJyc7XG59XG5cbi8qKlxuICogTW92ZXMgdGhlIHRleHRhcmVhIHVuZGVyIHRoZSBtb3VzZSBjdXJzb3IgYW5kIGZvY3VzZXMgaXQuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIHJpZ2h0IGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gKiBAcGFyYW0gdGV4dGFyZWEgVGhlIHRlcm1pbmFsJ3MgdGV4dGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yKGV2OiBNb3VzZUV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAvLyBDYWxjdWxhdGUgdGV4dGFyZWEgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHNjcmVlbiBlbGVtZW50XG4gIGNvbnN0IHBvcyA9IHNjcmVlbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGxlZnQgPSBldi5jbGllbnRYIC0gcG9zLmxlZnQgLSAxMDtcbiAgY29uc3QgdG9wID0gZXYuY2xpZW50WSAtIHBvcy50b3AgLSAxMDtcblxuICAvLyBCcmluZyB0ZXh0YXJlYSBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uXG4gIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnMjBweCc7XG4gIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9ICcyMHB4JztcbiAgdGV4dGFyZWEuc3R5bGUubGVmdCA9IGAke2xlZnR9cHhgO1xuICB0ZXh0YXJlYS5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xuICB0ZXh0YXJlYS5zdHlsZS56SW5kZXggPSAnMTAwMCc7XG5cbiAgdGV4dGFyZWEuZm9jdXMoKTtcblxuICAvLyBSZXNldCB0aGUgdGVybWluYWwgdGV4dGFyZWEncyBzdHlsaW5nXG4gIC8vIFRpbWVvdXQgbmVlZHMgdG8gYmUgbG9uZyBlbm91Z2ggZm9yIGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gbnVsbDtcbiAgICB0ZXh0YXJlYS5zdHlsZS53aWR0aCA9IG51bGw7XG4gICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gbnVsbDtcbiAgICB0ZXh0YXJlYS5zdHlsZS5sZWZ0ID0gbnVsbDtcbiAgICB0ZXh0YXJlYS5zdHlsZS50b3AgPSBudWxsO1xuICAgIHRleHRhcmVhLnN0eWxlLnpJbmRleCA9IG51bGw7XG4gIH0sIDIwMCk7XG59XG5cbi8qKlxuICogQmluZCB0byByaWdodC1jbGljayBldmVudCBhbmQgYWxsb3cgcmlnaHQtY2xpY2sgY29weSBhbmQgcGFzdGUuXG4gKiBAcGFyYW0gZXYgVGhlIG9yaWdpbmFsIHJpZ2h0IGNsaWNrIGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gKiBAcGFyYW0gdGV4dGFyZWEgVGhlIHRlcm1pbmFsJ3MgdGV4dGFyZWEuXG4gKiBAcGFyYW0gc2VsZWN0aW9uU2VydmljZSBUaGUgdGVybWluYWwncyBzZWxlY3Rpb24gbWFuYWdlci5cbiAqIEBwYXJhbSBzaG91bGRTZWxlY3RXb3JkIElmIHRydWUgYW5kIHRoZXJlIGlzIG5vIHNlbGVjdGlvbiB0aGUgY3VycmVudCB3b3JkIHdpbGwgYmUgc2VsZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0Q2xpY2tIYW5kbGVyKGV2OiBNb3VzZUV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsIHNlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlLCBzaG91bGRTZWxlY3RXb3JkOiBib29sZWFuKTogdm9pZCB7XG4gIG1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IoZXYsIHRleHRhcmVhLCBzY3JlZW5FbGVtZW50KTtcblxuICBpZiAoc2hvdWxkU2VsZWN0V29yZCAmJiAhc2VsZWN0aW9uU2VydmljZS5pc0NsaWNrSW5TZWxlY3Rpb24oZXYpKSB7XG4gICAgc2VsZWN0aW9uU2VydmljZS5zZWxlY3RXb3JkQXRDdXJzb3IoZXYpO1xuICB9XG5cbiAgLy8gR2V0IHRleHRhcmVhIHJlYWR5IHRvIGNvcHkgZnJvbSB0aGUgY29udGV4dCBtZW51XG4gIHRleHRhcmVhLnZhbHVlID0gc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0O1xuICB0ZXh0YXJlYS5zZWxlY3QoKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNvbG9yTWFuYWdlciwgSUNvbG9yLCBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElUaGVtZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmNvbnN0IERFRkFVTFRfRk9SRUdST1VORCA9IGZyb21IZXgoJyNmZmZmZmYnKTtcbmNvbnN0IERFRkFVTFRfQkFDS0dST1VORCA9IGZyb21IZXgoJyMwMDAwMDAnKTtcbmNvbnN0IERFRkFVTFRfQ1VSU09SID0gZnJvbUhleCgnI2ZmZmZmZicpO1xuY29uc3QgREVGQVVMVF9DVVJTT1JfQUNDRU5UID0gZnJvbUhleCgnIzAwMDAwMCcpO1xuY29uc3QgREVGQVVMVF9TRUxFQ1RJT04gPSB7XG4gIGNzczogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKScsXG4gIHJnYmE6IDB4RkZGRkZGNzdcbn07XG5cbi8vIEFuIElJRkUgdG8gZ2VuZXJhdGUgREVGQVVMVF9BTlNJX0NPTE9SUy4gRG8gbm90IG11dGF0ZSBERUZBVUxUX0FOU0lfQ09MT1JTLCBpbnN0ZWFkIG1ha2UgYSBjb3B5XG4vLyBhbmQgbXV0YXRlIHRoYXQuXG5leHBvcnQgY29uc3QgREVGQVVMVF9BTlNJX0NPTE9SUyA9ICgoKSA9PiB7XG4gIGNvbnN0IGNvbG9ycyA9IFtcbiAgICAvLyBkYXJrOlxuICAgIGZyb21IZXgoJyMyZTM0MzYnKSxcbiAgICBmcm9tSGV4KCcjY2MwMDAwJyksXG4gICAgZnJvbUhleCgnIzRlOWEwNicpLFxuICAgIGZyb21IZXgoJyNjNGEwMDAnKSxcbiAgICBmcm9tSGV4KCcjMzQ2NWE0JyksXG4gICAgZnJvbUhleCgnIzc1NTA3YicpLFxuICAgIGZyb21IZXgoJyMwNjk4OWEnKSxcbiAgICBmcm9tSGV4KCcjZDNkN2NmJyksXG4gICAgLy8gYnJpZ2h0OlxuICAgIGZyb21IZXgoJyM1NTU3NTMnKSxcbiAgICBmcm9tSGV4KCcjZWYyOTI5JyksXG4gICAgZnJvbUhleCgnIzhhZTIzNCcpLFxuICAgIGZyb21IZXgoJyNmY2U5NGYnKSxcbiAgICBmcm9tSGV4KCcjNzI5ZmNmJyksXG4gICAgZnJvbUhleCgnI2FkN2ZhOCcpLFxuICAgIGZyb21IZXgoJyMzNGUyZTInKSxcbiAgICBmcm9tSGV4KCcjZWVlZWVjJylcbiAgXTtcblxuICAvLyBGaWxsIGluIHRoZSByZW1haW5pbmcgMjQwIEFOU0kgY29sb3JzLlxuICAvLyBHZW5lcmF0ZSBjb2xvcnMgKDE2LTIzMSlcbiAgY29uc3QgdiA9IFsweDAwLCAweDVmLCAweDg3LCAweGFmLCAweGQ3LCAweGZmXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMTY7IGkrKykge1xuICAgIGNvbnN0IHIgPSB2WyhpIC8gMzYpICUgNiB8IDBdO1xuICAgIGNvbnN0IGcgPSB2WyhpIC8gNikgJSA2IHwgMF07XG4gICAgY29uc3QgYiA9IHZbaSAlIDZdO1xuICAgIGNvbG9ycy5wdXNoKHtcbiAgICAgIGNzczogYCMke3RvUGFkZGVkSGV4KHIpfSR7dG9QYWRkZWRIZXgoZyl9JHt0b1BhZGRlZEhleChiKX1gLFxuICAgICAgLy8gVXNlID4+PiAwIHRvIGZvcmNlIGEgY29udmVyc2lvbiB0byBhbiB1bnNpZ25lZCBpbnRcbiAgICAgIHJnYmE6ICgociA8PCAyNCkgfCAoZyA8PCAxNikgfCAoYiA8PCA4KSB8IDB4RkYpID4+PiAwXG4gICAgfSk7XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBncmV5cyAoMjMyLTI1NSlcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNDsgaSsrKSB7XG4gICAgY29uc3QgYyA9IDggKyBpICogMTA7XG4gICAgY29uc3QgY2ggPSB0b1BhZGRlZEhleChjKTtcbiAgICBjb2xvcnMucHVzaCh7XG4gICAgICBjc3M6IGAjJHtjaH0ke2NofSR7Y2h9YCxcbiAgICAgIHJnYmE6ICgoYyA8PCAyNCkgfCAoYyA8PCAxNikgfCAoYyA8PCA4KSB8IDB4RkYpID4+PiAwXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gY29sb3JzO1xufSkoKTtcblxuZnVuY3Rpb24gZnJvbUhleChjc3M6IHN0cmluZyk6IElDb2xvciB7XG4gIHJldHVybiB7XG4gICAgY3NzLFxuICAgIHJnYmE6IHBhcnNlSW50KGNzcy5zbGljZSgxKSwgMTYpIDw8IDggfCAweEZGXG4gIH07XG59XG5cbmZ1bmN0aW9uIHRvUGFkZGVkSGV4KGM6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHMgPSBjLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/ICcwJyArIHMgOiBzO1xufVxuXG4vKipcbiAqIE1hbmFnZXMgdGhlIHNvdXJjZSBvZiB0cnV0aCBmb3IgYSB0ZXJtaW5hbCdzIGNvbG9ycy5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbG9yTWFuYWdlciBpbXBsZW1lbnRzIElDb2xvck1hbmFnZXIge1xuICBwdWJsaWMgY29sb3JzOiBJQ29sb3JTZXQ7XG4gIHByaXZhdGUgX2N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBwcml2YXRlIF9saXRtdXNDb2xvcjogQ2FudmFzR3JhZGllbnQ7XG5cbiAgY29uc3RydWN0b3IoZG9jdW1lbnQ6IERvY3VtZW50LCBwdWJsaWMgYWxsb3dUcmFuc3BhcmVuY3k6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSAxO1xuICAgIGNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmICghY3R4KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBnZXQgcmVuZGVyaW5nIGNvbnRleHQnKTtcbiAgICB9XG4gICAgdGhpcy5fY3R4ID0gY3R4O1xuICAgIHRoaXMuX2N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnY29weSc7XG4gICAgdGhpcy5fbGl0bXVzQ29sb3IgPSB0aGlzLl9jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMSwgMSk7XG4gICAgdGhpcy5jb2xvcnMgPSB7XG4gICAgICBmb3JlZ3JvdW5kOiBERUZBVUxUX0ZPUkVHUk9VTkQsXG4gICAgICBiYWNrZ3JvdW5kOiBERUZBVUxUX0JBQ0tHUk9VTkQsXG4gICAgICBjdXJzb3I6IERFRkFVTFRfQ1VSU09SLFxuICAgICAgY3Vyc29yQWNjZW50OiBERUZBVUxUX0NVUlNPUl9BQ0NFTlQsXG4gICAgICBzZWxlY3Rpb246IERFRkFVTFRfU0VMRUNUSU9OLFxuICAgICAgYW5zaTogREVGQVVMVF9BTlNJX0NPTE9SUy5zbGljZSgpXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0ZXJtaW5hbCdzIHRoZW1lLlxuICAgKiBAcGFyYW0gdGhlbWUgVGhlICB0aGVtZSB0byB1c2UuIElmIGEgcGFydGlhbCB0aGVtZSBpcyBwcm92aWRlZCB0aGVuIGRlZmF1bHRcbiAgICogY29sb3JzIHdpbGwgYmUgdXNlZCB3aGVyZSBjb2xvcnMgYXJlIG5vdCBkZWZpbmVkLlxuICAgKi9cbiAgcHVibGljIHNldFRoZW1lKHRoZW1lOiBJVGhlbWUgPSB7fSk6IHZvaWQge1xuICAgIHRoaXMuY29sb3JzLmZvcmVncm91bmQgPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmZvcmVncm91bmQsIERFRkFVTFRfRk9SRUdST1VORCk7XG4gICAgdGhpcy5jb2xvcnMuYmFja2dyb3VuZCA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYmFja2dyb3VuZCwgREVGQVVMVF9CQUNLR1JPVU5EKTtcbiAgICB0aGlzLmNvbG9ycy5jdXJzb3IgPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmN1cnNvciwgREVGQVVMVF9DVVJTT1IsIHRydWUpO1xuICAgIHRoaXMuY29sb3JzLmN1cnNvckFjY2VudCA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuY3Vyc29yQWNjZW50LCBERUZBVUxUX0NVUlNPUl9BQ0NFTlQsIHRydWUpO1xuICAgIHRoaXMuY29sb3JzLnNlbGVjdGlvbiA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuc2VsZWN0aW9uLCBERUZBVUxUX1NFTEVDVElPTiwgdHJ1ZSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVswXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYmxhY2ssIERFRkFVTFRfQU5TSV9DT0xPUlNbMF0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMV0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLnJlZCwgREVGQVVMVF9BTlNJX0NPTE9SU1sxXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsyXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuZ3JlZW4sIERFRkFVTFRfQU5TSV9DT0xPUlNbMl0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbM10gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLnllbGxvdywgREVGQVVMVF9BTlNJX0NPTE9SU1szXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVs0XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYmx1ZSwgREVGQVVMVF9BTlNJX0NPTE9SU1s0XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVs1XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUubWFnZW50YSwgREVGQVVMVF9BTlNJX0NPTE9SU1s1XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVs2XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuY3lhbiwgREVGQVVMVF9BTlNJX0NPTE9SU1s2XSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVs3XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUud2hpdGUsIERFRkFVTFRfQU5TSV9DT0xPUlNbN10pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbOF0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodEJsYWNrLCBERUZBVUxUX0FOU0lfQ09MT1JTWzhdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzldID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRSZWQsIERFRkFVTFRfQU5TSV9DT0xPUlNbOV0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTBdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRHcmVlbiwgREVGQVVMVF9BTlNJX0NPTE9SU1sxMF0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTFdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRZZWxsb3csIERFRkFVTFRfQU5TSV9DT0xPUlNbMTFdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzEyXSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0Qmx1ZSwgREVGQVVMVF9BTlNJX0NPTE9SU1sxMl0pO1xuICAgIHRoaXMuY29sb3JzLmFuc2lbMTNdID0gdGhpcy5fcGFyc2VDb2xvcih0aGVtZS5icmlnaHRNYWdlbnRhLCBERUZBVUxUX0FOU0lfQ09MT1JTWzEzXSk7XG4gICAgdGhpcy5jb2xvcnMuYW5zaVsxNF0gPSB0aGlzLl9wYXJzZUNvbG9yKHRoZW1lLmJyaWdodEN5YW4sIERFRkFVTFRfQU5TSV9DT0xPUlNbMTRdKTtcbiAgICB0aGlzLmNvbG9ycy5hbnNpWzE1XSA9IHRoaXMuX3BhcnNlQ29sb3IodGhlbWUuYnJpZ2h0V2hpdGUsIERFRkFVTFRfQU5TSV9DT0xPUlNbMTVdKTtcbiAgfVxuXG4gIHByaXZhdGUgX3BhcnNlQ29sb3IoXG4gICAgY3NzOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgZmFsbGJhY2s6IElDb2xvcixcbiAgICBhbGxvd1RyYW5zcGFyZW5jeTogYm9vbGVhbiA9IHRoaXMuYWxsb3dUcmFuc3BhcmVuY3lcbiAgKTogSUNvbG9yIHtcbiAgICBpZiAoY3NzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICB9XG5cbiAgICAvLyBJZiBwYXJzaW5nIHRoZSB2YWx1ZSByZXN1bHRzIGluIGZhaWx1cmUsIHRoZW4gaXQgbXVzdCBiZSBpZ25vcmVkLCBhbmQgdGhlIGF0dHJpYnV0ZSBtdXN0XG4gICAgLy8gcmV0YWluIGl0cyBwcmV2aW91cyB2YWx1ZS5cbiAgICAvLyAtLSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jYW52YXMuaHRtbCNmaWxsLWFuZC1zdHJva2Utc3R5bGVzXG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2xpdG11c0NvbG9yO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBjc3M7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9jdHguZmlsbFN0eWxlICE9PSAnc3RyaW5nJykge1xuICAgICAgY29uc29sZS53YXJuKGBDb2xvcjogJHtjc3N9IGlzIGludmFsaWQgdXNpbmcgZmFsbGJhY2sgJHtmYWxsYmFjay5jc3N9YCk7XG4gICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgfVxuXG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGE7XG5cbiAgICBpZiAoIWFsbG93VHJhbnNwYXJlbmN5ICYmIGRhdGFbM10gIT09IDB4RkYpIHtcbiAgICAgIC8vIElkZWFsbHkgd2UnZCBqdXN0IGlnbm9yZSB0aGUgYWxwaGEgY2hhbm5lbCwgYnV0Li4uXG4gICAgICAvL1xuICAgICAgLy8gQnJvd3NlcnMgbWF5IG5vdCBnaXZlIGJhY2sgZXhhY3RseSB0aGUgc2FtZSBSR0IgdmFsdWVzIHdlIHB1dCBpbiwgYmVjYXVzZSBtb3N0L2FsbFxuICAgICAgLy8gY29udmVydCB0aGUgY29sb3IgdG8gYSBwcmUtbXVsdGlwbGllZCByZXByZXNlbnRhdGlvbi4gZ2V0SW1hZ2VEYXRhIGNvbnZlcnRzIHRoYXQgYmFjayB0b1xuICAgICAgLy8gYSB1bi1wcmVtdWx0aXBsZWQgcmVwcmVzZW50YXRpb24sIGJ1dCB0aGUgcHJlY2lzaW9uIGxvc3MgbWF5IG1ha2UgdGhlIFJHQiBjaGFubmVscyB1bnVhYmxlXG4gICAgICAvLyBvbiB0aGVpciBvd24uXG4gICAgICAvL1xuICAgICAgLy8gRS5nLiBJbiBDaHJvbWUgIzEyMzQ1NjEwIHR1cm5zIGludG8gIzEwMzA1MDEwLCBhbmQgaW4gdGhlIGV4dHJlbWUgY2FzZSwgMHhGRkZGRkYwMCB0dXJuc1xuICAgICAgLy8gaW50byAweDAwMDAwMDAwLlxuICAgICAgLy9cbiAgICAgIC8vIFwiTm90ZTogRHVlIHRvIHRoZSBsb3NzeSBuYXR1cmUgb2YgY29udmVydGluZyB0byBhbmQgZnJvbSBwcmVtdWx0aXBsaWVkIGFscGhhIGNvbG9yIHZhbHVlcyxcbiAgICAgIC8vIHBpeGVscyB0aGF0IGhhdmUganVzdCBiZWVuIHNldCB1c2luZyBwdXRJbWFnZURhdGEoKSBtaWdodCBiZSByZXR1cm5lZCB0byBhbiBlcXVpdmFsZW50XG4gICAgICAvLyBnZXRJbWFnZURhdGEoKSBhcyBkaWZmZXJlbnQgdmFsdWVzLlwiXG4gICAgICAvLyAtLSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jYW52YXMuaHRtbCNwaXhlbC1tYW5pcHVsYXRpb25cbiAgICAgIC8vXG4gICAgICAvLyBTbyBsZXQncyBqdXN0IHVzZSB0aGUgZmFsbGJhY2sgY29sb3IgaW4gdGhpcyBjYXNlIGluc3RlYWQuXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBDb2xvcjogJHtjc3N9IGlzIHVzaW5nIHRyYW5zcGFyZW5jeSwgYnV0IGFsbG93VHJhbnNwYXJlbmN5IGlzIGZhbHNlLiBgICtcbiAgICAgICAgYFVzaW5nIGZhbGxiYWNrICR7ZmFsbGJhY2suY3NzfS5gXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBjc3MsXG4gICAgICByZ2JhOiAoZGF0YVswXSA8PCAyNCB8IGRhdGFbMV0gPDwgMTYgfCBkYXRhWzJdIDw8IDggfCBkYXRhWzNdKSA+Pj4gMFxuICAgIH07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIEFkZHMgYSBkaXNwb3NhYmxlIGxpc3RlbmVyIHRvIGEgbm9kZSBpbiB0aGUgRE9NLCByZXR1cm5pbmcgdGhlIGRpc3Bvc2FibGUuXG4gKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAqIEBwYXJhbSBoYW5kbGVyIFRoZSBoYW5kbGVyIGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIoXG4gIG5vZGU6IEVsZW1lbnQgfCBXaW5kb3cgfCBEb2N1bWVudCxcbiAgdHlwZTogc3RyaW5nLFxuICBoYW5kbGVyOiAoZTogYW55KSA9PiB2b2lkLFxuICB1c2VDYXB0dXJlPzogYm9vbGVhblxuKTogSURpc3Bvc2FibGUge1xuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7XG4gIHJldHVybiB7XG4gICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgaWYgKCFoYW5kbGVyKSB7XG4gICAgICAgIC8vIEFscmVhZHkgZGlzcG9zZWRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpO1xuICAgIH1cbiAgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxpbmtpZmllckV2ZW50LCBJTGlua01hdGNoZXIsIExpbmtNYXRjaGVySGFuZGxlciwgSUxpbmtNYXRjaGVyT3B0aW9ucywgSUxpbmtpZmllciwgSU1vdXNlWm9uZU1hbmFnZXIsIElNb3VzZVpvbmUsIElSZWdpc3RlcmVkTGlua01hdGNoZXIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTdHJpbmdJdGVyYXRvclJlc3VsdCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgZ2V0U3RyaW5nQ2VsbFdpZHRoIH0gZnJvbSAnY29tbW9uL0NoYXJXaWR0aCc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUxvZ1NlcnZpY2UsIElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuLyoqXG4gKiBMaW1pdCBvZiB0aGUgdW53cmFwcGluZyBsaW5lIGV4cGFuc2lvbiAob3ZlcnNjYW4pIGF0IHRoZSB0b3AgYW5kIGJvdHRvbVxuICogb2YgdGhlIGFjdHVhbCB2aWV3cG9ydCBpbiBBU0NJSSBjaGFyYWN0ZXJzLlxuICogQSBsaW1pdCBvZiAyMDAwIHNob3VsZCBtYXRjaCBtb3N0IHNhbmUgdXJscy5cbiAqL1xuY29uc3QgT1ZFUlNDQU5fQ0hBUl9MSU1JVCA9IDIwMDA7XG5cbi8qKlxuICogVGhlIExpbmtpZmllciBhcHBsaWVzIGxpbmtzIHRvIHJvd3Mgc2hvcnRseSBhZnRlciB0aGV5IGhhdmUgYmVlbiByZWZyZXNoZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5raWZpZXIgaW1wbGVtZW50cyBJTGlua2lmaWVyIHtcbiAgLyoqXG4gICAqIFRoZSB0aW1lIHRvIHdhaXQgYWZ0ZXIgYSByb3cgaXMgY2hhbmdlZCBiZWZvcmUgaXQgaXMgbGlua2lmaWVkLiBUaGlzIHByZXZlbnRzXG4gICAqIHRoZSBjb3N0bHkgb3BlcmF0aW9uIG9mIHNlYXJjaGluZyBldmVyeSByb3cgbXVsdGlwbGUgdGltZXMsIHBvdGVudGlhbGx5IGFcbiAgICogaHVnZSBhbW91bnQgb2YgdGltZXMuXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIF90aW1lQmVmb3JlTGF0ZW5jeSA9IDIwMDtcblxuICBwcm90ZWN0ZWQgX2xpbmtNYXRjaGVyczogSVJlZ2lzdGVyZWRMaW5rTWF0Y2hlcltdID0gW107XG5cbiAgcHJpdmF0ZSBfbW91c2Vab25lTWFuYWdlcjogSU1vdXNlWm9uZU1hbmFnZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2VsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3Jvd3NUaW1lb3V0SWQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbmV4dExpbmtNYXRjaGVySWQgPSAwO1xuICBwcml2YXRlIF9yb3dzVG9MaW5raWZ5OiB7IHN0YXJ0OiBudW1iZXIgfCB1bmRlZmluZWQsIGVuZDogbnVtYmVyIHwgdW5kZWZpbmVkIH07XG5cbiAgcHJpdmF0ZSBfb25MaW5rSG92ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPElMaW5raWZpZXJFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmtIb3ZlcigpOiBJRXZlbnQ8SUxpbmtpZmllckV2ZW50PiB7IHJldHVybiB0aGlzLl9vbkxpbmtIb3Zlci5ldmVudDsgfVxuICBwcml2YXRlIF9vbkxpbmtMZWF2ZSA9IG5ldyBFdmVudEVtaXR0ZXI8SUxpbmtpZmllckV2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uTGlua0xlYXZlKCk6IElFdmVudDxJTGlua2lmaWVyRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uTGlua0xlYXZlLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uTGlua1Rvb2x0aXAgPSBuZXcgRXZlbnRFbWl0dGVyPElMaW5raWZpZXJFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkxpbmtUb29sdGlwKCk6IElFdmVudDxJTGlua2lmaWVyRXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uTGlua1Rvb2x0aXAuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkgPSB7XG4gICAgICBzdGFydDogdW5kZWZpbmVkLFxuICAgICAgZW5kOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIHRoZSBsaW5raWZpZXIgdG8gdGhlIERPTSwgZW5hYmxpbmcgbGlua2lmaWNhdGlvbi5cbiAgICogQHBhcmFtIG1vdXNlWm9uZU1hbmFnZXIgVGhlIG1vdXNlIHpvbmUgbWFuYWdlciB0byByZWdpc3RlciBsaW5rIHpvbmVzIHdpdGguXG4gICAqL1xuICBwdWJsaWMgYXR0YWNoVG9Eb20oZWxlbWVudDogSFRNTEVsZW1lbnQsIG1vdXNlWm9uZU1hbmFnZXI6IElNb3VzZVpvbmVNYW5hZ2VyKTogdm9pZCB7XG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlciA9IG1vdXNlWm9uZU1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICogUXVldWUgbGlua2lmaWNhdGlvbiBvbiBhIHNldCBvZiByb3dzLlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIHJvdyB0byBsaW5raWZ5IGZyb20gKGluY2x1c2l2ZSkuXG4gICAqIEBwYXJhbSBlbmQgVGhlIHJvdyB0byBsaW5raWZ5IHRvIChpbmNsdXNpdmUpLlxuICAgKi9cbiAgcHVibGljIGxpbmtpZnlSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgYXR0ZW1wdCBsaW5raWZ5IGlmIG5vdCB5ZXQgYXR0YWNoZWQgdG8gRE9NXG4gICAgaWYgKCF0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5jcmVhc2UgcmFuZ2UgdG8gbGlua2lmeVxuICAgIGlmICh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPSBlbmQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQgPSBNYXRoLm1pbih0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0LCBzdGFydCk7XG4gICAgICB0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCA9IE1hdGgubWF4KHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLCBlbmQpO1xuICAgIH1cblxuICAgIC8vIENsZWFyIG91dCBhbnkgZXhpc3RpbmcgbGlua3Mgb24gdGhpcyByb3cgcmFuZ2VcbiAgICB0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyLmNsZWFyQWxsKHN0YXJ0LCBlbmQpO1xuXG4gICAgLy8gUmVzdGFydCB0aW1lclxuICAgIGlmICh0aGlzLl9yb3dzVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5fcm93c1RpbWVvdXRJZCk7XG4gICAgfVxuICAgIHRoaXMuX3Jvd3NUaW1lb3V0SWQgPSA8bnVtYmVyPjxhbnk+c2V0VGltZW91dCgoKSA9PiB0aGlzLl9saW5raWZ5Um93cygpLCBMaW5raWZpZXIuX3RpbWVCZWZvcmVMYXRlbmN5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW5raWZpZXMgdGhlIHJvd3MgcmVxdWVzdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfbGlua2lmeVJvd3MoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93c1RpbWVvdXRJZCA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcblxuICAgIGlmICh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnX3Jvd1RvTGlua2lmeSB3YXMgdW5zZXQgYmVmb3JlIF9saW5raWZ5Um93cyB3YXMgY2FsbGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoZSBzdGFydCByb3cgZXhpc3RzXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID0gYnVmZmVyLnlkaXNwICsgdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydDtcbiAgICBpZiAoYWJzb2x1dGVSb3dJbmRleFN0YXJ0ID49IGJ1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnZhbGlkYXRlIGJhZCBlbmQgcm93IHZhbHVlcyAoaWYgYSByZXNpemUgaGFwcGVuZWQpXG4gICAgY29uc3QgYWJzb2x1dGVSb3dJbmRleEVuZCA9IGJ1ZmZlci55ZGlzcCArIE1hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpICsgMTtcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgcmFuZ2Ugb2YgdW53cmFwcGVkIGNvbnRlbnQgc3RyaW5ncyB3aXRoaW4gc3RhcnQuLmVuZFxuICAgIC8vIChleGNsdWRpbmcpLlxuICAgIC8vIF9kb0xpbmtpZnlSb3cgZ2V0cyBmdWxsIHVud3JhcHBlZCBsaW5lcyB3aXRoIHRoZSBzdGFydCByb3cgYXMgYnVmZmVyIG9mZnNldFxuICAgIC8vIGZvciBldmVyeSBtYXRjaGVyLlxuICAgIC8vIFRoZSB1bndyYXBwaW5nIGlzIG5lZWRlZCB0byBhbHNvIG1hdGNoIGNvbnRlbnQgdGhhdCBnb3Qgd3JhcHBlZCBhY3Jvc3NcbiAgICAvLyBzZXZlcmFsIGJ1ZmZlciBsaW5lcy4gVG8gYXZvaWQgYSB3b3JzdCBjYXNlIHNjZW5hcmlvIHdoZXJlIHRoZSB3aG9sZSBidWZmZXJcbiAgICAvLyBjb250YWlucyBqdXN0IGEgc2luZ2xlIHVud3JhcHBlZCBzdHJpbmcgd2UgbGltaXQgdGhpcyBsaW5lIGV4cGFuc2lvbiBiZXlvbmRcbiAgICAvLyB0aGUgdmlld3BvcnQgdG8gK09WRVJTQ0FOX0NIQVJfTElNSVQgY2hhcnMgKG92ZXJzY2FuKSBhdCB0b3AgYW5kIGJvdHRvbS5cbiAgICAvLyBUaGlzIGNvbWVzIHdpdGggdGhlIHRyYWRlb2ZmIHRoYXQgbWF0Y2hlcyBsb25nZXIgdGhhbiBPVkVSU0NBTl9DSEFSX0xJTUlUXG4gICAgLy8gY2hhcnMgd2lsbCBub3QgbWF0Y2ggYW55bW9yZSBhdCB0aGUgdmlld3BvcnQgYm9yZGVycy5cbiAgICBjb25zdCBvdmVyc2NhbkxpbmVMaW1pdCA9IE1hdGguY2VpbChPVkVSU0NBTl9DSEFSX0xJTUlUIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBjb25zdCBpdGVyYXRvciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLml0ZXJhdG9yKFxuICAgICAgZmFsc2UsIGFic29sdXRlUm93SW5kZXhTdGFydCwgYWJzb2x1dGVSb3dJbmRleEVuZCwgb3ZlcnNjYW5MaW5lTGltaXQsIG92ZXJzY2FuTGluZUxpbWl0KTtcbiAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XG4gICAgICBjb25zdCBsaW5lRGF0YTogSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yUmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fZG9MaW5raWZ5Um93KGxpbmVEYXRhLnJhbmdlLmZpcnN0LCBsaW5lRGF0YS5jb250ZW50LCB0aGlzLl9saW5rTWF0Y2hlcnNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcm93c1RvTGlua2lmeS5lbmQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayBtYXRjaGVyLCBhbGxvd2luZyBjdXN0b20gbGluayBwYXR0ZXJucyB0byBiZSBtYXRjaGVkIGFuZFxuICAgKiBoYW5kbGVkLlxuICAgKiBAcGFyYW0gcmVnZXggVGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggZm9yLiBTcGVjaWZpY2FsbHksIHRoaXNcbiAgICogc2VhcmNoZXMgdGhlIHRleHRDb250ZW50IG9mIHRoZSByb3dzLiBZb3Ugd2lsbCB3YW50IHRvIHVzZSBcXHMgdG8gbWF0Y2ggYVxuICAgKiBzcGFjZSAnICcgY2hhcmFjdGVyIGZvciBleGFtcGxlLlxuICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgY2FsbGJhY2sgd2hlbiB0aGUgbGluayBpcyBjYWxsZWQuXG4gICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgZm9yIHRoZSBsaW5rIG1hdGNoZXIuXG4gICAqIEByZXR1cm4gVGhlIElEIG9mIHRoZSBuZXcgbWF0Y2hlciwgdGhpcyBjYW4gYmUgdXNlZCB0byBkZXJlZ2lzdGVyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyTGlua01hdGNoZXIocmVnZXg6IFJlZ0V4cCwgaGFuZGxlcjogTGlua01hdGNoZXJIYW5kbGVyLCBvcHRpb25zOiBJTGlua01hdGNoZXJPcHRpb25zID0ge30pOiBudW1iZXIge1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdoYW5kbGVyIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVyOiBJUmVnaXN0ZXJlZExpbmtNYXRjaGVyID0ge1xuICAgICAgaWQ6IHRoaXMuX25leHRMaW5rTWF0Y2hlcklkKyssXG4gICAgICByZWdleCxcbiAgICAgIGhhbmRsZXIsXG4gICAgICBtYXRjaEluZGV4OiBvcHRpb25zLm1hdGNoSW5kZXgsXG4gICAgICB2YWxpZGF0aW9uQ2FsbGJhY2s6IG9wdGlvbnMudmFsaWRhdGlvbkNhbGxiYWNrLFxuICAgICAgaG92ZXJUb29sdGlwQ2FsbGJhY2s6IG9wdGlvbnMudG9vbHRpcENhbGxiYWNrLFxuICAgICAgaG92ZXJMZWF2ZUNhbGxiYWNrOiBvcHRpb25zLmxlYXZlQ2FsbGJhY2ssXG4gICAgICB3aWxsTGlua0FjdGl2YXRlOiBvcHRpb25zLndpbGxMaW5rQWN0aXZhdGUsXG4gICAgICBwcmlvcml0eTogb3B0aW9ucy5wcmlvcml0eSB8fCAwXG4gICAgfTtcbiAgICB0aGlzLl9hZGRMaW5rTWF0Y2hlclRvTGlzdChtYXRjaGVyKTtcbiAgICByZXR1cm4gbWF0Y2hlci5pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRzIGEgbGluayBtYXRjaGVyIHRvIHRoZSBsaXN0IGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uIGJhc2VkIG9uIHRoZVxuICAgKiBwcmlvcml0eSBvZiBlYWNoIGxpbmsgbWF0Y2hlci4gTmV3IGxpbmsgbWF0Y2hlcnMgb2YgZXF1YWwgcHJpb3JpdHkgYXJlXG4gICAqIGNvbnNpZGVyZWQgYWZ0ZXIgb2xkZXIgbGluayBtYXRjaGVycy5cbiAgICogQHBhcmFtIG1hdGNoZXIgVGhlIGxpbmsgbWF0Y2hlciB0byBiZSBhZGRlZC5cbiAgICovXG4gIHByaXZhdGUgX2FkZExpbmtNYXRjaGVyVG9MaXN0KG1hdGNoZXI6IElSZWdpc3RlcmVkTGlua01hdGNoZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fbGlua01hdGNoZXJzLnB1c2gobWF0Y2hlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKG1hdGNoZXIucHJpb3JpdHkgPD0gdGhpcy5fbGlua01hdGNoZXJzW2ldLnByaW9yaXR5KSB7XG4gICAgICAgIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoaSArIDEsIDAsIG1hdGNoZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbGlua01hdGNoZXJzLnNwbGljZSgwLCAwLCBtYXRjaGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXJlZ2lzdGVycyBhIGxpbmsgbWF0Y2hlciBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICAgKiBAcGFyYW0gbWF0Y2hlcklkIFRoZSBsaW5rIG1hdGNoZXIncyBJRCAocmV0dXJuZWQgYWZ0ZXIgcmVnaXN0ZXIpXG4gICAqIEByZXR1cm4gV2hldGhlciBhIGxpbmsgbWF0Y2hlciB3YXMgZm91bmQgYW5kIGRlcmVnaXN0ZXJlZC5cbiAgICovXG4gIHB1YmxpYyBkZXJlZ2lzdGVyTGlua01hdGNoZXIobWF0Y2hlcklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2xpbmtNYXRjaGVyc1tpXS5pZCA9PT0gbWF0Y2hlcklkKSB7XG4gICAgICAgIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogTGlua2lmaWVzIGEgcm93IGdpdmVuIGEgc3BlY2lmaWMgaGFuZGxlci5cbiAgICogQHBhcmFtIHJvd0luZGV4IFRoZSByb3cgaW5kZXggdG8gbGlua2lmeSAoYWJzb2x1dGUgaW5kZXgpLlxuICAgKiBAcGFyYW0gdGV4dCBzdHJpbmcgY29udGVudCBvZiB0aGUgdW53cmFwcGVkIHJvdy5cbiAgICogQHBhcmFtIG1hdGNoZXIgVGhlIGxpbmsgbWF0Y2hlciBmb3IgdGhpcyBsaW5lLlxuICAgKi9cbiAgcHJpdmF0ZSBfZG9MaW5raWZ5Um93KHJvd0luZGV4OiBudW1iZXIsIHRleHQ6IHN0cmluZywgbWF0Y2hlcjogSUxpbmtNYXRjaGVyKTogdm9pZCB7XG4gICAgLy8gY2xvbmUgcmVnZXggdG8gZG8gYSBnbG9iYWwgc2VhcmNoIG9uIHRleHRcbiAgICBjb25zdCByZXggPSBuZXcgUmVnRXhwKG1hdGNoZXIucmVnZXguc291cmNlLCBtYXRjaGVyLnJlZ2V4LmZsYWdzICsgJ2cnKTtcbiAgICBsZXQgbWF0Y2g7XG4gICAgbGV0IHN0cmluZ0luZGV4ID0gLTE7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJleC5leGVjKHRleHQpKSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgdXJpID0gbWF0Y2hbdHlwZW9mIG1hdGNoZXIubWF0Y2hJbmRleCAhPT0gJ251bWJlcicgPyAwIDogbWF0Y2hlci5tYXRjaEluZGV4XTtcbiAgICAgIGlmICghdXJpKSB7XG4gICAgICAgIC8vIHNvbWV0aGluZyBtYXRjaGVkIGJ1dCBkb2VzIG5vdCBjb21wbHkgd2l0aCB0aGUgZ2l2ZW4gbWF0Y2hJbmRleFxuICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIG1vc3QgbGlrZWx5IGEgYnVnIHRoZSByZWdleCBpdHNlbGYgd2Ugc2ltcGx5IGRvIG5vdGhpbmcgaGVyZVxuICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdtYXRjaCBmb3VuZCB3aXRob3V0IGNvcnJlc3BvbmRpbmcgbWF0Y2hJbmRleCcsIG1hdGNoLCBtYXRjaGVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBpbmRleCwgbWF0Y2guaW5kZXggaXMgZm9yIHRoZSBvdXRlciBtYXRjaCB3aGljaCBpbmNsdWRlcyBuZWdhdGVkIGNoYXJzXG4gICAgICAvLyB0aGVyZWZvcmUgd2UgY2Fubm90IHVzZSBtYXRjaC5pbmRleCBkaXJlY3RseSwgaW5zdGVhZCB3ZSBzZWFyY2ggdGhlIHBvc2l0aW9uXG4gICAgICAvLyBvZiB0aGUgbWF0Y2ggZ3JvdXAgaW4gdGV4dCBhZ2FpblxuICAgICAgLy8gYWxzbyBjb3JyZWN0IHJlZ2V4IGFuZCBzdHJpbmcgc2VhcmNoIG9mZnNldHMgZm9yIHRoZSBuZXh0IGxvb3AgcnVuXG4gICAgICBzdHJpbmdJbmRleCA9IHRleHQuaW5kZXhPZih1cmksIHN0cmluZ0luZGV4ICsgMSk7XG4gICAgICByZXgubGFzdEluZGV4ID0gc3RyaW5nSW5kZXggKyB1cmkubGVuZ3RoO1xuICAgICAgaWYgKHN0cmluZ0luZGV4IDwgMCkge1xuICAgICAgICAvLyBpbnZhbGlkIHN0cmluZ0luZGV4IChzaG91bGQgbm90IGhhdmUgaGFwcGVuZWQpXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBnZXQgdGhlIGJ1ZmZlciBpbmRleCBhcyBbYWJzb2x1dGUgcm93LCBjb2xdIGZvciB0aGUgbWF0Y2hcbiAgICAgIGNvbnN0IGJ1ZmZlckluZGV4ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc3RyaW5nSW5kZXhUb0J1ZmZlckluZGV4KHJvd0luZGV4LCBzdHJpbmdJbmRleCk7XG4gICAgICBpZiAoYnVmZmVySW5kZXhbMF0gPCAwKSB7XG4gICAgICAgIC8vIGludmFsaWQgYnVmZmVySW5kZXggKHNob3VsZCBub3QgaGF2ZSBoYXBwZW5lZClcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVySW5kZXhbMF0pO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhdHRyID0gbGluZS5nZXRGZyhidWZmZXJJbmRleFsxXSk7XG4gICAgICBjb25zdCBmZyA9IGF0dHIgPyAoYXR0ciA+PiA5KSAmIDB4MWZmIDogdW5kZWZpbmVkO1xuXG4gICAgICBpZiAobWF0Y2hlci52YWxpZGF0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgbWF0Y2hlci52YWxpZGF0aW9uQ2FsbGJhY2sodXJpLCBpc1ZhbGlkID0+IHtcbiAgICAgICAgICAvLyBEaXNjYXJkIGxpbmsgaWYgdGhlIGxpbmUgaGFzIGFscmVhZHkgY2hhbmdlZFxuICAgICAgICAgIGlmICh0aGlzLl9yb3dzVGltZW91dElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9hZGRMaW5rKGJ1ZmZlckluZGV4WzFdLCBidWZmZXJJbmRleFswXSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLCB1cmksIG1hdGNoZXIsIGZnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkTGluayhidWZmZXJJbmRleFsxXSwgYnVmZmVySW5kZXhbMF0gLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCwgdXJpLCBtYXRjaGVyLCBmZyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpbmsgdG8gdGhlIG1vdXNlIHpvbmUgbWFuYWdlci5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0aGUgbGluayBzdGFydHMuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdGhlIGxpbmsgaXMgb24uXG4gICAqIEBwYXJhbSB1cmkgVGhlIFVSSSBvZiB0aGUgbGluay5cbiAgICogQHBhcmFtIG1hdGNoZXIgVGhlIGxpbmsgbWF0Y2hlciBmb3IgdGhlIGxpbmsuXG4gICAqIEBwYXJhbSBmZyBUaGUgbGluayBjb2xvciBmb3IgaG92ZXIgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9hZGRMaW5rKHg6IG51bWJlciwgeTogbnVtYmVyLCB1cmk6IHN0cmluZywgbWF0Y2hlcjogSUxpbmtNYXRjaGVyLCBmZzogbnVtYmVyIHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyIHx8ICF0aGlzLl9lbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd2lkdGggPSBnZXRTdHJpbmdDZWxsV2lkdGgodXJpKTtcbiAgICBjb25zdCB4MSA9IHggJSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgY29uc3QgeTEgPSB5ICsgTWF0aC5mbG9vcih4IC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBsZXQgeDIgPSAoeDEgKyB3aWR0aCkgJSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgbGV0IHkyID0geTEgKyBNYXRoLmZsb29yKCh4MSArIHdpZHRoKSAvIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG4gICAgaWYgKHgyID09PSAwKSB7XG4gICAgICB4MiA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIHkyLS07XG4gICAgfVxuXG4gICAgdGhpcy5fbW91c2Vab25lTWFuYWdlci5hZGQobmV3IE1vdXNlWm9uZShcbiAgICAgIHgxICsgMSxcbiAgICAgIHkxICsgMSxcbiAgICAgIHgyICsgMSxcbiAgICAgIHkyICsgMSxcbiAgICAgIGUgPT4ge1xuICAgICAgICBpZiAobWF0Y2hlci5oYW5kbGVyKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXIuaGFuZGxlcihlLCB1cmkpO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5vcGVuKHVyaSwgJ19ibGFuaycpO1xuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5fb25MaW5rSG92ZXIuZmlyZSh0aGlzLl9jcmVhdGVMaW5rSG92ZXJFdmVudCh4MSwgeTEsIHgyLCB5MiwgZmcpKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudCEuY2xhc3NMaXN0LmFkZCgneHRlcm0tY3Vyc29yLXBvaW50ZXInKTtcbiAgICAgIH0sXG4gICAgICBlID0+IHtcbiAgICAgICAgdGhpcy5fb25MaW5rVG9vbHRpcC5maXJlKHRoaXMuX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KHgxLCB5MSwgeDIsIHkyLCBmZykpO1xuICAgICAgICBpZiAobWF0Y2hlci5ob3ZlclRvb2x0aXBDYWxsYmFjaykge1xuICAgICAgICAgIG1hdGNoZXIuaG92ZXJUb29sdGlwQ2FsbGJhY2soZSwgdXJpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5fb25MaW5rTGVhdmUuZmlyZSh0aGlzLl9jcmVhdGVMaW5rSG92ZXJFdmVudCh4MSwgeTEsIHgyLCB5MiwgZmcpKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudCEuY2xhc3NMaXN0LnJlbW92ZSgneHRlcm0tY3Vyc29yLXBvaW50ZXInKTtcbiAgICAgICAgaWYgKG1hdGNoZXIuaG92ZXJMZWF2ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgbWF0Y2hlci5ob3ZlckxlYXZlQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGUgPT4ge1xuICAgICAgICBpZiAobWF0Y2hlci53aWxsTGlua0FjdGl2YXRlKSB7XG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXIud2lsbExpbmtBY3RpdmF0ZShlLCB1cmkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlTGlua0hvdmVyRXZlbnQoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlciwgZmc6IG51bWJlciB8IHVuZGVmaW5lZCk6IElMaW5raWZpZXJFdmVudCB7XG4gICAgcmV0dXJuIHsgeDEsIHkxLCB4MiwgeTIsIGNvbHM6IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgZmcgfTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW91c2Vab25lIGltcGxlbWVudHMgSU1vdXNlWm9uZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyB4MTogbnVtYmVyLFxuICAgIHB1YmxpYyB5MTogbnVtYmVyLFxuICAgIHB1YmxpYyB4MjogbnVtYmVyLFxuICAgIHB1YmxpYyB5MjogbnVtYmVyLFxuICAgIHB1YmxpYyBjbGlja0NhbGxiYWNrOiAoZTogTW91c2VFdmVudCkgPT4gYW55LFxuICAgIHB1YmxpYyBob3ZlckNhbGxiYWNrOiAoZTogTW91c2VFdmVudCkgPT4gYW55LFxuICAgIHB1YmxpYyB0b29sdGlwQ2FsbGJhY2s6IChlOiBNb3VzZUV2ZW50KSA9PiBhbnksXG4gICAgcHVibGljIGxlYXZlQ2FsbGJhY2s6ICgpID0+IHZvaWQsXG4gICAgcHVibGljIHdpbGxMaW5rQWN0aXZhdGU6IChlOiBNb3VzZUV2ZW50KSA9PiBib29sZWFuXG4gICkge1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBsZXQgcHJvbXB0TGFiZWwgPSAnVGVybWluYWwgaW5wdXQnO1xuZXhwb3J0IGxldCB0b29NdWNoT3V0cHV0ID0gJ1RvbyBtdWNoIG91dHB1dCB0byBhbm5vdW5jZSwgbmF2aWdhdGUgdG8gcm93cyBtYW51YWxseSB0byByZWFkJztcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnYnJvd3Nlci9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSU1vdXNlU2VydmljZSwgSVNlbGVjdGlvblNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElNb3VzZVpvbmVNYW5hZ2VyLCBJTW91c2Vab25lIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmNvbnN0IEhPVkVSX0RVUkFUSU9OID0gNTAwO1xuXG4vKipcbiAqIFRoZSBNb3VzZVpvbmVNYW5hZ2VyIGFsbG93cyBjb21wb25lbnRzIHRvIHJlZ2lzdGVyIHpvbmVzIHdpdGhpbiB0aGUgdGVybWluYWxcbiAqIHRoYXQgdHJpZ2dlciBob3ZlciBhbmQgY2xpY2sgY2FsbGJhY2tzLlxuICpcbiAqIFRoaXMgY2xhc3Mgd2FzIGludGVudGlvbmFsbHkgbWFkZSBub3Qgc28gcm9idXN0IGluaXRpYWxseSBhcyB0aGUgb25seSBjYXNlIGl0XG4gKiBuZWVkZWQgdG8gc3VwcG9ydCB3YXMgc2luZ2xlLWxpbmUgbGlua3Mgd2hpY2ggbmV2ZXIgb3ZlcmxhcC4gSW1wcm92ZW1lbnRzIGNhblxuICogYmUgbWFkZSBpbiB0aGUgZnV0dXJlLlxuICovXG5leHBvcnQgY2xhc3MgTW91c2Vab25lTWFuYWdlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJTW91c2Vab25lTWFuYWdlciB7XG4gIHByaXZhdGUgX3pvbmVzOiBJTW91c2Vab25lW10gPSBbXTtcblxuICBwcml2YXRlIF9hcmVab25lc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9tb3VzZU1vdmVMaXN0ZW5lcjogKGU6IE1vdXNlRXZlbnQpID0+IGFueTtcbiAgcHJpdmF0ZSBfbW91c2VMZWF2ZUxpc3RlbmVyOiAoZTogTW91c2VFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIF9jbGlja0xpc3RlbmVyOiAoZTogTW91c2VFdmVudCkgPT4gYW55O1xuXG4gIHByaXZhdGUgX3Rvb2x0aXBUaW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2N1cnJlbnRab25lOiBJTW91c2Vab25lIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9sYXN0SG92ZXJDb29yZHM6IFtudW1iZXIgfCB1bmRlZmluZWQsIG51bWJlciB8IHVuZGVmaW5lZF0gPSBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICBwcml2YXRlIF9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoOiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASU1vdXNlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9tb3VzZVNlcnZpY2U6IElNb3VzZVNlcnZpY2UsXG4gICAgQElTZWxlY3Rpb25TZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3NlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyKGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcih0aGlzLl9lbGVtZW50LCAnbW91c2Vkb3duJywgZSA9PiB0aGlzLl9vbk1vdXNlRG93bihlKSkpO1xuXG4gICAgLy8gVGhlc2UgZXZlbnRzIGFyZSBleHBlbnNpdmUsIG9ubHkgbGlzdGVuIHRvIGl0IHdoZW4gbW91c2Ugem9uZXMgYXJlIGFjdGl2ZVxuICAgIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyID0gZSA9PiB0aGlzLl9vbk1vdXNlTW92ZShlKTtcbiAgICB0aGlzLl9tb3VzZUxlYXZlTGlzdGVuZXIgPSBlID0+IHRoaXMuX29uTW91c2VMZWF2ZShlKTtcbiAgICB0aGlzLl9jbGlja0xpc3RlbmVyID0gZSA9PiB0aGlzLl9vbkNsaWNrKGUpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuX2RlYWN0aXZhdGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGQoem9uZTogSU1vdXNlWm9uZSk6IHZvaWQge1xuICAgIHRoaXMuX3pvbmVzLnB1c2goem9uZSk7XG4gICAgaWYgKHRoaXMuX3pvbmVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5fYWN0aXZhdGUoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgY2xlYXJBbGwoc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEV4aXQgaWYgdGhlcmUncyBub3RoaW5nIHRvIGNsZWFyXG4gICAgaWYgKHRoaXMuX3pvbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENsZWFyIGFsbCBpZiBzdGFydC9lbmQgd2VyZW4ndCBzZXRcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICAgIGVuZCA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHpvbmVzIGFuZCBjbGVhciB0aGVtIG91dCBpZiB0aGV5J3JlIHdpdGhpbiB0aGUgcmFuZ2VcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3pvbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB6b25lID0gdGhpcy5fem9uZXNbaV07XG4gICAgICBpZiAoKHpvbmUueTEgPiBzdGFydCAmJiB6b25lLnkxIDw9IGVuZCArIDEpIHx8XG4gICAgICAgICAgKHpvbmUueTIgPiBzdGFydCAmJiB6b25lLnkyIDw9IGVuZCArIDEpIHx8XG4gICAgICAgICAgKHpvbmUueTEgPCBzdGFydCAmJiB6b25lLnkyID4gZW5kICsgMSkpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRab25lICYmIHRoaXMuX2N1cnJlbnRab25lID09PSB6b25lKSB7XG4gICAgICAgICAgdGhpcy5fY3VycmVudFpvbmUubGVhdmVDYWxsYmFjaygpO1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRab25lID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3pvbmVzLnNwbGljZShpLS0sIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlYWN0aXZhdGUgdGhlIG1vdXNlIHpvbmUgbWFuYWdlciBpZiBhbGwgdGhlIHpvbmVzIGhhdmUgYmVlbiByZW1vdmVkXG4gICAgaWYgKHRoaXMuX3pvbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2FjdGl2YXRlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYXJlWm9uZXNBY3RpdmUpIHtcbiAgICAgIHRoaXMuX2FyZVpvbmVzQWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5fbW91c2VMZWF2ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0xpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9kZWFjdGl2YXRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hcmVab25lc0FjdGl2ZSkge1xuICAgICAgdGhpcy5fYXJlWm9uZXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5fbW91c2VMZWF2ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja0xpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbk1vdXNlTW92ZShlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gVE9ETzogSWRlYWxseSB0aGlzIHdvdWxkIG9ubHkgY2xlYXIgdGhlIGhvdmVyIHN0YXRlIHdoZW4gdGhlIG1vdXNlIG1vdmVzXG4gICAgLy8gb3V0c2lkZSBvZiB0aGUgbW91c2Ugem9uZVxuICAgIGlmICh0aGlzLl9sYXN0SG92ZXJDb29yZHNbMF0gIT09IGUucGFnZVggfHwgdGhpcy5fbGFzdEhvdmVyQ29vcmRzWzFdICE9PSBlLnBhZ2VZKSB7XG4gICAgICB0aGlzLl9vbkhvdmVyKGUpO1xuICAgICAgLy8gUmVjb3JkIHRoZSBjdXJyZW50IGNvb3JkaW5hdGVzXG4gICAgICB0aGlzLl9sYXN0SG92ZXJDb29yZHMgPSBbZS5wYWdlWCwgZS5wYWdlWV07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfb25Ib3ZlcihlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3Qgem9uZSA9IHRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlIHpvbmUgaXMgdGhlIHNhbWVcbiAgICBpZiAoem9uZSA9PT0gdGhpcy5fY3VycmVudFpvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBGaXJlIHRoZSBob3ZlciBlbmQgY2FsbGJhY2sgYW5kIGNhbmNlbCBhbnkgZXhpc3RpbmcgdGltZXIgaWYgYSBuZXcgem9uZVxuICAgIC8vIGlzIGJlaW5nIGhvdmVyZWRcbiAgICBpZiAodGhpcy5fY3VycmVudFpvbmUpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKTtcbiAgICAgIHRoaXMuX2N1cnJlbnRab25lID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBUaW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXhpdCBpZiB0aGVyZSBpcyBub3Qgem9uZVxuICAgIGlmICghem9uZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50Wm9uZSA9IHpvbmU7XG5cbiAgICAvLyBUcmlnZ2VyIHRoZSBob3ZlciBjYWxsYmFja1xuICAgIGlmICh6b25lLmhvdmVyQ2FsbGJhY2spIHtcbiAgICAgIHpvbmUuaG92ZXJDYWxsYmFjayhlKTtcbiAgICB9XG5cbiAgICAvLyBSZXN0YXJ0IHRoZSB0b29sdGlwIHRpbWVvdXRcbiAgICB0aGlzLl90b29sdGlwVGltZW91dCA9IDxudW1iZXI+PGFueT5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX29uVG9vbHRpcChlKSwgSE9WRVJfRFVSQVRJT04pO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25Ub29sdGlwKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl90b29sdGlwVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCB6b25lID0gdGhpcy5fZmluZFpvbmVFdmVudEF0KGUpO1xuICAgIGlmICh6b25lICYmIHpvbmUudG9vbHRpcENhbGxiYWNrKSB7XG4gICAgICB6b25lLnRvb2x0aXBDYWxsYmFjayhlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbk1vdXNlRG93bihlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gU3RvcmUgY3VycmVudCB0ZXJtaW5hbCBzZWxlY3Rpb24gbGVuZ3RoLCB0byBjaGVjayBpZiB3ZSdyZSBwZXJmb3JtaW5nXG4gICAgLy8gYSBzZWxlY3Rpb24gb3BlcmF0aW9uXG4gICAgdGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aCA9IHRoaXMuX2dldFNlbGVjdGlvbkxlbmd0aCgpO1xuXG4gICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiB0aGVyZSBhcmUgbm8gem9uZXMgYWN0aXZlXG4gICAgaWYgKCF0aGlzLl9hcmVab25lc0FjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSB6b25lLCBwcmV2ZW50IGV2ZW50IHByb3BhZ2F0aW9uIGlmIGZvdW5kIHRvIHByZXZlbnQgb3RoZXJcbiAgICAvLyBjb21wb25lbnRzIGZyb20gaGFuZGxpbmcgdGhlIG1vdXNlIGV2ZW50LlxuICAgIGNvbnN0IHpvbmUgPSB0aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7XG4gICAgaWYgKHpvbmUpIHtcbiAgICAgIGlmICh6b25lLndpbGxMaW5rQWN0aXZhdGUoZSkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTW91c2VMZWF2ZShlOiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gRmlyZSB0aGUgaG92ZXIgZW5kIGNhbGxiYWNrIGFuZCBjYW5jZWwgYW55IGV4aXN0aW5nIHRpbWVyIGlmIHRoZSBtb3VzZVxuICAgIC8vIGxlYXZlcyB0aGUgdGVybWluYWwgZWxlbWVudFxuICAgIGlmICh0aGlzLl9jdXJyZW50Wm9uZSkge1xuICAgICAgdGhpcy5fY3VycmVudFpvbmUubGVhdmVDYWxsYmFjaygpO1xuICAgICAgdGhpcy5fY3VycmVudFpvbmUgPSB1bmRlZmluZWQ7XG4gICAgICBpZiAodGhpcy5fdG9vbHRpcFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3Rvb2x0aXBUaW1lb3V0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbkNsaWNrKGU6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBGaW5kIHRoZSBhY3RpdmUgem9uZSBhbmQgY2xpY2sgaXQgaWYgZm91bmQgYW5kIG5vIHNlbGVjdGlvbiB3YXNcbiAgICAvLyBiZWluZyBwZXJmb3JtZWRcbiAgICBjb25zdCB6b25lID0gdGhpcy5fZmluZFpvbmVFdmVudEF0KGUpO1xuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3Rpb25MZW5ndGggPSB0aGlzLl9nZXRTZWxlY3Rpb25MZW5ndGgoKTtcblxuICAgIGlmICh6b25lICYmIGN1cnJlbnRTZWxlY3Rpb25MZW5ndGggPT09IHRoaXMuX2luaXRpYWxTZWxlY3Rpb25MZW5ndGgpIHtcbiAgICAgIHpvbmUuY2xpY2tDYWxsYmFjayhlKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0U2VsZWN0aW9uTGVuZ3RoKCk6IG51bWJlciB7XG4gICAgY29uc3Qgc2VsZWN0aW9uVGV4dCA9IHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uVGV4dDtcbiAgICByZXR1cm4gc2VsZWN0aW9uVGV4dCA/IHNlbGVjdGlvblRleHQubGVuZ3RoIDogMDtcbiAgfVxuXG4gIHByaXZhdGUgX2ZpbmRab25lRXZlbnRBdChlOiBNb3VzZUV2ZW50KTogSU1vdXNlWm9uZSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fbW91c2VTZXJ2aWNlLmdldENvb3JkcyhlLCB0aGlzLl9zY3JlZW5FbGVtZW50LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gICAgaWYgKCFjb29yZHMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHggPSBjb29yZHNbMF07XG4gICAgY29uc3QgeSA9IGNvb3Jkc1sxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3pvbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB6b25lID0gdGhpcy5fem9uZXNbaV07XG4gICAgICBpZiAoem9uZS55MSA9PT0gem9uZS55Mikge1xuICAgICAgICAvLyBTaW5nbGUgbGluZSBsaW5rXG4gICAgICAgIGlmICh5ID09PSB6b25lLnkxICYmIHggPj0gem9uZS54MSAmJiB4IDwgem9uZS54Mikge1xuICAgICAgICAgIHJldHVybiB6b25lO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBNdWx0aS1saW5lIGxpbmtcbiAgICAgICAgaWYgKCh5ID09PSB6b25lLnkxICYmIHggPj0gem9uZS54MSkgfHxcbiAgICAgICAgICAgICh5ID09PSB6b25lLnkyICYmIHggPCB6b25lLngyKSB8fFxuICAgICAgICAgICAgKHkgPiB6b25lLnkxICYmIHkgPCB6b25lLnkyKSkge1xuICAgICAgICAgIHJldHVybiB6b25lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIERlYm91bmNlcyBjYWxscyB0byByZW5kZXIgdGVybWluYWwgcm93cyB1c2luZyBhbmltYXRpb24gZnJhbWVzLlxuICovXG5leHBvcnQgY2xhc3MgUmVuZGVyRGVib3VuY2VyIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcml2YXRlIF9yb3dTdGFydDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yb3dFbmQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcm93Q291bnQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfYW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9yZW5kZXJDYWxsYmFjazogKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKSA9PiB2b2lkXG4gICkge1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FuaW1hdGlvbkZyYW1lKSB7XG4gICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpO1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlZnJlc2gocm93U3RhcnQ6IG51bWJlciwgcm93RW5kOiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yb3dDb3VudCA9IHJvd0NvdW50O1xuICAgIC8vIEdldCB0aGUgbWluL21heCByb3cgc3RhcnQvZW5kIGZvciB0aGUgYXJnIHZhbHVlc1xuICAgIHJvd1N0YXJ0ID0gcm93U3RhcnQgIT09IHVuZGVmaW5lZCA/IHJvd1N0YXJ0IDogMDtcbiAgICByb3dFbmQgPSByb3dFbmQgIT09IHVuZGVmaW5lZCA/IHJvd0VuZCA6IHRoaXMuX3Jvd0NvdW50IC0gMTtcbiAgICAvLyBTZXQgdGhlIHByb3BlcnRpZXMgdG8gdGhlIHVwZGF0ZWQgdmFsdWVzXG4gICAgdGhpcy5fcm93U3RhcnQgPSB0aGlzLl9yb3dTdGFydCAhPT0gdW5kZWZpbmVkID8gTWF0aC5taW4odGhpcy5fcm93U3RhcnQsIHJvd1N0YXJ0KSA6IHJvd1N0YXJ0O1xuICAgIHRoaXMuX3Jvd0VuZCA9IHRoaXMuX3Jvd0VuZCAhPT0gdW5kZWZpbmVkID8gTWF0aC5tYXgodGhpcy5fcm93RW5kLCByb3dFbmQpIDogcm93RW5kO1xuXG4gICAgaWYgKHRoaXMuX2FuaW1hdGlvbkZyYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuX2lubmVyUmVmcmVzaCgpKTtcbiAgfVxuXG4gIHByaXZhdGUgX2lubmVyUmVmcmVzaCgpOiB2b2lkIHtcbiAgICAvLyBNYWtlIHN1cmUgdmFsdWVzIGFyZSBzZXRcbiAgICBpZiAodGhpcy5fcm93U3RhcnQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9yb3dFbmQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9yb3dDb3VudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xhbXAgdmFsdWVzXG4gICAgdGhpcy5fcm93U3RhcnQgPSBNYXRoLm1heCh0aGlzLl9yb3dTdGFydCwgMCk7XG4gICAgdGhpcy5fcm93RW5kID0gTWF0aC5taW4odGhpcy5fcm93RW5kLCB0aGlzLl9yb3dDb3VudCAtIDEpO1xuXG4gICAgLy8gUnVuIHJlbmRlciBjYWxsYmFja1xuICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKHRoaXMuX3Jvd1N0YXJ0LCB0aGlzLl9yb3dFbmQpO1xuXG4gICAgLy8gUmVzZXQgZGVib3VuY2VyXG4gICAgdGhpcy5fcm93U3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcm93RW5kID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcblxuZXhwb3J0IHR5cGUgU2NyZWVuRHByTGlzdGVuZXIgPSAobmV3RGV2aWNlUGl4ZWxSYXRpbz86IG51bWJlciwgb2xkRGV2aWNlUGl4ZWxSYXRpbz86IG51bWJlcikgPT4gdm9pZDtcblxuLyoqXG4gKiBUaGUgc2NyZWVuIGRldmljZSBwaXhlbCByYXRpbyBtb25pdG9yIGFsbG93cyBsaXN0ZW5pbmcgZm9yIHdoZW4gdGhlXG4gKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB2YWx1ZSBjaGFuZ2VzLiBUaGlzIGlzIGRvbmUgbm90IHdpdGggcG9sbGluZyBidXQgd2l0aFxuICogdGhlIHVzZSBvZiB3aW5kb3cubWF0Y2hNZWRpYSB0byB3YXRjaCBtZWRpYSBxdWVyaWVzLiBXaGVuIHRoZSBldmVudCBmaXJlcyxcbiAqIHRoZSBsaXN0ZW5lciB3aWxsIGJlIHJlYXR0YWNoZWQgdXNpbmcgYSBkaWZmZXJlbnQgbWVkaWEgcXVlcnkgdG8gZW5zdXJlIHRoYXRcbiAqIGFueSBmdXJ0aGVyIGNoYW5nZXMgd2lsbCByZWdpc3Rlci5cbiAqXG4gKiBUaGUgbGlzdGVuZXIgc2hvdWxkIGZpcmUgb24gYm90aCB3aW5kb3cgem9vbSBjaGFuZ2VzIGFuZCBzd2l0Y2hpbmcgdG8gYVxuICogbW9uaXRvciB3aXRoIGEgZGlmZmVyZW50IERQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNjcmVlbkRwck1vbml0b3IgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfY3VycmVudERldmljZVBpeGVsUmF0aW86IG51bWJlciA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICBwcml2YXRlIF9vdXRlckxpc3RlbmVyOiAoKHRoaXM6IE1lZGlhUXVlcnlMaXN0LCBldjogTWVkaWFRdWVyeUxpc3RFdmVudCkgPT4gYW55KSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbGlzdGVuZXI6IFNjcmVlbkRwckxpc3RlbmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3Q6IE1lZGlhUXVlcnlMaXN0IHwgdW5kZWZpbmVkO1xuXG4gIHB1YmxpYyBzZXRMaXN0ZW5lcihsaXN0ZW5lcjogU2NyZWVuRHByTGlzdGVuZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuY2xlYXJMaXN0ZW5lcigpO1xuICAgIH1cbiAgICB0aGlzLl9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIHRoaXMuX291dGVyTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuX2xpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2xpc3RlbmVyKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCB0aGlzLl9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICB0aGlzLl91cGRhdGVEcHIoKTtcbiAgICB9O1xuICAgIHRoaXMuX3VwZGF0ZURwcigpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuY2xlYXJMaXN0ZW5lcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlRHByKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0IHx8ICF0aGlzLl9vdXRlckxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgbGlzdGVuZXJzIGZvciBvbGQgRFBSXG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LnJlbW92ZUxpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpO1xuXG4gICAgLy8gQWRkIGxpc3RlbmVycyBmb3IgbmV3IERQUlxuICAgIHRoaXMuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0ID0gd2luZG93Lm1hdGNoTWVkaWEoYHNjcmVlbiBhbmQgKHJlc29sdXRpb246ICR7d2luZG93LmRldmljZVBpeGVsUmF0aW99ZHBweClgKTtcbiAgICB0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QuYWRkTGlzdGVuZXIodGhpcy5fb3V0ZXJMaXN0ZW5lcik7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCB8fCAhdGhpcy5fbGlzdGVuZXIgfHwgIXRoaXMuX291dGVyTGlzdGVuZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LnJlbW92ZUxpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpO1xuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9saXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vdXRlckxpc3RlbmVyID0gdW5kZWZpbmVkO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IGFkZERpc3Bvc2FibGVEb21MaXN0ZW5lciB9IGZyb20gJ2Jyb3dzZXIvTGlmZWN5Y2xlJztcbmltcG9ydCB7IElDb2xvclNldCwgSVZpZXdwb3J0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ2hhclNpemVTZXJ2aWNlLCBJUmVuZGVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5jb25zdCBGQUxMQkFDS19TQ1JPTExfQkFSX1dJRFRIID0gMTU7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgdmlld3BvcnQgb2YgYSB0ZXJtaW5hbCwgdGhlIHZpc2libGUgYXJlYSB3aXRoaW4gdGhlIGxhcmdlciBidWZmZXIgb2Ygb3V0cHV0LlxuICogTG9naWMgZm9yIHRoZSB2aXJ0dWFsIHNjcm9sbCBiYXIgaXMgaW5jbHVkZWQgaW4gdGhpcyBvYmplY3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWV3cG9ydCBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJVmlld3BvcnQge1xuICBwdWJsaWMgc2Nyb2xsQmFyV2lkdGg6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3dIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFRvdWNoWTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbGFzdFNjcm9sbFRvcDogbnVtYmVyID0gMDtcblxuICAvLyBTdG9yZXMgYSBwYXJ0aWFsIGxpbmUgYW1vdW50IHdoZW4gc2Nyb2xsaW5nLCB0aGlzIGlzIHVzZWQgdG8ga2VlcCB0cmFjayBvZiBob3cgbXVjaCBvZiBhIGxpbmVcbiAgLy8gaXMgc2Nyb2xsZWQgc28gd2UgY2FuIFwic2Nyb2xsXCIgb3ZlciBwYXJ0aWFsIGxpbmVzIGFuZCBmZWVsIG5hdHVyYWwgb24gdG91Y2hwYWRzLiBUaGlzIGlzIGFcbiAgLy8gcXVpY2sgZml4IGFuZCBjb3VsZCBoYXZlIGEgbW9yZSByb2J1c3Qgc29sdXRpb24gaW4gcGxhY2UgdGhhdCByZXNldCB0aGUgdmFsdWUgd2hlbiBuZWVkZWQuXG4gIHByaXZhdGUgX3doZWVsUGFydGlhbFNjcm9sbDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9yZWZyZXNoQW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JvbGxMaW5lczogKGFtb3VudDogbnVtYmVyLCBzdXBwcmVzc0V2ZW50OiBib29sZWFuKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3ZpZXdwb3J0RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2Nyb2xsQXJlYTogSFRNTEVsZW1lbnQsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZSxcbiAgICBASVJlbmRlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8vIE1lYXN1cmUgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGxiYXIuIElmIGl0IGlzIDAgd2UgY2FuIGFzc3VtZSBpdCdzIGFuIE9TWCBvdmVybGF5IHNjcm9sbGJhci5cbiAgICAvLyBVbmZvcnR1bmF0ZWx5IHRoZSBvdmVybGF5IHNjcm9sbGJhciB3b3VsZCBiZSBoaWRkZW4gdW5kZXJuZWF0aCB0aGUgc2NyZWVuIGVsZW1lbnQgaW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZXJlZm9yZSB3ZSBhY2NvdW50IGZvciBhIHN0YW5kYXJkIGFtb3VudCB0byBtYWtlIGl0IHZpc2libGVcbiAgICB0aGlzLnNjcm9sbEJhcldpZHRoID0gKHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5vZmZzZXRXaWR0aCAtIHRoaXMuX3Njcm9sbEFyZWEub2Zmc2V0V2lkdGgpIHx8IEZBTExCQUNLX1NDUk9MTF9CQVJfV0lEVEg7XG4gICAgdGhpcy5yZWdpc3RlcihhZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIodGhpcy5fdmlld3BvcnRFbGVtZW50LCAnc2Nyb2xsJywgdGhpcy5fb25TY3JvbGwuYmluZCh0aGlzKSkpO1xuXG4gICAgLy8gUGVyZm9ybSB0aGlzIGFzeW5jIHRvIGVuc3VyZSB0aGUgSUNoYXJTaXplU2VydmljZSBpcyByZWFkeS5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc3luY1Njcm9sbEFyZWEoKSwgMCk7XG4gIH1cblxuICBwdWJsaWMgb25UaGVtZUNoYW5nZShjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaGVzIHJvdyBoZWlnaHQsIHNldHRpbmcgbGluZS1oZWlnaHQsIHZpZXdwb3J0IGhlaWdodCBhbmQgc2Nyb2xsIGFyZWEgaGVpZ2h0IGlmXG4gICAqIG5lY2Vzc2FyeS5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuX2lubmVyUmVmcmVzaCgpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pbm5lclJlZnJlc2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2NoYXJTaXplU2VydmljZS5oZWlnaHQgPiAwKSB7XG4gICAgICB0aGlzLl9jdXJyZW50Um93SGVpZ2h0ID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgIHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0ID0gdGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgIGNvbnN0IG5ld0J1ZmZlckhlaWdodCA9IE1hdGgucm91bmQodGhpcy5fY3VycmVudFJvd0hlaWdodCAqIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aCkgKyAodGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQgLSB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0KTtcbiAgICAgIGlmICh0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQgIT09IG5ld0J1ZmZlckhlaWdodCkge1xuICAgICAgICB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQgPSBuZXdCdWZmZXJIZWlnaHQ7XG4gICAgICAgIHRoaXMuX3Njcm9sbEFyZWEuc3R5bGUuaGVpZ2h0ID0gdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0ICsgJ3B4JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTeW5jIHNjcm9sbFRvcFxuICAgIGNvbnN0IHNjcm9sbFRvcCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwICogdGhpcy5fY3VycmVudFJvd0hlaWdodDtcbiAgICBpZiAodGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCAhPT0gc2Nyb2xsVG9wKSB7XG4gICAgICAvLyBJZ25vcmUgdGhlIG5leHQgc2Nyb2xsIGV2ZW50IHdoaWNoIHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IHNldHRpbmcgdGhlIHNjcm9sbFRvcCBhcyB3ZSBkbyBub3RcbiAgICAgIC8vIHdhbnQgdGhpcyBldmVudCB0byBzY3JvbGwgdGhlIHRlcm1pbmFsXG4gICAgICB0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQgPSB0cnVlO1xuICAgICAgdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgZGltZW5zaW9ucyBhbmQgc3luY2hyb25pemVzIHRoZSBzY3JvbGwgYXJlYSBpZiBuZWNlc3NhcnkuXG4gICAqL1xuICBwdWJsaWMgc3luY1Njcm9sbEFyZWEoKTogdm9pZCB7XG4gICAgLy8gSWYgYnVmZmVyIGhlaWdodCBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aCAhPT0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGggPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGg7XG4gICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdmlld3BvcnQgaGVpZ2h0IGNoYW5nZWRcbiAgICBpZiAodGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQgIT09IHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQpIHtcbiAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgYnVmZmVyIHBvc2l0aW9uIGRvZXNuJ3QgbWF0Y2ggbGFzdCBzY3JvbGwgdG9wXG4gICAgY29uc3QgbmV3U2Nyb2xsVG9wID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AgKiB0aGlzLl9jdXJyZW50Um93SGVpZ2h0O1xuICAgIGlmICh0aGlzLl9sYXN0U2Nyb2xsVG9wICE9PSBuZXdTY3JvbGxUb3ApIHtcbiAgICAgIHRoaXMuX3JlZnJlc2goKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiBlbGVtZW50J3Mgc2Nyb2xsIHRvcCBjaGFuZ2VkLCB0aGlzIGNhbiBoYXBwZW4gd2hlbiBoaWRpbmcgdGhlIGVsZW1lbnRcbiAgICBpZiAodGhpcy5fbGFzdFNjcm9sbFRvcCAhPT0gdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCkge1xuICAgICAgdGhpcy5fcmVmcmVzaCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHJvdyBoZWlnaHQgY2hhbmdlZFxuICAgIGlmICh0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICE9PSB0aGlzLl9jdXJyZW50Um93SGVpZ2h0KSB7XG4gICAgICB0aGlzLl9yZWZyZXNoKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgc2Nyb2xsIGV2ZW50cyBvbiB0aGUgdmlld3BvcnQsIGNhbGN1bGF0aW5nIHRoZSBuZXcgdmlld3BvcnQgYW5kIHJlcXVlc3RpbmcgdGhlXG4gICAqIHRlcm1pbmFsIHRvIHNjcm9sbCB0byBpdC5cbiAgICogQHBhcmFtIGV2IFRoZSBzY3JvbGwgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vblNjcm9sbChldjogRXZlbnQpOiB2b2lkIHtcbiAgICAvLyBSZWNvcmQgY3VycmVudCBzY3JvbGwgdG9wIHBvc2l0aW9uXG4gICAgdGhpcy5fbGFzdFNjcm9sbFRvcCA9IHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3A7XG5cbiAgICAvLyBEb24ndCBhdHRlbXB0IHRvIHNjcm9sbCBpZiB0aGUgZWxlbWVudCBpcyBub3QgdmlzaWJsZSwgb3RoZXJ3aXNlIHNjcm9sbFRvcCB3aWxsIGJlIGNvcnJ1cHRcbiAgICAvLyB3aGljaCBjYXVzZXMgdGhlIHRlcm1pbmFsIHRvIHNjcm9sbCB0aGUgYnVmZmVyIHRvIHRoZSB0b3BcbiAgICBpZiAoIXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5vZmZzZXRQYXJlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIGl0IHdhcyBmbGFnZ2VkIHRvIGlnbm9yZSAod2hlbiB0aGUgc291cmNlIG9mIHRoZSBldmVudCBpcyBmcm9tIFZpZXdwb3J0KVxuICAgIGlmICh0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQpIHtcbiAgICAgIHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld1JvdyA9IE1hdGgucm91bmQodGhpcy5fbGFzdFNjcm9sbFRvcCAvIHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQpO1xuICAgIGNvbnN0IGRpZmYgPSBuZXdSb3cgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICB0aGlzLl9zY3JvbGxMaW5lcyhkaWZmLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGJ1YmJsaW5nIG9mIHNjcm9sbCBldmVudCBpbiBjYXNlIHRoZSB2aWV3cG9ydCBoYXMgcmVhY2hlZCB0b3Agb3IgYm90dG9tXG4gICAqIEBwYXJhbSBldiBUaGUgc2Nyb2xsIGV2ZW50LlxuICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgc2Nyb2xsZWRcbiAgICovXG4gIHByaXZhdGUgX2J1YmJsZVNjcm9sbChldjogRXZlbnQsIGFtb3VudDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc2Nyb2xsUG9zRnJvbVRvcCA9IHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AgKyB0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodDtcbiAgICBpZiAoKGFtb3VudCA8IDAgJiYgdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCAhPT0gMCkgfHxcbiAgICAgICAgKGFtb3VudCA+IDAgJiYgIHNjcm9sbFBvc0Zyb21Ub3AgPCB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQpKSB7XG4gICAgICBpZiAoZXYuY2FuY2VsYWJsZSkge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIG1vdXNlIHdoZWVsIGV2ZW50cyBieSBhZGp1c3RpbmcgdGhlIHZpZXdwb3J0J3Mgc2Nyb2xsVG9wIGFuZCBkZWxlZ2F0aW5nIHRoZSBhY3R1YWxcbiAgICogc2Nyb2xsaW5nIHRvIGBvblNjcm9sbGAsIHRoaXMgZXZlbnQgbmVlZHMgdG8gYmUgYXR0YWNoZWQgbWFudWFsbHkgYnkgdGhlIGNvbnN1bWVyIG9mXG4gICAqIGBWaWV3cG9ydGAuXG4gICAqIEBwYXJhbSBldiBUaGUgbW91c2Ugd2hlZWwgZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgb25XaGVlbChldjogV2hlZWxFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFtb3VudCA9IHRoaXMuX2dldFBpeGVsc1Njcm9sbGVkKGV2KTtcbiAgICBpZiAoYW1vdW50ID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AgKz0gYW1vdW50O1xuICAgIHJldHVybiB0aGlzLl9idWJibGVTY3JvbGwoZXYsIGFtb3VudCk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRQaXhlbHNTY3JvbGxlZChldjogV2hlZWxFdmVudCk6IG51bWJlciB7XG4gICAgLy8gRG8gbm90aGluZyBpZiBpdCdzIG5vdCBhIHZlcnRpY2FsIHNjcm9sbCBldmVudFxuICAgIGlmIChldi5kZWx0YVkgPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMXG4gICAgbGV0IGFtb3VudCA9IGV2LmRlbHRhWTtcbiAgICBpZiAoZXYuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICBhbW91bnQgKj0gdGhpcy5fY3VycmVudFJvd0hlaWdodDtcbiAgICB9IGVsc2UgaWYgKGV2LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSkge1xuICAgICAgYW1vdW50ICo9IHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQgKiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgfVxuICAgIHJldHVybiBhbW91bnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbnVtYmVyIG9mIHBpeGVscyBzY3JvbGxlZCBieSB0aGUgbW91c2UgZXZlbnQgdGFraW5nIGludG8gYWNjb3VudCB3aGF0IHR5cGUgb2YgZGVsdGFcbiAgICogaXMgYmVpbmcgdXNlZC5cbiAgICogQHBhcmFtIGV2IFRoZSBtb3VzZSB3aGVlbCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBnZXRMaW5lc1Njcm9sbGVkKGV2OiBXaGVlbEV2ZW50KTogbnVtYmVyIHtcbiAgICAvLyBEbyBub3RoaW5nIGlmIGl0J3Mgbm90IGEgdmVydGljYWwgc2Nyb2xsIGV2ZW50XG4gICAgaWYgKGV2LmRlbHRhWSA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gV2hlZWxFdmVudC5ET01fREVMVEFfTElORVxuICAgIGxldCBhbW91bnQgPSBldi5kZWx0YVk7XG4gICAgaWYgKGV2LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgIGFtb3VudCAvPSB0aGlzLl9jdXJyZW50Um93SGVpZ2h0ICsgMC4wOyAvLyBQcmV2ZW50IGludGVnZXIgZGl2aXNpb25cbiAgICAgIHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCArPSBhbW91bnQ7XG4gICAgICBhbW91bnQgPSBNYXRoLmZsb29yKE1hdGguYWJzKHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCkpICogKHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCA+IDAgPyAxIDogLTEpO1xuICAgICAgdGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsICU9IDE7XG4gICAgfSBlbHNlIGlmIChldi5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BBR0UpIHtcbiAgICAgIGFtb3VudCAqPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgfVxuICAgIHJldHVybiBhbW91bnQ7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgdG91Y2hzdGFydCBldmVudCwgcmVjb3JkaW5nIHRoZSB0b3VjaCBvY2N1cnJlZC5cbiAgICogQHBhcmFtIGV2IFRoZSB0b3VjaCBldmVudC5cbiAgICovXG4gIHB1YmxpYyBvblRvdWNoU3RhcnQoZXY6IFRvdWNoRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9sYXN0VG91Y2hZID0gZXYudG91Y2hlc1swXS5wYWdlWTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB0b3VjaG1vdmUgZXZlbnQsIHNjcm9sbGluZyB0aGUgdmlld3BvcnQgaWYgdGhlIHBvc2l0aW9uIHNoaWZ0ZWQuXG4gICAqIEBwYXJhbSBldiBUaGUgdG91Y2ggZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgb25Ub3VjaE1vdmUoZXY6IFRvdWNoRXZlbnQpOiBib29sZWFuIHtcbiAgICBjb25zdCBkZWx0YVkgPSB0aGlzLl9sYXN0VG91Y2hZIC0gZXYudG91Y2hlc1swXS5wYWdlWTtcbiAgICB0aGlzLl9sYXN0VG91Y2hZID0gZXYudG91Y2hlc1swXS5wYWdlWTtcbiAgICBpZiAoZGVsdGFZID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AgKz0gZGVsdGFZO1xuICAgIHJldHVybiB0aGlzLl9idWJibGVTY3JvbGwoZXYsIGRlbHRhWSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElDb3JlU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuaW50ZXJmYWNlIElQb3NpdGlvbiB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIGVuZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgZm9yIGhhbmRsaW5nIGNvbXBvc2l0aW9uc3RhcnQsIGNvbXBvc2l0aW9udXBkYXRlIGFuZCBjb21wb3NpdGlvbmVuZFxuICogZXZlbnRzLCBkaXNwbGF5aW5nIHRoZSBpbi1wcm9ncmVzcyBjb21wb3NpdGlvbiB0byB0aGUgVUkgYW5kIGZvcndhcmRpbmcgdGhlIGZpbmFsIGNvbXBvc2l0aW9uXG4gKiB0byB0aGUgaGFuZGxlci5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvc2l0aW9uSGVscGVyIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaW5wdXQgY29tcG9zaXRpb24gaXMgY3VycmVudGx5IGhhcHBlbmluZywgZWcuIHZpYSBhIG1vYmlsZSBrZXlib2FyZCwgc3BlZWNoIGlucHV0IG9yXG4gICAqIElNRS4gVGhpcyB2YXJpYWJsZSBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNvbXBvc2l0aW9uVGV4dCBzaG91bGQgYmUgZGlzcGxheWVkIG9uIHRoZSBVSS5cbiAgICovXG4gIHByaXZhdGUgX2lzQ29tcG9zaW5nOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpb24gd2l0aGluIHRoZSBpbnB1dCB0ZXh0YXJlYSdzIHZhbHVlIG9mIHRoZSBjdXJyZW50IGNvbXBvc2l0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfY29tcG9zaXRpb25Qb3NpdGlvbjogSVBvc2l0aW9uO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIGEgY29tcG9zaXRpb24gaXMgaW4gdGhlIHByb2Nlc3Mgb2YgYmVpbmcgc2VudCwgc2V0dGluZyB0aGlzIHRvIGZhbHNlIHdpbGwgY2FuY2VsIGFueVxuICAgKiBpbi1wcm9ncmVzcyBjb21wb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX2lzU2VuZGluZ0NvbXBvc2l0aW9uOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3RleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvbXBvc2l0aW9uVmlldzogSFRNTEVsZW1lbnQsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBASUNoYXJTaXplU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX2lzQ29tcG9zaW5nID0gZmFsc2U7XG4gICAgdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24gPSBmYWxzZTtcbiAgICB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uID0geyBzdGFydDogMCwgZW5kOiAwIH07XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY29tcG9zaXRpb25zdGFydCBldmVudCwgYWN0aXZhdGluZyB0aGUgY29tcG9zaXRpb24gdmlldy5cbiAgICovXG4gIHB1YmxpYyBjb21wb3NpdGlvbnN0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuX2lzQ29tcG9zaW5nID0gdHJ1ZTtcbiAgICB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0ID0gdGhpcy5fdGV4dGFyZWEudmFsdWUubGVuZ3RoO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy50ZXh0Q29udGVudCA9ICcnO1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBjb21wb3NpdGlvbnVwZGF0ZSBldmVudCwgdXBkYXRpbmcgdGhlIGNvbXBvc2l0aW9uIHZpZXcuXG4gICAqIEBwYXJhbSBldiBUaGUgZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgY29tcG9zaXRpb251cGRhdGUoZXY6IENvbXBvc2l0aW9uRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQgPSBldi5kYXRhO1xuICAgIHRoaXMudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cygpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5sZW5ndGg7XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY29tcG9zaXRpb25lbmQgZXZlbnQsIGhpZGluZyB0aGUgY29tcG9zaXRpb24gdmlldyBhbmQgc2VuZGluZyB0aGUgY29tcG9zaXRpb24gdG9cbiAgICogdGhlIGhhbmRsZXIuXG4gICAqL1xuICBwdWJsaWMgY29tcG9zaXRpb25lbmQoKTogdm9pZCB7XG4gICAgdGhpcy5fZmluYWxpemVDb21wb3NpdGlvbih0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBrZXlkb3duIGV2ZW50LCByb3V0aW5nIGFueSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBDb21wb3NpdGlvbkhlbHBlciBmdW5jdGlvbnMuXG4gICAqIEBwYXJhbSBldiBUaGUga2V5ZG93biBldmVudC5cbiAgICogQHJldHVybiBXaGV0aGVyIHRoZSBUZXJtaW5hbCBzaG91bGQgY29udGludWUgcHJvY2Vzc2luZyB0aGUga2V5ZG93biBldmVudC5cbiAgICovXG4gIHB1YmxpYyBrZXlkb3duKGV2OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2lzQ29tcG9zaW5nIHx8IHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKSB7XG4gICAgICBpZiAoZXYua2V5Q29kZSA9PT0gMjI5KSB7XG4gICAgICAgIC8vIENvbnRpbnVlIGNvbXBvc2luZyBpZiB0aGUga2V5Q29kZSBpcyB0aGUgXCJjb21wb3NpdGlvbiBjaGFyYWN0ZXJcIlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDE2IHx8IGV2LmtleUNvZGUgPT09IDE3IHx8IGV2LmtleUNvZGUgPT09IDE4KSB7XG4gICAgICAgIC8vIENvbnRpbnVlIGNvbXBvc2luZyBpZiB0aGUga2V5Q29kZSBpcyBhIG1vZGlmaWVyIGtleVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBGaW5pc2ggY29tcG9zaXRpb24gaW1tZWRpYXRlbHkuIFRoaXMgaXMgbWFpbmx5IGhlcmUgZm9yIHRoZSBjYXNlIHdoZXJlIGVudGVyIGlzXG4gICAgICAvLyBwcmVzc2VkIGFuZCB0aGUgaGFuZGxlciBuZWVkcyB0byBiZSB0cmlnZ2VyZWQgYmVmb3JlIHRoZSBjb21tYW5kIGlzIGV4ZWN1dGVkLlxuICAgICAgdGhpcy5fZmluYWxpemVDb21wb3NpdGlvbihmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKGV2LmtleUNvZGUgPT09IDIyOSkge1xuICAgICAgLy8gSWYgdGhlIFwiY29tcG9zaXRpb24gY2hhcmFjdGVyXCIgaXMgdXNlZCBidXQgZ2V0cyB0byB0aGlzIHBvaW50IGl0IG1lYW5zIGEgbm9uLWNvbXBvc2l0aW9uXG4gICAgICAvLyBjaGFyYWN0ZXIgKGVnLiBudW1iZXJzIGFuZCBwdW5jdHVhdGlvbikgd2FzIHByZXNzZWQgd2hlbiB0aGUgSU1FIHdhcyBhY3RpdmUuXG4gICAgICB0aGlzLl9oYW5kbGVBbnlUZXh0YXJlYUNoYW5nZXMoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5hbGl6ZXMgdGhlIGNvbXBvc2l0aW9uLCByZXN1bWluZyByZWd1bGFyIGlucHV0IGFjdGlvbnMuIFRoaXMgaXMgY2FsbGVkIHdoZW4gYSBjb21wb3NpdGlvblxuICAgKiBpcyBlbmRpbmcuXG4gICAqIEBwYXJhbSB3YWl0Rm9yUHJvcGFnYXRpb24gV2hldGhlciB0byB3YWl0IGZvciBldmVudHMgdG8gcHJvcGFnYXRlIGJlZm9yZSBzZW5kaW5nXG4gICAqICAgdGhlIGlucHV0LiBUaGlzIHNob3VsZCBiZSBmYWxzZSBpZiBhIG5vbi1jb21wb3NpdGlvbiBrZXlzdHJva2UgaXMgZW50ZXJlZCBiZWZvcmUgdGhlXG4gICAqICAgY29tcG9zaXRpb25lbmQgZXZlbnQgaXMgdHJpZ2dlcmVkLCBzdWNoIGFzIGVudGVyLCBzbyB0aGF0IHRoZSBjb21wb3NpdGlvbiBpcyBzZW50IGJlZm9yZVxuICAgKiAgIHRoZSBjb21tYW5kIGlzIGV4ZWN1dGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfZmluYWxpemVDb21wb3NpdGlvbih3YWl0Rm9yUHJvcGFnYXRpb246IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgdGhpcy5faXNDb21wb3NpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9jbGVhclRleHRhcmVhUG9zaXRpb24oKTtcblxuICAgIGlmICghd2FpdEZvclByb3BhZ2F0aW9uKSB7XG4gICAgICAvLyBDYW5jZWwgYW55IGRlbGF5ZWQgY29tcG9zaXRpb24gc2VuZCByZXF1ZXN0cyBhbmQgc2VuZCB0aGUgaW5wdXQgaW1tZWRpYXRlbHkuXG4gICAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcodGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCwgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmQpO1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpbnB1dCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1ha2UgYSBkZWVwIGNvcHkgb2YgdGhlIGNvbXBvc2l0aW9uIHBvc2l0aW9uIGhlcmUgYXMgYSBuZXcgY29tcG9zaXRpb25zdGFydCBldmVudCBtYXlcbiAgICAgIC8vIGZpcmUgYmVmb3JlIHRoZSBzZXRUaW1lb3V0IGV4ZWN1dGVzLlxuICAgICAgY29uc3QgY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24gPSB7XG4gICAgICAgIHN0YXJ0OiB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LFxuICAgICAgICBlbmQ6IHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kXG4gICAgICB9O1xuXG4gICAgICAvLyBTaW5jZSBjb21wb3NpdGlvbiogZXZlbnRzIGhhcHBlbiBiZWZvcmUgdGhlIGNoYW5nZXMgdGFrZSBwbGFjZSBpbiB0aGUgdGV4dGFyZWEgb24gbW9zdFxuICAgICAgLy8gYnJvd3NlcnMsIHVzZSBhIHNldFRpbWVvdXQgd2l0aCAwbXMgdGltZSB0byBhbGxvdyB0aGUgbmF0aXZlIGNvbXBvc2l0aW9uZW5kIGV2ZW50IHRvXG4gICAgICAvLyBjb21wbGV0ZS4gVGhpcyBlbnN1cmVzIHRoZSBjb3JyZWN0IGNoYXJhY3RlciBpcyByZXRyaWV2ZWQuXG4gICAgICAvLyBUaGlzIHNvbHV0aW9uIHdhcyB1c2VkIGJlY2F1c2U6XG4gICAgICAvLyAtIFRoZSBjb21wb3NpdGlvbmVuZCBldmVudCdzIGRhdGEgcHJvcGVydHkgaXMgdW5yZWxpYWJsZSwgYXQgbGVhc3Qgb24gQ2hyb21pdW1cbiAgICAgIC8vIC0gVGhlIGxhc3QgY29tcG9zaXRpb251cGRhdGUgZXZlbnQncyBkYXRhIHByb3BlcnR5IGRvZXMgbm90IGFsd2F5cyBhY2N1cmF0ZWx5IGRlc2NyaWJlXG4gICAgICAvLyAgIHRoZSBjaGFyYWN0ZXIsIGEgY291bnRlciBleGFtcGxlIGJlaW5nIEtvcmVhbiB3aGVyZSBhbiBlbmRpbmcgY29uc29uc2FudCBjYW4gbW92ZSB0b1xuICAgICAgLy8gICB0aGUgZm9sbG93aW5nIGNoYXJhY3RlciBpZiB0aGUgZm9sbG93aW5nIGlucHV0IGlzIGEgdm93ZWwuXG4gICAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgdGhlIGlucHV0IGhhcyBub3QgYWxyZWFkeSBiZWVuIHNlbnRcbiAgICAgICAgaWYgKHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKSB7XG4gICAgICAgICAgdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICBsZXQgaW5wdXQ7XG4gICAgICAgICAgaWYgKHRoaXMuX2lzQ29tcG9zaW5nKSB7XG4gICAgICAgICAgICAvLyBVc2UgdGhlIGVuZCBwb3NpdGlvbiB0byBnZXQgdGhlIHN0cmluZyBpZiBhIG5ldyBjb21wb3NpdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgICAgICAgIGlucHV0ID0gdGhpcy5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnJlbnRDb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LCBjdXJyZW50Q29tcG9zaXRpb25Qb3NpdGlvbi5lbmQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBEb24ndCB1c2UgdGhlIGVuZCBwb3NpdGlvbiBoZXJlIGluIG9yZGVyIHRvIHBpY2sgdXAgYW55IGNoYXJhY3RlcnMgYWZ0ZXIgdGhlXG4gICAgICAgICAgICAvLyBjb21wb3NpdGlvbiBoYXMgZmluaXNoZWQsIGZvciBleGFtcGxlIHdoZW4gdHlwaW5nIGEgbm9uLWNvbXBvc2l0aW9uIGNoYXJhY3RlclxuICAgICAgICAgICAgLy8gKGVnLiAyKSBhZnRlciBhIGNvbXBvc2l0aW9uIGNoYXJhY3Rlci5cbiAgICAgICAgICAgIGlucHV0ID0gdGhpcy5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKGN1cnJlbnRDb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpbnB1dCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBhbnkgY2hhbmdlcyBtYWRlIHRvIHRoZSB0ZXh0YXJlYSBhZnRlciB0aGUgY3VycmVudCBldmVudCBjaGFpbiBpcyBhbGxvd2VkIHRvIGNvbXBsZXRlLlxuICAgKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgd2hlbiBub3QgY3VycmVudGx5IGNvbXBvc2luZyBidXQgYSBrZXlkb3duIGV2ZW50IHdpdGggdGhlIFwiY29tcG9zaXRpb25cbiAgICogY2hhcmFjdGVyXCIgKDIyOSkgaXMgdHJpZ2dlcmVkLCBpbiBvcmRlciB0byBhbGxvdyBub24tY29tcG9zaXRpb24gdGV4dCB0byBiZSBlbnRlcmVkIHdoZW4gYW5cbiAgICogSU1FIGlzIGFjdGl2ZS5cbiAgICovXG4gIHByaXZhdGUgX2hhbmRsZUFueVRleHRhcmVhQ2hhbmdlcygpOiB2b2lkIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX3RleHRhcmVhLnZhbHVlO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8gSWdub3JlIGlmIGEgY29tcG9zaXRpb24gaGFzIHN0YXJ0ZWQgc2luY2UgdGhlIHRpbWVvdXRcbiAgICAgIGlmICghdGhpcy5faXNDb21wb3NpbmcpIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZTtcbiAgICAgICAgY29uc3QgZGlmZiA9IG5ld1ZhbHVlLnJlcGxhY2Uob2xkVmFsdWUsICcnKTtcbiAgICAgICAgaWYgKGRpZmYubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoZGlmZiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQb3NpdGlvbnMgdGhlIGNvbXBvc2l0aW9uIHZpZXcgb24gdG9wIG9mIHRoZSBjdXJzb3IgYW5kIHRoZSB0ZXh0YXJlYSBqdXN0IGJlbG93IGl0IChzbyB0aGVcbiAgICogSU1FIGhlbHBlciBkaWFsb2cgaXMgcG9zaXRpb25lZCBjb3JyZWN0bHkpLlxuICAgKiBAcGFyYW0gZG9udFJlY3Vyc2UgV2hldGhlciB0byB1c2Ugc2V0VGltZW91dCB0byByZWN1cnNpdmVseSB0cmlnZ2VyIGFub3RoZXIgdXBkYXRlLCB0aGlzIGlzXG4gICAqICAgbmVjZXNzYXJ5IGFzIHRoZSBJTUUgZXZlbnRzIGFjcm9zcyBicm93c2VycyBhcmUgbm90IGNvbnNpc3RlbnRseSB0cmlnZ2VyZWQuXG4gICAqL1xuICBwdWJsaWMgdXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cyhkb250UmVjdXJzZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzQ29tcG9zaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmlzQ3Vyc29ySW5WaWV3cG9ydCkge1xuICAgICAgY29uc3QgY2VsbEhlaWdodCA9IE1hdGguY2VpbCh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0ICogdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5saW5lSGVpZ2h0KTtcbiAgICAgIGNvbnN0IGN1cnNvclRvcCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkgKiBjZWxsSGVpZ2h0O1xuICAgICAgY29uc3QgY3Vyc29yTGVmdCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnggKiB0aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGg7XG5cbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5sZWZ0ID0gY3Vyc29yTGVmdCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUudG9wID0gY3Vyc29yVG9wICsgJ3B4JztcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5oZWlnaHQgPSBjZWxsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5saW5lSGVpZ2h0ID0gY2VsbEhlaWdodCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udEZhbWlseSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZm9udEZhbWlseTtcbiAgICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5mb250U2l6ZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZm9udFNpemUgKyAncHgnO1xuICAgICAgLy8gU3luYyB0aGUgdGV4dGFyZWEgdG8gdGhlIGV4YWN0IHBvc2l0aW9uIG9mIHRoZSBjb21wb3NpdGlvbiB2aWV3IHNvIHRoZSBJTUUga25vd3Mgd2hlcmUgdGhlXG4gICAgICAvLyB0ZXh0IGlzLlxuICAgICAgY29uc3QgY29tcG9zaXRpb25WaWV3Qm91bmRzID0gdGhpcy5fY29tcG9zaXRpb25WaWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUubGVmdCA9IGN1cnNvckxlZnQgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUudG9wID0gY3Vyc29yVG9wICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLndpZHRoID0gY29tcG9zaXRpb25WaWV3Qm91bmRzLndpZHRoICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLmhlaWdodCA9IGNvbXBvc2l0aW9uVmlld0JvdW5kcy5oZWlnaHQgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUubGluZUhlaWdodCA9IGNvbXBvc2l0aW9uVmlld0JvdW5kcy5oZWlnaHQgKyAncHgnO1xuICAgIH1cblxuICAgIGlmICghZG9udFJlY3Vyc2UpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKHRydWUpLCAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSB0ZXh0YXJlYSdzIHBvc2l0aW9uIHNvIHRoYXQgdGhlIGN1cnNvciBkb2VzIG5vdCBibGluayBvbiBJRS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgX2NsZWFyVGV4dGFyZWFQb3NpdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl90ZXh0YXJlYS5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUudG9wID0gJyc7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50KGV2ZW50OiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9LCBlbGVtZW50OiBIVE1MRWxlbWVudCk6IFtudW1iZXIsIG51bWJlcl0ge1xuICBjb25zdCByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIFtldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0LCBldmVudC5jbGllbnRZIC0gcmVjdC50b3BdO1xufVxuXG4vKipcbiAqIEdldHMgY29vcmRpbmF0ZXMgd2l0aGluIHRoZSB0ZXJtaW5hbCBmb3IgYSBwYXJ0aWN1bGFyIG1vdXNlIGV2ZW50LiBUaGUgcmVzdWx0XG4gKiBpcyByZXR1cm5lZCBhcyBhbiBhcnJheSBpbiB0aGUgZm9ybSBbeCwgeV0gaW5zdGVhZCBvZiBhbiBvYmplY3QgYXMgaXQncyBhXG4gKiBsaXR0bGUgZmFzdGVyIGFuZCB0aGlzIGZ1bmN0aW9uIGlzIHVzZWQgaW4gc29tZSBsb3cgbGV2ZWwgY29kZS5cbiAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gKiBAcGFyYW0gZWxlbWVudCBUaGUgdGVybWluYWwncyBjb250YWluZXIgZWxlbWVudC5cbiAqIEBwYXJhbSBjb2xDb3VudCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIHRlcm1pbmFsLlxuICogQHBhcmFtIHJvd0NvdW50IFRoZSBudW1iZXIgb2Ygcm93cyBuIHRoZSB0ZXJtaW5hbC5cbiAqIEBwYXJhbSBpc1NlbGVjdGlvbiBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIGZvciB0aGUgc2VsZWN0aW9uIG9yIG5vdC4gVGhpcyB3aWxsXG4gKiBhcHBseSBhbiBvZmZzZXQgdG8gdGhlIHggdmFsdWUgc3VjaCB0aGF0IHRoZSBsZWZ0IGhhbGYgb2YgdGhlIGNlbGwgd2lsbFxuICogc2VsZWN0IHRoYXQgY2VsbCBhbmQgdGhlIHJpZ2h0IGhhbGYgd2lsbCBzZWxlY3QgdGhlIG5leHQgY2VsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3JkcyhldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGhhc1ZhbGlkQ2hhclNpemU6IGJvb2xlYW4sIGFjdHVhbENlbGxXaWR0aDogbnVtYmVyLCBhY3R1YWxDZWxsSGVpZ2h0OiBudW1iZXIsIGlzU2VsZWN0aW9uPzogYm9vbGVhbik6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICAvLyBDb29yZGluYXRlcyBjYW5ub3QgYmUgbWVhc3VyZWQgaWYgdGhlcmUgYXJlIG5vIHZhbGlkXG4gIGlmICghaGFzVmFsaWRDaGFyU2l6ZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBjb25zdCBjb29yZHMgPSBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudChldmVudCwgZWxlbWVudCk7XG4gIGlmICghY29vcmRzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvb3Jkc1swXSA9IE1hdGguY2VpbCgoY29vcmRzWzBdICsgKGlzU2VsZWN0aW9uID8gYWN0dWFsQ2VsbFdpZHRoIC8gMiA6IDApKSAvIGFjdHVhbENlbGxXaWR0aCk7XG4gIGNvb3Jkc1sxXSA9IE1hdGguY2VpbChjb29yZHNbMV0gLyBhY3R1YWxDZWxsSGVpZ2h0KTtcblxuICAvLyBFbnN1cmUgY29vcmRpbmF0ZXMgYXJlIHdpdGhpbiB0aGUgdGVybWluYWwgdmlld3BvcnQuIE5vdGUgdGhhdCBzZWxlY3Rpb25zXG4gIC8vIG5lZWQgYW4gYWRkaXRpb24gcG9pbnQgb2YgcHJlY2lzaW9uIHRvIGNvdmVyIHRoZSBlbmQgcG9pbnQgKGFzIGNoYXJhY3RlcnNcbiAgLy8gY292ZXIgaGFsZiBvZiBvbmUgY2hhciBhbmQgaGFsZiBvZiB0aGUgbmV4dCkuXG4gIGNvb3Jkc1swXSA9IE1hdGgubWluKE1hdGgubWF4KGNvb3Jkc1swXSwgMSksIGNvbENvdW50ICsgKGlzU2VsZWN0aW9uID8gMSA6IDApKTtcbiAgY29vcmRzWzFdID0gTWF0aC5taW4oTWF0aC5tYXgoY29vcmRzWzFdLCAxKSwgcm93Q291bnQpO1xuXG4gIHJldHVybiBjb29yZHM7XG59XG5cbi8qKlxuICogR2V0cyBjb29yZGluYXRlcyB3aXRoaW4gdGhlIHRlcm1pbmFsIGZvciBhIHBhcnRpY3VsYXIgbW91c2UgZXZlbnQsIHdyYXBwaW5nXG4gKiB0aGVtIHRvIHRoZSBib3VuZHMgb2YgdGhlIHRlcm1pbmFsIGFuZCBhZGRpbmcgMzIgdG8gYm90aCB0aGUgeCBhbmQgeSB2YWx1ZXNcbiAqIGFzIGV4cGVjdGVkIGJ5IHh0ZXJtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmF3Qnl0ZUNvb3Jkcyhjb29yZHM6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQpOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0gfCB1bmRlZmluZWQge1xuICBpZiAoIWNvb3Jkcykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvLyB4dGVybSBzZW5kcyByYXcgYnl0ZXMgYW5kIHN0YXJ0cyBhdCAzMiAoU1ApIGZvciBlYWNoLlxuICByZXR1cm4geyB4OiBjb29yZHNbMF0gKyAzMiwgeTogY29vcmRzWzFdICsgMzIgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQzAgfSBmcm9tICdjb21tb24vZGF0YS9Fc2NhcGVTZXF1ZW5jZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5jb25zdCBlbnVtIERpcmVjdGlvbiB7XG4gIFVQID0gJ0EnLFxuICBET1dOID0gJ0InLFxuICBSSUdIVCA9ICdDJyxcbiAgTEVGVCA9ICdEJ1xufVxuXG4vKipcbiAqIENvbmNhdGVuYXRlcyBhbGwgdGhlIGFycm93IHNlcXVlbmNlcyB0b2dldGhlci5cbiAqIFJlc2V0cyB0aGUgc3RhcnRpbmcgcm93IHRvIGFuIHVud3JhcHBlZCByb3csIG1vdmVzIHRvIHRoZSByZXF1ZXN0ZWQgcm93LFxuICogdGhlbiBtb3ZlcyB0byByZXF1ZXN0ZWQgY29sLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW92ZVRvQ2VsbFNlcXVlbmNlKHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBzdGFydFggPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci54O1xuICBjb25zdCBzdGFydFkgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuXG4gIC8vIFRoZSBhbHQgYnVmZmVyIHNob3VsZCB0cnkgdG8gbmF2aWdhdGUgYmV0d2VlbiByb3dzXG4gIGlmICghYnVmZmVyU2VydmljZS5idWZmZXIuaGFzU2Nyb2xsYmFjaykge1xuICAgIHJldHVybiByZXNldFN0YXJ0aW5nUm93KHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikgK1xuICAgICAgbW92ZVRvUmVxdWVzdGVkUm93KHN0YXJ0WSwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpICtcbiAgICAgIG1vdmVUb1JlcXVlc3RlZENvbChzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0WCwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3IpO1xuICB9XG5cbiAgLy8gT25seSBtb3ZlIGhvcml6b250YWxseSBmb3IgdGhlIG5vcm1hbCBidWZmZXJcbiAgcmV0dXJuIG1vdmVIb3Jpem9udGFsbHlPbmx5KHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcik7XG59XG5cbi8qKlxuICogSWYgdGhlIGluaXRpYWwgcG9zaXRpb24gb2YgdGhlIGN1cnNvciBpcyBvbiBhIHJvdyB0aGF0IGlzIHdyYXBwZWQsIG1vdmUgdGhlXG4gKiBjdXJzb3IgdXAgdG8gdGhlIGZpcnN0IHJvdyB0aGF0IGlzIG5vdCB3cmFwcGVkIHRvIGhhdmUgYWNjdXJhdGUgdmVydGljYWxcbiAqIHBvc2l0aW9uaW5nLlxuICovXG5mdW5jdGlvbiByZXNldFN0YXJ0aW5nUm93KHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlciwgdGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGlmIChtb3ZlVG9SZXF1ZXN0ZWRSb3coc3RhcnRZLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHJldHVybiByZXBlYXQoYnVmZmVyTGluZShcbiAgICBzdGFydFgsIHN0YXJ0WSwgc3RhcnRYLFxuICAgIHN0YXJ0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHN0YXJ0WSksIGZhbHNlLCBidWZmZXJTZXJ2aWNlXG4gICkubGVuZ3RoLCBzZXF1ZW5jZShEaXJlY3Rpb24uTEVGVCwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuLyoqXG4gKiBVc2luZyB0aGUgcmVzZXQgc3RhcnRpbmcgYW5kIGVuZGluZyByb3csIG1vdmUgdG8gdGhlIHJlcXVlc3RlZCByb3csXG4gKiBpZ25vcmluZyB3cmFwcGVkIHJvd3NcbiAqL1xuZnVuY3Rpb24gbW92ZVRvUmVxdWVzdGVkUm93KHN0YXJ0WTogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGNvbnN0IHN0YXJ0Um93ID0gc3RhcnRZIC0gd3JhcHBlZFJvd3NGb3JSb3coYnVmZmVyU2VydmljZSwgc3RhcnRZKTtcbiAgY29uc3QgZW5kUm93ID0gdGFyZ2V0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHRhcmdldFkpO1xuXG4gIGNvbnN0IHJvd3NUb01vdmUgPSBNYXRoLmFicyhzdGFydFJvdyAtIGVuZFJvdykgLSB3cmFwcGVkUm93c0NvdW50KHN0YXJ0WSwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSk7XG5cbiAgcmV0dXJuIHJlcGVhdChyb3dzVG9Nb3ZlLCBzZXF1ZW5jZSh2ZXJ0aWNhbERpcmVjdGlvbihzdGFydFksIHRhcmdldFkpLCBhcHBsaWNhdGlvbkN1cnNvcikpO1xufVxuXG4vKipcbiAqIE1vdmUgdG8gdGhlIHJlcXVlc3RlZCBjb2wgb24gdGhlIGVuZGluZyByb3dcbiAqL1xuZnVuY3Rpb24gbW92ZVRvUmVxdWVzdGVkQ29sKHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlciwgdGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGxldCBzdGFydFJvdztcbiAgaWYgKG1vdmVUb1JlcXVlc3RlZFJvdyhzdGFydFksIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yKS5sZW5ndGggPiAwKSB7XG4gICAgc3RhcnRSb3cgPSB0YXJnZXRZIC0gd3JhcHBlZFJvd3NGb3JSb3coYnVmZmVyU2VydmljZSwgdGFyZ2V0WSk7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnRSb3cgPSBzdGFydFk7XG4gIH1cblxuICBjb25zdCBlbmRSb3cgPSB0YXJnZXRZO1xuICBjb25zdCBkaXJlY3Rpb24gPSBob3Jpem9udGFsRGlyZWN0aW9uKHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcik7XG5cbiAgcmV0dXJuIHJlcGVhdChidWZmZXJMaW5lKFxuICAgIHN0YXJ0WCwgc3RhcnRSb3csIHRhcmdldFgsIGVuZFJvdyxcbiAgICBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SSUdIVCwgYnVmZmVyU2VydmljZVxuICApLmxlbmd0aCwgc2VxdWVuY2UoZGlyZWN0aW9uLCBhcHBsaWNhdGlvbkN1cnNvcikpO1xufVxuXG5mdW5jdGlvbiBtb3ZlSG9yaXpvbnRhbGx5T25seShzdGFydFg6IG51bWJlciwgc3RhcnRZOiBudW1iZXIsIHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSwgYXBwbGljYXRpb25DdXJzb3I6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCBkaXJlY3Rpb24gPSBob3Jpem9udGFsRGlyZWN0aW9uKHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcik7XG4gIHJldHVybiByZXBlYXQoTWF0aC5hYnMoc3RhcnRYIC0gdGFyZ2V0WCksIHNlcXVlbmNlKGRpcmVjdGlvbiwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uc1xuICovXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHdyYXBwZWQgcm93cyBiZXR3ZWVuIHRoZSB1bndyYXBwZWQgc3RhcnRpbmcgYW5kXG4gKiBlbmRpbmcgcm93cy4gVGhlc2Ugcm93cyBuZWVkIHRvIGlnbm9yZWQgc2luY2UgdGhlIGN1cnNvciBza2lwcyBvdmVyIHRoZW0uXG4gKi9cbmZ1bmN0aW9uIHdyYXBwZWRSb3dzQ291bnQoc3RhcnRZOiBudW1iZXIsIHRhcmdldFk6IG51bWJlciwgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UpOiBudW1iZXIge1xuICBsZXQgd3JhcHBlZFJvd3MgPSAwO1xuICBjb25zdCBzdGFydFJvdyA9IHN0YXJ0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHN0YXJ0WSk7XG4gIGNvbnN0IGVuZFJvdyA9IHRhcmdldFkgLSB3cmFwcGVkUm93c0ZvclJvdyhidWZmZXJTZXJ2aWNlLCB0YXJnZXRZKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguYWJzKHN0YXJ0Um93IC0gZW5kUm93KTsgaSsrKSB7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdmVydGljYWxEaXJlY3Rpb24oc3RhcnRZLCB0YXJnZXRZKSA9PT0gRGlyZWN0aW9uLlVQID8gLTEgOiAxO1xuICAgIGNvbnN0IGxpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoc3RhcnRSb3cgKyAoZGlyZWN0aW9uICogaSkpO1xuICAgIGlmIChsaW5lICYmIGxpbmUuaXNXcmFwcGVkKSB7XG4gICAgICB3cmFwcGVkUm93cysrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3cmFwcGVkUm93cztcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2Ygd3JhcHBlZCByb3dzIHRoYXQgbWFrZSB1cCBhIGdpdmVuIHJvdy5cbiAqIEBwYXJhbSBjdXJyZW50Um93IFRoZSByb3cgdG8gZGV0ZXJtaW5lIGhvdyBtYW55IHdyYXBwZWQgcm93cyBtYWtlIGl0IHVwXG4gKi9cbmZ1bmN0aW9uIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBjdXJyZW50Um93OiBudW1iZXIpOiBudW1iZXIge1xuICBsZXQgcm93Q291bnQgPSAwO1xuICBsZXQgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChjdXJyZW50Um93KTtcbiAgbGV0IGxpbmVXcmFwcyA9IGxpbmUgJiYgbGluZS5pc1dyYXBwZWQ7XG5cbiAgd2hpbGUgKGxpbmVXcmFwcyAmJiBjdXJyZW50Um93ID49IDAgJiYgY3VycmVudFJvdyA8IGJ1ZmZlclNlcnZpY2Uucm93cykge1xuICAgIHJvd0NvdW50Kys7XG4gICAgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCgtLWN1cnJlbnRSb3cpO1xuICAgIGxpbmVXcmFwcyA9IGxpbmUgJiYgbGluZS5pc1dyYXBwZWQ7XG4gIH1cblxuICByZXR1cm4gcm93Q291bnQ7XG59XG5cbi8qKlxuICogRGlyZWN0aW9uIGRldGVybWluZXJzXG4gKi9cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSByaWdodCBvciBsZWZ0IGFycm93IGlzIG5lZWRlZFxuICovXG5mdW5jdGlvbiBob3Jpem9udGFsRGlyZWN0aW9uKHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlciwgdGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IERpcmVjdGlvbiB7XG4gIGxldCBzdGFydFJvdztcbiAgaWYgKG1vdmVUb1JlcXVlc3RlZFJvdyh0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikubGVuZ3RoID4gMCkge1xuICAgIHN0YXJ0Um93ID0gdGFyZ2V0WSAtIHdyYXBwZWRSb3dzRm9yUm93KGJ1ZmZlclNlcnZpY2UsIHRhcmdldFkpO1xuICB9IGVsc2Uge1xuICAgIHN0YXJ0Um93ID0gc3RhcnRZO1xuICB9XG5cbiAgaWYgKChzdGFydFggPCB0YXJnZXRYICYmXG4gICAgc3RhcnRSb3cgPD0gdGFyZ2V0WSkgfHwgLy8gZG93bi9yaWdodCBvciBzYW1lIHkvcmlnaHRcbiAgICAoc3RhcnRYID49IHRhcmdldFggJiZcbiAgICBzdGFydFJvdyA8IHRhcmdldFkpKSB7ICAvLyBkb3duL2xlZnQgb3Igc2FtZSB5L2xlZnRcbiAgICByZXR1cm4gRGlyZWN0aW9uLlJJR0hUO1xuICB9XG4gIHJldHVybiBEaXJlY3Rpb24uTEVGVDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSB1cCBvciBkb3duIGFycm93IGlzIG5lZWRlZFxuICovXG5mdW5jdGlvbiB2ZXJ0aWNhbERpcmVjdGlvbihzdGFydFk6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyKTogRGlyZWN0aW9uIHtcbiAgcmV0dXJuIHN0YXJ0WSA+IHRhcmdldFkgPyBEaXJlY3Rpb24uVVAgOiBEaXJlY3Rpb24uRE9XTjtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIHRoZSBzdHJpbmcgb2YgY2hhcnMgaW4gdGhlIGJ1ZmZlciBmcm9tIGEgc3RhcnRpbmcgcm93IGFuZCBjb2xcbiAqIHRvIGFuIGVuZGluZyByb3cgYW5kIGNvbFxuICogQHBhcmFtIHN0YXJ0Q29sIFRoZSBzdGFydGluZyBjb2x1bW4gcG9zaXRpb25cbiAqIEBwYXJhbSBzdGFydFJvdyBUaGUgc3RhcnRpbmcgcm93IHBvc2l0aW9uXG4gKiBAcGFyYW0gZW5kQ29sIFRoZSBlbmRpbmcgY29sdW1uIHBvc2l0aW9uXG4gKiBAcGFyYW0gZW5kUm93IFRoZSBlbmRpbmcgcm93IHBvc2l0aW9uXG4gKiBAcGFyYW0gZm9yd2FyZCBEaXJlY3Rpb24gdG8gbW92ZVxuICovXG5mdW5jdGlvbiBidWZmZXJMaW5lKFxuICBzdGFydENvbDogbnVtYmVyLFxuICBzdGFydFJvdzogbnVtYmVyLFxuICBlbmRDb2w6IG51bWJlcixcbiAgZW5kUm93OiBudW1iZXIsXG4gIGZvcndhcmQ6IGJvb2xlYW4sXG4gIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4pOiBzdHJpbmcge1xuICBsZXQgY3VycmVudENvbCA9IHN0YXJ0Q29sO1xuICBsZXQgY3VycmVudFJvdyA9IHN0YXJ0Um93O1xuICBsZXQgYnVmZmVyU3RyID0gJyc7XG5cbiAgd2hpbGUgKGN1cnJlbnRDb2wgIT09IGVuZENvbCB8fCBjdXJyZW50Um93ICE9PSBlbmRSb3cpIHtcbiAgICBjdXJyZW50Q29sICs9IGZvcndhcmQgPyAxIDogLTE7XG5cbiAgICBpZiAoZm9yd2FyZCAmJiBjdXJyZW50Q29sID4gYnVmZmVyU2VydmljZS5jb2xzIC0gMSkge1xuICAgICAgYnVmZmVyU3RyICs9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgY3VycmVudFJvdywgZmFsc2UsIHN0YXJ0Q29sLCBjdXJyZW50Q29sXG4gICAgICApO1xuICAgICAgY3VycmVudENvbCA9IDA7XG4gICAgICBzdGFydENvbCA9IDA7XG4gICAgICBjdXJyZW50Um93Kys7XG4gICAgfSBlbHNlIGlmICghZm9yd2FyZCAmJiBjdXJyZW50Q29sIDwgMCkge1xuICAgICAgYnVmZmVyU3RyICs9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgY3VycmVudFJvdywgZmFsc2UsIDAsIHN0YXJ0Q29sICsgMVxuICAgICAgKTtcbiAgICAgIGN1cnJlbnRDb2wgPSBidWZmZXJTZXJ2aWNlLmNvbHMgLSAxO1xuICAgICAgc3RhcnRDb2wgPSBjdXJyZW50Q29sO1xuICAgICAgY3VycmVudFJvdy0tO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWZmZXJTdHIgKyBidWZmZXJTZXJ2aWNlLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoXG4gICAgY3VycmVudFJvdywgZmFsc2UsIHN0YXJ0Q29sLCBjdXJyZW50Q29sXG4gICk7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyB0aGUgZXNjYXBlIHNlcXVlbmNlIGZvciBjbGlja2luZyBhbiBhcnJvd1xuICogQHBhcmFtIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIHRvIG1vdmVcbiAqL1xuZnVuY3Rpb24gc2VxdWVuY2UoZGlyZWN0aW9uOiBEaXJlY3Rpb24sIGFwcGxpY2F0aW9uQ3Vyc29yOiBib29sZWFuKTogc3RyaW5nIHtcbiAgY29uc3QgbW9kID0gIGFwcGxpY2F0aW9uQ3Vyc29yID8gJ08nIDogJ1snO1xuICByZXR1cm4gQzAuRVNDICsgbW9kICsgZGlyZWN0aW9uO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwZWF0ZWQgYSBnaXZlbiBudW1iZXIgb2YgdGltZXNcbiAqIFBvbHlmaWxsIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3JlcGVhdFxuICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBzdHJpbmdcbiAqIEBwYXJhbSBzdHJpbmcgVGhlIHN0cmluZyB0aGF0IGlzIHRvIGJlIHJlcGVhdGVkXG4gKi9cbmZ1bmN0aW9uIHJlcGVhdChjb3VudDogbnVtYmVyLCBzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCk7XG4gIGxldCBycHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgcnB0ICs9IHN0cjtcbiAgfVxuICByZXR1cm4gcnB0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucywgSVJlbmRlckxheWVyIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9DT0xPUiwgV0hJVEVTUEFDRV9DRUxMX0NIQVIsIFdISVRFU1BBQ0VfQ0VMTF9DT0RFIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgSUdseXBoSWRlbnRpZmllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvVHlwZXMnO1xuaW1wb3J0IHsgRElNX09QQUNJVFksIElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBCYXNlQ2hhckF0bGFzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9CYXNlQ2hhckF0bGFzJztcbmltcG9ydCB7IGFjcXVpcmVDaGFyQXRsYXMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NoYXJBdGxhc0NhY2hlJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyB0aHJvd0lmRmFsc3kgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1JlbmRlcmVyVXRpbHMnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZVJlbmRlckxheWVyIGltcGxlbWVudHMgSVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJvdGVjdGVkIF9jdHghOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHByaXZhdGUgX3NjYWxlZENoYXJXaWR0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhckhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2VsbFdpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDZWxsSGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zY2FsZWRDaGFyTGVmdDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfc2NhbGVkQ2hhclRvcDogbnVtYmVyID0gMDtcblxuICBwcm90ZWN0ZWQgX2NoYXJBdGxhczogQmFzZUNoYXJBdGxhcyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQW4gb2JqZWN0IHRoYXQncyByZXVzZWQgd2hlbiBkcmF3aW5nIGdseXBocyBpbiBvcmRlciB0byByZWR1Y2UgR0MuXG4gICAqL1xuICBwcml2YXRlIF9jdXJyZW50R2x5cGhJZGVudGlmaWVyOiBJR2x5cGhJZGVudGlmaWVyID0ge1xuICAgIGNoYXJzOiAnJyxcbiAgICBjb2RlOiAwLFxuICAgIGJnOiAwLFxuICAgIGZnOiAwLFxuICAgIGJvbGQ6IGZhbHNlLFxuICAgIGRpbTogZmFsc2UsXG4gICAgaXRhbGljOiBmYWxzZVxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2NvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgaWQ6IHN0cmluZyxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBwcml2YXRlIF9hbHBoYTogYm9vbGVhbixcbiAgICBwcm90ZWN0ZWQgX2NvbG9yczogSUNvbG9yU2V0LFxuICAgIHByaXZhdGUgX3JlbmRlcmVySWQ6IG51bWJlcixcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIHByb3RlY3RlZCByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLl9jYW52YXMuY2xhc3NMaXN0LmFkZChgeHRlcm0tJHtpZH0tbGF5ZXJgKTtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuekluZGV4ID0gekluZGV4LnRvU3RyaW5nKCk7XG4gICAgdGhpcy5faW5pdENhbnZhcygpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXMpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX2NhbnZhcyk7XG4gICAgaWYgKHRoaXMuX2NoYXJBdGxhcykge1xuICAgICAgdGhpcy5fY2hhckF0bGFzLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9pbml0Q2FudmFzKCk6IHZvaWQge1xuICAgIHRoaXMuX2N0eCA9IHRocm93SWZGYWxzeSh0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7YWxwaGE6IHRoaXMuX2FscGhhfSkpO1xuICAgIC8vIERyYXcgdGhlIGJhY2tncm91bmQgaWYgdGhpcyBpcyBhbiBvcGFxdWUgbGF5ZXJcbiAgICBpZiAoIXRoaXMuX2FscGhhKSB7XG4gICAgICB0aGlzLl9jbGVhckFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbk9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge31cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkZvY3VzKCk6IHZvaWQge31cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSgpOiB2b2lkIHt9XG4gIHB1YmxpYyBvbkdyaWRDaGFuZ2VkKHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogdm9pZCB7fVxuICBwdWJsaWMgb25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0sIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge31cblxuICBwdWJsaWMgc2V0Q29sb3JzKGNvbG9yU2V0OiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKGNvbG9yU2V0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfc2V0VHJhbnNwYXJlbmN5KGFscGhhOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gRG8gbm90aGluZyB3aGVuIGFscGhhIGRvZXNuJ3QgY2hhbmdlXG4gICAgaWYgKGFscGhhID09PSB0aGlzLl9hbHBoYSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgY2FudmFzIGFuZCByZXBsYWNlIG9sZCBvbmVcbiAgICBjb25zdCBvbGRDYW52YXMgPSB0aGlzLl9jYW52YXM7XG4gICAgdGhpcy5fYWxwaGEgPSBhbHBoYTtcbiAgICAvLyBDbG9uaW5nIHByZXNlcnZlcyBwcm9wZXJ0aWVzXG4gICAgdGhpcy5fY2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PnRoaXMuX2NhbnZhcy5jbG9uZU5vZGUoKTtcbiAgICB0aGlzLl9pbml0Q2FudmFzKCk7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlcGxhY2VDaGlsZCh0aGlzLl9jYW52YXMsIG9sZENhbnZhcyk7XG5cbiAgICAvLyBSZWdlbmVyYXRlIGNoYXIgYXRsYXMgYW5kIGZvcmNlIGEgZnVsbCByZWRyYXdcbiAgICB0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRoaXMuX2NvbG9ycyk7XG4gICAgdGhpcy5vbkdyaWRDaGFuZ2VkKDAsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZnJlc2hlcyB0aGUgY2hhciBhdGxhcywgYXF1aXJpbmcgYSBuZXcgb25lIGlmIG5lY2Vzc2FyeS5cbiAgICogQHBhcmFtIGNvbG9yU2V0IFRoZSBjb2xvciBzZXQgdG8gdXNlIGZvciB0aGUgY2hhciBhdGxhcy5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2hDaGFyQXRsYXMoY29sb3JTZXQ6IElDb2xvclNldCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zY2FsZWRDaGFyV2lkdGggPD0gMCAmJiB0aGlzLl9zY2FsZWRDaGFySGVpZ2h0IDw9IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY2hhckF0bGFzID0gYWNxdWlyZUNoYXJBdGxhcyh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLCB0aGlzLl9yZW5kZXJlcklkLCBjb2xvclNldCwgdGhpcy5fc2NhbGVkQ2hhcldpZHRoLCB0aGlzLl9zY2FsZWRDaGFySGVpZ2h0KTtcbiAgICB0aGlzLl9jaGFyQXRsYXMud2FybVVwKCk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICB0aGlzLl9zY2FsZWRDZWxsV2lkdGggPSBkaW0uc2NhbGVkQ2VsbFdpZHRoO1xuICAgIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgPSBkaW0uc2NhbGVkQ2VsbEhlaWdodDtcbiAgICB0aGlzLl9zY2FsZWRDaGFyV2lkdGggPSBkaW0uc2NhbGVkQ2hhcldpZHRoO1xuICAgIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgPSBkaW0uc2NhbGVkQ2hhckhlaWdodDtcbiAgICB0aGlzLl9zY2FsZWRDaGFyTGVmdCA9IGRpbS5zY2FsZWRDaGFyTGVmdDtcbiAgICB0aGlzLl9zY2FsZWRDaGFyVG9wID0gZGltLnNjYWxlZENoYXJUb3A7XG4gICAgdGhpcy5fY2FudmFzLndpZHRoID0gZGltLnNjYWxlZENhbnZhc1dpZHRoO1xuICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBkaW0uc2NhbGVkQ2FudmFzSGVpZ2h0O1xuICAgIHRoaXMuX2NhbnZhcy5zdHlsZS53aWR0aCA9IGAke2RpbS5jYW52YXNXaWR0aH1weGA7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke2RpbS5jYW52YXNIZWlnaHR9cHhgO1xuXG4gICAgLy8gRHJhdyB0aGUgYmFja2dyb3VuZCBpZiB0aGlzIGlzIGFuIG9wYXF1ZSBsYXllclxuICAgIGlmICghdGhpcy5fYWxwaGEpIHtcbiAgICAgIHRoaXMuX2NsZWFyQWxsKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0aGlzLl9jb2xvcnMpO1xuICB9XG5cbiAgcHVibGljIGFic3RyYWN0IHJlc2V0KCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEZpbGxzIDErIGNlbGxzIGNvbXBsZXRlbHkuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmcgZmlsbFN0eWxlIG9uIHRoZSBjb250ZXh0LlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIHN0YXJ0IGF0XG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gZmlsbC5cbiAgICogQHBhcmFtIGhlaWdodCBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gZmlsbC5cbiAgICovXG4gIHByb3RlY3RlZCBfZmlsbENlbGxzKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICBoZWlnaHQgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWxscyBhIDFweCBsaW5lICgycHggb24gSERQSSkgYXQgdGhlIGJvdHRvbSBvZiB0aGUgY2VsbC4gVGhpcyB1c2VzIHRoZVxuICAgKiBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9maWxsQm90dG9tTGluZUF0Q2VsbHMoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIgPSAxKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAoeSArIDEpICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCAtIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC0gMSAvKiBFbnN1cmUgaXQncyBkcmF3biB3aXRoaW4gdGhlIGNlbGwgKi8sXG4gICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gIH1cblxuICAvKipcbiAgICogRmlsbHMgYSAxcHggbGluZSAoMnB4IG9uIEhEUEkpIGF0IHRoZSBsZWZ0IG9mIHRoZSBjZWxsLiBUaGlzIHVzZXMgdGhlXG4gICAqIGV4aXN0aW5nIGZpbGxTdHlsZSBvbiB0aGUgY29udGV4dC5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBmaWxsLlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGZpbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2ZpbGxMZWZ0TGluZUF0Q2VsbCh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLFxuICAgICAgICB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJva2VzIGEgMXB4IHJlY3RhbmdsZSAoMnB4IG9uIEhEUEkpIGFyb3VuZCBhIGNlbGwuIFRoaXMgdXNlcyB0aGUgZXhpc3RpbmdcbiAgICogc3Ryb2tlU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gZmlsbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyB0byBmaWxsLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9zdHJva2VSZWN0QXRDZWxsKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5saW5lV2lkdGggPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB0aGlzLl9jdHguc3Ryb2tlUmVjdChcbiAgICAgICAgeCAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCArIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIC8gMixcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgKyAod2luZG93LmRldmljZVBpeGVsUmF0aW8gLyAyKSxcbiAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggLSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICAgICAgKGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpIC0gd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgZW50aXJlIGNhbnZhcy5cbiAgICovXG4gIHByb3RlY3RlZCBfY2xlYXJBbGwoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FscGhhKSB7XG4gICAgICB0aGlzLl9jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgICB0aGlzLl9jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIDErIGNlbGxzIGNvbXBsZXRlbHkuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSB3aWR0aCBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gY2xlYXIuXG4gICAqIEBwYXJhbSBoZWlnaHQgVGhlIG51bWJlciBvZiByb3dzIHRvIGNsZWFyLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9jbGVhckNlbGxzKHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbHBoYSkge1xuICAgICAgdGhpcy5fY3R4LmNsZWFyUmVjdChcbiAgICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LFxuICAgICAgICAgIHdpZHRoICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLFxuICAgICAgICAgIGhlaWdodCAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgICAgd2lkdGggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ICogdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIGEgdHJ1ZWNvbG9yIGNoYXJhY3RlciBhdCB0aGUgY2VsbC4gVGhlIGNoYXJhY3RlciB3aWxsIGJlIGNsaXBwZWQgdG9cbiAgICogZW5zdXJlIHRoYXQgaXQgZml0cyB3aXRoIHRoZSBjZWxsLCBpbmNsdWRpbmcgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGlmIGl0J3NcbiAgICogYSB3aWRlIGNoYXJhY3Rlci4gVGhpcyB1c2VzIHRoZSBleGlzdGluZyBmaWxsU3R5bGUgb24gdGhlIGNvbnRleHQuXG4gICAqIEBwYXJhbSBjZWxsIFRoZSBjZWxsIGRhdGEgZm9yIHRoZSBjaGFyYWN0ZXIgdG8gZHJhdy5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3Igb2YgdGhlIGNoYXJhY3Rlci5cbiAgICovXG4gIHByb3RlY3RlZCBfZmlsbENoYXJUcnVlQ29sb3IoY2VsbDogQ2VsbERhdGEsIHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZvbnQgPSB0aGlzLl9nZXRGb250KGZhbHNlLCBmYWxzZSk7XG4gICAgdGhpcy5fY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgIHRoaXMuX2NsaXBSb3coeSk7XG4gICAgdGhpcy5fY3R4LmZpbGxUZXh0KFxuICAgICAgICBjZWxsLmdldENoYXJzKCksXG4gICAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggKyB0aGlzLl9zY2FsZWRDaGFyTGVmdCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQgKyB0aGlzLl9zY2FsZWRDaGFyVG9wICsgdGhpcy5fc2NhbGVkQ2hhckhlaWdodCAvIDIpO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIG9uZSBvciBtb3JlIGNoYXJhY3RlcnMgYXQgYSBjZWxsLiBJZiBwb3NzaWJsZSB0aGlzIHdpbGwgZHJhdyB1c2luZ1xuICAgKiB0aGUgY2hhcmFjdGVyIGF0bGFzIHRvIHJlZHVjZSBkcmF3IHRpbWUuXG4gICAqIEBwYXJhbSBjaGFycyBUaGUgY2hhcmFjdGVyIG9yIGNoYXJhY3RlcnMuXG4gICAqIEBwYXJhbSBjb2RlIFRoZSBjaGFyYWN0ZXIgY29kZS5cbiAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgY2hhcmFjdGVycy5cbiAgICogQHBhcmFtIHggVGhlIGNvbHVtbiB0byBkcmF3IGF0LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSBmZyBUaGUgZm9yZWdyb3VuZCBjb2xvciwgaW4gdGhlIGZvcm1hdCBzdG9yZWQgd2l0aGluIHRoZSBhdHRyaWJ1dGVzLlxuICAgKiBAcGFyYW0gYmcgVGhlIGJhY2tncm91bmQgY29sb3IsIGluIHRoZSBmb3JtYXQgc3RvcmVkIHdpdGhpbiB0aGUgYXR0cmlidXRlcy5cbiAgICogVGhpcyBpcyB1c2VkIHRvIHZhbGlkYXRlIHdoZXRoZXIgYSBjYWNoZWQgaW1hZ2UgY2FuIGJlIHVzZWQuXG4gICAqIEBwYXJhbSBib2xkIFdoZXRoZXIgdGhlIHRleHQgaXMgYm9sZC5cbiAgICovXG4gIHByb3RlY3RlZCBfZHJhd0NoYXJzKGNlbGw6IElDZWxsRGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcblxuICAgIC8vIHNraXAgY2FjaGUgcmlnaHQgYXdheSBpZiB3ZSBkcmF3IGluIFJHQlxuICAgIC8vIE5vdGU6IHRvIGF2b2lkIGJhZCBydW50aW1lIEpvaW5lZENlbGxEYXRhIHdpbGwgYmUgc2tpcHBlZFxuICAgIC8vICAgICAgIGluIHRoZSBjYWNoZSBoYW5kbGVyIGl0c2VsZiAoYXRsYXNEaWREcmF3ID09IGZhbHNlKSBhbmRcbiAgICAvLyAgICAgICBmYWxsIHRocm91Z2ggdG8gdW5jYWNoZWQgbGF0ZXIgZG93biBiZWxvd1xuICAgIGlmIChjZWxsLmlzRmdSR0IoKSB8fCBjZWxsLmlzQmdSR0IoKSkge1xuICAgICAgdGhpcy5fZHJhd1VuY2FjaGVkQ2hhcnMoY2VsbCwgeCwgeSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGZnO1xuICAgIGxldCBiZztcbiAgICBpZiAoY2VsbC5pc0ludmVyc2UoKSkge1xuICAgICAgZmcgPSAoY2VsbC5pc0JnRGVmYXVsdCgpKSA/IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgOiBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICAgIGJnID0gKGNlbGwuaXNGZ0RlZmF1bHQoKSkgPyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIDogY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJnID0gKGNlbGwuaXNCZ0RlZmF1bHQoKSkgPyBERUZBVUxUX0NPTE9SIDogY2VsbC5nZXRCZ0NvbG9yKCk7XG4gICAgICBmZyA9IChjZWxsLmlzRmdEZWZhdWx0KCkpID8gREVGQVVMVF9DT0xPUiA6IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgIH1cblxuICAgIGNvbnN0IGRyYXdJbkJyaWdodENvbG9yID0gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBjZWxsLmlzQm9sZCgpICYmIGZnIDwgOCAmJiBmZyAhPT0gSU5WRVJURURfREVGQVVMVF9DT0xPUjtcblxuICAgIGZnICs9IGRyYXdJbkJyaWdodENvbG9yID8gOCA6IDA7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5jaGFycyA9IGNlbGwuZ2V0Q2hhcnMoKSB8fCBXSElURVNQQUNFX0NFTExfQ0hBUjtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmNvZGUgPSBjZWxsLmdldENvZGUoKSB8fCBXSElURVNQQUNFX0NFTExfQ09ERTtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmJnID0gYmc7XG4gICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5mZyA9IGZnO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuYm9sZCA9ICEhY2VsbC5pc0JvbGQoKTtcbiAgICB0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmRpbSA9ICEhY2VsbC5pc0RpbSgpO1xuICAgIHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuaXRhbGljID0gISFjZWxsLmlzSXRhbGljKCk7XG4gICAgY29uc3QgYXRsYXNEaWREcmF3ID0gdGhpcy5fY2hhckF0bGFzICYmIHRoaXMuX2NoYXJBdGxhcy5kcmF3KFxuICAgICAgdGhpcy5fY3R4LFxuICAgICAgdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllcixcbiAgICAgIHggKiB0aGlzLl9zY2FsZWRDZWxsV2lkdGggKyB0aGlzLl9zY2FsZWRDaGFyTGVmdCxcbiAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcFxuICAgICk7XG5cbiAgICBpZiAoIWF0bGFzRGlkRHJhdykge1xuICAgICAgdGhpcy5fZHJhd1VuY2FjaGVkQ2hhcnMoY2VsbCwgeCwgeSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERyYXdzIG9uZSBvciBtb3JlIGNoYXJhY3RlcnMgYXQgb25lIG9yIG1vcmUgY2VsbHMuIFRoZSBjaGFyYWN0ZXIocykgd2lsbCBiZVxuICAgKiBjbGlwcGVkIHRvIGVuc3VyZSB0aGF0IHRoZXkgZml0IHdpdGggdGhlIGNlbGwocyksIGluY2x1ZGluZyB0aGUgY2VsbCB0byB0aGVcbiAgICogcmlnaHQgaWYgdGhlIGxhc3QgY2hhcmFjdGVyIGlzIGEgd2lkZSBjaGFyYWN0ZXIuXG4gICAqIEBwYXJhbSBjaGFycyBUaGUgY2hhcmFjdGVyLlxuICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSBjaGFyYWN0ZXIuXG4gICAqIEBwYXJhbSBmZyBUaGUgZm9yZWdyb3VuZCBjb2xvciwgaW4gdGhlIGZvcm1hdCBzdG9yZWQgd2l0aGluIHRoZSBhdHRyaWJ1dGVzLlxuICAgKiBAcGFyYW0geCBUaGUgY29sdW1uIHRvIGRyYXcgYXQuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZHJhdyBhdC5cbiAgICovXG4gIHByaXZhdGUgX2RyYXdVbmNhY2hlZENoYXJzKGNlbGw6IElDZWxsRGF0YSwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5mb250ID0gdGhpcy5fZ2V0Rm9udCghIWNlbGwuaXNCb2xkKCksICEhY2VsbC5pc0l0YWxpYygpKTtcbiAgICB0aGlzLl9jdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG5cbiAgICBpZiAoY2VsbC5pc0ludmVyc2UoKSkge1xuICAgICAgaWYgKGNlbGwuaXNCZ0RlZmF1bHQoKSkge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdSR0IoKSkge1xuICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEJnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2NlbGwuZ2V0QmdDb2xvcigpXS5jc3M7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChjZWxsLmlzRmdEZWZhdWx0KCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztcbiAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IGByZ2IoJHtBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoY2VsbC5nZXRGZ0NvbG9yKCkpLmpvaW4oJywnKX0pYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBmZyA9IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyAmJiBjZWxsLmlzQm9sZCgpICYmIGZnIDwgOCkge1xuICAgICAgICAgIGZnICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2ZnXS5jc3M7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY2xpcFJvdyh5KTtcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGNlbGwuaXNEaW0oKSkge1xuICAgICAgdGhpcy5fY3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuICAgIC8vIERyYXcgdGhlIGNoYXJhY3RlclxuICAgIHRoaXMuX2N0eC5maWxsVGV4dChcbiAgICAgICAgY2VsbC5nZXRDaGFycygpLFxuICAgICAgICB4ICogdGhpcy5fc2NhbGVkQ2VsbFdpZHRoICsgdGhpcy5fc2NhbGVkQ2hhckxlZnQsXG4gICAgICAgIHkgKiB0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0ICsgdGhpcy5fc2NhbGVkQ2hhclRvcCArIHRoaXMuX3NjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsaXBzIGEgcm93IHRvIGVuc3VyZSBubyBwaXhlbHMgd2lsbCBiZSBkcmF3biBvdXRzaWRlIHRoZSBjZWxscyBpbiB0aGUgcm93LlxuICAgKiBAcGFyYW0geSBUaGUgcm93IHRvIGNsaXAuXG4gICAqL1xuICBwcml2YXRlIF9jbGlwUm93KHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLl9jdHgucmVjdChcbiAgICAgICAgMCxcbiAgICAgICAgeSAqIHRoaXMuX3NjYWxlZENlbGxIZWlnaHQsXG4gICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAqIHRoaXMuX3NjYWxlZENlbGxXaWR0aCxcbiAgICAgICAgdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7XG4gICAgdGhpcy5fY3R4LmNsaXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGZvbnQuXG4gICAqIEBwYXJhbSBpc0JvbGQgSWYgd2Ugc2hvdWxkIHVzZSB0aGUgYm9sZCBmb250V2VpZ2h0LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9nZXRGb250KGlzQm9sZDogYm9vbGVhbiwgaXNJdGFsaWM6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGZvbnRXZWlnaHQgPSBpc0JvbGQgPyB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRXZWlnaHRCb2xkIDogdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5mb250V2VpZ2h0O1xuICAgIGNvbnN0IGZvbnRTdHlsZSA9IGlzSXRhbGljID8gJ2l0YWxpYycgOiAnJztcblxuICAgIHJldHVybiBgJHtmb250U3R5bGV9ICR7Zm9udFdlaWdodH0gJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRTaXplICogd2luZG93LmRldmljZVBpeGVsUmF0aW99cHggJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHl9YDtcbiAgfVxufVxuXG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJQ2VsbERhdGEsIENoYXJEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSwgSUNoYXJhY3RlckpvaW5lciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBXSElURVNQQUNFX0NFTExfQ0hBUiwgQ29udGVudCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBKb2luZWRDZWxsRGF0YSBleHRlbmRzIEF0dHJpYnV0ZURhdGEgaW1wbGVtZW50cyBJQ2VsbERhdGEge1xuICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xuICAvLyAuY29udGVudCBjYXJyaWVzIG5vIG1lYW5pbmcgZm9yIGpvaW5lZCBDZWxsRGF0YSwgc2ltcGx5IG51bGxpZnkgaXRcbiAgLy8gdGh1cyB3ZSBoYXZlIHRvIG92ZXJsb2FkIGFsbCBvdGhlciAuY29udGVudCBhY2Nlc3NvcnNcbiAgcHVibGljIGNvbnRlbnQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBmZzogbnVtYmVyO1xuICBwdWJsaWMgYmc6IG51bWJlcjtcbiAgcHVibGljIGNvbWJpbmVkRGF0YTogc3RyaW5nID0gJyc7XG5cbiAgY29uc3RydWN0b3IoZmlyc3RDZWxsOiBJQ2VsbERhdGEsIGNoYXJzOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmcgPSBmaXJzdENlbGwuZmc7XG4gICAgdGhpcy5iZyA9IGZpcnN0Q2VsbC5iZztcbiAgICB0aGlzLmNvbWJpbmVkRGF0YSA9IGNoYXJzO1xuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gIH1cblxuICBwdWJsaWMgaXNDb21iaW5lZCgpOiBudW1iZXIge1xuICAgIC8vIGFsd2F5cyBtYXJrIGpvaW5lZCBjZWxsIGRhdGEgYXMgY29tYmluZWRcbiAgICByZXR1cm4gQ29udGVudC5JU19DT01CSU5FRF9NQVNLO1xuICB9XG5cbiAgcHVibGljIGdldFdpZHRoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICB9XG5cbiAgcHVibGljIGdldENoYXJzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY29tYmluZWREYXRhO1xuICB9XG5cbiAgcHVibGljIGdldENvZGUoKTogbnVtYmVyIHtcbiAgICAvLyBjb2RlIGFsd2F5cyBnZXRzIHRoZSBoaWdoZXN0IHBvc3NpYmxlIGZha2UgY29kZXBvaW50IChyZWFkIGFzIC0xKVxuICAgIC8vIHRoaXMgaXMgbmVlZGVkIGFzIGNvZGUgaXMgdXNlZCBieSBjYWNoZXMgYXMgaWRlbnRpZmllclxuICAgIHJldHVybiAweDFGRkZGRjtcbiAgfVxuXG4gIHB1YmxpYyBzZXRGcm9tQ2hhckRhdGEodmFsdWU6IENoYXJEYXRhKTogdm9pZCB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBc0NoYXJEYXRhKCk6IENoYXJEYXRhIHtcbiAgICByZXR1cm4gW3RoaXMuZmcsIHRoaXMuZ2V0Q2hhcnMoKSwgdGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldENvZGUoKV07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENoYXJhY3RlckpvaW5lclJlZ2lzdHJ5IGltcGxlbWVudHMgSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5IHtcblxuICBwcml2YXRlIF9jaGFyYWN0ZXJKb2luZXJzOiBJQ2hhcmFjdGVySm9pbmVyW10gPSBbXTtcbiAgcHJpdmF0ZSBfbmV4dENoYXJhY3RlckpvaW5lcklkOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF93b3JrQ2VsbDogQ2VsbERhdGEgPSBuZXcgQ2VsbERhdGEoKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSkgeyB9XG5cbiAgcHVibGljIHJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXI6ICh0ZXh0OiBzdHJpbmcpID0+IFtudW1iZXIsIG51bWJlcl1bXSk6IG51bWJlciB7XG4gICAgY29uc3Qgam9pbmVyOiBJQ2hhcmFjdGVySm9pbmVyID0ge1xuICAgICAgaWQ6IHRoaXMuX25leHRDaGFyYWN0ZXJKb2luZXJJZCsrLFxuICAgICAgaGFuZGxlclxuICAgIH07XG5cbiAgICB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnB1c2goam9pbmVyKTtcbiAgICByZXR1cm4gam9pbmVyLmlkO1xuICB9XG5cbiAgcHVibGljIGRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbaV0uaWQgPT09IGpvaW5lcklkKSB7XG4gICAgICAgIHRoaXMuX2NoYXJhY3RlckpvaW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0Sm9pbmVkQ2hhcmFjdGVycyhyb3c6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgaWYgKHRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgIGlmICghbGluZSB8fCBsaW5lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHJhbmdlczogW251bWJlciwgbnVtYmVyXVtdID0gW107XG4gICAgY29uc3QgbGluZVN0ciA9IGxpbmUudHJhbnNsYXRlVG9TdHJpbmcodHJ1ZSk7XG5cbiAgICAvLyBCZWNhdXNlIHNvbWUgY2VsbHMgY2FuIGJlIHJlcHJlc2VudGVkIGJ5IG11bHRpcGxlIGphdmFzY3JpcHQgY2hhcmFjdGVycyxcbiAgICAvLyB3ZSB0cmFjayB0aGUgY2VsbCBhbmQgdGhlIHN0cmluZyBpbmRleGVzIHNlcGFyYXRlbHkuIFRoaXMgYWxsb3dzIHVzIHRvXG4gICAgLy8gdHJhbnNsYXRlIHRoZSBzdHJpbmcgcmFuZ2VzIHdlIGdldCBmcm9tIHRoZSBqb2luZXJzIGJhY2sgaW50byBjZWxsIHJhbmdlc1xuICAgIC8vIGZvciB1c2Ugd2hlbiByZW5kZXJpbmdcbiAgICBsZXQgcmFuZ2VTdGFydENvbHVtbiA9IDA7XG4gICAgbGV0IGN1cnJlbnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IHJhbmdlU3RhcnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IHJhbmdlQXR0ckZHID0gbGluZS5nZXRGZygwKTtcbiAgICBsZXQgcmFuZ2VBdHRyQkcgPSBsaW5lLmdldEJnKDApO1xuXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBsaW5lLmdldFRyaW1tZWRMZW5ndGgoKTsgeCsrKSB7XG4gICAgICBsaW5lLmxvYWRDZWxsKHgsIHRoaXMuX3dvcmtDZWxsKTtcblxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgaXMgb2Ygd2lkdGggMCwgc2tpcCBpdC5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEVuZCBvZiByYW5nZVxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmZnICE9PSByYW5nZUF0dHJGRyB8fCB0aGlzLl93b3JrQ2VsbC5iZyAhPT0gcmFuZ2VBdHRyQkcpIHtcbiAgICAgICAgLy8gSWYgd2UgZW5kZWQgdXAgd2l0aCBhIHNlcXVlbmNlIG9mIG1vcmUgdGhhbiBvbmUgY2hhcmFjdGVyLFxuICAgICAgICAvLyBsb29rIGZvciByYW5nZXMgdG8gam9pbi5cbiAgICAgICAgaWYgKHggLSByYW5nZVN0YXJ0Q29sdW1uID4gMSkge1xuICAgICAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IHRoaXMuX2dldEpvaW5lZFJhbmdlcyhcbiAgICAgICAgICAgIGxpbmVTdHIsXG4gICAgICAgICAgICByYW5nZVN0YXJ0U3RyaW5nSW5kZXgsXG4gICAgICAgICAgICBjdXJyZW50U3RyaW5nSW5kZXgsXG4gICAgICAgICAgICBsaW5lLFxuICAgICAgICAgICAgcmFuZ2VTdGFydENvbHVtblxuICAgICAgICAgICk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqb2luZWRSYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKGpvaW5lZFJhbmdlc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzZXQgb3VyIG1hcmtlcnMgZm9yIGEgbmV3IHJhbmdlLlxuICAgICAgICByYW5nZVN0YXJ0Q29sdW1uID0geDtcbiAgICAgICAgcmFuZ2VTdGFydFN0cmluZ0luZGV4ID0gY3VycmVudFN0cmluZ0luZGV4O1xuICAgICAgICByYW5nZUF0dHJGRyA9IHRoaXMuX3dvcmtDZWxsLmZnO1xuICAgICAgICByYW5nZUF0dHJCRyA9IHRoaXMuX3dvcmtDZWxsLmJnO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50U3RyaW5nSW5kZXggKz0gdGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGggfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgYW55IHRyYWlsaW5nIHJhbmdlcy5cbiAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gcmFuZ2VTdGFydENvbHVtbiA+IDEpIHtcbiAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IHRoaXMuX2dldEpvaW5lZFJhbmdlcyhcbiAgICAgICAgbGluZVN0cixcbiAgICAgICAgcmFuZ2VTdGFydFN0cmluZ0luZGV4LFxuICAgICAgICBjdXJyZW50U3RyaW5nSW5kZXgsXG4gICAgICAgIGxpbmUsXG4gICAgICAgIHJhbmdlU3RhcnRDb2x1bW5cbiAgICAgICk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpvaW5lZFJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByYW5nZXMucHVzaChqb2luZWRSYW5nZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSBzZWdtZW50IG9mIGEgbGluZSBvZiB0ZXh0LCBmaW5kIGFsbCByYW5nZXMgb2YgdGV4dCB0aGF0IHNob3VsZCBiZVxuICAgKiBqb2luZWQgaW4gYSBzaW5nbGUgcmVuZGVyaW5nIHVuaXQuIFJhbmdlcyBhcmUgaW50ZXJuYWxseSBjb252ZXJ0ZWQgdG9cbiAgICogY29sdW1uIHJhbmdlcywgcmF0aGVyIHRoYW4gc3RyaW5nIHJhbmdlcy5cbiAgICogQHBhcmFtIGxpbmUgU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmdWxsIGxpbmUgb2YgdGV4dFxuICAgKiBAcGFyYW0gc3RhcnRJbmRleCBTdGFydCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGluY2x1c2l2ZSlcbiAgICogQHBhcmFtIGVuZEluZGV4IEVuZCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGV4Y2x1c2l2ZSlcbiAgICovXG4gIHByaXZhdGUgX2dldEpvaW5lZFJhbmdlcyhsaW5lOiBzdHJpbmcsIHN0YXJ0SW5kZXg6IG51bWJlciwgZW5kSW5kZXg6IG51bWJlciwgbGluZURhdGE6IElCdWZmZXJMaW5lLCBzdGFydENvbDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdIHtcbiAgICBjb25zdCB0ZXh0ID0gbGluZS5zdWJzdHJpbmcoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuICAgIC8vIEF0IHRoaXMgcG9pbnQgd2UgYWxyZWFkeSBrbm93IHRoYXQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGpvaW5lciBzb1xuICAgIC8vIHdlIGNhbiBqdXN0IHB1bGwgaXRzIHZhbHVlIGFuZCBhc3NpZ24gaXQgZGlyZWN0bHkgcmF0aGVyIHRoYW5cbiAgICAvLyBtZXJnaW5nIGl0IGludG8gYW4gZW1wdHkgYXJyYXksIHdoaWNoIGluY3VycyB1bm5lY2Vzc2FyeSB3cml0ZXMuXG4gICAgY29uc3Qgam9pbmVkUmFuZ2VzOiBbbnVtYmVyLCBudW1iZXJdW10gPSB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzWzBdLmhhbmRsZXIodGV4dCk7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBXZSBtZXJnZSBhbnkgb3ZlcmxhcHBpbmcgcmFuZ2VzIGFjcm9zcyB0aGUgZGlmZmVyZW50IGpvaW5lcnNcbiAgICAgIGNvbnN0IGpvaW5lclJhbmdlcyA9IHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbaV0uaGFuZGxlcih0ZXh0KTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgam9pbmVyUmFuZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIENoYXJhY3RlckpvaW5lclJlZ2lzdHJ5Ll9tZXJnZVJhbmdlcyhqb2luZWRSYW5nZXMsIGpvaW5lclJhbmdlc1tqXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcyhqb2luZWRSYW5nZXMsIGxpbmVEYXRhLCBzdGFydENvbCk7XG4gICAgcmV0dXJuIGpvaW5lZFJhbmdlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGUgcHJvdmlkZWQgcmFuZ2VzIGluLXBsYWNlIHRvIGFkanVzdCBmb3IgdmFyaWF0aW9ucyBiZXR3ZWVuXG4gICAqIHN0cmluZyBsZW5ndGggYW5kIGNlbGwgd2lkdGggc28gdGhhdCB0aGUgcmFuZ2UgcmVwcmVzZW50cyBhIGNlbGwgcmFuZ2UsXG4gICAqIHJhdGhlciB0aGFuIHRoZSBzdHJpbmcgcmFuZ2UgdGhlIGpvaW5lciBwcm92aWRlcy5cbiAgICogQHBhcmFtIHJhbmdlcyBTdHJpbmcgcmFuZ2VzIGNvbnRhaW5pbmcgc3RhcnQgKGluY2x1c2l2ZSkgYW5kIGVuZCAoZXhjbHVzaXZlKSBpbmRleFxuICAgKiBAcGFyYW0gbGluZSBDZWxsIGRhdGEgZm9yIHRoZSByZWxldmFudCBsaW5lIGluIHRoZSB0ZXJtaW5hbFxuICAgKiBAcGFyYW0gc3RhcnRDb2wgT2Zmc2V0IHdpdGhpbiB0aGUgbGluZSB0byBzdGFydCBmcm9tXG4gICAqL1xuICBwcml2YXRlIF9zdHJpbmdSYW5nZXNUb0NlbGxSYW5nZXMocmFuZ2VzOiBbbnVtYmVyLCBudW1iZXJdW10sIGxpbmU6IElCdWZmZXJMaW5lLCBzdGFydENvbDogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGN1cnJlbnRSYW5nZUluZGV4ID0gMDtcbiAgICBsZXQgY3VycmVudFJhbmdlU3RhcnRlZCA9IGZhbHNlO1xuICAgIGxldCBjdXJyZW50U3RyaW5nSW5kZXggPSAwO1xuICAgIGxldCBjdXJyZW50UmFuZ2UgPSByYW5nZXNbY3VycmVudFJhbmdlSW5kZXhdO1xuXG4gICAgLy8gSWYgd2UgZ290IHRocm91Z2ggYWxsIG9mIHRoZSByYW5nZXMsIHN0b3Agc2VhcmNoaW5nXG4gICAgaWYgKCFjdXJyZW50UmFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB4ID0gc3RhcnRDb2w7IHggPCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7IHgrKykge1xuICAgICAgY29uc3Qgd2lkdGggPSBsaW5lLmdldFdpZHRoKHgpO1xuICAgICAgY29uc3QgbGVuZ3RoID0gbGluZS5nZXRTdHJpbmcoeCkubGVuZ3RoIHx8IFdISVRFU1BBQ0VfQ0VMTF9DSEFSLmxlbmd0aDtcblxuICAgICAgLy8gV2Ugc2tpcCB6ZXJvLXdpZHRoIGNoYXJhY3RlcnMgd2hlbiBjcmVhdGluZyB0aGUgc3RyaW5nIHRvIGpvaW4gdGhlIHRleHRcbiAgICAgIC8vIHNvIHdlIGRvIHRoZSBzYW1lIGhlcmVcbiAgICAgIGlmICh3aWR0aCA9PT0gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHRoZSBzdGFydCBvZiB0aGUgcmFuZ2VcbiAgICAgIGlmICghY3VycmVudFJhbmdlU3RhcnRlZCAmJiBjdXJyZW50UmFuZ2VbMF0gPD0gY3VycmVudFN0cmluZ0luZGV4KSB7XG4gICAgICAgIGN1cnJlbnRSYW5nZVswXSA9IHg7XG4gICAgICAgIGN1cnJlbnRSYW5nZVN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3QgdGhlIGVuZCBvZiB0aGUgcmFuZ2VcbiAgICAgIGlmIChjdXJyZW50UmFuZ2VbMV0gPD0gY3VycmVudFN0cmluZ0luZGV4KSB7XG4gICAgICAgIGN1cnJlbnRSYW5nZVsxXSA9IHg7XG5cbiAgICAgICAgLy8gV2UncmUgZmluaXNoZWQgd2l0aCB0aGlzIHJhbmdlLCBzbyB3ZSBtb3ZlIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICBjdXJyZW50UmFuZ2UgPSByYW5nZXNbKytjdXJyZW50UmFuZ2VJbmRleF07XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIG1vcmUgcmFuZ2VzIGxlZnQsIHN0b3Agc2VhcmNoaW5nXG4gICAgICAgIGlmICghY3VycmVudFJhbmdlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSYW5nZXMgY2FuIGJlIG9uIGFkamFjZW50IGNoYXJhY3RlcnMuIEJlY2F1c2UgdGhlIGVuZCBpbmRleCBvZiB0aGVcbiAgICAgICAgLy8gcmFuZ2VzIGFyZSBleGNsdXNpdmUsIHRoaXMgbWVhbnMgdGhhdCB0aGUgaW5kZXggZm9yIHRoZSBzdGFydCBvZiBhXG4gICAgICAgIC8vIHJhbmdlIGNhbiBiZSB0aGUgc2FtZSBhcyB0aGUgZW5kIGluZGV4IG9mIHRoZSBwcmV2aW91cyByYW5nZS4gVG9cbiAgICAgICAgLy8gYWNjb3VudCBmb3IgdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IHJhbmdlLCB3ZSBjaGVjayBoZXJlIGp1c3QgaW4gY2FzZS5cbiAgICAgICAgaWYgKGN1cnJlbnRSYW5nZVswXSA8PSBjdXJyZW50U3RyaW5nSW5kZXgpIHtcbiAgICAgICAgICBjdXJyZW50UmFuZ2VbMF0gPSB4O1xuICAgICAgICAgIGN1cnJlbnRSYW5nZVN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRSYW5nZVN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3QgdGhlIHN0cmluZyBpbmRleCBiYXNlZCBvbiB0aGUgY2hhcmFjdGVyIGxlbmd0aCB0byBsaW5lIHVwIHdpdGhcbiAgICAgIC8vIHRoZSBjb2x1bW4gYWRqdXN0bWVudFxuICAgICAgY3VycmVudFN0cmluZ0luZGV4ICs9IGxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBzdGlsbCBhIHJhbmdlIGxlZnQgYXQgdGhlIGVuZCwgaXQgbXVzdCBleHRlbmQgYWxsIHRoZSB3YXkgdG9cbiAgICAvLyB0aGUgZW5kIG9mIHRoZSBsaW5lLlxuICAgIGlmIChjdXJyZW50UmFuZ2UpIHtcbiAgICAgIGN1cnJlbnRSYW5nZVsxXSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSByYW5nZSBkZWZpbmVkIGJ5IHRoZSBwcm92aWRlZCBzdGFydCBhbmQgZW5kIGludG8gdGhlIGxpc3Qgb2ZcbiAgICogZXhpc3RpbmcgcmFuZ2VzLiBUaGUgbWVyZ2UgaXMgZG9uZSBpbiBwbGFjZSBvbiB0aGUgZXhpc3RpbmcgcmFuZ2UgZm9yXG4gICAqIHBlcmZvcm1hbmNlIGFuZCBpcyBhbHNvIHJldHVybmVkLlxuICAgKiBAcGFyYW0gcmFuZ2VzIEV4aXN0aW5nIHJhbmdlIGxpc3RcbiAgICogQHBhcmFtIG5ld1JhbmdlIFR1cGxlIG9mIHR3byBudW1iZXJzIHJlcHJlc2VudGluZyB0aGUgbmV3IHJhbmdlIHRvIG1lcmdlIGluLlxuICAgKiBAcmV0dXJucyBUaGUgcmFuZ2VzIGlucHV0IHdpdGggdGhlIG5ldyByYW5nZSBtZXJnZWQgaW4gcGxhY2VcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIF9tZXJnZVJhbmdlcyhyYW5nZXM6IFtudW1iZXIsIG51bWJlcl1bXSwgbmV3UmFuZ2U6IFtudW1iZXIsIG51bWJlcl0pOiBbbnVtYmVyLCBudW1iZXJdW10ge1xuICAgIGxldCBpblJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJhbmdlID0gcmFuZ2VzW2ldO1xuICAgICAgaWYgKCFpblJhbmdlKSB7XG4gICAgICAgIGlmIChuZXdSYW5nZVsxXSA8PSByYW5nZVswXSkge1xuICAgICAgICAgIC8vIENhc2UgMTogTmV3IHJhbmdlIGlzIGJlZm9yZSB0aGUgc2VhcmNoIHJhbmdlXG4gICAgICAgICAgcmFuZ2VzLnNwbGljZShpLCAwLCBuZXdSYW5nZSk7XG4gICAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdSYW5nZVsxXSA8PSByYW5nZVsxXSkge1xuICAgICAgICAgIC8vIENhc2UgMjogTmV3IHJhbmdlIGlzIGVpdGhlciB3aG9sbHkgY29udGFpbmVkIHdpdGhpbiB0aGVcbiAgICAgICAgICAvLyBzZWFyY2ggcmFuZ2Ugb3Igb3ZlcmxhcHMgd2l0aCB0aGUgZnJvbnQgb2YgaXRcbiAgICAgICAgICByYW5nZVswXSA9IE1hdGgubWluKG5ld1JhbmdlWzBdLCByYW5nZVswXSk7XG4gICAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdSYW5nZVswXSA8IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAzOiBOZXcgcmFuZ2UgZWl0aGVyIHdob2xseSBjb250YWlucyB0aGUgc2VhcmNoIHJhbmdlXG4gICAgICAgICAgLy8gb3Igb3ZlcmxhcHMgd2l0aCB0aGUgZW5kIG9mIGl0XG4gICAgICAgICAgcmFuZ2VbMF0gPSBNYXRoLm1pbihuZXdSYW5nZVswXSwgcmFuZ2VbMF0pO1xuICAgICAgICAgIGluUmFuZ2UgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FzZSA0OiBOZXcgcmFuZ2Ugc3RhcnRzIGFmdGVyIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobmV3UmFuZ2VbMV0gPD0gcmFuZ2VbMF0pIHtcbiAgICAgICAgICAvLyBDYXNlIDU6IE5ldyByYW5nZSBleHRlbmRzIGZyb20gcHJldmlvdXMgcmFuZ2UgYnV0IGRvZXNuJ3RcbiAgICAgICAgICAvLyByZWFjaCB0aGUgY3VycmVudCBvbmVcbiAgICAgICAgICByYW5nZXNbaSAtIDFdWzFdID0gbmV3UmFuZ2VbMV07XG4gICAgICAgICAgcmV0dXJuIHJhbmdlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdSYW5nZVsxXSA8PSByYW5nZVsxXSkge1xuICAgICAgICAgIC8vIENhc2UgNjogTmV3IHJhbmdlIGV4dGVuZHMgZnJvbSBwcnZpb3VzIHJhbmdlIGludG8gdGhlXG4gICAgICAgICAgLy8gY3VycmVudCByYW5nZVxuICAgICAgICAgIHJhbmdlc1tpIC0gMV1bMV0gPSBNYXRoLm1heChuZXdSYW5nZVsxXSwgcmFuZ2VbMV0pO1xuICAgICAgICAgIHJhbmdlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgaW5SYW5nZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiByYW5nZXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXNlIDc6IE5ldyByYW5nZSBleHRlbmRzIGZyb20gcHJldmlvdXMgcmFuZ2UgcGFzdCB0aGVcbiAgICAgICAgLy8gZW5kIG9mIHRoZSBjdXJyZW50IHJhbmdlXG4gICAgICAgIHJhbmdlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGktLTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5SYW5nZSkge1xuICAgICAgLy8gQ2FzZSA4OiBOZXcgcmFuZ2UgZXh0ZW5kcyBwYXN0IHRoZSBsYXN0IGV4aXN0aW5nIHJhbmdlXG4gICAgICByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdWzFdID0gbmV3UmFuZ2VbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENhc2UgOTogTmV3IHJhbmdlIHN0YXJ0cyBhZnRlciB0aGUgbGFzdCBleGlzdGluZyByYW5nZVxuICAgICAgcmFuZ2VzLnB1c2gobmV3UmFuZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZXM7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGNsYXNzIEdyaWRDYWNoZTxUPiB7XG4gIHB1YmxpYyBjYWNoZTogKFQgfCB1bmRlZmluZWQpW11bXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jYWNoZSA9IFtdO1xuICB9XG5cbiAgcHVibGljIHJlc2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgaWYgKHRoaXMuY2FjaGUubGVuZ3RoIDw9IHgpIHtcbiAgICAgICAgdGhpcy5jYWNoZS5wdXNoKFtdKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IHkgPSB0aGlzLmNhY2hlW3hdLmxlbmd0aDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgIHRoaXMuY2FjaGVbeF0ucHVzaCh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWNoZVt4XS5sZW5ndGggPSBoZWlnaHQ7XG4gICAgfVxuICAgIHRoaXMuY2FjaGUubGVuZ3RoID0gd2lkdGg7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCB0aGlzLmNhY2hlLmxlbmd0aDsgeCsrKSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuY2FjaGVbeF0ubGVuZ3RoOyB5KyspIHtcbiAgICAgICAgdGhpcy5jYWNoZVt4XVt5XSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJy4vQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBpczI1NkNvbG9yIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9DaGFyQXRsYXNVdGlscyc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElMaW5raWZpZXJFdmVudCwgSUxpbmtpZmllciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBMaW5rUmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZTogSUxpbmtpZmllckV2ZW50IHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgekluZGV4OiBudW1iZXIsXG4gICAgY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcmVuZGVyZXJJZDogbnVtYmVyLFxuICAgIGxpbmtpZmllcjogSUxpbmtpZmllcixcbiAgICByZWFkb25seSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICByZWFkb25seSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ2xpbmsnLCB6SW5kZXgsIHRydWUsIGNvbG9ycywgcmVuZGVyZXJJZCwgYnVmZmVyU2VydmljZSwgb3B0aW9uc1NlcnZpY2UpO1xuICAgIGxpbmtpZmllci5vbkxpbmtIb3ZlcihlID0+IHRoaXMuX29uTGlua0hvdmVyKGUpKTtcbiAgICBsaW5raWZpZXIub25MaW5rTGVhdmUoZSA9PiB0aGlzLl9vbkxpbmtMZWF2ZShlKSk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICBzdXBlci5yZXNpemUoZGltKTtcbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJDdXJyZW50TGluaygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJDdXJyZW50TGluaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueDEsIHRoaXMuX3N0YXRlLnkxLCB0aGlzLl9zdGF0ZS5jb2xzIC0gdGhpcy5fc3RhdGUueDEsIDEpO1xuICAgICAgY29uc3QgbWlkZGxlUm93Q291bnQgPSB0aGlzLl9zdGF0ZS55MiAtIHRoaXMuX3N0YXRlLnkxIC0gMTtcbiAgICAgIGlmIChtaWRkbGVSb3dDb3VudCA+IDApIHtcbiAgICAgICAgdGhpcy5fY2xlYXJDZWxscygwLCB0aGlzLl9zdGF0ZS55MSArIDEsIHRoaXMuX3N0YXRlLmNvbHMsIG1pZGRsZVJvd0NvdW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NsZWFyQ2VsbHMoMCwgdGhpcy5fc3RhdGUueTIsIHRoaXMuX3N0YXRlLngyLCAxKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0hvdmVyKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIGlmIChlLmZnID09PSBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SKSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgIH0gZWxzZSBpZiAoZS5mZyAmJiBpczI1NkNvbG9yKGUuZmcpKSB7XG4gICAgICAvLyAyNTYgY29sb3Igc3VwcG9ydFxuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2UuZmddLmNzcztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztcbiAgICB9XG5cbiAgICBpZiAoZS55MSA9PT0gZS55Mikge1xuICAgICAgLy8gU2luZ2xlIGxpbmUgbGlua1xuICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsIGUueTEsIGUueDIgLSBlLngxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTXVsdGktbGluZSBsaW5rXG4gICAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoZS54MSwgZS55MSwgZS5jb2xzIC0gZS54MSk7XG4gICAgICBmb3IgKGxldCB5ID0gZS55MSArIDE7IHkgPCBlLnkyOyB5KyspIHtcbiAgICAgICAgdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKDAsIHksIGUuY29scyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoMCwgZS55MiwgZS54Mik7XG4gICAgfVxuICAgIHRoaXMuX3N0YXRlID0gZTtcbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0xlYXZlKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3dJZkZhbHN5PFQ+KHZhbHVlOiBUIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFQge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZSBtdXN0IG5vdCBiZSBmYWxzeScpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IEJhc2VSZW5kZXJMYXllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvQmFzZVJlbmRlckxheWVyJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmludGVyZmFjZSBJU2VsZWN0aW9uU3RhdGUge1xuICBzdGFydD86IFtudW1iZXIsIG51bWJlcl07XG4gIGVuZD86IFtudW1iZXIsIG51bWJlcl07XG4gIGNvbHVtblNlbGVjdE1vZGU/OiBib29sZWFuO1xuICB5ZGlzcD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFNlbGVjdGlvblJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGUhOiBJU2VsZWN0aW9uU3RhdGU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBjb2xvcnM6IElDb2xvclNldCxcbiAgICByZW5kZXJlcklkOiBudW1iZXIsXG4gICAgcmVhZG9ubHkgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcihjb250YWluZXIsICdzZWxlY3Rpb24nLCB6SW5kZXgsIHRydWUsIGNvbG9ycywgcmVuZGVyZXJJZCwgYnVmZmVyU2VydmljZSwgb3B0aW9uc1NlcnZpY2UpO1xuICAgIHRoaXMuX2NsZWFyU3RhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFyU3RhdGUoKTogdm9pZCB7XG4gICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICBzdGFydDogdW5kZWZpbmVkLFxuICAgICAgZW5kOiB1bmRlZmluZWQsXG4gICAgICBjb2x1bW5TZWxlY3RNb2RlOiB1bmRlZmluZWQsXG4gICAgICB5ZGlzcDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZShkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9jbGVhclN0YXRlKCk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlLnN0YXJ0ICYmIHRoaXMuX3N0YXRlLmVuZCkge1xuICAgICAgdGhpcy5fY2xlYXJTdGF0ZSgpO1xuICAgICAgdGhpcy5fY2xlYXJBbGwoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0sIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBTZWxlY3Rpb24gaGFzIG5vdCBjaGFuZ2VkXG4gICAgaWYgKCF0aGlzLl9kaWRTdGF0ZUNoYW5nZShzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYWxsIHNlbGVjdGlvbnNcbiAgICB0aGlzLl9jbGVhckFsbCgpO1xuXG4gICAgLy8gU2VsZWN0aW9uIGRvZXMgbm90IGV4aXN0XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICB0aGlzLl9jbGVhclN0YXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJhbnNsYXRlIGZyb20gYnVmZmVyIHBvc2l0aW9uIHRvIHZpZXdwb3J0IHBvc2l0aW9uXG4gICAgY29uc3Qgdmlld3BvcnRTdGFydFJvdyA9IHN0YXJ0WzFdIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgY29uc3Qgdmlld3BvcnRFbmRSb3cgPSBlbmRbMV0gLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gTWF0aC5tYXgodmlld3BvcnRTdGFydFJvdywgMCk7XG4gICAgY29uc3Qgdmlld3BvcnRDYXBwZWRFbmRSb3cgPSBNYXRoLm1pbih2aWV3cG9ydEVuZFJvdywgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG5cbiAgICAvLyBObyBuZWVkIHRvIGRyYXcgdGhlIHNlbGVjdGlvblxuICAgIGlmICh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID49IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyB8fCB2aWV3cG9ydENhcHBlZEVuZFJvdyA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLnNlbGVjdGlvbi5jc3M7XG5cbiAgICBpZiAoY29sdW1uU2VsZWN0TW9kZSkge1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSBzdGFydFswXTtcbiAgICAgIGNvbnN0IHdpZHRoID0gZW5kWzBdIC0gc3RhcnRDb2w7XG4gICAgICBjb25zdCBoZWlnaHQgPSB2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxO1xuICAgICAgdGhpcy5fZmlsbENlbGxzKHN0YXJ0Q29sLCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gdmlld3BvcnRTdGFydFJvdyA9PT0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyA/IHN0YXJ0WzBdIDogMDtcbiAgICAgIGNvbnN0IHN0YXJ0Um93RW5kQ29sID0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyA9PT0gdmlld3BvcnRDYXBwZWRFbmRSb3cgPyBlbmRbMF0gOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICB0aGlzLl9maWxsQ2VsbHMoc3RhcnRDb2wsIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3csIHN0YXJ0Um93RW5kQ29sIC0gc3RhcnRDb2wsIDEpO1xuXG4gICAgICAvLyBEcmF3IG1pZGRsZSByb3dzXG4gICAgICBjb25zdCBtaWRkbGVSb3dzQ291bnQgPSBNYXRoLm1heCh2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgLSAxLCAwKTtcbiAgICAgIHRoaXMuX2ZpbGxDZWxscygwLCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ICsgMSwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCBtaWRkbGVSb3dzQ291bnQpO1xuXG4gICAgICAvLyBEcmF3IGZpbmFsIHJvd1xuICAgICAgaWYgKHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgIT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93KSB7XG4gICAgICAgIC8vIE9ubHkgZHJhdyB2aWV3cG9ydEVuZFJvdyBpZiBpdCdzIG5vdCB0aGUgc2FtZSBhcyB2aWV3cG9ydFN0YXJ0Um93XG4gICAgICAgIGNvbnN0IGVuZENvbCA9IHZpZXdwb3J0RW5kUm93ID09PSB2aWV3cG9ydENhcHBlZEVuZFJvdyA/IGVuZFswXSA6IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgdGhpcy5fZmlsbENlbGxzKDAsIHZpZXdwb3J0Q2FwcGVkRW5kUm93LCBlbmRDb2wsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNhdmUgc3RhdGUgZm9yIG5leHQgcmVuZGVyXG4gICAgdGhpcy5fc3RhdGUuc3RhcnQgPSBbc3RhcnRbMF0sIHN0YXJ0WzFdXTtcbiAgICB0aGlzLl9zdGF0ZS5lbmQgPSBbZW5kWzBdLCBlbmRbMV1dO1xuICAgIHRoaXMuX3N0YXRlLmNvbHVtblNlbGVjdE1vZGUgPSBjb2x1bW5TZWxlY3RNb2RlO1xuICAgIHRoaXMuX3N0YXRlLnlkaXNwID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gIH1cblxuICBwcml2YXRlIF9kaWRTdGF0ZUNoYW5nZShzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuLCB5ZGlzcDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLl9hcmVDb29yZGluYXRlc0VxdWFsKHN0YXJ0LCB0aGlzLl9zdGF0ZS5zdGFydCkgfHxcbiAgICAgICF0aGlzLl9hcmVDb29yZGluYXRlc0VxdWFsKGVuZCwgdGhpcy5fc3RhdGUuZW5kKSB8fFxuICAgICAgY29sdW1uU2VsZWN0TW9kZSAhPT0gdGhpcy5fc3RhdGUuY29sdW1uU2VsZWN0TW9kZSB8fFxuICAgICAgeWRpc3AgIT09IHRoaXMuX3N0YXRlLnlkaXNwO1xuICB9XG5cbiAgcHJpdmF0ZSBfYXJlQ29vcmRpbmF0ZXNFcXVhbChjb29yZDE6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvb3JkMjogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICAgIGlmICghY29vcmQxIHx8ICFjb29yZDIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29vcmQxWzBdID09PSBjb29yZDJbMF0gJiYgY29vcmQxWzFdID09PSBjb29yZDJbMV07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LCBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ2hhckRhdGEsIElDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBHcmlkQ2FjaGUgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL0dyaWRDYWNoZSc7XG5pbXBvcnQgeyBCYXNlUmVuZGVyTGF5ZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL0Jhc2VSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBDb250ZW50IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgSm9pbmVkQ2VsbERhdGEgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL0NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5JztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG4vKipcbiAqIFRoaXMgQ2hhckRhdGEgbG9va3MgbGlrZSBhIG51bGwgY2hhcmFjdGVyLCB3aGljaCB3aWxsIGZvcmMgYSBjbGVhciBhbmQgcmVuZGVyXG4gKiB3aGVuIHRoZSBjaGFyYWN0ZXIgY2hhbmdlcyAoYSByZWd1bGFyIHNwYWNlICcgJyBjaGFyYWN0ZXIgbWF5IG5vdCBhcyBpdCdzXG4gKiBkcmF3biBzdGF0ZSBpcyBhIGNsZWFyZWQgY2VsbCkuXG4gKi9cbi8vIGNvbnN0IE9WRVJMQVBfT1dORURfQ0hBUl9EQVRBOiBDaGFyRGF0YSA9IFtudWxsLCAnJywgMCwgLTFdO1xuXG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlckxheWVyIGV4dGVuZHMgQmFzZVJlbmRlckxheWVyIHtcbiAgcHJpdmF0ZSBfc3RhdGU6IEdyaWRDYWNoZTxDaGFyRGF0YT47XG4gIHByaXZhdGUgX2NoYXJhY3RlcldpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jaGFyYWN0ZXJGb250OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBfY2hhcmFjdGVyT3ZlcmxhcENhY2hlOiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfSA9IHt9O1xuICBwcml2YXRlIF9jaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTogSUNoYXJhY3RlckpvaW5lclJlZ2lzdHJ5O1xuICBwcml2YXRlIF93b3JrQ2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgekluZGV4OiBudW1iZXIsXG4gICAgY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgY2hhcmFjdGVySm9pbmVyUmVnaXN0cnk6IElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSxcbiAgICBhbHBoYTogYm9vbGVhbixcbiAgICByZW5kZXJlcklkOiBudW1iZXIsXG4gICAgcmVhZG9ubHkgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcihjb250YWluZXIsICd0ZXh0JywgekluZGV4LCBhbHBoYSwgY29sb3JzLCByZW5kZXJlcklkLCBidWZmZXJTZXJ2aWNlLCBvcHRpb25zU2VydmljZSk7XG4gICAgdGhpcy5fc3RhdGUgPSBuZXcgR3JpZENhY2hlPENoYXJEYXRhPigpO1xuICAgIHRoaXMuX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5ID0gY2hhcmFjdGVySm9pbmVyUmVnaXN0cnk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGRpbTogSVJlbmRlckRpbWVuc2lvbnMpOiB2b2lkIHtcbiAgICBzdXBlci5yZXNpemUoZGltKTtcblxuICAgIC8vIENsZWFyIHRoZSBjaGFyYWN0ZXIgd2lkdGggY2FjaGUgaWYgdGhlIGZvbnQgb3Igd2lkdGggaGFzIGNoYW5nZWRcbiAgICBjb25zdCB0ZXJtaW5hbEZvbnQgPSB0aGlzLl9nZXRGb250KGZhbHNlLCBmYWxzZSk7XG4gICAgaWYgKHRoaXMuX2NoYXJhY3RlcldpZHRoICE9PSBkaW0uc2NhbGVkQ2hhcldpZHRoIHx8IHRoaXMuX2NoYXJhY3RlckZvbnQgIT09IHRlcm1pbmFsRm9udCkge1xuICAgICAgdGhpcy5fY2hhcmFjdGVyV2lkdGggPSBkaW0uc2NhbGVkQ2hhcldpZHRoO1xuICAgICAgdGhpcy5fY2hhcmFjdGVyRm9udCA9IHRlcm1pbmFsRm9udDtcbiAgICAgIHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZSA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXNpemluZyB0aGUgY2FudmFzIGRpc2NhcmRzIHRoZSBjb250ZW50cyBvZiB0aGUgY2FudmFzIHNvIGNsZWFyIHN0YXRlXG4gICAgdGhpcy5fc3RhdGUuY2xlYXIoKTtcbiAgICB0aGlzLl9zdGF0ZS5yZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuX3N0YXRlLmNsZWFyKCk7XG4gICAgdGhpcy5fY2xlYXJBbGwoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZvckVhY2hDZWxsKFxuICAgIGZpcnN0Um93OiBudW1iZXIsXG4gICAgbGFzdFJvdzogbnVtYmVyLFxuICAgIGpvaW5lclJlZ2lzdHJ5OiBJQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgfCBudWxsLFxuICAgIGNhbGxiYWNrOiAoXG4gICAgICBjZWxsOiBJQ2VsbERhdGEsXG4gICAgICB4OiBudW1iZXIsXG4gICAgICB5OiBudW1iZXJcbiAgICApID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgZm9yIChsZXQgeSA9IGZpcnN0Um93OyB5IDw9IGxhc3RSb3c7IHkrKykge1xuICAgICAgY29uc3Qgcm93ID0geSArIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgICAgY29uc3Qgam9pbmVkUmFuZ2VzID0gam9pbmVyUmVnaXN0cnkgPyBqb2luZXJSZWdpc3RyeS5nZXRKb2luZWRDaGFyYWN0ZXJzKHJvdykgOiBbXTtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOyB4KyspIHtcbiAgICAgICAgbGluZSEubG9hZENlbGwoeCwgdGhpcy5fd29ya0NlbGwpO1xuICAgICAgICBsZXQgY2VsbCA9IHRoaXMuX3dvcmtDZWxsO1xuXG4gICAgICAgIC8vIElmIHRydWUsIGluZGljYXRlcyB0aGF0IHRoZSBjdXJyZW50IGNoYXJhY3RlcihzKSB0byBkcmF3IHdlcmUgam9pbmVkLlxuICAgICAgICBsZXQgaXNKb2luZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGxhc3RDaGFyWCA9IHg7XG5cbiAgICAgICAgLy8gVGhlIGNoYXJhY3RlciB0byB0aGUgbGVmdCBpcyBhIHdpZGUgY2hhcmFjdGVyLCBkcmF3aW5nIGlzIG93bmVkIGJ5XG4gICAgICAgIC8vIHRoZSBjaGFyIGF0IHgtMVxuICAgICAgICBpZiAoY2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcm9jZXNzIGFueSBqb2luZWQgY2hhcmFjdGVyIHJhbmdlcyBhcyBuZWVkZWQuIEJlY2F1c2Ugb2YgaG93IHRoZVxuICAgICAgICAvLyByYW5nZXMgYXJlIHByb2R1Y2VkLCB3ZSBrbm93IHRoYXQgdGhleSBhcmUgdmFsaWQgZm9yIHRoZSBjaGFyYWN0ZXJzXG4gICAgICAgIC8vIGFuZCBhdHRyaWJ1dGVzIG9mIG91ciBpbnB1dC5cbiAgICAgICAgaWYgKGpvaW5lZFJhbmdlcy5sZW5ndGggPiAwICYmIHggPT09IGpvaW5lZFJhbmdlc1swXVswXSkge1xuICAgICAgICAgIGlzSm9pbmVkID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCByYW5nZSA9IGpvaW5lZFJhbmdlcy5zaGlmdCgpITtcblxuICAgICAgICAgIC8vIFdlIGFscmVhZHkga25vdyB0aGUgZXhhY3Qgc3RhcnQgYW5kIGVuZCBjb2x1bW4gb2YgdGhlIGpvaW5lZCByYW5nZSxcbiAgICAgICAgICAvLyBzbyB3ZSBnZXQgdGhlIHN0cmluZyBhbmQgd2lkdGggcmVwcmVzZW50aW5nIGl0IGRpcmVjdGx5XG5cbiAgICAgICAgICBjZWxsID0gbmV3IEpvaW5lZENlbGxEYXRhKFxuICAgICAgICAgICAgdGhpcy5fd29ya0NlbGwsXG4gICAgICAgICAgICBsaW5lIS50cmFuc2xhdGVUb1N0cmluZyh0cnVlLCByYW5nZVswXSwgcmFuZ2VbMV0pLFxuICAgICAgICAgICAgcmFuZ2VbMV0gLSByYW5nZVswXVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICAvLyBTa2lwIG92ZXIgdGhlIGNlbGxzIG9jY3VwaWVkIGJ5IHRoaXMgcmFuZ2UgaW4gdGhlIGxvb3BcbiAgICAgICAgICBsYXN0Q2hhclggPSByYW5nZVsxXSAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIGlzIGFuIG92ZXJsYXBwaW5nIGNoYXIgYW5kIHRoZSBjaGFyYWN0ZXIgdG8gdGhlXG4gICAgICAgIC8vIHJpZ2h0IGlzIGEgc3BhY2UsIHRha2Ugb3duZXJzaGlwIG9mIHRoZSBjZWxsIHRvIHRoZSByaWdodC4gV2Ugc2tpcFxuICAgICAgICAvLyB0aGlzIGNoZWNrIGZvciBqb2luZWQgY2hhcmFjdGVycyBiZWNhdXNlIHRoZWlyIHJlbmRlcmluZyBsaWtlbHkgd29uJ3RcbiAgICAgICAgLy8geWllbGQgdGhlIHNhbWUgcmVzdWx0IGFzIHJlbmRlcmluZyB0aGUgbGFzdCBjaGFyYWN0ZXIgaW5kaXZpZHVhbGx5LlxuICAgICAgICBpZiAoIWlzSm9pbmVkICYmIHRoaXMuX2lzT3ZlcmxhcHBpbmcoY2VsbCkpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIGlzIG92ZXJsYXBwaW5nLCB3ZSB3YW50IHRvIGZvcmNlIGEgcmUtcmVuZGVyIG9uIGV2ZXJ5XG4gICAgICAgICAgLy8gZnJhbWUuIFRoaXMgaXMgc3BlY2lmaWNhbGx5IHRvIHdvcmsgYXJvdW5kIHRoZSBjYXNlIHdoZXJlIHR3b1xuICAgICAgICAgIC8vIG92ZXJsYXBpbmcgY2hhcnMgYGFgIGFuZCBgYmAgYXJlIGFkamFjZW50LCB0aGUgY3Vyc29yIGlzIG1vdmVkIHRvIGIgYW5kIGFcbiAgICAgICAgICAvLyBzcGFjZSBpcyBhZGRlZC4gV2l0aG91dCB0aGlzLCB0aGUgZmlyc3QgaGFsZiBvZiBgYmAgd291bGQgbmV2ZXJcbiAgICAgICAgICAvLyBnZXQgcmVtb3ZlZCwgYW5kIGBhYCB3b3VsZCBub3QgcmUtcmVuZGVyIGJlY2F1c2UgaXQgdGhpbmtzIGl0J3NcbiAgICAgICAgICAvLyBhbHJlYWR5IGluIHRoZSBjb3JyZWN0IHN0YXRlLlxuICAgICAgICAgIC8vIHRoaXMuX3N0YXRlLmNhY2hlW3hdW3ldID0gT1ZFUkxBUF9PV05FRF9DSEFSX0RBVEE7XG4gICAgICAgICAgaWYgKGxhc3RDaGFyWCA8IGxpbmUhLmxlbmd0aCAtIDEgJiYgbGluZSEuZ2V0Q29kZVBvaW50KGxhc3RDaGFyWCArIDEpID09PSBOVUxMX0NFTExfQ09ERSkge1xuICAgICAgICAgICAgLy8gcGF0Y2ggd2lkdGggdG8gMlxuICAgICAgICAgICAgY2VsbC5jb250ZW50ICY9IH5Db250ZW50LldJRFRIX01BU0s7XG4gICAgICAgICAgICBjZWxsLmNvbnRlbnQgfD0gMiA8PCBDb250ZW50LldJRFRIX1NISUZUO1xuICAgICAgICAgICAgLy8gdGhpcy5fY2xlYXJDaGFyKHggKyAxLCB5KTtcbiAgICAgICAgICAgIC8vIFRoZSBvdmVybGFwcGluZyBjaGFyJ3MgY2hhciBkYXRhIHdpbGwgZm9yY2UgYSBjbGVhciBhbmQgcmVuZGVyIHdoZW4gdGhlXG4gICAgICAgICAgICAvLyBvdmVybGFwcGluZyBjaGFyIGlzIG5vIGxvbmdlciB0byB0aGUgbGVmdCBvZiB0aGUgY2hhcmFjdGVyIGFuZCBhbHNvIHdoZW5cbiAgICAgICAgICAgIC8vIHRoZSBzcGFjZSBjaGFuZ2VzIHRvIGFub3RoZXIgY2hhcmFjdGVyLlxuICAgICAgICAgICAgLy8gdGhpcy5fc3RhdGUuY2FjaGVbeCArIDFdW3ldID0gT1ZFUkxBUF9PV05FRF9DSEFSX0RBVEE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soXG4gICAgICAgICAgY2VsbCxcbiAgICAgICAgICB4LFxuICAgICAgICAgIHlcbiAgICAgICAgKTtcblxuICAgICAgICB4ID0gbGFzdENoYXJYO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEcmF3cyB0aGUgYmFja2dyb3VuZCBmb3IgYSBzcGVjaWZpZWQgcmFuZ2Ugb2YgY29sdW1ucy4gVHJpZXMgdG8gYmF0Y2ggYWRqYWNlbnQgY2VsbHMgb2YgdGhlXG4gICAqIHNhbWUgY29sb3IgdG9nZXRoZXIgdG8gcmVkdWNlIGRyYXcgY2FsbHMuXG4gICAqL1xuICBwcml2YXRlIF9kcmF3QmFja2dyb3VuZChmaXJzdFJvdzogbnVtYmVyLCBsYXN0Um93OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBjdHggPSB0aGlzLl9jdHg7XG4gICAgY29uc3QgY29scyA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICBsZXQgc3RhcnRYOiBudW1iZXIgPSAwO1xuICAgIGxldCBzdGFydFk6IG51bWJlciA9IDA7XG4gICAgbGV0IHByZXZGaWxsU3R5bGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgY3R4LnNhdmUoKTtcblxuICAgIHRoaXMuX2ZvckVhY2hDZWxsKGZpcnN0Um93LCBsYXN0Um93LCBudWxsLCAoY2VsbCwgeCwgeSkgPT4ge1xuICAgICAgLy8gbGlidnRlIGFuZCB4dGVybSBib3RoIGRyYXcgdGhlIGJhY2tncm91bmQgKGJ1dCBub3QgZm9yZWdyb3VuZCkgb2YgaW52aXNpYmxlIGNoYXJhY3RlcnMsXG4gICAgICAvLyBzbyB3ZSBzaG91bGQgdG9vLlxuICAgICAgbGV0IG5leHRGaWxsU3R5bGUgPSBudWxsOyAvLyBudWxsIHJlcHJlc2VudHMgZGVmYXVsdCBiYWNrZ3JvdW5kIGNvbG9yXG5cbiAgICAgIGlmIChjZWxsLmlzSW52ZXJzZSgpKSB7XG4gICAgICAgIGlmIChjZWxsLmlzRmdEZWZhdWx0KCkpIHtcbiAgICAgICAgICBuZXh0RmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuaXNGZ1JHQigpKSB7XG4gICAgICAgICAgbmV4dEZpbGxTdHlsZSA9IGByZ2IoJHtBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoY2VsbC5nZXRGZ0NvbG9yKCkpLmpvaW4oJywnKX0pYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0RmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmFuc2lbY2VsbC5nZXRGZ0NvbG9yKCldLmNzcztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdSR0IoKSkge1xuICAgICAgICBuZXh0RmlsbFN0eWxlID0gYHJnYigke0F0dHJpYnV0ZURhdGEudG9Db2xvclJHQihjZWxsLmdldEJnQ29sb3IoKSkuam9pbignLCcpfSlgO1xuICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQmdQYWxldHRlKCkpIHtcbiAgICAgICAgbmV4dEZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5hbnNpW2NlbGwuZ2V0QmdDb2xvcigpXS5jc3M7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcmV2RmlsbFN0eWxlID09PSBudWxsKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgZWl0aGVyIHRoZSBmaXJzdCBpdGVyYXRpb24sIG9yIHRoZSBkZWZhdWx0IGJhY2tncm91bmQgd2FzIHNldC4gRWl0aGVyIHdheSwgd2VcbiAgICAgICAgLy8gZG9uJ3QgbmVlZCB0byBkcmF3IGFueXRoaW5nLlxuICAgICAgICBzdGFydFggPSB4O1xuICAgICAgICBzdGFydFkgPSB5O1xuICAgICAgfVxuXG4gICAgICBpZiAoeSAhPT0gc3RhcnRZKSB7XG4gICAgICAgIC8vIG91ciByb3cgY2hhbmdlZCwgZHJhdyB0aGUgcHJldmlvdXMgcm93XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBwcmV2RmlsbFN0eWxlID8gcHJldkZpbGxTdHlsZSA6ICcnO1xuICAgICAgICB0aGlzLl9maWxsQ2VsbHMoc3RhcnRYLCBzdGFydFksIGNvbHMgLSBzdGFydFgsIDEpO1xuICAgICAgICBzdGFydFggPSB4O1xuICAgICAgICBzdGFydFkgPSB5O1xuICAgICAgfSBlbHNlIGlmIChwcmV2RmlsbFN0eWxlICE9PSBuZXh0RmlsbFN0eWxlKSB7XG4gICAgICAgIC8vIG91ciBjb2xvciBjaGFuZ2VkLCBkcmF3IHRoZSBwcmV2aW91cyBjaGFyYWN0ZXJzIGluIHRoaXMgcm93XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBwcmV2RmlsbFN0eWxlID8gcHJldkZpbGxTdHlsZSA6ICcnO1xuICAgICAgICB0aGlzLl9maWxsQ2VsbHMoc3RhcnRYLCBzdGFydFksIHggLSBzdGFydFgsIDEpO1xuICAgICAgICBzdGFydFggPSB4O1xuICAgICAgICBzdGFydFkgPSB5O1xuICAgICAgfVxuXG4gICAgICBwcmV2RmlsbFN0eWxlID0gbmV4dEZpbGxTdHlsZTtcbiAgICB9KTtcblxuICAgIC8vIGZsdXNoIHRoZSBsYXN0IGNvbG9yIHdlIGVuY291bnRlcmVkXG4gICAgaWYgKHByZXZGaWxsU3R5bGUgIT09IG51bGwpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBwcmV2RmlsbFN0eWxlO1xuICAgICAgdGhpcy5fZmlsbENlbGxzKHN0YXJ0WCwgc3RhcnRZLCBjb2xzIC0gc3RhcnRYLCAxKTtcbiAgICB9XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZHJhd0ZvcmVncm91bmQoZmlyc3RSb3c6IG51bWJlciwgbGFzdFJvdzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZm9yRWFjaENlbGwoZmlyc3RSb3csIGxhc3RSb3csIHRoaXMuX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LCAoY2VsbCwgeCwgeSkgPT4ge1xuICAgICAgaWYgKGNlbGwuaXNJbnZpc2libGUoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9kcmF3Q2hhcnMoY2VsbCwgeCwgeSk7XG4gICAgICBpZiAoY2VsbC5pc1VuZGVybGluZSgpKSB7XG4gICAgICAgIHRoaXMuX2N0eC5zYXZlKCk7XG5cbiAgICAgICAgaWYgKGNlbGwuaXNJbnZlcnNlKCkpIHtcbiAgICAgICAgICBpZiAoY2VsbC5pc0JnRGVmYXVsdCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0JnUkdCKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0QmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtjZWxsLmdldEJnQ29sb3IoKV0uY3NzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY2VsbC5pc0ZnRGVmYXVsdCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc0ZnUkdCKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSBgcmdiKCR7QXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGNlbGwuZ2V0RmdDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmZyA9IGNlbGwuZ2V0RmdDb2xvcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMgJiYgY2VsbC5pc0JvbGQoKSAmJiBmZyA8IDgpIHtcbiAgICAgICAgICAgICAgZmcgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuYW5zaVtmZ10uY3NzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyh4LCB5LCBjZWxsLmdldFdpZHRoKCkpO1xuICAgICAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIG9uR3JpZENoYW5nZWQoZmlyc3RSb3c6IG51bWJlciwgbGFzdFJvdzogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gUmVzaXplIGhhcyBub3QgYmVlbiBjYWxsZWQgeWV0XG4gICAgaWYgKHRoaXMuX3N0YXRlLmNhY2hlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jaGFyQXRsYXMpIHtcbiAgICAgIHRoaXMuX2NoYXJBdGxhcy5iZWdpbkZyYW1lKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2xlYXJDZWxscygwLCBmaXJzdFJvdywgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCBsYXN0Um93IC0gZmlyc3RSb3cgKyAxKTtcbiAgICB0aGlzLl9kcmF3QmFja2dyb3VuZChmaXJzdFJvdywgbGFzdFJvdyk7XG4gICAgdGhpcy5fZHJhd0ZvcmVncm91bmQoZmlyc3RSb3csIGxhc3RSb3cpO1xuICB9XG5cbiAgcHVibGljIG9uT3B0aW9uc0NoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fc2V0VHJhbnNwYXJlbmN5KHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuYWxsb3dUcmFuc3BhcmVuY3kpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgYSBjaGFyYWN0ZXIgaXMgb3ZlcmxhcHBpbmcgdG8gdGhlIG5leHQgY2VsbC5cbiAgICovXG4gIHByaXZhdGUgX2lzT3ZlcmxhcHBpbmcoY2VsbDogSUNlbGxEYXRhKTogYm9vbGVhbiB7XG4gICAgLy8gT25seSBzaW5nbGUgY2VsbCBjaGFyYWN0ZXJzIGNhbiBiZSBvdmVybGFwcGluZywgcmVuZGVyaW5nIGlzc3VlcyBjYW5cbiAgICAvLyBvY2N1ciB3aXRob3V0IHRoaXMgY2hlY2tcbiAgICBpZiAoY2VsbC5nZXRXaWR0aCgpICE9PSAxKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gV2UgYXNzdW1lIHRoYXQgYW55IGFzY2lpIGNoYXJhY3RlciB3aWxsIG5vdCBvdmVybGFwXG4gICAgaWYgKGNlbGwuZ2V0Q29kZSgpIDwgMjU2KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgY2hhcnMgPSBjZWxsLmdldENoYXJzKCk7XG5cbiAgICAvLyBEZWxpdmVyIGZyb20gY2FjaGUgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZS5oYXNPd25Qcm9wZXJ0eShjaGFycykpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGVbY2hhcnNdO1xuICAgIH1cblxuICAgIC8vIFNldHVwIHRoZSBmb250XG4gICAgdGhpcy5fY3R4LnNhdmUoKTtcbiAgICB0aGlzLl9jdHguZm9udCA9IHRoaXMuX2NoYXJhY3RlckZvbnQ7XG5cbiAgICAvLyBNZWFzdXJlIHRoZSB3aWR0aCBvZiB0aGUgY2hhcmFjdGVyLCBidXQgTWF0aC5mbG9vciBpdFxuICAgIC8vIGJlY2F1c2UgdGhhdCBpcyB3aGF0IHRoZSByZW5kZXJlciBkb2VzIHdoZW4gaXQgY2FsY3VsYXRlc1xuICAgIC8vIHRoZSBjaGFyYWN0ZXIgZGltZW5zaW9ucyB3ZSBhcmUgY29tcGFyaW5nIGFnYWluc3RcbiAgICBjb25zdCBvdmVybGFwcyA9IE1hdGguZmxvb3IodGhpcy5fY3R4Lm1lYXN1cmVUZXh0KGNoYXJzKS53aWR0aCkgPiB0aGlzLl9jaGFyYWN0ZXJXaWR0aDtcblxuICAgIC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIGNvbnRleHRcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuXG4gICAgLy8gQ2FjaGUgYW5kIHJldHVyblxuICAgIHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZVtjaGFyc10gPSBvdmVybGFwcztcbiAgICByZXR1cm4gb3ZlcmxhcHM7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgdGhlIGNoYXJjYXRlciBhdCB0aGUgY2VsbCBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSB4IFRoZSBjb2x1bW4gb2YgdGhlIGNoYXIuXG4gICAqIEBwYXJhbSB5IFRoZSByb3cgb2YgdGhlIGNoYXIuXG4gICAqL1xuICAvLyBwcml2YXRlIF9jbGVhckNoYXIoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgLy8gICBsZXQgY29sc1RvQ2xlYXIgPSAxO1xuICAvLyAgIC8vIENsZWFyIHRoZSBhZGphY2VudCBjaGFyYWN0ZXIgaWYgaXQgd2FzIHdpZGVcbiAgLy8gICBjb25zdCBzdGF0ZSA9IHRoaXMuX3N0YXRlLmNhY2hlW3hdW3ldO1xuICAvLyAgIGlmIChzdGF0ZSAmJiBzdGF0ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdID09PSAyKSB7XG4gIC8vICAgICBjb2xzVG9DbGVhciA9IDI7XG4gIC8vICAgfVxuICAvLyAgIHRoaXMuY2xlYXJDZWxscyh4LCB5LCBjb2xzVG9DbGVhciwgMSk7XG4gIC8vIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUdseXBoSWRlbnRpZmllciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvVHlwZXMnO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUNoYXJBdGxhcyBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfZGlkV2FybVVwOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7IH1cblxuICAvKipcbiAgICogUGVyZm9ybSBhbnkgd29yayBuZWVkZWQgdG8gd2FybSB0aGUgY2FjaGUgYmVmb3JlIGl0IGNhbiBiZSB1c2VkLiBNYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlxuICAgKiBJbXBsZW1lbnQgX2RvV2FybVVwIGluc3RlYWQgaWYgeW91IG9ubHkgd2FudCB0byBnZXQgY2FsbGVkIG9uY2UuXG4gICAqL1xuICBwdWJsaWMgd2FybVVwKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fZGlkV2FybVVwKSB7XG4gICAgICB0aGlzLl9kb1dhcm1VcCgpO1xuICAgICAgdGhpcy5fZGlkV2FybVVwID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBhbnkgd29yayBuZWVkZWQgdG8gd2FybSB0aGUgY2FjaGUgYmVmb3JlIGl0IGNhbiBiZSB1c2VkLiBVc2VkIGJ5IHRoZSBkZWZhdWx0XG4gICAqIGltcGxlbWVudGF0aW9uIG9mIHdhcm1VcCgpLCBhbmQgd2lsbCBvbmx5IGJlIGNhbGxlZCBvbmNlLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9kb1dhcm1VcCgpOiB2b2lkIHsgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB3ZSBzdGFydCBkcmF3aW5nIGEgbmV3IGZyYW1lLlxuICAgKlxuICAgKiBUT0RPOiBXZSByZWx5IG9uIHRoaXMgZ2V0dGluZyBjYWxsZWQgYnkgVGV4dFJlbmRlckxheWVyLiBUaGlzIHNob3VsZCByZWFsbHkgYmUgY2FsbGVkIGJ5XG4gICAqIFJlbmRlcmVyIGluc3RlYWQsIGJ1dCB3ZSBuZWVkIHRvIG1ha2UgUmVuZGVyZXIgdGhlIHNvdXJjZS1vZi10cnV0aCBmb3IgdGhlIGNoYXIgYXRsYXMsIGluc3RlYWRcbiAgICogb2YgQmFzZVJlbmRlckxheWVyLlxuICAgKi9cbiAgcHVibGljIGJlZ2luRnJhbWUoKTogdm9pZCB7IH1cblxuICAvKipcbiAgICogTWF5IGJlIGNhbGxlZCBiZWZvcmUgd2FybVVwIGZpbmlzaGVzLCBob3dldmVyIGl0IGlzIG9rYXkgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbiB0b1xuICAgKiBkbyBub3RoaW5nIGFuZCByZXR1cm4gZmFsc2UgaW4gdGhhdCBjYXNlLlxuICAgKlxuICAgKiBAcGFyYW0gY3R4IFdoZXJlIHRvIGRyYXcgdGhlIGNoYXJhY3RlciBvbnRvLlxuICAgKiBAcGFyYW0gZ2x5cGggSW5mb3JtYXRpb24gYWJvdXQgd2hhdCB0byBkcmF3XG4gICAqIEBwYXJhbSB4IFRoZSBwb3NpdGlvbiBvbiB0aGUgY29udGV4dCB0byBzdGFydCBkcmF3aW5nIGF0XG4gICAqIEBwYXJhbSB5IFRoZSBwb3NpdGlvbiBvbiB0aGUgY29udGV4dCB0byBzdGFydCBkcmF3aW5nIGF0XG4gICAqIEByZXR1cm5zIFRoZSBzdWNjZXNzIHN0YXRlLiBUcnVlIGlmIHdlIGRyZXcgdGhlIGNoYXJhY3Rlci5cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBkcmF3KFxuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgIGdseXBoOiBJR2x5cGhJZGVudGlmaWVyLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogYm9vbGVhbjtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgZ2VuZXJhdGVDb25maWcsIGNvbmZpZ0VxdWFscyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ2hhckF0bGFzVXRpbHMnO1xuaW1wb3J0IHsgQmFzZUNoYXJBdGxhcyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQmFzZUNoYXJBdGxhcyc7XG5pbXBvcnQgeyBEeW5hbWljQ2hhckF0bGFzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9EeW5hbWljQ2hhckF0bGFzJztcbmltcG9ydCB7IElDaGFyQXRsYXNDb25maWcgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL1R5cGVzJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVRlcm1pbmFsT3B0aW9ucyB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmludGVyZmFjZSBJQ2hhckF0bGFzQ2FjaGVFbnRyeSB7XG4gIGF0bGFzOiBCYXNlQ2hhckF0bGFzO1xuICBjb25maWc6IElDaGFyQXRsYXNDb25maWc7XG4gIC8vIE4uQi4gVGhpcyBpbXBsZW1lbnRhdGlvbiBwb3RlbnRpYWxseSBob2xkcyBvbnRvIGNvcGllcyBvZiB0aGUgdGVybWluYWwgZm9yZXZlciwgc29cbiAgLy8gdGhpcyBtYXkgY2F1c2UgbWVtb3J5IGxlYWtzLlxuICBvd25lZEJ5OiBudW1iZXJbXTtcbn1cblxuY29uc3QgY2hhckF0bGFzQ2FjaGU6IElDaGFyQXRsYXNDYWNoZUVudHJ5W10gPSBbXTtcblxuLyoqXG4gKiBBY3F1aXJlcyBhIGNoYXIgYXRsYXMsIGVpdGhlciBnZW5lcmF0aW5nIGEgbmV3IG9uZSBvciByZXR1cm5pbmcgYW4gZXhpc3RpbmdcbiAqIG9uZSB0aGF0IGlzIGluIHVzZSBieSBhbm90aGVyIHRlcm1pbmFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWNxdWlyZUNoYXJBdGxhcyhcbiAgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucyxcbiAgcmVuZGVyZXJJZDogbnVtYmVyLFxuICBjb2xvcnM6IElDb2xvclNldCxcbiAgc2NhbGVkQ2hhcldpZHRoOiBudW1iZXIsXG4gIHNjYWxlZENoYXJIZWlnaHQ6IG51bWJlclxuKTogQmFzZUNoYXJBdGxhcyB7XG4gIGNvbnN0IG5ld0NvbmZpZyA9IGdlbmVyYXRlQ29uZmlnKHNjYWxlZENoYXJXaWR0aCwgc2NhbGVkQ2hhckhlaWdodCwgb3B0aW9ucywgY29sb3JzKTtcblxuICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIHJlbmRlcmVyIGFscmVhZHkgb3ducyB0aGlzIGNvbmZpZ1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJBdGxhc0NhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZW50cnkgPSBjaGFyQXRsYXNDYWNoZVtpXTtcbiAgICBjb25zdCBvd25lZEJ5SW5kZXggPSBlbnRyeS5vd25lZEJ5LmluZGV4T2YocmVuZGVyZXJJZCk7XG4gICAgaWYgKG93bmVkQnlJbmRleCA+PSAwKSB7XG4gICAgICBpZiAoY29uZmlnRXF1YWxzKGVudHJ5LmNvbmZpZywgbmV3Q29uZmlnKSkge1xuICAgICAgICByZXR1cm4gZW50cnkuYXRsYXM7XG4gICAgICB9XG4gICAgICAvLyBUaGUgY29uZmlncyBkaWZmZXIsIHJlbGVhc2UgdGhlIHJlbmRlcmVyIGZyb20gdGhlIGVudHJ5XG4gICAgICBpZiAoZW50cnkub3duZWRCeS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgZW50cnkuYXRsYXMuZGlzcG9zZSgpO1xuICAgICAgICBjaGFyQXRsYXNDYWNoZS5zcGxpY2UoaSwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnRyeS5vd25lZEJ5LnNwbGljZShvd25lZEJ5SW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gVHJ5IG1hdGNoIGEgY2hhciBhdGxhcyBmcm9tIHRoZSBjYWNoZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJBdGxhc0NhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZW50cnkgPSBjaGFyQXRsYXNDYWNoZVtpXTtcbiAgICBpZiAoY29uZmlnRXF1YWxzKGVudHJ5LmNvbmZpZywgbmV3Q29uZmlnKSkge1xuICAgICAgLy8gQWRkIHRoZSByZW5kZXJlciB0byB0aGUgY2FjaGUgZW50cnkgYW5kIHJldHVyblxuICAgICAgZW50cnkub3duZWRCeS5wdXNoKHJlbmRlcmVySWQpO1xuICAgICAgcmV0dXJuIGVudHJ5LmF0bGFzO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5ld0VudHJ5OiBJQ2hhckF0bGFzQ2FjaGVFbnRyeSA9IHtcbiAgICBhdGxhczogbmV3IER5bmFtaWNDaGFyQXRsYXMoXG4gICAgICBkb2N1bWVudCxcbiAgICAgIG5ld0NvbmZpZ1xuICAgICksXG4gICAgY29uZmlnOiBuZXdDb25maWcsXG4gICAgb3duZWRCeTogW3JlbmRlcmVySWRdXG4gIH07XG4gIGNoYXJBdGxhc0NhY2hlLnB1c2gobmV3RW50cnkpO1xuICByZXR1cm4gbmV3RW50cnkuYXRsYXM7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIHRlcm1pbmFsIHJlZmVyZW5jZSBmcm9tIHRoZSBjYWNoZSwgYWxsb3dpbmcgaXRzIG1lbW9yeSB0byBiZSBmcmVlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlKHJlbmRlcmVySWQ6IG51bWJlcik6IHZvaWQge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJBdGxhc0NhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaW5kZXggPSBjaGFyQXRsYXNDYWNoZVtpXS5vd25lZEJ5LmluZGV4T2YocmVuZGVyZXJJZCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgaWYgKGNoYXJBdGxhc0NhY2hlW2ldLm93bmVkQnkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgY2FjaGUgZW50cnkgaWYgaXQncyB0aGUgb25seSByZW5kZXJlclxuICAgICAgICBjaGFyQXRsYXNDYWNoZVtpXS5hdGxhcy5kaXNwb3NlKCk7XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlLnNwbGljZShpLCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcmVmZXJlbmNlIGZyb20gdGhlIGNhY2hlIGVudHJ5XG4gICAgICAgIGNoYXJBdGxhc0NhY2hlW2ldLm93bmVkQnkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhckF0bGFzQ29uZmlnIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9UeXBlcyc7XG5pbXBvcnQgeyBERUZBVUxUX0NPTE9SIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0LCBJUGFydGlhbENvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJVGVybWluYWxPcHRpb25zIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnKHNjYWxlZENoYXJXaWR0aDogbnVtYmVyLCBzY2FsZWRDaGFySGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM6IElUZXJtaW5hbE9wdGlvbnMsIGNvbG9yczogSUNvbG9yU2V0KTogSUNoYXJBdGxhc0NvbmZpZyB7XG4gIC8vIG51bGwgb3V0IHNvbWUgZmllbGRzIHRoYXQgZG9uJ3QgbWF0dGVyXG4gIGNvbnN0IGNsb25lZENvbG9ycyA9IDxJUGFydGlhbENvbG9yU2V0PntcbiAgICBmb3JlZ3JvdW5kOiBjb2xvcnMuZm9yZWdyb3VuZCxcbiAgICBiYWNrZ3JvdW5kOiBjb2xvcnMuYmFja2dyb3VuZCxcbiAgICBjdXJzb3I6IHVuZGVmaW5lZCxcbiAgICBjdXJzb3JBY2NlbnQ6IHVuZGVmaW5lZCxcbiAgICBzZWxlY3Rpb246IHVuZGVmaW5lZCxcbiAgICAvLyBGb3IgdGhlIHN0YXRpYyBjaGFyIGF0bGFzLCB3ZSBvbmx5IHVzZSB0aGUgZmlyc3QgMTYgY29sb3JzLCBidXQgd2UgbmVlZCBhbGwgMjU2IGZvciB0aGVcbiAgICAvLyBkeW5hbWljIGNoYXJhY3RlciBhdGxhcy5cbiAgICBhbnNpOiBjb2xvcnMuYW5zaS5zbGljZSgwLCAxNilcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBkZXZpY2VQaXhlbFJhdGlvOiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcbiAgICBzY2FsZWRDaGFyV2lkdGgsXG4gICAgc2NhbGVkQ2hhckhlaWdodCxcbiAgICBmb250RmFtaWx5OiBvcHRpb25zLmZvbnRGYW1pbHksXG4gICAgZm9udFNpemU6IG9wdGlvbnMuZm9udFNpemUsXG4gICAgZm9udFdlaWdodDogb3B0aW9ucy5mb250V2VpZ2h0LFxuICAgIGZvbnRXZWlnaHRCb2xkOiBvcHRpb25zLmZvbnRXZWlnaHRCb2xkLFxuICAgIGFsbG93VHJhbnNwYXJlbmN5OiBvcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5LFxuICAgIGNvbG9yczogY2xvbmVkQ29sb3JzXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWdFcXVhbHMoYTogSUNoYXJBdGxhc0NvbmZpZywgYjogSUNoYXJBdGxhc0NvbmZpZyk6IGJvb2xlYW4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGEuY29sb3JzLmFuc2kubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYS5jb2xvcnMuYW5zaVtpXS5yZ2JhICE9PSBiLmNvbG9ycy5hbnNpW2ldLnJnYmEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGEuZGV2aWNlUGl4ZWxSYXRpbyA9PT0gYi5kZXZpY2VQaXhlbFJhdGlvICYmXG4gICAgICBhLmZvbnRGYW1pbHkgPT09IGIuZm9udEZhbWlseSAmJlxuICAgICAgYS5mb250U2l6ZSA9PT0gYi5mb250U2l6ZSAmJlxuICAgICAgYS5mb250V2VpZ2h0ID09PSBiLmZvbnRXZWlnaHQgJiZcbiAgICAgIGEuZm9udFdlaWdodEJvbGQgPT09IGIuZm9udFdlaWdodEJvbGQgJiZcbiAgICAgIGEuYWxsb3dUcmFuc3BhcmVuY3kgPT09IGIuYWxsb3dUcmFuc3BhcmVuY3kgJiZcbiAgICAgIGEuc2NhbGVkQ2hhcldpZHRoID09PSBiLnNjYWxlZENoYXJXaWR0aCAmJlxuICAgICAgYS5zY2FsZWRDaGFySGVpZ2h0ID09PSBiLnNjYWxlZENoYXJIZWlnaHQgJiZcbiAgICAgIGEuY29sb3JzLmZvcmVncm91bmQgPT09IGIuY29sb3JzLmZvcmVncm91bmQgJiZcbiAgICAgIGEuY29sb3JzLmJhY2tncm91bmQgPT09IGIuY29sb3JzLmJhY2tncm91bmQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpczI1NkNvbG9yKGNvbG9yQ29kZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiBjb2xvckNvZGUgPCBERUZBVUxUX0NPTE9SO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5leHBvcnQgY29uc3QgSU5WRVJURURfREVGQVVMVF9DT0xPUiA9IDI1NztcbmV4cG9ydCBjb25zdCBESU1fT1BBQ0lUWSA9IDAuNTtcblxuZXhwb3J0IGNvbnN0IENIQVJfQVRMQVNfQ0VMTF9TUEFDSU5HID0gMTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRElNX09QQUNJVFksIElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJR2x5cGhJZGVudGlmaWVyLCBJQ2hhckF0bGFzQ29uZmlnIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9UeXBlcyc7XG5pbXBvcnQgeyBCYXNlQ2hhckF0bGFzIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9hdGxhcy9CYXNlQ2hhckF0bGFzJztcbmltcG9ydCB7IERFRkFVTFRfQU5TSV9DT0xPUlMgfSBmcm9tICdicm93c2VyL0NvbG9yTWFuYWdlcic7XG5pbXBvcnQgeyBMUlVNYXAgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0xSVU1hcCc7XG5pbXBvcnQgeyBpc0ZpcmVmb3gsIGlzU2FmYXJpIH0gZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcbmltcG9ydCB7IElDb2xvciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgdGhyb3dJZkZhbHN5IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9SZW5kZXJlclV0aWxzJztcblxuLy8gSW4gcHJhY3RpY2Ugd2UncmUgcHJvYmFibHkgbmV2ZXIgZ29pbmcgdG8gZXhoYXVzdCBhIHRleHR1cmUgdGhpcyBsYXJnZS4gRm9yIGRlYnVnZ2luZyBwdXJwb3Nlcyxcbi8vIGhvd2V2ZXIsIGl0IGNhbiBiZSB1c2VmdWwgdG8gc2V0IHRoaXMgdG8gYSByZWFsbHkgdGlueSB2YWx1ZSwgdG8gdmVyaWZ5IHRoYXQgTFJVIGV2aWN0aW9uIHdvcmtzLlxuY29uc3QgVEVYVFVSRV9XSURUSCA9IDEwMjQ7XG5jb25zdCBURVhUVVJFX0hFSUdIVCA9IDEwMjQ7XG5cbmNvbnN0IFRSQU5TUEFSRU5UX0NPTE9SID0ge1xuICBjc3M6ICdyZ2JhKDAsIDAsIDAsIDApJyxcbiAgcmdiYTogMFxufTtcblxuLy8gRHJhd2luZyB0byB0aGUgY2FjaGUgaXMgZXhwZW5zaXZlOiBJZiB3ZSBoYXZlIHRvIGRyYXcgbW9yZSB0aGFuIHRoaXMgbnVtYmVyIG9mIGdseXBocyB0byB0aGVcbi8vIGNhY2hlIGluIGEgc2luZ2xlIGZyYW1lLCBnaXZlIHVwIG9uIHRyeWluZyB0byBjYWNoZSBhbnl0aGluZyBlbHNlLCBhbmQgdHJ5IHRvIGZpbmlzaCB0aGUgY3VycmVudFxuLy8gZnJhbWUgQVNBUC5cbi8vXG4vLyBUaGlzIGhlbHBzIHRvIGxpbWl0IHRoZSBhbW91bnQgb2YgZGFtYWdlIGEgcHJvZ3JhbSBjYW4gZG8gd2hlbiBpdCB3b3VsZCBvdGhlcndpc2UgdGhyYXNoIHRoZVxuLy8gY2FjaGUuXG5jb25zdCBGUkFNRV9DQUNIRV9EUkFXX0xJTUlUID0gMTAwO1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIGdlbmVyYXRpbmcgdGhlIEltYWdlQml0bWFwLCB0aGlzIGlzIHRvIGRlYm91bmNlL2JhdGNoXG4gKiB0aGUgb3BlcmF0aW9uIGFzIHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcCBpcyBhc3luY2hyb25vdXMuXG4gKi9cbmNvbnN0IEdMWVBIX0JJVE1BUF9DT01NSVRfREVMQVkgPSAxMDA7XG5cbmludGVyZmFjZSBJR2x5cGhDYWNoZVZhbHVlIHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgaXNFbXB0eTogYm9vbGVhbjtcbiAgaW5CaXRtYXA6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHbHlwaENhY2hlS2V5KGdseXBoOiBJR2x5cGhJZGVudGlmaWVyKTogbnVtYmVyIHtcbiAgLy8gTm90ZSB0aGF0IHRoaXMgb25seSByZXR1cm5zIGEgdmFsaWQga2V5IHdoZW4gY29kZSA8IDI1NlxuICAvLyBMYXlvdXQ6XG4gIC8vIDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDE6IGl0YWxpYyAoMSlcbiAgLy8gMGIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDogZGltICgxKVxuICAvLyAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwOiBib2xkICgxKVxuICAvLyAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTExMTExMDAwOiBmZyAoOSlcbiAgLy8gMGIwMDAwMDAwMDAwMDExMTExMTExMTAwMDAwMDAwMDAwMDogYmcgKDkpXG4gIC8vIDBiMDAwMTExMTExMTEwMDAwMDAwMDAwMDAwMDAwMDAwMDA6IGNvZGUgKDgpXG4gIC8vIDBiMTExMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA6IHVudXNlZCAoMylcbiAgcmV0dXJuIGdseXBoLmNvZGUgPDwgMjEgfCBnbHlwaC5iZyA8PCAxMiB8IGdseXBoLmZnIDw8IDMgfCAoZ2x5cGguYm9sZCA/IDAgOiA0KSArIChnbHlwaC5kaW0gPyAwIDogMikgKyAoZ2x5cGguaXRhbGljID8gMCA6IDEpO1xufVxuXG5leHBvcnQgY2xhc3MgRHluYW1pY0NoYXJBdGxhcyBleHRlbmRzIEJhc2VDaGFyQXRsYXMge1xuICAvLyBBbiBvcmRlcmVkIG1hcCB0aGF0IHdlJ3JlIHVzaW5nIHRvIGtlZXAgdHJhY2sgb2Ygd2hlcmUgZWFjaCBnbHlwaCBpcyBpbiB0aGUgYXRsYXMgdGV4dHVyZS5cbiAgLy8gSXQncyBvcmRlcmVkIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB3aGVuIHRvIHJlbW92ZSB0aGUgb2xkIGVudHJpZXMuXG4gIHByaXZhdGUgX2NhY2hlTWFwOiBMUlVNYXA8SUdseXBoQ2FjaGVWYWx1ZT47XG5cbiAgLy8gVGhlIHRleHR1cmUgdGhhdCB0aGUgYXRsYXMgaXMgZHJhd24gdG9cbiAgcHJpdmF0ZSBfY2FjaGVDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIF9jYWNoZUN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gIC8vIEEgdGVtcG9yYXJ5IGNvbnRleHQgdGhhdCBnbHlwaHMgYXJlIGRyYXduIHRvIGJlZm9yZSBiZWluZyB0cmFuc2ZlcmVkIHRvIHRoZSBhdGxhcy5cbiAgcHJpdmF0ZSBfdG1wQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgLy8gVGhlIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0b3JlZCBpbiB0aGUgYXRsYXMgYnkgd2lkdGgvaGVpZ2h0XG4gIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2RyYXdUb0NhY2hlQ291bnQ6IG51bWJlciA9IDA7XG5cbiAgLy8gQW4gYXJyYXkgb2YgZ2x5cGgga2V5cyB0aGF0IGFyZSB3YWl0aW5nIG9uIHRoZSBiaXRtYXAgdG8gYmUgZ2VuZXJhdGVkLlxuICBwcml2YXRlIF9nbHlwaHNXYWl0aW5nT25CaXRtYXA6IElHbHlwaENhY2hlVmFsdWVbXSA9IFtdO1xuXG4gIC8vIFRoZSB0aW1lb3V0IHRoYXQgaXMgdXNlZCB0byBiYXRjaCBiaXRtYXAgZ2VuZXJhdGlvbiBzbyBpdCdzIG5vdCByZXF1ZXN0ZWQgZm9yIGV2ZXJ5IG5ldyBnbHlwaC5cbiAgcHJpdmF0ZSBfYml0bWFwQ29tbWl0VGltZW91dDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gVGhlIGJpdG1hcCB0byBkcmF3IGZyb20sIHRoaXMgaXMgbXVjaCBmYXN0ZXIgb24gb3RoZXIgYnJvd3NlcnMgdGhhbiBvdGhlcnMuXG4gIHByaXZhdGUgX2JpdG1hcDogSW1hZ2VCaXRtYXAgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihkb2N1bWVudDogRG9jdW1lbnQsIHByaXZhdGUgX2NvbmZpZzogSUNoYXJBdGxhc0NvbmZpZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fY2FjaGVDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLl9jYWNoZUNhbnZhcy53aWR0aCA9IFRFWFRVUkVfV0lEVEg7XG4gICAgdGhpcy5fY2FjaGVDYW52YXMuaGVpZ2h0ID0gVEVYVFVSRV9IRUlHSFQ7XG4gICAgLy8gVGhlIGNhbnZhcyBuZWVkcyBhbHBoYSBiZWNhdXNlIHdlIHVzZSBjbGVhckNvbG9yIHRvIGNvbnZlcnQgdGhlIGJhY2tncm91bmQgY29sb3IgdG8gYWxwaGEuXG4gICAgLy8gSXQgbWlnaHQgYWxzbyBjb250YWluIHNvbWUgY2hhcmFjdGVycyB3aXRoIHRyYW5zcGFyZW50IGJhY2tncm91bmRzIGlmIGFsbG93VHJhbnNwYXJlbmN5IGlzXG4gICAgLy8gc2V0LlxuICAgIHRoaXMuX2NhY2hlQ3R4ID0gdGhyb3dJZkZhbHN5KHRoaXMuX2NhY2hlQ2FudmFzLmdldENvbnRleHQoJzJkJywge2FscGhhOiB0cnVlfSkpO1xuXG4gICAgY29uc3QgdG1wQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdG1wQ2FudmFzLndpZHRoID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aDtcbiAgICB0bXBDYW52YXMuaGVpZ2h0ID0gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQ7XG4gICAgdGhpcy5fdG1wQ3R4ID0gdGhyb3dJZkZhbHN5KHRtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHthbHBoYTogdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5fSkpO1xuXG4gICAgdGhpcy5fd2lkdGggPSBNYXRoLmZsb29yKFRFWFRVUkVfV0lEVEggLyB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoKTtcbiAgICB0aGlzLl9oZWlnaHQgPSBNYXRoLmZsb29yKFRFWFRVUkVfSEVJR0hUIC8gdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO1xuICAgIGNvbnN0IGNhcGFjaXR5ID0gdGhpcy5fd2lkdGggKiB0aGlzLl9oZWlnaHQ7XG4gICAgdGhpcy5fY2FjaGVNYXAgPSBuZXcgTFJVTWFwKGNhcGFjaXR5KTtcbiAgICB0aGlzLl9jYWNoZU1hcC5wcmVhbGxvYyhjYXBhY2l0eSk7XG5cbiAgICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3IgZGVidWdnaW5nXG4gICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9jYWNoZUNhbnZhcyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0KTtcbiAgICAgIHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBiZWdpbkZyYW1lKCk6IHZvaWQge1xuICAgIHRoaXMuX2RyYXdUb0NhY2hlQ291bnQgPSAwO1xuICB9XG5cbiAgcHVibGljIGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICAvLyBTcGFjZSBpcyBhbHdheXMgYW4gZW1wdHkgY2VsbCwgc3BlY2lhbCBjYXNlIHRoaXMgYXMgaXQncyBzbyBjb21tb25cbiAgICBpZiAoZ2x5cGguY29kZSA9PT0gMzIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEV4aXQgZWFybHkgZm9yIHVuY2FjaGFibGUgZ2x5cGhzXG4gICAgaWYgKCF0aGlzLl9jYW5DYWNoZShnbHlwaCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBnbHlwaEtleSA9IGdldEdseXBoQ2FjaGVLZXkoZ2x5cGgpO1xuICAgIGNvbnN0IGNhY2hlVmFsdWUgPSB0aGlzLl9jYWNoZU1hcC5nZXQoZ2x5cGhLZXkpO1xuICAgIGlmIChjYWNoZVZhbHVlICE9PSBudWxsICYmIGNhY2hlVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZHJhd0Zyb21DYWNoZShjdHgsIGNhY2hlVmFsdWUsIHgsIHkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9kcmF3VG9DYWNoZUNvdW50IDwgRlJBTUVfQ0FDSEVfRFJBV19MSU1JVCkge1xuICAgICAgbGV0IGluZGV4O1xuICAgICAgaWYgKHRoaXMuX2NhY2hlTWFwLnNpemUgPCB0aGlzLl9jYWNoZU1hcC5jYXBhY2l0eSkge1xuICAgICAgICBpbmRleCA9IHRoaXMuX2NhY2hlTWFwLnNpemU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB3ZSdyZSBvdXQgb2Ygc3BhY2UsIHNvIG91ciBjYWxsIHRvIHNldCB3aWxsIGRlbGV0ZSB0aGlzIGl0ZW1cbiAgICAgICAgaW5kZXggPSB0aGlzLl9jYWNoZU1hcC5wZWVrKCkhLmluZGV4O1xuICAgICAgfVxuICAgICAgY29uc3QgY2FjaGVWYWx1ZSA9IHRoaXMuX2RyYXdUb0NhY2hlKGdseXBoLCBpbmRleCk7XG4gICAgICB0aGlzLl9jYWNoZU1hcC5zZXQoZ2x5cGhLZXksIGNhY2hlVmFsdWUpO1xuICAgICAgdGhpcy5fZHJhd0Zyb21DYWNoZShjdHgsIGNhY2hlVmFsdWUsIHgsIHkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NhbkNhY2hlKGdseXBoOiBJR2x5cGhJZGVudGlmaWVyKTogYm9vbGVhbiB7XG4gICAgLy8gT25seSBjYWNoZSBhc2NpaSBhbmQgZXh0ZW5kZWQgY2hhcmFjdGVycyBmb3Igbm93LCB0byBiZSBzYWZlLiBJbiB0aGUgZnV0dXJlLCB3ZSBjb3VsZCBkb1xuICAgIC8vIHNvbWV0aGluZyBtb3JlIGNvbXBsaWNhdGVkIHRvIGRldGVybWluZSB0aGUgZXhwZWN0ZWQgd2lkdGggb2YgYSBjaGFyYWN0ZXIuXG4gICAgLy9cbiAgICAvLyBJZiB3ZSBzd2l0Y2ggdGhlIHJlbmRlcmVyIG92ZXIgdG8gd2ViZ2wgYXQgc29tZSBwb2ludCwgd2UgbWF5IGJlIGFibGUgdG8gdXNlIGJsZW5kaW5nIG1vZGVzXG4gICAgLy8gdG8gZHJhdyBvdmVybGFwcGluZyBnbHlwaHMgZnJvbSB0aGUgYXRsYXM6XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlcnZvL3dlYnJlbmRlci9pc3N1ZXMvNDY0I2lzc3VlY29tbWVudC0yNTU2MzI4NzVcbiAgICAvLyBodHRwczovL3dlYmdsZnVuZGFtZW50YWxzLm9yZy93ZWJnbC9sZXNzb25zL3dlYmdsLXRleHQtdGV4dHVyZS5odG1sXG4gICAgcmV0dXJuIGdseXBoLmNvZGUgPCAyNTY7XG4gIH1cblxuICBwcml2YXRlIF90b0Nvb3JkaW5hdGVYKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAoaW5kZXggJSB0aGlzLl93aWR0aCkgKiB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoO1xuICB9XG5cbiAgcHJpdmF0ZSBfdG9Db29yZGluYXRlWShpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihpbmRleCAvIHRoaXMuX3dpZHRoKSAqIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBfZHJhd0Zyb21DYWNoZShcbiAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICBjYWNoZVZhbHVlOiBJR2x5cGhDYWNoZVZhbHVlLFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgbmVlZCB0byBkbyBhbnl0aGluZyBpZiB0aGlzIGlzIHdoaXRlc3BhY2UuXG4gICAgaWYgKGNhY2hlVmFsdWUuaXNFbXB0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjYWNoZVggPSB0aGlzLl90b0Nvb3JkaW5hdGVYKGNhY2hlVmFsdWUuaW5kZXgpO1xuICAgIGNvbnN0IGNhY2hlWSA9IHRoaXMuX3RvQ29vcmRpbmF0ZVkoY2FjaGVWYWx1ZS5pbmRleCk7XG4gICAgY3R4LmRyYXdJbWFnZShcbiAgICAgIGNhY2hlVmFsdWUuaW5CaXRtYXAgPyB0aGlzLl9iaXRtYXAhIDogdGhpcy5fY2FjaGVDYW52YXMsXG4gICAgICBjYWNoZVgsXG4gICAgICBjYWNoZVksXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLFxuICAgICAgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsXG4gICAgICB0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9nZXRDb2xvckZyb21BbnNpSW5kZXgoaWR4OiBudW1iZXIpOiBJQ29sb3Ige1xuICAgIGlmIChpZHggPCB0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY29uZmlnLmNvbG9ycy5hbnNpW2lkeF07XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX0FOU0lfQ09MT1JTW2lkeF07XG4gIH1cblxuICBwcml2YXRlIF9nZXRCYWNrZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmICh0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpIHtcbiAgICAgIC8vIFRoZSBiYWNrZ3JvdW5kIGNvbG9yIG1pZ2h0IGhhdmUgc29tZSB0cmFuc3BhcmVuY3ksIHNvIHdlIG5lZWQgdG8gcmVuZGVyIGl0IGFzIGZ1bGx5XG4gICAgICAvLyB0cmFuc3BhcmVudCBpbiB0aGUgYXRsYXMuIE90aGVyd2lzZSB3ZSdkIGVuZCB1cCBkcmF3aW5nIHRoZSB0cmFuc3BhcmVudCBiYWNrZ3JvdW5kIHR3aWNlXG4gICAgICAvLyBhcm91bmQgdGhlIGFudGktYWxpYXNlZCBlZGdlcyBvZiB0aGUgZ2x5cGgsIGFuZCBpdCB3b3VsZCBsb29rIHRvbyBkYXJrLlxuICAgICAgcmV0dXJuIFRSQU5TUEFSRU5UX0NPTE9SO1xuICAgIH0gZWxzZSBpZiAoZ2x5cGguYmcgPT09IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gICAgfSBlbHNlIGlmIChnbHlwaC5iZyA8IDI1Nikge1xuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChnbHlwaC5iZyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmQ7XG4gIH1cblxuICBwcml2YXRlIF9nZXRGb3JlZ3JvdW5kQ29sb3IoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIpOiBJQ29sb3Ige1xuICAgIGlmIChnbHlwaC5mZyA9PT0gSU5WRVJURURfREVGQVVMVF9DT0xPUikge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZDtcbiAgICB9IGVsc2UgaWYgKGdseXBoLmZnIDwgMjU2KSB7XG4gICAgICAvLyAyNTYgY29sb3Igc3VwcG9ydFxuICAgICAgcmV0dXJuIHRoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChnbHlwaC5mZyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ7XG4gIH1cblxuICAvLyBUT0RPOiBXZSBkbyB0aGlzIChvciBzb21ldGhpbmcgc2ltaWxhcikgaW4gbXVsdGlwbGUgcGxhY2VzLiBXZSBzaG91bGQgc3BsaXQgdGhpcyBvZmZcbiAgLy8gaW50byBhIHNoYXJlZCBmdW5jdGlvbi5cbiAgcHJpdmF0ZSBfZHJhd1RvQ2FjaGUoZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsIGluZGV4OiBudW1iZXIpOiBJR2x5cGhDYWNoZVZhbHVlIHtcbiAgICB0aGlzLl9kcmF3VG9DYWNoZUNvdW50Kys7XG5cbiAgICB0aGlzLl90bXBDdHguc2F2ZSgpO1xuXG4gICAgLy8gZHJhdyB0aGUgYmFja2dyb3VuZFxuICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IHRoaXMuX2dldEJhY2tncm91bmRDb2xvcihnbHlwaCk7XG4gICAgLy8gVXNlIGEgJ2NvcHknIGNvbXBvc2l0ZSBvcGVyYXRpb24gdG8gY2xlYXIgYW55IGV4aXN0aW5nIGdseXBoIG91dCBvZiBfdG1wQ3R4V2l0aEFscGhhLCByZWdhcmRsZXNzIG9mXG4gICAgLy8gdHJhbnNwYXJlbmN5IGluIGJhY2tncm91bmRDb2xvclxuICAgIHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnY29weSc7XG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxTdHlsZSA9IGJhY2tncm91bmRDb2xvci5jc3M7XG4gICAgdGhpcy5fdG1wQ3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KTtcbiAgICB0aGlzLl90bXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblxuICAgIC8vIGRyYXcgdGhlIGZvcmVncm91bmQvZ2x5cGhcbiAgICBjb25zdCBmb250V2VpZ2h0ID0gZ2x5cGguYm9sZCA/IHRoaXMuX2NvbmZpZy5mb250V2VpZ2h0Qm9sZCA6IHRoaXMuX2NvbmZpZy5mb250V2VpZ2h0O1xuICAgIGNvbnN0IGZvbnRTdHlsZSA9IGdseXBoLml0YWxpYyA/ICdpdGFsaWMnIDogJyc7XG4gICAgdGhpcy5fdG1wQ3R4LmZvbnQgPVxuICAgICAgYCR7Zm9udFN0eWxlfSAke2ZvbnRXZWlnaHR9ICR7dGhpcy5fY29uZmlnLmZvbnRTaXplICogdGhpcy5fY29uZmlnLmRldmljZVBpeGVsUmF0aW99cHggJHt0aGlzLl9jb25maWcuZm9udEZhbWlseX1gO1xuICAgIHRoaXMuX3RtcEN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuICAgIHRoaXMuX3RtcEN0eC5maWxsU3R5bGUgPSB0aGlzLl9nZXRGb3JlZ3JvdW5kQ29sb3IoZ2x5cGgpLmNzcztcblxuICAgIC8vIEFwcGx5IGFscGhhIHRvIGRpbSB0aGUgY2hhcmFjdGVyXG4gICAgaWYgKGdseXBoLmRpbSkge1xuICAgICAgdGhpcy5fdG1wQ3R4Lmdsb2JhbEFscGhhID0gRElNX09QQUNJVFk7XG4gICAgfVxuICAgIC8vIERyYXcgdGhlIGNoYXJhY3RlclxuICAgIHRoaXMuX3RtcEN0eC5maWxsVGV4dChnbHlwaC5jaGFycywgMCwgdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQgLyAyKTtcbiAgICB0aGlzLl90bXBDdHgucmVzdG9yZSgpO1xuXG4gICAgLy8gY2xlYXIgdGhlIGJhY2tncm91bmQgZnJvbSB0aGUgY2hhcmFjdGVyIHRvIGF2b2lkIGlzc3VlcyB3aXRoIGRyYXdpbmcgb3ZlciB0aGUgcHJldmlvdXNcbiAgICAvLyBjaGFyYWN0ZXIgaWYgaXQgZXh0ZW5kcyBwYXN0IGl0J3MgYm91bmRzXG4gICAgY29uc3QgaW1hZ2VEYXRhID0gdGhpcy5fdG1wQ3R4LmdldEltYWdlRGF0YShcbiAgICAgIDAsIDAsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsIHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0XG4gICAgKTtcbiAgICBsZXQgaXNFbXB0eSA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5KSB7XG4gICAgICBpc0VtcHR5ID0gY2xlYXJDb2xvcihpbWFnZURhdGEsIGJhY2tncm91bmRDb2xvcik7XG4gICAgfVxuXG4gICAgLy8gY29weSB0aGUgZGF0YSBmcm9tIGltYWdlRGF0YSB0byBfY2FjaGVDYW52YXNcbiAgICBjb25zdCB4ID0gdGhpcy5fdG9Db29yZGluYXRlWChpbmRleCk7XG4gICAgY29uc3QgeSA9IHRoaXMuX3RvQ29vcmRpbmF0ZVkoaW5kZXgpO1xuICAgIC8vIHB1dEltYWdlRGF0YSBkb2Vzbid0IGRvIGFueSBibGVuZGluZywgc28gaXQgd2lsbCBvdmVyd3JpdGUgYW55IGV4aXN0aW5nIGNhY2hlIGVudHJ5IGZvciB1c1xuICAgIHRoaXMuX2NhY2hlQ3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIHgsIHkpO1xuXG4gICAgLy8gQWRkIHRoZSBnbHlwaCBhbmQgcXVldWUgaXQgdG8gdGhlIGJpdG1hcCAoaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQpXG4gICAgY29uc3QgY2FjaGVWYWx1ZSA9IHtcbiAgICAgIGluZGV4LFxuICAgICAgaXNFbXB0eSxcbiAgICAgIGluQml0bWFwOiBmYWxzZVxuICAgIH07XG4gICAgdGhpcy5fYWRkR2x5cGhUb0JpdG1hcChjYWNoZVZhbHVlKTtcblxuICAgIHJldHVybiBjYWNoZVZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfYWRkR2x5cGhUb0JpdG1hcChjYWNoZVZhbHVlOiBJR2x5cGhDYWNoZVZhbHVlKTogdm9pZCB7XG4gICAgLy8gU3VwcG9ydCBpcyBwYXRjaHkgZm9yIGNyZWF0ZUltYWdlQml0bWFwIGF0IHRoZSBtb21lbnQsIHBhc3MgYSBjYW52YXMgYmFja1xuICAgIC8vIGlmIHN1cHBvcnQgaXMgbGFja2luZyBhcyBkcmF3SW1hZ2Ugd29ya3MgdGhlcmUgdG9vLiBGaXJlZm94IGlzIGFsc29cbiAgICAvLyBpbmNsdWRlZCBoZXJlIGFzIEltYWdlQml0bWFwIGFwcGVhcnMgYm90aCBidWdneSBhbmQgaGFzIGhvcnJpYmxlXG4gICAgLy8gcGVyZm9ybWFuY2UgKHRlc3RlZCBvbiB2NTUpLlxuICAgIGlmICghKCdjcmVhdGVJbWFnZUJpdG1hcCcgaW4gd2luZG93KSB8fCBpc0ZpcmVmb3ggfHwgaXNTYWZhcmkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGdseXBoIHRvIHRoZSBxdWV1ZVxuICAgIHRoaXMuX2dseXBoc1dhaXRpbmdPbkJpdG1hcC5wdXNoKGNhY2hlVmFsdWUpO1xuXG4gICAgLy8gQ2hlY2sgaWYgYml0bWFwIGdlbmVyYXRpb24gdGltZW91dCBhbHJlYWR5IGV4aXN0c1xuICAgIGlmICh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX2dlbmVyYXRlQml0bWFwKCksIEdMWVBIX0JJVE1BUF9DT01NSVRfREVMQVkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2VuZXJhdGVCaXRtYXAoKTogdm9pZCB7XG4gICAgY29uc3QgZ2x5cGhzTW92aW5nVG9CaXRtYXAgPSB0aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA7XG4gICAgdGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwID0gW107XG4gICAgd2luZG93LmNyZWF0ZUltYWdlQml0bWFwKHRoaXMuX2NhY2hlQ2FudmFzKS50aGVuKGJpdG1hcCA9PiB7XG4gICAgICAvLyBTZXQgYml0bWFwXG4gICAgICB0aGlzLl9iaXRtYXAgPSBiaXRtYXA7XG5cbiAgICAgIC8vIE1hcmsgYWxsIG5ldyBnbHlwaHMgYXMgaW4gYml0bWFwLCBleGNsdWRpbmcgZ2x5cGhzIHRoYXQgY2FtZSBpbiBhZnRlclxuICAgICAgLy8gdGhlIGJpdG1hcCB3YXMgcmVxdWVzdGVkXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdseXBoc01vdmluZ1RvQml0bWFwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZ2x5cGhzTW92aW5nVG9CaXRtYXBbaV07XG4gICAgICAgIC8vIEl0IGRvZXNuJ3QgbWF0dGVyIGlmIHRoZSB2YWx1ZSB3YXMgYWxyZWFkeSBldmljdGVkLCBpdCB3aWxsIGJlXG4gICAgICAgIC8vIHJlbGVhc2VkIGZyb20gbWVtb3J5IGFmdGVyIHRoaXMgYmxvY2sgaWYgc28uXG4gICAgICAgIHZhbHVlLmluQml0bWFwID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0ID0gbnVsbDtcbiAgfVxufVxuXG4vLyBUaGlzIGlzIHVzZWQgZm9yIGRlYnVnZ2luZyB0aGUgcmVuZGVyZXIsIGp1c3Qgc3dhcCBvdXQgYG5ldyBEeW5hbWljQ2hhckF0bGFzYCB3aXRoXG4vLyBgbmV3IE5vbmVDaGFyQXRsYXNgLlxuZXhwb3J0IGNsYXNzIE5vbmVDaGFyQXRsYXMgZXh0ZW5kcyBCYXNlQ2hhckF0bGFzIHtcbiAgY29uc3RydWN0b3IoZG9jdW1lbnQ6IERvY3VtZW50LCBjb25maWc6IElDaGFyQXRsYXNDb25maWcpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcHVibGljIGRyYXcoXG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgZ2x5cGg6IElHbHlwaElkZW50aWZpZXIsXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlclxuICApOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBNYWtlcyBhIHBhcnRpaWN1bGFyIHJnYiBjb2xvciBpbiBhbiBJbWFnZURhdGEgY29tcGxldGVseSB0cmFuc3BhcmVudC5cbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHJlc3VsdCBpcyBcImVtcHR5XCIsIG1lYW5pbmcgYWxsIHBpeGVscyBhcmUgZnVsbHkgdHJhbnNwYXJlbnQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFyQ29sb3IoaW1hZ2VEYXRhOiBJbWFnZURhdGEsIGNvbG9yOiBJQ29sb3IpOiBib29sZWFuIHtcbiAgbGV0IGlzRW1wdHkgPSB0cnVlO1xuICBjb25zdCByID0gY29sb3IucmdiYSA+Pj4gMjQ7XG4gIGNvbnN0IGcgPSBjb2xvci5yZ2JhID4+PiAxNiAmIDB4RkY7XG4gIGNvbnN0IGIgPSBjb2xvci5yZ2JhID4+PiA4ICYgMHhGRjtcbiAgZm9yIChsZXQgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgaW1hZ2VEYXRhLmRhdGEubGVuZ3RoOyBvZmZzZXQgKz0gNCkge1xuICAgIGlmIChpbWFnZURhdGEuZGF0YVtvZmZzZXRdID09PSByICYmXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDFdID09PSBnICYmXG4gICAgICAgIGltYWdlRGF0YS5kYXRhW29mZnNldCArIDJdID09PSBiKSB7XG4gICAgICBpbWFnZURhdGEuZGF0YVtvZmZzZXQgKyAzXSA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlzRW1wdHkgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGlzRW1wdHk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmludGVyZmFjZSBJTGlua2VkTGlzdE5vZGU8VD4ge1xuICBwcmV2OiBJTGlua2VkTGlzdE5vZGU8VD4gfCBudWxsO1xuICBuZXh0OiBJTGlua2VkTGlzdE5vZGU8VD4gfCBudWxsO1xuICBrZXk6IG51bWJlciB8IG51bGw7XG4gIHZhbHVlOiBUIHwgbnVsbDtcbn1cblxuZXhwb3J0IGNsYXNzIExSVU1hcDxUPiB7XG4gIHByaXZhdGUgX21hcDogeyBba2V5OiBudW1iZXJdOiBJTGlua2VkTGlzdE5vZGU8VD4gfSA9IHt9O1xuICBwcml2YXRlIF9oZWFkOiBJTGlua2VkTGlzdE5vZGU8VD4gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfdGFpbDogSUxpbmtlZExpc3ROb2RlPFQ+IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX25vZGVQb29sOiBJTGlua2VkTGlzdE5vZGU8VD5bXSA9IFtdO1xuICBwdWJsaWMgc2l6ZTogbnVtYmVyID0gMDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY2FwYWNpdHk6IG51bWJlcikgeyB9XG5cbiAgcHJpdmF0ZSBfdW5saW5rTm9kZShub2RlOiBJTGlua2VkTGlzdE5vZGU8VD4pOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2ID0gbm9kZS5wcmV2O1xuICAgIGNvbnN0IG5leHQgPSBub2RlLm5leHQ7XG4gICAgaWYgKG5vZGUgPT09IHRoaXMuX2hlYWQpIHtcbiAgICAgIHRoaXMuX2hlYWQgPSBuZXh0O1xuICAgIH1cbiAgICBpZiAobm9kZSA9PT0gdGhpcy5fdGFpbCkge1xuICAgICAgdGhpcy5fdGFpbCA9IHByZXY7XG4gICAgfVxuICAgIGlmIChwcmV2ICE9PSBudWxsKSB7XG4gICAgICBwcmV2Lm5leHQgPSBuZXh0O1xuICAgIH1cbiAgICBpZiAobmV4dCAhPT0gbnVsbCkge1xuICAgICAgbmV4dC5wcmV2ID0gcHJldjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9hcHBlbmROb2RlKG5vZGU6IElMaW5rZWRMaXN0Tm9kZTxUPik6IHZvaWQge1xuICAgIGNvbnN0IHRhaWwgPSB0aGlzLl90YWlsO1xuICAgIGlmICh0YWlsICE9PSBudWxsKSB7XG4gICAgICB0YWlsLm5leHQgPSBub2RlO1xuICAgIH1cbiAgICBub2RlLnByZXYgPSB0YWlsO1xuICAgIG5vZGUubmV4dCA9IG51bGw7XG4gICAgdGhpcy5fdGFpbCA9IG5vZGU7XG4gICAgaWYgKHRoaXMuX2hlYWQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2hlYWQgPSBub2RlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVhbGxvY2F0ZSBhIGJ1bmNoIG9mIGxpbmtlZC1saXN0IG5vZGVzLiBBbGxvY2F0aW5nIHRoZXNlIG5vZGVzIGFoZWFkIG9mIHRpbWUgbWVhbnMgdGhhdFxuICAgKiB0aGV5J3JlIG1vcmUgbGlrZWx5IHRvIGxpdmUgbmV4dCB0byBlYWNoIG90aGVyIGluIG1lbW9yeSwgd2hpY2ggc2VlbXMgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZS5cbiAgICpcbiAgICogRWFjaCBlbXB0eSBvYmplY3Qgb25seSBjb25zdW1lcyBhYm91dCA2MCBieXRlcyBvZiBtZW1vcnksIHNvIHRoaXMgaXMgcHJldHR5IGNoZWFwLCBldmVuIGZvclxuICAgKiBsYXJnZSBtYXBzLlxuICAgKi9cbiAgcHVibGljIHByZWFsbG9jKGNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMuX25vZGVQb29sO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgbm9kZVBvb2wucHVzaCh7XG4gICAgICAgIHByZXY6IG51bGwsXG4gICAgICAgIG5leHQ6IG51bGwsXG4gICAgICAgIGtleTogbnVsbCxcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQoa2V5OiBudW1iZXIpOiBUIHwgbnVsbCB7XG4gICAgLy8gVGhpcyBpcyB1bnNhZmU6IFdlJ3JlIGFzc3VtaW5nIG91ciBrZXlzcGFjZSBkb2Vzbid0IG92ZXJsYXAgd2l0aCBPYmplY3QucHJvdG90eXBlLiBIb3dldmVyLFxuICAgIC8vIGl0J3MgZmFzdGVyIHRoYW4gY2FsbGluZyBoYXNPd25Qcm9wZXJ0eSwgYW5kIGluIG91ciBjYXNlLCBpdCB3b3VsZCBuZXZlciBvdmVybGFwLlxuICAgIGNvbnN0IG5vZGUgPSB0aGlzLl9tYXBba2V5XTtcbiAgICBpZiAobm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl91bmxpbmtOb2RlKG5vZGUpO1xuICAgICAgdGhpcy5fYXBwZW5kTm9kZShub2RlKTtcbiAgICAgIHJldHVybiBub2RlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgdmFsdWUgZnJvbSBhIGtleSB3aXRob3V0IG1hcmtpbmcgaXQgYXMgdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBpdGVtLlxuICAgKi9cbiAgcHVibGljIHBlZWtWYWx1ZShrZXk6IG51bWJlcik6IFQgfCBudWxsIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5fbWFwW2tleV07XG4gICAgaWYgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIHBlZWsoKTogVCB8IG51bGwge1xuICAgIGNvbnN0IGhlYWQgPSB0aGlzLl9oZWFkO1xuICAgIHJldHVybiBoZWFkID09PSBudWxsID8gbnVsbCA6IGhlYWQudmFsdWU7XG4gIH1cblxuICBwdWJsaWMgc2V0KGtleTogbnVtYmVyLCB2YWx1ZTogVCk6IHZvaWQge1xuICAgIC8vIFRoaXMgaXMgdW5zYWZlOiBTZWUgbm90ZSBhYm92ZS5cbiAgICBsZXQgbm9kZSA9IHRoaXMuX21hcFtrZXldO1xuICAgIGlmIChub2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGFscmVhZHkgZXhpc3RzLCB3ZSBqdXN0IG5lZWQgdG8gbXV0YXRlIGl0IGFuZCBtb3ZlIGl0IHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAgIG5vZGUgPSB0aGlzLl9tYXBba2V5XTtcbiAgICAgIHRoaXMuX3VubGlua05vZGUobm9kZSk7XG4gICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNpemUgPj0gdGhpcy5jYXBhY2l0eSkge1xuICAgICAgLy8gd2UncmUgb3V0IG9mIHNwYWNlOiByZWN5Y2xlIHRoZSBoZWFkIG5vZGUsIG1vdmUgaXQgdG8gdGhlIHRhaWxcbiAgICAgIG5vZGUgPSB0aGlzLl9oZWFkITtcbiAgICAgIHRoaXMuX3VubGlua05vZGUobm9kZSk7XG4gICAgICBkZWxldGUgdGhpcy5fbWFwW25vZGUua2V5IV07XG4gICAgICBub2RlLmtleSA9IGtleTtcbiAgICAgIG5vZGUudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX21hcFtrZXldID0gbm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbWFrZSBhIG5ldyBlbGVtZW50XG4gICAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMuX25vZGVQb29sO1xuICAgICAgaWYgKG5vZGVQb29sLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gdXNlIGEgcHJlYWxsb2NhdGVkIG5vZGUgaWYgd2UgY2FuXG4gICAgICAgIG5vZGUgPSBub2RlUG9vbC5wb3AoKSE7XG4gICAgICAgIG5vZGUua2V5ID0ga2V5O1xuICAgICAgICBub2RlLnZhbHVlID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlID0ge1xuICAgICAgICAgIHByZXY6IG51bGwsXG4gICAgICAgICAgbmV4dDogbnVsbCxcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgdmFsdWVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX21hcFtrZXldID0gbm9kZTtcbiAgICAgIHRoaXMuc2l6ZSsrO1xuICAgIH1cbiAgICB0aGlzLl9hcHBlbmROb2RlKG5vZGUpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElCdWZmZXJMaW5lIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBXSElURVNQQUNFX0NFTExfQ0hBUiB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJVGVybWluYWxPcHRpb25zLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY29uc3QgQk9MRF9DTEFTUyA9ICd4dGVybS1ib2xkJztcbmV4cG9ydCBjb25zdCBESU1fQ0xBU1MgPSAneHRlcm0tZGltJztcbmV4cG9ydCBjb25zdCBJVEFMSUNfQ0xBU1MgPSAneHRlcm0taXRhbGljJztcbmV4cG9ydCBjb25zdCBVTkRFUkxJTkVfQ0xBU1MgPSAneHRlcm0tdW5kZXJsaW5lJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfQ0xBU1MgPSAneHRlcm0tY3Vyc29yJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfQkxJTktfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLWJsaW5rJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLWJsb2NrJztcbmV4cG9ydCBjb25zdCBDVVJTT1JfU1RZTEVfQkFSX0NMQVNTID0gJ3h0ZXJtLWN1cnNvci1iYXInO1xuZXhwb3J0IGNvbnN0IENVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLXVuZGVybGluZSc7XG5cbmV4cG9ydCBjbGFzcyBEb21SZW5kZXJlclJvd0ZhY3Rvcnkge1xuICBwcml2YXRlIF93b3JrQ2VsbDogQ2VsbERhdGEgPSBuZXcgQ2VsbERhdGEoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9kb2N1bWVudDogRG9jdW1lbnQsXG4gICAgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVSb3cobGluZURhdGE6IElCdWZmZXJMaW5lLCBpc0N1cnNvclJvdzogYm9vbGVhbiwgY3Vyc29yU3R5bGU6IHN0cmluZyB8IHVuZGVmaW5lZCwgY3Vyc29yWDogbnVtYmVyLCBjdXJzb3JCbGluazogYm9vbGVhbiwgY2VsbFdpZHRoOiBudW1iZXIsIGNvbHM6IG51bWJlcik6IERvY3VtZW50RnJhZ21lbnQge1xuICAgIGNvbnN0IGZyYWdtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgLy8gRmluZCB0aGUgbGluZSBsZW5ndGggZmlyc3QsIHRoaXMgcHJldmVudHMgdGhlIG5lZWQgdG8gb3V0cHV0IGEgYnVuY2ggb2ZcbiAgICAvLyBlbXB0eSBjZWxscyBhdCB0aGUgZW5kLiBUaGlzIGNhbm5vdCBlYXNpbHkgYmUgaW50ZWdyYXRlZCBpbnRvIHRoZSBtYWluXG4gICAgLy8gbG9vcCBiZWxvdyBiZWNhdXNlIG9mIHRoZSBjb2xDb3VudCBmZWF0dXJlICh3aGljaCBjYW4gYmUgcmVtb3ZlZCBhZnRlciB3ZVxuICAgIC8vIHByb3Blcmx5IHN1cHBvcnQgcmVmbG93IGFuZCBkaXNhbGxvdyBkYXRhIHRvIGdvIGJleW9uZCB0aGUgcmlnaHQtc2lkZSBvZlxuICAgIC8vIHRoZSB2aWV3cG9ydCkuXG4gICAgbGV0IGxpbmVMZW5ndGggPSAwO1xuICAgIGZvciAobGV0IHggPSBNYXRoLm1pbihsaW5lRGF0YS5sZW5ndGgsIGNvbHMpIC0gMTsgeCA+PSAwOyB4LS0pIHtcbiAgICAgIGlmIChsaW5lRGF0YS5sb2FkQ2VsbCh4LCB0aGlzLl93b3JrQ2VsbCkuZ2V0Q29kZSgpICE9PSBOVUxMX0NFTExfQ09ERSB8fCAoaXNDdXJzb3JSb3cgJiYgeCA9PT0gY3Vyc29yWCkpIHtcbiAgICAgICAgbGluZUxlbmd0aCA9IHggKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGxpbmVMZW5ndGg7IHgrKykge1xuICAgICAgbGluZURhdGEubG9hZENlbGwoeCwgdGhpcy5fd29ya0NlbGwpO1xuICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpO1xuXG4gICAgICAvLyBUaGUgY2hhcmFjdGVyIHRvIHRoZSBsZWZ0IGlzIGEgd2lkZSBjaGFyYWN0ZXIsIGRyYXdpbmcgaXMgb3duZWQgYnkgdGhlIGNoYXIgYXQgeC0xXG4gICAgICBpZiAod2lkdGggPT09IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYXJFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgaWYgKHdpZHRoID4gMSkge1xuICAgICAgICBjaGFyRWxlbWVudC5zdHlsZS53aWR0aCA9IGAke2NlbGxXaWR0aCAqIHdpZHRofXB4YDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQ3Vyc29yUm93ICYmIHggPT09IGN1cnNvclgpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChDVVJTT1JfQ0xBU1MpO1xuXG4gICAgICAgIGlmIChjdXJzb3JCbGluaykge1xuICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX0JMSU5LX0NMQVNTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAoY3Vyc29yU3R5bGUpIHtcbiAgICAgICAgICBjYXNlICdiYXInOlxuICAgICAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChDVVJTT1JfU1RZTEVfQkFSX0NMQVNTKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3VuZGVybGluZSc6XG4gICAgICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc0JvbGQoKSkge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKEJPTERfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuaXNJdGFsaWMoKSkge1xuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKElUQUxJQ19DTEFTUyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5pc0RpbSgpKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoRElNX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmlzVW5kZXJsaW5lKCkpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChVTkRFUkxJTkVfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkgfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVI7XG5cbiAgICAgIGNvbnN0IHN3YXBDb2xvciA9IHRoaXMuX3dvcmtDZWxsLmlzSW52ZXJzZSgpO1xuXG4gICAgICAvLyBmZ1xuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmlzRmdSR0IoKSkge1xuICAgICAgICBsZXQgc3R5bGUgPSBjaGFyRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJykgfHwgJyc7XG4gICAgICAgIHN0eWxlICs9IGAke3N3YXBDb2xvciA/ICdiYWNrZ3JvdW5kLScgOiAnJ31jb2xvcjpyZ2IoJHsoQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKHRoaXMuX3dvcmtDZWxsLmdldEZnQ29sb3IoKSkpLmpvaW4oJywnKX0pO2A7XG4gICAgICAgIGNoYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dvcmtDZWxsLmlzRmdQYWxldHRlKCkpIHtcbiAgICAgICAgbGV0IGZnID0gdGhpcy5fd29ya0NlbGwuZ2V0RmdDb2xvcigpO1xuICAgICAgICBpZiAodGhpcy5fd29ya0NlbGwuaXNCb2xkKCkgJiYgZmcgPCA4ICYmICFzd2FwQ29sb3IgJiYgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycykge1xuICAgICAgICAgIGZnICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChgeHRlcm0tJHtzd2FwQ29sb3IgPyAnYicgOiAnZid9Zy0ke2ZnfWApO1xuICAgICAgfSBlbHNlIGlmIChzd2FwQ29sb3IpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChgeHRlcm0tYmctJHtJTlZFUlRFRF9ERUZBVUxUX0NPTE9SfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBiZ1xuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmlzQmdSR0IoKSkge1xuICAgICAgICBsZXQgc3R5bGUgPSBjaGFyRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJykgfHwgJyc7XG4gICAgICAgIHN0eWxlICs9IGAke3N3YXBDb2xvciA/ICcnIDogJ2JhY2tncm91bmQtJ31jb2xvcjpyZ2IoJHsoQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKHRoaXMuX3dvcmtDZWxsLmdldEJnQ29sb3IoKSkpLmpvaW4oJywnKX0pO2A7XG4gICAgICAgIGNoYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dvcmtDZWxsLmlzQmdQYWxldHRlKCkpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChgeHRlcm0tJHtzd2FwQ29sb3IgPyAnZicgOiAnYid9Zy0ke3RoaXMuX3dvcmtDZWxsLmdldEJnQ29sb3IoKX1gKTtcbiAgICAgIH0gZWxzZSBpZiAoc3dhcENvbG9yKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoYHh0ZXJtLWZnLSR7SU5WRVJURURfREVGQVVMVF9DT0xPUn1gKTtcbiAgICAgIH1cblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2hhckVsZW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gZnJhZ21lbnQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBzZWxlY3Rpb24gd2l0aGluIHRoZSBidWZmZXIuIFRoaXMgbW9kZWwgb25seSBjYXJlcyBhYm91dCBjb2x1bW5cbiAqIGFuZCByb3cgY29vcmRpbmF0ZXMsIG5vdCB3aWRlIGNoYXJhY3RlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25Nb2RlbCB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHNlbGVjdCBhbGwgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICovXG4gIHB1YmxpYyBpc1NlbGVjdEFsbEFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgbWluaW1hbCBsZW5ndGggb2YgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBzdGFydCBwb3NpdGlvbi4gV2hlbiBkb3VibGVcbiAgICogY2xpY2tpbmcgb24gYSB3b3JkLCB0aGUgd29yZCB3aWxsIGJlIHNlbGVjdGVkIHdoaWNoIG1ha2VzIHRoZSBzZWxlY3Rpb25cbiAgICogc3RhcnQgYXQgdGhlIHN0YXJ0IG9mIHRoZSB3b3JkIGFuZCBtYWtlcyB0aGlzIHZhcmlhYmxlIHRoZSBsZW5ndGguXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0aW9uU3RhcnRMZW5ndGg6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBbeCwgeV0gcG9zaXRpb24gdGhlIHNlbGVjdGlvbiBzdGFydHMgYXQuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBbeCwgeV0gcG9zaXRpb24gdGhlIHNlbGVjdGlvbiBlbmRzIGF0LlxuICAgKi9cbiAgcHVibGljIHNlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uU3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBmaW5hbCBzZWxlY3Rpb24gc3RhcnQsIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gc2VsZWN0IGFsbC5cbiAgICovXG4gIHB1YmxpYyBnZXQgZmluYWxTZWxlY3Rpb25TdGFydCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSkge1xuICAgICAgcmV0dXJuIFswLCAwXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2VsZWN0aW9uRW5kIHx8ICF0aGlzLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpID8gdGhpcy5zZWxlY3Rpb25FbmQgOiB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBmaW5hbCBzZWxlY3Rpb24gZW5kLCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHNlbGVjdCBhbGwsIGRvdWJsZSBjbGlja1xuICAgKiB3b3JkIHNlbGVjdGlvbiBhbmQgdHJpcGxlIGNsaWNrIGxpbmUgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGdldCBmaW5hbFNlbGVjdGlvbkVuZCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSkge1xuICAgICAgcmV0dXJuIFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMV07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgc2VsZWN0aW9uIHN0YXJ0ICsgbGVuZ3RoIGlmIHRoZSBlbmQgZG9lc24ndCBleGlzdCBvciB0aGV5J3JlIHJldmVyc2VkXG4gICAgaWYgKCF0aGlzLnNlbGVjdGlvbkVuZCB8fCB0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpIHtcbiAgICAgIGNvbnN0IHN0YXJ0UGx1c0xlbmd0aCA9IHRoaXMuc2VsZWN0aW9uU3RhcnRbMF0gKyB0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoO1xuICAgICAgaWYgKHN0YXJ0UGx1c0xlbmd0aCA+IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICByZXR1cm4gW3N0YXJ0UGx1c0xlbmd0aCAlIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5zZWxlY3Rpb25TdGFydFsxXSArIE1hdGguZmxvb3Ioc3RhcnRQbHVzTGVuZ3RoIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKV07XG4gICAgICB9XG4gICAgICByZXR1cm4gW3N0YXJ0UGx1c0xlbmd0aCwgdGhpcy5zZWxlY3Rpb25TdGFydFsxXV07XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoZSB0aGUgd29yZC9saW5lIGlzIHNlbGVjdGVkIGFmdGVyIGEgZG91YmxlL3RyaXBsZSBjbGlja1xuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKSB7XG4gICAgICAvLyBTZWxlY3QgdGhlIGxhcmdlciBvZiB0aGUgdHdvIHdoZW4gc3RhcnQgYW5kIGVuZCBhcmUgb24gdGhlIHNhbWUgbGluZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kWzFdID09PSB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdKSB7XG4gICAgICAgIHJldHVybiBbTWF0aC5tYXgodGhpcy5zZWxlY3Rpb25TdGFydFswXSArIHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgsIHRoaXMuc2VsZWN0aW9uRW5kWzBdKSwgdGhpcy5zZWxlY3Rpb25FbmRbMV1dO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25FbmQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gc3RhcnQgYW5kIGVuZCBhcmUgcmV2ZXJzZWQuXG4gICAqL1xuICBwdWJsaWMgYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuc2VsZWN0aW9uRW5kO1xuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gc3RhcnRbMV0gPiBlbmRbMV0gfHwgKHN0YXJ0WzFdID09PSBlbmRbMV0gJiYgc3RhcnRbMF0gPiBlbmRbMF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgYnVmZmVyIGJlaW5nIHRyaW1tZWQsIGFkanVzdCB0aGUgc2VsZWN0aW9uIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgdGhlIGJ1ZmZlciBpcyBiZWluZyB0cmltbWVkLlxuICAgKiBAcmV0dXJuIFdoZXRoZXIgYSByZWZyZXNoIGlzIG5lY2Vzc2FyeS5cbiAgICovXG4gIHB1YmxpYyBvblRyaW0oYW1vdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAvLyBBZGp1c3QgdGhlIHNlbGVjdGlvbiBwb3NpdGlvbiBiYXNlZCBvbiB0aGUgdHJpbW1lZCBhbW91bnQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gLT0gYW1vdW50O1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25FbmQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uRW5kWzFdIC09IGFtb3VudDtcbiAgICB9XG5cbiAgICAvLyBUaGUgc2VsZWN0aW9uIGhhcyBtb3ZlZCBvZmYgdGhlIGJ1ZmZlciwgY2xlYXIgaXQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kICYmIHRoaXMuc2VsZWN0aW9uRW5kWzFdIDwgMCkge1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNlbGVjdGlvbiBzdGFydCBpcyB0cmltbWVkLCBlbnN1cmUgdGhlIHN0YXJ0IGNvbHVtbiBpcyAwLlxuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0ICYmIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gPCAwKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJRXZlbnQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhclNpemVTZXJ2aWNlIGltcGxlbWVudHMgSUNoYXJTaXplU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHB1YmxpYyB3aWR0aDogbnVtYmVyID0gMDtcbiAgcHVibGljIGhlaWdodDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfbWVhc3VyZVN0cmF0ZWd5OiBJTWVhc3VyZVN0cmF0ZWd5O1xuXG4gIHB1YmxpYyBnZXQgaGFzVmFsaWRTaXplKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy53aWR0aCA+IDAgJiYgdGhpcy5oZWlnaHQgPiAwOyB9XG5cbiAgcHJpdmF0ZSBfb25DaGFyU2l6ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvbkNoYXJTaXplQ2hhbmdlKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkNoYXJTaXplQ2hhbmdlLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgZG9jdW1lbnQ6IERvY3VtZW50LFxuICAgIHJlYWRvbmx5IHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9tZWFzdXJlU3RyYXRlZ3kgPSBuZXcgRG9tTWVhc3VyZVN0cmF0ZWd5KGRvY3VtZW50LCBwYXJlbnRFbGVtZW50LCB0aGlzLl9vcHRpb25zU2VydmljZSk7XG4gIH1cblxuICBwdWJsaWMgbWVhc3VyZSgpOiB2b2lkIHtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9tZWFzdXJlU3RyYXRlZ3kubWVhc3VyZSgpO1xuICAgIGlmIChyZXN1bHQud2lkdGggIT09IHRoaXMud2lkdGggfHwgcmVzdWx0LmhlaWdodCAhPT0gdGhpcy5oZWlnaHQpIHtcbiAgICAgIHRoaXMud2lkdGggPSByZXN1bHQud2lkdGg7XG4gICAgICB0aGlzLmhlaWdodCA9IHJlc3VsdC5oZWlnaHQ7XG4gICAgICB0aGlzLl9vbkNoYXJTaXplQ2hhbmdlLmZpcmUoKTtcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIElNZWFzdXJlU3RyYXRlZ3kge1xuICBtZWFzdXJlKCk6IElSZWFkb25seU1lYXN1cmVSZXN1bHQ7XG59XG5cbmludGVyZmFjZSBJUmVhZG9ubHlNZWFzdXJlUmVzdWx0IHtcbiAgcmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBJTWVhc3VyZVJlc3VsdCB7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufVxuXG4vLyBUT0RPOiBGb3Igc3VwcG9ydGluZyBicm93c2VycyB3ZSBzaG91bGQgYWxzbyBwcm92aWRlIGEgQ2FudmFzQ2hhckRpbWVuc2lvbnNQcm92aWRlciB0aGF0IHVzZXMgY3R4Lm1lYXN1cmVUZXh0XG5jbGFzcyBEb21NZWFzdXJlU3RyYXRlZ3kgaW1wbGVtZW50cyBJTWVhc3VyZVN0cmF0ZWd5IHtcbiAgcHJpdmF0ZSBfcmVzdWx0OiBJTWVhc3VyZVJlc3VsdCA9IHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuICBwcml2YXRlIF9tZWFzdXJlRWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfZG9jdW1lbnQ6IERvY3VtZW50LFxuICAgIHByaXZhdGUgX3BhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneHRlcm0tY2hhci1tZWFzdXJlLWVsZW1lbnQnKTtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC50ZXh0Q29udGVudCA9ICdXJztcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICB0aGlzLl9wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX21lYXN1cmVFbGVtZW50KTtcbiAgfVxuXG4gIHB1YmxpYyBtZWFzdXJlKCk6IElSZWFkb25seU1lYXN1cmVSZXN1bHQge1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnRGYW1pbHkgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRGYW1pbHk7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSBgJHt0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmZvbnRTaXplfXB4YDtcblxuICAgIC8vIE5vdGUgdGhhdCB0aGlzIHRyaWdnZXJzIGEgc3luY2hyb25vdXMgbGF5b3V0XG4gICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLl9tZWFzdXJlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIC8vIElmIHZhbHVlcyBhcmUgMCB0aGVuIHRoZSBlbGVtZW50IGlzIGxpa2VseSBjdXJyZW50bHkgZGlzcGxheTpub25lLCBpbiB3aGljaCBjYXNlIHdlIHNob3VsZFxuICAgIC8vIHJldGFpbiB0aGUgcHJldmlvdXMgdmFsdWUuXG4gICAgaWYgKGdlb21ldHJ5LndpZHRoICE9PSAwICYmIGdlb21ldHJ5LmhlaWdodCAhPT0gMCkge1xuICAgICAgdGhpcy5fcmVzdWx0LndpZHRoID0gZ2VvbWV0cnkud2lkdGg7XG4gICAgICB0aGlzLl9yZXN1bHQuaGVpZ2h0ID0gTWF0aC5jZWlsKGdlb21ldHJ5LmhlaWdodCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3Jlc3VsdDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhclNpemVTZXJ2aWNlLCBJUmVuZGVyU2VydmljZSwgSU1vdXNlU2VydmljZSB9IGZyb20gJy4vU2VydmljZXMnO1xuaW1wb3J0IHsgZ2V0Q29vcmRzLCBnZXRSYXdCeXRlQ29vcmRzIH0gZnJvbSAnYnJvd3Nlci9pbnB1dC9Nb3VzZSc7XG5cbmV4cG9ydCBjbGFzcyBNb3VzZVNlcnZpY2UgaW1wbGVtZW50cyBJTW91c2VTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlLFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb29yZHMoZXZlbnQ6IHtjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcn0sIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb2xDb3VudDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyLCBpc1NlbGVjdGlvbj86IGJvb2xlYW4pOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gZ2V0Q29vcmRzKFxuICAgICAgZXZlbnQsXG4gICAgICBlbGVtZW50LFxuICAgICAgY29sQ291bnQsXG4gICAgICByb3dDb3VudCxcbiAgICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemUsXG4gICAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoLFxuICAgICAgdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsXG4gICAgICBpc1NlbGVjdGlvblxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmF3Qnl0ZUNvb3JkcyhldmVudDogTW91c2VFdmVudCwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIpOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuZ2V0Q29vcmRzKGV2ZW50LCBlbGVtZW50LCBjb2xDb3VudCwgcm93Q291bnQpO1xuICAgIHJldHVybiBnZXRSYXdCeXRlQ29vcmRzKGNvb3Jkcyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlcmVyLCBJUmVuZGVyRGltZW5zaW9ucywgQ2hhcmFjdGVySm9pbmVySGFuZGxlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgUmVuZGVyRGVib3VuY2VyIH0gZnJvbSAnYnJvd3Nlci9SZW5kZXJEZWJvdW5jZXInO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IFNjcmVlbkRwck1vbml0b3IgfSBmcm9tICdicm93c2VyL1NjcmVlbkRwck1vbml0b3InO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyIH0gZnJvbSAnYnJvd3Nlci9MaWZlY3ljbGUnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSwgSVJlbmRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIFJlbmRlclNlcnZpY2UgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVJlbmRlclNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwcml2YXRlIF9yZW5kZXJEZWJvdW5jZXI6IFJlbmRlckRlYm91bmNlcjtcbiAgcHJpdmF0ZSBfc2NyZWVuRHByTW9uaXRvcjogU2NyZWVuRHByTW9uaXRvcjtcblxuICBwcml2YXRlIF9pc1BhdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9uZWVkc0Z1bGxSZWZyZXNoOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2NhbnZhc1dpZHRoOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jYW52YXNIZWlnaHQ6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfb25EaW1lbnNpb25zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxJUmVuZGVyRGltZW5zaW9ucz4oKTtcbiAgcHVibGljIGdldCBvbkRpbWVuc2lvbnNDaGFuZ2UoKTogSUV2ZW50PElSZW5kZXJEaW1lbnNpb25zPiB7IHJldHVybiB0aGlzLl9vbkRpbWVuc2lvbnNDaGFuZ2UuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25SZW5kZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4oKTtcbiAgcHVibGljIGdldCBvblJlbmRlcigpOiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vblJlbmRlci5ldmVudDsgfVxuICBwcml2YXRlIF9vblJlZnJlc2hSZXF1ZXN0ID0gbmV3IEV2ZW50RW1pdHRlcjx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+KCk7XG4gIHB1YmxpYyBnZXQgb25SZWZyZXNoUmVxdWVzdCgpOiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9vblJlZnJlc2hSZXF1ZXN0LmV2ZW50OyB9XG5cbiAgcHVibGljIGdldCBkaW1lbnNpb25zKCk6IElSZW5kZXJEaW1lbnNpb25zIHsgcmV0dXJuIHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnM7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9yZW5kZXJlcjogSVJlbmRlcmVyLFxuICAgIHByaXZhdGUgX3Jvd0NvdW50OiBudW1iZXIsXG4gICAgcmVhZG9ubHkgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgQElPcHRpb25zU2VydmljZSByZWFkb25seSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHJlYWRvbmx5IGNoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3JlbmRlckRlYm91bmNlciA9IG5ldyBSZW5kZXJEZWJvdW5jZXIoKHN0YXJ0LCBlbmQpID0+IHRoaXMuX3JlbmRlclJvd3Moc3RhcnQsIGVuZCkpO1xuICAgIHRoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyRGVib3VuY2VyKTtcblxuICAgIHRoaXMuX3NjcmVlbkRwck1vbml0b3IgPSBuZXcgU2NyZWVuRHByTW9uaXRvcigpO1xuICAgIHRoaXMuX3NjcmVlbkRwck1vbml0b3Iuc2V0TGlzdGVuZXIoKCkgPT4gdGhpcy5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKSk7XG4gICAgdGhpcy5yZWdpc3Rlcih0aGlzLl9zY3JlZW5EcHJNb25pdG9yKTtcblxuICAgIHRoaXMucmVnaXN0ZXIob3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKCkgPT4gdGhpcy5fcmVuZGVyZXIub25PcHRpb25zQ2hhbmdlZCgpKSk7XG4gICAgdGhpcy5yZWdpc3RlcihjaGFyU2l6ZVNlcnZpY2Uub25DaGFyU2l6ZUNoYW5nZSgoKSA9PiB0aGlzLm9uQ2hhclNpemVDaGFuZ2VkKCkpKTtcblxuICAgIC8vIGRwcmNoYW5nZSBzaG91bGQgaGFuZGxlIHRoaXMgY2FzZSwgd2UgbmVlZCB0aGlzIGFzIHdlbGwgZm9yIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCB0aGVcbiAgICAvLyBtYXRjaE1lZGlhIHF1ZXJ5LlxuICAgIHRoaXMucmVnaXN0ZXIoYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKHdpbmRvdywgJ3Jlc2l6ZScsICgpID0+IHRoaXMub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCkpKTtcblxuICAgIC8vIERldGVjdCB3aGV0aGVyIEludGVyc2VjdGlvbk9ic2VydmVyIGlzIGRldGVjdGVkIGFuZCBlbmFibGUgcmVuZGVyZXIgcGF1c2VcbiAgICAvLyBhbmQgcmVzdW1lIGJhc2VkIG9uIHRlcm1pbmFsIHZpc2liaWxpdHkgaWYgc29cbiAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGUgPT4gdGhpcy5fb25JbnRlcnNlY3Rpb25DaGFuZ2UoZVtlLmxlbmd0aCAtIDFdKSwgeyB0aHJlc2hvbGQ6IDAgfSk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHNjcmVlbkVsZW1lbnQpO1xuICAgICAgdGhpcy5yZWdpc3Rlcih7IGRpc3Bvc2U6ICgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKSB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9vbkludGVyc2VjdGlvbkNoYW5nZShlbnRyeTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSk6IHZvaWQge1xuICAgIHRoaXMuX2lzUGF1c2VkID0gZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPT09IDA7XG4gICAgaWYgKCF0aGlzLl9pc1BhdXNlZCAmJiB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoKSB7XG4gICAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlZnJlc2hSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcmVuZGVyRGVib3VuY2VyLnJlZnJlc2goc3RhcnQsIGVuZCwgdGhpcy5fcm93Q291bnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLnJlbmRlclJvd3Moc3RhcnQsIGVuZCk7XG4gICAgdGhpcy5fb25SZW5kZXIuZmlyZSh7IHN0YXJ0LCBlbmQgfSk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q291bnQgPSByb3dzO1xuICAgIHRoaXMuX2ZpcmVPbkNhbnZhc1Jlc2l6ZSgpO1xuICB9XG5cbiAgcHVibGljIGNoYW5nZU9wdGlvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIub25PcHRpb25zQ2hhbmdlZCgpO1xuICAgIHRoaXMuX2ZpcmVPbkNhbnZhc1Jlc2l6ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmlyZU9uQ2FudmFzUmVzaXplKCk6IHZvaWQge1xuICAgIC8vIERvbid0IGZpcmUgdGhlIGV2ZW50IGlmIHRoZSBkaW1lbnNpb25zIGhhdmVuJ3QgY2hhbmdlZFxuICAgIGlmICh0aGlzLl9yZW5kZXJlci5kaW1lbnNpb25zLmNhbnZhc1dpZHRoID09PSB0aGlzLl9jYW52YXNXaWR0aCAmJiB0aGlzLl9yZW5kZXJlci5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9PT0gdGhpcy5fY2FudmFzSGVpZ2h0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZS5maXJlKHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHNldFJlbmRlcmVyKHJlbmRlcmVyOiBJUmVuZGVyZXIpOiB2b2lkIHtcbiAgICAvLyBUT0RPOiBSZW5kZXJTZXJ2aWNlIHNob3VsZCBiZSB0aGUgb25seSBvbmUgdG8gZGlzcG9zZSB0aGUgcmVuZGVyZXJcbiAgICB0aGlzLl9yZW5kZXJlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gIH1cblxuICBwcml2YXRlIF9mdWxsUmVmcmVzaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faXNQYXVzZWQpIHtcbiAgICAgIHRoaXMuX25lZWRzRnVsbFJlZnJlc2ggPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLnNldENvbG9ycyhjb2xvcnMpO1xuICAgIHRoaXMuX2Z1bGxSZWZyZXNoKCk7XG4gIH1cblxuICBwdWJsaWMgb25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpO1xuICAgIHRoaXMucmVmcmVzaFJvd3MoMCwgdGhpcy5fcm93Q291bnQgLSAxKTtcbiAgfVxuXG4gIHB1YmxpYyBvblJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uUmVzaXplKGNvbHMsIHJvd3MpO1xuICAgIHRoaXMuX2Z1bGxSZWZyZXNoKCk7XG4gIH1cblxuICAvLyBUT0RPOiBJcyB0aGlzIHVzZWZ1bCB3aGVuIHdlIGhhdmUgb25SZXNpemU/XG4gIHB1YmxpYyBvbkNoYXJTaXplQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5vbkNoYXJTaXplQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHVibGljIG9uQmx1cigpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci5vbkJsdXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uRm9jdXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBvblNlbGVjdGlvbkNoYW5nZWQoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSwgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLm9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkN1cnNvck1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIub25DdXJzb3JNb3ZlKCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIuY2xlYXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyZXIucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcik7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVyLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElTZWxlY3Rpb25SZWRyYXdSZXF1ZXN0RXZlbnQgfSBmcm9tICdicm93c2VyL3NlbGVjdGlvbi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyTGluZSwgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0ICogYXMgQnJvd3NlciBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgU2VsZWN0aW9uTW9kZWwgfSBmcm9tICdicm93c2VyL3NlbGVjdGlvbi9TZWxlY3Rpb25Nb2RlbCc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElNb3VzZVNlcnZpY2UsIElTZWxlY3Rpb25TZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJQ29yZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQgfSBmcm9tICdicm93c2VyL2lucHV0L01vdXNlJztcbmltcG9ydCB7IG1vdmVUb0NlbGxTZXF1ZW5jZSB9IGZyb20gJ2Jyb3dzZXIvaW5wdXQvTW92ZVRvQ2VsbCc7XG5cbi8qKlxuICogVGhlIG51bWJlciBvZiBwaXhlbHMgdGhlIG1vdXNlIG5lZWRzIHRvIGJlIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydCBpblxuICogb3JkZXIgdG8gc2Nyb2xsIGF0IHRoZSBtYXhpbXVtIHNwZWVkLlxuICovXG5jb25zdCBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEID0gNTA7XG5cbi8qKlxuICogVGhlIG1heGltdW0gc2Nyb2xsaW5nIHNwZWVkXG4gKi9cbmNvbnN0IERSQUdfU0NST0xMX01BWF9TUEVFRCA9IDE1O1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZHJhZyBzY3JvbGwgdXBkYXRlcy5cbiAqL1xuY29uc3QgRFJBR19TQ1JPTExfSU5URVJWQUwgPSA1MDtcblxuLyoqXG4gKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSB0aGF0IGNhbiBoYXZlIGVsYXBzZWQgZm9yIGFuIGFsdCBjbGljayB0byBtb3ZlIHRoZVxuICogY3Vyc29yLlxuICovXG5jb25zdCBBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSA9IDUwMDtcblxuY29uc3QgTk9OX0JSRUFLSU5HX1NQQUNFX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7XG5jb25zdCBBTExfTk9OX0JSRUFLSU5HX1NQQUNFX1JFR0VYID0gbmV3IFJlZ0V4cChOT05fQlJFQUtJTkdfU1BBQ0VfQ0hBUiwgJ2cnKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcG9zaXRpb24gb2YgYSB3b3JkIG9uIGEgbGluZS5cbiAqL1xuaW50ZXJmYWNlIElXb3JkUG9zaXRpb24ge1xuICBzdGFydDogbnVtYmVyO1xuICBsZW5ndGg6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBIHNlbGVjdGlvbiBtb2RlLCB0aGlzIGRyaXZlcyBob3cgdGhlIHNlbGVjdGlvbiBiZWhhdmVzIG9uIG1vdXNlIG1vdmUuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIFNlbGVjdGlvbk1vZGUge1xuICBOT1JNQUwsXG4gIFdPUkQsXG4gIExJTkUsXG4gIENPTFVNTlxufVxuXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBtYW5hZ2VzIHRoZSBzZWxlY3Rpb24gb2YgdGhlIHRlcm1pbmFsLiBXaXRoIGhlbHAgZnJvbVxuICogU2VsZWN0aW9uTW9kZWwsIFNlbGVjdGlvblNlcnZpY2UgaGFuZGxlcyB3aXRoIGFsbCBsb2dpYyBhc3NvY2lhdGVkIHdpdGhcbiAqIGRlYWxpbmcgd2l0aCB0aGUgc2VsZWN0aW9uLCBpbmNsdWRpbmcgaGFuZGxpbmcgbW91c2UgaW50ZXJhY3Rpb24sIHdpZGVcbiAqIGNoYXJhY3RlcnMgYW5kIGZldGNoaW5nIHRoZSBhY3R1YWwgdGV4dCB3aXRoaW4gdGhlIHNlbGVjdGlvbi4gUmVuZGVyaW5nIGlzXG4gKiBub3QgaGFuZGxlZCBieSB0aGUgU2VsZWN0aW9uU2VydmljZSBidXQgdGhlIG9uUmVkcmF3UmVxdWVzdCBldmVudCBpcyBmaXJlZFxuICogd2hlbiB0aGUgc2VsZWN0aW9uIGlzIHJlYWR5IHRvIGJlIHJlZHJhd24gKG9uIGFuIGFuaW1hdGlvbiBmcmFtZSkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25TZXJ2aWNlIGltcGxlbWVudHMgSVNlbGVjdGlvblNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwcm90ZWN0ZWQgX21vZGVsOiBTZWxlY3Rpb25Nb2RlbDtcblxuICAvKipcbiAgICogVGhlIGFtb3VudCB0byBzY3JvbGwgZXZlcnkgZHJhZyBzY3JvbGwgdXBkYXRlIChkZXBlbmRzIG9uIGhvdyBmYXIgdGhlIG1vdXNlXG4gICAqIGRyYWcgaXMgYWJvdmUgb3IgYmVsb3cgdGhlIHRlcm1pbmFsKS5cbiAgICovXG4gIHByaXZhdGUgX2RyYWdTY3JvbGxBbW91bnQ6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHNlbGVjdGlvbiBtb2RlLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9hY3RpdmVTZWxlY3Rpb25Nb2RlOiBTZWxlY3Rpb25Nb2RlO1xuXG4gIC8qKlxuICAgKiBBIHNldEludGVydmFsIHRpbWVyIHRoYXQgaXMgYWN0aXZlIHdoaWxlIHRoZSBtb3VzZSBpcyBkb3duIHdob3NlIGNhbGxiYWNrXG4gICAqIHNjcm9sbHMgdGhlIHZpZXdwb3J0IHdoZW4gbmVjZXNzYXJ5LlxuICAgKi9cbiAgcHJpdmF0ZSBfZHJhZ1Njcm9sbEludGVydmFsVGltZXI6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIGFuaW1hdGlvbiBmcmFtZSBJRCB1c2VkIGZvciByZWZyZXNoaW5nIHRoZSBzZWxlY3Rpb24uXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoQW5pbWF0aW9uRnJhbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogV2hldGhlciBzZWxlY3Rpb24gaXMgZW5hYmxlZC5cbiAgICovXG4gIHByaXZhdGUgX2VuYWJsZWQgPSB0cnVlO1xuXG4gIHByaXZhdGUgX21vdXNlTW92ZUxpc3RlbmVyOiBFdmVudExpc3RlbmVyO1xuICBwcml2YXRlIF9tb3VzZVVwTGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI7XG4gIHByaXZhdGUgX3RyaW1MaXN0ZW5lcjogSURpc3Bvc2FibGU7XG4gIHByaXZhdGUgX3dvcmtDZWxsOiBDZWxsRGF0YSA9IG5ldyBDZWxsRGF0YSgpO1xuXG4gIHByaXZhdGUgX21vdXNlRG93blRpbWVTdGFtcDogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIF9vbkxpbnV4TW91c2VTZWxlY3Rpb24gPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkxpbnV4TW91c2VTZWxlY3Rpb24oKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fb25MaW51eE1vdXNlU2VsZWN0aW9uLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uUmVkcmF3UmVxdWVzdCA9IG5ldyBFdmVudEVtaXR0ZXI8SVNlbGVjdGlvblJlZHJhd1JlcXVlc3RFdmVudD4oKTtcbiAgcHVibGljIGdldCBvblJlZHJhd1JlcXVlc3QoKTogSUV2ZW50PElTZWxlY3Rpb25SZWRyYXdSZXF1ZXN0RXZlbnQ+IHsgcmV0dXJuIHRoaXMuX29uUmVkcmF3UmVxdWVzdC5ldmVudDsgfVxuICBwcml2YXRlIF9vblNlbGVjdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgcHVibGljIGdldCBvblNlbGVjdGlvbkNoYW5nZSgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JvbGxMaW5lczogKGFtb3VudDogbnVtYmVyLCBzdXBwcmVzc0V2ZW50OiBib29sZWFuKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZSxcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIEBJTW91c2VTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX21vdXNlU2VydmljZTogSU1vdXNlU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgLy8gSW5pdCBsaXN0ZW5lcnNcbiAgICB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciA9IGV2ZW50ID0+IHRoaXMuX29uTW91c2VNb3ZlKDxNb3VzZUV2ZW50PmV2ZW50KTtcbiAgICB0aGlzLl9tb3VzZVVwTGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9vbk1vdXNlVXAoPE1vdXNlRXZlbnQ+ZXZlbnQpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm9uVXNlcklucHV0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fdHJpbUxpc3RlbmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMub25UcmltKGFtb3VudCA9PiB0aGlzLl9vblRyaW0oYW1vdW50KSk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoZSA9PiB0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlKGUpKTtcblxuICAgIHRoaXMuZW5hYmxlKCk7XG5cbiAgICB0aGlzLl9tb2RlbCA9IG5ldyBTZWxlY3Rpb25Nb2RlbCh0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID0gU2VsZWN0aW9uTW9kZS5OT1JNQUw7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB0ZXJtaW5hbCBtb3VzZVxuICAgKiBhcmUgZW5hYmxlZC5cbiAgICovXG4gIHB1YmxpYyBkaXNhYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIHRoZSBzZWxlY3Rpb24gbWFuYWdlci5cbiAgICovXG4gIHB1YmxpYyBlbmFibGUoKTogdm9pZCB7XG4gICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNlbGVjdGlvblN0YXJ0KCk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDsgfVxuICBwdWJsaWMgZ2V0IHNlbGVjdGlvbkVuZCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHsgcmV0dXJuIHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kOyB9XG5cbiAgLyoqXG4gICAqIEdldHMgd2hldGhlciB0aGVyZSBpcyBhbiBhY3RpdmUgdGV4dCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0IGhhc1NlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdGFydFswXSAhPT0gZW5kWzBdIHx8IHN0YXJ0WzFdICE9PSBlbmRbMV07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdGV4dCBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IHNlbGVjdGlvblRleHQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuQ09MVU1OKSB7XG4gICAgICAvLyBJZ25vcmUgemVybyB3aWR0aCBzZWxlY3Rpb25zXG4gICAgICBpZiAoc3RhcnRbMF0gPT09IGVuZFswXSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSBzdGFydFsxXTsgaSA8PSBlbmRbMV07IGkrKykge1xuICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoaSwgdHJ1ZSwgc3RhcnRbMF0sIGVuZFswXSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKGxpbmVUZXh0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gR2V0IGZpcnN0IHJvd1xuICAgICAgY29uc3Qgc3RhcnRSb3dFbmRDb2wgPSBzdGFydFsxXSA9PT0gZW5kWzFdID8gZW5kWzBdIDogdW5kZWZpbmVkO1xuICAgICAgcmVzdWx0LnB1c2goYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhzdGFydFsxXSwgdHJ1ZSwgc3RhcnRbMF0sIHN0YXJ0Um93RW5kQ29sKSk7XG5cbiAgICAgIC8vIEdldCBtaWRkbGUgcm93c1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0WzFdICsgMTsgaSA8PSBlbmRbMV0gLSAxOyBpKyspIHtcbiAgICAgICAgY29uc3QgYnVmZmVyTGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoaSk7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhpLCB0cnVlKTtcbiAgICAgICAgaWYgKGJ1ZmZlckxpbmUhLmlzV3JhcHBlZCkge1xuICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gKz0gbGluZVRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2gobGluZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBmaW5hbCByb3dcbiAgICAgIGlmIChzdGFydFsxXSAhPT0gZW5kWzFdKSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlckxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGVuZFsxXSk7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhlbmRbMV0sIHRydWUsIDAsIGVuZFswXSk7XG4gICAgICAgIGlmIChidWZmZXJMaW5lIS5pc1dyYXBwZWQpIHtcbiAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdICs9IGxpbmVUZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGxpbmVUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcm1hdCBzdHJpbmcgYnkgcmVwbGFjaW5nIG5vbi1icmVha2luZyBzcGFjZSBjaGFycyB3aXRoIHJlZ3VsYXIgc3BhY2VzXG4gICAgLy8gYW5kIGpvaW5pbmcgdGhlIGFycmF5IGludG8gYSBtdWx0aS1saW5lIHN0cmluZy5cbiAgICBjb25zdCBmb3JtYXR0ZWRSZXN1bHQgPSByZXN1bHQubWFwKGxpbmUgPT4ge1xuICAgICAgcmV0dXJuIGxpbmUucmVwbGFjZShBTExfTk9OX0JSRUFLSU5HX1NQQUNFX1JFR0VYLCAnICcpO1xuICAgIH0pLmpvaW4oQnJvd3Nlci5pc1dpbmRvd3MgPyAnXFxyXFxuJyA6ICdcXG4nKTtcblxuICAgIHJldHVybiBmb3JtYXR0ZWRSZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBjdXJyZW50IHRlcm1pbmFsIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgIHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZXMgYSByZWZyZXNoLCByZWRyYXdpbmcgdGhlIHNlbGVjdGlvbiBvbiB0aGUgbmV4dCBvcHBvcnR1bml0eS5cbiAgICogQHBhcmFtIGlzTGludXhNb3VzZVNlbGVjdGlvbiBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gc2hvdWxkIGJlIHJlZ2lzdGVyZWQgYXMgYSBuZXdcbiAgICogc2VsZWN0aW9uIG9uIExpbnV4LlxuICAgKi9cbiAgcHVibGljIHJlZnJlc2goaXNMaW51eE1vdXNlU2VsZWN0aW9uPzogYm9vbGVhbik6IHZvaWQge1xuICAgIC8vIFF1ZXVlIHRoZSByZWZyZXNoIGZvciB0aGUgcmVuZGVyZXJcbiAgICBpZiAoIXRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSkge1xuICAgICAgdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9yZWZyZXNoKCkpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBwbGF0Zm9ybSBpcyBMaW51eCBhbmQgdGhlIHJlZnJlc2ggY2FsbCBjb21lcyBmcm9tIGEgbW91c2UgZXZlbnQsXG4gICAgLy8gd2UgbmVlZCB0byB1cGRhdGUgdGhlIHNlbGVjdGlvbiBmb3IgbWlkZGxlIGNsaWNrIHRvIHBhc3RlIHNlbGVjdGlvbi5cbiAgICBpZiAoQnJvd3Nlci5pc0xpbnV4ICYmIGlzTGludXhNb3VzZVNlbGVjdGlvbikge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uVGV4dCA9IHRoaXMuc2VsZWN0aW9uVGV4dDtcbiAgICAgIGlmIChzZWxlY3Rpb25UZXh0Lmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZmlyZSh0aGlzLnNlbGVjdGlvblRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyB0aGUgcmVmcmVzaCBldmVudCwgY2F1c2luZyBjb25zdW1lcnMgdG8gcGljayBpdCB1cCBhbmQgcmVkcmF3IHRoZVxuICAgKiBzZWxlY3Rpb24gc3RhdGUuXG4gICAqL1xuICBwcml2YXRlIF9yZWZyZXNoKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vblJlZHJhd1JlcXVlc3QuZmlyZSh7XG4gICAgICBzdGFydDogdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCxcbiAgICAgIGVuZDogdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQsXG4gICAgICBjb2x1bW5TZWxlY3RNb2RlOiB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID09PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTlxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBjbGljayB3YXMgaW5zaWRlIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgaXNDbGlja0luU2VsZWN0aW9uKGV2ZW50OiBNb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDtcbiAgICBjb25zdCBlbmQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtcblxuICAgIGlmICghc3RhcnQgfHwgIWVuZCB8fCAhY29vcmRzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2FyZUNvb3Jkc0luU2VsZWN0aW9uKGNvb3Jkcywgc3RhcnQsIGVuZCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FyZUNvb3Jkc0luU2VsZWN0aW9uKGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0sIGVuZDogW251bWJlciwgbnVtYmVyXSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoY29vcmRzWzFdID4gc3RhcnRbMV0gJiYgY29vcmRzWzFdIDwgZW5kWzFdKSB8fFxuICAgICAgICAoc3RhcnRbMV0gPT09IGVuZFsxXSAmJiBjb29yZHNbMV0gPT09IHN0YXJ0WzFdICYmIGNvb3Jkc1swXSA+PSBzdGFydFswXSAmJiBjb29yZHNbMF0gPCBlbmRbMF0pIHx8XG4gICAgICAgIChzdGFydFsxXSA8IGVuZFsxXSAmJiBjb29yZHNbMV0gPT09IGVuZFsxXSAmJiBjb29yZHNbMF0gPCBlbmRbMF0pIHx8XG4gICAgICAgIChzdGFydFsxXSA8IGVuZFsxXSAmJiBjb29yZHNbMV0gPT09IHN0YXJ0WzFdICYmIGNvb3Jkc1swXSA+PSBzdGFydFswXSk7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB3b3JkIGF0IHRoZSBjdXJyZW50IG1vdXNlIGV2ZW50IGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIHNlbGVjdFdvcmRBdEN1cnNvcihldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBpZiAoY29vcmRzKSB7XG4gICAgICB0aGlzLl9zZWxlY3RXb3JkQXQoY29vcmRzLCBmYWxzZSk7XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgYWxsIHRleHQgd2l0aGluIHRoZSB0ZXJtaW5hbC5cbiAgICovXG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZWxlY3RMaW5lcyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgc3RhcnQgPSBNYXRoLm1heChzdGFydCwgMCk7XG4gICAgZW5kID0gTWF0aC5taW4oZW5kLCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGggLSAxKTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IFswLCBzdGFydF07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgZW5kXTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRoZSBidWZmZXIgYmVpbmcgdHJpbW1lZCwgYWRqdXN0IHRoZSBzZWxlY3Rpb24gcG9zaXRpb24uXG4gICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCB0aGUgYnVmZmVyIGlzIGJlaW5nIHRyaW1tZWQuXG4gICAqL1xuICBwcml2YXRlIF9vblRyaW0oYW1vdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBuZWVkc1JlZnJlc2ggPSB0aGlzLl9tb2RlbC5vblRyaW0oYW1vdW50KTtcbiAgICBpZiAobmVlZHNSZWZyZXNoKSB7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgMC1iYXNlZCBbeCwgeV0gYnVmZmVyIGNvb3JkaW5hdGVzIG9mIHRoZSBjdXJyZW50IG1vdXNlIGV2ZW50LlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQ6IE1vdXNlRXZlbnQpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGV2ZW50LCB0aGlzLl9zY3JlZW5FbGVtZW50LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cywgdHJ1ZSk7XG4gICAgaWYgKCFjb29yZHMpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gQ29udmVydCB0byAwLWJhc2VkXG4gICAgY29vcmRzWzBdLS07XG4gICAgY29vcmRzWzFdLS07XG5cbiAgICAvLyBDb252ZXJ0IHZpZXdwb3J0IGNvb3JkcyB0byBidWZmZXIgY29vcmRzXG4gICAgY29vcmRzWzFdICs9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuICAgIHJldHVybiBjb29yZHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYW1vdW50IHRoZSB2aWV3cG9ydCBzaG91bGQgYmUgc2Nyb2xsZWQgYmFzZWQgb24gaG93IGZhciBvdXQgb2YgdGhlXG4gICAqIHRlcm1pbmFsIHRoZSBtb3VzZSBpcy5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2dldE1vdXNlRXZlbnRTY3JvbGxBbW91bnQoZXZlbnQ6IE1vdXNlRXZlbnQpOiBudW1iZXIge1xuICAgIGxldCBvZmZzZXQgPSBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudChldmVudCwgdGhpcy5fc2NyZWVuRWxlbWVudClbMV07XG4gICAgY29uc3QgdGVybWluYWxIZWlnaHQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgKiBNYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCAqIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubGluZUhlaWdodCk7XG4gICAgaWYgKG9mZnNldCA+PSAwICYmIG9mZnNldCA8PSB0ZXJtaW5hbEhlaWdodCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmIChvZmZzZXQgPiB0ZXJtaW5hbEhlaWdodCkge1xuICAgICAgb2Zmc2V0IC09IHRlcm1pbmFsSGVpZ2h0O1xuICAgIH1cblxuICAgIG9mZnNldCA9IE1hdGgubWluKE1hdGgubWF4KG9mZnNldCwgLURSQUdfU0NST0xMX01BWF9USFJFU0hPTEQpLCBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEKTtcbiAgICBvZmZzZXQgLz0gRFJBR19TQ1JPTExfTUFYX1RIUkVTSE9MRDtcbiAgICByZXR1cm4gKG9mZnNldCAvIE1hdGguYWJzKG9mZnNldCkpICsgTWF0aC5yb3VuZChvZmZzZXQgKiAoRFJBR19TQ1JPTExfTUFYX1NQRUVEIC0gMSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgc2hvdWxkIGZvcmNlIHNlbGVjdGlvbiwgcmVnYXJkbGVzcyBvZlxuICAgKiB3aGV0aGVyIHRoZSB0ZXJtaW5hbCBpcyBpbiBtb3VzZSBldmVudHMgbW9kZS5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHB1YmxpYyBzaG91bGRGb3JjZVNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmIChCcm93c2VyLmlzTWFjKSB7XG4gICAgICByZXR1cm4gZXZlbnQuYWx0S2V5ICYmIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGUgbW91c2Vkb3duIGV2ZW50LCBzZXR0aW5nIHVwIGZvciBhIG5ldyBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2Vkb3duIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIG9uTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbW91c2VEb3duVGltZVN0YW1wID0gZXZlbnQudGltZVN0YW1wO1xuICAgIC8vIElmIHdlIGhhdmUgc2VsZWN0aW9uLCB3ZSB3YW50IHRoZSBjb250ZXh0IG1lbnUgb24gcmlnaHQgY2xpY2sgZXZlbiBpZiB0aGVcbiAgICAvLyB0ZXJtaW5hbCBpcyBpbiBtb3VzZSBtb2RlLlxuICAgIGlmIChldmVudC5idXR0b24gPT09IDIgJiYgdGhpcy5oYXNTZWxlY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBPbmx5IGFjdGlvbiB0aGUgcHJpbWFyeSBidXR0b25cbiAgICBpZiAoZXZlbnQuYnV0dG9uICE9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWxsb3cgc2VsZWN0aW9uIHdoZW4gdXNpbmcgYSBzcGVjaWZpYyBtb2RpZmllciBrZXksIGV2ZW4gd2hlbiBkaXNhYmxlZFxuICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgaWYgKCF0aGlzLnNob3VsZEZvcmNlU2VsZWN0aW9uKGV2ZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHNlbmQgdGhlIG1vdXNlIGRvd24gZXZlbnQgdG8gdGhlIGN1cnJlbnQgcHJvY2Vzcywgd2Ugd2FudCB0byBzZWxlY3RcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIC8vIFRlbGwgdGhlIGJyb3dzZXIgbm90IHRvIHN0YXJ0IGEgcmVndWxhciBzZWxlY3Rpb25cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgLy8gUmVzZXQgZHJhZyBzY3JvbGwgc3RhdGVcbiAgICB0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID0gMDtcblxuICAgIGlmICh0aGlzLl9lbmFibGVkICYmIGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICB0aGlzLl9vbkluY3JlbWVudGFsQ2xpY2soZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuX29uU2luZ2xlQ2xpY2soZXZlbnQpO1xuICAgICAgfSBlbHNlIGlmIChldmVudC5kZXRhaWwgPT09IDIpIHtcbiAgICAgICAgdGhpcy5fb25Eb3VibGVDbGljayhldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmRldGFpbCA9PT0gMykge1xuICAgICAgICB0aGlzLl9vblRyaXBsZUNsaWNrKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9hZGRNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBsaXN0ZW5lcnMgd2hlbiBtb3VzZWRvd24gaXMgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfYWRkTW91c2VEb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIExpc3RlbiBvbiB0aGUgZG9jdW1lbnQgc28gdGhhdCBkcmFnZ2luZyBvdXRzaWRlIG9mIHZpZXdwb3J0IHdvcmtzXG4gICAgaWYgKHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcExpc3RlbmVyKTtcbiAgICB9XG4gICAgdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5fZHJhZ1Njcm9sbCgpLCBEUkFHX1NDUk9MTF9JTlRFUlZBTCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgbGlzdGVuZXJzIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2hlbiBtb3VzZWRvd24gaXMgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQpIHtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lcik7XG4gICAgICB0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBMaXN0ZW5lcik7XG4gICAgfVxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIpO1xuICAgIHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGFuIGluY3JlbWVudGFsIGNsaWNrLCBzZXR0aW5nIHRoZSBzZWxlY3Rpb24gZW5kIHBvc2l0aW9uIHRvIHRoZSBtb3VzZVxuICAgKiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uSW5jcmVtZW50YWxDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHNpbmdsZSBjbGljaywgcmVzZXR0aW5nIHJlbGV2YW50IHN0YXRlIGFuZCBzZXR0aW5nIHRoZSBzZWxlY3Rpb25cbiAgICogc3RhcnQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9vblNpbmdsZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICAgIHRoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IHRoaXMuc2hvdWxkQ29sdW1uU2VsZWN0KGV2ZW50KSA/IFNlbGVjdGlvbk1vZGUuQ09MVU1OIDogU2VsZWN0aW9uTW9kZS5OT1JNQUw7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBuZXcgc2VsZWN0aW9uXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBFbnN1cmUgdGhlIGxpbmUgZXhpc3RzXG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFsxXSk7XG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGVhcmx5IGlmIHRoZSBjbGljayBldmVudCBpcyBub3QgaW4gdGhlIGJ1ZmZlciAoZWcuIGluIHNjcm9sbCBiYXIpXG4gICAgaWYgKGxpbmUubGVuZ3RoID09PSB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBtb3VzZSBpcyBvdmVyIHRoZSBzZWNvbmQgaGFsZiBvZiBhIHdpZGUgY2hhcmFjdGVyLCBhZGp1c3QgdGhlXG4gICAgLy8gc2VsZWN0aW9uIHRvIGNvdmVyIHRoZSB3aG9sZSBjaGFyYWN0ZXJcbiAgICBpZiAobGluZS5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSkgPT09IDApIHtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKys7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgZG91YmxlIGNsaWNrLCBzZWxlY3RpbmcgdGhlIGN1cnJlbnQgd29yay5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uRG91YmxlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKGNvb3Jkcykge1xuICAgICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IFNlbGVjdGlvbk1vZGUuV09SRDtcbiAgICAgIHRoaXMuX3NlbGVjdFdvcmRBdChjb29yZHMsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHRyaXBsZSBjbGljaywgc2VsZWN0aW5nIHRoZSBjdXJyZW50IGxpbmUgYW5kIGFjdGl2YXRpbmcgbGluZVxuICAgKiBzZWxlY3QgbW9kZS5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uVHJpcGxlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjb29yZHMgPSB0aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhldmVudCk7XG4gICAgaWYgKGNvb3Jkcykge1xuICAgICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IFNlbGVjdGlvbk1vZGUuTElORTtcbiAgICAgIHRoaXMuX3NlbGVjdExpbmVBdChjb29yZHNbMV0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIHNob3VsZCBvcGVyYXRlIGluIGNvbHVtbiBzZWxlY3QgbW9kZVxuICAgKiBAcGFyYW0gZXZlbnQgdGhlIG1vdXNlIG9yIGtleWJvYXJkIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgc2hvdWxkQ29sdW1uU2VsZWN0KGV2ZW50OiBLZXlib2FyZEV2ZW50IHwgTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBldmVudC5hbHRLZXkgJiYgIShCcm93c2VyLmlzTWFjICYmIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG1vdXNlbW92ZSBldmVudCB3aGVuIHRoZSBtb3VzZSBidXR0b24gaXMgZG93biwgcmVjb3JkaW5nIHRoZVxuICAgKiBlbmQgb2YgdGhlIHNlbGVjdGlvbiBhbmQgcmVmcmVzaGluZyB0aGUgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlbW92ZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX29uTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gSWYgdGhlIG1vdXNlbW92ZSBsaXN0ZW5lciBpcyBhY3RpdmUgaXQgbWVhbnMgdGhhdCBhIHNlbGVjdGlvbiBpc1xuICAgIC8vIGN1cnJlbnRseSBiZWluZyBtYWRlLCB3ZSBzaG91bGQgc3RvcCBwcm9wYWdhdGlvbiB0byBwcmV2ZW50IG1vdXNlIGV2ZW50c1xuICAgIC8vIHRvIGJlIHNlbnQgdG8gdGhlIHB0eS5cbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlcmUgaXMgbm8gc2VsZWN0aW9uIHN0YXJ0LCB0aGlzIGNhbiBoYXBwZW4gaWYgdGhlIGZpcnN0XG4gICAgLy8gY2xpY2sgaW4gdGhlIHRlcm1pbmFsIGlzIGFuIGluY3JlbWVudGFsIGNsaWNrXG4gICAgaWYgKCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlY29yZCB0aGUgcHJldmlvdXMgcG9zaXRpb24gc28gd2Uga25vdyB3aGV0aGVyIHRvIHJlZHJhdyB0aGUgc2VsZWN0aW9uXG4gICAgLy8gYXQgdGhlIGVuZC5cbiAgICBjb25zdCBwcmV2aW91c1NlbGVjdGlvbkVuZCA9IHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA/IFt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0sIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXV0gOiBudWxsO1xuXG4gICAgLy8gU2V0IHRoZSBpbml0aWFsIHNlbGVjdGlvbiBlbmQgYmFzZWQgb24gdGhlIG1vdXNlIGNvb3JkaW5hdGVzXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2VsZWN0IHRoZSBlbnRpcmUgbGluZSBpZiBsaW5lIHNlbGVjdCBtb2RlIGlzIGFjdGl2ZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5MSU5FKSB7XG4gICAgICBpZiAodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdIDwgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMV0pIHtcbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuV09SRCkge1xuICAgICAgdGhpcy5fc2VsZWN0VG9Xb3JkQXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGFtb3VudCBvZiBzY3JvbGxpbmcgdGhhdCB3aWxsIGhhcHBlbi5cbiAgICB0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID0gdGhpcy5fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudChldmVudCk7XG5cbiAgICAvLyBJZiB0aGUgY3Vyc29yIHdhcyBhYm92ZSBvciBiZWxvdyB0aGUgdmlld3BvcnQsIG1ha2Ugc3VyZSBpdCdzIGF0IHRoZVxuICAgIC8vIHN0YXJ0IG9yIGVuZCBvZiB0aGUgdmlld3BvcnQgcmVzcGVjdGl2ZWx5LiBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbiB3aGVuXG4gICAgLy8gTk9UIGluIGNvbHVtbiBzZWxlY3QgbW9kZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgIGlmICh0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID4gMCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPCAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhcmFjdGVyIGluY2x1ZGUgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGluIHRoZVxuICAgIC8vIHNlbGVjdGlvbi4gTm90ZSB0aGF0IHNlbGVjdGlvbnMgYXQgdGhlIHZlcnkgZW5kIG9mIHRoZSBsaW5lIHdpbGwgbmV2ZXJcbiAgICAvLyBoYXZlIGEgY2hhcmFjdGVyLlxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPCBidWZmZXIubGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pO1xuICAgICAgaWYgKGxpbmUgJiYgbGluZS5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9ubHkgZHJhdyBoZXJlIGlmIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICBpZiAoIXByZXZpb3VzU2VsZWN0aW9uRW5kIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFswXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFsxXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsYmFjayB0aGF0IG9jY3VycyBldmVyeSBEUkFHX1NDUk9MTF9JTlRFUlZBTCBtcyB0aGF0IGRvZXMgdGhlXG4gICAqIHNjcm9sbGluZyBvZiB0aGUgdmlld3BvcnQuXG4gICAqL1xuICBwcml2YXRlIF9kcmFnU2Nyb2xsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kIHx8ICF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZHJhZ1Njcm9sbEFtb3VudCkge1xuICAgICAgdGhpcy5fc2Nyb2xsTGluZXModGhpcy5fZHJhZ1Njcm9sbEFtb3VudCwgZmFsc2UpO1xuICAgICAgLy8gUmUtZXZhbHVhdGUgc2VsZWN0aW9uXG4gICAgICAvLyBJZiB0aGUgY3Vyc29yIHdhcyBhYm92ZSBvciBiZWxvdyB0aGUgdmlld3BvcnQsIG1ha2Ugc3VyZSBpdCdzIGF0IHRoZVxuICAgICAgLy8gc3RhcnQgb3IgZW5kIG9mIHRoZSB2aWV3cG9ydCByZXNwZWN0aXZlbHkuIFRoaXMgc2hvdWxkIG9ubHkgaGFwcGVuIHdoZW5cbiAgICAgIC8vIE5PVCBpbiBjb2x1bW4gc2VsZWN0IG1vZGUuXG4gICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICAgIGlmICh0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID4gMCkge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdID0gTWF0aC5taW4oYnVmZmVyLnlkaXNwICsgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLCBidWZmZXIubGluZXMubGVuZ3RoIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXSA9IGJ1ZmZlci55ZGlzcDtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBtb3VzZXVwIGV2ZW50LCByZW1vdmluZyB0aGUgbW91c2Vkb3duIGxpc3RlbmVycy5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZXVwIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfb25Nb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGltZUVsYXBzZWQgPSBldmVudC50aW1lU3RhbXAgLSB0aGlzLl9tb3VzZURvd25UaW1lU3RhbXA7XG5cbiAgICB0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTtcblxuICAgIGlmICh0aGlzLnNlbGVjdGlvblRleHQubGVuZ3RoIDw9IDEgJiYgdGltZUVsYXBzZWQgPCBBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSkge1xuICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSA9PT0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApIHtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSB0aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIHRoaXMuX2VsZW1lbnQsXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLFxuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICBpZiAoY29vcmRpbmF0ZXMgJiYgY29vcmRpbmF0ZXNbMF0gIT09IHVuZGVmaW5lZCAmJiBjb29yZGluYXRlc1sxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBtb3ZlVG9DZWxsU2VxdWVuY2UoY29vcmRpbmF0ZXNbMF0gLSAxLCBjb29yZGluYXRlc1sxXSAtIDEsIHRoaXMuX2J1ZmZlclNlcnZpY2UsIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMpO1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoc2VxdWVuY2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uQnVmZmVyQWN0aXZhdGUoZToge2FjdGl2ZUJ1ZmZlcjogSUJ1ZmZlciwgaW5hY3RpdmVCdWZmZXI6IElCdWZmZXJ9KTogdm9pZCB7XG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIC8vIE9ubHkgYWRqdXN0IHRoZSBzZWxlY3Rpb24gb24gdHJpbSwgc2hpZnRFbGVtZW50cyBpcyByYXJlbHkgdXNlZCAob25seSBpblxuICAgIC8vIHJldmVyc2VJbmRleCkgYW5kIGRlbGV0ZSBpbiBhIHNwbGljZSBpcyBvbmx5IGV2ZXIgdXNlZCB3aGVuIHRoZSBzYW1lXG4gICAgLy8gbnVtYmVyIG9mIGVsZW1lbnRzIHdhcyBqdXN0IGFkZGVkLiBHaXZlbiB0aGlzIGlzIGNvdWxkIGFjdHVhbGx5IGJlXG4gICAgLy8gYmVuZWZpY2lhbCB0byBsZWF2ZSB0aGUgc2VsZWN0aW9uIGFzIGlzIGZvciB0aGVzZSBjYXNlcy5cbiAgICBpZiAodGhpcy5fdHJpbUxpc3RlbmVyKSB7XG4gICAgICB0aGlzLl90cmltTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgIH1cbiAgICB0aGlzLl90cmltTGlzdGVuZXIgPSBlLmFjdGl2ZUJ1ZmZlci5saW5lcy5vblRyaW0oYW1vdW50ID0+IHRoaXMuX29uVHJpbShhbW91bnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhIHZpZXdwb3J0IGNvbHVtbiB0byB0aGUgY2hhcmFjdGVyIGluZGV4IG9uIHRoZSBidWZmZXIgbGluZSwgdGhlXG4gICAqIGxhdHRlciB0YWtlcyBpbnRvIGFjY291bnQgd2lkZSBjaGFyYWN0ZXJzLlxuICAgKiBAcGFyYW0gY29vcmRzIFRoZSBjb29yZGluYXRlcyB0byBmaW5kIHRoZSAyIGluZGV4IGZvci5cbiAgICovXG4gIHByaXZhdGUgX2NvbnZlcnRWaWV3cG9ydENvbFRvQ2hhcmFjdGVySW5kZXgoYnVmZmVyTGluZTogSUJ1ZmZlckxpbmUsIGNvb3JkczogW251bWJlciwgbnVtYmVyXSk6IG51bWJlciB7XG4gICAgbGV0IGNoYXJJbmRleCA9IGNvb3Jkc1swXTtcbiAgICBmb3IgKGxldCBpID0gMDsgY29vcmRzWzBdID49IGk7IGkrKykge1xuICAgICAgY29uc3QgbGVuZ3RoID0gYnVmZmVyTGluZS5sb2FkQ2VsbChpLCB0aGlzLl93b3JrQ2VsbCkuZ2V0Q2hhcnMoKS5sZW5ndGg7XG4gICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAvLyBXaWRlIGNoYXJhY3RlcnMgYXJlbid0IGluY2x1ZGVkIGluIHRoZSBsaW5lIHN0cmluZyBzbyBkZWNyZW1lbnQgdGhlXG4gICAgICAgIC8vIGluZGV4IHNvIHRoZSBpbmRleCBpcyBiYWNrIG9uIHRoZSB3aWRlIGNoYXJhY3Rlci5cbiAgICAgICAgY2hhckluZGV4LS07XG4gICAgICB9IGVsc2UgaWYgKGxlbmd0aCA+IDEgJiYgY29vcmRzWzBdICE9PSBpKSB7XG4gICAgICAgIC8vIEVtb2ppcyB0YWtlIHVwIG11bHRpcGxlIGNoYXJhY3RlcnMsIHNvIGFkanVzdCBhY2NvcmRpbmdseS4gRm9yIHRoZXNlXG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgb3QgaW5jbHVkZSB0aGUgY2hhcmFjdGVyIGF0IHRoZSBjb2x1bW4gYXMgd2UncmVcbiAgICAgICAgLy8gcmV0dXJuaW5nIHRoZSBzdGFydCBpbmRleCBpbiB0aGUgc3RyaW5nLCBub3QgdGhlIGVuZCBpbmRleC5cbiAgICAgICAgY2hhckluZGV4ICs9IGxlbmd0aCAtIDE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFySW5kZXg7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VsZWN0aW9uKGNvbDogbnVtYmVyLCByb3c6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpO1xuICAgIHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0ID0gW2NvbCwgcm93XTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aCA9IGxlbmd0aDtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHBvc2l0aW9uYWwgaW5mb3JtYXRpb24gZm9yIHRoZSB3b3JkIGF0IHRoZSBjb29yZGluYXRlZCBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGdldCB0aGUgd29yZCBhdC5cbiAgICovXG4gIHByaXZhdGUgX2dldFdvcmRBdChjb29yZHM6IFtudW1iZXIsIG51bWJlcl0sIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb246IGJvb2xlYW4sIGZvbGxvd1dyYXBwZWRMaW5lc0Fib3ZlOiBib29sZWFuID0gdHJ1ZSwgZm9sbG93V3JhcHBlZExpbmVzQmVsb3c6IGJvb2xlYW4gPSB0cnVlKTogSVdvcmRQb3NpdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgLy8gRW5zdXJlIGNvb3JkcyBhcmUgd2l0aGluIHZpZXdwb3J0IChlZy4gbm90IHdpdGhpbiBzY3JvbGwgYmFyKVxuICAgIGlmIChjb29yZHNbMF0gPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGNvbnN0IGJ1ZmZlckxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGNvb3Jkc1sxXSk7XG4gICAgaWYgKCFidWZmZXJMaW5lKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmUgPSBidWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGNvb3Jkc1sxXSwgZmFsc2UpO1xuXG4gICAgLy8gR2V0IGFjdHVhbCBpbmRleCwgdGFraW5nIGludG8gY29uc2lkZXJhdGlvbiB3aWRlIGNoYXJhY3RlcnNcbiAgICBsZXQgc3RhcnRJbmRleCA9IHRoaXMuX2NvbnZlcnRWaWV3cG9ydENvbFRvQ2hhcmFjdGVySW5kZXgoYnVmZmVyTGluZSwgY29vcmRzKTtcbiAgICBsZXQgZW5kSW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgLy8gUmVjb3JkIG9mZnNldCB0byBiZSB1c2VkIGxhdGVyXG4gICAgY29uc3QgY2hhck9mZnNldCA9IGNvb3Jkc1swXSAtIHN0YXJ0SW5kZXg7XG4gICAgbGV0IGxlZnRXaWRlQ2hhckNvdW50ID0gMDtcbiAgICBsZXQgcmlnaHRXaWRlQ2hhckNvdW50ID0gMDtcbiAgICBsZXQgbGVmdExvbmdDaGFyT2Zmc2V0ID0gMDtcbiAgICBsZXQgcmlnaHRMb25nQ2hhck9mZnNldCA9IDA7XG5cbiAgICBpZiAobGluZS5jaGFyQXQoc3RhcnRJbmRleCkgPT09ICcgJykge1xuICAgICAgLy8gRXhwYW5kIHVudGlsIG5vbi13aGl0ZXNwYWNlIGlzIGhpdFxuICAgICAgd2hpbGUgKHN0YXJ0SW5kZXggPiAwICYmIGxpbmUuY2hhckF0KHN0YXJ0SW5kZXggLSAxKSA9PT0gJyAnKSB7XG4gICAgICAgIHN0YXJ0SW5kZXgtLTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChlbmRJbmRleCA8IGxpbmUubGVuZ3RoICYmIGxpbmUuY2hhckF0KGVuZEluZGV4ICsgMSkgPT09ICcgJykge1xuICAgICAgICBlbmRJbmRleCsrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFeHBhbmQgdW50aWwgd2hpdGVzcGFjZSBpcyBoaXQuIFRoaXMgYWxnb3JpdGhtIHdvcmtzIGJ5IHNjYW5uaW5nIGxlZnRcbiAgICAgIC8vIGFuZCByaWdodCBmcm9tIHRoZSBzdGFydGluZyBwb3NpdGlvbiwga2VlcGluZyBib3RoIHRoZSBpbmRleCBmb3JtYXRcbiAgICAgIC8vIChsaW5lKSBhbmQgdGhlIGNvbHVtbiBmb3JtYXQgKGJ1ZmZlckxpbmUpIGluIHN5bmMuIFdoZW4gYSB3aWRlXG4gICAgICAvLyBjaGFyYWN0ZXIgaXMgaGl0LCBpdCBpcyByZWNvcmRlZCBhbmQgdGhlIGNvbHVtbiBpbmRleCBpcyBhZGp1c3RlZC5cbiAgICAgIGxldCBzdGFydENvbCA9IGNvb3Jkc1swXTtcbiAgICAgIGxldCBlbmRDb2wgPSBjb29yZHNbMF07XG5cbiAgICAgIC8vIENvbnNpZGVyIHRoZSBpbml0aWFsIHBvc2l0aW9uLCBza2lwIGl0IGFuZCBpbmNyZW1lbnQgdGhlIHdpZGUgY2hhclxuICAgICAgLy8gdmFyaWFibGVcbiAgICAgIGlmIChidWZmZXJMaW5lLmdldFdpZHRoKHN0YXJ0Q29sKSA9PT0gMCkge1xuICAgICAgICBsZWZ0V2lkZUNoYXJDb3VudCsrO1xuICAgICAgICBzdGFydENvbC0tO1xuICAgICAgfVxuICAgICAgaWYgKGJ1ZmZlckxpbmUuZ2V0V2lkdGgoZW5kQ29sKSA9PT0gMikge1xuICAgICAgICByaWdodFdpZGVDaGFyQ291bnQrKztcbiAgICAgICAgZW5kQ29sKys7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgZW5kIGluZGV4IGZvciBjaGFyYWN0ZXJzIHdob3NlIGxlbmd0aCBhcmUgPiAxIChlbW9qaXMpXG4gICAgICBjb25zdCBsZW5ndGggPSBidWZmZXJMaW5lLmdldFN0cmluZyhlbmRDb2wpLmxlbmd0aDtcbiAgICAgIGlmIChsZW5ndGggPiAxKSB7XG4gICAgICAgIHJpZ2h0TG9uZ0NoYXJPZmZzZXQgKz0gbGVuZ3RoIC0gMTtcbiAgICAgICAgZW5kSW5kZXggKz0gbGVuZ3RoIC0gMTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhwYW5kIHRoZSBzdHJpbmcgaW4gYm90aCBkaXJlY3Rpb25zIHVudGlsIGEgc3BhY2UgaXMgaGl0XG4gICAgICB3aGlsZSAoc3RhcnRDb2wgPiAwICYmIHN0YXJ0SW5kZXggPiAwICYmICF0aGlzLl9pc0NoYXJXb3JkU2VwYXJhdG9yKGJ1ZmZlckxpbmUubG9hZENlbGwoc3RhcnRDb2wgLSAxLCB0aGlzLl93b3JrQ2VsbCkpKSB7XG4gICAgICAgIGJ1ZmZlckxpbmUubG9hZENlbGwoc3RhcnRDb2wgLSAxLCB0aGlzLl93b3JrQ2VsbCk7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgICAgIC8vIElmIHRoZSBuZXh0IGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhciwgcmVjb3JkIGl0IGFuZCBza2lwIHRoZSBjb2x1bW5cbiAgICAgICAgICBsZWZ0V2lkZUNoYXJDb3VudCsrO1xuICAgICAgICAgIHN0YXJ0Q29sLS07XG4gICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMSkge1xuICAgICAgICAgIC8vIElmIHRoZSBuZXh0IGNoYXJhY3RlcidzIHN0cmluZyBpcyBsb25nZXIgdGhhbiAxIGNoYXIgKGVnLiBlbW9qaSksXG4gICAgICAgICAgLy8gYWRqdXN0IHRoZSBpbmRleFxuICAgICAgICAgIGxlZnRMb25nQ2hhck9mZnNldCArPSBsZW5ndGggLSAxO1xuICAgICAgICAgIHN0YXJ0SW5kZXggLT0gbGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBzdGFydEluZGV4LS07XG4gICAgICAgIHN0YXJ0Q29sLS07XG4gICAgICB9XG4gICAgICB3aGlsZSAoZW5kQ29sIDwgYnVmZmVyTGluZS5sZW5ndGggJiYgZW5kSW5kZXggKyAxIDwgbGluZS5sZW5ndGggJiYgIXRoaXMuX2lzQ2hhcldvcmRTZXBhcmF0b3IoYnVmZmVyTGluZS5sb2FkQ2VsbChlbmRDb2wgKyAxLCB0aGlzLl93b3JrQ2VsbCkpKSB7XG4gICAgICAgIGJ1ZmZlckxpbmUubG9hZENlbGwoZW5kQ29sICsgMSwgdGhpcy5fd29ya0NlbGwpO1xuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkgPT09IDIpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgbmV4dCBjaGFyYWN0ZXIgaXMgYSB3aWRlIGNoYXIsIHJlY29yZCBpdCBhbmQgc2tpcCB0aGUgY29sdW1uXG4gICAgICAgICAgcmlnaHRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgICAgZW5kQ29sKys7XG4gICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID4gMSkge1xuICAgICAgICAgIC8vIElmIHRoZSBuZXh0IGNoYXJhY3RlcidzIHN0cmluZyBpcyBsb25nZXIgdGhhbiAxIGNoYXIgKGVnLiBlbW9qaSksXG4gICAgICAgICAgLy8gYWRqdXN0IHRoZSBpbmRleFxuICAgICAgICAgIHJpZ2h0TG9uZ0NoYXJPZmZzZXQgKz0gbGVuZ3RoIC0gMTtcbiAgICAgICAgICBlbmRJbmRleCArPSBsZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVuZEluZGV4Kys7XG4gICAgICAgIGVuZENvbCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEluY3JlbWVuZXQgdGhlIGVuZCBpbmRleCBzbyBpdCBpcyBhdCB0aGUgc3RhcnQgb2YgdGhlIG5leHQgY2hhcmFjdGVyXG4gICAgZW5kSW5kZXgrKztcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc3RhcnQgX2NvbHVtbl8sIGNvbnZlcnRpbmcgdGhlIHRoZSBzdHJpbmcgaW5kZXhlcyBiYWNrIHRvXG4gICAgLy8gY29sdW1uIGNvb3JkaW5hdGVzLlxuICAgIGxldCBzdGFydCA9XG4gICAgICAgIHN0YXJ0SW5kZXggLy8gVGhlIGluZGV4IG9mIHRoZSBzZWxlY3Rpb24ncyBzdGFydCBjaGFyIGluIHRoZSBsaW5lIHN0cmluZ1xuICAgICAgICArIGNoYXJPZmZzZXQgLy8gVGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgaW5pdGlhbCBjaGFyJ3MgY29sdW1uIGFuZCBpbmRleFxuICAgICAgICAtIGxlZnRXaWRlQ2hhckNvdW50IC8vIFRoZSBudW1iZXIgb2Ygd2lkZSBjaGFycyBsZWZ0IG9mIHRoZSBpbml0aWFsIGNoYXJcbiAgICAgICAgKyBsZWZ0TG9uZ0NoYXJPZmZzZXQ7IC8vIFRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBjaGFycyBsZWZ0IG9mIHRoZSBpbml0aWFsIGNoYXIgYWRkZWQgYnkgY29sdW1ucyB3aXRoIHN0cmluZ3MgbG9uZ2VyIHRoYW4gMSAoZW1vamlzKVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBsZW5ndGggaW4gX2NvbHVtbnNfLCBjb252ZXJ0aW5nIHRoZSB0aGUgc3RyaW5nIGluZGV4ZXMgYmFja1xuICAgIC8vIHRvIGNvbHVtbiBjb29yZGluYXRlcy5cbiAgICBsZXQgbGVuZ3RoID0gTWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCAvLyBEaXNhbGxvdyBsZW5ndGhzIGxhcmdlciB0aGFuIHRoZSB0ZXJtaW5hbCBjb2xzXG4gICAgICAgIGVuZEluZGV4IC8vIFRoZSBpbmRleCBvZiB0aGUgc2VsZWN0aW9uJ3MgZW5kIGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAgIC0gc3RhcnRJbmRleCAvLyBUaGUgaW5kZXggb2YgdGhlIHNlbGVjdGlvbidzIHN0YXJ0IGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICAgICsgbGVmdFdpZGVDaGFyQ291bnQgLy8gVGhlIG51bWJlciBvZiB3aWRlIGNoYXJzIGxlZnQgb2YgdGhlIGluaXRpYWwgY2hhclxuICAgICAgICArIHJpZ2h0V2lkZUNoYXJDb3VudCAvLyBUaGUgbnVtYmVyIG9mIHdpZGUgY2hhcnMgcmlnaHQgb2YgdGhlIGluaXRpYWwgY2hhciAoaW5jbHVzaXZlKVxuICAgICAgICAtIGxlZnRMb25nQ2hhck9mZnNldCAvLyBUaGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgY2hhcnMgbGVmdCBvZiB0aGUgaW5pdGlhbCBjaGFyIGFkZGVkIGJ5IGNvbHVtbnMgd2l0aCBzdHJpbmdzIGxvbmdlciB0aGFuIDEgKGVtb2ppcylcbiAgICAgICAgLSByaWdodExvbmdDaGFyT2Zmc2V0KTsgLy8gVGhlIG51bWJlciBvZiBhZGRpdGlvbmFsIGNoYXJzIHJpZ2h0IG9mIHRoZSBpbml0aWFsIGNoYXIgKGluY2x1c2l2ZSkgYWRkZWQgYnkgY29sdW1ucyB3aXRoIHN0cmluZ3MgbG9uZ2VyIHRoYW4gMSAoZW1vamlzKVxuXG4gICAgaWYgKCFhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uICYmIGxpbmUuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gUmVjdXJzZSB1cHdhcmRzIGlmIHRoZSBsaW5lIGlzIHdyYXBwZWQgYW5kIHRoZSB3b3JkIHdyYXBzIHRvIHRoZSBhYm92ZSBsaW5lXG4gICAgaWYgKGZvbGxvd1dyYXBwZWRMaW5lc0Fib3ZlKSB7XG4gICAgICBpZiAoc3RhcnQgPT09IDAgJiYgYnVmZmVyTGluZS5nZXRDb2RlUG9pbnQoMCkgIT09IDMyIC8qJyAnKi8pIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNCdWZmZXJMaW5lID0gYnVmZmVyLmxpbmVzLmdldChjb29yZHNbMV0gLSAxKTtcbiAgICAgICAgaWYgKHByZXZpb3VzQnVmZmVyTGluZSAmJiBidWZmZXJMaW5lLmlzV3JhcHBlZCAmJiBwcmV2aW91c0J1ZmZlckxpbmUuZ2V0Q29kZVBvaW50KHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEpICE9PSAzMiAvKicgJyovKSB7XG4gICAgICAgICAgY29uc3QgcHJldmlvdXNMaW5lV29yZFBvc2l0aW9uID0gdGhpcy5fZ2V0V29yZEF0KFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSAxLCBjb29yZHNbMV0gLSAxXSwgZmFsc2UsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgICBpZiAocHJldmlvdXNMaW5lV29yZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSBwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24uc3RhcnQ7XG4gICAgICAgICAgICBzdGFydCAtPSBvZmZzZXQ7XG4gICAgICAgICAgICBsZW5ndGggKz0gb2Zmc2V0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlY3Vyc2UgZG93bndhcmRzIGlmIHRoZSBsaW5lIGlzIHdyYXBwZWQgYW5kIHRoZSB3b3JkIHdyYXBzIHRvIHRoZSBuZXh0IGxpbmVcbiAgICBpZiAoZm9sbG93V3JhcHBlZExpbmVzQmVsb3cpIHtcbiAgICAgIGlmIChzdGFydCArIGxlbmd0aCA9PT0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzICYmIGJ1ZmZlckxpbmUuZ2V0Q29kZVBvaW50KHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEpICE9PSAzMiAvKicgJyovKSB7XG4gICAgICAgIGNvbnN0IG5leHRCdWZmZXJMaW5lID0gYnVmZmVyLmxpbmVzLmdldChjb29yZHNbMV0gKyAxKTtcbiAgICAgICAgaWYgKG5leHRCdWZmZXJMaW5lICYmIG5leHRCdWZmZXJMaW5lLmlzV3JhcHBlZCAmJiBuZXh0QnVmZmVyTGluZS5nZXRDb2RlUG9pbnQoMCkgIT09IDMyIC8qJyAnKi8pIHtcbiAgICAgICAgICBjb25zdCBuZXh0TGluZVdvcmRQb3NpdGlvbiA9IHRoaXMuX2dldFdvcmRBdChbMCwgY29vcmRzWzFdICsgMV0sIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgaWYgKG5leHRMaW5lV29yZFBvc2l0aW9uKSB7XG4gICAgICAgICAgICBsZW5ndGggKz0gbmV4dExpbmVXb3JkUG9zaXRpb24ubGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN0YXJ0LCBsZW5ndGggfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHRoZSB3b3JkIGF0IHRoZSBjb29yZGluYXRlcyBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGdldCB0aGUgd29yZCBhdC5cbiAgICogQHBhcmFtIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb24gSWYgd2hpdGVzcGFjZSBzaG91bGQgYmUgc2VsZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBfc2VsZWN0V29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSwgYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHdvcmRQb3NpdGlvbiA9IHRoaXMuX2dldFdvcmRBdChjb29yZHMsIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb24pO1xuICAgIGlmICh3b3JkUG9zaXRpb24pIHtcbiAgICAgIC8vIEFkanVzdCBuZWdhdGl2ZSBzdGFydCB2YWx1ZVxuICAgICAgd2hpbGUgKHdvcmRQb3NpdGlvbi5zdGFydCA8IDApIHtcbiAgICAgICAgd29yZFBvc2l0aW9uLnN0YXJ0ICs9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgY29vcmRzWzFdLS07XG4gICAgICB9XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IFt3b3JkUG9zaXRpb24uc3RhcnQsIGNvb3Jkc1sxXV07XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aCA9IHdvcmRQb3NpdGlvbi5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNlbGVjdGlvbiBlbmQgdG8gdGhlIHdvcmQgYXQgdGhlIGNvb3JkaW5hdGVkIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIGNvb3JkcyBUaGUgY29vcmRpbmF0ZXMgdG8gZ2V0IHRoZSB3b3JkIGF0LlxuICAgKi9cbiAgcHJpdmF0ZSBfc2VsZWN0VG9Xb3JkQXQoY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdKTogdm9pZCB7XG4gICAgY29uc3Qgd29yZFBvc2l0aW9uID0gdGhpcy5fZ2V0V29yZEF0KGNvb3JkcywgdHJ1ZSk7XG4gICAgaWYgKHdvcmRQb3NpdGlvbikge1xuICAgICAgbGV0IGVuZFJvdyA9IGNvb3Jkc1sxXTtcblxuICAgICAgLy8gQWRqdXN0IG5lZ2F0aXZlIHN0YXJ0IHZhbHVlXG4gICAgICB3aGlsZSAod29yZFBvc2l0aW9uLnN0YXJ0IDwgMCkge1xuICAgICAgICB3b3JkUG9zaXRpb24uc3RhcnQgKz0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICBlbmRSb3ctLTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHdyYXBwZWQgbGVuZ3RoIHZhbHVlLCB0aGlzIG9ubHkgbmVlZHMgdG8gaGFwcGVuIHdoZW4gdmFsdWVzIGFyZSByZXZlcnNlZCBhcyBpbiB0aGF0XG4gICAgICAvLyBjYXNlIHdlJ3JlIGludGVyZXN0ZWQgaW4gdGhlIHN0YXJ0IG9mIHRoZSB3b3JkLCBub3QgdGhlIGVuZFxuICAgICAgaWYgKCF0aGlzLl9tb2RlbC5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpKSB7XG4gICAgICAgIHdoaWxlICh3b3JkUG9zaXRpb24uc3RhcnQgKyB3b3JkUG9zaXRpb24ubGVuZ3RoID4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICAgICAgd29yZFBvc2l0aW9uLmxlbmd0aCAtPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgICAgZW5kUm93Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gW3RoaXMuX21vZGVsLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkgPyB3b3JkUG9zaXRpb24uc3RhcnQgOiB3b3JkUG9zaXRpb24uc3RhcnQgKyB3b3JkUG9zaXRpb24ubGVuZ3RoLCBlbmRSb3ddO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHdoZXRoZXIgdGhlIGNoYXJhY3RlciBpcyBjb25zaWRlcmVkIGEgd29yZCBzZXBhcmF0b3IgYnkgdGhlIHNlbGVjdFxuICAgKiB3b3JkIGxvZ2ljLlxuICAgKiBAcGFyYW0gY2hhciBUaGUgY2hhcmFjdGVyIHRvIGNoZWNrLlxuICAgKi9cbiAgcHJpdmF0ZSBfaXNDaGFyV29yZFNlcGFyYXRvcihjZWxsOiBDZWxsRGF0YSk6IGJvb2xlYW4ge1xuICAgIC8vIFplcm8gd2lkdGggY2hhcmFjdGVycyBhcmUgbmV2ZXIgc2VwYXJhdG9ycyBhcyB0aGV5IGFyZSBhbHdheXMgdG8gdGhlXG4gICAgLy8gcmlnaHQgb2Ygd2lkZSBjaGFyYWN0ZXJzXG4gICAgaWYgKGNlbGwuZ2V0V2lkdGgoKSA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy53b3JkU2VwYXJhdG9yLmluZGV4T2YoY2VsbC5nZXRDaGFycygpKSA+PSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgdGhlIGxpbmUgc3BlY2lmaWVkLlxuICAgKiBAcGFyYW0gbGluZSBUaGUgbGluZSBpbmRleC5cbiAgICovXG4gIHByb3RlY3RlZCBfc2VsZWN0TGluZUF0KGxpbmU6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHdyYXBwZWRSYW5nZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldFdyYXBwZWRSYW5nZUZvckxpbmUobGluZSk7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbMCwgd3JhcHBlZFJhbmdlLmZpcnN0XTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSBbdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB3cmFwcGVkUmFuZ2UubGFzdF07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMsIElSZW5kZXJlciwgQ2hhcmFjdGVySm9pbmVySGFuZGxlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJU2VsZWN0aW9uUmVkcmF3UmVxdWVzdEV2ZW50IH0gZnJvbSAnYnJvd3Nlci9zZWxlY3Rpb24vVHlwZXMnO1xuaW1wb3J0IHsgY3JlYXRlRGVjb3JhdG9yIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VSZWdpc3RyeSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBJQ2hhclNpemVTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDaGFyU2l6ZVNlcnZpY2U+KCdDaGFyU2l6ZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNoYXJTaXplU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHJlYWRvbmx5IHdpZHRoOiBudW1iZXI7XG4gIHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xuICByZWFkb25seSBoYXNWYWxpZFNpemU6IGJvb2xlYW47XG5cbiAgcmVhZG9ubHkgb25DaGFyU2l6ZUNoYW5nZTogSUV2ZW50PHZvaWQ+O1xuXG4gIG1lYXN1cmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElNb3VzZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SU1vdXNlU2VydmljZT4oJ01vdXNlU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJTW91c2VTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgZ2V0Q29vcmRzKGV2ZW50OiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9LCBlbGVtZW50OiBIVE1MRWxlbWVudCwgY29sQ291bnQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlciwgaXNTZWxlY3Rpb24/OiBib29sZWFuKTogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcbiAgZ2V0UmF3Qnl0ZUNvb3JkcyhldmVudDogTW91c2VFdmVudCwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIpOiB7IHg6IG51bWJlciwgeTogbnVtYmVyIH0gfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJUmVuZGVyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJUmVuZGVyU2VydmljZT4oJ1JlbmRlclNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSVJlbmRlclNlcnZpY2UgZXh0ZW5kcyBJRGlzcG9zYWJsZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIG9uRGltZW5zaW9uc0NoYW5nZTogSUV2ZW50PElSZW5kZXJEaW1lbnNpb25zPjtcbiAgb25SZW5kZXI6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+O1xuICBvblJlZnJlc2hSZXF1ZXN0OiBJRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PjtcblxuICBkaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9ucztcblxuICByZWZyZXNoUm93cyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQ7XG4gIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQ7XG4gIGNoYW5nZU9wdGlvbnMoKTogdm9pZDtcbiAgc2V0UmVuZGVyZXIocmVuZGVyZXI6IElSZW5kZXJlcik6IHZvaWQ7XG4gIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQ7XG4gIG9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpOiB2b2lkO1xuICBvblJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQ7XG4gIC8vIFRPRE86IElzIHRoaXMgdXNlZnVsIHdoZW4gd2UgaGF2ZSBvblJlc2l6ZT9cbiAgb25DaGFyU2l6ZUNoYW5nZWQoKTogdm9pZDtcbiAgb25CbHVyKCk6IHZvaWQ7XG4gIG9uRm9jdXMoKTogdm9pZDtcbiAgb25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0sIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4pOiB2b2lkO1xuICBvbkN1cnNvck1vdmUoKTogdm9pZDtcbiAgY2xlYXIoKTogdm9pZDtcbiAgcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcjogQ2hhcmFjdGVySm9pbmVySGFuZGxlcik6IG51bWJlcjtcbiAgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IElTZWxlY3Rpb25TZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElTZWxlY3Rpb25TZXJ2aWNlPignU2VsZWN0aW9uU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJU2VsZWN0aW9uU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHJlYWRvbmx5IHNlbGVjdGlvblRleHQ6IHN0cmluZztcbiAgcmVhZG9ubHkgaGFzU2VsZWN0aW9uOiBib29sZWFuO1xuICByZWFkb25seSBzZWxlY3Rpb25TdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgc2VsZWN0aW9uRW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkO1xuXG4gIHJlYWRvbmx5IG9uTGludXhNb3VzZVNlbGVjdGlvbjogSUV2ZW50PHN0cmluZz47XG4gIHJlYWRvbmx5IG9uUmVkcmF3UmVxdWVzdDogSUV2ZW50PElTZWxlY3Rpb25SZWRyYXdSZXF1ZXN0RXZlbnQ+O1xuICByZWFkb25seSBvblNlbGVjdGlvbkNoYW5nZTogSUV2ZW50PHZvaWQ+O1xuXG4gIGRpc2FibGUoKTogdm9pZDtcbiAgZW5hYmxlKCk6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG4gIHNldFNlbGVjdGlvbihyb3c6IG51bWJlciwgY29sOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogdm9pZDtcbiAgc2VsZWN0QWxsKCk6IHZvaWQ7XG4gIHNlbGVjdExpbmVzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZDtcbiAgY2xlYXJTZWxlY3Rpb24oKTogdm9pZDtcbiAgaXNDbGlja0luU2VsZWN0aW9uKGV2ZW50OiBNb3VzZUV2ZW50KTogYm9vbGVhbjtcbiAgc2VsZWN0V29yZEF0Q3Vyc29yKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZDtcbiAgc2hvdWxkQ29sdW1uU2VsZWN0KGV2ZW50OiBLZXlib2FyZEV2ZW50IHwgTW91c2VFdmVudCk6IGJvb2xlYW47XG4gIHNob3VsZEZvcmNlU2VsZWN0aW9uKGV2ZW50OiBNb3VzZUV2ZW50KTogYm9vbGVhbjtcbiAgcmVmcmVzaChpc0xpbnV4TW91c2VTZWxlY3Rpb24/OiBib29sZWFuKTogdm9pZDtcbiAgb25Nb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgSVNvdW5kU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJU291bmRTZXJ2aWNlPignU291bmRTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElTb3VuZFNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwbGF5QmVsbFNvdW5kKCk6IHZvaWQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJU291bmRTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBTb3VuZFNlcnZpY2UgaW1wbGVtZW50cyBJU291bmRTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgX2F1ZGlvQ29udGV4dDogQXVkaW9Db250ZXh0O1xuXG4gIHN0YXRpYyBnZXQgYXVkaW9Db250ZXh0KCk6IEF1ZGlvQ29udGV4dCB8IG51bGwge1xuICAgIGlmICghU291bmRTZXJ2aWNlLl9hdWRpb0NvbnRleHQpIHtcbiAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dEN0b3I6IHR5cGVvZiBBdWRpb0NvbnRleHQgPSAoPGFueT53aW5kb3cpLkF1ZGlvQ29udGV4dCB8fCAoPGFueT53aW5kb3cpLndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICAgIGlmICghYXVkaW9Db250ZXh0Q3Rvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1dlYiBBdWRpbyBBUEkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuIENvbnNpZGVyIHVwZ3JhZGluZyB0byB0aGUgbGF0ZXN0IHZlcnNpb24nKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBTb3VuZFNlcnZpY2UuX2F1ZGlvQ29udGV4dCA9IG5ldyBhdWRpb0NvbnRleHRDdG9yKCk7XG4gICAgfVxuICAgIHJldHVybiBTb3VuZFNlcnZpY2UuX2F1ZGlvQ29udGV4dDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBwbGF5QmVsbFNvdW5kKCk6IHZvaWQge1xuICAgIGNvbnN0IGN0eCA9IFNvdW5kU2VydmljZS5hdWRpb0NvbnRleHQ7XG4gICAgaWYgKCFjdHgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYmVsbEF1ZGlvU291cmNlID0gY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgIGN0eC5kZWNvZGVBdWRpb0RhdGEodGhpcy5fYmFzZTY0VG9BcnJheUJ1ZmZlcih0aGlzLl9yZW1vdmVNaW1lVHlwZSh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmJlbGxTb3VuZCkpLCAoYnVmZmVyKSA9PiB7XG4gICAgICBiZWxsQXVkaW9Tb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xuICAgICAgYmVsbEF1ZGlvU291cmNlLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKTtcbiAgICAgIGJlbGxBdWRpb1NvdXJjZS5zdGFydCgwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX2Jhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0OiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gd2luZG93LmF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbW92ZU1pbWVUeXBlKGRhdGFVUkk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gU3BsaXQgdGhlIGlucHV0IHRvIGdldCB0aGUgbWltZS10eXBlIGFuZCB0aGUgZGF0YSBpdHNlbGZcbiAgICBjb25zdCBzcGxpdFVyaSA9IGRhdGFVUkkuc3BsaXQoJywnKTtcblxuICAgIC8vIFJldHVybiBvbmx5IHRoZSBkYXRhXG4gICAgcmV0dXJuIHNwbGl0VXJpWzFdO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IGZpbGwgfSBmcm9tICdjb21tb24vVHlwZWRBcnJheVV0aWxzJztcblxuZXhwb3J0IGNvbnN0IHdjd2lkdGggPSAoZnVuY3Rpb24ob3B0czoge251bDogbnVtYmVyLCBjb250cm9sOiBudW1iZXJ9KTogKHVjczogbnVtYmVyKSA9PiBudW1iZXIge1xuICAvLyBleHRyYWN0ZWQgZnJvbSBodHRwczovL3d3dy5jbC5jYW0uYWMudWsvJTdFbWdrMjUvdWNzL3djd2lkdGguY1xuICAvLyBjb21iaW5pbmcgY2hhcmFjdGVyc1xuICBjb25zdCBDT01CSU5JTkdfQk1QID0gW1xuICAgIFsweDAzMDAsIDB4MDM2Rl0sIFsweDA0ODMsIDB4MDQ4Nl0sIFsweDA0ODgsIDB4MDQ4OV0sXG4gICAgWzB4MDU5MSwgMHgwNUJEXSwgWzB4MDVCRiwgMHgwNUJGXSwgWzB4MDVDMSwgMHgwNUMyXSxcbiAgICBbMHgwNUM0LCAweDA1QzVdLCBbMHgwNUM3LCAweDA1QzddLCBbMHgwNjAwLCAweDA2MDNdLFxuICAgIFsweDA2MTAsIDB4MDYxNV0sIFsweDA2NEIsIDB4MDY1RV0sIFsweDA2NzAsIDB4MDY3MF0sXG4gICAgWzB4MDZENiwgMHgwNkU0XSwgWzB4MDZFNywgMHgwNkU4XSwgWzB4MDZFQSwgMHgwNkVEXSxcbiAgICBbMHgwNzBGLCAweDA3MEZdLCBbMHgwNzExLCAweDA3MTFdLCBbMHgwNzMwLCAweDA3NEFdLFxuICAgIFsweDA3QTYsIDB4MDdCMF0sIFsweDA3RUIsIDB4MDdGM10sIFsweDA5MDEsIDB4MDkwMl0sXG4gICAgWzB4MDkzQywgMHgwOTNDXSwgWzB4MDk0MSwgMHgwOTQ4XSwgWzB4MDk0RCwgMHgwOTREXSxcbiAgICBbMHgwOTUxLCAweDA5NTRdLCBbMHgwOTYyLCAweDA5NjNdLCBbMHgwOTgxLCAweDA5ODFdLFxuICAgIFsweDA5QkMsIDB4MDlCQ10sIFsweDA5QzEsIDB4MDlDNF0sIFsweDA5Q0QsIDB4MDlDRF0sXG4gICAgWzB4MDlFMiwgMHgwOUUzXSwgWzB4MEEwMSwgMHgwQTAyXSwgWzB4MEEzQywgMHgwQTNDXSxcbiAgICBbMHgwQTQxLCAweDBBNDJdLCBbMHgwQTQ3LCAweDBBNDhdLCBbMHgwQTRCLCAweDBBNERdLFxuICAgIFsweDBBNzAsIDB4MEE3MV0sIFsweDBBODEsIDB4MEE4Ml0sIFsweDBBQkMsIDB4MEFCQ10sXG4gICAgWzB4MEFDMSwgMHgwQUM1XSwgWzB4MEFDNywgMHgwQUM4XSwgWzB4MEFDRCwgMHgwQUNEXSxcbiAgICBbMHgwQUUyLCAweDBBRTNdLCBbMHgwQjAxLCAweDBCMDFdLCBbMHgwQjNDLCAweDBCM0NdLFxuICAgIFsweDBCM0YsIDB4MEIzRl0sIFsweDBCNDEsIDB4MEI0M10sIFsweDBCNEQsIDB4MEI0RF0sXG4gICAgWzB4MEI1NiwgMHgwQjU2XSwgWzB4MEI4MiwgMHgwQjgyXSwgWzB4MEJDMCwgMHgwQkMwXSxcbiAgICBbMHgwQkNELCAweDBCQ0RdLCBbMHgwQzNFLCAweDBDNDBdLCBbMHgwQzQ2LCAweDBDNDhdLFxuICAgIFsweDBDNEEsIDB4MEM0RF0sIFsweDBDNTUsIDB4MEM1Nl0sIFsweDBDQkMsIDB4MENCQ10sXG4gICAgWzB4MENCRiwgMHgwQ0JGXSwgWzB4MENDNiwgMHgwQ0M2XSwgWzB4MENDQywgMHgwQ0NEXSxcbiAgICBbMHgwQ0UyLCAweDBDRTNdLCBbMHgwRDQxLCAweDBENDNdLCBbMHgwRDRELCAweDBENERdLFxuICAgIFsweDBEQ0EsIDB4MERDQV0sIFsweDBERDIsIDB4MERENF0sIFsweDBERDYsIDB4MERENl0sXG4gICAgWzB4MEUzMSwgMHgwRTMxXSwgWzB4MEUzNCwgMHgwRTNBXSwgWzB4MEU0NywgMHgwRTRFXSxcbiAgICBbMHgwRUIxLCAweDBFQjFdLCBbMHgwRUI0LCAweDBFQjldLCBbMHgwRUJCLCAweDBFQkNdLFxuICAgIFsweDBFQzgsIDB4MEVDRF0sIFsweDBGMTgsIDB4MEYxOV0sIFsweDBGMzUsIDB4MEYzNV0sXG4gICAgWzB4MEYzNywgMHgwRjM3XSwgWzB4MEYzOSwgMHgwRjM5XSwgWzB4MEY3MSwgMHgwRjdFXSxcbiAgICBbMHgwRjgwLCAweDBGODRdLCBbMHgwRjg2LCAweDBGODddLCBbMHgwRjkwLCAweDBGOTddLFxuICAgIFsweDBGOTksIDB4MEZCQ10sIFsweDBGQzYsIDB4MEZDNl0sIFsweDEwMkQsIDB4MTAzMF0sXG4gICAgWzB4MTAzMiwgMHgxMDMyXSwgWzB4MTAzNiwgMHgxMDM3XSwgWzB4MTAzOSwgMHgxMDM5XSxcbiAgICBbMHgxMDU4LCAweDEwNTldLCBbMHgxMTYwLCAweDExRkZdLCBbMHgxMzVGLCAweDEzNUZdLFxuICAgIFsweDE3MTIsIDB4MTcxNF0sIFsweDE3MzIsIDB4MTczNF0sIFsweDE3NTIsIDB4MTc1M10sXG4gICAgWzB4MTc3MiwgMHgxNzczXSwgWzB4MTdCNCwgMHgxN0I1XSwgWzB4MTdCNywgMHgxN0JEXSxcbiAgICBbMHgxN0M2LCAweDE3QzZdLCBbMHgxN0M5LCAweDE3RDNdLCBbMHgxN0RELCAweDE3RERdLFxuICAgIFsweDE4MEIsIDB4MTgwRF0sIFsweDE4QTksIDB4MThBOV0sIFsweDE5MjAsIDB4MTkyMl0sXG4gICAgWzB4MTkyNywgMHgxOTI4XSwgWzB4MTkzMiwgMHgxOTMyXSwgWzB4MTkzOSwgMHgxOTNCXSxcbiAgICBbMHgxQTE3LCAweDFBMThdLCBbMHgxQjAwLCAweDFCMDNdLCBbMHgxQjM0LCAweDFCMzRdLFxuICAgIFsweDFCMzYsIDB4MUIzQV0sIFsweDFCM0MsIDB4MUIzQ10sIFsweDFCNDIsIDB4MUI0Ml0sXG4gICAgWzB4MUI2QiwgMHgxQjczXSwgWzB4MURDMCwgMHgxRENBXSwgWzB4MURGRSwgMHgxREZGXSxcbiAgICBbMHgyMDBCLCAweDIwMEZdLCBbMHgyMDJBLCAweDIwMkVdLCBbMHgyMDYwLCAweDIwNjNdLFxuICAgIFsweDIwNkEsIDB4MjA2Rl0sIFsweDIwRDAsIDB4MjBFRl0sIFsweDMwMkEsIDB4MzAyRl0sXG4gICAgWzB4MzA5OSwgMHgzMDlBXSwgWzB4QTgwNiwgMHhBODA2XSwgWzB4QTgwQiwgMHhBODBCXSxcbiAgICBbMHhBODI1LCAweEE4MjZdLCBbMHhGQjFFLCAweEZCMUVdLCBbMHhGRTAwLCAweEZFMEZdLFxuICAgIFsweEZFMjAsIDB4RkUyM10sIFsweEZFRkYsIDB4RkVGRl0sIFsweEZGRjksIDB4RkZGQl1cbiAgXTtcbiAgY29uc3QgQ09NQklOSU5HX0hJR0ggPSBbXG4gICAgWzB4MTBBMDEsIDB4MTBBMDNdLCBbMHgxMEEwNSwgMHgxMEEwNl0sIFsweDEwQTBDLCAweDEwQTBGXSxcbiAgICBbMHgxMEEzOCwgMHgxMEEzQV0sIFsweDEwQTNGLCAweDEwQTNGXSwgWzB4MUQxNjcsIDB4MUQxNjldLFxuICAgIFsweDFEMTczLCAweDFEMTgyXSwgWzB4MUQxODUsIDB4MUQxOEJdLCBbMHgxRDFBQSwgMHgxRDFBRF0sXG4gICAgWzB4MUQyNDIsIDB4MUQyNDRdLCBbMHhFMDAwMSwgMHhFMDAwMV0sIFsweEUwMDIwLCAweEUwMDdGXSxcbiAgICBbMHhFMDEwMCwgMHhFMDFFRl1cbiAgXTtcbiAgLy8gYmluYXJ5IHNlYXJjaFxuICBmdW5jdGlvbiBiaXNlYXJjaCh1Y3M6IG51bWJlciwgZGF0YTogbnVtYmVyW11bXSk6IGJvb2xlYW4ge1xuICAgIGxldCBtaW4gPSAwO1xuICAgIGxldCBtYXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgbGV0IG1pZDtcbiAgICBpZiAodWNzIDwgZGF0YVswXVswXSB8fCB1Y3MgPiBkYXRhW21heF1bMV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgd2hpbGUgKG1heCA+PSBtaW4pIHtcbiAgICAgIG1pZCA9IChtaW4gKyBtYXgpID4+IDE7XG4gICAgICBpZiAodWNzID4gZGF0YVttaWRdWzFdKSB7XG4gICAgICAgIG1pbiA9IG1pZCArIDE7XG4gICAgICB9IGVsc2UgaWYgKHVjcyA8IGRhdGFbbWlkXVswXSkge1xuICAgICAgICBtYXggPSBtaWQgLSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmdW5jdGlvbiB3Y3dpZHRoSGlnaCh1Y3M6IG51bWJlcik6IDAgfCAxIHwgMiB7XG4gICAgaWYgKGJpc2VhcmNoKHVjcywgQ09NQklOSU5HX0hJR0gpKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgaWYgKCh1Y3MgPj0gMHgyMDAwMCAmJiB1Y3MgPD0gMHgyZmZmZCkgfHwgKHVjcyA+PSAweDMwMDAwICYmIHVjcyA8PSAweDNmZmZkKSkge1xuICAgICAgcmV0dXJuIDI7XG4gICAgfVxuICAgIHJldHVybiAxO1xuICB9XG4gIGNvbnN0IGNvbnRyb2wgPSBvcHRzLmNvbnRyb2wgfCAwO1xuXG4gIC8vIGNyZWF0ZSBsb29rdXAgdGFibGUgZm9yIEJNUCBwbGFuZVxuICBjb25zdCB0YWJsZSA9IG5ldyBVaW50OEFycmF5KDY1NTM2KTtcbiAgZmlsbCh0YWJsZSwgMSk7XG4gIHRhYmxlWzBdID0gb3B0cy5udWw7XG4gIC8vIGNvbnRyb2wgY2hhcnNcbiAgZmlsbCh0YWJsZSwgb3B0cy5jb250cm9sLCAxLCAzMik7XG4gIGZpbGwodGFibGUsIG9wdHMuY29udHJvbCwgMHg3ZiwgMHhhMCk7XG5cbiAgLy8gYXBwbHkgd2lkZSBjaGFyIHJ1bGVzIGZpcnN0XG4gIC8vIHdpZGUgY2hhcnNcbiAgZmlsbCh0YWJsZSwgMiwgMHgxMTAwLCAweDExNjApO1xuICB0YWJsZVsweDIzMjldID0gMjtcbiAgdGFibGVbMHgyMzJhXSA9IDI7XG4gIGZpbGwodGFibGUsIDIsIDB4MmU4MCwgMHhhNGQwKTtcbiAgdGFibGVbMHgzMDNmXSA9IDE7ICAvLyB3cm9uZ2x5IGluIGxhc3QgbGluZVxuXG4gIGZpbGwodGFibGUsIDIsIDB4YWMwMCwgMHhkN2E0KTtcbiAgZmlsbCh0YWJsZSwgMiwgMHhmOTAwLCAweGZiMDApO1xuICBmaWxsKHRhYmxlLCAyLCAweGZlMTAsIDB4ZmUxYSk7XG4gIGZpbGwodGFibGUsIDIsIDB4ZmUzMCwgMHhmZTcwKTtcbiAgZmlsbCh0YWJsZSwgMiwgMHhmZjAwLCAweGZmNjEpO1xuICBmaWxsKHRhYmxlLCAyLCAweGZmZTAsIDB4ZmZlNyk7XG5cbiAgLy8gYXBwbHkgY29tYmluaW5nIGxhc3QgdG8gZW5zdXJlIHdlIG92ZXJ3cml0ZVxuICAvLyB3cm9uZ2x5IHdpZGUgc2V0IGNoYXJzOlxuICAvLyAgICB0aGUgb3JpZ2luYWwgYWxnbyBldmFscyBjb21iaW5pbmcgZmlyc3QgYW5kIGZhbGxzXG4gIC8vICAgIHRocm91Z2ggdG8gd2lkZSBjaGVjayBzbyB3ZSBzaW1wbHkgZG8gaGVyZSB0aGUgb3Bwb3NpdGVcbiAgLy8gY29tYmluaW5nIDBcbiAgZm9yIChsZXQgciA9IDA7IHIgPCBDT01CSU5JTkdfQk1QLmxlbmd0aDsgKytyKSB7XG4gICAgZmlsbCh0YWJsZSwgMCwgQ09NQklOSU5HX0JNUFtyXVswXSwgQ09NQklOSU5HX0JNUFtyXVsxXSArIDEpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChudW06IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKG51bSA8IDMyKSB7XG4gICAgICByZXR1cm4gY29udHJvbCB8IDA7XG4gICAgfVxuICAgIGlmIChudW0gPCAxMjcpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBpZiAobnVtIDwgNjU1MzYpIHtcbiAgICAgIHJldHVybiB0YWJsZVtudW1dO1xuICAgIH1cbiAgICAvLyBkbyBhIGZ1bGwgc2VhcmNoIGZvciBoaWdoIGNvZGVwb2ludHNcbiAgICByZXR1cm4gd2N3aWR0aEhpZ2gobnVtKTtcbiAgfTtcbn0pKHtudWw6IDAsIGNvbnRyb2w6IDB9KTsgIC8vIGNvbmZpZ3VyYWJsZSBvcHRpb25zXG5cbi8qKlxuICogR2V0IHRoZSB0ZXJtaW5hbCBjZWxsIHdpZHRoIGZvciBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmluZ0NlbGxXaWR0aChzOiBzdHJpbmcpOiBudW1iZXIge1xuICBsZXQgcmVzdWx0ID0gMDtcbiAgY29uc3QgbGVuZ3RoID0gcy5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBsZXQgY29kZSA9IHMuY2hhckNvZGVBdChpKTtcbiAgICAvLyBzdXJyb2dhdGUgcGFpciBmaXJzdFxuICAgIGlmICgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REJGRikge1xuICAgICAgaWYgKCsraSA+PSBsZW5ndGgpIHtcbiAgICAgICAgLy8gdGhpcyBzaG91bGQgbm90IGhhcHBlbiB3aXRoIHN0cmluZ3MgcmV0cmlldmVkIGZyb21cbiAgICAgICAgLy8gQnVmZmVyLnRyYW5zbGF0ZVRvU3RyaW5nIGFzIGl0IGNvbnZlcnRzIGZyb20gVVRGLTMyXG4gICAgICAgIC8vIGFuZCB0aGVyZWZvcmUgYWx3YXlzIHNob3VsZCBjb250YWluIHRoZSBzZWNvbmQgcGFydFxuICAgICAgICAvLyBmb3IgYW55IG90aGVyIHN0cmluZyB3ZSBzdGlsbCBoYXZlIHRvIGhhbmRsZSBpdCBzb21laG93OlxuICAgICAgICAvLyBzaW1wbHkgdHJlYXQgdGhlIGxvbmVseSBzdXJyb2dhdGUgZmlyc3QgYXMgYSBzaW5nbGUgY2hhciAoVUNTLTIgYmVoYXZpb3IpXG4gICAgICAgIHJldHVybiByZXN1bHQgKyB3Y3dpZHRoKGNvZGUpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc2Vjb25kID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgICAgLy8gY29udmVydCBzdXJyb2dhdGUgcGFpciB0byBoaWdoIGNvZGVwb2ludCBvbmx5IGZvciB2YWxpZCBzZWNvbmQgcGFydCAoVVRGLTE2KVxuICAgICAgLy8gb3RoZXJ3aXNlIHRyZWF0IHRoZW0gaW5kZXBlbmRlbnRseSAoVUNTLTIgYmVoYXZpb3IpXG4gICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgIGNvZGUgPSAoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gd2N3aWR0aChzZWNvbmQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXN1bHQgKz0gd2N3aWR0aChjb2RlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2lyY3VsYXJMaXN0IH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUluc2VydEV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgYW1vdW50OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURlbGV0ZUV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcbiAgYW1vdW50OiBudW1iZXI7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGNpcmN1bGFyIGxpc3Q7IGEgbGlzdCB3aXRoIGEgbWF4aW11bSBzaXplIHRoYXQgd3JhcHMgYXJvdW5kIHdoZW4gcHVzaCBpcyBjYWxsZWQsXG4gKiBvdmVycmlkaW5nIHZhbHVlcyBhdCB0aGUgc3RhcnQgb2YgdGhlIGxpc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaXJjdWxhckxpc3Q8VD4gaW1wbGVtZW50cyBJQ2lyY3VsYXJMaXN0PFQ+IHtcbiAgcHJvdGVjdGVkIF9hcnJheTogKFQgfCB1bmRlZmluZWQpW107XG4gIHByaXZhdGUgX3N0YXJ0SW5kZXg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfbGVuZ3RoOiBudW1iZXI7XG5cbiAgcHVibGljIG9uRGVsZXRlRW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8SURlbGV0ZUV2ZW50PigpO1xuICBwdWJsaWMgZ2V0IG9uRGVsZXRlKCk6IElFdmVudDxJRGVsZXRlRXZlbnQ+IHsgcmV0dXJuIHRoaXMub25EZWxldGVFbWl0dGVyLmV2ZW50OyB9XG4gIHB1YmxpYyBvbkluc2VydEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPElJbnNlcnRFdmVudD4oKTtcbiAgcHVibGljIGdldCBvbkluc2VydCgpOiBJRXZlbnQ8SUluc2VydEV2ZW50PiB7IHJldHVybiB0aGlzLm9uSW5zZXJ0RW1pdHRlci5ldmVudDsgfVxuICBwdWJsaWMgb25UcmltRW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xuICBwdWJsaWMgZ2V0IG9uVHJpbSgpOiBJRXZlbnQ8bnVtYmVyPiB7IHJldHVybiB0aGlzLm9uVHJpbUVtaXR0ZXIuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9tYXhMZW5ndGg6IG51bWJlclxuICApIHtcbiAgICB0aGlzLl9hcnJheSA9IG5ldyBBcnJheTxUPih0aGlzLl9tYXhMZW5ndGgpO1xuICAgIHRoaXMuX3N0YXJ0SW5kZXggPSAwO1xuICAgIHRoaXMuX2xlbmd0aCA9IDA7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG1heExlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgc2V0IG1heExlbmd0aChuZXdNYXhMZW5ndGg6IG51bWJlcikge1xuICAgIC8vIFRoZXJlIHdhcyBubyBjaGFuZ2UgaW4gbWF4TGVuZ3RoLCByZXR1cm4gZWFybHkuXG4gICAgaWYgKHRoaXMuX21heExlbmd0aCA9PT0gbmV3TWF4TGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVjb25zdHJ1Y3QgYXJyYXksIHN0YXJ0aW5nIGF0IGluZGV4IDAuIE9ubHkgdHJhbnNmZXIgdmFsdWVzIGZyb20gdGhlXG4gICAgLy8gaW5kZXhlcyAwIHRvIGxlbmd0aC5cbiAgICBjb25zdCBuZXdBcnJheSA9IG5ldyBBcnJheTxUIHwgdW5kZWZpbmVkPihuZXdNYXhMZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4obmV3TWF4TGVuZ3RoLCB0aGlzLmxlbmd0aCk7IGkrKykge1xuICAgICAgbmV3QXJyYXlbaV0gPSB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV07XG4gICAgfVxuICAgIHRoaXMuX2FycmF5ID0gbmV3QXJyYXk7XG4gICAgdGhpcy5fbWF4TGVuZ3RoID0gbmV3TWF4TGVuZ3RoO1xuICAgIHRoaXMuX3N0YXJ0SW5kZXggPSAwO1xuICB9XG5cbiAgcHVibGljIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIHNldCBsZW5ndGgobmV3TGVuZ3RoOiBudW1iZXIpIHtcbiAgICBpZiAobmV3TGVuZ3RoID4gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5fbGVuZ3RoOyBpIDwgbmV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fYXJyYXlbaV0gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2xlbmd0aCA9IG5ld0xlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB2YWx1ZSBhdCBhbiBpbmRleC5cbiAgICpcbiAgICogTm90ZSB0aGF0IGZvciBwZXJmb3JtYW5jZSByZWFzb25zIHRoZXJlIGlzIG5vIGJvdW5kcyBjaGVja2luZyBoZXJlLCB0aGUgaW5kZXggcmVmZXJlbmNlIGlzXG4gICAqIGNpcmN1bGFyIHNvIHRoaXMgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWx1ZSBhbmQgbmV2ZXIgdGhyb3cuXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAgICogQHJldHVybiBUaGUgdmFsdWUgY29ycmVzcG9uZGluZyB0byB0aGUgaW5kZXguXG4gICAqL1xuICBwdWJsaWMgZ2V0KGluZGV4OiBudW1iZXIpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaW5kZXgpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBhdCBhbiBpbmRleC5cbiAgICpcbiAgICogTm90ZSB0aGF0IGZvciBwZXJmb3JtYW5jZSByZWFzb25zIHRoZXJlIGlzIG5vIGJvdW5kcyBjaGVja2luZyBoZXJlLCB0aGUgaW5kZXggcmVmZXJlbmNlIGlzXG4gICAqIGNpcmN1bGFyIHNvIHRoaXMgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWx1ZSBhbmQgbmV2ZXIgdGhyb3cuXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdG8gc2V0LlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAgICovXG4gIHB1YmxpYyBzZXQoaW5kZXg6IG51bWJlciwgdmFsdWU6IFQgfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpbmRleCldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogUHVzaGVzIGEgbmV3IHZhbHVlIG9udG8gdGhlIGxpc3QsIHdyYXBwaW5nIGFyb3VuZCB0byB0aGUgc3RhcnQgb2YgdGhlIGFycmF5LCBvdmVycmlkaW5nIGluZGV4IDBcbiAgICogaWYgdGhlIG1heGltdW0gbGVuZ3RoIGlzIHJlYWNoZWQuXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHVzaCBvbnRvIHRoZSBsaXN0LlxuICAgKi9cbiAgcHVibGljIHB1c2godmFsdWU6IFQpOiB2b2lkIHtcbiAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgpXSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLl9sZW5ndGggPT09IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgdGhpcy5fc3RhcnRJbmRleCA9ICsrdGhpcy5fc3RhcnRJbmRleCAlIHRoaXMuX21heExlbmd0aDtcbiAgICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sZW5ndGgrKztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSByaW5nYnVmZmVyIGluZGV4IGFuZCByZXR1cm4gY3VycmVudCBlbGVtZW50IGZvciByZWN5Y2xpbmcuXG4gICAqIE5vdGU6IFRoZSBidWZmZXIgbXVzdCBiZSBmdWxsIGZvciB0aGlzIG1ldGhvZCB0byB3b3JrLlxuICAgKiBAdGhyb3dzIFdoZW4gdGhlIGJ1ZmZlciBpcyBub3QgZnVsbC5cbiAgICovXG4gIHB1YmxpYyByZWN5Y2xlKCk6IFQge1xuICAgIGlmICh0aGlzLl9sZW5ndGggIT09IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSByZWN5Y2xlIHdoZW4gdGhlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgfVxuICAgIHRoaXMuX3N0YXJ0SW5kZXggPSArK3RoaXMuX3N0YXJ0SW5kZXggJSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSk7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aCAtIDEpXSE7XG4gIH1cblxuICAvKipcbiAgICogUmluZ2J1ZmZlciBpcyBhdCBtYXggbGVuZ3RoLlxuICAgKi9cbiAgcHVibGljIGdldCBpc0Z1bGwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aCA9PT0gdGhpcy5fbWF4TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW5kIHJldHVybnMgdGhlIGxhc3QgdmFsdWUgb24gdGhlIGxpc3QuXG4gICAqIEByZXR1cm4gVGhlIHBvcHBlZCB2YWx1ZS5cbiAgICovXG4gIHB1YmxpYyBwb3AoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aC0tIC0gMSldO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYW5kL29yIGluc2VydHMgaXRlbXMgYXQgYSBwYXJ0aWN1bGFyIGluZGV4IChpbiB0aGF0IG9yZGVyKS4gVW5saWtlXG4gICAqIEFycmF5LnByb3RvdHlwZS5zcGxpY2UsIHRoaXMgb3BlcmF0aW9uIGRvZXMgbm90IHJldHVybiB0aGUgZGVsZXRlZCBpdGVtcyBhcyBhIG5ldyBhcnJheSBpblxuICAgKiBvcmRlciB0byBzYXZlIGNyZWF0aW5nIGEgbmV3IGFycmF5LiBOb3RlIHRoYXQgdGhpcyBvcGVyYXRpb24gbWF5IHNoaWZ0IGFsbCB2YWx1ZXMgaW4gdGhlIGxpc3RcbiAgICogaW4gdGhlIHdvcnN0IGNhc2UuXG4gICAqIEBwYXJhbSBzdGFydCBUaGUgaW5kZXggdG8gZGVsZXRlIGFuZC9vciBpbnNlcnQuXG4gICAqIEBwYXJhbSBkZWxldGVDb3VudCBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIGRlbGV0ZS5cbiAgICogQHBhcmFtIGl0ZW1zIFRoZSBpdGVtcyB0byBpbnNlcnQuXG4gICAqL1xuICBwdWJsaWMgc3BsaWNlKHN0YXJ0OiBudW1iZXIsIGRlbGV0ZUNvdW50OiBudW1iZXIsIC4uLml0ZW1zOiBUW10pOiB2b2lkIHtcbiAgICAvLyBEZWxldGUgaXRlbXNcbiAgICBpZiAoZGVsZXRlQ291bnQpIHtcbiAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IHRoaXMuX2xlbmd0aCAtIGRlbGV0ZUNvdW50OyBpKyspIHtcbiAgICAgICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSldID0gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSArIGRlbGV0ZUNvdW50KV07XG4gICAgICB9XG4gICAgICB0aGlzLl9sZW5ndGggLT0gZGVsZXRlQ291bnQ7XG4gICAgfVxuXG4gICAgLy8gQWRkIGl0ZW1zXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX2xlbmd0aCAtIDE7IGkgPj0gc3RhcnQ7IGktLSkge1xuICAgICAgdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSArIGl0ZW1zLmxlbmd0aCldID0gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaSldO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChzdGFydCArIGkpXSA9IGl0ZW1zW2ldO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBsZW5ndGggYXMgbmVlZGVkXG4gICAgaWYgKHRoaXMuX2xlbmd0aCArIGl0ZW1zLmxlbmd0aCA+IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgY29uc3QgY291bnRUb1RyaW0gPSAodGhpcy5fbGVuZ3RoICsgaXRlbXMubGVuZ3RoKSAtIHRoaXMuX21heExlbmd0aDtcbiAgICAgIHRoaXMuX3N0YXJ0SW5kZXggKz0gY291bnRUb1RyaW07XG4gICAgICB0aGlzLl9sZW5ndGggPSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZShjb3VudFRvVHJpbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xlbmd0aCArPSBpdGVtcy5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaW1zIGEgbnVtYmVyIG9mIGl0ZW1zIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBsaXN0LlxuICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiBpdGVtcyB0byByZW1vdmUuXG4gICAqL1xuICBwdWJsaWMgdHJpbVN0YXJ0KGNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoY291bnQgPiB0aGlzLl9sZW5ndGgpIHtcbiAgICAgIGNvdW50ID0gdGhpcy5fbGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLl9zdGFydEluZGV4ICs9IGNvdW50O1xuICAgIHRoaXMuX2xlbmd0aCAtPSBjb3VudDtcbiAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZShjb3VudCk7XG4gIH1cblxuICBwdWJsaWMgc2hpZnRFbGVtZW50cyhzdGFydDogbnVtYmVyLCBjb3VudDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChjb3VudCA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0IGFyZ3VtZW50IG91dCBvZiByYW5nZScpO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgKyBvZmZzZXQgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzaGlmdCBlbGVtZW50cyBpbiBsaXN0IGJleW9uZCBpbmRleCAwJyk7XG4gICAgfVxuXG4gICAgaWYgKG9mZnNldCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSBjb3VudCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHRoaXMuc2V0KHN0YXJ0ICsgaSArIG9mZnNldCwgdGhpcy5nZXQoc3RhcnQgKyBpKSk7XG4gICAgICB9XG4gICAgICBjb25zdCBleHBhbmRMaXN0QnkgPSAoc3RhcnQgKyBjb3VudCArIG9mZnNldCkgLSB0aGlzLl9sZW5ndGg7XG4gICAgICBpZiAoZXhwYW5kTGlzdEJ5ID4gMCkge1xuICAgICAgICB0aGlzLl9sZW5ndGggKz0gZXhwYW5kTGlzdEJ5O1xuICAgICAgICB3aGlsZSAodGhpcy5fbGVuZ3RoID4gdGhpcy5fbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5fbGVuZ3RoLS07XG4gICAgICAgICAgdGhpcy5fc3RhcnRJbmRleCsrO1xuICAgICAgICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICB0aGlzLnNldChzdGFydCArIGkgKyBvZmZzZXQsIHRoaXMuZ2V0KHN0YXJ0ICsgaSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjeWNsaWMgaW5kZXggZm9yIHRoZSBzcGVjaWZpZWQgcmVndWxhciBpbmRleC4gVGhlIGN5Y2xpYyBpbmRleCBjYW4gdGhlbiBiZSB1c2VkIG9uIHRoZVxuICAgKiBiYWNraW5nIGFycmF5IHRvIGdldCB0aGUgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlZ3VsYXIgaW5kZXguXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgcmVndWxhciBpbmRleC5cbiAgICogQHJldHVybnMgVGhlIGN5Y2xpYyBpbmRleC5cbiAgICovXG4gIHByaXZhdGUgX2dldEN5Y2xpY0luZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy5fc3RhcnRJbmRleCArIGluZGV4KSAlIHRoaXMuX21heExlbmd0aDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG4vKlxuICogQSBzaW1wbGUgdXRpbGl0eSBmb3IgY2xvbmluZyB2YWx1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lPFQ+KHZhbDogVCwgZGVwdGg6IG51bWJlciA9IDUpOiBUIHtcbiAgaWYgKHR5cGVvZiB2YWwgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8vIElmIHdlJ3JlIGNsb25pbmcgYW4gYXJyYXksIHVzZSBhbiBhcnJheSBhcyB0aGUgYmFzZSwgb3RoZXJ3aXNlIHVzZSBhbiBvYmplY3RcbiAgY29uc3QgY2xvbmVkT2JqZWN0OiBhbnkgPSBBcnJheS5pc0FycmF5KHZhbCkgPyBbXSA6IHt9O1xuXG4gIGZvciAoY29uc3Qga2V5IGluIHZhbCkge1xuICAgIC8vIFJlY3Vyc2l2ZWx5IGNsb25lIGVhY2sgaXRlbSB1bmxlc3Mgd2UncmUgYXQgdGhlIG1heGltdW0gZGVwdGhcbiAgICBjbG9uZWRPYmplY3Rba2V5XSA9IGRlcHRoIDw9IDEgPyB2YWxba2V5XSA6ICh2YWxba2V5XSA/IGNsb25lKHZhbFtrZXldLCBkZXB0aCAtIDEpIDogdmFsW2tleV0pO1xuICB9XG5cbiAgcmV0dXJuIGNsb25lZE9iamVjdCBhcyBUO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmludGVyZmFjZSBJTGlzdGVuZXI8VD4ge1xuICAoZTogVCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50PFQ+IHtcbiAgKGxpc3RlbmVyOiAoZTogVCkgPT4gYW55KTogSURpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50RW1pdHRlcjxUPiB7XG4gIGV2ZW50OiBJRXZlbnQ8VD47XG4gIGZpcmUoZGF0YTogVCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXI8VD4gaW1wbGVtZW50cyBJRXZlbnRFbWl0dGVyPFQ+IHtcbiAgcHJpdmF0ZSBfbGlzdGVuZXJzOiBJTGlzdGVuZXI8VD5bXSA9IFtdO1xuICBwcml2YXRlIF9ldmVudD86IElFdmVudDxUPjtcblxuICBwdWJsaWMgZ2V0IGV2ZW50KCk6IElFdmVudDxUPiB7XG4gICAgaWYgKCF0aGlzLl9ldmVudCkge1xuICAgICAgdGhpcy5fZXZlbnQgPSAobGlzdGVuZXI6IChlOiBUKSA9PiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICBjb25zdCBkaXNwb3NhYmxlID0ge1xuICAgICAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnNbaV0gPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2V2ZW50O1xuICB9XG5cbiAgcHVibGljIGZpcmUoZGF0YTogVCk6IHZvaWQge1xuICAgIGNvbnN0IHF1ZXVlOiBJTGlzdGVuZXI8VD5bXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWV1ZS5wdXNoKHRoaXMuX2xpc3RlbmVyc1tpXSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHF1ZXVlW2ldLmNhbGwodW5kZWZpbmVkLCBkYXRhKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyB0aGF0IGNhbiBiZSBleHRlbmRlZCB0byBwcm92aWRlIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yIG1hbmFnaW5nIHRoZSBsaWZlY3ljbGUgb2YgYW5cbiAqIG9iamVjdCBhbmQgaXRzIGNvbXBvbmVudHMuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuICBwcm90ZWN0ZWQgX2Rpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG4gIHByb3RlY3RlZCBfaXNEaXNwb3NlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3Bvc2VzIHRoZSBvYmplY3QsIHRyaWdnZXJpbmcgdGhlIGBkaXNwb3NlYCBtZXRob2Qgb24gYWxsIHJlZ2lzdGVyZWQgSURpc3Bvc2FibGVzLlxuICAgKi9cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5faXNEaXNwb3NlZCA9IHRydWU7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMuZm9yRWFjaChkID0+IGQuZGlzcG9zZSgpKTtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGRpc3Bvc2FibGUgb2JqZWN0LlxuICAgKiBAcGFyYW0gZCBUaGUgZGlzcG9zYWJsZSB0byByZWdpc3Rlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlcjxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KGQ6IFQpOiB2b2lkIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJzIGEgZGlzcG9zYWJsZSBvYmplY3QgaWYgaXQgaGFzIGJlZW4gcmVnaXN0ZXJlZCwgaWYgbm90IGRvXG4gICAqIG5vdGhpbmcuXG4gICAqIEBwYXJhbSBkIFRoZSBkaXNwb3NhYmxlIHRvIHVucmVnaXN0ZXIuXG4gICAqL1xuICBwdWJsaWMgdW5yZWdpc3RlcjxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KGQ6IFQpOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2Rpc3Bvc2FibGVzLmluZGV4T2YoZCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgdGhpcy5fZGlzcG9zYWJsZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW50ZXJmYWNlIElOYXZpZ2F0b3Ige1xuICB1c2VyQWdlbnQ6IHN0cmluZztcbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgcGxhdGZvcm06IHN0cmluZztcbn1cblxuLy8gV2UncmUgZGVjbGFyaW5nIGEgbmF2aWdhdG9yIGdsb2JhbCBoZXJlIGFzIHdlIGV4cGVjdCBpdCBpbiBhbGwgcnVudGltZXMgKG5vZGUgYW5kIGJyb3dzZXIpLCBidXRcbi8vIHdlIHdhbnQgdGhpcyBtb2R1bGUgdG8gbGl2ZSBpbiBjb21tb24uXG5kZWNsYXJlIGNvbnN0IG5hdmlnYXRvcjogSU5hdmlnYXRvcjtcblxuY29uc3QgaXNOb2RlID0gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSA/IHRydWUgOiBmYWxzZTtcbmNvbnN0IHVzZXJBZ2VudCA9IChpc05vZGUpID8gJ25vZGUnIDogbmF2aWdhdG9yLnVzZXJBZ2VudDtcbmNvbnN0IHBsYXRmb3JtID0gKGlzTm9kZSkgPyAnbm9kZScgOiBuYXZpZ2F0b3IucGxhdGZvcm07XG5cbmV4cG9ydCBjb25zdCBpc0ZpcmVmb3ggPSAhIX51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpO1xuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdCh1c2VyQWdlbnQpO1xuXG4vLyBGaW5kIHRoZSB1c2VycyBwbGF0Zm9ybS4gV2UgdXNlIHRoaXMgdG8gaW50ZXJwcmV0IHRoZSBtZXRhIGtleVxuLy8gYW5kIElTTyB0aGlyZCBsZXZlbCBzaGlmdHMuXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xOTg3NzkyNC81Nzc1OThcbmV4cG9ydCBjb25zdCBpc01hYyA9IGNvbnRhaW5zKFsnTWFjaW50b3NoJywgJ01hY0ludGVsJywgJ01hY1BQQycsICdNYWM2OEsnXSwgcGxhdGZvcm0pO1xuZXhwb3J0IGNvbnN0IGlzSXBhZCA9IHBsYXRmb3JtID09PSAnaVBhZCc7XG5leHBvcnQgY29uc3QgaXNJcGhvbmUgPSBwbGF0Zm9ybSA9PT0gJ2lQaG9uZSc7XG5leHBvcnQgY29uc3QgaXNXaW5kb3dzID0gY29udGFpbnMoWydXaW5kb3dzJywgJ1dpbjE2JywgJ1dpbjMyJywgJ1dpbkNFJ10sIHBsYXRmb3JtKTtcbmV4cG9ydCBjb25zdCBpc0xpbnV4ID0gcGxhdGZvcm0uaW5kZXhPZignTGludXgnKSA+PSAwO1xuXG4vKipcbiAqIFJldHVybiBpZiB0aGUgZ2l2ZW4gYXJyYXkgY29udGFpbnMgdGhlIGdpdmVuIGVsZW1lbnRcbiAqIEBwYXJhbSBhcnIgVGhlIGFycmF5IHRvIHNlYXJjaCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQuXG4gKiBAcGFyYW0gZWwgVGhlIGVsZW1lbnQgdG8gbG9vayBmb3IgaW50byB0aGUgYXJyYXlcbiAqL1xuZnVuY3Rpb24gY29udGFpbnMoYXJyOiBhbnlbXSwgZWw6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gYXJyLmluZGV4T2YoZWwpID49IDA7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCB0eXBlIFR5cGVkQXJyYXkgPSBVaW50OEFycmF5IHwgVWludDE2QXJyYXkgfCBVaW50MzJBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5XG4gIHwgSW50OEFycmF5IHwgSW50MTZBcnJheSB8IEludDMyQXJyYXlcbiAgfCBGbG9hdDMyQXJyYXkgfCBGbG9hdDY0QXJyYXk7XG5cblxuLyoqXG4gKiBwb2x5ZmlsbCBmb3IgVHlwZWRBcnJheS5maWxsXG4gKiBUaGlzIGlzIG5lZWRlZCB0byBzdXBwb3J0IC5maWxsIGluIGFsbCBzYWZhcmkgdmVyc2lvbnMgYW5kIElFIDExLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsbDxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYXJyYXk6IFQsIHZhbHVlOiBudW1iZXIsIHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBUIHtcbiAgLy8gYWxsIG1vZGVybiBlbmdpbmVzIHRoYXQgc3VwcG9ydCAuZmlsbFxuICBpZiAoYXJyYXkuZmlsbCkge1xuICAgIHJldHVybiBhcnJheS5maWxsKHZhbHVlLCBzdGFydCwgZW5kKSBhcyBUO1xuICB9XG4gIHJldHVybiBmaWxsRmFsbGJhY2soYXJyYXksIHZhbHVlLCBzdGFydCwgZW5kKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGxGYWxsYmFjazxUIGV4dGVuZHMgVHlwZWRBcnJheT4oYXJyYXk6IFQsIHZhbHVlOiBudW1iZXIsIHN0YXJ0OiBudW1iZXIgPSAwLCBlbmQ6IG51bWJlciA9IGFycmF5Lmxlbmd0aCk6IFQge1xuICAvLyBzYWZhcmkgYW5kIElFIDExXG4gIC8vIHNpbmNlIElFIDExIGRvZXMgbm90IHN1cHBvcnQgQXJyYXkucHJvdG90eXBlLmZpbGwgZWl0aGVyXG4gIC8vIHdlIGNhbm5vdCB1c2UgdGhlIHN1Z2dlc3RlZCBwb2x5ZmlsbCBmcm9tIE1ETlxuICAvLyBpbnN0ZWFkIHdlIHNpbXBseSBmYWxsIGJhY2sgdG8gbG9vcGluZ1xuICBpZiAoc3RhcnQgPj0gYXJyYXkubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG4gIHN0YXJ0ID0gKGFycmF5Lmxlbmd0aCArIHN0YXJ0KSAlIGFycmF5Lmxlbmd0aDtcbiAgaWYgKGVuZCA+PSBhcnJheS5sZW5ndGgpIHtcbiAgICBlbmQgPSBhcnJheS5sZW5ndGg7XG4gIH0gZWxzZSB7XG4gICAgZW5kID0gKGFycmF5Lmxlbmd0aCArIGVuZCkgJSBhcnJheS5sZW5ndGg7XG4gIH1cbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBhcnJheVtpXSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBDb25jYXQgdHdvIHR5cGVkIGFycmF5cyBgYWAgYW5kIGBiYC5cbiAqIFJldHVybnMgYSBuZXcgdHlwZWQgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQ8VCBleHRlbmRzIFR5cGVkQXJyYXk+KGE6IFQsIGI6IFQpOiBUIHtcbiAgY29uc3QgcmVzdWx0ID0gbmV3IChhLmNvbnN0cnVjdG9yIGFzIGFueSkoYS5sZW5ndGggKyBiLmxlbmd0aCk7XG4gIHJlc3VsdC5zZXQoYSk7XG4gIHJlc3VsdC5zZXQoYiwgYS5sZW5ndGgpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQXR0cmlidXRlRGF0YSwgSUNvbG9yUkdCIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEF0dHJpYnV0ZXMsIEZnRmxhZ3MsIEJnRmxhZ3MgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVEYXRhIGltcGxlbWVudHMgSUF0dHJpYnV0ZURhdGEge1xuICBzdGF0aWMgdG9Db2xvclJHQih2YWx1ZTogbnVtYmVyKTogSUNvbG9yUkdCIHtcbiAgICByZXR1cm4gW1xuICAgICAgdmFsdWUgPj4+IEF0dHJpYnV0ZXMuUkVEX1NISUZUICYgMjU1LFxuICAgICAgdmFsdWUgPj4+IEF0dHJpYnV0ZXMuR1JFRU5fU0hJRlQgJiAyNTUsXG4gICAgICB2YWx1ZSAmIDI1NVxuICAgIF07XG4gIH1cbiAgc3RhdGljIGZyb21Db2xvclJHQih2YWx1ZTogSUNvbG9yUkdCKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHZhbHVlWzBdICYgMjU1KSA8PCBBdHRyaWJ1dGVzLlJFRF9TSElGVCB8ICh2YWx1ZVsxXSAmIDI1NSkgPDwgQXR0cmlidXRlcy5HUkVFTl9TSElGVCB8IHZhbHVlWzJdICYgMjU1O1xuICB9XG5cbiAgcHVibGljIGNsb25lKCk6IElBdHRyaWJ1dGVEYXRhIHtcbiAgICBjb25zdCBuZXdPYmogPSBuZXcgQXR0cmlidXRlRGF0YSgpO1xuICAgIG5ld09iai5mZyA9IHRoaXMuZmc7XG4gICAgbmV3T2JqLmJnID0gdGhpcy5iZztcbiAgICByZXR1cm4gbmV3T2JqO1xuICB9XG5cbiAgLy8gZGF0YVxuICBwdWJsaWMgZmc6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBiZzogbnVtYmVyID0gMDtcblxuICAvLyBmbGFnc1xuICBwdWJsaWMgaXNJbnZlcnNlKCk6IG51bWJlciAgIHsgcmV0dXJuIHRoaXMuZmcgJiBGZ0ZsYWdzLklOVkVSU0U7IH1cbiAgcHVibGljIGlzQm9sZCgpOiBudW1iZXIgICAgICB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5CT0xEOyB9XG4gIHB1YmxpYyBpc1VuZGVybGluZSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuVU5ERVJMSU5FOyB9XG4gIHB1YmxpYyBpc0JsaW5rKCk6IG51bWJlciAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuQkxJTks7IH1cbiAgcHVibGljIGlzSW52aXNpYmxlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5JTlZJU0lCTEU7IH1cbiAgcHVibGljIGlzSXRhbGljKCk6IG51bWJlciAgICB7IHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5JVEFMSUM7IH1cbiAgcHVibGljIGlzRGltKCk6IG51bWJlciAgICAgICB7IHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5ESU07IH1cblxuICAvLyBjb2xvciBtb2Rlc1xuICBwdWJsaWMgZ2V0RmdDb2xvck1vZGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0s7IH1cbiAgcHVibGljIGdldEJnQ29sb3JNb2RlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLOyB9XG4gIHB1YmxpYyBpc0ZnUkdCKCk6IGJvb2xlYW4gICAgICAgeyByZXR1cm4gKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1JHQjsgfVxuICBwdWJsaWMgaXNCZ1JHQigpOiBib29sZWFuICAgICAgIHsgcmV0dXJuICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9SR0I7IH1cbiAgcHVibGljIGlzRmdQYWxldHRlKCk6IGJvb2xlYW4gICB7IHJldHVybiAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDE2IHx8ICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMjU2OyB9XG4gIHB1YmxpYyBpc0JnUGFsZXR0ZSgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AxNiB8fCAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDI1NjsgfVxuICBwdWJsaWMgaXNGZ0RlZmF1bHQoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMDsgfVxuICBwdWJsaWMgaXNCZ0RlZmF1bHQoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMDsgfVxuXG4gIC8vIGNvbG9yc1xuICBwdWJsaWMgZ2V0RmdDb2xvcigpOiBudW1iZXIge1xuICAgIHN3aXRjaCAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykge1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OiAgcmV0dXJuIHRoaXMuZmcgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLO1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjogICByZXR1cm4gdGhpcy5mZyAmIEF0dHJpYnV0ZXMuUkdCX01BU0s7XG4gICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsgIC8vIENNX0RFRkFVTFQgZGVmYXVsdHMgdG8gLTFcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldEJnQ29sb3IoKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spIHtcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDI1NjogIHJldHVybiB0aGlzLmJnICYgQXR0cmlidXRlcy5QQ09MT1JfTUFTSztcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6ICAgcmV0dXJuIHRoaXMuYmcgJiBBdHRyaWJ1dGVzLlJHQl9NQVNLO1xuICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICByZXR1cm4gLTE7ICAvLyBDTV9ERUZBVUxUIGRlZmF1bHRzIHRvIC0xXG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENpcmN1bGFyTGlzdCwgSUluc2VydEV2ZW50IH0gZnJvbSAnY29tbW9uL0NpcmN1bGFyTGlzdCc7XG5pbXBvcnQgeyBJQnVmZmVyLCBCdWZmZXJJbmRleCwgSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yLCBJQnVmZmVyU3RyaW5nSXRlcmF0b3JSZXN1bHQgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJQ2VsbERhdGEsIElBdHRyaWJ1dGVEYXRhLCBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBCdWZmZXJMaW5lLCBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgTlVMTF9DRUxMX0NIQVIsIE5VTExfQ0VMTF9XSURUSCwgTlVMTF9DRUxMX0NPREUsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBXSElURVNQQUNFX0NFTExfV0lEVEgsIFdISVRFU1BBQ0VfQ0VMTF9DT0RFLCBDSEFSX0RBVEFfV0lEVEhfSU5ERVgsIENIQVJfREFUQV9DSEFSX0lOREVYIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgcmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQsIHJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dCwgcmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZSwgcmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzLCBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGggfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlclJlZmxvdyc7XG5pbXBvcnQgeyBNYXJrZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL01hcmtlcic7XG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UsIElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IERFRkFVTFRfQ0hBUlNFVCB9IGZyb20gJ2NvbW1vbi9kYXRhL0NoYXJzZXRzJztcblxuZXhwb3J0IGNvbnN0IE1BWF9CVUZGRVJfU0laRSA9IDQyOTQ5NjcyOTU7IC8vIDJeMzIgLSAxXG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIGEgdGVybWluYWwgYnVmZmVyIChhbiBpbnRlcm5hbCBzdGF0ZSBvZiB0aGUgdGVybWluYWwpLCB3aGVyZSB0aGVcbiAqIGZvbGxvd2luZyBpbmZvcm1hdGlvbiBpcyBzdG9yZWQgKGluIGhpZ2gtbGV2ZWwpOlxuICogICAtIHRleHQgY29udGVudCBvZiB0aGlzIHBhcnRpY3VsYXIgYnVmZmVyXG4gKiAgIC0gY3Vyc29yIHBvc2l0aW9uXG4gKiAgIC0gc2Nyb2xsIHBvc2l0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXIgaW1wbGVtZW50cyBJQnVmZmVyIHtcbiAgcHVibGljIGxpbmVzOiBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+O1xuICBwdWJsaWMgeWRpc3A6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB5YmFzZTogbnVtYmVyID0gMDtcbiAgcHVibGljIHk6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB4OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc2Nyb2xsQm90dG9tOiBudW1iZXI7XG4gIHB1YmxpYyBzY3JvbGxUb3A6IG51bWJlcjtcbiAgLy8gVE9ETzogVHlwZSBtZVxuICBwdWJsaWMgdGFiczogYW55O1xuICBwdWJsaWMgc2F2ZWRZOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc2F2ZWRYOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc2F2ZWRDdXJBdHRyRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gIHB1YmxpYyBzYXZlZENoYXJzZXQ6IElDaGFyc2V0IHwgbnVsbCA9IERFRkFVTFRfQ0hBUlNFVDtcbiAgcHVibGljIG1hcmtlcnM6IE1hcmtlcltdID0gW107XG4gIHByaXZhdGUgX251bGxDZWxsOiBJQ2VsbERhdGEgPSBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIE5VTExfQ0VMTF9DSEFSLCBOVUxMX0NFTExfV0lEVEgsIE5VTExfQ0VMTF9DT0RFXSk7XG4gIHByaXZhdGUgX3doaXRlc3BhY2VDZWxsOiBJQ2VsbERhdGEgPSBDZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBXSElURVNQQUNFX0NFTExfV0lEVEgsIFdISVRFU1BBQ0VfQ0VMTF9DT0RFXSk7XG4gIHByaXZhdGUgX2NvbHM6IG51bWJlcjtcbiAgcHJpdmF0ZSBfcm93czogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2hhc1Njcm9sbGJhY2s6IGJvb2xlYW4sXG4gICAgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9jb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIHRoaXMuX3Jvd3MgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgdGhpcy5saW5lcyA9IG5ldyBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+KHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodGhpcy5fcm93cykpO1xuICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICB0aGlzLnNjcm9sbEJvdHRvbSA9IHRoaXMuX3Jvd3MgLSAxO1xuICAgIHRoaXMuc2V0dXBUYWJTdG9wcygpO1xuICB9XG5cbiAgcHVibGljIGdldE51bGxDZWxsKGF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgaWYgKGF0dHIpIHtcbiAgICAgIHRoaXMuX251bGxDZWxsLmZnID0gYXR0ci5mZztcbiAgICAgIHRoaXMuX251bGxDZWxsLmJnID0gYXR0ci5iZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbnVsbENlbGwuZmcgPSAwO1xuICAgICAgdGhpcy5fbnVsbENlbGwuYmcgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbnVsbENlbGw7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2hpdGVzcGFjZUNlbGwoYXR0cj86IElBdHRyaWJ1dGVEYXRhKTogSUNlbGxEYXRhIHtcbiAgICBpZiAoYXR0cikge1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuZmcgPSBhdHRyLmZnO1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmcgPSBhdHRyLmJnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5mZyA9IDA7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZyA9IDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl93aGl0ZXNwYWNlQ2VsbDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCbGFua0xpbmUoYXR0cjogSUF0dHJpYnV0ZURhdGEsIGlzV3JhcHBlZD86IGJvb2xlYW4pOiBJQnVmZmVyTGluZSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXJMaW5lKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5nZXROdWxsQ2VsbChhdHRyKSwgaXNXcmFwcGVkKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaGFzU2Nyb2xsYmFjaygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiB0aGlzLmxpbmVzLm1heExlbmd0aCA+IHRoaXMuX3Jvd3M7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQ3Vyc29ySW5WaWV3cG9ydCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBhYnNvbHV0ZVkgPSB0aGlzLnliYXNlICsgdGhpcy55O1xuICAgIGNvbnN0IHJlbGF0aXZlWSA9IGFic29sdXRlWSAtIHRoaXMueWRpc3A7XG4gICAgcmV0dXJuIChyZWxhdGl2ZVkgPj0gMCAmJiByZWxhdGl2ZVkgPCB0aGlzLl9yb3dzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb3JyZWN0IGJ1ZmZlciBsZW5ndGggYmFzZWQgb24gdGhlIHJvd3MgcHJvdmlkZWQsIHRoZSB0ZXJtaW5hbCdzXG4gICAqIHNjcm9sbGJhY2sgYW5kIHdoZXRoZXIgdGhpcyBidWZmZXIgaXMgZmxhZ2dlZCB0byBoYXZlIHNjcm9sbGJhY2sgb3Igbm90LlxuICAgKiBAcGFyYW0gcm93cyBUaGUgdGVybWluYWwgcm93cyB0byB1c2UgaW4gdGhlIGNhbGN1bGF0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aChyb3dzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5faGFzU2Nyb2xsYmFjaykge1xuICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgY29uc3QgY29ycmVjdEJ1ZmZlckxlbmd0aCA9IHJvd3MgKyB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnNjcm9sbGJhY2s7XG5cbiAgICByZXR1cm4gY29ycmVjdEJ1ZmZlckxlbmd0aCA+IE1BWF9CVUZGRVJfU0laRSA/IE1BWF9CVUZGRVJfU0laRSA6IGNvcnJlY3RCdWZmZXJMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogRmlsbHMgdGhlIGJ1ZmZlcidzIHZpZXdwb3J0IHdpdGggYmxhbmsgbGluZXMuXG4gICAqL1xuICBwdWJsaWMgZmlsbFZpZXdwb3J0Um93cyhmaWxsQXR0cj86IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoZmlsbEF0dHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmaWxsQXR0ciA9IERFRkFVTFRfQVRUUl9EQVRBO1xuICAgICAgfVxuICAgICAgbGV0IGkgPSB0aGlzLl9yb3dzO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB0aGlzLmxpbmVzLnB1c2godGhpcy5nZXRCbGFua0xpbmUoZmlsbEF0dHIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBidWZmZXIgdG8gaXQncyBpbml0aWFsIHN0YXRlLCBkaXNjYXJkaW5nIGFsbCBwcmV2aW91cyBkYXRhLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMueWRpc3AgPSAwO1xuICAgIHRoaXMueWJhc2UgPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgdGhpcy54ID0gMDtcbiAgICB0aGlzLmxpbmVzID0gbmV3IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4odGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSk7XG4gICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgIHRoaXMuc2Nyb2xsQm90dG9tID0gdGhpcy5fcm93cyAtIDE7XG4gICAgdGhpcy5zZXR1cFRhYlN0b3BzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgYnVmZmVyLCBhZGp1c3RpbmcgaXRzIGRhdGEgYWNjb3JkaW5nbHkuXG4gICAqIEBwYXJhbSBuZXdDb2xzIFRoZSBuZXcgbnVtYmVyIG9mIGNvbHVtbnMuXG4gICAqIEBwYXJhbSBuZXdSb3dzIFRoZSBuZXcgbnVtYmVyIG9mIHJvd3MuXG4gICAqL1xuICBwdWJsaWMgcmVzaXplKG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gc3RvcmUgcmVmZXJlbmNlIHRvIG51bGwgY2VsbCB3aXRoIGRlZmF1bHQgYXR0cnNcbiAgICBjb25zdCBudWxsQ2VsbCA9IHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpO1xuXG4gICAgLy8gSW5jcmVhc2UgbWF4IGxlbmd0aCBpZiBuZWVkZWQgYmVmb3JlIGFkanVzdG1lbnRzIHRvIGFsbG93IHNwYWNlIHRvIGZpbGxcbiAgICAvLyBhcyByZXF1aXJlZC5cbiAgICBjb25zdCBuZXdNYXhMZW5ndGggPSB0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKG5ld1Jvd3MpO1xuICAgIGlmIChuZXdNYXhMZW5ndGggPiB0aGlzLmxpbmVzLm1heExlbmd0aCkge1xuICAgICAgdGhpcy5saW5lcy5tYXhMZW5ndGggPSBuZXdNYXhMZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gVGhlIGZvbGxvd2luZyBhZGp1c3RtZW50cyBzaG91bGQgb25seSBoYXBwZW4gaWYgdGhlIGJ1ZmZlciBoYXMgYmVlblxuICAgIC8vIGluaXRpYWxpemVkL2ZpbGxlZC5cbiAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBEZWFsIHdpdGggY29sdW1ucyBpbmNyZWFzaW5nIChyZWR1Y2luZyBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgcmVmbG93KVxuICAgICAgaWYgKHRoaXMuX2NvbHMgPCBuZXdDb2xzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMubGluZXMuZ2V0KGkpIS5yZXNpemUobmV3Q29scywgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc2l6ZSByb3dzIGluIGJvdGggZGlyZWN0aW9ucyBhcyBuZWVkZWRcbiAgICAgIGxldCBhZGRUb1kgPSAwO1xuICAgICAgaWYgKHRoaXMuX3Jvd3MgPCBuZXdSb3dzKSB7XG4gICAgICAgIGZvciAobGV0IHkgPSB0aGlzLl9yb3dzOyB5IDwgbmV3Um93czsgeSsrKSB7XG4gICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoIDwgbmV3Um93cyArIHRoaXMueWJhc2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnliYXNlID4gMCAmJiB0aGlzLmxpbmVzLmxlbmd0aCA8PSB0aGlzLnliYXNlICsgdGhpcy55ICsgYWRkVG9ZICsgMSkge1xuICAgICAgICAgICAgICAvLyBUaGVyZSBpcyByb29tIGFib3ZlIHRoZSBidWZmZXIgYW5kIHRoZXJlIGFyZSBubyBlbXB0eSBlbGVtZW50cyBiZWxvdyB0aGUgbGluZSxcbiAgICAgICAgICAgICAgLy8gc2Nyb2xsIHVwXG4gICAgICAgICAgICAgIHRoaXMueWJhc2UtLTtcbiAgICAgICAgICAgICAgYWRkVG9ZKys7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnlkaXNwID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIFZpZXdwb3J0IGlzIGF0IHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciwgbXVzdCBpbmNyZWFzZSBkb3dud2FyZHNcbiAgICAgICAgICAgICAgICB0aGlzLnlkaXNwLS07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIEFkZCBhIGJsYW5rIGxpbmUgaWYgdGhlcmUgaXMgbm8gYnVmZmVyIGxlZnQgYXQgdGhlIHRvcCB0byBzY3JvbGwgdG8sIG9yIGlmIHRoZXJlXG4gICAgICAgICAgICAgIC8vIGFyZSBibGFuayBsaW5lcyBhZnRlciB0aGUgY3Vyc29yXG4gICAgICAgICAgICAgIHRoaXMubGluZXMucHVzaChuZXcgQnVmZmVyTGluZShuZXdDb2xzLCBudWxsQ2VsbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gKHRoaXMuX3Jvd3MgPj0gbmV3Um93cylcbiAgICAgICAgZm9yIChsZXQgeSA9IHRoaXMuX3Jvd3M7IHkgPiBuZXdSb3dzOyB5LS0pIHtcbiAgICAgICAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPiBuZXdSb3dzICsgdGhpcy55YmFzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID4gdGhpcy55YmFzZSArIHRoaXMueSArIDEpIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGxpbmUgaXMgYSBibGFuayBsaW5lIGJlbG93IHRoZSBjdXJzb3IsIHJlbW92ZSBpdFxuICAgICAgICAgICAgICB0aGlzLmxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGxpbmUgaXMgdGhlIGN1cnNvciwgc2Nyb2xsIGRvd25cbiAgICAgICAgICAgICAgdGhpcy55YmFzZSsrO1xuICAgICAgICAgICAgICB0aGlzLnlkaXNwKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZSBtYXggbGVuZ3RoIGlmIG5lZWRlZCBhZnRlciBhZGp1c3RtZW50cywgdGhpcyBpcyBkb25lIGFmdGVyIGFzIGl0XG4gICAgICAvLyB3b3VsZCBvdGhlcndpc2UgY3V0IGRhdGEgZnJvbSB0aGUgYm90dG9tIG9mIHRoZSBidWZmZXIuXG4gICAgICBpZiAobmV3TWF4TGVuZ3RoIDwgdGhpcy5saW5lcy5tYXhMZW5ndGgpIHtcbiAgICAgICAgLy8gVHJpbSBmcm9tIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciBhbmQgYWRqdXN0IHliYXNlIGFuZCB5ZGlzcC5cbiAgICAgICAgY29uc3QgYW1vdW50VG9UcmltID0gdGhpcy5saW5lcy5sZW5ndGggLSBuZXdNYXhMZW5ndGg7XG4gICAgICAgIGlmIChhbW91bnRUb1RyaW0gPiAwKSB7XG4gICAgICAgICAgdGhpcy5saW5lcy50cmltU3RhcnQoYW1vdW50VG9UcmltKTtcbiAgICAgICAgICB0aGlzLnliYXNlID0gTWF0aC5tYXgodGhpcy55YmFzZSAtIGFtb3VudFRvVHJpbSwgMCk7XG4gICAgICAgICAgdGhpcy55ZGlzcCA9IE1hdGgubWF4KHRoaXMueWRpc3AgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICAgIHRoaXMuc2F2ZWRZID0gTWF0aC5tYXgodGhpcy5zYXZlZFkgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGluZXMubWF4TGVuZ3RoID0gbmV3TWF4TGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgY3Vyc29yIHN0YXlzIG9uIHNjcmVlblxuICAgICAgdGhpcy54ID0gTWF0aC5taW4odGhpcy54LCBuZXdDb2xzIC0gMSk7XG4gICAgICB0aGlzLnkgPSBNYXRoLm1pbih0aGlzLnksIG5ld1Jvd3MgLSAxKTtcbiAgICAgIGlmIChhZGRUb1kpIHtcbiAgICAgICAgdGhpcy55ICs9IGFkZFRvWTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2F2ZWRYID0gTWF0aC5taW4odGhpcy5zYXZlZFgsIG5ld0NvbHMgLSAxKTtcblxuICAgICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgIH1cblxuICAgIHRoaXMuc2Nyb2xsQm90dG9tID0gbmV3Um93cyAtIDE7XG5cbiAgICBpZiAodGhpcy5faXNSZWZsb3dFbmFibGVkKSB7XG4gICAgICB0aGlzLl9yZWZsb3cobmV3Q29scywgbmV3Um93cyk7XG5cbiAgICAgIC8vIFRyaW0gdGhlIGVuZCBvZiB0aGUgbGluZSBvZmYgaWYgY29scyBzaHJ1bmtcbiAgICAgIGlmICh0aGlzLl9jb2xzID4gbmV3Q29scykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmxpbmVzLmdldChpKSEucmVzaXplKG5ld0NvbHMsIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2NvbHMgPSBuZXdDb2xzO1xuICAgIHRoaXMuX3Jvd3MgPSBuZXdSb3dzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2lzUmVmbG93RW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiAhdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy53aW5kb3dzTW9kZTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZmxvdyhuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jb2xzID09PSBuZXdDb2xzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHJvd3MsIGlnbm9yZSB0aGUgbGFzdCBvbmUgYXMgaXQgY2Fubm90IGJlIHdyYXBwZWRcbiAgICBpZiAobmV3Q29scyA+IHRoaXMuX2NvbHMpIHtcbiAgICAgIHRoaXMuX3JlZmxvd0xhcmdlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVmbG93U21hbGxlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dMYXJnZXIobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0b1JlbW92ZTogbnVtYmVyW10gPSByZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlKHRoaXMubGluZXMsIHRoaXMuX2NvbHMsIG5ld0NvbHMsIHRoaXMueWJhc2UgKyB0aGlzLnksIHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpKTtcbiAgICBpZiAodG9SZW1vdmUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbmV3TGF5b3V0UmVzdWx0ID0gcmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0KHRoaXMubGluZXMsIHRvUmVtb3ZlKTtcbiAgICAgIHJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0KHRoaXMubGluZXMsIG5ld0xheW91dFJlc3VsdC5sYXlvdXQpO1xuICAgICAgdGhpcy5fcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQobmV3Q29scywgbmV3Um93cywgbmV3TGF5b3V0UmVzdWx0LmNvdW50UmVtb3ZlZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIsIGNvdW50UmVtb3ZlZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbnVsbENlbGwgPSB0aGlzLmdldE51bGxDZWxsKERFRkFVTFRfQVRUUl9EQVRBKTtcbiAgICAvLyBBZGp1c3Qgdmlld3BvcnQgYmFzZWQgb24gbnVtYmVyIG9mIGl0ZW1zIHJlbW92ZWRcbiAgICBsZXQgdmlld3BvcnRBZGp1c3RtZW50cyA9IGNvdW50UmVtb3ZlZDtcbiAgICB3aGlsZSAodmlld3BvcnRBZGp1c3RtZW50cy0tID4gMCkge1xuICAgICAgaWYgKHRoaXMueWJhc2UgPT09IDApIHtcbiAgICAgICAgaWYgKHRoaXMueSA+IDApIHtcbiAgICAgICAgICB0aGlzLnktLTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPCBuZXdSb3dzKSB7XG4gICAgICAgICAgLy8gQWRkIGFuIGV4dHJhIHJvdyBhdCB0aGUgYm90dG9tIG9mIHRoZSB2aWV3cG9ydFxuICAgICAgICAgIHRoaXMubGluZXMucHVzaChuZXcgQnVmZmVyTGluZShuZXdDb2xzLCBudWxsQ2VsbCkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy55ZGlzcCA9PT0gdGhpcy55YmFzZSkge1xuICAgICAgICAgIHRoaXMueWRpc3AtLTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnliYXNlLS07XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuc2F2ZWRZID0gTWF0aC5tYXgodGhpcy5zYXZlZFkgLSBjb3VudFJlbW92ZWQsIDApO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmbG93U21hbGxlcihuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IG51bGxDZWxsID0gdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSk7XG4gICAgLy8gR2F0aGVyIGFsbCBCdWZmZXJMaW5lcyB0aGF0IG5lZWQgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgQnVmZmVyIGhlcmUgc28gdGhhdCB0aGV5IGNhbiBiZVxuICAgIC8vIGJhdGNoZWQgdXAgYW5kIG9ubHkgY29tbWl0dGVkIG9uY2VcbiAgICBjb25zdCB0b0luc2VydCA9IFtdO1xuICAgIGxldCBjb3VudFRvSW5zZXJ0ID0gMDtcbiAgICAvLyBHbyBiYWNrd2FyZHMgYXMgbWFueSBsaW5lcyBtYXkgYmUgdHJpbW1lZCBhbmQgdGhpcyB3aWxsIGF2b2lkIGNvbnNpZGVyaW5nIHRoZW1cbiAgICBmb3IgKGxldCB5ID0gdGhpcy5saW5lcy5sZW5ndGggLSAxOyB5ID49IDA7IHktLSkge1xuICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGlzIGxpbmUgaXMgYSBwcm9ibGVtXG4gICAgICBsZXQgbmV4dExpbmUgPSB0aGlzLmxpbmVzLmdldCh5KSBhcyBCdWZmZXJMaW5lO1xuICAgICAgaWYgKCFuZXh0TGluZSB8fCAhbmV4dExpbmUuaXNXcmFwcGVkICYmIG5leHRMaW5lLmdldFRyaW1tZWRMZW5ndGgoKSA8PSBuZXdDb2xzKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBHYXRoZXIgd3JhcHBlZCBsaW5lcyBhbmQgYWRqdXN0IHkgdG8gYmUgdGhlIHN0YXJ0aW5nIGxpbmVcbiAgICAgIGNvbnN0IHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdID0gW25leHRMaW5lXTtcbiAgICAgIHdoaWxlIChuZXh0TGluZS5pc1dyYXBwZWQgJiYgeSA+IDApIHtcbiAgICAgICAgbmV4dExpbmUgPSB0aGlzLmxpbmVzLmdldCgtLXkpIGFzIEJ1ZmZlckxpbmU7XG4gICAgICAgIHdyYXBwZWRMaW5lcy51bnNoaWZ0KG5leHRMaW5lKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlc2UgbGluZXMgY29udGFpbiB0aGUgY3Vyc29yIGRvbid0IHRvdWNoIHRoZW0sIHRoZSBwcm9ncmFtIHdpbGwgaGFuZGxlIGZpeGluZyB1cFxuICAgICAgLy8gd3JhcHBlZCBsaW5lcyB3aXRoIHRoZSBjdXJzb3JcbiAgICAgIGNvbnN0IGFic29sdXRlWSA9IHRoaXMueWJhc2UgKyB0aGlzLnk7XG4gICAgICBpZiAoYWJzb2x1dGVZID49IHkgJiYgYWJzb2x1dGVZIDwgeSArIHdyYXBwZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhc3RMaW5lTGVuZ3RoID0gd3JhcHBlZExpbmVzW3dyYXBwZWRMaW5lcy5sZW5ndGggLSAxXS5nZXRUcmltbWVkTGVuZ3RoKCk7XG4gICAgICBjb25zdCBkZXN0TGluZUxlbmd0aHMgPSByZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMod3JhcHBlZExpbmVzLCB0aGlzLl9jb2xzLCBuZXdDb2xzKTtcbiAgICAgIGNvbnN0IGxpbmVzVG9BZGQgPSBkZXN0TGluZUxlbmd0aHMubGVuZ3RoIC0gd3JhcHBlZExpbmVzLmxlbmd0aDtcbiAgICAgIGxldCB0cmltbWVkTGluZXM6IG51bWJlcjtcbiAgICAgIGlmICh0aGlzLnliYXNlID09PSAwICYmIHRoaXMueSAhPT0gdGhpcy5saW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSB0b3Agc2VjdGlvbiBvZiB0aGUgYnVmZmVyIGlzIG5vdCB5ZXQgZmlsbGVkXG4gICAgICAgIHRyaW1tZWRMaW5lcyA9IE1hdGgubWF4KDAsIHRoaXMueSAtIHRoaXMubGluZXMubWF4TGVuZ3RoICsgbGluZXNUb0FkZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmltbWVkTGluZXMgPSBNYXRoLm1heCgwLCB0aGlzLmxpbmVzLmxlbmd0aCAtIHRoaXMubGluZXMubWF4TGVuZ3RoICsgbGluZXNUb0FkZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgbmV3IGxpbmVzXG4gICAgICBjb25zdCBuZXdMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzVG9BZGQ7IGkrKykge1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gdGhpcy5nZXRCbGFua0xpbmUoREVGQVVMVF9BVFRSX0RBVEEsIHRydWUpIGFzIEJ1ZmZlckxpbmU7XG4gICAgICAgIG5ld0xpbmVzLnB1c2gobmV3TGluZSk7XG4gICAgICB9XG4gICAgICBpZiAobmV3TGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB0b0luc2VydC5wdXNoKHtcbiAgICAgICAgICAvLyBjb3VudFRvSW5zZXJ0IGhlcmUgZ2V0cyB0aGUgYWN0dWFsIGluZGV4LCB0YWtpbmcgaW50byBhY2NvdW50IG90aGVyIGluc2VydGVkIGl0ZW1zLlxuICAgICAgICAgIC8vIHVzaW5nIHRoaXMgd2UgY2FuIGl0ZXJhdGUgdGhyb3VnaCB0aGUgbGlzdCBmb3J3YXJkc1xuICAgICAgICAgIHN0YXJ0OiB5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCArIGNvdW50VG9JbnNlcnQsXG4gICAgICAgICAgbmV3TGluZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGNvdW50VG9JbnNlcnQgKz0gbmV3TGluZXMubGVuZ3RoO1xuICAgICAgfVxuICAgICAgd3JhcHBlZExpbmVzLnB1c2goLi4ubmV3TGluZXMpO1xuXG4gICAgICAvLyBDb3B5IGJ1ZmZlciBkYXRhIHRvIG5ldyBsb2NhdGlvbnMsIHRoaXMgbmVlZHMgdG8gaGFwcGVuIGJhY2t3YXJkcyB0byBkbyBpbi1wbGFjZVxuICAgICAgbGV0IGRlc3RMaW5lSW5kZXggPSBkZXN0TGluZUxlbmd0aHMubGVuZ3RoIC0gMTsgLy8gTWF0aC5mbG9vcihjZWxsc05lZWRlZCAvIG5ld0NvbHMpO1xuICAgICAgbGV0IGRlc3RDb2wgPSBkZXN0TGluZUxlbmd0aHNbZGVzdExpbmVJbmRleF07IC8vIGNlbGxzTmVlZGVkICUgbmV3Q29scztcbiAgICAgIGlmIChkZXN0Q29sID09PSAwKSB7XG4gICAgICAgIGRlc3RMaW5lSW5kZXgtLTtcbiAgICAgICAgZGVzdENvbCA9IGRlc3RMaW5lTGVuZ3Roc1tkZXN0TGluZUluZGV4XTtcbiAgICAgIH1cbiAgICAgIGxldCBzcmNMaW5lSW5kZXggPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gbGluZXNUb0FkZCAtIDE7XG4gICAgICBsZXQgc3JjQ29sID0gbGFzdExpbmVMZW5ndGg7XG4gICAgICB3aGlsZSAoc3JjTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgY29uc3QgY2VsbHNUb0NvcHkgPSBNYXRoLm1pbihzcmNDb2wsIGRlc3RDb2wpO1xuICAgICAgICB3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleF0uY29weUNlbGxzRnJvbSh3cmFwcGVkTGluZXNbc3JjTGluZUluZGV4XSwgc3JjQ29sIC0gY2VsbHNUb0NvcHksIGRlc3RDb2wgLSBjZWxsc1RvQ29weSwgY2VsbHNUb0NvcHksIHRydWUpO1xuICAgICAgICBkZXN0Q29sIC09IGNlbGxzVG9Db3B5O1xuICAgICAgICBpZiAoZGVzdENvbCA9PT0gMCkge1xuICAgICAgICAgIGRlc3RMaW5lSW5kZXgtLTtcbiAgICAgICAgICBkZXN0Q29sID0gZGVzdExpbmVMZW5ndGhzW2Rlc3RMaW5lSW5kZXhdO1xuICAgICAgICB9XG4gICAgICAgIHNyY0NvbCAtPSBjZWxsc1RvQ29weTtcbiAgICAgICAgaWYgKHNyY0NvbCA9PT0gMCkge1xuICAgICAgICAgIHNyY0xpbmVJbmRleC0tO1xuICAgICAgICAgIGNvbnN0IHdyYXBwZWRMaW5lc0luZGV4ID0gTWF0aC5tYXgoc3JjTGluZUluZGV4LCAwKTtcbiAgICAgICAgICBzcmNDb2wgPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCB3cmFwcGVkTGluZXNJbmRleCwgdGhpcy5fY29scyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gTnVsbCBvdXQgdGhlIGVuZCBvZiB0aGUgbGluZSBlbmRzIGlmIGEgd2lkZSBjaGFyYWN0ZXIgd3JhcHBlZCB0byB0aGUgZm9sbG93aW5nIGxpbmVcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd3JhcHBlZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChkZXN0TGluZUxlbmd0aHNbaV0gPCBuZXdDb2xzKSB7XG4gICAgICAgICAgd3JhcHBlZExpbmVzW2ldLnNldENlbGwoZGVzdExpbmVMZW5ndGhzW2ldLCBudWxsQ2VsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IHZpZXdwb3J0IGFzIG5lZWRlZFxuICAgICAgbGV0IHZpZXdwb3J0QWRqdXN0bWVudHMgPSBsaW5lc1RvQWRkIC0gdHJpbW1lZExpbmVzO1xuICAgICAgd2hpbGUgKHZpZXdwb3J0QWRqdXN0bWVudHMtLSA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMueWJhc2UgPT09IDApIHtcbiAgICAgICAgICBpZiAodGhpcy55IDwgbmV3Um93cyAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMueSsrO1xuICAgICAgICAgICAgdGhpcy5saW5lcy5wb3AoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy55YmFzZSsrO1xuICAgICAgICAgICAgdGhpcy55ZGlzcCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBFbnN1cmUgeWJhc2UgZG9lcyBub3QgZXhjZWVkIGl0cyBtYXhpbXVtIHZhbHVlXG4gICAgICAgICAgaWYgKHRoaXMueWJhc2UgPCBNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCwgdGhpcy5saW5lcy5sZW5ndGggKyBjb3VudFRvSW5zZXJ0KSAtIG5ld1Jvd3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnliYXNlID09PSB0aGlzLnlkaXNwKSB7XG4gICAgICAgICAgICAgIHRoaXMueWRpc3ArKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMueWJhc2UrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuc2F2ZWRZID0gTWF0aC5taW4odGhpcy5zYXZlZFkgKyBsaW5lc1RvQWRkLCB0aGlzLnliYXNlICsgbmV3Um93cyAtIDEpO1xuICAgIH1cblxuICAgIC8vIFJlYXJyYW5nZSBsaW5lcyBpbiB0aGUgYnVmZmVyIGlmIHRoZXJlIGFyZSBhbnkgaW5zZXJ0aW9ucywgdGhpcyBpcyBkb25lIGF0IHRoZSBlbmQgcmF0aGVyXG4gICAgLy8gdGhhbiBlYXJsaWVyIHNvIHRoYXQgaXQncyBhIHNpbmdsZSBPKG4pIHBhc3MgdGhyb3VnaCB0aGUgYnVmZmVyLCBpbnN0ZWFkIG9mIE8obl4yKSBmcm9tIG1hbnlcbiAgICAvLyBjb3N0bHkgY2FsbHMgdG8gQ2lyY3VsYXJMaXN0LnNwbGljZS5cbiAgICBpZiAodG9JbnNlcnQubGVuZ3RoID4gMCkge1xuICAgICAgLy8gUmVjb3JkIGJ1ZmZlciBpbnNlcnQgZXZlbnRzIGFuZCB0aGVuIHBsYXkgdGhlbSBiYWNrIGJhY2t3YXJkcyBzbyB0aGF0IHRoZSBpbmRleGVzIGFyZVxuICAgICAgLy8gY29ycmVjdFxuICAgICAgY29uc3QgaW5zZXJ0RXZlbnRzOiBJSW5zZXJ0RXZlbnRbXSA9IFtdO1xuXG4gICAgICAvLyBSZWNvcmQgb3JpZ2luYWwgbGluZXMgc28gdGhleSBkb24ndCBnZXQgb3ZlcnJpZGRlbiB3aGVuIHdlIHJlYXJyYW5nZSB0aGUgbGlzdFxuICAgICAgY29uc3Qgb3JpZ2luYWxMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb3JpZ2luYWxMaW5lcy5wdXNoKHRoaXMubGluZXMuZ2V0KGkpIGFzIEJ1ZmZlckxpbmUpO1xuICAgICAgfVxuICAgICAgY29uc3Qgb3JpZ2luYWxMaW5lc0xlbmd0aCA9IHRoaXMubGluZXMubGVuZ3RoO1xuXG4gICAgICBsZXQgb3JpZ2luYWxMaW5lSW5kZXggPSBvcmlnaW5hbExpbmVzTGVuZ3RoIC0gMTtcbiAgICAgIGxldCBuZXh0VG9JbnNlcnRJbmRleCA9IDA7XG4gICAgICBsZXQgbmV4dFRvSW5zZXJ0ID0gdG9JbnNlcnRbbmV4dFRvSW5zZXJ0SW5kZXhdO1xuICAgICAgdGhpcy5saW5lcy5sZW5ndGggPSBNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCwgdGhpcy5saW5lcy5sZW5ndGggKyBjb3VudFRvSW5zZXJ0KTtcbiAgICAgIGxldCBjb3VudEluc2VydGVkU29GYXIgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IE1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoIC0gMSwgb3JpZ2luYWxMaW5lc0xlbmd0aCArIGNvdW50VG9JbnNlcnQgLSAxKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKG5leHRUb0luc2VydCAmJiBuZXh0VG9JbnNlcnQuc3RhcnQgPiBvcmlnaW5hbExpbmVJbmRleCArIGNvdW50SW5zZXJ0ZWRTb0Zhcikge1xuICAgICAgICAgIC8vIEluc2VydCBleHRyYSBsaW5lcyBoZXJlLCBhZGp1c3RpbmcgaSBhcyBuZWVkZWRcbiAgICAgICAgICBmb3IgKGxldCBuZXh0SSA9IG5leHRUb0luc2VydC5uZXdMaW5lcy5sZW5ndGggLSAxOyBuZXh0SSA+PSAwOyBuZXh0SS0tKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVzLnNldChpLS0sIG5leHRUb0luc2VydC5uZXdMaW5lc1tuZXh0SV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpKys7XG5cbiAgICAgICAgICAvLyBDcmVhdGUgaW5zZXJ0IGV2ZW50cyBmb3IgbGF0ZXJcbiAgICAgICAgICBpbnNlcnRFdmVudHMucHVzaCh7XG4gICAgICAgICAgICBpbmRleDogb3JpZ2luYWxMaW5lSW5kZXggKyAxLFxuICAgICAgICAgICAgYW1vdW50OiBuZXh0VG9JbnNlcnQubmV3TGluZXMubGVuZ3RoXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb3VudEluc2VydGVkU29GYXIgKz0gbmV4dFRvSW5zZXJ0Lm5ld0xpbmVzLmxlbmd0aDtcbiAgICAgICAgICBuZXh0VG9JbnNlcnQgPSB0b0luc2VydFsrK25leHRUb0luc2VydEluZGV4XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxpbmVzLnNldChpLCBvcmlnaW5hbExpbmVzW29yaWdpbmFsTGluZUluZGV4LS1dKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgbWFya2Vyc1xuICAgICAgbGV0IGluc2VydENvdW50RW1pdHRlZCA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gaW5zZXJ0RXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGluc2VydEV2ZW50c1tpXS5pbmRleCArPSBpbnNlcnRDb3VudEVtaXR0ZWQ7XG4gICAgICAgIHRoaXMubGluZXMub25JbnNlcnRFbWl0dGVyLmZpcmUoaW5zZXJ0RXZlbnRzW2ldKTtcbiAgICAgICAgaW5zZXJ0Q291bnRFbWl0dGVkICs9IGluc2VydEV2ZW50c1tpXS5hbW91bnQ7XG4gICAgICB9XG4gICAgICBjb25zdCBhbW91bnRUb1RyaW0gPSBNYXRoLm1heCgwLCBvcmlnaW5hbExpbmVzTGVuZ3RoICsgY291bnRUb0luc2VydCAtIHRoaXMubGluZXMubWF4TGVuZ3RoKTtcbiAgICAgIGlmIChhbW91bnRUb1RyaW0gPiAwKSB7XG4gICAgICAgIHRoaXMubGluZXMub25UcmltRW1pdHRlci5maXJlKGFtb3VudFRvVHJpbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gcHJpdmF0ZSBfcmVmbG93U21hbGxlckdldExpbmVzTmVlZGVkKClcblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBhIHN0cmluZyBpbmRleCBiYWNrIHRvIGEgQnVmZmVySW5kZXguXG4gICAqIFRvIGdldCB0aGUgY29ycmVjdCBidWZmZXIgcG9zaXRpb24gdGhlIHN0cmluZyBtdXN0IHN0YXJ0IGF0IGBzdGFydENvbGAgMFxuICAgKiAoZGVmYXVsdCBpbiB0cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcpLlxuICAgKiBUaGUgbWV0aG9kIGFsc28gd29ya3Mgb24gd3JhcHBlZCBsaW5lIHN0cmluZ3MgZ2l2ZW4gcm93cyB3ZXJlIG5vdCB0cmltbWVkLlxuICAgKiBUaGUgbWV0aG9kIG9wZXJhdGVzIG9uIHRoZSBDaGFyRGF0YSBzdHJpbmcgbGVuZ3RoLCB0aGVyZSBhcmUgbm9cbiAgICogYWRkaXRpb25hbCBjb250ZW50IG9yIGJvdW5kYXJ5IGNoZWNrcy4gVGhlcmVmb3JlIHRoZSBzdHJpbmcgYW5kIHRoZSBidWZmZXJcbiAgICogc2hvdWxkIG5vdCBiZSBhbHRlcmVkIGluIGJldHdlZW4uXG4gICAqIFRPRE86IHJlc3BlY3QgdHJpbSBmbGFnIGFmdGVyIGZpeGluZyAjMTY4NVxuICAgKiBAcGFyYW0gbGluZUluZGV4IGxpbmUgaW5kZXggdGhlIHN0cmluZyB3YXMgcmV0cmlldmVkIGZyb21cbiAgICogQHBhcmFtIHN0cmluZ0luZGV4IGluZGV4IHdpdGhpbiB0aGUgc3RyaW5nXG4gICAqIEBwYXJhbSBzdGFydENvbCBjb2x1bW4gb2Zmc2V0IHRoZSBzdHJpbmcgd2FzIHJldHJpZXZlZCBmcm9tXG4gICAqL1xuICBwdWJsaWMgc3RyaW5nSW5kZXhUb0J1ZmZlckluZGV4KGxpbmVJbmRleDogbnVtYmVyLCBzdHJpbmdJbmRleDogbnVtYmVyLCB0cmltUmlnaHQ6IGJvb2xlYW4gPSBmYWxzZSk6IEJ1ZmZlckluZGV4IHtcbiAgICB3aGlsZSAoc3RyaW5nSW5kZXgpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmxpbmVzLmdldChsaW5lSW5kZXgpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIHJldHVybiBbLTEsIC0xXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlbmd0aCA9ICh0cmltUmlnaHQpID8gbGluZS5nZXRUcmltbWVkTGVuZ3RoKCkgOiBsaW5lLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmUuZ2V0KGkpW0NIQVJfREFUQV9XSURUSF9JTkRFWF0pIHtcbiAgICAgICAgICAvLyBlbXB0eSBjZWxscyByZXBvcnQgYSBzdHJpbmcgbGVuZ3RoIG9mIDAsIGJ1dCBnZXQgcmVwbGFjZWRcbiAgICAgICAgICAvLyB3aXRoIGEgd2hpdGVzcGFjZSBpbiB0cmFuc2xhdGVUb1N0cmluZywgdGh1cyByZXBsYWNlIHdpdGggMVxuICAgICAgICAgIHN0cmluZ0luZGV4IC09IGxpbmUuZ2V0KGkpW0NIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGggfHwgMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RyaW5nSW5kZXggPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIFtsaW5lSW5kZXgsIGldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaW5lSW5kZXgrKztcbiAgICB9XG4gICAgcmV0dXJuIFtsaW5lSW5kZXgsIDBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgYSBidWZmZXIgbGluZSB0byBhIHN0cmluZywgd2l0aCBvcHRpb25hbCBzdGFydCBhbmQgZW5kIGNvbHVtbnMuXG4gICAqIFdpZGUgY2hhcmFjdGVycyB3aWxsIGNvdW50IGFzIHR3byBjb2x1bW5zIGluIHRoZSByZXN1bHRpbmcgc3RyaW5nLiBUaGlzXG4gICAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBmb3IgZ2V0dGluZyB0aGUgYWN0dWFsIHRleHQgdW5kZXJuZWF0aCB0aGUgcmF3IHNlbGVjdGlvblxuICAgKiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGxpbmUgVGhlIGxpbmUgYmVpbmcgdHJhbnNsYXRlZC5cbiAgICogQHBhcmFtIHRyaW1SaWdodCBXaGV0aGVyIHRvIHRyaW0gd2hpdGVzcGFjZSB0byB0aGUgcmlnaHQuXG4gICAqIEBwYXJhbSBzdGFydENvbCBUaGUgY29sdW1uIHRvIHN0YXJ0IGF0LlxuICAgKiBAcGFyYW0gZW5kQ29sIFRoZSBjb2x1bW4gdG8gZW5kIGF0LlxuICAgKi9cbiAgcHVibGljIHRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhsaW5lSW5kZXg6IG51bWJlciwgdHJpbVJpZ2h0OiBib29sZWFuLCBzdGFydENvbDogbnVtYmVyID0gMCwgZW5kQ29sPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lcy5nZXQobGluZUluZGV4KTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIGxpbmUudHJhbnNsYXRlVG9TdHJpbmcodHJpbVJpZ2h0LCBzdGFydENvbCwgZW5kQ29sKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKHk6IG51bWJlcik6IHsgZmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyIH0ge1xuICAgIGxldCBmaXJzdCA9IHk7XG4gICAgbGV0IGxhc3QgPSB5O1xuICAgIC8vIFNjYW4gdXB3YXJkcyBmb3Igd3JhcHBlZCBsaW5lc1xuICAgIHdoaWxlIChmaXJzdCA+IDAgJiYgdGhpcy5saW5lcy5nZXQoZmlyc3QpIS5pc1dyYXBwZWQpIHtcbiAgICAgIGZpcnN0LS07XG4gICAgfVxuICAgIC8vIFNjYW4gZG93bndhcmRzIGZvciB3cmFwcGVkIGxpbmVzXG4gICAgd2hpbGUgKGxhc3QgKyAxIDwgdGhpcy5saW5lcy5sZW5ndGggJiYgdGhpcy5saW5lcy5nZXQobGFzdCArIDEpIS5pc1dyYXBwZWQpIHtcbiAgICAgIGxhc3QrKztcbiAgICB9XG4gICAgcmV0dXJuIHsgZmlyc3QsIGxhc3QgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgdGFiIHN0b3BzLlxuICAgKiBAcGFyYW0gaSBUaGUgaW5kZXggdG8gc3RhcnQgc2V0dGluZyB1cCB0YWIgc3RvcHMgZnJvbS5cbiAgICovXG4gIHB1YmxpYyBzZXR1cFRhYlN0b3BzKGk/OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoaSAhPT0gbnVsbCAmJiBpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy50YWJzW2ldKSB7XG4gICAgICAgIGkgPSB0aGlzLnByZXZTdG9wKGkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhYnMgPSB7fTtcbiAgICAgIGkgPSAwO1xuICAgIH1cblxuICAgIGZvciAoOyBpIDwgdGhpcy5fY29sczsgaSArPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLnRhYlN0b3BXaWR0aCkge1xuICAgICAgdGhpcy50YWJzW2ldID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBwcmV2aW91cyB0YWIgc3RvcCBmcm9tIHRoZSBnaXZlbiBwb3NpdGlvbiAoZGVmYXVsdCBpcyBjdXJyZW50KS5cbiAgICogQHBhcmFtIHggVGhlIHBvc2l0aW9uIHRvIG1vdmUgdGhlIGN1cnNvciB0byB0aGUgcHJldmlvdXMgdGFiIHN0b3AuXG4gICAqL1xuICBwdWJsaWMgcHJldlN0b3AoeD86IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHggPT09IG51bGwgfHwgeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB4ID0gdGhpcy54O1xuICAgIH1cbiAgICB3aGlsZSAoIXRoaXMudGFic1stLXhdICYmIHggPiAwKTtcbiAgICByZXR1cm4geCA+PSB0aGlzLl9jb2xzID8gdGhpcy5fY29scyAtIDEgOiB4IDwgMCA/IDAgOiB4O1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGN1cnNvciBvbmUgdGFiIHN0b3AgZm9yd2FyZCBmcm9tIHRoZSBnaXZlbiBwb3NpdGlvbiAoZGVmYXVsdCBpcyBjdXJyZW50KS5cbiAgICogQHBhcmFtIHggVGhlIHBvc2l0aW9uIHRvIG1vdmUgdGhlIGN1cnNvciBvbmUgdGFiIHN0b3AgZm9yd2FyZC5cbiAgICovXG4gIHB1YmxpYyBuZXh0U3RvcCh4PzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoeCA9PT0gbnVsbCB8fCB4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHggPSB0aGlzLng7XG4gICAgfVxuICAgIHdoaWxlICghdGhpcy50YWJzWysreF0gJiYgeCA8IHRoaXMuX2NvbHMpO1xuICAgIHJldHVybiB4ID49IHRoaXMuX2NvbHMgPyB0aGlzLl9jb2xzIC0gMSA6IHggPCAwID8gMCA6IHg7XG4gIH1cblxuICBwdWJsaWMgYWRkTWFya2VyKHk6IG51bWJlcik6IE1hcmtlciB7XG4gICAgY29uc3QgbWFya2VyID0gbmV3IE1hcmtlcih5KTtcbiAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgIG1hcmtlci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uVHJpbShhbW91bnQgPT4ge1xuICAgICAgbWFya2VyLmxpbmUgLT0gYW1vdW50O1xuICAgICAgLy8gVGhlIG1hcmtlciBzaG91bGQgYmUgZGlzcG9zZWQgd2hlbiB0aGUgbGluZSBpcyB0cmltbWVkIGZyb20gdGhlIGJ1ZmZlclxuICAgICAgaWYgKG1hcmtlci5saW5lIDwgMCkge1xuICAgICAgICBtYXJrZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkluc2VydChldmVudCA9PiB7XG4gICAgICBpZiAobWFya2VyLmxpbmUgPj0gZXZlbnQuaW5kZXgpIHtcbiAgICAgICAgbWFya2VyLmxpbmUgKz0gZXZlbnQuYW1vdW50O1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkRlbGV0ZShldmVudCA9PiB7XG4gICAgICAvLyBEZWxldGUgdGhlIG1hcmtlciBpZiBpdCdzIHdpdGhpbiB0aGUgcmFuZ2VcbiAgICAgIGlmIChtYXJrZXIubGluZSA+PSBldmVudC5pbmRleCAmJiBtYXJrZXIubGluZSA8IGV2ZW50LmluZGV4ICsgZXZlbnQuYW1vdW50KSB7XG4gICAgICAgIG1hcmtlci5kaXNwb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNoaWZ0IHRoZSBtYXJrZXIgaWYgaXQncyBhZnRlciB0aGUgZGVsZXRlZCByYW5nZVxuICAgICAgaWYgKG1hcmtlci5saW5lID4gZXZlbnQuaW5kZXgpIHtcbiAgICAgICAgbWFya2VyLmxpbmUgLT0gZXZlbnQuYW1vdW50O1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIobWFya2VyLm9uRGlzcG9zZSgoKSA9PiB0aGlzLl9yZW1vdmVNYXJrZXIobWFya2VyKSkpO1xuICAgIHJldHVybiBtYXJrZXI7XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVNYXJrZXIobWFya2VyOiBNYXJrZXIpOiB2b2lkIHtcbiAgICB0aGlzLm1hcmtlcnMuc3BsaWNlKHRoaXMubWFya2Vycy5pbmRleE9mKG1hcmtlciksIDEpO1xuICB9XG5cbiAgcHVibGljIGl0ZXJhdG9yKHRyaW1SaWdodDogYm9vbGVhbiwgc3RhcnRJbmRleD86IG51bWJlciwgZW5kSW5kZXg/OiBudW1iZXIsIHN0YXJ0T3ZlcnNjYW4/OiBudW1iZXIsIGVuZE92ZXJzY2FuPzogbnVtYmVyKTogSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlclN0cmluZ0l0ZXJhdG9yKHRoaXMsIHRyaW1SaWdodCwgc3RhcnRJbmRleCwgZW5kSW5kZXgsIHN0YXJ0T3ZlcnNjYW4sIGVuZE92ZXJzY2FuKTtcbiAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdG9yIHRvIGdldCB1bndyYXBwZWQgY29udGVudCBzdHJpbmdzIGZyb20gdGhlIGJ1ZmZlci5cbiAqIFRoZSBpdGVyYXRvciByZXR1cm5zIGF0IGxlYXN0IHRoZSBzdHJpbmcgZGF0YSBiZXR3ZWVuIHRoZSBib3JkZXJzXG4gKiBgc3RhcnRJbmRleGAgYW5kIGBlbmRJbmRleGAgKGV4Y2x1c2l2ZSkgYW5kIHdpbGwgZXhwYW5kIHRoZSBsaW5lc1xuICogYnkgYHN0YXJ0T3ZlcnNjYW5gIHRvIHRoZSB0b3AgYW5kIGJ5IGBlbmRPdmVyc2NhbmAgdG8gdGhlIGJvdHRvbSxcbiAqIGlmIG5vIG5ldyBsaW5lIHdhcyBmb3VuZCBpbiBiZXR3ZWVuLlxuICogSXQgd2lsbCBuZXZlciByZWFkL3JldHVybiBzdHJpbmcgZGF0YSBiZXlvbmQgYHN0YXJ0SW5kZXggLSBzdGFydE92ZXJzY2FuYFxuICogb3IgYGVuZEluZGV4ICsgZW5kT3ZlcnNjYW5gLiBUaGVyZWZvcmUgdGhlIGZpcnN0IGFuZCBsYXN0IGxpbmUgbWlnaHQgYmUgdHJ1bmNhdGVkLlxuICogSXQgaXMgcG9zc2libGUgdG8gYWx3YXlzIGdldCB0aGUgZnVsbCBzdHJpbmcgZm9yIHRoZSBmaXJzdCBhbmQgbGFzdCBsaW5lIGFzIHdlbGxcbiAqIGJ5IHNldHRpbmcgdGhlIG92ZXJzY2FuIHZhbHVlcyB0byB0aGUgYWN0dWFsIGJ1ZmZlciBsZW5ndGguIFRoaXMgbm90IHJlY29tbWVuZGVkXG4gKiBzaW5jZSBpdCBtaWdodCByZXR1cm4gdGhlIHdob2xlIGJ1ZmZlciB3aXRoaW4gYSBzaW5nbGUgc3RyaW5nIGluIGEgd29yc3QgY2FzZSBzY2VuYXJpby5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlclN0cmluZ0l0ZXJhdG9yIGltcGxlbWVudHMgSUJ1ZmZlclN0cmluZ0l0ZXJhdG9yIHtcbiAgcHJpdmF0ZSBfY3VycmVudDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yIChcbiAgICBwcml2YXRlIF9idWZmZXI6IElCdWZmZXIsXG4gICAgcHJpdmF0ZSBfdHJpbVJpZ2h0OiBib29sZWFuLFxuICAgIHByaXZhdGUgX3N0YXJ0SW5kZXg6IG51bWJlciA9IDAsXG4gICAgcHJpdmF0ZSBfZW5kSW5kZXg6IG51bWJlciA9IF9idWZmZXIubGluZXMubGVuZ3RoLFxuICAgIHByaXZhdGUgX3N0YXJ0T3ZlcnNjYW46IG51bWJlciA9IDAsXG4gICAgcHJpdmF0ZSBfZW5kT3ZlcnNjYW46IG51bWJlciA9IDBcbiAgKSB7XG4gICAgaWYgKHRoaXMuX3N0YXJ0SW5kZXggPCAwKSB7XG4gICAgICB0aGlzLl9zdGFydEluZGV4ID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2VuZEluZGV4ID4gdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fZW5kSW5kZXggPSB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fc3RhcnRJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBoYXNOZXh0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50IDwgdGhpcy5fZW5kSW5kZXg7XG4gIH1cblxuICBwdWJsaWMgbmV4dCgpOiBJQnVmZmVyU3RyaW5nSXRlcmF0b3JSZXN1bHQge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5fYnVmZmVyLmdldFdyYXBwZWRSYW5nZUZvckxpbmUodGhpcy5fY3VycmVudCk7XG4gICAgLy8gbGltaXQgc2VhcmNoIHdpbmRvdyB0byBvdmVyc2NhbiB2YWx1ZSBhdCBib3RoIGJvcmRlcnNcbiAgICBpZiAocmFuZ2UuZmlyc3QgPCB0aGlzLl9zdGFydEluZGV4IC0gdGhpcy5fc3RhcnRPdmVyc2Nhbikge1xuICAgICAgcmFuZ2UuZmlyc3QgPSB0aGlzLl9zdGFydEluZGV4IC0gdGhpcy5fc3RhcnRPdmVyc2NhbjtcbiAgICB9XG4gICAgaWYgKHJhbmdlLmxhc3QgPiB0aGlzLl9lbmRJbmRleCArIHRoaXMuX2VuZE92ZXJzY2FuKSB7XG4gICAgICByYW5nZS5sYXN0ID0gdGhpcy5fZW5kSW5kZXggKyB0aGlzLl9lbmRPdmVyc2NhbjtcbiAgICB9XG4gICAgLy8gbGltaXQgdG8gY3VycmVudCBidWZmZXIgbGVuZ3RoXG4gICAgcmFuZ2UuZmlyc3QgPSBNYXRoLm1heChyYW5nZS5maXJzdCwgMCk7XG4gICAgcmFuZ2UubGFzdCA9IE1hdGgubWluKHJhbmdlLmxhc3QsIHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgpO1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBmb3IgKGxldCBpID0gcmFuZ2UuZmlyc3Q7IGkgPD0gcmFuZ2UubGFzdDsgKytpKSB7XG4gICAgICByZXN1bHQgKz0gdGhpcy5fYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhpLCB0aGlzLl90cmltUmlnaHQpO1xuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50ID0gcmFuZ2UubGFzdCArIDE7XG4gICAgcmV0dXJuIHtyYW5nZTogcmFuZ2UsIGNvbnRlbnQ6IHJlc3VsdH07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2hhckRhdGEsIElCdWZmZXJMaW5lLCBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgc3RyaW5nRnJvbUNvZGVQb2ludCB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBERUZBVUxUX0NPTE9SLCBDSEFSX0RBVEFfQ0hBUl9JTkRFWCwgQ0hBUl9EQVRBX1dJRFRIX0lOREVYLCBDSEFSX0RBVEFfQVRUUl9JTkRFWCwgTlVMTF9DRUxMX0NIQVIsIE5VTExfQ0VMTF9XSURUSCwgTlVMTF9DRUxMX0NPREUsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSLCBDb250ZW50IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuXG4vKipcbiAqIGJ1ZmZlciBtZW1vcnkgbGF5b3V0OlxuICpcbiAqICAgfCAgICAgICAgICAgICB1aW50MzJfdCAgICAgICAgICAgICB8ICAgICAgICB1aW50MzJfdCAgICAgICAgIHwgICAgICAgIHVpbnQzMl90ICAgICAgICAgfFxuICogICB8ICAgICAgICAgICAgIGBjb250ZW50YCAgICAgICAgICAgIHwgICAgICAgICAgYEZHYCAgICAgICAgICAgfCAgICAgICAgICBgQkdgICAgICAgICAgICB8XG4gKiAgIHwgd2N3aWR0aCgyKSBjb21iKDEpIGNvZGVwb2ludCgyMSkgfCBmbGFncyg4KSBSKDgpIEcoOCkgQig4KSB8IGZsYWdzKDgpIFIoOCkgRyg4KSBCKDgpIHxcbiAqL1xuXG5cbi8qKiB0eXBlZCBhcnJheSBzbG90cyB0YWtlbiBieSBvbmUgY2VsbCAqL1xuY29uc3QgQ0VMTF9TSVpFID0gMztcblxuLyoqXG4gKiBDZWxsIG1lbWJlciBpbmRpY2VzLlxuICpcbiAqIERpcmVjdCBhY2Nlc3M6XG4gKiAgICBgY29udGVudCA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtgXG4gKiAgICBgZmcgPSBkYXRhW2NvbHVtbiAqIENFTExfU0laRSArIENlbGwuRkddO2BcbiAqICAgIGBiZyA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5CR107YFxuICovXG5jb25zdCBlbnVtIENlbGwge1xuICBDT05URU5UID0gMCxcbiAgRkcgPSAxLCAvLyBjdXJyZW50bHkgc2ltcGx5IGhvbGRzIGFsbCBrbm93biBhdHRyc1xuICBCRyA9IDIgIC8vIGN1cnJlbnRseSB1bnVzZWRcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQVRUUl9EQVRBID0gT2JqZWN0LmZyZWV6ZShuZXcgQXR0cmlidXRlRGF0YSgpKTtcblxuLyoqXG4gKiBUeXBlZCBhcnJheSBiYXNlZCBidWZmZXJsaW5lIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRoZXJlIGFyZSAyIHdheXMgdG8gaW5zZXJ0IGRhdGEgaW50byB0aGUgY2VsbCBidWZmZXI6XG4gKiAtIGBzZXRDZWxsRnJvbUNvZGVwb2ludGAgKyBgYWRkQ29kZXBvaW50VG9DZWxsYFxuICogICBVc2UgdGhlc2UgZm9yIGRhdGEgdGhhdCBpcyBhbHJlYWR5IFVURjMyLlxuICogICBVc2VkIGR1cmluZyBub3JtYWwgaW5wdXQgaW4gYElucHV0SGFuZGxlcmAgZm9yIGZhc3RlciBidWZmZXIgYWNjZXNzLlxuICogLSBgc2V0Q2VsbGBcbiAqICAgVGhpcyBtZXRob2QgdGFrZXMgYSBDZWxsRGF0YSBvYmplY3QgYW5kIHN0b3JlcyB0aGUgZGF0YSBpbiB0aGUgYnVmZmVyLlxuICogICBVc2UgYENlbGxEYXRhLmZyb21DaGFyRGF0YWAgdG8gY3JlYXRlIHRoZSBDZWxsRGF0YSBvYmplY3QgKGUuZy4gZnJvbSBKUyBzdHJpbmcpLlxuICpcbiAqIFRvIHJldHJpZXZlIGRhdGEgZnJvbSB0aGUgYnVmZmVyIHVzZSBlaXRoZXIgb25lIG9mIHRoZSBwcmltaXRpdmUgbWV0aG9kc1xuICogKGlmIG9ubHkgb25lIHBhcnRpY3VsYXIgdmFsdWUgaXMgbmVlZGVkKSBvciBgbG9hZENlbGxgLiBGb3IgYGxvYWRDZWxsYCBpbiBhIGxvb3BcbiAqIG1lbW9yeSBhbGxvY3MgLyBHQyBwcmVzc3VyZSBjYW4gYmUgZ3JlYXRseSByZWR1Y2VkIGJ5IHJldXNpbmcgdGhlIENlbGxEYXRhIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlckxpbmUgaW1wbGVtZW50cyBJQnVmZmVyTGluZSB7XG4gIHByb3RlY3RlZCBfZGF0YTogVWludDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfY29tYmluZWQ6IHtbaW5kZXg6IG51bWJlcl06IHN0cmluZ30gPSB7fTtcbiAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbHM6IG51bWJlciwgZmlsbENlbGxEYXRhPzogSUNlbGxEYXRhLCBwdWJsaWMgaXNXcmFwcGVkOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KGNvbHMgKiBDRUxMX1NJWkUpO1xuICAgIGNvbnN0IGNlbGwgPSBmaWxsQ2VsbERhdGEgfHwgQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLCBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX1dJRFRILCBOVUxMX0NFTExfQ09ERV0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgKytpKSB7XG4gICAgICB0aGlzLnNldENlbGwoaSwgY2VsbCk7XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gY29scztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2VsbCBkYXRhIENoYXJEYXRhLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogQ2hhckRhdGEge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBjb25zdCBjcCA9IGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10sXG4gICAgICAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSylcbiAgICAgICAgPyB0aGlzLl9jb21iaW5lZFtpbmRleF1cbiAgICAgICAgOiAoY3ApID8gc3RyaW5nRnJvbUNvZGVQb2ludChjcCkgOiAnJyxcbiAgICAgIGNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVCxcbiAgICAgIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKVxuICAgICAgICA/IHRoaXMuX2NvbWJpbmVkW2luZGV4XS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2luZGV4XS5sZW5ndGggLSAxKVxuICAgICAgICA6IGNwXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY2VsbCBkYXRhIGZyb20gQ2hhckRhdGEuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBwdWJsaWMgc2V0KGluZGV4OiBudW1iZXIsIHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSA9IHZhbHVlW0NIQVJfREFUQV9BVFRSX0lOREVYXTtcbiAgICBpZiAodmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMuX2NvbWJpbmVkW2luZGV4XSA9IHZhbHVlWzFdO1xuICAgICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBpbmRleCB8IENvbnRlbnQuSVNfQ09NQklORURfTUFTSyB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHByaW1pdGl2ZSBnZXR0ZXJzXG4gICAqIHVzZSB0aGVzZSB3aGVuIG9ubHkgb25lIHZhbHVlIGlzIG5lZWRlZCwgb3RoZXJ3aXNlIHVzZSBgbG9hZENlbGxgXG4gICAqL1xuICBwdWJsaWMgZ2V0V2lkdGgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID4+IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gIH1cblxuICAvKiogVGVzdCB3aGV0aGVyIGNvbnRlbnQgaGFzIHdpZHRoLiAqL1xuICBwdWJsaWMgaGFzV2lkdGgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5XSURUSF9NQVNLO1xuICB9XG5cbiAgLyoqIEdldCBGRyBjZWxsIGNvbXBvbmVudC4gKi9cbiAgcHVibGljIGdldEZnKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR107XG4gIH1cblxuICAvKiogR2V0IEJHIGNlbGwgY29tcG9uZW50LiAqL1xuICBwdWJsaWMgZ2V0QmcoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IHdoZXRoZXIgY29udGFpbnMgYW55IGNoYXJzLlxuICAgKiBCYXNpY2FsbHkgYW4gZW1wdHkgaGFzIG5vIGNvbnRlbnQsIGJ1dCBvdGhlciBjZWxscyBtaWdodCBkaWZmZXIgaW4gRkcvQkdcbiAgICogZnJvbSByZWFsIGVtcHR5IGNlbGxzLlxuICAgKiAqL1xuICBwdWJsaWMgaGFzQ29udGVudChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LkhBU19DT05URU5UX01BU0s7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvZGVwb2ludCBvZiB0aGUgY2VsbC5cbiAgICogVG8gYmUgaW4gbGluZSB3aXRoIGBjb2RlYCBpbiBDaGFyRGF0YSB0aGlzIGVpdGhlciByZXR1cm5zXG4gICAqIGEgc2luZ2xlIFVURjMyIGNvZGVwb2ludCBvciB0aGUgbGFzdCBjb2RlcG9pbnQgb2YgYSBjb21iaW5lZCBzdHJpbmcuXG4gICAqL1xuICBwdWJsaWMgZ2V0Q29kZVBvaW50KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbWJpbmVkW2luZGV4XS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2luZGV4XS5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICB9XG5cbiAgLyoqIFRlc3Qgd2hldGhlciB0aGUgY2VsbCBjb250YWlucyBhIGNvbWJpbmVkIHN0cmluZy4gKi9cbiAgcHVibGljIGlzQ29tYmluZWQoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIHN0cmluZyBjb250ZW50IG9mIHRoZSBjZWxsLiAqL1xuICBwdWJsaWMgZ2V0U3RyaW5nKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbWJpbmVkW2luZGV4XTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKSB7XG4gICAgICByZXR1cm4gc3RyaW5nRnJvbUNvZGVQb2ludChjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSyk7XG4gICAgfVxuICAgIC8vIHJldHVybiBlbXB0eSBzdHJpbmcgZm9yIGVtcHR5IGNlbGxzXG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgZGF0YSBhdCBgaW5kZXhgIGludG8gYGNlbGxgLiBUaGlzIGlzIHVzZWQgdG8gYWNjZXNzIGNlbGxzIGluIGEgd2F5IHRoYXQncyBtb3JlIGZyaWVuZGx5XG4gICAqIHRvIEdDIGFzIGl0IHNpZ25pZmljYW50bHkgcmVkdWNlZCB0aGUgYW1vdW50IG9mIG5ldyBvYmplY3RzL3JlZmVyZW5jZXMgbmVlZGVkLlxuICAgKi9cbiAgcHVibGljIGxvYWRDZWxsKGluZGV4OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IGluZGV4ICogQ0VMTF9TSVpFO1xuICAgIGNlbGwuY29udGVudCA9IHRoaXMuX2RhdGFbc3RhcnRJbmRleCArIENlbGwuQ09OVEVOVF07XG4gICAgY2VsbC5mZyA9IHRoaXMuX2RhdGFbc3RhcnRJbmRleCArIENlbGwuRkddO1xuICAgIGNlbGwuYmcgPSB0aGlzLl9kYXRhW3N0YXJ0SW5kZXggKyBDZWxsLkJHXTtcbiAgICBpZiAoY2VsbC5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICBjZWxsLmNvbWJpbmVkRGF0YSA9IHRoaXMuX2NvbWJpbmVkW2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGRhdGEgYXQgYGluZGV4YCB0byBgY2VsbGAuXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VsbChpbmRleDogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICBpZiAoY2VsbC5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICB0aGlzLl9jb21iaW5lZFtpbmRleF0gPSBjZWxsLmNvbWJpbmVkRGF0YTtcbiAgICB9XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBjZWxsLmNvbnRlbnQ7XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuRkddID0gY2VsbC5mZztcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gPSBjZWxsLmJnO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjZWxsIGRhdGEgZnJvbSBpbnB1dCBoYW5kbGVyLlxuICAgKiBTaW5jZSB0aGUgaW5wdXQgaGFuZGxlciBzZWUgdGhlIGluY29taW5nIGNoYXJzIGFzIFVURjMyIGNvZGVwb2ludHMsXG4gICAqIGl0IGdldHMgYW4gb3B0aW1pemVkIGFjY2VzcyBtZXRob2QuXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VsbEZyb21Db2RlUG9pbnQoaW5kZXg6IG51bWJlciwgY29kZVBvaW50OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGZnOiBudW1iZXIsIGJnOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IGNvZGVQb2ludCB8ICh3aWR0aCA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10gPSBmZztcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5CR10gPSBiZztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBjb2RlcG9pbnQgdG8gYSBjZWxsIGZyb20gaW5wdXQgaGFuZGxlci5cbiAgICogRHVyaW5nIGlucHV0IHN0YWdlIGNvbWJpbmluZyBjaGFycyB3aXRoIGEgd2lkdGggb2YgMCBmb2xsb3cgYW5kIHN0YWNrXG4gICAqIG9udG8gYSBsZWFkaW5nIGNoYXIuIFNpbmNlIHdlIGFscmVhZHkgc2V0IHRoZSBhdHRyc1xuICAgKiBieSB0aGUgcHJldmlvdXMgYHNldERhdGFGcm9tQ29kZVBvaW50YCBjYWxsLCB3ZSBjYW4gb21pdCBpdCBoZXJlLlxuICAgKi9cbiAgcHVibGljIGFkZENvZGVwb2ludFRvQ2VsbChpbmRleDogbnVtYmVyLCBjb2RlUG9pbnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBjb250ZW50ID0gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIC8vIHdlIGFscmVhZHkgaGF2ZSBhIGNvbWJpbmVkIHN0cmluZywgc2ltcGx5IGFkZFxuICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdICs9IHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZVBvaW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKSB7XG4gICAgICAgIC8vIG5vcm1hbCBjYXNlIGZvciBjb21iaW5pbmcgY2hhcnM6XG4gICAgICAgIC8vICAtIG1vdmUgY3VycmVudCBsZWFkaW5nIGNoYXIgKyBuZXcgb25lIGludG8gY29tYmluZWQgc3RyaW5nXG4gICAgICAgIC8vICAtIHNldCBjb21iaW5lZCBmbGFnXG4gICAgICAgIHRoaXMuX2NvbWJpbmVkW2luZGV4XSA9IHN0cmluZ0Zyb21Db2RlUG9pbnQoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spICsgc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlUG9pbnQpO1xuICAgICAgICBjb250ZW50ICY9IH5Db250ZW50LkNPREVQT0lOVF9NQVNLOyAvLyBzZXQgY29kZXBvaW50IGluIGJ1ZmZlciB0byAwXG4gICAgICAgIGNvbnRlbnQgfD0gQ29udGVudC5JU19DT01CSU5FRF9NQVNLO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4gLSB3ZSBhY3R1YWxseSBoYXZlIG5vIGRhdGEgaW4gdGhlIGNlbGwgeWV0XG4gICAgICAgIC8vIHNpbXBseSBzZXQgdGhlIGRhdGEgaW4gdGhlIGNlbGwgYnVmZmVyIHdpdGggYSB3aWR0aCBvZiAxXG4gICAgICAgIGNvbnRlbnQgPSBjb2RlUG9pbnQgfCAoMSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gY29udGVudDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW5zZXJ0Q2VsbHMocG9zOiBudW1iZXIsIG46IG51bWJlciwgZmlsbENlbGxEYXRhOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICBwb3MgJT0gdGhpcy5sZW5ndGg7XG4gICAgaWYgKG4gPCB0aGlzLmxlbmd0aCAtIHBvcykge1xuICAgICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMubGVuZ3RoIC0gcG9zIC0gbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChwb3MgKyBuICsgaSwgdGhpcy5sb2FkQ2VsbChwb3MgKyBpLCBjZWxsKSk7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwocG9zICsgaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IHBvczsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlbGV0ZUNlbGxzKHBvczogbnVtYmVyLCBuOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgcG9zICU9IHRoaXMubGVuZ3RoO1xuICAgIGlmIChuIDwgdGhpcy5sZW5ndGggLSBwb3MpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbERhdGEoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGggLSBwb3MgLSBuOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKHBvcyArIGksIHRoaXMubG9hZENlbGwocG9zICsgbiArIGksIGNlbGwpKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIG47IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gcG9zOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVwbGFjZUNlbGxzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHdoaWxlIChzdGFydCA8IGVuZCAgJiYgc3RhcnQgPCB0aGlzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRDZWxsKHN0YXJ0KyssIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlc2l6ZShjb2xzOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgaWYgKGNvbHMgPT09IHRoaXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb2xzID4gdGhpcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDMyQXJyYXkoY29scyAqIENFTExfU0laRSk7XG4gICAgICBpZiAodGhpcy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGNvbHMgKiBDRUxMX1NJWkUgPCB0aGlzLl9kYXRhLmxlbmd0aCkge1xuICAgICAgICAgIGRhdGEuc2V0KHRoaXMuX2RhdGEuc3ViYXJyYXkoMCwgY29scyAqIENFTExfU0laRSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc2V0KHRoaXMuX2RhdGEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aDsgaSA8IGNvbHM7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbHMpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheShjb2xzICogQ0VMTF9TSVpFKTtcbiAgICAgICAgZGF0YS5zZXQodGhpcy5fZGF0YS5zdWJhcnJheSgwLCBjb2xzICogQ0VMTF9TSVpFKSk7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICAvLyBSZW1vdmUgYW55IGN1dCBvZmYgY29tYmluZWQgZGF0YVxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fY29tYmluZWQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludChrZXlzW2ldLCAxMCk7XG4gICAgICAgICAgaWYgKGtleSA+PSBjb2xzKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fY29tYmluZWRba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSBuZXcgVWludDMyQXJyYXkoMCk7XG4gICAgICAgIHRoaXMuX2NvbWJpbmVkID0ge307XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gY29scztcbiAgfVxuXG4gIC8qKiBmaWxsIGEgbGluZSB3aXRoIGZpbGxDaGFyRGF0YSAqL1xuICBwdWJsaWMgZmlsbChmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2NvbWJpbmVkID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKiogYWx0ZXIgdG8gYSBmdWxsIGNvcHkgb2YgbGluZSAgKi9cbiAgcHVibGljIGNvcHlGcm9tKGxpbmU6IEJ1ZmZlckxpbmUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sZW5ndGggIT09IGxpbmUubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KGxpbmUuX2RhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1c2UgaGlnaCBzcGVlZCBjb3B5IGlmIGxlbmd0aHMgYXJlIGVxdWFsXG4gICAgICB0aGlzLl9kYXRhLnNldChsaW5lLl9kYXRhKTtcbiAgICB9XG4gICAgdGhpcy5sZW5ndGggPSBsaW5lLmxlbmd0aDtcbiAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgIGZvciAoY29uc3QgZWwgaW4gbGluZS5fY29tYmluZWQpIHtcbiAgICAgIHRoaXMuX2NvbWJpbmVkW2VsXSA9IGxpbmUuX2NvbWJpbmVkW2VsXTtcbiAgICB9XG4gICAgdGhpcy5pc1dyYXBwZWQgPSBsaW5lLmlzV3JhcHBlZDtcbiAgfVxuXG4gIC8qKiBjcmVhdGUgYSBuZXcgY2xvbmUgKi9cbiAgcHVibGljIGNsb25lKCk6IElCdWZmZXJMaW5lIHtcbiAgICBjb25zdCBuZXdMaW5lID0gbmV3IEJ1ZmZlckxpbmUoMCk7XG4gICAgbmV3TGluZS5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhKTtcbiAgICBuZXdMaW5lLmxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgIGZvciAoY29uc3QgZWwgaW4gdGhpcy5fY29tYmluZWQpIHtcbiAgICAgIG5ld0xpbmUuX2NvbWJpbmVkW2VsXSA9IHRoaXMuX2NvbWJpbmVkW2VsXTtcbiAgICB9XG4gICAgbmV3TGluZS5pc1dyYXBwZWQgPSB0aGlzLmlzV3JhcHBlZDtcbiAgICByZXR1cm4gbmV3TGluZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUcmltbWVkTGVuZ3RoKCk6IG51bWJlciB7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGlmICgodGhpcy5fZGF0YVtpICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSAmIENvbnRlbnQuSEFTX0NPTlRFTlRfTUFTSykpIHtcbiAgICAgICAgcmV0dXJuIGkgKyAodGhpcy5fZGF0YVtpICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA+PiBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgY29weUNlbGxzRnJvbShzcmM6IEJ1ZmZlckxpbmUsIHNyY0NvbDogbnVtYmVyLCBkZXN0Q29sOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBhcHBseUluUmV2ZXJzZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHNyY0RhdGEgPSBzcmMuX2RhdGE7XG4gICAgaWYgKGFwcGx5SW5SZXZlcnNlKSB7XG4gICAgICBmb3IgKGxldCBjZWxsID0gbGVuZ3RoIC0gMTsgY2VsbCA+PSAwOyBjZWxsLS0pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDRUxMX1NJWkU7IGkrKykge1xuICAgICAgICAgIHRoaXMuX2RhdGFbKGRlc3RDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIGldID0gc3JjRGF0YVsoc3JjQ29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBjZWxsID0gMDsgY2VsbCA8IGxlbmd0aDsgY2VsbCsrKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ0VMTF9TSVpFOyBpKyspIHtcbiAgICAgICAgICB0aGlzLl9kYXRhWyhkZXN0Q29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXSA9IHNyY0RhdGFbKHNyY0NvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb3ZlIGFueSBjb21iaW5lZCBkYXRhIG92ZXIgYXMgbmVlZGVkXG4gICAgY29uc3Qgc3JjQ29tYmluZWRLZXlzID0gT2JqZWN0LmtleXMoc3JjLl9jb21iaW5lZCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcmNDb21iaW5lZEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KHNyY0NvbWJpbmVkS2V5c1tpXSwgMTApO1xuICAgICAgaWYgKGtleSA+PSBzcmNDb2wpIHtcbiAgICAgICAgdGhpcy5fY29tYmluZWRba2V5IC0gc3JjQ29sICsgZGVzdENvbF0gPSBzcmMuX2NvbWJpbmVkW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodDogYm9vbGVhbiA9IGZhbHNlLCBzdGFydENvbDogbnVtYmVyID0gMCwgZW5kQ29sOiBudW1iZXIgPSB0aGlzLmxlbmd0aCk6IHN0cmluZyB7XG4gICAgaWYgKHRyaW1SaWdodCkge1xuICAgICAgZW5kQ29sID0gTWF0aC5taW4oZW5kQ29sLCB0aGlzLmdldFRyaW1tZWRMZW5ndGgoKSk7XG4gICAgfVxuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICB3aGlsZSAoc3RhcnRDb2wgPCBlbmRDb2wpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW3N0YXJ0Q29sICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICAgIGNvbnN0IGNwID0gY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gICAgICByZXN1bHQgKz0gKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spID8gdGhpcy5fY29tYmluZWRbc3RhcnRDb2xdIDogKGNwKSA/IHN0cmluZ0Zyb21Db2RlUG9pbnQoY3ApIDogV0hJVEVTUEFDRV9DRUxMX0NIQVI7XG4gICAgICBzdGFydENvbCArPSAoY29udGVudCA+PiBDb250ZW50LldJRFRIX1NISUZUKSB8fCAxOyAvLyBhbHdheXMgYWR2YW5jZSBieSAxXG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyTGluZSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBDaXJjdWxhckxpc3QgfSBmcm9tICdjb21tb24vQ2lyY3VsYXJMaXN0JztcbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElOZXdMYXlvdXRSZXN1bHQge1xuICBsYXlvdXQ6IG51bWJlcltdO1xuICBjb3VudFJlbW92ZWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZXMgYW5kIHJldHVybnMgaW5kZXhlcyB0byBiZSByZW1vdmVkIGFmdGVyIGEgcmVmbG93IGxhcmdlciBvY2N1cnMuIExpbmVzIHdpbGwgYmUgcmVtb3ZlZFxuICogd2hlbiBhIHdyYXBwZWQgbGluZSB1bndyYXBzLlxuICogQHBhcmFtIGxpbmVzIFRoZSBidWZmZXIgbGluZXMuXG4gKiBAcGFyYW0gbmV3Q29scyBUaGUgY29sdW1ucyBhZnRlciByZXNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlKGxpbmVzOiBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+LCBvbGRDb2xzOiBudW1iZXIsIG5ld0NvbHM6IG51bWJlciwgYnVmZmVyQWJzb2x1dGVZOiBudW1iZXIsIG51bGxDZWxsOiBJQ2VsbERhdGEpOiBudW1iZXJbXSB7XG4gIC8vIEdhdGhlciBhbGwgQnVmZmVyTGluZXMgdGhhdCBuZWVkIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgQnVmZmVyIGhlcmUgc28gdGhhdCB0aGV5IGNhbiBiZVxuICAvLyBiYXRjaGVkIHVwIGFuZCBvbmx5IGNvbW1pdHRlZCBvbmNlXG4gIGNvbnN0IHRvUmVtb3ZlOiBudW1iZXJbXSA9IFtdO1xuXG4gIGZvciAobGV0IHkgPSAwOyB5IDwgbGluZXMubGVuZ3RoIC0gMTsgeSsrKSB7XG4gICAgLy8gQ2hlY2sgaWYgdGhpcyByb3cgaXMgd3JhcHBlZFxuICAgIGxldCBpID0geTtcbiAgICBsZXQgbmV4dExpbmUgPSBsaW5lcy5nZXQoKytpKSBhcyBCdWZmZXJMaW5lO1xuICAgIGlmICghbmV4dExpbmUuaXNXcmFwcGVkKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBob3cgbWFueSBsaW5lcyBpdCdzIHdyYXBwZWQgZm9yXG4gICAgY29uc3Qgd3JhcHBlZExpbmVzOiBCdWZmZXJMaW5lW10gPSBbbGluZXMuZ2V0KHkpIGFzIEJ1ZmZlckxpbmVdO1xuICAgIHdoaWxlIChpIDwgbGluZXMubGVuZ3RoICYmIG5leHRMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgd3JhcHBlZExpbmVzLnB1c2gobmV4dExpbmUpO1xuICAgICAgbmV4dExpbmUgPSBsaW5lcy5nZXQoKytpKSBhcyBCdWZmZXJMaW5lO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXNlIGxpbmVzIGNvbnRhaW4gdGhlIGN1cnNvciBkb24ndCB0b3VjaCB0aGVtLCB0aGUgcHJvZ3JhbSB3aWxsIGhhbmRsZSBmaXhpbmcgdXAgd3JhcHBlZFxuICAgIC8vIGxpbmVzIHdpdGggdGhlIGN1cnNvclxuICAgIGlmIChidWZmZXJBYnNvbHV0ZVkgPj0geSAmJiBidWZmZXJBYnNvbHV0ZVkgPCBpKSB7XG4gICAgICB5ICs9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSAxO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gQ29weSBidWZmZXIgZGF0YSB0byBuZXcgbG9jYXRpb25zXG4gICAgbGV0IGRlc3RMaW5lSW5kZXggPSAwO1xuICAgIGxldCBkZXN0Q29sID0gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgZGVzdExpbmVJbmRleCwgb2xkQ29scyk7XG4gICAgbGV0IHNyY0xpbmVJbmRleCA9IDE7XG4gICAgbGV0IHNyY0NvbCA9IDA7XG4gICAgd2hpbGUgKHNyY0xpbmVJbmRleCA8IHdyYXBwZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNyY1RyaW1tZWRUaW5lTGVuZ3RoID0gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgc3JjTGluZUluZGV4LCBvbGRDb2xzKTtcbiAgICAgIGNvbnN0IHNyY1JlbWFpbmluZ0NlbGxzID0gc3JjVHJpbW1lZFRpbmVMZW5ndGggLSBzcmNDb2w7XG4gICAgICBjb25zdCBkZXN0UmVtYWluaW5nQ2VsbHMgPSBuZXdDb2xzIC0gZGVzdENvbDtcbiAgICAgIGNvbnN0IGNlbGxzVG9Db3B5ID0gTWF0aC5taW4oc3JjUmVtYWluaW5nQ2VsbHMsIGRlc3RSZW1haW5pbmdDZWxscyk7XG5cbiAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5jb3B5Q2VsbHNGcm9tKHdyYXBwZWRMaW5lc1tzcmNMaW5lSW5kZXhdLCBzcmNDb2wsIGRlc3RDb2wsIGNlbGxzVG9Db3B5LCBmYWxzZSk7XG5cbiAgICAgIGRlc3RDb2wgKz0gY2VsbHNUb0NvcHk7XG4gICAgICBpZiAoZGVzdENvbCA9PT0gbmV3Q29scykge1xuICAgICAgICBkZXN0TGluZUluZGV4Kys7XG4gICAgICAgIGRlc3RDb2wgPSAwO1xuICAgICAgfVxuICAgICAgc3JjQ29sICs9IGNlbGxzVG9Db3B5O1xuICAgICAgaWYgKHNyY0NvbCA9PT0gc3JjVHJpbW1lZFRpbmVMZW5ndGgpIHtcbiAgICAgICAgc3JjTGluZUluZGV4Kys7XG4gICAgICAgIHNyY0NvbCA9IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbGFzdCBjZWxsIGlzbid0IHdpZGUsIGlmIGl0IGlzIGNvcHkgaXQgdG8gdGhlIGN1cnJlbnQgZGVzdFxuICAgICAgaWYgKGRlc3RDb2wgPT09IDAgJiYgZGVzdExpbmVJbmRleCAhPT0gMCkge1xuICAgICAgICBpZiAod3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXggLSAxXS5nZXRXaWR0aChuZXdDb2xzIC0gMSkgPT09IDIpIHtcbiAgICAgICAgICB3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleF0uY29weUNlbGxzRnJvbSh3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleCAtIDFdLCBuZXdDb2xzIC0gMSwgZGVzdENvbCsrLCAxLCBmYWxzZSk7XG4gICAgICAgICAgLy8gTnVsbCBvdXQgdGhlIGVuZCBvZiB0aGUgbGFzdCByb3dcbiAgICAgICAgICB3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleCAtIDFdLnNldENlbGwobmV3Q29scyAtIDEsIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENsZWFyIG91dCByZW1haW5pbmcgY2VsbHMgb3IgZnJhZ21lbnRzIGNvdWxkIHJlbWFpbjtcbiAgICB3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleF0ucmVwbGFjZUNlbGxzKGRlc3RDb2wsIG5ld0NvbHMsIG51bGxDZWxsKTtcblxuICAgIC8vIFdvcmsgYmFja3dhcmRzIGFuZCByZW1vdmUgYW55IHJvd3MgYXQgdGhlIGVuZCB0aGF0IG9ubHkgY29udGFpbiBudWxsIGNlbGxzXG4gICAgbGV0IGNvdW50VG9SZW1vdmUgPSAwO1xuICAgIGZvciAobGV0IGkgPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgICAgaWYgKGkgPiBkZXN0TGluZUluZGV4IHx8IHdyYXBwZWRMaW5lc1tpXS5nZXRUcmltbWVkTGVuZ3RoKCkgPT09IDApIHtcbiAgICAgICAgY291bnRUb1JlbW92ZSsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvdW50VG9SZW1vdmUgPiAwKSB7XG4gICAgICB0b1JlbW92ZS5wdXNoKHkgKyB3cmFwcGVkTGluZXMubGVuZ3RoIC0gY291bnRUb1JlbW92ZSk7IC8vIGluZGV4XG4gICAgICB0b1JlbW92ZS5wdXNoKGNvdW50VG9SZW1vdmUpO1xuICAgIH1cblxuICAgIHkgKz0gd3JhcHBlZExpbmVzLmxlbmd0aCAtIDE7XG4gIH1cbiAgcmV0dXJuIHRvUmVtb3ZlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybiB0aGUgbmV3IGxheW91dCBmb3IgbGluZXMgZ2l2ZW4gYW4gYXJyYXkgb2YgaW5kZXhlcyB0byBiZSByZW1vdmVkLlxuICogQHBhcmFtIGxpbmVzIFRoZSBidWZmZXIgbGluZXMuXG4gKiBAcGFyYW0gdG9SZW1vdmUgVGhlIGluZGV4ZXMgdG8gcmVtb3ZlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0KGxpbmVzOiBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+LCB0b1JlbW92ZTogbnVtYmVyW10pOiBJTmV3TGF5b3V0UmVzdWx0IHtcbiAgY29uc3QgbGF5b3V0OiBudW1iZXJbXSA9IFtdO1xuICAvLyBGaXJzdCBpdGVyYXRlIHRocm91Z2ggdGhlIGxpc3QgYW5kIGdldCB0aGUgYWN0dWFsIGluZGV4ZXMgdG8gdXNlIGZvciByb3dzXG4gIGxldCBuZXh0VG9SZW1vdmVJbmRleCA9IDA7XG4gIGxldCBuZXh0VG9SZW1vdmVTdGFydCA9IHRvUmVtb3ZlW25leHRUb1JlbW92ZUluZGV4XTtcbiAgbGV0IGNvdW50UmVtb3ZlZFNvRmFyID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChuZXh0VG9SZW1vdmVTdGFydCA9PT0gaSkge1xuICAgICAgY29uc3QgY291bnRUb1JlbW92ZSA9IHRvUmVtb3ZlWysrbmV4dFRvUmVtb3ZlSW5kZXhdO1xuXG4gICAgICAvLyBUZWxsIG1hcmtlcnMgdGhhdCB0aGVyZSB3YXMgYSBkZWxldGlvblxuICAgICAgbGluZXMub25EZWxldGVFbWl0dGVyLmZpcmUoe1xuICAgICAgICBpbmRleDogaSAtIGNvdW50UmVtb3ZlZFNvRmFyLFxuICAgICAgICBhbW91bnQ6IGNvdW50VG9SZW1vdmVcbiAgICAgIH0pO1xuXG4gICAgICBpICs9IGNvdW50VG9SZW1vdmUgLSAxO1xuICAgICAgY291bnRSZW1vdmVkU29GYXIgKz0gY291bnRUb1JlbW92ZTtcbiAgICAgIG5leHRUb1JlbW92ZVN0YXJ0ID0gdG9SZW1vdmVbKytuZXh0VG9SZW1vdmVJbmRleF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxheW91dC5wdXNoKGkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge1xuICAgIGxheW91dCxcbiAgICBjb3VudFJlbW92ZWQ6IGNvdW50UmVtb3ZlZFNvRmFyXG4gIH07XG59XG5cbi8qKlxuICogQXBwbGllcyBhIG5ldyBsYXlvdXQgdG8gdGhlIGJ1ZmZlci4gVGhpcyBlc3NlbnRpYWxseSBkb2VzIHRoZSBzYW1lIGFzIG1hbnkgc3BsaWNlIGNhbGxzIGJ1dCBpdCdzXG4gKiBkb25lIGFsbCBhdCBvbmNlIGluIGEgc2luZ2xlIGl0ZXJhdGlvbiB0aHJvdWdoIHRoZSBsaXN0IHNpbmNlIHNwbGljZSBpcyB2ZXJ5IGV4cGVuc2l2ZS5cbiAqIEBwYXJhbSBsaW5lcyBUaGUgYnVmZmVyIGxpbmVzLlxuICogQHBhcmFtIG5ld0xheW91dCBUaGUgbmV3IGxheW91dCB0byBhcHBseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0KGxpbmVzOiBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+LCBuZXdMYXlvdXQ6IG51bWJlcltdKTogdm9pZCB7XG4gIC8vIFJlY29yZCBvcmlnaW5hbCBsaW5lcyBzbyB0aGV5IGRvbid0IGdldCBvdmVycmlkZGVuIHdoZW4gd2UgcmVhcnJhbmdlIHRoZSBsaXN0XG4gIGNvbnN0IG5ld0xheW91dExpbmVzOiBCdWZmZXJMaW5lW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdMYXlvdXQubGVuZ3RoOyBpKyspIHtcbiAgICBuZXdMYXlvdXRMaW5lcy5wdXNoKGxpbmVzLmdldChuZXdMYXlvdXRbaV0pIGFzIEJ1ZmZlckxpbmUpO1xuICB9XG5cbiAgLy8gUmVhcnJhbmdlIHRoZSBsaXN0XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3TGF5b3V0TGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsaW5lcy5zZXQoaSwgbmV3TGF5b3V0TGluZXNbaV0pO1xuICB9XG4gIGxpbmVzLmxlbmd0aCA9IG5ld0xheW91dC5sZW5ndGg7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmV3IGxpbmUgbGVuZ3RocyBmb3IgYSBnaXZlbiB3cmFwcGVkIGxpbmUuIFRoZSBwdXJwb3NlIG9mIHRoaXMgZnVuY3Rpb24gaXQgdG8gcHJlLVxuICogY29tcHV0ZSB0aGUgd3JhcHBpbmcgcG9pbnRzIHNpbmNlIHdpZGUgY2hhcmFjdGVycyBtYXkgbmVlZCB0byBiZSB3cmFwcGVkIG9udG8gdGhlIGZvbGxvd2luZyBsaW5lLlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBudW1iZXJzIG9mIHdoZXJlIGVhY2ggbGluZSB3cmFwcyB0bywgdGhlIHJlc3VsdGluZyBhcnJheVxuICogd2lsbCBvbmx5IGNvbnRhaW4gdGhlIHZhbHVlcyBgbmV3Q29sc2AgKHdoZW4gdGhlIGxpbmUgZG9lcyBub3QgZW5kIHdpdGggYSB3aWRlIGNoYXJhY3RlcikgYW5kXG4gKiBgbmV3Q29scyAtIDFgICh3aGVuIHRoZSBsaW5lIGRvZXMgZW5kIHdpdGggYSB3aWRlIGNoYXJhY3RlciksIGV4Y2VwdCBmb3IgdGhlIGxhc3QgdmFsdWUgd2hpY2hcbiAqIHdpbGwgY29udGFpbiB0aGUgcmVtYWluaW5nIGl0ZW1zIHRvIGZpbGwgdGhlIGxpbmUuXG4gKlxuICogQ2FsbGluZyB0aGlzIHdpdGggYSBgbmV3Q29sc2AgdmFsdWUgb2YgYDFgIHdpbGwgbG9jayB1cC5cbiAqXG4gKiBAcGFyYW0gd3JhcHBlZExpbmVzIFRoZSB3cmFwcGVkIGxpbmVzIHRvIGV2YWx1YXRlLlxuICogQHBhcmFtIG9sZENvbHMgVGhlIGNvbHVtbnMgYmVmb3JlIHJlc2l6ZS5cbiAqIEBwYXJhbSBuZXdDb2xzIFRoZSBjb2x1bW5zIGFmdGVyIHJlc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3Rocyh3cmFwcGVkTGluZXM6IEJ1ZmZlckxpbmVbXSwgb2xkQ29sczogbnVtYmVyLCBuZXdDb2xzOiBudW1iZXIpOiBudW1iZXJbXSB7XG4gIGNvbnN0IG5ld0xpbmVMZW5ndGhzOiBudW1iZXJbXSA9IFtdO1xuICBjb25zdCBjZWxsc05lZWRlZCA9IHdyYXBwZWRMaW5lcy5tYXAoKGwsIGkpID0+IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIGksIG9sZENvbHMpKS5yZWR1Y2UoKHAsIGMpID0+IHAgKyBjKTtcblxuICAvLyBVc2Ugc3JjQ29sIGFuZCBzcmNMaW5lIHRvIGZpbmQgdGhlIG5ldyB3cmFwcGluZyBwb2ludCwgdXNlIHRoYXQgdG8gZ2V0IHRoZSBjZWxsc0F2YWlsYWJsZSBhbmRcbiAgLy8gbGluZXNOZWVkZWRcbiAgbGV0IHNyY0NvbCA9IDA7XG4gIGxldCBzcmNMaW5lID0gMDtcbiAgbGV0IGNlbGxzQXZhaWxhYmxlID0gMDtcbiAgd2hpbGUgKGNlbGxzQXZhaWxhYmxlIDwgY2VsbHNOZWVkZWQpIHtcbiAgICBpZiAoY2VsbHNOZWVkZWQgLSBjZWxsc0F2YWlsYWJsZSA8IG5ld0NvbHMpIHtcbiAgICAgIC8vIEFkZCB0aGUgZmluYWwgbGluZSBhbmQgZXhpdCB0aGUgbG9vcFxuICAgICAgbmV3TGluZUxlbmd0aHMucHVzaChjZWxsc05lZWRlZCAtIGNlbGxzQXZhaWxhYmxlKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBzcmNDb2wgKz0gbmV3Q29scztcbiAgICBjb25zdCBvbGRUcmltbWVkTGVuZ3RoID0gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgc3JjTGluZSwgb2xkQ29scyk7XG4gICAgaWYgKHNyY0NvbCA+IG9sZFRyaW1tZWRMZW5ndGgpIHtcbiAgICAgIHNyY0NvbCAtPSBvbGRUcmltbWVkTGVuZ3RoO1xuICAgICAgc3JjTGluZSsrO1xuICAgIH1cbiAgICBjb25zdCBlbmRzV2l0aFdpZGUgPSB3cmFwcGVkTGluZXNbc3JjTGluZV0uZ2V0V2lkdGgoc3JjQ29sIC0gMSkgPT09IDI7XG4gICAgaWYgKGVuZHNXaXRoV2lkZSkge1xuICAgICAgc3JjQ29sLS07XG4gICAgfVxuICAgIGNvbnN0IGxpbmVMZW5ndGggPSBlbmRzV2l0aFdpZGUgPyBuZXdDb2xzIC0gMSA6IG5ld0NvbHM7XG4gICAgbmV3TGluZUxlbmd0aHMucHVzaChsaW5lTGVuZ3RoKTtcbiAgICBjZWxsc0F2YWlsYWJsZSArPSBsaW5lTGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIG5ld0xpbmVMZW5ndGhzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKGxpbmVzOiBCdWZmZXJMaW5lW10sIGk6IG51bWJlciwgY29sczogbnVtYmVyKTogbnVtYmVyIHtcbiAgLy8gSWYgdGhpcyBpcyB0aGUgbGFzdCByb3cgaW4gdGhlIHdyYXBwZWQgbGluZSwgZ2V0IHRoZSBhY3R1YWwgdHJpbW1lZCBsZW5ndGhcbiAgaWYgKGkgPT09IGxpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICByZXR1cm4gbGluZXNbaV0uZ2V0VHJpbW1lZExlbmd0aCgpO1xuICB9XG4gIC8vIERldGVjdCB3aGV0aGVyIHRoZSBmb2xsb3dpbmcgbGluZSBzdGFydHMgd2l0aCBhIHdpZGUgY2hhcmFjdGVyIGFuZCB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IGxpbmVcbiAgLy8gaXMgbnVsbCwgaWYgc28gdGhlbiB3ZSBjYW4gYmUgcHJldHR5IHN1cmUgdGhlIG51bGwgY2hhcmFjdGVyIHNob3VsZCBiZSBleGNsdWRlZCBmcm9tIHRoZSBsaW5lXG4gIC8vIGxlbmd0aF1cbiAgY29uc3QgZW5kc0luTnVsbCA9ICEobGluZXNbaV0uaGFzQ29udGVudChjb2xzIC0gMSkpICYmIGxpbmVzW2ldLmdldFdpZHRoKGNvbHMgLSAxKSA9PT0gMTtcbiAgY29uc3QgZm9sbG93aW5nTGluZVN0YXJ0c1dpdGhXaWRlID0gbGluZXNbaSArIDFdLmdldFdpZHRoKDApID09PSAyO1xuICBpZiAoZW5kc0luTnVsbCAmJiBmb2xsb3dpbmdMaW5lU3RhcnRzV2l0aFdpZGUpIHtcbiAgICByZXR1cm4gY29scyAtIDE7XG4gIH1cbiAgcmV0dXJuIGNvbHM7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElCdWZmZXIsIElCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IElBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UsIElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuLyoqXG4gKiBUaGUgQnVmZmVyU2V0IHJlcHJlc2VudHMgdGhlIHNldCBvZiB0d28gYnVmZmVycyB1c2VkIGJ5IHh0ZXJtIHRlcm1pbmFscyAobm9ybWFsIGFuZCBhbHQpIGFuZFxuICogcHJvdmlkZXMgYWxzbyB1dGlsaXRpZXMgZm9yIHdvcmtpbmcgd2l0aCB0aGVtLlxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyU2V0IGltcGxlbWVudHMgSUJ1ZmZlclNldCB7XG4gIHByaXZhdGUgX25vcm1hbDogQnVmZmVyO1xuICBwcml2YXRlIF9hbHQ6IEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfYWN0aXZlQnVmZmVyOiBCdWZmZXI7XG5cblxuICBwcml2YXRlIF9vbkJ1ZmZlckFjdGl2YXRlID0gbmV3IEV2ZW50RW1pdHRlcjx7YWN0aXZlQnVmZmVyOiBJQnVmZmVyLCBpbmFjdGl2ZUJ1ZmZlcjogSUJ1ZmZlcn0+KCk7XG4gIHB1YmxpYyBnZXQgb25CdWZmZXJBY3RpdmF0ZSgpOiBJRXZlbnQ8e2FjdGl2ZUJ1ZmZlcjogSUJ1ZmZlciwgaW5hY3RpdmVCdWZmZXI6IElCdWZmZXJ9PiB7IHJldHVybiB0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmV2ZW50OyB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBCdWZmZXJTZXQgZm9yIHRoZSBnaXZlbiB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIF90ZXJtaW5hbCAtIFRoZSB0ZXJtaW5hbCB0aGUgQnVmZmVyU2V0IHdpbGwgYmVsb25nIHRvXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICByZWFkb25seSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIHJlYWRvbmx5IGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX25vcm1hbCA9IG5ldyBCdWZmZXIodHJ1ZSwgb3B0aW9uc1NlcnZpY2UsIGJ1ZmZlclNlcnZpY2UpO1xuICAgIHRoaXMuX25vcm1hbC5maWxsVmlld3BvcnRSb3dzKCk7XG5cbiAgICAvLyBUaGUgYWx0IGJ1ZmZlciBzaG91bGQgbmV2ZXIgaGF2ZSBzY3JvbGxiYWNrLlxuICAgIC8vIFNlZSBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQveHRlcm0vY3Rsc2Vxcy9jdGxzZXFzLmh0bWwjaDItVGhlLUFsdGVybmF0ZS1TY3JlZW4tQnVmZmVyXG4gICAgdGhpcy5fYWx0ID0gbmV3IEJ1ZmZlcihmYWxzZSwgb3B0aW9uc1NlcnZpY2UsIGJ1ZmZlclNlcnZpY2UpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9IHRoaXMuX25vcm1hbDtcblxuICAgIHRoaXMuc2V0dXBUYWJTdG9wcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFsdCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldFxuICAgKi9cbiAgcHVibGljIGdldCBhbHQoKTogQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5vcm1hbCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldFxuICAgKi9cbiAgcHVibGljIGdldCBhY3RpdmUoKTogQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXRcbiAgICovXG4gIHB1YmxpYyBnZXQgbm9ybWFsKCk6IEJ1ZmZlciB7XG4gICAgcmV0dXJuIHRoaXMuX25vcm1hbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBub3JtYWwgQnVmZmVyIG9mIHRoZSBCdWZmZXJTZXQgYXMgaXRzIGN1cnJlbnRseSBhY3RpdmUgQnVmZmVyXG4gICAqL1xuICBwdWJsaWMgYWN0aXZhdGVOb3JtYWxCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlciA9PT0gdGhpcy5fbm9ybWFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX25vcm1hbC54ID0gdGhpcy5fYWx0Lng7XG4gICAgdGhpcy5fbm9ybWFsLnkgPSB0aGlzLl9hbHQueTtcbiAgICAvLyBUaGUgYWx0IGJ1ZmZlciBzaG91bGQgYWx3YXlzIGJlIGNsZWFyZWQgd2hlbiB3ZSBzd2l0Y2ggdG8gdGhlIG5vcm1hbFxuICAgIC8vIGJ1ZmZlci4gVGhpcyBmcmVlcyB1cCBtZW1vcnkgc2luY2UgdGhlIGFsdCBidWZmZXIgc2hvdWxkIGFsd2F5cyBiZSBuZXdcbiAgICAvLyB3aGVuIGFjdGl2YXRlZC5cbiAgICB0aGlzLl9hbHQuY2xlYXIoKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9ub3JtYWw7XG4gICAgdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHtcbiAgICAgIGFjdGl2ZUJ1ZmZlcjogdGhpcy5fbm9ybWFsLFxuICAgICAgaW5hY3RpdmVCdWZmZXI6IHRoaXMuX2FsdFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFsdCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldCBhcyBpdHMgY3VycmVudGx5IGFjdGl2ZSBCdWZmZXJcbiAgICovXG4gIHB1YmxpYyBhY3RpdmF0ZUFsdEJ1ZmZlcihmaWxsQXR0cj86IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlciA9PT0gdGhpcy5fYWx0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFNpbmNlIHRoZSBhbHQgYnVmZmVyIGlzIGFsd2F5cyBjbGVhcmVkIHdoZW4gdGhlIG5vcm1hbCBidWZmZXIgaXNcbiAgICAvLyBhY3RpdmF0ZWQsIHdlIHdhbnQgdG8gZmlsbCBpdCB3aGVuIHN3aXRjaGluZyB0byBpdC5cbiAgICB0aGlzLl9hbHQuZmlsbFZpZXdwb3J0Um93cyhmaWxsQXR0cik7XG4gICAgdGhpcy5fYWx0LnggPSB0aGlzLl9ub3JtYWwueDtcbiAgICB0aGlzLl9hbHQueSA9IHRoaXMuX25vcm1hbC55O1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9IHRoaXMuX2FsdDtcbiAgICB0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe1xuICAgICAgYWN0aXZlQnVmZmVyOiB0aGlzLl9hbHQsXG4gICAgICBpbmFjdGl2ZUJ1ZmZlcjogdGhpcy5fbm9ybWFsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyBib3RoIG5vcm1hbCBhbmQgYWx0IGJ1ZmZlcnMsIGFkanVzdGluZyB0aGVpciBkYXRhIGFjY29yZGluZ2x5LlxuICAgKiBAcGFyYW0gbmV3Q29scyBUaGUgbmV3IG51bWJlciBvZiBjb2x1bW5zLlxuICAgKiBAcGFyYW0gbmV3Um93cyBUaGUgbmV3IG51bWJlciBvZiByb3dzLlxuICAgKi9cbiAgcHVibGljIHJlc2l6ZShuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX25vcm1hbC5yZXNpemUobmV3Q29scywgbmV3Um93cyk7XG4gICAgdGhpcy5fYWx0LnJlc2l6ZShuZXdDb2xzLCBuZXdSb3dzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgdGFiIHN0b3BzLlxuICAgKiBAcGFyYW0gaSBUaGUgaW5kZXggdG8gc3RhcnQgc2V0dGluZyB1cCB0YWIgc3RvcHMgZnJvbS5cbiAgICovXG4gIHB1YmxpYyBzZXR1cFRhYlN0b3BzKGk/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3JtYWwuc2V0dXBUYWJTdG9wcyhpKTtcbiAgICB0aGlzLl9hbHQuc2V0dXBUYWJTdG9wcyhpKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBDaGFyRGF0YSwgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IHN0cmluZ0Zyb21Db2RlUG9pbnQgfSBmcm9tICdjb21tb24vaW5wdXQvVGV4dERlY29kZXInO1xuaW1wb3J0IHsgQ0hBUl9EQVRBX0NIQVJfSU5ERVgsIENIQVJfREFUQV9XSURUSF9JTkRFWCwgQ0hBUl9EQVRBX0FUVFJfSU5ERVgsIENvbnRlbnQgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcblxuLyoqXG4gKiBDZWxsRGF0YSAtIHJlcHJlc2VudHMgYSBzaW5nbGUgQ2VsbCBpbiB0aGUgdGVybWluYWwgYnVmZmVyLlxuICovXG5leHBvcnQgY2xhc3MgQ2VsbERhdGEgZXh0ZW5kcyBBdHRyaWJ1dGVEYXRhIGltcGxlbWVudHMgSUNlbGxEYXRhIHtcbiAgLyoqIEhlbHBlciB0byBjcmVhdGUgQ2VsbERhdGEgZnJvbSBDaGFyRGF0YS4gKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tQ2hhckRhdGEodmFsdWU6IENoYXJEYXRhKTogQ2VsbERhdGEge1xuICAgIGNvbnN0IG9iaiA9IG5ldyBDZWxsRGF0YSgpO1xuICAgIG9iai5zZXRGcm9tQ2hhckRhdGEodmFsdWUpO1xuICAgIHJldHVybiBvYmo7XG4gIH1cbiAgLyoqIFByaW1pdGl2ZXMgZnJvbSB0ZXJtaW5hbCBidWZmZXIuICovXG4gIHB1YmxpYyBjb250ZW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZmc6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBiZzogbnVtYmVyID0gMDtcbiAgcHVibGljIGNvbWJpbmVkRGF0YTogc3RyaW5nID0gJyc7XG4gIC8qKiBXaGV0aGVyIGNlbGwgY29udGFpbnMgYSBjb21iaW5lZCBzdHJpbmcuICovXG4gIHB1YmxpYyBpc0NvbWJpbmVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSztcbiAgfVxuICAvKiogV2lkdGggb2YgdGhlIGNlbGwuICovXG4gIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVDtcbiAgfVxuICAvKiogSlMgc3RyaW5nIG9mIHRoZSBjb250ZW50LiAqL1xuICBwdWJsaWMgZ2V0Q2hhcnMoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21iaW5lZERhdGE7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKSB7XG4gICAgICByZXR1cm4gc3RyaW5nRnJvbUNvZGVQb2ludCh0aGlzLmNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8qKlxuICAgKiBDb2RlcG9pbnQgb2YgY2VsbFxuICAgKiBOb3RlIHRoaXMgcmV0dXJucyB0aGUgVVRGMzIgY29kZXBvaW50IG9mIHNpbmdsZSBjaGFycyxcbiAgICogaWYgY29udGVudCBpcyBhIGNvbWJpbmVkIHN0cmluZyBpdCByZXR1cm5zIHRoZSBjb2RlcG9pbnRcbiAgICogb2YgdGhlIGxhc3QgY2hhciBpbiBzdHJpbmcgdG8gYmUgaW4gbGluZSB3aXRoIGNvZGUgaW4gQ2hhckRhdGEuXG4gICAqICovXG4gIHB1YmxpYyBnZXRDb2RlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLmlzQ29tYmluZWQoKSlcbiAgICAgID8gdGhpcy5jb21iaW5lZERhdGEuY2hhckNvZGVBdCh0aGlzLmNvbWJpbmVkRGF0YS5sZW5ndGggLSAxKVxuICAgICAgOiB0aGlzLmNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICB9XG4gIC8qKiBTZXQgZGF0YSBmcm9tIENoYXJEYXRhICovXG4gIHB1YmxpYyBzZXRGcm9tQ2hhckRhdGEodmFsdWU6IENoYXJEYXRhKTogdm9pZCB7XG4gICAgdGhpcy5mZyA9IHZhbHVlW0NIQVJfREFUQV9BVFRSX0lOREVYXTtcbiAgICB0aGlzLmJnID0gMDtcbiAgICBsZXQgY29tYmluZWQgPSBmYWxzZTtcbiAgICAvLyBzdXJyb2dhdGVzIGFuZCBjb21iaW5lZCBzdHJpbmdzIG5lZWQgc3BlY2lhbCB0cmVhdG1lbnRcbiAgICBpZiAodmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aCA+IDIpIHtcbiAgICAgIGNvbWJpbmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aCA9PT0gMikge1xuICAgICAgY29uc3QgY29kZSA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApO1xuICAgICAgLy8gaWYgdGhlIDItY2hhciBzdHJpbmcgaXMgYSBzdXJyb2dhdGUgY3JlYXRlIHNpbmdsZSBjb2RlcG9pbnRcbiAgICAgIC8vIGV2ZXJ5dGhpbmcgZWxzZSBpcyBjb21iaW5lZFxuICAgICAgaWYgKDB4RDgwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEQkZGKSB7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDEpO1xuICAgICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgICAgdGhpcy5jb250ZW50ID0gKChjb2RlIC0gMHhEODAwKSAqIDB4NDAwICsgc2Vjb25kIC0gMHhEQzAwICsgMHgxMDAwMCkgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb21iaW5lZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb21iaW5lZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5jb250ZW50ID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCkgfCAodmFsdWVbQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSA8PCBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICB9XG4gICAgaWYgKGNvbWJpbmVkKSB7XG4gICAgICB0aGlzLmNvbWJpbmVkRGF0YSA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXTtcbiAgICAgIHRoaXMuY29udGVudCA9IENvbnRlbnQuSVNfQ09NQklORURfTUFTSyB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIH1cbiAgfVxuICAvKiogR2V0IGRhdGEgYXMgQ2hhckRhdGEuICovXG4gIHB1YmxpYyBnZXRBc0NoYXJEYXRhKCk6IENoYXJEYXRhIHtcbiAgICByZXR1cm4gW3RoaXMuZmcsIHRoaXMuZ2V0Q2hhcnMoKSwgdGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldENvZGUoKV07XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09MT1IgPSAyNTY7XG5leHBvcnQgY29uc3QgREVGQVVMVF9BVFRSID0gKDAgPDwgMTgpIHwgKERFRkFVTFRfQ09MT1IgPDwgOSkgfCAoMjU2IDw8IDApO1xuXG5leHBvcnQgY29uc3QgQ0hBUl9EQVRBX0FUVFJfSU5ERVggPSAwO1xuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9DSEFSX0lOREVYID0gMTtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfV0lEVEhfSU5ERVggPSAyO1xuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9DT0RFX0lOREVYID0gMztcblxuLyoqXG4gKiBOdWxsIGNlbGwgLSBhIHJlYWwgZW1wdHkgY2VsbCAoY29udGFpbmluZyBub3RoaW5nKS5cbiAqIE5vdGUgdGhhdCBjb2RlIHNob3VsZCBhbHdheXMgYmUgMCBmb3IgYSBudWxsIGNlbGwgYXNcbiAqIHNldmVyYWwgdGVzdCBjb25kaXRpb24gb2YgdGhlIGJ1ZmZlciBsaW5lIHJlbHkgb24gdGhpcy5cbiAqL1xuZXhwb3J0IGNvbnN0IE5VTExfQ0VMTF9DSEFSID0gJyc7XG5leHBvcnQgY29uc3QgTlVMTF9DRUxMX1dJRFRIID0gMTtcbmV4cG9ydCBjb25zdCBOVUxMX0NFTExfQ09ERSA9IDA7XG5cbi8qKlxuICogV2hpdGVzcGFjZSBjZWxsLlxuICogVGhpcyBpcyBtZWFudCBhcyBhIHJlcGxhY2VtZW50IGZvciBlbXB0eSBjZWxscyB3aGVuIG5lZWRlZFxuICogZHVyaW5nIHJlbmRlcmluZyBsaW5lcyB0byBwcmVzZXJ2ZSBjb3JyZWN0IGFsaWdtZW50LlxuICovXG5leHBvcnQgY29uc3QgV0hJVEVTUEFDRV9DRUxMX0NIQVIgPSAnICc7XG5leHBvcnQgY29uc3QgV0hJVEVTUEFDRV9DRUxMX1dJRFRIID0gMTtcbmV4cG9ydCBjb25zdCBXSElURVNQQUNFX0NFTExfQ09ERSA9IDMyO1xuXG4vKipcbiAqIEJpdG1hc2tzIGZvciBhY2Nlc3NpbmcgZGF0YSBpbiBgY29udGVudGAuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIENvbnRlbnQge1xuICAvKipcbiAgICogYml0IDEuLjIxICAgIGNvZGVwb2ludCwgbWF4IGFsbG93ZWQgaW4gVVRGMzIgaXMgMHgxMEZGRkYgKDIxIGJpdHMgdGFrZW4pXG4gICAqICAgICAgICAgICAgICByZWFkOiAgIGBjb2RlcG9pbnQgPSBjb250ZW50ICYgQ29udGVudC5jb2RlcG9pbnRNYXNrO2BcbiAgICogICAgICAgICAgICAgIHdyaXRlOiAgYGNvbnRlbnQgfD0gY29kZXBvaW50ICYgQ29udGVudC5jb2RlcG9pbnRNYXNrO2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgc2hvcnRjdXQgaWYgcHJlY29uZGl0aW9uIGBjb2RlcG9pbnQgPD0gMHgxMEZGRkZgIGlzIG1ldDpcbiAgICogICAgICAgICAgICAgICAgICAgICAgYGNvbnRlbnQgfD0gY29kZXBvaW50O2BcbiAgICovXG4gIENPREVQT0lOVF9NQVNLID0gMHgxRkZGRkYsXG5cbiAgLyoqXG4gICAqIGJpdCAyMiAgICAgICBmbGFnIGluZGljYXRpb24gd2hldGhlciBhIGNlbGwgY29udGFpbnMgY29tYmluZWQgY29udGVudFxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgaXNDb21iaW5lZCA9IGNvbnRlbnQgJiBDb250ZW50LmlzQ29tYmluZWQ7YFxuICAgKiAgICAgICAgICAgICAgc2V0OiAgICBgY29udGVudCB8PSBDb250ZW50LmlzQ29tYmluZWQ7YFxuICAgKiAgICAgICAgICAgICAgY2xlYXI6ICBgY29udGVudCAmPSB+Q29udGVudC5pc0NvbWJpbmVkO2BcbiAgICovXG4gIElTX0NPTUJJTkVEX01BU0sgPSAweDIwMDAwMCwgIC8vIDEgPDwgMjFcblxuICAvKipcbiAgICogYml0IDEuLjIyICAgIG1hc2sgdG8gY2hlY2sgd2hldGhlciBhIGNlbGwgY29udGFpbnMgYW55IHN0cmluZyBkYXRhXG4gICAqICAgICAgICAgICAgICB3ZSBuZWVkIHRvIGNoZWNrIGZvciBjb2RlcG9pbnQgYW5kIGlzQ29tYmluZWQgYml0cyB0byBzZWVcbiAgICogICAgICAgICAgICAgIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGFueXRoaW5nXG4gICAqICAgICAgICAgICAgICByZWFkOiAgIGBpc0VtcHR5ID0gIShjb250ZW50ICYgQ29udGVudC5oYXNDb250ZW50KWBcbiAgICovXG4gIEhBU19DT05URU5UX01BU0sgPSAweDNGRkZGRixcblxuICAvKipcbiAgICogYml0IDIzLi4yNCAgIHdjd2lkdGggdmFsdWUgb2YgY2VsbCwgdGFrZXMgMiBiaXRzIChyYW5nZXMgZnJvbSAwLi4yKVxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgd2lkdGggPSAoY29udGVudCAmIENvbnRlbnQud2lkdGhNYXNrKSA+PiBDb250ZW50LndpZHRoU2hpZnQ7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgaGFzV2lkdGggPSBjb250ZW50ICYgQ29udGVudC53aWR0aE1hc2s7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBhcyBsb25nIGFzIHdjd2lkdGggaXMgaGlnaGVzdCB2YWx1ZSBpbiBgY29udGVudGA6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGB3aWR0aCA9IGNvbnRlbnQgPj4gQ29udGVudC53aWR0aFNoaWZ0O2BcbiAgICogICAgICAgICAgICAgIHdyaXRlOiAgYGNvbnRlbnQgfD0gKHdpZHRoIDw8IENvbnRlbnQud2lkdGhTaGlmdCkgJiBDb250ZW50LndpZHRoTWFzaztgXG4gICAqICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0IGlmIHByZWNvbmRpdGlvbiBgMCA8PSB3aWR0aCA8PSAzYCBpcyBtZXQ6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb250ZW50IHw9IHdpZHRoIDw8IENvbnRlbnQud2lkdGhTaGlmdDtgXG4gICAqL1xuICBXSURUSF9NQVNLID0gMHhDMDAwMDAsICAgLy8gMyA8PCAyMlxuICBXSURUSF9TSElGVCA9IDIyXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEF0dHJpYnV0ZXMge1xuICAvKipcbiAgICogYml0IDEuLjggICAgIGJsdWUgaW4gUkdCLCBjb2xvciBpbiBQMjU2IGFuZCBQMTZcbiAgICovXG4gIEJMVUVfTUFTSyA9IDB4RkYsXG4gIEJMVUVfU0hJRlQgPSAwLFxuICBQQ09MT1JfTUFTSyA9IDB4RkYsXG4gIFBDT0xPUl9TSElGVCA9IDAsXG5cbiAgLyoqXG4gICAqIGJpdCA5Li4xNiAgICBncmVlbiBpbiBSR0JcbiAgICovXG4gIEdSRUVOX01BU0sgPSAweEZGMDAsXG4gIEdSRUVOX1NISUZUID0gOCxcblxuICAvKipcbiAgICogYml0IDE3Li4yNCAgIHJlZCBpbiBSR0JcbiAgICovXG4gIFJFRF9NQVNLID0gMHhGRjAwMDAsXG4gIFJFRF9TSElGVCA9IDE2LFxuXG4gIC8qKlxuICAgKiBiaXQgMjUuLjI2ICAgY29sb3IgbW9kZTogREVGQVVMVCAoMCkgfCBQMTYgKDEpIHwgUDI1NiAoMikgfCBSR0IgKDMpXG4gICAqL1xuICBDTV9NQVNLID0gMHgzMDAwMDAwLFxuICBDTV9ERUZBVUxUID0gMCxcbiAgQ01fUDE2ID0gMHgxMDAwMDAwLFxuICBDTV9QMjU2ID0gMHgyMDAwMDAwLFxuICBDTV9SR0IgPSAweDMwMDAwMDAsXG5cbiAgLyoqXG4gICAqIGJpdCAxLi4yNCAgUkdCIHJvb21cbiAgICovXG4gIFJHQl9NQVNLID0gMHhGRkZGRkZcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gRmdGbGFncyB7XG4gIC8qKlxuICAgKiBiaXQgMjcuLjMxICgzMnRoIGJpdCB1bnVzZWQpXG4gICAqL1xuICBJTlZFUlNFID0gMHg0MDAwMDAwLFxuICBCT0xEID0gMHg4MDAwMDAwLFxuICBVTkRFUkxJTkUgPSAweDEwMDAwMDAwLFxuICBCTElOSyA9IDB4MjAwMDAwMDAsXG4gIElOVklTSUJMRSA9IDB4NDAwMDAwMDBcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gQmdGbGFncyB7XG4gIC8qKlxuICAgKiBiaXQgMjcuLjMyICh1cHBlciA0IHVudXNlZClcbiAgICovXG4gIElUQUxJQyA9IDB4NDAwMDAwMCxcbiAgRElNID0gMHg4MDAwMDAwXG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJTWFya2VyIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIE1hcmtlciBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJTWFya2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgX25leHRJZCA9IDE7XG5cbiAgcHJpdmF0ZSBfaWQ6IG51bWJlciA9IE1hcmtlci5fbmV4dElkKys7XG4gIHB1YmxpYyBpc0Rpc3Bvc2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGdldCBpZCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5faWQ7IH1cblxuICBwcml2YXRlIF9vbkRpc3Bvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIHB1YmxpYyBnZXQgb25EaXNwb3NlKCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkRpc3Bvc2UuZXZlbnQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgbGluZTogbnVtYmVyXG4gICkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgLy8gRW1pdCBiZWZvcmUgc3VwZXIuZGlzcG9zZSBzdWNoIHRoYXQgZGlzcG9zZSBsaXN0ZW5lcnMgZ2V0IGEgY2hhbmdlIHRvIHJlYWN0XG4gICAgdGhpcy5fb25EaXNwb3NlLmZpcmUoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbi8qKlxuICogVGhlIGNoYXJhY3RlciBzZXRzIHN1cHBvcnRlZCBieSB0aGUgdGVybWluYWwuIFRoZXNlIGVuYWJsZSBzZXZlcmFsIGxhbmd1YWdlc1xuICogdG8gYmUgcmVwcmVzZW50ZWQgd2l0aGluIHRoZSB0ZXJtaW5hbCB3aXRoIG9ubHkgOC1iaXQgZW5jb2RpbmcuIFNlZSBJU08gMjAyMlxuICogZm9yIGEgZGlzY3Vzc2lvbiBvbiBjaGFyYWN0ZXIgc2V0cy4gT25seSBWVDEwMCBjaGFyYWN0ZXIgc2V0cyBhcmUgc3VwcG9ydGVkLlxuICovXG5leHBvcnQgY29uc3QgQ0hBUlNFVFM6IHsgW2tleTogc3RyaW5nXTogSUNoYXJzZXQgfCBudWxsIH0gPSB7fTtcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjaGFyYWN0ZXIgc2V0LCBVUy5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ0hBUlNFVDogSUNoYXJzZXQgfCBudWxsID0gQ0hBUlNFVFNbJ0InXTtcblxuLyoqXG4gKiBERUMgU3BlY2lhbCBDaGFyYWN0ZXIgYW5kIExpbmUgRHJhd2luZyBTZXQuXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDEwMi11Zy90YWJsZTUtMTMuaHRtbFxuICogQSBsb3Qgb2YgY3Vyc2VzIGFwcHMgdXNlIHRoaXMgaWYgdGhleSBzZWUgVEVSTT14dGVybS5cbiAqIHRlc3Rpbmc6IGVjaG8gLWUgJ1xcZSgwYVxcZShCJ1xuICogVGhlIHh0ZXJtIG91dHB1dCBzb21ldGltZXMgc2VlbXMgdG8gY29uZmxpY3Qgd2l0aCB0aGVcbiAqIHJlZmVyZW5jZSBhYm92ZS4geHRlcm0gc2VlbXMgaW4gbGluZSB3aXRoIHRoZSByZWZlcmVuY2VcbiAqIHdoZW4gcnVubmluZyB2dHRlc3QgaG93ZXZlci5cbiAqIFRoZSB0YWJsZSBiZWxvdyBub3cgdXNlcyB4dGVybSdzIG91dHB1dCBmcm9tIHZ0dGVzdC5cbiAqL1xuQ0hBUlNFVFNbJzAnXSA9IHtcbiAgJ2AnOiAnXFx1MjVjNicsIC8vICfil4YnXG4gICdhJzogJ1xcdTI1OTInLCAvLyAn4paSJ1xuICAnYic6ICdcXHUwMDA5JywgLy8gJ1xcdCdcbiAgJ2MnOiAnXFx1MDAwYycsIC8vICdcXGYnXG4gICdkJzogJ1xcdTAwMGQnLCAvLyAnXFxyJ1xuICAnZSc6ICdcXHUwMDBhJywgLy8gJ1xcbidcbiAgJ2YnOiAnXFx1MDBiMCcsIC8vICfCsCdcbiAgJ2cnOiAnXFx1MDBiMScsIC8vICfCsSdcbiAgJ2gnOiAnXFx1MjQyNCcsIC8vICdcXHUyNDI0JyAoTkwpXG4gICdpJzogJ1xcdTAwMGInLCAvLyAnXFx2J1xuICAnaic6ICdcXHUyNTE4JywgLy8gJ+KUmCdcbiAgJ2snOiAnXFx1MjUxMCcsIC8vICfilJAnXG4gICdsJzogJ1xcdTI1MGMnLCAvLyAn4pSMJ1xuICAnbSc6ICdcXHUyNTE0JywgLy8gJ+KUlCdcbiAgJ24nOiAnXFx1MjUzYycsIC8vICfilLwnXG4gICdvJzogJ1xcdTIzYmEnLCAvLyAn4o66J1xuICAncCc6ICdcXHUyM2JiJywgLy8gJ+KOuydcbiAgJ3EnOiAnXFx1MjUwMCcsIC8vICfilIAnXG4gICdyJzogJ1xcdTIzYmMnLCAvLyAn4o68J1xuICAncyc6ICdcXHUyM2JkJywgLy8gJ+KOvSdcbiAgJ3QnOiAnXFx1MjUxYycsIC8vICfilJwnXG4gICd1JzogJ1xcdTI1MjQnLCAvLyAn4pSkJ1xuICAndic6ICdcXHUyNTM0JywgLy8gJ+KUtCdcbiAgJ3cnOiAnXFx1MjUyYycsIC8vICfilKwnXG4gICd4JzogJ1xcdTI1MDInLCAvLyAn4pSCJ1xuICAneSc6ICdcXHUyMjY0JywgLy8gJ+KJpCdcbiAgJ3onOiAnXFx1MjI2NScsIC8vICfiiaUnXG4gICd7JzogJ1xcdTAzYzAnLCAvLyAnz4AnXG4gICd8JzogJ1xcdTIyNjAnLCAvLyAn4omgJ1xuICAnfSc6ICdcXHUwMGEzJywgLy8gJ8KjJ1xuICAnfic6ICdcXHUwMGI3JyAgLy8gJ8K3J1xufTtcblxuLyoqXG4gKiBCcml0aXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoQVxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTUuaHRtbFxuICovXG5DSEFSU0VUU1snQSddID0ge1xuICAnIyc6ICfCoydcbn07XG5cbi8qKlxuICogVW5pdGVkIFN0YXRlcyBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEJcbiAqL1xuQ0hBUlNFVFNbJ0InXSA9IG51bGw7XG5cbi8qKlxuICogRHV0Y2ggY2hhcmFjdGVyIHNldFxuICogRVNDICg0XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItNi5odG1sXG4gKi9cbkNIQVJTRVRTWyc0J10gPSB7XG4gICcjJzogJ8KjJyxcbiAgJ0AnOiAnwr4nLFxuICAnWyc6ICdpaicsXG4gICdcXFxcJzogJ8K9JyxcbiAgJ10nOiAnfCcsXG4gICd7JzogJ8KoJyxcbiAgJ3wnOiAnZicsXG4gICd9JzogJ8K8JyxcbiAgJ34nOiAnwrQnXG59O1xuXG4vKipcbiAqIEZpbm5pc2ggY2hhcmFjdGVyIHNldFxuICogRVNDIChDIG9yIEVTQyAoNVxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTcuaHRtbFxuICovXG5DSEFSU0VUU1snQyddID1cbkNIQVJTRVRTWyc1J10gPSB7XG4gICdbJzogJ8OEJyxcbiAgJ1xcXFwnOiAnw5YnLFxuICAnXSc6ICfDhScsXG4gICdeJzogJ8OcJyxcbiAgJ2AnOiAnw6knLFxuICAneyc6ICfDpCcsXG4gICd8JzogJ8O2JyxcbiAgJ30nOiAnw6UnLFxuICAnfic6ICfDvCdcbn07XG5cbi8qKlxuICogRnJlbmNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoUlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTguaHRtbFxuICovXG5DSEFSU0VUU1snUiddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8OgJyxcbiAgJ1snOiAnwrAnLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8KnJyxcbiAgJ3snOiAnw6knLFxuICAnfCc6ICfDuScsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnwqgnXG59O1xuXG4vKipcbiAqIEZyZW5jaCBDYW5hZGlhbiBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi05Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1EnXSA9IHtcbiAgJ0AnOiAnw6AnLFxuICAnWyc6ICfDoicsXG4gICdcXFxcJzogJ8OnJyxcbiAgJ10nOiAnw6onLFxuICAnXic6ICfDricsXG4gICdgJzogJ8O0JyxcbiAgJ3snOiAnw6knLFxuICAnfCc6ICfDuScsXG4gICd9JzogJ8OoJyxcbiAgJ34nOiAnw7snXG59O1xuXG4vKipcbiAqIEdlcm1hbiBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEtcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xMC5odG1sXG4gKi9cbkNIQVJTRVRTWydLJ10gPSB7XG4gICdAJzogJ8KnJyxcbiAgJ1snOiAnw4QnLFxuICAnXFxcXCc6ICfDlicsXG4gICddJzogJ8OcJyxcbiAgJ3snOiAnw6QnLFxuICAnfCc6ICfDticsXG4gICd9JzogJ8O8JyxcbiAgJ34nOiAnw58nXG59O1xuXG4vKipcbiAqIEl0YWxpYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChZXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTEuaHRtbFxuICovXG5DSEFSU0VUU1snWSddID0ge1xuICAnIyc6ICfCoycsXG4gICdAJzogJ8KnJyxcbiAgJ1snOiAnwrAnLFxuICAnXFxcXCc6ICfDpycsXG4gICddJzogJ8OpJyxcbiAgJ2AnOiAnw7knLFxuICAneyc6ICfDoCcsXG4gICd8JzogJ8OyJyxcbiAgJ30nOiAnw6gnLFxuICAnfic6ICfDrCdcbn07XG5cbi8qKlxuICogTm9yd2VnaWFuL0RhbmlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEUgb3IgRVNDICg2XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTIuaHRtbFxuICovXG5DSEFSU0VUU1snRSddID1cbkNIQVJTRVRTWyc2J10gPSB7XG4gICdAJzogJ8OEJyxcbiAgJ1snOiAnw4YnLFxuICAnXFxcXCc6ICfDmCcsXG4gICddJzogJ8OFJyxcbiAgJ14nOiAnw5wnLFxuICAnYCc6ICfDpCcsXG4gICd7JzogJ8OmJyxcbiAgJ3wnOiAnw7gnLFxuICAnfSc6ICfDpScsXG4gICd+JzogJ8O8J1xufTtcblxuLyoqXG4gKiBTcGFuaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoWlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTEzLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1onXSA9IHtcbiAgJyMnOiAnwqMnLFxuICAnQCc6ICfCpycsXG4gICdbJzogJ8KhJyxcbiAgJ1xcXFwnOiAnw5EnLFxuICAnXSc6ICfCvycsXG4gICd7JzogJ8KwJyxcbiAgJ3wnOiAnw7EnLFxuICAnfSc6ICfDpydcbn07XG5cbi8qKlxuICogU3dlZGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEggb3IgRVNDICg3XG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItMTQuaHRtbFxuICovXG5DSEFSU0VUU1snSCddID1cbkNIQVJTRVRTWyc3J10gPSB7XG4gICdAJzogJ8OJJyxcbiAgJ1snOiAnw4QnLFxuICAnXFxcXCc6ICfDlicsXG4gICddJzogJ8OFJyxcbiAgJ14nOiAnw5wnLFxuICAnYCc6ICfDqScsXG4gICd7JzogJ8OkJyxcbiAgJ3wnOiAnw7YnLFxuICAnfSc6ICfDpScsXG4gICd+JzogJ8O8J1xufTtcblxuLyoqXG4gKiBTd2lzcyBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKD1cbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xNS5odG1sXG4gKi9cbkNIQVJTRVRTWyc9J10gPSB7XG4gICcjJzogJ8O5JyxcbiAgJ0AnOiAnw6AnLFxuICAnWyc6ICfDqScsXG4gICdcXFxcJzogJ8OnJyxcbiAgJ10nOiAnw6onLFxuICAnXic6ICfDricsXG4gICdfJzogJ8OoJyxcbiAgJ2AnOiAnw7QnLFxuICAneyc6ICfDpCcsXG4gICd8JzogJ8O2JyxcbiAgJ30nOiAnw7wnLFxuICAnfic6ICfDuydcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogQzAgY29udHJvbCBjb2Rlc1xuICogU2VlID0gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQzBfYW5kX0MxX2NvbnRyb2xfY29kZXNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBDMCB7XG4gIC8qKiBOdWxsIChDYXJldCA9IF5ALCBDID0gXFwwKSAqL1xuICBleHBvcnQgY29uc3QgTlVMID0gJ1xceDAwJztcbiAgLyoqIFN0YXJ0IG9mIEhlYWRpbmcgKENhcmV0ID0gXkEpICovXG4gIGV4cG9ydCBjb25zdCBTT0ggPSAnXFx4MDEnO1xuICAvKiogU3RhcnQgb2YgVGV4dCAoQ2FyZXQgPSBeQikgKi9cbiAgZXhwb3J0IGNvbnN0IFNUWCA9ICdcXHgwMic7XG4gIC8qKiBFbmQgb2YgVGV4dCAoQ2FyZXQgPSBeQykgKi9cbiAgZXhwb3J0IGNvbnN0IEVUWCA9ICdcXHgwMyc7XG4gIC8qKiBFbmQgb2YgVHJhbnNtaXNzaW9uIChDYXJldCA9IF5EKSAqL1xuICBleHBvcnQgY29uc3QgRU9UID0gJ1xceDA0JztcbiAgLyoqIEVucXVpcnkgKENhcmV0ID0gXkUpICovXG4gIGV4cG9ydCBjb25zdCBFTlEgPSAnXFx4MDUnO1xuICAvKiogQWNrbm93bGVkZ2UgKENhcmV0ID0gXkYpICovXG4gIGV4cG9ydCBjb25zdCBBQ0sgPSAnXFx4MDYnO1xuICAvKiogQmVsbCAoQ2FyZXQgPSBeRywgQyA9IFxcYSkgKi9cbiAgZXhwb3J0IGNvbnN0IEJFTCA9ICdcXHgwNyc7XG4gIC8qKiBCYWNrc3BhY2UgKENhcmV0ID0gXkgsIEMgPSBcXGIpICovXG4gIGV4cG9ydCBjb25zdCBCUyAgPSAnXFx4MDgnO1xuICAvKiogQ2hhcmFjdGVyIFRhYnVsYXRpb24sIEhvcml6b250YWwgVGFidWxhdGlvbiAoQ2FyZXQgPSBeSSwgQyA9IFxcdCkgKi9cbiAgZXhwb3J0IGNvbnN0IEhUICA9ICdcXHgwOSc7XG4gIC8qKiBMaW5lIEZlZWQgKENhcmV0ID0gXkosIEMgPSBcXG4pICovXG4gIGV4cG9ydCBjb25zdCBMRiAgPSAnXFx4MGEnO1xuICAvKiogTGluZSBUYWJ1bGF0aW9uLCBWZXJ0aWNhbCBUYWJ1bGF0aW9uIChDYXJldCA9IF5LLCBDID0gXFx2KSAqL1xuICBleHBvcnQgY29uc3QgVlQgID0gJ1xceDBiJztcbiAgLyoqIEZvcm0gRmVlZCAoQ2FyZXQgPSBeTCwgQyA9IFxcZikgKi9cbiAgZXhwb3J0IGNvbnN0IEZGICA9ICdcXHgwYyc7XG4gIC8qKiBDYXJyaWFnZSBSZXR1cm4gKENhcmV0ID0gXk0sIEMgPSBcXHIpICovXG4gIGV4cG9ydCBjb25zdCBDUiAgPSAnXFx4MGQnO1xuICAvKiogU2hpZnQgT3V0IChDYXJldCA9IF5OKSAqL1xuICBleHBvcnQgY29uc3QgU08gID0gJ1xceDBlJztcbiAgLyoqIFNoaWZ0IEluIChDYXJldCA9IF5PKSAqL1xuICBleHBvcnQgY29uc3QgU0kgID0gJ1xceDBmJztcbiAgLyoqIERhdGEgTGluayBFc2NhcGUgKENhcmV0ID0gXlApICovXG4gIGV4cG9ydCBjb25zdCBETEUgPSAnXFx4MTAnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgT25lIChYT04pIChDYXJldCA9IF5RKSAqL1xuICBleHBvcnQgY29uc3QgREMxID0gJ1xceDExJztcbiAgLyoqIERldmljZSBDb250cm9sIFR3byAoQ2FyZXQgPSBeUikgKi9cbiAgZXhwb3J0IGNvbnN0IERDMiA9ICdcXHgxMic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBUaHJlZSAoWE9GRikgKENhcmV0ID0gXlMpICovXG4gIGV4cG9ydCBjb25zdCBEQzMgPSAnXFx4MTMnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgRm91ciAoQ2FyZXQgPSBeVCkgKi9cbiAgZXhwb3J0IGNvbnN0IERDNCA9ICdcXHgxNCc7XG4gIC8qKiBOZWdhdGl2ZSBBY2tub3dsZWRnZSAoQ2FyZXQgPSBeVSkgKi9cbiAgZXhwb3J0IGNvbnN0IE5BSyA9ICdcXHgxNSc7XG4gIC8qKiBTeW5jaHJvbm91cyBJZGxlIChDYXJldCA9IF5WKSAqL1xuICBleHBvcnQgY29uc3QgU1lOID0gJ1xceDE2JztcbiAgLyoqIEVuZCBvZiBUcmFuc21pc3Npb24gQmxvY2sgKENhcmV0ID0gXlcpICovXG4gIGV4cG9ydCBjb25zdCBFVEIgPSAnXFx4MTcnO1xuICAvKiogQ2FuY2VsIChDYXJldCA9IF5YKSAqL1xuICBleHBvcnQgY29uc3QgQ0FOID0gJ1xceDE4JztcbiAgLyoqIEVuZCBvZiBNZWRpdW0gKENhcmV0ID0gXlkpICovXG4gIGV4cG9ydCBjb25zdCBFTSAgPSAnXFx4MTknO1xuICAvKiogU3Vic3RpdHV0ZSAoQ2FyZXQgPSBeWikgKi9cbiAgZXhwb3J0IGNvbnN0IFNVQiA9ICdcXHgxYSc7XG4gIC8qKiBFc2NhcGUgKENhcmV0ID0gXlssIEMgPSBcXGUpICovXG4gIGV4cG9ydCBjb25zdCBFU0MgPSAnXFx4MWInO1xuICAvKiogRmlsZSBTZXBhcmF0b3IgKENhcmV0ID0gXlxcKSAqL1xuICBleHBvcnQgY29uc3QgRlMgID0gJ1xceDFjJztcbiAgLyoqIEdyb3VwIFNlcGFyYXRvciAoQ2FyZXQgPSBeXSkgKi9cbiAgZXhwb3J0IGNvbnN0IEdTICA9ICdcXHgxZCc7XG4gIC8qKiBSZWNvcmQgU2VwYXJhdG9yIChDYXJldCA9IF5eKSAqL1xuICBleHBvcnQgY29uc3QgUlMgID0gJ1xceDFlJztcbiAgLyoqIFVuaXQgU2VwYXJhdG9yIChDYXJldCA9IF5fKSAqL1xuICBleHBvcnQgY29uc3QgVVMgID0gJ1xceDFmJztcbiAgLyoqIFNwYWNlICovXG4gIGV4cG9ydCBjb25zdCBTUCAgPSAnXFx4MjAnO1xuICAvKiogRGVsZXRlIChDYXJldCA9IF4/KSAqL1xuICBleHBvcnQgY29uc3QgREVMID0gJ1xceDdmJztcbn1cblxuLyoqXG4gKiBDMSBjb250cm9sIGNvZGVzXG4gKiBTZWUgPSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DMF9hbmRfQzFfY29udHJvbF9jb2Rlc1xuICovXG5leHBvcnQgbmFtZXNwYWNlIEMxIHtcbiAgLyoqIHBhZGRpbmcgY2hhcmFjdGVyICovXG4gIGV4cG9ydCBjb25zdCBQQUQgPSAnXFx4ODAnO1xuICAvKiogSGlnaCBPY3RldCBQcmVzZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhPUCA9ICdcXHg4MSc7XG4gIC8qKiBCcmVhayBQZXJtaXR0ZWQgSGVyZSAqL1xuICBleHBvcnQgY29uc3QgQlBIID0gJ1xceDgyJztcbiAgLyoqIE5vIEJyZWFrIEhlcmUgKi9cbiAgZXhwb3J0IGNvbnN0IE5CSCA9ICdcXHg4Myc7XG4gIC8qKiBJbmRleCAqL1xuICBleHBvcnQgY29uc3QgSU5EID0gJ1xceDg0JztcbiAgLyoqIE5leHQgTGluZSAqL1xuICBleHBvcnQgY29uc3QgTkVMID0gJ1xceDg1JztcbiAgLyoqIFN0YXJ0IG9mIFNlbGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNTQSA9ICdcXHg4Nic7XG4gIC8qKiBFbmQgb2YgU2VsZWN0ZWQgQXJlYSAqL1xuICBleHBvcnQgY29uc3QgRVNBID0gJ1xceDg3JztcbiAgLyoqIEhvcml6b250YWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhUUyA9ICdcXHg4OCc7XG4gIC8qKiBIb3Jpem9udGFsIFRhYnVsYXRpb24gV2l0aCBKdXN0aWZpY2F0aW9uICovXG4gIGV4cG9ydCBjb25zdCBIVEogPSAnXFx4ODknO1xuICAvKiogVmVydGljYWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IFZUUyA9ICdcXHg4YSc7XG4gIC8qKiBQYXJ0aWFsIExpbmUgRG93biAqL1xuICBleHBvcnQgY29uc3QgUExEID0gJ1xceDhiJztcbiAgLyoqIFBhcnRpYWwgTGluZSBVcCAqL1xuICBleHBvcnQgY29uc3QgUExVID0gJ1xceDhjJztcbiAgLyoqIFJldmVyc2UgSW5kZXggKi9cbiAgZXhwb3J0IGNvbnN0IFJJID0gJ1xceDhkJztcbiAgLyoqIFNpbmdsZS1TaGlmdCAyICovXG4gIGV4cG9ydCBjb25zdCBTUzIgPSAnXFx4OGUnO1xuICAvKiogU2luZ2xlLVNoaWZ0IDMgKi9cbiAgZXhwb3J0IGNvbnN0IFNTMyA9ICdcXHg4Zic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IERDUyA9ICdcXHg5MCc7XG4gIC8qKiBQcml2YXRlIFVzZSAxICovXG4gIGV4cG9ydCBjb25zdCBQVTEgPSAnXFx4OTEnO1xuICAvKiogUHJpdmF0ZSBVc2UgMiAqL1xuICBleHBvcnQgY29uc3QgUFUyID0gJ1xceDkyJztcbiAgLyoqIFNldCBUcmFuc21pdCBTdGF0ZSAqL1xuICBleHBvcnQgY29uc3QgU1RTID0gJ1xceDkzJztcbiAgLyoqIERlc3RydWN0aXZlIGJhY2tzcGFjZSwgaW50ZW5kZWQgdG8gZWxpbWluYXRlIGFtYmlndWl0eSBhYm91dCBtZWFuaW5nIG9mIEJTLiAqL1xuICBleHBvcnQgY29uc3QgQ0NIID0gJ1xceDk0JztcbiAgLyoqIE1lc3NhZ2UgV2FpdGluZyAqL1xuICBleHBvcnQgY29uc3QgTVcgPSAnXFx4OTUnO1xuICAvKiogU3RhcnQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNQQSA9ICdcXHg5Nic7XG4gIC8qKiBFbmQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IEVQQSA9ICdcXHg5Nyc7XG4gIC8qKiBTdGFydCBvZiBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IFNPUyA9ICdcXHg5OCc7XG4gIC8qKiBTaW5nbGUgR3JhcGhpYyBDaGFyYWN0ZXIgSW50cm9kdWNlciAqL1xuICBleHBvcnQgY29uc3QgU0dDSSA9ICdcXHg5OSc7XG4gIC8qKiBTaW5nbGUgQ2hhcmFjdGVyIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IFNDSSA9ICdcXHg5YSc7XG4gIC8qKiBDb250cm9sIFNlcXVlbmNlIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IENTSSA9ICdcXHg5Yic7XG4gIC8qKiBTdHJpbmcgVGVybWluYXRvciAqL1xuICBleHBvcnQgY29uc3QgU1QgPSAnXFx4OWMnO1xuICAvKiogT3BlcmF0aW5nIFN5c3RlbSBDb21tYW5kICovXG4gIGV4cG9ydCBjb25zdCBPU0MgPSAnXFx4OWQnO1xuICAvKiogUHJpdmFjeSBNZXNzYWdlICovXG4gIGV4cG9ydCBjb25zdCBQTSA9ICdcXHg5ZSc7XG4gIC8qKiBBcHBsaWNhdGlvbiBQcm9ncmFtIENvbW1hbmQgKi9cbiAgZXhwb3J0IGNvbnN0IEFQQyA9ICdcXHg5Zic7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElLZXlib2FyZEV2ZW50LCBJS2V5Ym9hcmRSZXN1bHQsIEtleWJvYXJkUmVzdWx0VHlwZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBDMCB9IGZyb20gJ2NvbW1vbi9kYXRhL0VzY2FwZVNlcXVlbmNlcyc7XG5cbi8vIHJlZyArIHNoaWZ0IGtleSBtYXBwaW5ncyBmb3IgZGlnaXRzIGFuZCBzcGVjaWFsIGNoYXJzXG5jb25zdCBLRVlDT0RFX0tFWV9NQVBQSU5HUzogeyBba2V5OiBudW1iZXJdOiBbc3RyaW5nLCBzdHJpbmddfSA9IHtcbiAgLy8gZGlnaXRzIDAtOVxuICA0ODogWycwJywgJyknXSxcbiAgNDk6IFsnMScsICchJ10sXG4gIDUwOiBbJzInLCAnQCddLFxuICA1MTogWyczJywgJyMnXSxcbiAgNTI6IFsnNCcsICckJ10sXG4gIDUzOiBbJzUnLCAnJSddLFxuICA1NDogWyc2JywgJ14nXSxcbiAgNTU6IFsnNycsICcmJ10sXG4gIDU2OiBbJzgnLCAnKiddLFxuICA1NzogWyc5JywgJygnXSxcblxuICAvLyBzcGVjaWFsIGNoYXJzXG4gIDE4NjogWyc7JywgJzonXSxcbiAgMTg3OiBbJz0nLCAnKyddLFxuICAxODg6IFsnLCcsICc8J10sXG4gIDE4OTogWyctJywgJ18nXSxcbiAgMTkwOiBbJy4nLCAnPiddLFxuICAxOTE6IFsnLycsICc/J10sXG4gIDE5MjogWydgJywgJ34nXSxcbiAgMjE5OiBbJ1snLCAneyddLFxuICAyMjA6IFsnXFxcXCcsICd8J10sXG4gIDIyMTogWyddJywgJ30nXSxcbiAgMjIyOiBbJ1xcJycsICdcIiddXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZXZhbHVhdGVLZXlib2FyZEV2ZW50KFxuICBldjogSUtleWJvYXJkRXZlbnQsXG4gIGFwcGxpY2F0aW9uQ3Vyc29yTW9kZTogYm9vbGVhbixcbiAgaXNNYWM6IGJvb2xlYW4sXG4gIG1hY09wdGlvbklzTWV0YTogYm9vbGVhblxuKTogSUtleWJvYXJkUmVzdWx0IHtcbiAgY29uc3QgcmVzdWx0OiBJS2V5Ym9hcmRSZXN1bHQgPSB7XG4gICAgdHlwZTogS2V5Ym9hcmRSZXN1bHRUeXBlLlNFTkRfS0VZLFxuICAgIC8vIFdoZXRoZXIgdG8gY2FuY2VsIGV2ZW50IHByb3BhZ2F0aW9uIChOT1RFOiB0aGlzIG1heSBub3QgYmUgbmVlZGVkIHNpbmNlIHRoZSBldmVudCBpc1xuICAgIC8vIGNhbmNlbGVkIGF0IHRoZSBlbmQgb2Yga2V5RG93blxuICAgIGNhbmNlbDogZmFsc2UsXG4gICAgLy8gVGhlIG5ldyBrZXkgZXZlbiB0byBlbWl0XG4gICAga2V5OiB1bmRlZmluZWRcbiAgfTtcbiAgY29uc3QgbW9kaWZpZXJzID0gKGV2LnNoaWZ0S2V5ID8gMSA6IDApIHwgKGV2LmFsdEtleSA/IDIgOiAwKSB8IChldi5jdHJsS2V5ID8gNCA6IDApIHwgKGV2Lm1ldGFLZXkgPyA4IDogMCk7XG4gIHN3aXRjaCAoZXYua2V5Q29kZSkge1xuICAgIGNhc2UgMDpcbiAgICAgIGlmIChldi5rZXkgPT09ICdVSUtleUlucHV0VXBBcnJvdycpIHtcbiAgICAgICAgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0EnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0EnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChldi5rZXkgPT09ICdVSUtleUlucHV0TGVmdEFycm93Jykge1xuICAgICAgICBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPRCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbRCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXRSaWdodEFycm93Jykge1xuICAgICAgICBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXREb3duQXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09CJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tCJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA4OlxuICAgICAgLy8gYmFja3NwYWNlXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkJTOyAvLyBeSFxuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAoZXYuYWx0S2V5KSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyBDMC5ERUw7IC8vIFxcZSBeP1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5rZXkgPSBDMC5ERUw7IC8vIF4/XG4gICAgICBicmVhaztcbiAgICBjYXNlIDk6XG4gICAgICAvLyB0YWJcbiAgICAgIGlmIChldi5zaGlmdEtleSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1taJztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXN1bHQua2V5ID0gQzAuSFQ7XG4gICAgICByZXN1bHQuY2FuY2VsID0gdHJ1ZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTM6XG4gICAgICAvLyByZXR1cm4vZW50ZXJcbiAgICAgIHJlc3VsdC5rZXkgPSBDMC5DUjtcbiAgICAgIHJlc3VsdC5jYW5jZWwgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyNzpcbiAgICAgIC8vIGVzY2FwZVxuICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQztcbiAgICAgIHJlc3VsdC5jYW5jZWwgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzNzpcbiAgICAgIC8vIGxlZnQtYXJyb3dcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0QnO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIGxlZnQtYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIGxlZnQtYXJyb3c6IG1vdmUgb25lIHdvcmQgYmFja3dhcmRzXG4gICAgICAgIC8vIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL2EvMTA4MTA2XG4gICAgICAgIC8vIG1hY09TIHVzZXMgZGlmZmVyZW50IGVzY2FwZSBzZXF1ZW5jZXMgdGhhbiBsaW51eFxuICAgICAgICBpZiAocmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNEJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBpc01hYyA/IEMwLkVTQyArICdiJyA6IEMwLkVTQyArICdbMTs1RCc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0QnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbRCc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM5OlxuICAgICAgLy8gcmlnaHQtYXJyb3dcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0MnO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIHJpZ2h0LWFycm93IGJlaGF2ZSBsaWtlIEN0cmwgKyByaWdodC1hcnJvdzogbW92ZSBvbmUgd29yZCBmb3J3YXJkXG4gICAgICAgIC8vIGh0dHA6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL2EvMTA4MTA2XG4gICAgICAgIC8vIG1hY09TIHVzZXMgZGlmZmVyZW50IGVzY2FwZSBzZXF1ZW5jZXMgdGhhbiBsaW51eFxuICAgICAgICBpZiAocmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNDJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBpc01hYyA/IEMwLkVTQyArICdmJyA6IEMwLkVTQyArICdbMTs1Qyc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0MnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQyc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM4OlxuICAgICAgLy8gdXAtYXJyb3dcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0EnO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIHVwLWFycm93IGJlaGF2ZSBsaWtlIEN0cmwgKyB1cC1hcnJvd1xuICAgICAgICAvLyBodHRwOi8vdW5peC5zdGFja2V4Y2hhbmdlLmNvbS9hLzEwODEwNlxuICAgICAgICBpZiAocmVzdWx0LmtleSA9PT0gQzAuRVNDICsgJ1sxOzNBJykge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7NUEnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09BJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0EnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0MDpcbiAgICAgIC8vIGRvd24tYXJyb3dcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0InO1xuICAgICAgICAvLyBIQUNLOiBNYWtlIEFsdCArIGRvd24tYXJyb3cgYmVoYXZlIGxpa2UgQ3RybCArIGRvd24tYXJyb3dcbiAgICAgICAgLy8gaHR0cDovL3VuaXguc3RhY2tleGNoYW5nZS5jb20vYS8xMDgxMDZcbiAgICAgICAgaWYgKHJlc3VsdC5rZXkgPT09IEMwLkVTQyArICdbMTszQicpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOzVCJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tCJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDU6XG4gICAgICAvLyBpbnNlcnRcbiAgICAgIGlmICghZXYuc2hpZnRLZXkgJiYgIWV2LmN0cmxLZXkpIHtcbiAgICAgICAgLy8gPEN0cmw+IG9yIDxTaGlmdD4gKyA8SW5zZXJ0PiBhcmUgdXNlZCB0b1xuICAgICAgICAvLyBjb3B5LXBhc3RlIG9uIHNvbWUgc3lzdGVtcy5cbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMn4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0NjpcbiAgICAgIC8vIGRlbGV0ZVxuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1szOycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1szfic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM2OlxuICAgICAgLy8gaG9tZVxuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnSCc7XG4gICAgICB9IGVsc2UgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09IJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0gnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzNTpcbiAgICAgIC8vIGVuZFxuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnRic7XG4gICAgICB9IGVsc2UgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09GJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0YnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMzpcbiAgICAgIC8vIHBhZ2UgdXBcbiAgICAgIGlmIChldi5zaGlmdEtleSkge1xuICAgICAgICByZXN1bHQudHlwZSA9IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX1VQO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbNX4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzNDpcbiAgICAgIC8vIHBhZ2UgZG93blxuICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XG4gICAgICAgIHJlc3VsdC50eXBlID0gS2V5Ym9hcmRSZXN1bHRUeXBlLlBBR0VfRE9XTjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzZ+JztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTEyOlxuICAgICAgLy8gRjEtRjEyXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdQJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1AnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTM6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdRJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1EnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTQ6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdSJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1InO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTU6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdTJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1MnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTY6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE1OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxNX4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTc6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE3OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxN34nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTg6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE4OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOH4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTk6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE5OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOX4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjA6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIwOycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syMH4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjE6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syMX4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjI6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIzOycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syM34nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjM6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzI0OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syNH4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIC8vIGEteiBhbmQgc3BhY2VcbiAgICAgIGlmIChldi5jdHJsS2V5ICYmICFldi5zaGlmdEtleSAmJiAhZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5KSB7XG4gICAgICAgIGlmIChldi5rZXlDb2RlID49IDY1ICYmIGV2LmtleUNvZGUgPD0gOTApIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZShldi5rZXlDb2RlIC0gNjQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDMyKSB7XG4gICAgICAgICAgLy8gTlVMXG4gICAgICAgICAgcmVzdWx0LmtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA+PSA1MSAmJiBldi5rZXlDb2RlIDw9IDU1KSB7XG4gICAgICAgICAgLy8gZXNjYXBlLCBmaWxlIHNlcCwgZ3JvdXAgc2VwLCByZWNvcmQgc2VwLCB1bml0IHNlcFxuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2LmtleUNvZGUgLSA1MSArIDI3KTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSA1Nikge1xuICAgICAgICAgIC8vIGRlbGV0ZVxuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDEyNyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMjE5KSB7XG4gICAgICAgICAgLy8gXlsgLSBDb250cm9sIFNlcXVlbmNlIEludHJvZHVjZXIgKENTSSlcbiAgICAgICAgICByZXN1bHQua2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZSgyNyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PT0gMjIwKSB7XG4gICAgICAgICAgLy8gXlxcIC0gU3RyaW5nIFRlcm1pbmF0b3IgKFNUKVxuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI4KTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSAyMjEpIHtcbiAgICAgICAgICAvLyBeXSAtIE9wZXJhdGluZyBTeXN0ZW0gQ29tbWFuZCAoT1NDKVxuICAgICAgICAgIHJlc3VsdC5rZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgoIWlzTWFjIHx8IG1hY09wdGlvbklzTWV0YSkgJiYgZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5KSB7XG4gICAgICAgIC8vIE9uIG1hY09TIHRoaXMgaXMgYSB0aGlyZCBsZXZlbCBzaGlmdCB3aGVuICFtYWNPcHRpb25Jc01ldGEuIFVzZSA8RXNjPiBpbnN0ZWFkLlxuICAgICAgICBjb25zdCBrZXlNYXBwaW5nID0gS0VZQ09ERV9LRVlfTUFQUElOR1NbZXYua2V5Q29kZV07XG4gICAgICAgIGNvbnN0IGtleSA9IGtleU1hcHBpbmcgJiYga2V5TWFwcGluZ1shZXYuc2hpZnRLZXkgPyAwIDogMV07XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsga2V5O1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPj0gNjUgJiYgZXYua2V5Q29kZSA8PSA5MCkge1xuICAgICAgICAgIGNvbnN0IGtleUNvZGUgPSBldi5jdHJsS2V5ID8gZXYua2V5Q29kZSAtIDY0IDogZXYua2V5Q29kZSArIDMyO1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGtleUNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzTWFjICYmICFldi5hbHRLZXkgJiYgIWV2LmN0cmxLZXkgJiYgZXYubWV0YUtleSkge1xuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PT0gNjUpIHsgLy8gY21kICsgYVxuICAgICAgICAgIHJlc3VsdC50eXBlID0gS2V5Ym9hcmRSZXN1bHRUeXBlLlNFTEVDVF9BTEw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXYua2V5ICYmICFldi5jdHJsS2V5ICYmICFldi5hbHRLZXkgJiYgIWV2Lm1ldGFLZXkgJiYgZXYua2V5Q29kZSA+PSA0OCAmJiBldi5rZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEluY2x1ZGUgb25seSBrZXlzIHRoYXQgdGhhdCByZXN1bHQgaW4gYSBfc2luZ2xlXyBjaGFyYWN0ZXI7IGRvbid0IGluY2x1ZGUgbnVtIGxvY2ssIHZvbHVtZSB1cCwgZXRjLlxuICAgICAgICByZXN1bHQua2V5ID0gZXYua2V5O1xuICAgICAgfSBlbHNlIGlmIChldi5rZXkgJiYgZXYuY3RybEtleSkge1xuICAgICAgICBpZiAoZXYua2V5ID09PSAnXycpIHsgLy8gXl9cbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuVVM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLyoqXG4gKiBQb2x5ZmlsbCAtIENvbnZlcnQgVVRGMzIgY29kZXBvaW50IGludG8gSlMgc3RyaW5nLlxuICogTm90ZTogVGhlIGJ1aWx0LWluIFN0cmluZy5mcm9tQ29kZVBvaW50IGhhcHBlbnMgdG8gYmUgbXVjaCBzbG93ZXJcbiAqICAgICAgIGR1ZSB0byBhZGRpdGlvbmFsIHNhbml0eSBjaGVja3MuIFdlIGNhbiBhdm9pZCB0aGVtIHNpbmNlXG4gKiAgICAgICB3ZSBhbHdheXMgb3BlcmF0ZSBvbiBsZWdhbCBVVEYzMiAoZ3JhbnRlZCBieSB0aGUgaW5wdXQgZGVjb2RlcnMpXG4gKiAgICAgICBhbmQgdXNlIHRoaXMgZmFzdGVyIHZlcnNpb24gaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZVBvaW50OiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVQb2ludCA+PiAxMCkgKyAweEQ4MDApICsgU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZVBvaW50ICUgMHg0MDApICsgMHhEQzAwKTtcbiAgfVxuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlUG9pbnQpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgVVRGMzIgY2hhciBjb2RlcyBpbnRvIEpTIHN0cmluZy5cbiAqIEJhc2ljYWxseSB0aGUgc2FtZSBhcyBgc3RyaW5nRnJvbUNvZGVQb2ludGAgYnV0IGZvciBtdWx0aXBsZSBjb2RlcG9pbnRzXG4gKiBpbiBhIGxvb3AgKHdoaWNoIGlzIGEgbG90IGZhc3RlcikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGYzMlRvU3RyaW5nKGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyID0gMCwgZW5kOiBudW1iZXIgPSBkYXRhLmxlbmd0aCk6IHN0cmluZyB7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBsZXQgY29kZXBvaW50ID0gZGF0YVtpXTtcbiAgICBpZiAoY29kZXBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBKUyBzdHJpbmdzIGFyZSBlbmNvZGVkIGFzIFVURjE2LCB0aHVzIGEgbm9uIEJNUCBjb2RlcG9pbnQgZ2V0cyBjb252ZXJ0ZWQgaW50byBhIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICAvLyBjb252ZXJzaW9uIHJ1bGVzOlxuICAgICAgLy8gIC0gc3VidHJhY3QgMHgxMDAwMCBmcm9tIGNvZGUgcG9pbnQsIGxlYXZpbmcgYSAyMCBiaXQgbnVtYmVyXG4gICAgICAvLyAgLSBhZGQgaGlnaCAxMCBiaXRzIHRvIDB4RDgwMCAgLS0+IGZpcnN0IHN1cnJvZ2F0ZVxuICAgICAgLy8gIC0gYWRkIGxvdyAxMCBiaXRzIHRvIDB4REMwMCAgIC0tPiBzZWNvbmQgc3Vycm9nYXRlXG4gICAgICBjb2RlcG9pbnQgLT0gMHgxMDAwMDtcbiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlcG9pbnQgPj4gMTApICsgMHhEODAwKSArIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVwb2ludCAlIDB4NDAwKSArIDB4REMwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGVwb2ludCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU3RyaW5nVG9VdGYzMiAtIGRlY29kZXMgVVRGMTYgc2VxdWVuY2VzIGludG8gVVRGMzIgY29kZXBvaW50cy5cbiAqIFRvIGtlZXAgdGhlIGRlY29kZXIgaW4gbGluZSB3aXRoIEpTIHN0cmluZ3MgaXQgaGFuZGxlcyBzaW5nbGUgc3Vycm9nYXRlcyBhcyBVQ1MyLlxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nVG9VdGYzMiB7XG4gIHByaXZhdGUgX2ludGVyaW06IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIENsZWFycyBpbnRlcmltIGFuZCByZXNldHMgZGVjb2RlciB0byBjbGVhbiBzdGF0ZS5cbiAgICovXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9pbnRlcmltID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvZGUgSlMgc3RyaW5nIHRvIFVURjMyIGNvZGVwb2ludHMuXG4gICAqIFRoZSBtZXRob2RzIGFzc3VtZXMgc3RyZWFtIGlucHV0IGFuZCB3aWxsIHN0b3JlIHBhcnRseSB0cmFuc21pdHRlZFxuICAgKiBzdXJyb2dhdGUgcGFpcnMgYW5kIGRlY29kZSB0aGVtIHdpdGggdGhlIG5leHQgZGF0YSBjaHVuay5cbiAgICogTm90ZTogVGhlIG1ldGhvZCBkb2VzIG5vIGJvdW5kIGNoZWNrcyBmb3IgdGFyZ2V0LCB0aGVyZWZvcmUgbWFrZSBzdXJlXG4gICAqIHRoZSBwcm92aWRlZCBpbnB1dCBkYXRhIGRvZXMgbm90IGV4Y2VlZCB0aGUgc2l6ZSBvZiBgdGFyZ2V0YC5cbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHdyaXR0ZW4gY29kZXBvaW50cyBpbiBgdGFyZ2V0YC5cbiAgICovXG4gIGRlY29kZShpbnB1dDogc3RyaW5nLCB0YXJnZXQ6IFVpbnQzMkFycmF5KTogbnVtYmVyIHtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IHNpemUgPSAwO1xuICAgIGxldCBzdGFydFBvcyA9IDA7XG5cbiAgICAvLyBoYW5kbGUgbGVmdG92ZXIgc3Vycm9nYXRlIGhpZ2hcbiAgICBpZiAodGhpcy5faW50ZXJpbSkge1xuICAgICAgY29uc3Qgc2Vjb25kID0gaW5wdXQuY2hhckNvZGVBdChzdGFydFBvcysrKTtcbiAgICAgIGlmICgweERDMDAgPD0gc2Vjb25kICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSAodGhpcy5faW50ZXJpbSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCAoVVNDMiBoYW5kbGluZylcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSB0aGlzLl9pbnRlcmltO1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IHNlY29uZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ludGVyaW0gPSAwO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSBzdGFydFBvczsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBjb2RlID0gaW5wdXQuY2hhckNvZGVBdChpKTtcbiAgICAgIC8vIHN1cnJvZ2F0ZSBwYWlyIGZpcnN0XG4gICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgICAgaWYgKCsraSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9pbnRlcmltID0gY29kZTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZWNvbmQgPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSAoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQgKFVTQzIgaGFuZGxpbmcpXG4gICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlO1xuICAgICAgICAgIHRhcmdldFtzaXplKytdID0gc2Vjb25kO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxufVxuXG4vKipcbiAqIFV0ZjhEZWNvZGVyIC0gZGVjb2RlcyBVVEY4IGJ5dGUgc2VxdWVuY2VzIGludG8gVVRGMzIgY29kZXBvaW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFV0ZjhUb1V0ZjMyIHtcbiAgcHVibGljIGludGVyaW06IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheSgzKTtcblxuICAvKipcbiAgICogQ2xlYXJzIGludGVyaW0gYnl0ZXMgYW5kIHJlc2V0cyBkZWNvZGVyIHRvIGNsZWFuIHN0YXRlLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuaW50ZXJpbS5maWxsKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZXMgVVRGOCBieXRlIHNlcXVlbmNlcyBpbiBgaW5wdXRgIHRvIFVURjMyIGNvZGVwb2ludHMgaW4gYHRhcmdldGAuXG4gICAqIFRoZSBtZXRob2RzIGFzc3VtZXMgc3RyZWFtIGlucHV0IGFuZCB3aWxsIHN0b3JlIHBhcnRseSB0cmFuc21pdHRlZCBieXRlc1xuICAgKiBhbmQgZGVjb2RlIHRoZW0gd2l0aCB0aGUgbmV4dCBkYXRhIGNodW5rLlxuICAgKiBOb3RlOiBUaGUgbWV0aG9kIGRvZXMgbm8gYm91bmQgY2hlY2tzIGZvciB0YXJnZXQsIHRoZXJlZm9yZSBtYWtlIHN1cmVcbiAgICogdGhlIHByb3ZpZGVkIGRhdGEgY2h1bmsgZG9lcyBub3QgZXhjZWVkIHRoZSBzaXplIG9mIGB0YXJnZXRgLlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd3JpdHRlbiBjb2RlcG9pbnRzIGluIGB0YXJnZXRgLlxuICAgKi9cbiAgZGVjb2RlKGlucHV0OiBVaW50OEFycmF5LCB0YXJnZXQ6IFVpbnQzMkFycmF5KTogbnVtYmVyIHtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgbGV0IHNpemUgPSAwO1xuICAgIGxldCBieXRlMTogbnVtYmVyO1xuICAgIGxldCBieXRlMjogbnVtYmVyO1xuICAgIGxldCBieXRlMzogbnVtYmVyO1xuICAgIGxldCBieXRlNDogbnVtYmVyO1xuICAgIGxldCBjb2RlcG9pbnQgPSAwO1xuICAgIGxldCBzdGFydFBvcyA9IDA7XG5cbiAgICAvLyBoYW5kbGUgbGVmdG92ZXIgYnl0ZXNcbiAgICBpZiAodGhpcy5pbnRlcmltWzBdKSB7XG4gICAgICBsZXQgZGlzY2FyZEludGVyaW0gPSBmYWxzZTtcbiAgICAgIGxldCBjcCA9IHRoaXMuaW50ZXJpbVswXTtcbiAgICAgIGNwICY9ICgoKChjcCAmIDB4RTApID09PSAweEMwKSkgPyAweDFGIDogKCgoY3AgJiAweEYwKSA9PT0gMHhFMCkpID8gMHgwRiA6IDB4MDcpO1xuICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICBsZXQgdG1wOiBudW1iZXI7XG4gICAgICB3aGlsZSAoKHRtcCA9IHRoaXMuaW50ZXJpbVsrK3Bvc10gJiAweDNGKSAmJiBwb3MgPCA0KSB7XG4gICAgICAgIGNwIDw8PSA2O1xuICAgICAgICBjcCB8PSB0bXA7XG4gICAgICB9XG4gICAgICAvLyBtaXNzaW5nIGJ5dGVzIC0gcmVhZCBhaGVhZCBmcm9tIGlucHV0XG4gICAgICBjb25zdCB0eXBlID0gKCgodGhpcy5pbnRlcmltWzBdICYgMHhFMCkgPT09IDB4QzApKSA/IDIgOiAoKCh0aGlzLmludGVyaW1bMF0gJiAweEYwKSA9PT0gMHhFMCkpID8gMyA6IDQ7XG4gICAgICBjb25zdCBtaXNzaW5nID0gdHlwZSAtIHBvcztcbiAgICAgIHdoaWxlIChzdGFydFBvcyA8IG1pc3NpbmcpIHtcbiAgICAgICAgaWYgKHN0YXJ0UG9zID49IGxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHRtcCA9IGlucHV0W3N0YXJ0UG9zKytdO1xuICAgICAgICBpZiAoKHRtcCAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uLCBkaXNjYXJkIGludGVyaW0gYnl0ZXMgY29tcGxldGVseVxuICAgICAgICAgIHN0YXJ0UG9zLS07XG4gICAgICAgICAgZGlzY2FyZEludGVyaW0gPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5lZWQgdG8gc2F2ZSBzbyB3ZSBjYW4gY29udGludWUgc2hvcnQgaW5wdXRzIGluIG5leHQgY2FsbFxuICAgICAgICAgIHRoaXMuaW50ZXJpbVtwb3MrK10gPSB0bXA7XG4gICAgICAgICAgY3AgPDw9IDY7XG4gICAgICAgICAgY3AgfD0gdG1wICYgMHgzRjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFkaXNjYXJkSW50ZXJpbSkge1xuICAgICAgICAvLyBmaW5hbCB0ZXN0IGlzIHR5cGUgZGVwZW5kZW50XG4gICAgICAgIGlmICh0eXBlID09PSAyKSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHg4MCkge1xuICAgICAgICAgICAgLy8gd3Jvbmcgc3RhcnRlciBieXRlXG4gICAgICAgICAgICBzdGFydFBvcy0tO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAzKSB7XG4gICAgICAgICAgaWYgKGNwIDwgMHgwODAwIHx8IChjcCA+PSAweEQ4MDAgJiYgY3AgPD0gMHhERkZGKSkge1xuICAgICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjcDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGNvZGVwb2ludCA8IDB4MDEwMDAwIHx8IGNvZGVwb2ludCA+IDB4MTBGRkZGKSB7XG4gICAgICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5pbnRlcmltLmZpbGwoMCk7XG4gICAgfVxuXG4gICAgLy8gbG9vcCB0aHJvdWdoIGlucHV0XG4gICAgY29uc3QgZm91clN0b3AgPSBsZW5ndGggLSA0O1xuICAgIGxldCBpID0gc3RhcnRQb3M7XG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgIC8qKlxuICAgICAgICogQVNDSUkgc2hvcnRjdXQgd2l0aCBsb29wIHVucm9sbGVkIHRvIDQgY29uc2VjdXRpdmUgQVNDSUkgY2hhcnMuXG4gICAgICAgKiBUaGlzIGlzIGEgY29tcHJvbWlzZSBiZXR3ZWVuIHNwZWVkIGdhaW4gZm9yIEFTQ0lJXG4gICAgICAgKiBhbmQgcGVuYWx0eSBmb3Igbm9uIEFTQ0lJOlxuICAgICAgICogRm9yIGJlc3QgQVNDSUkgcGVyZm9ybWFuY2UgdGhlIGNoYXIgc2hvdWxkIGJlIHN0b3JlZCBkaXJlY3RseSBpbnRvIHRhcmdldCxcbiAgICAgICAqIGJ1dCBldmVuIGEgc2luZ2xlIGF0dGVtcHQgdG8gd3JpdGUgdG8gdGFyZ2V0IGFuZCBjb21wYXJlIGFmdGVyd2FyZHNcbiAgICAgICAqIHBlbmFsaXplcyBub24gQVNDSUkgcmVhbGx5IGJhZCAoLTUwJSksIHRodXMgd2UgbG9hZCB0aGUgY2hhciBpbnRvIGJ5dGVYIGZpcnN0LFxuICAgICAgICogd2hpY2ggcmVkdWNlcyBBU0NJSSBwZXJmb3JtYW5jZSBieSB+MTUlLlxuICAgICAgICogVGhpcyB0cmlhbCBmb3IgQVNDSUkgcmVkdWNlcyBub24gQVNDSUkgcGVyZm9ybWFuY2UgYnkgfjEwJSB3aGljaCBzZWVtcyBhY2NlcHRpYmxlXG4gICAgICAgKiBjb21wYXJlZCB0byB0aGUgZ2FpbnMuXG4gICAgICAgKiBOb3RlIHRoYXQgdGhpcyBvcHRpbWl6YXRpb24gb25seSB0YWtlcyBwbGFjZSBmb3IgNCBjb25zZWN1dGl2ZSBBU0NJSSBjaGFycyxcbiAgICAgICAqIGZvciBhbnkgc2hvcnRlciBpdCBiYWlscyBvdXQuIFdvcnN0IGNhc2UgLSBhbGwgNCBieXRlcyBiZWluZyByZWFkIGJ1dFxuICAgICAgICogdGhyb3duIGF3YXkgZHVlIHRvIHRoZSBsYXN0IGJlaW5nIGEgbm9uIEFTQ0lJIGNoYXIgKC0xMCUgcGVyZm9ybWFuY2UpLlxuICAgICAgICovXG4gICAgICB3aGlsZSAoaSA8IGZvdXJTdG9wXG4gICAgICAgICYmICEoKGJ5dGUxID0gaW5wdXRbaV0pICYgMHg4MClcbiAgICAgICAgJiYgISgoYnl0ZTIgPSBpbnB1dFtpICsgMV0pICYgMHg4MClcbiAgICAgICAgJiYgISgoYnl0ZTMgPSBpbnB1dFtpICsgMl0pICYgMHg4MClcbiAgICAgICAgJiYgISgoYnl0ZTQgPSBpbnB1dFtpICsgM10pICYgMHg4MCkpXG4gICAgICB7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTE7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTI7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTM7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTQ7XG4gICAgICAgIGkgKz0gNDtcbiAgICAgIH1cblxuICAgICAgLy8gcmVyZWFkIGJ5dGUxXG4gICAgICBieXRlMSA9IGlucHV0W2krK107XG5cbiAgICAgIC8vIDEgYnl0ZVxuICAgICAgaWYgKGJ5dGUxIDwgMHg4MCkge1xuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGJ5dGUxO1xuXG4gICAgICAgIC8vIDIgYnl0ZXNcbiAgICAgIH0gZWxzZSBpZiAoKGJ5dGUxICYgMHhFMCkgPT09IDB4QzApIHtcbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTIgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUyICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXBvaW50ID0gKGJ5dGUxICYgMHgxRikgPDwgNiB8IChieXRlMiAmIDB4M0YpO1xuICAgICAgICBpZiAoY29kZXBvaW50IDwgMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIHN0YXJ0ZXIgYnl0ZVxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNvZGVwb2ludDtcblxuICAgICAgICAvLyAzIGJ5dGVzXG4gICAgICB9IGVsc2UgaWYgKChieXRlMSAmIDB4RjApID09PSAweEUwKSB7XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUyID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMiAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID49IGxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVswXSA9IGJ5dGUxO1xuICAgICAgICAgIHRoaXMuaW50ZXJpbVsxXSA9IGJ5dGUyO1xuICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGUzID0gaW5wdXRbaSsrXTtcbiAgICAgICAgaWYgKChieXRlMyAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICAgICAgLy8gd3JvbmcgY29udGludWF0aW9uXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvZGVwb2ludCA9IChieXRlMSAmIDB4MEYpIDw8IDEyIHwgKGJ5dGUyICYgMHgzRikgPDwgNiB8IChieXRlMyAmIDB4M0YpO1xuICAgICAgICBpZiAoY29kZXBvaW50IDwgMHgwODAwIHx8IChjb2RlcG9pbnQgPj0gMHhEODAwICYmIGNvZGVwb2ludCA8PSAweERGRkYpKSB7XG4gICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQsIG5vIGktLSBoZXJlXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlcG9pbnQ7XG5cbiAgICAgICAgLy8gNCBieXRlc1xuICAgICAgfSBlbHNlIGlmICgoYnl0ZTEgJiAweEY4KSA9PT0gMHhGMCkge1xuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMiA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTIgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMV0gPSBieXRlMjtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMyA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTMgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMV0gPSBieXRlMjtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMl0gPSBieXRlMztcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlNCA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTQgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlcG9pbnQgPSAoYnl0ZTEgJiAweDA3KSA8PCAxOCB8IChieXRlMiAmIDB4M0YpIDw8IDEyIHwgKGJ5dGUzICYgMHgzRikgPDwgNiB8IChieXRlNCAmIDB4M0YpO1xuICAgICAgICBpZiAoY29kZXBvaW50IDwgMHgwMTAwMDAgfHwgY29kZXBvaW50ID4gMHgxMEZGRkYpIHtcbiAgICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCwgbm8gaS0tIGhlcmVcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNvZGVwb2ludDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlsbGVnYWwgYnl0ZSwganVzdCBza2lwXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogSW50ZXJuYWwgc3RhdGVzIG9mIEVzY2FwZVNlcXVlbmNlUGFyc2VyLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBQYXJzZXJTdGF0ZSB7XG4gIEdST1VORCA9IDAsXG4gIEVTQ0FQRSA9IDEsXG4gIEVTQ0FQRV9JTlRFUk1FRElBVEUgPSAyLFxuICBDU0lfRU5UUlkgPSAzLFxuICBDU0lfUEFSQU0gPSA0LFxuICBDU0lfSU5URVJNRURJQVRFID0gNSxcbiAgQ1NJX0lHTk9SRSA9IDYsXG4gIFNPU19QTV9BUENfU1RSSU5HID0gNyxcbiAgT1NDX1NUUklORyA9IDgsXG4gIERDU19FTlRSWSA9IDksXG4gIERDU19QQVJBTSA9IDEwLFxuICBEQ1NfSUdOT1JFID0gMTEsXG4gIERDU19JTlRFUk1FRElBVEUgPSAxMixcbiAgRENTX1BBU1NUSFJPVUdIID0gMTNcbn1cblxuLyoqXG4qIEludGVybmFsIGFjdGlvbnMgb2YgRXNjYXBlU2VxdWVuY2VQYXJzZXIuXG4qL1xuZXhwb3J0IGNvbnN0IGVudW0gUGFyc2VyQWN0aW9uIHtcbiAgSUdOT1JFID0gMCxcbiAgRVJST1IgPSAxLFxuICBQUklOVCA9IDIsXG4gIEVYRUNVVEUgPSAzLFxuICBPU0NfU1RBUlQgPSA0LFxuICBPU0NfUFVUID0gNSxcbiAgT1NDX0VORCA9IDYsXG4gIENTSV9ESVNQQVRDSCA9IDcsXG4gIFBBUkFNID0gOCxcbiAgQ09MTEVDVCA9IDksXG4gIEVTQ19ESVNQQVRDSCA9IDEwLFxuICBDTEVBUiA9IDExLFxuICBEQ1NfSE9PSyA9IDEyLFxuICBEQ1NfUFVUID0gMTMsXG4gIERDU19VTkhPT0sgPSAxNFxufVxuXG4vKipcbiAqIEludGVybmFsIHN0YXRlcyBvZiBPc2NQYXJzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIE9zY1N0YXRlIHtcbiAgU1RBUlQgPSAwLFxuICBJRCA9IDEsXG4gIFBBWUxPQUQgPSAyLFxuICBBQk9SVCA9IDNcbn1cblxuLy8gcGF5bG9hZCBsaW1pdCBmb3IgT1NDIGFuZCBEQ1NcbmV4cG9ydCBjb25zdCBQQVlMT0FEX0xJTUlUID0gMTAwMDAwMDA7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IElEY3NIYW5kbGVyLCBJUGFyYW1zLCBJSGFuZGxlckNvbGxlY3Rpb24sIElEY3NQYXJzZXIsIERjc0ZhbGxiYWNrSGFuZGxlclR5cGUgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IHV0ZjMyVG9TdHJpbmcgfSBmcm9tICdjb21tb24vaW5wdXQvVGV4dERlY29kZXInO1xuaW1wb3J0IHsgUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9QYXJhbXMnO1xuaW1wb3J0IHsgUEFZTE9BRF9MSU1JVCB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzJztcblxuY29uc3QgRU1QVFlfSEFORExFUlM6IElEY3NIYW5kbGVyW10gPSBbXTtcblxuZXhwb3J0IGNsYXNzIERjc1BhcnNlciBpbXBsZW1lbnRzIElEY3NQYXJzZXIge1xuICBwcml2YXRlIF9oYW5kbGVyczogSUhhbmRsZXJDb2xsZWN0aW9uPElEY3NIYW5kbGVyPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2FjdGl2ZTogSURjc0hhbmRsZXJbXSA9IEVNUFRZX0hBTkRMRVJTO1xuICBwcml2YXRlIF9pZGVudDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfaGFuZGxlckZiOiBEY3NGYWxsYmFja0hhbmRsZXJUeXBlID0gKCkgPT4ge307XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9ICgpID0+IHt9O1xuICB9XG5cbiAgcHVibGljIGFkZEhhbmRsZXIoaWRlbnQ6IG51bWJlciwgaGFuZGxlcjogSURjc0hhbmRsZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyc1tpZGVudF0gPSBbXTtcbiAgICB9XG4gICAgY29uc3QgaGFuZGxlckxpc3QgPSB0aGlzLl9oYW5kbGVyc1tpZGVudF07XG4gICAgaGFuZGxlckxpc3QucHVzaChoYW5kbGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzcG9zZTogKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVySW5kZXggPSBoYW5kbGVyTGlzdC5pbmRleE9mKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaGFuZGxlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGhhbmRsZXJMaXN0LnNwbGljZShoYW5kbGVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElEY3NIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnNbaWRlbnRdID0gW2hhbmRsZXJdO1xuICB9XG5cbiAgcHVibGljIGNsZWFySGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSkgZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMudW5ob29rKGZhbHNlKTtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlID0gRU1QVFlfSEFORExFUlM7XG4gICAgdGhpcy5faWRlbnQgPSAwO1xuICB9XG5cbiAgcHVibGljIGhvb2soaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgLy8gYWx3YXlzIHJlc2V0IGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuX2lkZW50ID0gaWRlbnQ7XG4gICAgdGhpcy5fYWN0aXZlID0gdGhpcy5faGFuZGxlcnNbaWRlbnRdIHx8IEVNUFRZX0hBTkRMRVJTO1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCAnSE9PSycsIHBhcmFtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLmhvb2socGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCAnUFVUJywgdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnB1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5ob29rKHN1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwgJ1VOSE9PSycsIHN1Y2Nlc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxO1xuICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVbal0udW5ob29rKHN1Y2Nlc3MpICE9PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBqLS07XG4gICAgICAvLyBjbGVhbnVwIGxlZnQgb3ZlciBoYW5kbGVyc1xuICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZVtqXS51bmhvb2soZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgICB0aGlzLl9pZGVudCA9IDA7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZW5pZW50IGNsYXNzIHRvIGNyZWF0ZSBhIERDUyBoYW5kbGVyIGZyb20gYSBzaW5nbGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBOb3RlOiBUaGUgcGF5bG9hZCBpcyBjdXJyZW50bHkgbGltaXRlZCB0byA1MCBNQiAoaGFyZGNvZGVkKS5cbiAqL1xuZXhwb3J0IGNsYXNzIERjc0hhbmRsZXIgaW1wbGVtZW50cyBJRGNzSGFuZGxlciB7XG4gIHByaXZhdGUgX2RhdGEgPSAnJztcbiAgcHJpdmF0ZSBfcGFyYW1zOiBJUGFyYW1zIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9oaXRMaW1pdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2hhbmRsZXI6IChkYXRhOiBzdHJpbmcsIHBhcmFtczogSVBhcmFtcykgPT4gYW55KSB7fVxuXG4gIHB1YmxpYyBob29rKHBhcmFtczogSVBhcmFtcyk6IHZvaWQge1xuICAgIHRoaXMuX3BhcmFtcyA9IHBhcmFtcy5jbG9uZSgpO1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGF0YSArPSB1dGYzMlRvU3RyaW5nKGRhdGEsIHN0YXJ0LCBlbmQpO1xuICAgIGlmICh0aGlzLl9kYXRhLmxlbmd0aCA+IFBBWUxPQURfTElNSVQpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgIHRoaXMuX2hpdExpbWl0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5ob29rKHN1Y2Nlc3M6IGJvb2xlYW4pOiBhbnkge1xuICAgIGxldCByZXQ7XG4gICAgaWYgKHRoaXMuX2hpdExpbWl0KSB7XG4gICAgICByZXQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIHJldCA9IHRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSwgdGhpcy5fcGFyYW1zID8gdGhpcy5fcGFyYW1zIDogbmV3IFBhcmFtcygpKTtcbiAgICB9XG4gICAgdGhpcy5fcGFyYW1zID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICAgIHJldHVybiByZXQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVBhcnNpbmdTdGF0ZSwgSURjc0hhbmRsZXIsIElFc2NhcGVTZXF1ZW5jZVBhcnNlciwgSVBhcmFtcywgSU9zY0hhbmRsZXIsIElIYW5kbGVyQ29sbGVjdGlvbiwgQ3NpSGFuZGxlclR5cGUsIE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUsIElPc2NQYXJzZXIsIEVzY0hhbmRsZXJUeXBlLCBJRGNzUGFyc2VyLCBEY3NGYWxsYmFja0hhbmRsZXJUeXBlLCBJRnVuY3Rpb25JZGVudGlmaWVyLCBFeGVjdXRlRmFsbGJhY2tIYW5kbGVyVHlwZSwgQ3NpRmFsbGJhY2tIYW5kbGVyVHlwZSwgRXNjRmFsbGJhY2tIYW5kbGVyVHlwZSwgUHJpbnRIYW5kbGVyVHlwZSwgUHJpbnRGYWxsYmFja0hhbmRsZXJUeXBlLCBFeGVjdXRlSGFuZGxlclR5cGUgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IFBhcnNlclN0YXRlLCBQYXJzZXJBY3Rpb24gfSBmcm9tICdjb21tb24vcGFyc2VyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnY29tbW9uL1R5cGVkQXJyYXlVdGlscyc7XG5pbXBvcnQgeyBQYXJhbXMgfSBmcm9tICdjb21tb24vcGFyc2VyL1BhcmFtcyc7XG5pbXBvcnQgeyBPc2NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL09zY1BhcnNlcic7XG5pbXBvcnQgeyBEY3NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0Rjc1BhcnNlcic7XG5cbi8qKlxuICogVGFibGUgdmFsdWVzIGFyZSBnZW5lcmF0ZWQgbGlrZSB0aGlzOlxuICogICAgaW5kZXg6ICBjdXJyZW50U3RhdGUgPDwgVGFibGVWYWx1ZS5JTkRFWF9TVEFURV9TSElGVCB8IGNoYXJDb2RlXG4gKiAgICB2YWx1ZTogIGFjdGlvbiA8PCBUYWJsZVZhbHVlLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dFN0YXRlXG4gKi9cbmNvbnN0IGVudW0gVGFibGVBY2Nlc3Mge1xuICBUUkFOU0lUSU9OX0FDVElPTl9TSElGVCA9IDQsXG4gIFRSQU5TSVRJT05fU1RBVEVfTUFTSyA9IDE1LFxuICBJTkRFWF9TVEFURV9TSElGVCA9IDhcbn1cblxuLyoqXG4gKiBUcmFuc2l0aW9uIHRhYmxlIGZvciBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb25UYWJsZSB7XG4gIHB1YmxpYyB0YWJsZTogVWludDhBcnJheTtcblxuICBjb25zdHJ1Y3RvcihsZW5ndGg6IG51bWJlcikge1xuICAgIHRoaXMudGFibGUgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkZWZhdWx0IHRyYW5zaXRpb24uXG4gICAqIEBwYXJhbSBhY3Rpb24gZGVmYXVsdCBhY3Rpb25cbiAgICogQHBhcmFtIG5leHQgZGVmYXVsdCBuZXh0IHN0YXRlXG4gICAqL1xuICBwdWJsaWMgc2V0RGVmYXVsdChhY3Rpb246IFBhcnNlckFjdGlvbiwgbmV4dDogUGFyc2VyU3RhdGUpOiB2b2lkIHtcbiAgICBmaWxsKHRoaXMudGFibGUsIGFjdGlvbiA8PCBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCB8IG5leHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHRyYW5zaXRpb24gdG8gdGhlIHRyYW5zaXRpb24gdGFibGUuXG4gICAqIEBwYXJhbSBjb2RlIGlucHV0IGNoYXJhY3RlciBjb2RlXG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgcHVibGljIGFkZChjb2RlOiBudW1iZXIsIHN0YXRlOiBQYXJzZXJTdGF0ZSwgYWN0aW9uOiBQYXJzZXJBY3Rpb24sIG5leHQ6IFBhcnNlclN0YXRlKTogdm9pZCB7XG4gICAgdGhpcy50YWJsZVtzdGF0ZSA8PCBUYWJsZUFjY2Vzcy5JTkRFWF9TVEFURV9TSElGVCB8IGNvZGVdID0gYWN0aW9uIDw8IFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdHJhbnNpdGlvbnMgZm9yIG11bHRpcGxlIGlucHV0IGNoYXJhY3RlciBjb2Rlcy5cbiAgICogQHBhcmFtIGNvZGVzIGlucHV0IGNoYXJhY3RlciBjb2RlIGFycmF5XG4gICAqIEBwYXJhbSBzdGF0ZSBjdXJyZW50IHBhcnNlciBzdGF0ZVxuICAgKiBAcGFyYW0gYWN0aW9uIHBhcnNlciBhY3Rpb24gdG8gYmUgZG9uZVxuICAgKiBAcGFyYW0gbmV4dCBuZXh0IHBhcnNlciBzdGF0ZVxuICAgKi9cbiAgcHVibGljIGFkZE1hbnkoY29kZXM6IG51bWJlcltdLCBzdGF0ZTogUGFyc2VyU3RhdGUsIGFjdGlvbjogUGFyc2VyQWN0aW9uLCBuZXh0OiBQYXJzZXJTdGF0ZSk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudGFibGVbc3RhdGUgPDwgVGFibGVBY2Nlc3MuSU5ERVhfU1RBVEVfU0hJRlQgfCBjb2Rlc1tpXV0gPSBhY3Rpb24gPDwgVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9BQ1RJT05fU0hJRlQgfCBuZXh0O1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIFBzZXVkby1jaGFyYWN0ZXIgcGxhY2Vob2xkZXIgZm9yIHByaW50YWJsZSBub24tYXNjaWkgY2hhcmFjdGVycyAodW5pY29kZSkuXG5jb25zdCBOT05fQVNDSUlfUFJJTlRBQkxFID0gMHhBMDtcblxuXG4vKipcbiAqIFZUNTAwIGNvbXBhdGlibGUgdHJhbnNpdGlvbiB0YWJsZS5cbiAqIFRha2VuIGZyb20gaHR0cHM6Ly92dDEwMC5uZXQvZW11L2RlY19hbnNpX3BhcnNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFZUNTAwX1RSQU5TSVRJT05fVEFCTEUgPSAoZnVuY3Rpb24gKCk6IFRyYW5zaXRpb25UYWJsZSB7XG4gIGNvbnN0IHRhYmxlOiBUcmFuc2l0aW9uVGFibGUgPSBuZXcgVHJhbnNpdGlvblRhYmxlKDQwOTUpO1xuXG4gIC8vIHJhbmdlIG1hY3JvIGZvciBieXRlXG4gIGNvbnN0IEJZVEVfVkFMVUVTID0gMjU2O1xuICBjb25zdCBibHVlcHJpbnQgPSBBcnJheS5hcHBseShudWxsLCBBcnJheShCWVRFX1ZBTFVFUykpLm1hcCgodW51c2VkOiBhbnksIGk6IG51bWJlcikgPT4gaSk7XG4gIGNvbnN0IHIgPSAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpID0+IGJsdWVwcmludC5zbGljZShzdGFydCwgZW5kKTtcblxuICAvLyBEZWZhdWx0IGRlZmluaXRpb25zLlxuICBjb25zdCBQUklOVEFCTEVTID0gcigweDIwLCAweDdmKTsgLy8gMHgyMCAoU1ApIGluY2x1ZGVkLCAweDdGIChERUwpIGV4Y2x1ZGVkXG4gIGNvbnN0IEVYRUNVVEFCTEVTID0gcigweDAwLCAweDE4KTtcbiAgRVhFQ1VUQUJMRVMucHVzaCgweDE5KTtcbiAgRVhFQ1VUQUJMRVMucHVzaC5hcHBseShFWEVDVVRBQkxFUywgcigweDFjLCAweDIwKSk7XG5cbiAgY29uc3Qgc3RhdGVzOiBudW1iZXJbXSA9IHIoUGFyc2VyU3RhdGUuR1JPVU5ELCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0ggKyAxKTtcbiAgbGV0IHN0YXRlOiBhbnk7XG5cbiAgLy8gc2V0IGRlZmF1bHQgdHJhbnNpdGlvblxuICB0YWJsZS5zZXREZWZhdWx0KFBhcnNlckFjdGlvbi5FUlJPUiwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gcHJpbnRhYmxlc1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLlBSSU5ULCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBnbG9iYWwgYW55d2hlcmUgcnVsZXNcbiAgZm9yIChzdGF0ZSBpbiBzdGF0ZXMpIHtcbiAgICB0YWJsZS5hZGRNYW55KFsweDE4LCAweDFhLCAweDk5LCAweDlhXSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDgwLCAweDkwKSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDkwLCAweDk4KSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZCgweDljLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuR1JPVU5EKTsgLy8gU1QgYXMgdGVybWluYXRvclxuICAgIHRhYmxlLmFkZCgweDFiLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5FU0NBUEUpOyAgLy8gRVNDXG4gICAgdGFibGUuYWRkKDB4OWQsIHN0YXRlLCBQYXJzZXJBY3Rpb24uT1NDX1NUQVJULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTsgIC8vIE9TQ1xuICAgIHRhYmxlLmFkZE1hbnkoWzB4OTgsIDB4OWUsIDB4OWZdLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICAgIHRhYmxlLmFkZCgweDliLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpOyAgLy8gQ1NJXG4gICAgdGFibGUuYWRkKDB4OTAsIHN0YXRlLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7ICAvLyBEQ1NcbiAgfVxuICAvLyBydWxlcyBmb3IgZXhlY3V0YWJsZXMgYW5kIDdmXG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgLy8gb3NjXG4gIHRhYmxlLmFkZCgweDVkLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5PU0NfU1RBUlQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShbMHg5YywgMHgxYiwgMHgxOCwgMHgxYSwgMHgwN10sIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfRU5ELCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICAvLyBzb3MvcG0vYXBjIGRvZXMgbm90aGluZ1xuICB0YWJsZS5hZGRNYW55KFsweDU4LCAweDVlLCAweDVmXSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoUFJJTlRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4OWMsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgLy8gY3NpIGVudHJpZXNcbiAgdGFibGUuYWRkKDB4NWIsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDNjKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uUEFSQU0sIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4NDApLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg0MCksIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5DU0lfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIC8vIGVzY19pbnRlcm1lZGlhdGVcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDdmKSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4NTApLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDUxLCAweDU4KSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KFsweDU5LCAweDVhLCAweDVjXSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg2MCwgMHg3ZiksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gZGNzIGVudHJ5XG4gIHRhYmxlLmFkZCgweDUwLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5DTEVBUiwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHg4MCksIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHgzYyksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDQwKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfUFVULCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19QVVQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4MWIsIDB4OWMsIDB4MTgsIDB4MWFdLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfVU5IT09LLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBzcGVjaWFsIGhhbmRsaW5nIG9mIHVuaWNvZGUgY2hhcnNcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLlBSSU5ULCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLk9TQ19QVVQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZChOT05fQVNDSUlfUFJJTlRBQkxFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19QVVQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHJldHVybiB0YWJsZTtcbn0pKCk7XG5cblxuLyoqXG4gKiBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgQU5TSS9ERUMgY29tcGF0aWJsZSBwYXJzZXIgZGVzY3JpYmVkIGJ5XG4gKiBQYXVsIFdpbGxpYW1zIChodHRwczovL3Z0MTAwLm5ldC9lbXUvZGVjX2Fuc2lfcGFyc2VyKS5cbiAqXG4gKiBUbyBpbXBsZW1lbnQgY3VzdG9tIEFOU0kgY29tcGxpYW50IGVzY2FwZSBzZXF1ZW5jZXMgaXQgaXMgbm90IG5lZWRlZCB0b1xuICogYWx0ZXIgdGhpcyBwYXJzZXIsIGluc3RlYWQgY29uc2lkZXIgcmVnaXN0ZXJpbmcgYSBjdXN0b20gaGFuZGxlci5cbiAqIEZvciBub24gQU5TSSBjb21wbGlhbnQgc2VxdWVuY2VzIGNoYW5nZSB0aGUgdHJhbnNpdGlvbiB0YWJsZSB3aXRoXG4gKiB0aGUgb3B0aW9uYWwgYHRyYW5zaXRpb25zYCBjb25zdHJ1Y3RvciBhcmd1bWVudCBhbmRcbiAqIHJlaW1wbGVtZW50IHRoZSBgcGFyc2VgIG1ldGhvZC5cbiAqXG4gKiBUaGlzIHBhcnNlciBpcyBjdXJyZW50bHkgaGFyZGNvZGVkIHRvIG9wZXJhdGUgaW4gWkRNIChaZXJvIERlZmF1bHQgTW9kZSlcbiAqIGFzIHN1Z2dlc3RlZCBieSB0aGUgb3JpZ2luYWwgcGFyc2VyLCB0aHVzIGVtcHR5IHBhcmFtZXRlcnMgYXJlIHNldCB0byAwLlxuICogVGhpcyB0aGlzIGlzIG5vdCBpbiBsaW5lIHdpdGggdGhlIGxhdGVzdCBFQ01BLTQ4IHNwZWNpZmljYXRpb25cbiAqIChaRE0gd2FzIHBhcnQgb2YgdGhlIGVhcmx5IHNwZWNzIGFuZCBnb3QgY29tcGxldGVseSByZW1vdmVkIGxhdGVyIG9uKS5cbiAqXG4gKiBPdGhlciB0aGFuIHRoZSBvcmlnaW5hbCBwYXJzZXIgZnJvbSB2dDEwMC5uZXQgdGhpcyBwYXJzZXIgc3VwcG9ydHNcbiAqIHN1YiBwYXJhbWV0ZXJzIGluIGRpZ2l0YWwgcGFyYW1ldGVycyBzZXBhcmF0ZWQgYnkgY29sb25zLiBFbXB0eSBzdWIgcGFyYW1ldGVyc1xuICogYXJlIHNldCB0byAtMSAobm8gWkRNIGZvciBzdWIgcGFyYW1ldGVycykuXG4gKlxuICogQWJvdXQgcHJlZml4IGFuZCBpbnRlcm1lZGlhdGUgYnl0ZXM6XG4gKiBUaGlzIHBhcnNlciBmb2xsb3dzIHRoZSBhc3N1bXB0aW9ucyBvZiB0aGUgdnQxMDAubmV0IHBhcnNlciB3aXRoIHRoZXNlIHJlc3RyaWN0aW9uczpcbiAqIC0gb25seSBvbmUgcHJlZml4IGJ5dGUgaXMgYWxsb3dlZCBhcyBmaXJzdCBwYXJhbWV0ZXIgYnl0ZSwgYnl0ZSByYW5nZSAweDNjIC4uIDB4M2ZcbiAqIC0gbWF4LiB0d28gaW50ZXJtZWRpYXRlcyBhcmUgcmVzcGVjdGVkLCBieXRlIHJhbmdlIDB4MjAgLi4gMHgyZlxuICogTm90ZSB0aGF0IHRoaXMgaXMgbm90IGluIGxpbmUgd2l0aCBFQ01BLTQ4IHdoaWNoIGRvZXMgbm90IGxpbWl0IGVpdGhlciBvZiB0aG9zZS5cbiAqIEZ1cnRoZXJtb3JlIEVDTUEtNDggYWxsb3dzIHRoZSBwcmVmaXggYnl0ZSByYW5nZSBhdCBhbnkgcGFyYW0gYnl0ZSBwb3NpdGlvbi4gQ3VycmVudGx5XG4gKiB0aGVyZSBhcmUgbm8ga25vd24gc2VxdWVuY2VzIHRoYXQgZm9sbG93IHRoZSBicm9hZGVyIGRlZmluaXRpb24gb2YgdGhlIHNwZWNpZmljYXRpb24uXG4gKlxuICogVE9ETzogaW1wbGVtZW50IGVycm9yIHJlY292ZXJ5IGhvb2sgdmlhIGVycm9yIGhhbmRsZXIgcmV0dXJuIHZhbHVlc1xuICovXG5leHBvcnQgY2xhc3MgRXNjYXBlU2VxdWVuY2VQYXJzZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUVzY2FwZVNlcXVlbmNlUGFyc2VyIHtcbiAgcHVibGljIGluaXRpYWxTdGF0ZTogbnVtYmVyO1xuICBwdWJsaWMgY3VycmVudFN0YXRlOiBudW1iZXI7XG4gIHB1YmxpYyBwcmVjZWRpbmdDb2RlcG9pbnQ6IG51bWJlcjtcblxuICAvLyBidWZmZXJzIG92ZXIgc2V2ZXJhbCBwYXJzZSBjYWxsc1xuICBwcm90ZWN0ZWQgX3BhcmFtczogUGFyYW1zO1xuICBwcm90ZWN0ZWQgX2NvbGxlY3Q6IG51bWJlcjtcblxuICAvLyBoYW5kbGVyIGxvb2t1cCBjb250YWluZXJzXG4gIHByb3RlY3RlZCBfcHJpbnRIYW5kbGVyOiBQcmludEhhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2V4ZWN1dGVIYW5kbGVyczoge1tmbGFnOiBudW1iZXJdOiBFeGVjdXRlSGFuZGxlclR5cGV9O1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248Q3NpSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgX2VzY0hhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248RXNjSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgX29zY1BhcnNlcjogSU9zY1BhcnNlcjtcbiAgcHJvdGVjdGVkIF9kY3NQYXJzZXI6IElEY3NQYXJzZXI7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyOiAoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IElQYXJzaW5nU3RhdGU7XG5cbiAgLy8gZmFsbGJhY2sgaGFuZGxlcnNcbiAgcHJvdGVjdGVkIF9wcmludEhhbmRsZXJGYjogUHJpbnRGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2V4ZWN1dGVIYW5kbGVyRmI6IEV4ZWN1dGVGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJGYjogQ3NpRmFsbGJhY2tIYW5kbGVyVHlwZTtcbiAgcHJvdGVjdGVkIF9lc2NIYW5kbGVyRmI6IEVzY0ZhbGxiYWNrSGFuZGxlclR5cGU7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyRmI6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZTtcblxuICBjb25zdHJ1Y3RvcihyZWFkb25seSBUUkFOU0lUSU9OUzogVHJhbnNpdGlvblRhYmxlID0gVlQ1MDBfVFJBTlNJVElPTl9UQUJMRSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IFBhcnNlclN0YXRlLkdST1VORDtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX3BhcmFtcyA9IG5ldyBQYXJhbXMoKTsgLy8gZGVmYXVsdHMgdG8gMzIgc3RvcmFibGUgcGFyYW1zL3N1YnBhcmFtc1xuICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgICAgLy8gWkRNXG4gICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuXG4gICAgLy8gc2V0IGRlZmF1bHQgZmFsbGJhY2sgaGFuZGxlcnMgYW5kIGhhbmRsZXIgbG9va3VwIGNvbnRhaW5lcnNcbiAgICB0aGlzLl9wcmludEhhbmRsZXJGYiA9IChkYXRhLCBzdGFydCwgZW5kKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYiA9IChjb2RlOiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSAoaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXNjSGFuZGxlckZiID0gKGlkZW50OiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXJGYiA9IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSk6IElQYXJzaW5nU3RhdGUgPT4gc3RhdGU7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gdGhpcy5fcHJpbnRIYW5kbGVyRmI7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXNjSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX29zY1BhcnNlciA9IG5ldyBPc2NQYXJzZXIoKTtcbiAgICB0aGlzLl9kY3NQYXJzZXIgPSBuZXcgRGNzUGFyc2VyKCk7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gdGhpcy5fZXJyb3JIYW5kbGVyRmI7XG5cbiAgICAvLyBzd2FsbG93IDdiaXQgU1QgKEVTQytcXClcbiAgICB0aGlzLnNldEVzY0hhbmRsZXIoe2ZpbmFsOiAnXFxcXCd9LCAoKSA9PiB7fSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2lkZW50aWZpZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGZpbmFsUmFuZ2U6IG51bWJlcltdID0gWzB4NDAsIDB4N2VdKTogbnVtYmVyIHtcbiAgICBsZXQgcmVzID0gMDtcbiAgICBpZiAoaWQucHJlZml4KSB7XG4gICAgICBpZiAoaWQucHJlZml4Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IG9uZSBieXRlIGFzIHByZWZpeCBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJlcyA9IGlkLnByZWZpeC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKHJlcyAmJiAweDNjID4gcmVzIHx8IHJlcyA+IDB4M2YpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmVmaXggbXVzdCBiZSBpbiByYW5nZSAweDNjIC4uIDB4M2YnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmludGVybWVkaWF0ZXMpIHtcbiAgICAgIGlmIChpZC5pbnRlcm1lZGlhdGVzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IHR3byBieXRlcyBhcyBpbnRlcm1lZGlhdGVzIGFyZSBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWQuaW50ZXJtZWRpYXRlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBpbnRlcm1lZGlhdGUgPSBpZC5pbnRlcm1lZGlhdGVzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmICgweDIwID4gaW50ZXJtZWRpYXRlIHx8IGludGVybWVkaWF0ZSA+IDB4MmYpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludGVybWVkaWF0ZSBtdXN0IGJlIGluIHJhbmdlIDB4MjAgLi4gMHgyZicpO1xuICAgICAgICB9XG4gICAgICAgIHJlcyA8PD0gODtcbiAgICAgICAgcmVzIHw9IGludGVybWVkaWF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmZpbmFsLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaW5hbCBtdXN0IGJlIGEgc2luZ2xlIGJ5dGUnKTtcbiAgICB9XG4gICAgY29uc3QgZmluYWxDb2RlID0gaWQuZmluYWwuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoZmluYWxSYW5nZVswXSA+IGZpbmFsQ29kZSB8fCBmaW5hbENvZGUgPiBmaW5hbFJhbmdlWzFdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpbmFsIG11c3QgYmUgaW4gcmFuZ2UgJHtmaW5hbFJhbmdlWzBdfSAuLiAke2ZpbmFsUmFuZ2VbMV19YCk7XG4gICAgfVxuICAgIHJlcyA8PD0gODtcbiAgICByZXMgfD0gZmluYWxDb2RlO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBpZGVudFRvU3RyaW5nKGlkZW50OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlczogc3RyaW5nW10gPSBbXTtcbiAgICB3aGlsZSAoaWRlbnQpIHtcbiAgICAgIHJlcy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaWRlbnQgJiAweEZGKSk7XG4gICAgICBpZGVudCA+Pj0gODtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5yZXZlcnNlKCkuam9pbignJyk7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9lc2NIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fb3NjUGFyc2VyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9kY3NQYXJzZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHVibGljIHNldFByaW50SGFuZGxlcihoYW5kbGVyOiBQcmludEhhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gaGFuZGxlcjtcbiAgfVxuICBwdWJsaWMgY2xlYXJQcmludEhhbmRsZXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gdGhpcy5fcHJpbnRIYW5kbGVyRmI7XG4gIH1cblxuICBwdWJsaWMgYWRkRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogRXNjSGFuZGxlclR5cGUpOiBJRGlzcG9zYWJsZSB7XG4gICAgY29uc3QgaWRlbnQgPSB0aGlzLl9pZGVudGlmaWVyKGlkLCBbMHgzMCwgMHg3ZV0pO1xuICAgIGlmICh0aGlzLl9lc2NIYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fZXNjSGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5fZXNjSGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIHNldEVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGhhbmRsZXI6IEVzY0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCwgWzB4MzAsIDB4N2VdKV0gPSBbaGFuZGxlcl07XG4gIH1cbiAgcHVibGljIGNsZWFyRXNjSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGlkLCBbMHgzMCwgMHg3ZV0pXSkgZGVsZXRlIHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoaWQsIFsweDMwLCAweDdlXSldO1xuICB9XG4gIHB1YmxpYyBzZXRFc2NIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRXNjRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2VzY0hhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgc2V0RXhlY3V0ZUhhbmRsZXIoZmxhZzogc3RyaW5nLCBoYW5kbGVyOiBFeGVjdXRlSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXSA9IGhhbmRsZXI7XG4gIH1cbiAgcHVibGljIGNsZWFyRXhlY3V0ZUhhbmRsZXIoZmxhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tmbGFnLmNoYXJDb2RlQXQoMCldKSBkZWxldGUgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2ZsYWcuY2hhckNvZGVBdCgwKV07XG4gIH1cbiAgcHVibGljIHNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRXhlY3V0ZUZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9leGVjdXRlSGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBhZGRDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBDc2lIYW5kbGVyVHlwZSk6IElEaXNwb3NhYmxlIHtcbiAgICBjb25zdCBpZGVudCA9IHRoaXMuX2lkZW50aWZpZXIoaWQpO1xuICAgIGlmICh0aGlzLl9jc2lIYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY3NpSGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5fY3NpSGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIHNldENzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGhhbmRsZXI6IENzaUhhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldID0gW2hhbmRsZXJdO1xuICB9XG4gIHB1YmxpYyBjbGVhckNzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldKSBkZWxldGUgdGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCldO1xuICB9XG4gIHB1YmxpYyBzZXRDc2lIYW5kbGVyRmFsbGJhY2soY2FsbGJhY2s6IChpZGVudDogbnVtYmVyLCBwYXJhbXM6IElQYXJhbXMpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHB1YmxpYyBhZGREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBJRGNzSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fZGNzUGFyc2VyLmFkZEhhbmRsZXIodGhpcy5faWRlbnRpZmllcihpZCksIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBzZXREY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBJRGNzSGFuZGxlcik6IHZvaWQge1xuICAgIHRoaXMuX2Rjc1BhcnNlci5zZXRIYW5kbGVyKHRoaXMuX2lkZW50aWZpZXIoaWQpLCBoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgY2xlYXJEY3NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzUGFyc2VyLmNsZWFySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGlkKSk7XG4gIH1cbiAgcHVibGljIHNldERjc0hhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBEY3NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZGNzUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElPc2NIYW5kbGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9vc2NQYXJzZXIuYWRkSGFuZGxlcihpZGVudCwgaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIHNldE9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlciwgaGFuZGxlcjogSU9zY0hhbmRsZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9vc2NQYXJzZXIuc2V0SGFuZGxlcihpZGVudCwgaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIGNsZWFyT3NjSGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fb3NjUGFyc2VyLmNsZWFySGFuZGxlcihpZGVudCk7XG4gIH1cbiAgcHVibGljIHNldE9zY0hhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBPc2NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fb3NjUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRFcnJvckhhbmRsZXIoY2FsbGJhY2s6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZSk6IHZvaWQge1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlciA9IGNhbGxiYWNrO1xuICB9XG4gIHB1YmxpYyBjbGVhckVycm9ySGFuZGxlcigpOiB2b2lkIHtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXIgPSB0aGlzLl9lcnJvckhhbmRsZXJGYjtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX29zY1BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX2Rjc1BhcnNlci5yZXNldCgpO1xuICAgIHRoaXMuX3BhcmFtcy5yZXNldCgpO1xuICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgLy8gWkRNXG4gICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICB9XG5cblxuXG4gIC8qKlxuICAgKiBQYXJzZSBVVEYzMiBjb2RlcG9pbnRzIGluIGBkYXRhYCB1cCB0byBgbGVuZ3RoYC5cbiAgICpcbiAgICogTm90ZTogRm9yIHNldmVyYWwgYWN0aW9ucyB3aXRoIGhpZ2ggZGF0YSBsb2FkIHRoZSBwYXJzaW5nIGlzIG9wdGltaXplZFxuICAgKiBieSB1c2luZyBsb2NhbCByZWFkIGFoZWFkIGxvb3BzIHdpdGggaGFyZGNvZGVkIGNvbmRpdGlvbnMgdG9cbiAgICogYXZvaWQgY29zdGx5IHRhYmxlIGxvb2t1cHMuIE1ha2Ugc3VyZSB0aGF0IGFueSBjaGFuZ2Ugb2YgdGFibGUgdmFsdWVzXG4gICAqIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBsb29wIGNvbmRpdGlvbnMgYXMgd2VsbCBhbmQgdmljZSB2ZXJzYS5cbiAgICogQWZmZWN0ZWQgc3RhdGVzL2FjdGlvbnM6XG4gICAqIC0gR1JPVU5EOlBSSU5UXG4gICAqIC0gQ1NJX1BBUkFNOlBBUkFNXG4gICAqIC0gRENTX1BBUkFNOlBBUkFNXG4gICAqIC0gT1NDX1NUUklORzpPU0NfUFVUXG4gICAqIC0gRENTX1BBU1NUSFJPVUdIOkRDU19QVVRcbiAgICovXG4gIHB1YmxpYyBwYXJzZShkYXRhOiBVaW50MzJBcnJheSwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY29kZSA9IDA7XG4gICAgbGV0IHRyYW5zaXRpb24gPSAwO1xuICAgIGxldCBjdXJyZW50U3RhdGUgPSB0aGlzLmN1cnJlbnRTdGF0ZTtcbiAgICBjb25zdCBvc2MgPSB0aGlzLl9vc2NQYXJzZXI7XG4gICAgY29uc3QgZGNzID0gdGhpcy5fZGNzUGFyc2VyO1xuICAgIGxldCBjb2xsZWN0ID0gdGhpcy5fY29sbGVjdDtcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLl9wYXJhbXM7XG4gICAgY29uc3QgdGFibGU6IFVpbnQ4QXJyYXkgPSB0aGlzLlRSQU5TSVRJT05TLnRhYmxlO1xuXG4gICAgLy8gcHJvY2VzcyBpbnB1dCBzdHJpbmdcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBjb2RlID0gZGF0YVtpXTtcblxuICAgICAgLy8gbm9ybWFsIHRyYW5zaXRpb24gJiBhY3Rpb24gbG9va3VwXG4gICAgICB0cmFuc2l0aW9uID0gdGFibGVbY3VycmVudFN0YXRlIDw8IFRhYmxlQWNjZXNzLklOREVYX1NUQVRFX1NISUZUIHwgKGNvZGUgPCAweGEwID8gY29kZSA6IE5PTl9BU0NJSV9QUklOVEFCTEUpXTtcbiAgICAgIHN3aXRjaCAodHJhbnNpdGlvbiA+PiBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCkge1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5QUklOVDpcbiAgICAgICAgICAvLyByZWFkIGFoZWFkIHdpdGggbG9vcCB1bnJvbGxpbmdcbiAgICAgICAgICAvLyBOb3RlOiAweDIwIChTUCkgaXMgaW5jbHVkZWQsIDB4N0YgKERFTCkgaXMgZXhjbHVkZWRcbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IDsgKytqKSB7XG4gICAgICAgICAgICBpZiAoaiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKytqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pIDwgMHgyMCB8fCAoY29kZSA+IDB4N2UgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByaW50SGFuZGxlcihkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgrK2ogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwIHx8IChjb2RlID4gMHg3ZSAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCsraiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5FWEVDVVRFOlxuICAgICAgICAgIGlmICh0aGlzLl9leGVjdXRlSGFuZGxlcnNbY29kZV0pIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tjb2RlXSgpO1xuICAgICAgICAgIGVsc2UgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYihjb2RlKTtcbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0NvZGVwb2ludCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLklHTk9SRTpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRVJST1I6XG4gICAgICAgICAgY29uc3QgaW5qZWN0OiBJUGFyc2luZ1N0YXRlID0gdGhpcy5fZXJyb3JIYW5kbGVyKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwb3NpdGlvbjogaSxcbiAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgY3VycmVudFN0YXRlLFxuICAgICAgICAgICAgICBjb2xsZWN0LFxuICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgIGFib3J0OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKGluamVjdC5hYm9ydCkgcmV0dXJuO1xuICAgICAgICAgIC8vIGluamVjdCB2YWx1ZXM6IGN1cnJlbnRseSBub3QgaW1wbGVtZW50ZWRcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENIOlxuICAgICAgICAgIC8vIFRyaWdnZXIgQ1NJIEhhbmRsZXJcbiAgICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2NzaUhhbmRsZXJzW2NvbGxlY3QgPDwgOCB8IGNvZGVdO1xuICAgICAgICAgIGxldCBqID0gaGFuZGxlcnMgPyBoYW5kbGVycy5sZW5ndGggLSAxIDogLTE7XG4gICAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICAvLyB1bmRlZmluZWQgb3IgdHJ1ZSBtZWFucyBzdWNjZXNzIGFuZCB0byBzdG9wIGJ1YmJsaW5nXG4gICAgICAgICAgICBpZiAoaGFuZGxlcnNbal0ocGFyYW1zKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChqIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5fY3NpSGFuZGxlckZiKGNvbGxlY3QgPDwgOCB8IGNvZGUsIHBhcmFtcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucHJlY2VkaW5nQ29kZXBvaW50ID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uUEFSQU06XG4gICAgICAgICAgLy8gaW5uZXIgbG9vcDogZGlnaXRzICgweDMwIC0gMHgzOSkgYW5kIDsgKDB4M2IpIGFuZCA6ICgweDNhKVxuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICAgICAgICBjYXNlIDB4M2I6XG4gICAgICAgICAgICAgICAgcGFyYW1zLmFkZFBhcmFtKDApOyAgLy8gWkRNXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgMHgzYTpcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkU3ViUGFyYW0oLTEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OiAgLy8gMHgzMCAtIDB4MzlcbiAgICAgICAgICAgICAgICBwYXJhbXMuYWRkRGlnaXQoY29kZSAtIDQ4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlICgrK2kgPCBsZW5ndGggJiYgKGNvZGUgPSBkYXRhW2ldKSA+IDB4MmYgJiYgY29kZSA8IDB4M2MpO1xuICAgICAgICAgIGktLTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ09MTEVDVDpcbiAgICAgICAgICBjb2xsZWN0IDw8PSA4O1xuICAgICAgICAgIGNvbGxlY3QgfD0gY29kZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENIOlxuICAgICAgICAgIGNvbnN0IGhhbmRsZXJzRXNjID0gdGhpcy5fZXNjSGFuZGxlcnNbY29sbGVjdCA8PCA4IHwgY29kZV07XG4gICAgICAgICAgbGV0IGpqID0gaGFuZGxlcnNFc2MgPyBoYW5kbGVyc0VzYy5sZW5ndGggLSAxIDogLTE7XG4gICAgICAgICAgZm9yICg7IGpqID49IDA7IGpqLS0pIHtcbiAgICAgICAgICAgIC8vIHVuZGVmaW5lZCBvciB0cnVlIG1lYW5zIHN1Y2Nlc3MgYW5kIHRvIHN0b3AgYnViYmxpbmdcbiAgICAgICAgICAgIGlmIChoYW5kbGVyc0VzY1tqal0oKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChqaiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2VzY0hhbmRsZXJGYihjb2xsZWN0IDw8IDggfCBjb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5DTEVBUjpcbiAgICAgICAgICBwYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICBwYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgIGNvbGxlY3QgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfSE9PSzpcbiAgICAgICAgICBkY3MuaG9vayhjb2xsZWN0IDw8IDggfCBjb2RlLCBwYXJhbXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfUFVUOlxuICAgICAgICAgIC8vIGlubmVyIGxvb3AgLSBleGl0IERDU19QVVQ6IDB4MTgsIDB4MWEsIDB4MWIsIDB4N2YsIDB4ODAgLSAweDlmXG4gICAgICAgICAgLy8gdW5ob29rIHRyaWdnZXJlZCBieTogMHgxYiwgMHg5YyAoc3VjY2VzcykgYW5kIDB4MTgsIDB4MWEgKGFib3J0KVxuICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgOyArK2opIHtcbiAgICAgICAgICAgIGlmIChqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pID09PSAweDE4IHx8IGNvZGUgPT09IDB4MWEgfHwgY29kZSA9PT0gMHgxYiB8fCAoY29kZSA+IDB4N2YgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIGRjcy5wdXQoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5EQ1NfVU5IT09LOlxuICAgICAgICAgIGRjcy51bmhvb2soY29kZSAhPT0gMHgxOCAmJiBjb2RlICE9PSAweDFhKTtcbiAgICAgICAgICBpZiAoY29kZSA9PT0gMHgxYikgdHJhbnNpdGlvbiB8PSBQYXJzZXJTdGF0ZS5FU0NBUEU7XG4gICAgICAgICAgcGFyYW1zLnJlc2V0KCk7XG4gICAgICAgICAgcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICAgICAgICBjb2xsZWN0ID0gMDtcbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0NvZGVwb2ludCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLk9TQ19TVEFSVDpcbiAgICAgICAgICBvc2Muc3RhcnQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uT1NDX1BVVDpcbiAgICAgICAgICAvLyBpbm5lciBsb29wOiAweDIwIChTUCkgaW5jbHVkZWQsIDB4N0YgKERFTCkgaW5jbHVkZWRcbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoaiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdmICYmIGNvZGUgPD0gMHg5ZikpIHtcbiAgICAgICAgICAgICAgb3NjLnB1dChkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLk9TQ19FTkQ6XG4gICAgICAgICAgb3NjLmVuZChjb2RlICE9PSAweDE4ICYmIGNvZGUgIT09IDB4MWEpO1xuICAgICAgICAgIGlmIChjb2RlID09PSAweDFiKSB0cmFuc2l0aW9uIHw9IFBhcnNlclN0YXRlLkVTQ0FQRTtcbiAgICAgICAgICBwYXJhbXMucmVzZXQoKTtcbiAgICAgICAgICBwYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgIGNvbGxlY3QgPSAwO1xuICAgICAgICAgIHRoaXMucHJlY2VkaW5nQ29kZXBvaW50ID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRTdGF0ZSA9IHRyYW5zaXRpb24gJiBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX1NUQVRFX01BU0s7XG4gICAgfVxuXG4gICAgLy8gc2F2ZSBjb2xsZWN0ZWQgaW50ZXJtZWRpYXRlc1xuICAgIHRoaXMuX2NvbGxlY3QgPSBjb2xsZWN0O1xuXG4gICAgLy8gc2F2ZSBzdGF0ZVxuICAgIHRoaXMuY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPc2NIYW5kbGVyLCBJSGFuZGxlckNvbGxlY3Rpb24sIE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUsIElPc2NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IE9zY1N0YXRlLCBQQVlMT0FEX0xJTUlUIH0gZnJvbSAnY29tbW9uL3BhcnNlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgdXRmMzJUb1N0cmluZyB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cblxuZXhwb3J0IGNsYXNzIE9zY1BhcnNlciBpbXBsZW1lbnRzIElPc2NQYXJzZXIge1xuICBwcml2YXRlIF9zdGF0ZSA9IE9zY1N0YXRlLlNUQVJUO1xuICBwcml2YXRlIF9pZCA9IC0xO1xuICBwcml2YXRlIF9oYW5kbGVyczogSUhhbmRsZXJDb2xsZWN0aW9uPElPc2NIYW5kbGVyPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHByaXZhdGUgX2hhbmRsZXJGYjogT3NjRmFsbGJhY2tIYW5kbGVyVHlwZSA9ICgpID0+IHsgfTtcblxuICBwdWJsaWMgYWRkSGFuZGxlcihpZGVudDogbnVtYmVyLCBoYW5kbGVyOiBJT3NjSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICBpZiAodGhpcy5faGFuZGxlcnNbaWRlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJzW2lkZW50XSA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVyTGlzdCA9IHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgICBoYW5kbGVyTGlzdC5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJJbmRleCA9IGhhbmRsZXJMaXN0LmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChoYW5kbGVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgaGFuZGxlckxpc3Quc3BsaWNlKGhhbmRsZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHB1YmxpYyBzZXRIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElPc2NIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnNbaWRlbnRdID0gW2hhbmRsZXJdO1xuICB9XG4gIHB1YmxpYyBjbGVhckhhbmRsZXIoaWRlbnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9oYW5kbGVyc1tpZGVudF0pIGRlbGV0ZSB0aGlzLl9oYW5kbGVyc1tpZGVudF07XG4gIH1cbiAgcHVibGljIHNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBPc2NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlckZiID0gaGFuZGxlcjtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2hhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9oYW5kbGVyRmIgPSAoKSA9PiB7fTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICAvLyBjbGVhbnVwIGhhbmRsZXJzIGlmIHBheWxvYWQgd2FzIGFscmVhZHkgc2VudFxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuUEFZTE9BRCkge1xuICAgICAgdGhpcy5lbmQoZmFsc2UpO1xuICAgIH1cbiAgICB0aGlzLl9pZCA9IC0xO1xuICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuU1RBUlQ7XG4gIH1cblxuICBwcml2YXRlIF9zdGFydCgpOiB2b2lkIHtcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXTtcbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsICdTVEFSVCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBqID0gaGFuZGxlcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgaGFuZGxlcnNbal0uc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9wdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLl9oYW5kbGVyc1t0aGlzLl9pZF07XG4gICAgaWYgKCFoYW5kbGVycykge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCAnUFVUJywgdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSBoYW5kbGVycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBoYW5kbGVyc1tqXS5wdXQoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZW5kKHN1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBvdGhlciB0aGFuIHRoZSBvbGQgY29kZSB3ZSBhbHdheXMgaGF2ZSB0byBjYWxsIC5lbmRcbiAgICAvLyB0byBrZWVwIHRoZSBidWJibGluZyB3ZSB1c2UgYHN1Y2Nlc3NgIHRvIGluZGljYXRlXG4gICAgLy8gd2hldGhlciBhIGhhbmRsZXIgc2hvdWxkIGV4ZWN1dGVcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXTtcbiAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsICdFTkQnLCBzdWNjZXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGogPSBoYW5kbGVycy5sZW5ndGggLSAxO1xuICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChoYW5kbGVyc1tqXS5lbmQoc3VjY2VzcykgIT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGotLTtcbiAgICAgIC8vIGNsZWFudXAgbGVmdCBvdmVyIGhhbmRsZXJzXG4gICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgaGFuZGxlcnNbal0uZW5kKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgLy8gYWx3YXlzIHJlc2V0IGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuX2lkID0gLTE7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5JRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXQgZGF0YSB0byBjdXJyZW50IE9TQyBjb21tYW5kLlxuICAgKiBFeHBlY3RzIHRoZSBpZGVudGlmaWVyIG9mIHRoZSBPU0MgY29tbWFuZCBpbiB0aGUgZm9ybVxuICAgKiBPU0MgaWQgOyBwYXlsb2FkIFNUL0JFTFxuICAgKiBQYXlsb2FkIGNodW5rcyBhcmUgbm90IGZ1cnRoZXIgcHJvY2Vzc2VkIGFuZCBnZXRcbiAgICogZGlyZWN0bHkgcGFzc2VkIHRvIHRoZSBoYW5kbGVycy5cbiAgICovXG4gIHB1YmxpYyBwdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBPc2NTdGF0ZS5BQk9SVCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLklEKSB7XG4gICAgICB3aGlsZSAoc3RhcnQgPCBlbmQpIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGRhdGFbc3RhcnQrK107XG4gICAgICAgIGlmIChjb2RlID09PSAweDNiKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5QQVlMT0FEO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvZGUgPCAweDMwIHx8IDB4MzkgPCBjb2RlKSB7XG4gICAgICAgICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5BQk9SVDtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2lkID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuX2lkID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pZCA9IHRoaXMuX2lkICogMTAgKyBjb2RlIC0gNDg7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuUEFZTE9BRCAmJiBlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgIHRoaXMuX3B1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5kaWNhdGVzIGVuZCBvZiBhbiBPU0MgY29tbWFuZC5cbiAgICogV2hldGhlciB0aGUgT1NDIGdvdCBhYm9ydGVkIG9yIGZpbmlzaGVkIG5vcm1hbGx5XG4gICAqIGlzIGluZGljYXRlZCBieSBgc3VjY2Vzc2AuXG4gICAqL1xuICBwdWJsaWMgZW5kKHN1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLlNUQVJUKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGRvIG5vdGhpbmcgaWYgY29tbWFuZCB3YXMgZmF1bHR5XG4gICAgaWYgKHRoaXMuX3N0YXRlICE9PSBPc2NTdGF0ZS5BQk9SVCkge1xuICAgICAgLy8gaWYgd2UgYXJlIHN0aWxsIGluIElEIHN0YXRlIGFuZCBnZXQgYW4gZWFybHkgZW5kXG4gICAgICAvLyBtZWFucyB0aGF0IHRoZSBjb21tYW5kIGhhcyBubyBwYXlsb2FkIHRodXMgd2Ugc3RpbGwgaGF2ZVxuICAgICAgLy8gdG8gYW5ub3VuY2UgU1RBUlQgYW5kIHNlbmQgRU5EIHJpZ2h0IGFmdGVyXG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLklEKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9lbmQoc3VjY2Vzcyk7XG4gICAgfVxuICAgIHRoaXMuX2lkID0gLTE7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5TVEFSVDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlbmllbnQgY2xhc3MgdG8gYWxsb3cgYXR0YWNoaW5nIHN0cmluZyBiYXNlZCBoYW5kbGVyIGZ1bmN0aW9uc1xuICogYXMgT1NDIGhhbmRsZXJzLlxuICovXG5leHBvcnQgY2xhc3MgT3NjSGFuZGxlciBpbXBsZW1lbnRzIElPc2NIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfZGF0YSA9ICcnO1xuICBwcml2YXRlIF9oaXRMaW1pdDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2hhbmRsZXI6IChkYXRhOiBzdHJpbmcpID0+IGFueSkge31cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9oaXRMaW1pdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhICs9IHV0ZjMyVG9TdHJpbmcoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgaWYgKHRoaXMuX2RhdGEubGVuZ3RoID4gUEFZTE9BRF9MSU1JVCkge1xuICAgICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgICAgdGhpcy5faGl0TGltaXQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBlbmQoc3VjY2VzczogYm9vbGVhbik6IGFueSB7XG4gICAgbGV0IHJldDtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc3VjY2Vzcykge1xuICAgICAgcmV0ID0gdGhpcy5faGFuZGxlcih0aGlzLl9kYXRhKTtcbiAgICB9XG4gICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuaW1wb3J0IHsgSVBhcmFtcywgUGFyYW1zQXJyYXkgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcblxuLy8gbWF4IHZhbHVlIHN1cHBvcnRlZCBmb3IgYSBzaW5nbGUgcGFyYW0vc3VicGFyYW0gKGNsYW1wZWQgdG8gcG9zaXRpdmUgaW50MzIgcmFuZ2UpXG5jb25zdCBNQVhfVkFMVUUgPSAweDdGRkZGRkZGO1xuLy8gbWF4IGFsbG93ZWQgc3VicGFyYW1zIGZvciBhIHNpbmdsZSBzZXF1ZW5jZSAoaGFyZGNvZGVkIGxpbWl0YXRpb24pXG5jb25zdCBNQVhfU1VCUEFSQU1TID0gMjU2O1xuXG4vKipcbiAqIFBhcmFtcyBzdG9yYWdlIGNsYXNzLlxuICogVGhpcyB0eXBlIGlzIHVzZWQgYnkgdGhlIHBhcnNlciB0byBhY2N1bXVsYXRlIHNlcXVlbmNlIHBhcmFtZXRlcnMgYW5kIHN1YiBwYXJhbWV0ZXJzXG4gKiBhbmQgdHJhbnNtaXQgdGhlbSB0byB0aGUgaW5wdXQgaGFuZGxlciBhY3Rpb25zLlxuICpcbiAqIE5PVEVTOlxuICogIC0gcGFyYW1zIG9iamVjdCBmb3IgYWN0aW9uIGhhbmRsZXJzIGlzIGJvcnJvd2VkLCB1c2UgYC50b0FycmF5YCBvciBgLmNsb25lYCB0byBnZXQgYSBjb3B5XG4gKiAgLSBuZXZlciByZWFkIGJleW9uZCBgcGFyYW1zLmxlbmd0aCAtIDFgIChsaWtlbHkgdG8gY29udGFpbiBhcmJpdHJhcnkgZGF0YSlcbiAqICAtIGAuZ2V0U3ViUGFyYW1zYCByZXR1cm5zIGEgYm9ycm93ZWQgdHlwZWQgYXJyYXksIHVzZSBgLmdldFN1YlBhcmFtc0FsbGAgZm9yIGNsb25lZCBzdWIgcGFyYW1zXG4gKiAgLSBoYXJkY29kZWQgbGltaXRhdGlvbnM6XG4gKiAgICAtIG1heC4gdmFsdWUgZm9yIGEgc2luZ2xlIChzdWIpIHBhcmFtIGlzIDJeMzEgLSAxIChncmVhdGVyIHZhbHVlcyBhcmUgY2xhbXBlZCB0byB0aGF0KVxuICogICAgLSBtYXguIDI1NiBzdWIgcGFyYW1zIHBvc3NpYmxlXG4gKiAgICAtIG5lZ2F0aXZlIHZhbHVlcyBhcmUgbm90IGFsbG93ZWQgYmVzaWRlIC0xIChwbGFjZWhvbGRlciBmb3IgZGVmYXVsdCB2YWx1ZSlcbiAqXG4gKiBBYm91dCBaRE0gKFplcm8gRGVmYXVsdCBNb2RlKTpcbiAqIFpETSBpcyBub3Qgb3JjaGVzdHJhdGVkIGJ5IHRoaXMgY2xhc3MuIElmIHRoZSBwYXJzZXIgaXMgaW4gWkRNLFxuICogaXQgc2hvdWxkIGFkZCAwIGZvciBlbXB0eSBwYXJhbXMsIG90aGVyd2lzZSAtMS4gVGhpcyBkb2VzIG5vdCBhcHBseVxuICogdG8gc3VicGFyYW1zLCBlbXB0eSBzdWJwYXJhbXMgc2hvdWxkIGFsd2F5cyBiZSBhZGRlZCB3aXRoIC0xLlxuICovXG5leHBvcnQgY2xhc3MgUGFyYW1zIGltcGxlbWVudHMgSVBhcmFtcyB7XG4gIC8vIHBhcmFtcyBzdG9yZSBhbmQgbGVuZ3RoXG4gIHB1YmxpYyBwYXJhbXM6IEludDMyQXJyYXk7XG4gIHB1YmxpYyBsZW5ndGg6IG51bWJlcjtcblxuICAvLyBzdWIgcGFyYW1zIHN0b3JlIGFuZCBsZW5ndGhcbiAgcHJvdGVjdGVkIF9zdWJQYXJhbXM6IEludDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfc3ViUGFyYW1zTGVuZ3RoOiBudW1iZXI7XG5cbiAgLy8gc3ViIHBhcmFtcyBvZmZzZXRzIGZyb20gcGFyYW06IHBhcmFtIGlkeCAtLT4gW3N0YXJ0LCBlbmRdIG9mZnNldFxuICBwcml2YXRlIF9zdWJQYXJhbXNJZHg6IFVpbnQxNkFycmF5O1xuICBwcml2YXRlIF9yZWplY3REaWdpdHM6IGJvb2xlYW47XG4gIHByaXZhdGUgX3JlamVjdFN1YkRpZ2l0czogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfZGlnaXRJc1N1YjogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgYFBhcmFtc2AgdHlwZSBmcm9tIEpTIGFycmF5IHJlcHJlc2VudGF0aW9uLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tQXJyYXkodmFsdWVzOiBQYXJhbXNBcnJheSk6IFBhcmFtcyB7XG4gICAgY29uc3QgcGFyYW1zID0gbmV3IFBhcmFtcygpO1xuICAgIGlmICghdmFsdWVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgLy8gc2tpcCBsZWFkaW5nIHN1YiBwYXJhbXNcbiAgICBmb3IgKGxldCBpID0gKHZhbHVlc1swXSBpbnN0YW5jZW9mIEFycmF5KSA/IDEgOiAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdmFsdWUubGVuZ3RoOyArK2spIHtcbiAgICAgICAgICBwYXJhbXMuYWRkU3ViUGFyYW0odmFsdWVba10pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMuYWRkUGFyYW0odmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBtYXhMZW5ndGggbWF4IGxlbmd0aCBvZiBzdG9yYWJsZSBwYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSBtYXhTdWJQYXJhbXNMZW5ndGggbWF4IGxlbmd0aCBvZiBzdG9yYWJsZSBzdWIgcGFyYW1ldGVyc1xuICAgKi9cbiAgY29uc3RydWN0b3IocHVibGljIG1heExlbmd0aDogbnVtYmVyID0gMzIsIHB1YmxpYyBtYXhTdWJQYXJhbXNMZW5ndGg6IG51bWJlciA9IDMyKSB7XG4gICAgaWYgKG1heFN1YlBhcmFtc0xlbmd0aCA+IE1BWF9TVUJQQVJBTVMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbWF4U3ViUGFyYW1zTGVuZ3RoIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAyNTYnKTtcbiAgICB9XG4gICAgdGhpcy5wYXJhbXMgPSBuZXcgSW50MzJBcnJheShtYXhMZW5ndGgpO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zdWJQYXJhbXMgPSBuZXcgSW50MzJBcnJheShtYXhTdWJQYXJhbXNMZW5ndGgpO1xuICAgIHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA9IDA7XG4gICAgdGhpcy5fc3ViUGFyYW1zSWR4ID0gbmV3IFVpbnQxNkFycmF5KG1heExlbmd0aCk7XG4gICAgdGhpcy5fcmVqZWN0RGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fcmVqZWN0U3ViRGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fZGlnaXRJc1N1YiA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb25lIG9iamVjdC5cbiAgICovXG4gIHB1YmxpYyBjbG9uZSgpOiBQYXJhbXMge1xuICAgIGNvbnN0IG5ld1BhcmFtcyA9IG5ldyBQYXJhbXModGhpcy5tYXhMZW5ndGgsIHRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKTtcbiAgICBuZXdQYXJhbXMucGFyYW1zLnNldCh0aGlzLnBhcmFtcyk7XG4gICAgbmV3UGFyYW1zLmxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgIG5ld1BhcmFtcy5fc3ViUGFyYW1zLnNldCh0aGlzLl9zdWJQYXJhbXMpO1xuICAgIG5ld1BhcmFtcy5fc3ViUGFyYW1zTGVuZ3RoID0gdGhpcy5fc3ViUGFyYW1zTGVuZ3RoO1xuICAgIG5ld1BhcmFtcy5fc3ViUGFyYW1zSWR4LnNldCh0aGlzLl9zdWJQYXJhbXNJZHgpO1xuICAgIG5ld1BhcmFtcy5fcmVqZWN0RGlnaXRzID0gdGhpcy5fcmVqZWN0RGlnaXRzO1xuICAgIG5ld1BhcmFtcy5fcmVqZWN0U3ViRGlnaXRzID0gdGhpcy5fcmVqZWN0U3ViRGlnaXRzO1xuICAgIG5ld1BhcmFtcy5fZGlnaXRJc1N1YiA9IHRoaXMuX2RpZ2l0SXNTdWI7XG4gICAgcmV0dXJuIG5ld1BhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBKUyBhcnJheSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBwYXJhbWV0ZXJzIGFuZCBzdWIgcGFyYW1ldGVycy5cbiAgICogVGhlIGFycmF5IGlzIHN0cnVjdHVyZWQgYXMgZm9sbG93czpcbiAgICogICAgc2VxdWVuY2U6IFwiMTsyOjM6NDs1Ojo2XCJcbiAgICogICAgYXJyYXkgICA6IFsxLCAyLCBbMywgNF0sIDUsIFstMSwgNl1dXG4gICAqL1xuICBwdWJsaWMgdG9BcnJheSgpOiBQYXJhbXNBcnJheSB7XG4gICAgY29uc3QgcmVzOiBQYXJhbXNBcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgcmVzLnB1c2godGhpcy5wYXJhbXNbaV0pO1xuICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaV0gPj4gODtcbiAgICAgIGNvbnN0IGVuZCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpXSAmIDB4RkY7XG4gICAgICBpZiAoZW5kIC0gc3RhcnQgPiAwKSB7XG4gICAgICAgIHJlcy5wdXNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX3N1YlBhcmFtcywgc3RhcnQsIGVuZCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRvIGluaXRpYWwgZW1wdHkgc3RhdGUuXG4gICAqL1xuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA9IDA7XG4gICAgdGhpcy5fcmVqZWN0RGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fcmVqZWN0U3ViRGlnaXRzID0gZmFsc2U7XG4gICAgdGhpcy5fZGlnaXRJc1N1YiA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHBhcmFtZXRlciB2YWx1ZS5cbiAgICogYFBhcmFtc2Agb25seSBzdG9yZXMgdXAgdG8gYG1heExlbmd0aGAgcGFyYW1ldGVycywgYW55IGxhdGVyXG4gICAqIHBhcmFtZXRlciB3aWxsIGJlIGlnbm9yZWQuXG4gICAqIE5vdGU6IFZUIGRldmljZXMgb25seSBzdG9yZWQgdXAgdG8gMTYgdmFsdWVzLCB4dGVybSBzZWVtcyB0b1xuICAgKiBzdG9yZSB1cCB0byAzMC5cbiAgICovXG4gIHB1YmxpYyBhZGRQYXJhbSh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGlnaXRJc1N1YiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLmxlbmd0aCA+PSB0aGlzLm1heExlbmd0aCkge1xuICAgICAgdGhpcy5fcmVqZWN0RGlnaXRzID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHZhbHVlIDwgLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndmFsdWVzIGxlc3NlciB0aGFuIC0xIGFyZSBub3QgYWxsb3dlZCcpO1xuICAgIH1cbiAgICB0aGlzLl9zdWJQYXJhbXNJZHhbdGhpcy5sZW5ndGhdID0gdGhpcy5fc3ViUGFyYW1zTGVuZ3RoIDw8IDggfCB0aGlzLl9zdWJQYXJhbXNMZW5ndGg7XG4gICAgdGhpcy5wYXJhbXNbdGhpcy5sZW5ndGgrK10gPSB2YWx1ZSA+IE1BWF9WQUxVRSA/IE1BWF9WQUxVRSA6IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHN1YiBwYXJhbWV0ZXIgdmFsdWUuXG4gICAqIFRoZSBzdWIgcGFyYW1ldGVyIGlzIGF1dG9tYXRpY2FsbHkgYXNzb2NpYXRlZCB3aXRoIHRoZSBsYXN0IHBhcmFtZXRlciB2YWx1ZS5cbiAgICogVGh1cyBpdCBpcyBub3QgcG9zc2libGUgdG8gYWRkIGEgc3VicGFyYW1ldGVyIHdpdGhvdXQgYW55IHBhcmFtZXRlciBhZGRlZCB5ZXQuXG4gICAqIGBQYXJhbXNgIG9ubHkgc3RvcmVzIHVwIHRvIGBzdWJQYXJhbXNMZW5ndGhgIHN1YiBwYXJhbWV0ZXJzLCBhbnkgbGF0ZXJcbiAgICogc3ViIHBhcmFtZXRlciB3aWxsIGJlIGlnbm9yZWQuXG4gICAqL1xuICBwdWJsaWMgYWRkU3ViUGFyYW0odmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSB0cnVlO1xuICAgIGlmICghdGhpcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3JlamVjdERpZ2l0cyB8fCB0aGlzLl9zdWJQYXJhbXNMZW5ndGggPj0gdGhpcy5tYXhTdWJQYXJhbXNMZW5ndGgpIHtcbiAgICAgIHRoaXMuX3JlamVjdFN1YkRpZ2l0cyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSA8IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWQnKTtcbiAgICB9XG4gICAgdGhpcy5fc3ViUGFyYW1zW3RoaXMuX3N1YlBhcmFtc0xlbmd0aCsrXSA9IHZhbHVlID4gTUFYX1ZBTFVFID8gTUFYX1ZBTFVFIDogdmFsdWU7XG4gICAgdGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoIC0gMV0rKztcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHBhcmFtZXRlciBhdCBpbmRleCBgaWR4YCBoYXMgc3ViIHBhcmFtZXRlcnMuXG4gICAqL1xuICBwdWJsaWMgaGFzU3ViUGFyYW1zKGlkeDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICgodGhpcy5fc3ViUGFyYW1zSWR4W2lkeF0gJiAweEZGKSAtICh0aGlzLl9zdWJQYXJhbXNJZHhbaWR4XSA+PiA4KSA+IDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBzdWIgcGFyYW1ldGVycyBmb3IgcGFyYW1ldGVyIGF0IGluZGV4IGBpZHhgLlxuICAgKiBOb3RlOiBUaGUgdmFsdWVzIGFyZSBib3Jyb3dlZCwgdGh1cyB5b3UgbmVlZCB0byBjb3B5XG4gICAqIHRoZSB2YWx1ZXMgaWYgeW91IG5lZWQgdG8gaG9sZCB0aGVtIGluIG5vbmxvY2FsIHNjb3BlLlxuICAgKi9cbiAgcHVibGljIGdldFN1YlBhcmFtcyhpZHg6IG51bWJlcik6IEludDMyQXJyYXkgfCBudWxsIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpZHhdID4+IDg7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fc3ViUGFyYW1zSWR4W2lkeF0gJiAweEZGO1xuICAgIGlmIChlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJQYXJhbXMuc3ViYXJyYXkoc3RhcnQsIGVuZCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbGwgc3ViIHBhcmFtZXRlcnMgYXMge2lkeDogc3VicGFyYW1zfSBtYXBwaW5nLlxuICAgKiBOb3RlOiBUaGUgdmFsdWVzIGFyZSBub3QgYm9ycm93ZWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0U3ViUGFyYW1zQWxsKCk6IHtbaWR4OiBudW1iZXJdOiBJbnQzMkFycmF5fSB7XG4gICAgY29uc3QgcmVzdWx0OiB7W2lkeDogbnVtYmVyXTogSW50MzJBcnJheX0gPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fc3ViUGFyYW1zSWR4W2ldID4+IDg7XG4gICAgICBjb25zdCBlbmQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaV0gJiAweEZGO1xuICAgICAgaWYgKGVuZCAtIHN0YXJ0ID4gMCkge1xuICAgICAgICByZXN1bHRbaV0gPSB0aGlzLl9zdWJQYXJhbXMuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgc2luZ2xlIGRpZ2l0IHZhbHVlIHRvIGN1cnJlbnQgcGFyYW1ldGVyLlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgdGhlIHBhcnNlciB0byBhY2NvdW50IGRpZ2l0cyBvbiBhIGNoYXIgYnkgY2hhciBiYXNpcy5cbiAgICovXG4gIHB1YmxpYyBhZGREaWdpdCh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGxlbmd0aDtcbiAgICBpZiAodGhpcy5fcmVqZWN0RGlnaXRzXG4gICAgICB8fCAhKGxlbmd0aCA9IHRoaXMuX2RpZ2l0SXNTdWIgPyB0aGlzLl9zdWJQYXJhbXNMZW5ndGggOiB0aGlzLmxlbmd0aClcbiAgICAgIHx8ICh0aGlzLl9kaWdpdElzU3ViICYmIHRoaXMuX3JlamVjdFN1YkRpZ2l0cylcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuX2RpZ2l0SXNTdWIgPyB0aGlzLl9zdWJQYXJhbXMgOiB0aGlzLnBhcmFtcztcbiAgICBjb25zdCBjdXIgPSBzdG9yZVtsZW5ndGggLSAxXTtcbiAgICBzdG9yZVtsZW5ndGggLSAxXSA9IH5jdXIgPyBNYXRoLm1pbihjdXIgKiAxMCArIHZhbHVlLCBNQVhfVkFMVUUpIDogdmFsdWU7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL0J1ZmZlclNldCc7XG5pbXBvcnQgeyBJQnVmZmVyU2V0LCBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5cbmV4cG9ydCBjb25zdCBNSU5JTVVNX0NPTFMgPSAyOyAvLyBMZXNzIHRoYW4gMiBjYW4gbWVzcyB3aXRoIHdpZGUgY2hhcnNcbmV4cG9ydCBjb25zdCBNSU5JTVVNX1JPV1MgPSAxO1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyU2VydmljZSBpbXBsZW1lbnRzIElCdWZmZXJTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGNvbHM6IG51bWJlcjtcbiAgcHVibGljIHJvd3M6IG51bWJlcjtcbiAgcHVibGljIGJ1ZmZlcnM6IElCdWZmZXJTZXQ7XG5cbiAgcHVibGljIGdldCBidWZmZXIoKTogSUJ1ZmZlciB7IHJldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlOyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuY29scyA9IE1hdGgubWF4KF9vcHRpb25zU2VydmljZS5vcHRpb25zLmNvbHMsIE1JTklNVU1fQ09MUyk7XG4gICAgdGhpcy5yb3dzID0gTWF0aC5tYXgoX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMucm93cywgTUlOSU1VTV9ST1dTKTtcbiAgICB0aGlzLmJ1ZmZlcnMgPSBuZXcgQnVmZmVyU2V0KF9vcHRpb25zU2VydmljZSwgdGhpcyk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5jb2xzID0gY29scztcbiAgICB0aGlzLnJvd3MgPSByb3dzO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVycyA9IG5ldyBCdWZmZXJTZXQodGhpcy5fb3B0aW9uc1NlcnZpY2UsIHRoaXMpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSUNvcmVTZXJ2aWNlLCBJQ29yZU1vdXNlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElFdmVudCB9IGZyb20gJ2NvbW1vbi9FdmVudEVtaXR0ZXInO1xuaW1wb3J0IHsgSUNvcmVNb3VzZVByb3RvY29sLCBJQ29yZU1vdXNlRXZlbnQsIENvcmVNb3VzZUVuY29kaW5nLCBDb3JlTW91c2VFdmVudFR5cGUsIENvcmVNb3VzZUJ1dHRvbiwgQ29yZU1vdXNlQWN0aW9uIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZGVmYXVsdCBwcm90b2NvbHMuXG4gKi9cbmNvbnN0IERFRkFVTFRfUFJPVE9DT0xTOiB7W2tleTogc3RyaW5nXTogSUNvcmVNb3VzZVByb3RvY29sfSA9IHtcbiAgLyoqXG4gICAqIE5PTkVcbiAgICogRXZlbnRzOiBub25lXG4gICAqIE1vZGlmaWVyczogbm9uZVxuICAgKi9cbiAgTk9ORToge1xuICAgIGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlLk5PTkUsXG4gICAgcmVzdHJpY3Q6ICgpID0+IGZhbHNlXG4gIH0sXG4gIC8qKlxuICAgKiBYMTBcbiAgICogRXZlbnRzOiBtb3VzZWRvd25cbiAgICogTW9kaWZpZXJzOiBub25lXG4gICAqL1xuICBYMTA6IHtcbiAgICBldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOLFxuICAgIHJlc3RyaWN0OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAvLyBubyB3aGVlbCwgbm8gbW92ZSwgbm8gdXBcbiAgICAgIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMIHx8IGUuYWN0aW9uICE9PSBDb3JlTW91c2VBY3Rpb24uRE9XTikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBubyBtb2RpZmllcnNcbiAgICAgIGUuY3RybCA9IGZhbHNlO1xuICAgICAgZS5hbHQgPSBmYWxzZTtcbiAgICAgIGUuc2hpZnQgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIFZUMjAwXG4gICAqIEV2ZW50czogbW91c2Vkb3duIC8gbW91c2V1cCAvIHdoZWVsXG4gICAqIE1vZGlmaWVyczogYWxsXG4gICAqL1xuICBWVDIwMDoge1xuICAgIGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04gfCBDb3JlTW91c2VFdmVudFR5cGUuVVAgfCBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUwsXG4gICAgcmVzdHJpY3Q6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIG5vIG1vdmVcbiAgICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogRFJBR1xuICAgKiBFdmVudHM6IG1vdXNlZG93biAvIG1vdXNldXAgLyB3aGVlbCAvIG1vdXNlZHJhZ1xuICAgKiBNb2RpZmllcnM6IGFsbFxuICAgKi9cbiAgRFJBRzoge1xuICAgIGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04gfCBDb3JlTW91c2VFdmVudFR5cGUuVVAgfCBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUwgfCBDb3JlTW91c2VFdmVudFR5cGUuRFJBRyxcbiAgICByZXN0cmljdDogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gbm8gbW92ZSB3aXRob3V0IGJ1dHRvblxuICAgICAgaWYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRSAmJiBlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLk5PTkUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogQU5ZXG4gICAqIEV2ZW50czogYWxsIG1vdXNlIHJlbGF0ZWQgZXZlbnRzXG4gICAqIE1vZGlmaWVyczogYWxsXG4gICAqL1xuICBBTlk6IHtcbiAgICBldmVudHM6XG4gICAgICBDb3JlTW91c2VFdmVudFR5cGUuRE9XTiB8IENvcmVNb3VzZUV2ZW50VHlwZS5VUCB8IENvcmVNb3VzZUV2ZW50VHlwZS5XSEVFTFxuICAgICAgfCBDb3JlTW91c2VFdmVudFR5cGUuRFJBRyB8IENvcmVNb3VzZUV2ZW50VHlwZS5NT1ZFLFxuICAgIHJlc3RyaWN0OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB0cnVlXG4gIH1cbn07XG5cbmNvbnN0IGVudW0gTW9kaWZpZXJzIHtcbiAgU0hJRlQgPSA0LFxuICBBTFQgPSA4LFxuICBDVFJMID0gMTZcbn1cblxuLy8gaGVscGVyIGZvciBkZWZhdWx0IGVuY29kZXJzIHRvIGdlbmVyYXRlIHRoZSBldmVudCBjb2RlLlxuZnVuY3Rpb24gZXZlbnRDb2RlKGU6IElDb3JlTW91c2VFdmVudCwgaXNTR1I6IGJvb2xlYW4pOiBudW1iZXIge1xuICBsZXQgY29kZSA9IChlLmN0cmwgPyBNb2RpZmllcnMuQ1RSTCA6IDApIHwgKGUuc2hpZnQgPyBNb2RpZmllcnMuU0hJRlQgOiAwKSB8IChlLmFsdCA/IE1vZGlmaWVycy5BTFQgOiAwKTtcbiAgaWYgKGUuYnV0dG9uID09PSBDb3JlTW91c2VCdXR0b24uV0hFRUwpIHtcbiAgICBjb2RlIHw9IDY0O1xuICAgIGNvZGUgfD0gZS5hY3Rpb247XG4gIH0gZWxzZSB7XG4gICAgY29kZSB8PSBlLmJ1dHRvbiAmIDM7XG4gICAgaWYgKGUuYnV0dG9uICYgNCkge1xuICAgICAgY29kZSB8PSA2NDtcbiAgICB9XG4gICAgaWYgKGUuYnV0dG9uICYgOCkge1xuICAgICAgY29kZSB8PSAxMjg7XG4gICAgfVxuICAgIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLk1PVkUpIHtcbiAgICAgIGNvZGUgfD0gQ29yZU1vdXNlQWN0aW9uLk1PVkU7XG4gICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLlVQICYmICFpc1NHUikge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIC0gb25seSBTR1IgY2FuIHJlcG9ydCBidXR0b24gb24gcmVsZWFzZVxuICAgICAgLy8gYWxsIG90aGVycyBoYXZlIHRvIGdvIHdpdGggTk9ORVxuICAgICAgY29kZSB8PSBDb3JlTW91c2VCdXR0b24uTk9ORTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvZGU7XG59XG5cbmNvbnN0IFMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXG4vKipcbiAqIFN1cHBvcnRlZCBkZWZhdWx0IGVuY29kaW5ncy5cbiAqL1xuY29uc3QgREVGQVVMVF9FTkNPRElOR1M6IHtba2V5OiBzdHJpbmddOiBDb3JlTW91c2VFbmNvZGluZ30gPSB7XG4gIC8qKlxuICAgKiBERUZBVUxUIC0gQ1NJIE0gUGIgUHggUHlcbiAgICogU2luZ2xlIGJ5dGUgZW5jb2RpbmcgZm9yIGNvb3JkcyBhbmQgZXZlbnQgY29kZS5cbiAgICogQ2FuIGVuY29kZSB2YWx1ZXMgdXAgdG8gMjIzLiBUaGUgRW5jb2Rpbmcgb2YgaGlnaGVyXG4gICAqIHZhbHVlcyBpcyBub3QgVVRGLTggY29tcGF0aWJsZSAoYW5kIGN1cnJlbnRseSBsaW1pdGVkXG4gICAqIHRvIDk1IGluIHh0ZXJtLmpzKS5cbiAgICovXG4gIERFRkFVTFQ6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICBsZXQgcGFyYW1zID0gW2V2ZW50Q29kZShlLCBmYWxzZSkgKyAzMiwgZS5jb2wgKyAzMiwgZS5yb3cgKyAzMl07XG4gICAgLy8gRklYTUU6IHdlIGFyZSBjdXJyZW50bHkgbGltaXRlZCB0byBBU0NJSSByYW5nZVxuICAgIHBhcmFtcyA9IHBhcmFtcy5tYXAodiA9PiAodiA+IDEyNykgPyAxMjcgOiB2KTtcbiAgICAvLyBGSVhFRDogcGFyYW1zID0gcGFyYW1zLm1hcCh2ID0+ICh2ID4gMjU1KSA/IDAgOiB2YWx1ZSk7XG4gICAgcmV0dXJuIGBcXHgxYltNJHtTKHBhcmFtc1swXSl9JHtTKHBhcmFtc1sxXSl9JHtTKHBhcmFtc1syXSl9YDtcbiAgfSxcbiAgLyoqXG4gICAqIFVURjggLSBDU0kgTSBQYiBQeCBQeVxuICAgKiBTYW1lIGFzIERFRkFVTFQsIGJ1dCB3aXRoIG9wdGlvbmFsIDItYnl0ZSBVVEY4XG4gICAqIGVuY29kaW5nIGZvciB2YWx1ZXMgPiAyMjMgKGNhbiBlbmNvZGUgdXAgdG8gMjAxNSkuXG4gICAqL1xuICBVVEY4OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgbGV0IHBhcmFtcyA9IFtldmVudENvZGUoZSwgZmFsc2UpICsgMzIsIGUuY29sICsgMzIsIGUucm93ICsgMzJdO1xuICAgIC8vIGxpbWl0IHRvIDItYnl0ZSBVVEY4XG4gICAgcGFyYW1zID0gcGFyYW1zLm1hcCh2ID0+ICh2ID4gMjA0NykgPyAwIDogdik7XG4gICAgcmV0dXJuIGBcXHgxYltNJHtTKHBhcmFtc1swXSl9JHtTKHBhcmFtc1sxXSl9JHtTKHBhcmFtc1syXSl9YDtcbiAgfSxcbiAgLyoqXG4gICAqIFNHUiAtIENTSSA8IFBiIDsgUHggOyBQeSBNfG1cbiAgICogTm8gZW5jb2RpbmcgbGltaXRhdGlvbi5cbiAgICogQ2FuIHJlcG9ydCBidXR0b24gb24gcmVsZWFzZSBhbmQgd29ya3Mgd2l0aCBhIHdlbGwgZm9ybWVkIHNlcXVlbmNlLlxuICAgKi9cbiAgU0dSOiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgZmluYWwgPSAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5VUCAmJiBlLmJ1dHRvbiAhPT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMKSA/ICdtJyA6ICdNJztcbiAgICByZXR1cm4gYFxceDFiWzwke2V2ZW50Q29kZShlLCB0cnVlKX07JHtlLmNvbH07JHtlLnJvd30ke2ZpbmFsfWA7XG4gIH0sXG4gIC8qKlxuICAgKiBVUlhWVCAtIENTSSBQYiA7IFB4IDsgUHkgTVxuICAgKiBTYW1lIGJ1dHRvbiBlbmNvZGluZyBhcyBkZWZhdWx0LCBkZWNpbWFsIGVuY29kaW5nIGZvciBjb29yZHMuXG4gICAqIEFtYmlndWl0eSB3aXRoIG90aGVyIHNlcXVlbmNlcywgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICAgKi9cbiAgVVJYVlQ6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICByZXR1cm4gYFxceDFiWyR7ZXZlbnRDb2RlKGUsIGZhbHNlKSArIDMyfTske2UuY29sfTske2Uucm93fU1gO1xuICB9XG59O1xuXG4vKipcbiAqIENvcmVNb3VzZVNlcnZpY2VcbiAqXG4gKiBQcm92aWRlcyBtb3VzZSB0cmFja2luZyByZXBvcnRzIHdpdGggZGlmZmVyZW50IHByb3RvY29scyBhbmQgZW5jb2RpbmdzLlxuICogIC0gcHJvdG9jb2xzOiBOT05FIChkZWZhdWx0KSwgWDEwLCBWVDIwMCwgRFJBRywgQU5ZXG4gKiAgLSBlbmNvZGluZ3M6IERFRkFVTFQsIFNHUiwgVVRGOCwgVVJYVlRcbiAqXG4gKiBDdXN0b20gcHJvdG9jb2xzL2VuY29kaW5ncyBjYW4gYmUgYWRkZWQgYnkgYGFkZFByb3RvY29sYCAvIGBhZGRFbmNvZGluZ2AuXG4gKiBUbyBhY3RpdmF0ZSBhIHByb3RvY29sL2VuY29kaW5nLCBzZXQgYGFjdGl2ZVByb3RvY29sYCAvIGBhY3RpdmVFbmNvZGluZ2AuXG4gKiBTd2l0Y2hpbmcgYSBwcm90b2NvbCB3aWxsIHNlbmQgYSBub3RpZmljYXRpb24gZXZlbnQgYG9uUHJvdG9jb2xDaGFuZ2VgXG4gKiB3aXRoIGEgbGlzdCBvZiBuZWVkZWQgZXZlbnRzIHRvIHRyYWNrLlxuICpcbiAqIFRoZSBzZXJ2aWNlIGhhbmRsZXMgdGhlIG1vdXNlIHRyYWNraW5nIHN0YXRlIGFuZCBkZWNpZGVzIHdoZXRoZXIgdG8gc2VuZFxuICogYSB0cmFja2luZyByZXBvcnQgdG8gdGhlIGJhY2tlbmQgYmFzZWQgb24gcHJvdG9jb2wgYW5kIGVuY29kaW5nIGxpbWl0YXRpb25zLlxuICogVG8gc2VuZCBhIG1vdXNlIGV2ZW50IGNhbGwgYHRyaWdnZXJNb3VzZUV2ZW50YC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvcmVNb3VzZVNlcnZpY2UgaW1wbGVtZW50cyBJQ29yZU1vdXNlU2VydmljZSB7XG4gIHByaXZhdGUgX3Byb3RvY29sczoge1tuYW1lOiBzdHJpbmddOiBJQ29yZU1vdXNlUHJvdG9jb2x9ID0ge307XG4gIHByaXZhdGUgX2VuY29kaW5nczoge1tuYW1lOiBzdHJpbmddOiBDb3JlTW91c2VFbmNvZGluZ30gPSB7fTtcbiAgcHJpdmF0ZSBfYWN0aXZlUHJvdG9jb2w6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIF9hY3RpdmVFbmNvZGluZzogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgX29uUHJvdG9jb2xDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPENvcmVNb3VzZUV2ZW50VHlwZT4oKTtcbiAgcHJpdmF0ZSBfbGFzdEV2ZW50OiBJQ29yZU1vdXNlRXZlbnQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlXG4gICkge1xuICAgIC8vIHJlZ2lzdGVyIGRlZmF1bHQgcHJvdG9jb2xzIGFuZCBlbmNvZGluZ3NcbiAgICBPYmplY3Qua2V5cyhERUZBVUxUX1BST1RPQ09MUykuZm9yRWFjaChuYW1lID0+IHRoaXMuYWRkUHJvdG9jb2wobmFtZSwgREVGQVVMVF9QUk9UT0NPTFNbbmFtZV0pKTtcbiAgICBPYmplY3Qua2V5cyhERUZBVUxUX0VOQ09ESU5HUykuZm9yRWFjaChuYW1lID0+IHRoaXMuYWRkRW5jb2RpbmcobmFtZSwgREVGQVVMVF9FTkNPRElOR1NbbmFtZV0pKTtcbiAgICAvLyBjYWxsIHJlc2V0IHRvIHNldCBkZWZhdWx0c1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRQcm90b2NvbChuYW1lOiBzdHJpbmcsIHByb3RvY29sOiBJQ29yZU1vdXNlUHJvdG9jb2wpOiB2b2lkIHtcbiAgICB0aGlzLl9wcm90b2NvbHNbbmFtZV0gPSBwcm90b2NvbDtcbiAgfVxuXG4gIHB1YmxpYyBhZGRFbmNvZGluZyhuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBDb3JlTW91c2VFbmNvZGluZyk6IHZvaWQge1xuICAgIHRoaXMuX2VuY29kaW5nc1tuYW1lXSA9IGVuY29kaW5nO1xuICB9XG5cbiAgcHVibGljIGdldCBhY3RpdmVQcm90b2NvbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVQcm90b2NvbDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlUHJvdG9jb2wobmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9wcm90b2NvbHNbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBwcm90b2NvbCBcIiR7bmFtZX1cImApO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVQcm90b2NvbCA9IG5hbWU7XG4gICAgdGhpcy5fb25Qcm90b2NvbENoYW5nZS5maXJlKHRoaXMuX3Byb3RvY29sc1tuYW1lXS5ldmVudHMpO1xuICB9XG5cbiAgcHVibGljIGdldCBhY3RpdmVFbmNvZGluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVFbmNvZGluZztcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlRW5jb2RpbmcobmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9lbmNvZGluZ3NbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBlbmNvZGluZyBcIiR7bmFtZX1cImApO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVFbmNvZGluZyA9IG5hbWU7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5hY3RpdmVQcm90b2NvbCA9ICdOT05FJztcbiAgICB0aGlzLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgIHRoaXMuX2xhc3RFdmVudCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgdG8gYW5ub3VuY2UgY2hhbmdlcyBpbiBtb3VzZSB0cmFja2luZy5cbiAgICovXG4gIHB1YmxpYyBnZXQgb25Qcm90b2NvbENoYW5nZSgpOiBJRXZlbnQ8Q29yZU1vdXNlRXZlbnRUeXBlPiB7XG4gICAgcmV0dXJuIHRoaXMuX29uUHJvdG9jb2xDaGFuZ2UuZXZlbnQ7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSBtb3VzZSBldmVudCB0byBiZSBzZW50LlxuICAgKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGV2ZW50IHBhc3NlZCBhbGwgcHJvdG9jb2wgcmVzdHJpY3Rpb25zIGFuZCBhIHJlcG9ydFxuICAgKiB3YXMgc2VudCwgb3RoZXJ3aXNlIGZhbHNlLiBUaGUgcmV0dXJuIHZhbHVlIG1heSBiZSB1c2VkIHRvIGRlY2lkZSB3aGV0aGVyXG4gICAqIHRoZSBkZWZhdWx0IGV2ZW50IGFjdGlvbiBpbiB0aGUgYm93c2VyIGNvbXBvbmVudCBzaG91bGQgYmUgb21pdHRlZC5cbiAgICpcbiAgICogTm90ZTogVGhlIG1ldGhvZCB3aWxsIGNoYW5nZSB2YWx1ZXMgb2YgdGhlIGdpdmVuIGV2ZW50IG9iamVjdFxuICAgKiB0byBmdWxsZmlsbCBwcm90b2NvbCBhbmQgZW5jb2RpbmcgcmVzdHJpY3Rpb25zLlxuICAgKi9cbiAgcHVibGljIHRyaWdnZXJNb3VzZUV2ZW50KGU6IElDb3JlTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIC8vIHJhbmdlIGNoZWNrIGZvciBjb2wvcm93XG4gICAgaWYgKGUuY29sIDwgMCB8fCBlLmNvbCA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHNcbiAgICAgICAgfHwgZS5yb3cgPCAwIHx8IGUucm93ID49IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGZpbHRlciBub25zZW5zZSBjb21iaW5hdGlvbnMgb2YgYnV0dG9uICsgYWN0aW9uXG4gICAgaWYgKGUuYnV0dG9uID09PSBDb3JlTW91c2VCdXR0b24uV0hFRUwgJiYgZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLk5PTkUgJiYgZS5hY3Rpb24gIT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlLmJ1dHRvbiAhPT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMICYmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLkxFRlQgfHwgZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5SSUdIVCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyByZXBvcnQgMS1iYXNlZCBjb29yZHNcbiAgICBlLmNvbCsrO1xuICAgIGUucm93Kys7XG5cbiAgICAvLyBkZWJvdW5jZSBtb3ZlIGF0IGdyaWQgbGV2ZWxcbiAgICBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFICYmIHRoaXMuX2xhc3RFdmVudCAmJiB0aGlzLl9jb21wYXJlRXZlbnRzKHRoaXMuX2xhc3RFdmVudCwgZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBhcHBseSBwcm90b2NvbCByZXN0cmljdGlvbnNcbiAgICBpZiAoIXRoaXMuX3Byb3RvY29sc1t0aGlzLl9hY3RpdmVQcm90b2NvbF0ucmVzdHJpY3QoZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBlbmNvZGUgcmVwb3J0IGFuZCBzZW5kXG4gICAgY29uc3QgcmVwb3J0ID0gdGhpcy5fZW5jb2RpbmdzW3RoaXMuX2FjdGl2ZUVuY29kaW5nXShlKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHJlcG9ydCwgdHJ1ZSk7XG5cbiAgICB0aGlzLl9sYXN0RXZlbnQgPSBlO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgZXhwbGFpbkV2ZW50cyhldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZSk6IHtbZXZlbnQ6IHN0cmluZ106IGJvb2xlYW59IHtcbiAgICByZXR1cm4ge1xuICAgICAgRE9XTjogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04pLFxuICAgICAgVVA6ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5VUCksXG4gICAgICBEUkFHOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuRFJBRyksXG4gICAgICBNT1ZFOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuTU9WRSksXG4gICAgICBXSEVFTDogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIF9jb21wYXJlRXZlbnRzKGUxOiBJQ29yZU1vdXNlRXZlbnQsIGUyOiBJQ29yZU1vdXNlRXZlbnQpOiBib29sZWFuIHtcbiAgICBpZiAoZTEuY29sICE9PSBlMi5jb2wpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEucm93ICE9PSBlMi5yb3cpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEuYnV0dG9uICE9PSBlMi5idXR0b24pIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEuYWN0aW9uICE9PSBlMi5hY3Rpb24pIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEuY3RybCAhPT0gZTIuY3RybCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5hbHQgIT09IGUyLmFsdCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChlMS5zaGlmdCAhPT0gZTIuc2hpZnQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ29yZVNlcnZpY2UsIElMb2dTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UsIElCdWZmZXJTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJRGVjUHJpdmF0ZU1vZGVzIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IGNsb25lIH0gZnJvbSAnY29tbW9uL0Nsb25lJztcblxuY29uc3QgREVGQVVMVF9ERUNfUFJJVkFURV9NT0RFUzogSURlY1ByaXZhdGVNb2RlcyA9IE9iamVjdC5mcmVlemUoe1xuICBhcHBsaWNhdGlvbkN1cnNvcktleXM6IGZhbHNlXG59KTtcblxuZXhwb3J0IGNsYXNzIENvcmVTZXJ2aWNlIGltcGxlbWVudHMgSUNvcmVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGRlY1ByaXZhdGVNb2RlczogSURlY1ByaXZhdGVNb2RlcztcblxuICBwcml2YXRlIF9vbkRhdGEgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgcHVibGljIGdldCBvbkRhdGEoKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fb25EYXRhLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uVXNlcklucHV0ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwdWJsaWMgZ2V0IG9uVXNlcklucHV0KCk6IElFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vblVzZXJJbnB1dC5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRPRE86IE1vdmUgdGhpcyBpbnRvIGEgc2VydmljZVxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Njcm9sbFRvQm90dG9tOiAoKSA9PiB2b2lkLFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUxvZ1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfbG9nU2VydmljZTogSUxvZ1NlcnZpY2UsXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuZGVjUHJpdmF0ZU1vZGVzID0gY2xvbmUoREVGQVVMVF9ERUNfUFJJVkFURV9NT0RFUyk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5kZWNQcml2YXRlTW9kZXMgPSBjbG9uZShERUZBVUxUX0RFQ19QUklWQVRFX01PREVTKTtcbiAgfVxuXG4gIHB1YmxpYyB0cmlnZ2VyRGF0YUV2ZW50KGRhdGE6IHN0cmluZywgd2FzVXNlcklucHV0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICAvLyBQcmV2ZW50cyBhbGwgZXZlbnRzIHRvIHB0eSBwcm9jZXNzIGlmIHN0ZGluIGlzIGRpc2FibGVkXG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuZGlzYWJsZVN0ZGluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5wdXQgaXMgYmVpbmcgc2VudCB0byB0aGUgdGVybWluYWwsIHRoZSB0ZXJtaW5hbCBzaG91bGQgZm9jdXMgdGhlIHByb21wdC5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBpZiAoYnVmZmVyLnliYXNlICE9PSBidWZmZXIueWRpc3ApIHtcbiAgICAgIHRoaXMuX3Njcm9sbFRvQm90dG9tKCk7XG4gICAgfVxuXG4gICAgLy8gRmlyZSBvblVzZXJJbnB1dCBzbyBsaXN0ZW5lcnMgY2FuIHJlYWN0IGFzIHdlbGwgKGVnLiBjbGVhciBzZWxlY3Rpb24pXG4gICAgaWYgKHdhc1VzZXJJbnB1dCkge1xuICAgICAgdGhpcy5fb25Vc2VySW5wdXQuZmlyZSgpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgb25EYXRhIEFQSVxuICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ3NlbmRpbmcgZGF0YScsIGRhdGEpO1xuICAgIHRoaXMuX29uRGF0YS5maXJlKGRhdGEpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJRGlydHlSb3dTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNsYXNzIERpcnR5Um93U2VydmljZSBpbXBsZW1lbnRzIElEaXJ0eVJvd1NlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwcml2YXRlIF9zdGFydCE6IG51bWJlcjtcbiAgcHJpdmF0ZSBfZW5kITogbnVtYmVyO1xuXG4gIHB1YmxpYyBnZXQgc3RhcnQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX3N0YXJ0OyB9XG4gIHB1YmxpYyBnZXQgZW5kKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9lbmQ7IH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5jbGVhclJhbmdlKCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXJSYW5nZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9zdGFydCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG4gICAgdGhpcy5fZW5kID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgfVxuXG4gIHB1YmxpYyBtYXJrRGlydHkoeTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHkgPCB0aGlzLl9zdGFydCkge1xuICAgICAgdGhpcy5fc3RhcnQgPSB5O1xuICAgIH0gZWxzZSBpZiAoeSA+IHRoaXMuX2VuZCkge1xuICAgICAgdGhpcy5fZW5kID0geTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbWFya1JhbmdlRGlydHkoeTE6IG51bWJlciwgeTI6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh5MSA+IHkyKSB7XG4gICAgICBjb25zdCB0ZW1wID0geTE7XG4gICAgICB5MSA9IHkyO1xuICAgICAgeTIgPSB0ZW1wO1xuICAgIH1cbiAgICBpZiAoeTEgPCB0aGlzLl9zdGFydCkge1xuICAgICAgdGhpcy5fc3RhcnQgPSB5MTtcbiAgICB9XG4gICAgaWYgKHkyID4gdGhpcy5fZW5kKSB7XG4gICAgICB0aGlzLl9lbmQgPSB5MjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbWFya0FsbERpcnR5KCk6IHZvaWQge1xuICAgIHRoaXMubWFya1JhbmdlRGlydHkoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogVGhpcyB3YXMgaGVhdmlseSBpbnNwaXJlZCBmcm9tIG1pY3Jvc29mdC92c2NvZGUncyBkZXBlbmRlbmN5IGluamVjdGlvbiBzeXN0ZW0gKE1JVCkuXG4gKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBJSW5zdGFudGlhdGlvblNlcnZpY2UsIElTZXJ2aWNlSWRlbnRpZmllciB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBnZXRTZXJ2aWNlRGVwZW5kZW5jaWVzIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VSZWdpc3RyeSc7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlQ29sbGVjdGlvbiB7XG5cbiAgcHJpdmF0ZSBfZW50cmllcyA9IG5ldyBNYXA8SVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGFueT4oKTtcblxuICBjb25zdHJ1Y3RvciguLi5lbnRyaWVzOiBbSVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGFueV1bXSkge1xuICAgIGZvciAoY29uc3QgW2lkLCBzZXJ2aWNlXSBvZiBlbnRyaWVzKSB7XG4gICAgICB0aGlzLnNldChpZCwgc2VydmljZSk7XG4gICAgfVxuICB9XG5cbiAgc2V0PFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4sIGluc3RhbmNlOiBUKTogVCB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZW50cmllcy5nZXQoaWQpO1xuICAgIHRoaXMuX2VudHJpZXMuc2V0KGlkLCBpbnN0YW5jZSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZvckVhY2goY2FsbGJhY2s6IChpZDogSVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGluc3RhbmNlOiBhbnkpID0+IGFueSk6IHZvaWQge1xuICAgIHRoaXMuX2VudHJpZXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gY2FsbGJhY2soa2V5LCB2YWx1ZSkpO1xuICB9XG5cbiAgaGFzKGlkOiBJU2VydmljZUlkZW50aWZpZXI8YW55Pik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9lbnRyaWVzLmhhcyhpZCk7XG4gIH1cblxuICBnZXQ8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPik6IFQge1xuICAgIHJldHVybiB0aGlzLl9lbnRyaWVzLmdldChpZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEluc3RhbnRpYXRpb25TZXJ2aWNlIGltcGxlbWVudHMgSUluc3RhbnRpYXRpb25TZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBfc2VydmljZXM6IFNlcnZpY2VDb2xsZWN0aW9uID0gbmV3IFNlcnZpY2VDb2xsZWN0aW9uKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2VydmljZXMuc2V0KElJbnN0YW50aWF0aW9uU2VydmljZSwgdGhpcyk7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VydmljZTxUPihpZDogSVNlcnZpY2VJZGVudGlmaWVyPFQ+LCBpbnN0YW5jZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX3NlcnZpY2VzLnNldChpZCwgaW5zdGFuY2UpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUluc3RhbmNlPFQ+KGN0b3I6IGFueSwgLi4uYXJnczogYW55W10pOiBhbnkge1xuICAgIGNvbnN0IHNlcnZpY2VEZXBlbmRlbmNpZXMgPSBnZXRTZXJ2aWNlRGVwZW5kZW5jaWVzKGN0b3IpLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KTtcblxuICAgIGNvbnN0IHNlcnZpY2VBcmdzOiBhbnlbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgZGVwZW5kZW5jeSBvZiBzZXJ2aWNlRGVwZW5kZW5jaWVzKSB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gdGhpcy5fc2VydmljZXMuZ2V0KGRlcGVuZGVuY3kuaWQpO1xuICAgICAgaWYgKCFzZXJ2aWNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgW2NyZWF0ZUluc3RhbmNlXSAke2N0b3IubmFtZX0gZGVwZW5kcyBvbiBVTktOT1dOIHNlcnZpY2UgJHtkZXBlbmRlbmN5LmlkfS5gKTtcbiAgICAgIH1cbiAgICAgIHNlcnZpY2VBcmdzLnB1c2goc2VydmljZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RTZXJ2aWNlQXJnUG9zID0gc2VydmljZURlcGVuZGVuY2llcy5sZW5ndGggPiAwID8gc2VydmljZURlcGVuZGVuY2llc1swXS5pbmRleCA6IGFyZ3MubGVuZ3RoO1xuXG4gICAgLy8gY2hlY2sgZm9yIGFyZ3VtZW50IG1pc21hdGNoZXMsIGFkanVzdCBzdGF0aWMgYXJncyBpZiBuZWVkZWRcbiAgICBpZiAoYXJncy5sZW5ndGggIT09IGZpcnN0U2VydmljZUFyZ1Bvcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBbY3JlYXRlSW5zdGFuY2VdIEZpcnN0IHNlcnZpY2UgZGVwZW5kZW5jeSBvZiAke2N0b3IubmFtZX0gYXQgcG9zaXRpb24gJHtmaXJzdFNlcnZpY2VBcmdQb3MgKyAxfSBjb25mbGljdHMgd2l0aCAke2FyZ3MubGVuZ3RofSBzdGF0aWMgYXJndW1lbnRzYCk7XG4gICAgfVxuXG4gICAgLy8gbm93IGNyZWF0ZSB0aGUgaW5zdGFuY2VcbiAgICByZXR1cm4gPFQ+bmV3IGN0b3IoLi4uWy4uLmFyZ3MsIC4uLnNlcnZpY2VBcmdzXSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUxvZ1NlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmludGVyZmFjZSBJQ29uc29sZSB7XG4gIGxvZyhtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkO1xuICBlcnJvcihtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkO1xuICBpbmZvKG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIHRyYWNlKG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIHdhcm4obWVzc2FnZT86IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbn1cblxuLy8gY29uc29sZSBpcyBhdmFpbGFibGUgb24gYm90aCBub2RlLmpzIGFuZCBicm93c2VyIGNvbnRleHRzIGJ1dCB0aGUgY29tbW9uXG4vLyBtb2R1bGUgZG9lc24ndCBkZXBlbmQgb24gdGhlbSBzbyB3ZSBuZWVkIHRvIGV4cGxpY2l0bHkgZGVjbGFyZSBpdC5cbmRlY2xhcmUgY29uc3QgY29uc29sZTogSUNvbnNvbGU7XG5cblxuZXhwb3J0IGVudW0gTG9nTGV2ZWwge1xuICBERUJVRyA9IDAsXG4gIElORk8gPSAxLFxuICBXQVJOID0gMixcbiAgRVJST1IgPSAzLFxuICBPRkYgPSA0XG59XG5cbmNvbnN0IG9wdGlvbnNLZXlUb0xvZ0xldmVsOiB7IFtrZXk6IHN0cmluZ106IExvZ0xldmVsIH0gPSB7XG4gIGRlYnVnOiBMb2dMZXZlbC5ERUJVRyxcbiAgaW5mbzogTG9nTGV2ZWwuSU5GTyxcbiAgd2FybjogTG9nTGV2ZWwuV0FSTixcbiAgZXJyb3I6IExvZ0xldmVsLkVSUk9SLFxuICBvZmY6IExvZ0xldmVsLk9GRlxufTtcblxuY29uc3QgTE9HX1BSRUZJWCA9ICd4dGVybS5qczogJztcblxuZXhwb3J0IGNsYXNzIExvZ1NlcnZpY2UgaW1wbGVtZW50cyBJTG9nU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHByaXZhdGUgX2xvZ0xldmVsITogTG9nTGV2ZWw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHRoaXMuX3VwZGF0ZUxvZ0xldmVsKCk7XG4gICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2Uoa2V5ID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICdsb2dMZXZlbCcpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlTG9nTGV2ZWwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUxvZ0xldmVsKCk6IHZvaWQge1xuICAgIHRoaXMuX2xvZ0xldmVsID0gb3B0aW9uc0tleVRvTG9nTGV2ZWxbdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dMZXZlbF07XG4gIH1cblxuICBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcsIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgY29uc29sZS5sb2cuY2FsbChjb25zb2xlLCBMT0dfUFJFRklYICsgbWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIGluZm8obWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWwuSU5GTykge1xuICAgICAgY29uc29sZS5pbmZvLmNhbGwoY29uc29sZSwgTE9HX1BSRUZJWCArIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICB3YXJuKG1lc3NhZ2U6IHN0cmluZywgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xvZ0xldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcbiAgICAgIGNvbnNvbGUud2Fybi5jYWxsKGNvbnNvbGUsIExPR19QUkVGSVggKyBtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IuY2FsbChjb25zb2xlLCBMT0dfUFJFRklYICsgbWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJT3B0aW9uc1NlcnZpY2UsIElUZXJtaW5hbE9wdGlvbnMsIElQYXJ0aWFsVGVybWluYWxPcHRpb25zIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciwgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBpc01hYyB9IGZyb20gJ2NvbW1vbi9QbGF0Zm9ybSc7XG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gJ2NvbW1vbi9DbG9uZSc7XG5cbi8vIFNvdXJjZTogaHR0cHM6Ly9mcmVlc291bmQub3JnL3Blb3BsZS9hbHRlbWFyay9zb3VuZHMvNDU3NTkvXG4vLyBUaGlzIHNvdW5kIGlzIHJlbGVhc2VkIHVuZGVyIHRoZSBDcmVhdGl2ZSBDb21tb25zIEF0dHJpYnV0aW9uIDMuMCBVbnBvcnRlZFxuLy8gKENDIEJZIDMuMCkgbGljZW5zZS4gSXQgd2FzIGNyZWF0ZWQgYnkgJ2FsdGVtYXJrJy4gTm8gbW9kaWZpY2F0aW9ucyBoYXZlIGJlZW5cbi8vIG1hZGUsIGFwYXJ0IGZyb20gdGhlIGNvbnZlcnNpb24gdG8gYmFzZTY0LlxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQkVMTF9TT1VORCA9ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0JBQUJYUVZaRlptMTBJQkFBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBWkdGMFlRUUJBQURwQUZnQ3dBTWxCWm9HL3dkbUNjb0tSQXlwRFE4UGJSREJFUVFUT3hSdEZZY1dsQmVQR0lVWlhob2lHODhiY0J6N0hISWR6aDBXSGxNZVp4NTFIbWtlVXg0V0hzOGRhaDBBSFh3YzNoczlHNHNheFJueUdCSVlHQmNRRnY4VTRSUEFFb1lSUUJBQ0Q3ME5Xd3dIQzZnSk93aldCbG9GN2dPQkFoQUJrZjhiL3F2OFIvdmUrWGY0SWZlNzlXLzBKZlBaOFovd2RlOU43aWp0RSt3VTZ4dnFNK2xiNkg3bncrWVg1bXJseHVRejVNemplK01hNDlmaW9lS0Q0blhpWWVKeTRwSGl0T0wwNGovam4rTU41SVBrRk9XczVVM21EZWZNNTUvb2dPbDM2bTdyZE95RTdhYnV5dThEOFVueWovUGc5RC8ycWZjYitZbjYvdnVLL1FqL2xBQWxBZz09JztcblxuLy8gVE9ETzogRnJlZXplP1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BUSU9OUzogSVRlcm1pbmFsT3B0aW9ucyA9IE9iamVjdC5mcmVlemUoe1xuICBjb2xzOiA4MCxcbiAgcm93czogMjQsXG4gIGN1cnNvckJsaW5rOiBmYWxzZSxcbiAgY3Vyc29yU3R5bGU6ICdibG9jaycsXG4gIGJlbGxTb3VuZDogIERFRkFVTFRfQkVMTF9TT1VORCxcbiAgYmVsbFN0eWxlOiAnbm9uZScsXG4gIGRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzOiB0cnVlLFxuICBmb250RmFtaWx5OiAnY291cmllci1uZXcsIGNvdXJpZXIsIG1vbm9zcGFjZScsXG4gIGZvbnRTaXplOiAxNSxcbiAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gIGZvbnRXZWlnaHRCb2xkOiAnYm9sZCcsXG4gIGxpbmVIZWlnaHQ6IDEuMCxcbiAgbGV0dGVyU3BhY2luZzogMCxcbiAgbG9nTGV2ZWw6ICdpbmZvJyxcbiAgc2Nyb2xsYmFjazogMTAwMCxcbiAgc2NyZWVuUmVhZGVyTW9kZTogZmFsc2UsXG4gIG1hY09wdGlvbklzTWV0YTogZmFsc2UsXG4gIG1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uOiBmYWxzZSxcbiAgZGlzYWJsZVN0ZGluOiBmYWxzZSxcbiAgYWxsb3dUcmFuc3BhcmVuY3k6IGZhbHNlLFxuICB0YWJTdG9wV2lkdGg6IDgsXG4gIHRoZW1lOiB7fSxcbiAgcmlnaHRDbGlja1NlbGVjdHNXb3JkOiBpc01hYyxcbiAgcmVuZGVyZXJUeXBlOiAnY2FudmFzJyxcbiAgd2luZG93c01vZGU6IGZhbHNlLFxuXG4gIGNvbnZlcnRFb2w6IGZhbHNlLFxuICB0ZXJtTmFtZTogJ3h0ZXJtJyxcbiAgc2NyZWVuS2V5czogZmFsc2UsXG4gIGNhbmNlbEV2ZW50czogZmFsc2UsXG4gIHVzZUZsb3dDb250cm9sOiBmYWxzZSxcbiAgd29yZFNlcGFyYXRvcjogJyAoKVtde31cXCdcIidcbn0pO1xuXG4vKipcbiAqIFRoZSBzZXQgb2Ygb3B0aW9ucyB0aGF0IG9ubHkgaGF2ZSBhbiBlZmZlY3Qgd2hlbiBzZXQgaW4gdGhlIFRlcm1pbmFsIGNvbnN0cnVjdG9yLlxuICovXG5jb25zdCBDT05TVFJVQ1RPUl9PTkxZX09QVElPTlMgPSBbJ2NvbHMnLCAncm93cyddO1xuXG5leHBvcnQgY2xhc3MgT3B0aW9uc1NlcnZpY2UgaW1wbGVtZW50cyBJT3B0aW9uc1NlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgb3B0aW9uczogSVRlcm1pbmFsT3B0aW9ucztcblxuICBwcml2YXRlIF9vbk9wdGlvbkNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgZ2V0IG9uT3B0aW9uQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX29uT3B0aW9uQ2hhbmdlLmV2ZW50OyB9XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogSVBhcnRpYWxUZXJtaW5hbE9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBjbG9uZShERUZBVUxUX09QVElPTlMpO1xuICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goayA9PiB7XG4gICAgICBpZiAoayBpbiB0aGlzLm9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBvcHRpb25zW2sgYXMga2V5b2YgSVBhcnRpYWxUZXJtaW5hbE9wdGlvbnNdIGFzIGFueTtcbiAgICAgICAgdGhpcy5vcHRpb25zW2tdID0gbmV3VmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKCEoa2V5IGluIERFRkFVTFRfT1BUSU9OUykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gb3B0aW9uIHdpdGgga2V5IFwiJyArIGtleSArICdcIicpO1xuICAgIH1cbiAgICBpZiAoQ09OU1RSVUNUT1JfT05MWV9PUFRJT05TLmluZGV4T2Yoa2V5KSAhPT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgT3B0aW9uIFwiJHtrZXl9XCIgY2FuIG9ubHkgYmUgc2V0IGluIHRoZSBjb25zdHJ1Y3RvcmApO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zW2tleV0gPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFsdWUgPSB0aGlzLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKGtleSwgdmFsdWUpO1xuXG4gICAgLy8gRG9uJ3QgZmlyZSBhbiBvcHRpb24gY2hhbmdlIGV2ZW50IGlmIHRoZXkgZGlkbid0IGNoYW5nZVxuICAgIGlmICh0aGlzLm9wdGlvbnNba2V5XSA9PT0gdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgIHRoaXMuX29uT3B0aW9uQ2hhbmdlLmZpcmUoa2V5KTtcbiAgfVxuXG4gIHByaXZhdGUgX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24oa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBhbnkge1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlICdiZWxsU3R5bGUnOlxuICAgICAgY2FzZSAnY3Vyc29yU3R5bGUnOlxuICAgICAgY2FzZSAnZm9udFdlaWdodCc6XG4gICAgICBjYXNlICdmb250V2VpZ2h0Qm9sZCc6XG4gICAgICBjYXNlICdyZW5kZXJlclR5cGUnOlxuICAgICAgY2FzZSAnd29yZFNlcGFyYXRvcic6XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IERFRkFVTFRfT1BUSU9OU1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbGluZUhlaWdodCc6XG4gICAgICBjYXNlICd0YWJTdG9wV2lkdGgnOlxuICAgICAgICBpZiAodmFsdWUgPCAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiAxLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Njcm9sbGJhY2snOlxuICAgICAgICB2YWx1ZSA9IE1hdGgubWluKHZhbHVlLCA0Mjk0OTY3Mjk1KTtcbiAgICAgICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtrZXl9IGNhbm5vdCBiZSBsZXNzIHRoYW4gMCwgdmFsdWU6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiBzdHJpbmcpOiBhbnkge1xuICAgIGlmICghKGtleSBpbiBERUZBVUxUX09QVElPTlMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG9wdGlvbiB3aXRoIGtleSBcIiR7a2V5fVwiYCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wdGlvbnNba2V5XTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBUaGlzIHdhcyBoZWF2aWx5IGluc3BpcmVkIGZyb20gbWljcm9zb2Z0L3ZzY29kZSdzIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbSAoTUlUKS5cbiAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IElTZXJ2aWNlSWRlbnRpZmllciB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmNvbnN0IERJX1RBUkdFVCA9ICdkaSR0YXJnZXQnO1xuY29uc3QgRElfREVQRU5ERU5DSUVTID0gJ2RpJGRlcGVuZGVuY2llcyc7XG5cbmV4cG9ydCBjb25zdCBzZXJ2aWNlUmVnaXN0cnk6IE1hcDxzdHJpbmcsIElTZXJ2aWNlSWRlbnRpZmllcjxhbnk+PiA9IG5ldyBNYXAoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VEZXBlbmRlbmNpZXMoY3RvcjogYW55KTogeyBpZDogSVNlcnZpY2VJZGVudGlmaWVyPGFueT4sIGluZGV4OiBudW1iZXIsIG9wdGlvbmFsOiBib29sZWFuIH1bXSB7XG4gIHJldHVybiBjdG9yW0RJX0RFUEVOREVOQ0lFU10gfHwgW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZWNvcmF0b3I8VD4oaWQ6IHN0cmluZyk6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiB7XG4gIGlmIChzZXJ2aWNlUmVnaXN0cnkuaGFzKGlkKSkge1xuICAgIHJldHVybiBzZXJ2aWNlUmVnaXN0cnkuZ2V0KGlkKSE7XG4gIH1cblxuICBjb25zdCBkZWNvcmF0b3IgPSA8YW55PmZ1bmN0aW9uICh0YXJnZXQ6IEZ1bmN0aW9uLCBrZXk6IHN0cmluZywgaW5kZXg6IG51bWJlcik6IGFueSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQElTZXJ2aWNlTmFtZS1kZWNvcmF0b3IgY2FuIG9ubHkgYmUgdXNlZCB0byBkZWNvcmF0ZSBhIHBhcmFtZXRlcicpO1xuICAgIH1cblxuICAgIHN0b3JlU2VydmljZURlcGVuZGVuY3koZGVjb3JhdG9yLCB0YXJnZXQsIGluZGV4KTtcbiAgfTtcblxuICBkZWNvcmF0b3IudG9TdHJpbmcgPSAoKSA9PiBpZDtcblxuICBzZXJ2aWNlUmVnaXN0cnkuc2V0KGlkLCBkZWNvcmF0b3IpO1xuICByZXR1cm4gZGVjb3JhdG9yO1xufVxuXG5mdW5jdGlvbiBzdG9yZVNlcnZpY2VEZXBlbmRlbmN5KGlkOiBGdW5jdGlvbiwgdGFyZ2V0OiBGdW5jdGlvbiwgaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICBpZiAoKHRhcmdldCBhcyBhbnkpW0RJX1RBUkdFVF0gPT09IHRhcmdldCkge1xuICAgICh0YXJnZXQgYXMgYW55KVtESV9ERVBFTkRFTkNJRVNdLnB1c2goeyBpZCwgaW5kZXggfSk7XG4gIH0gZWxzZSB7XG4gICAgKHRhcmdldCBhcyBhbnkpW0RJX0RFUEVOREVOQ0lFU10gPSBbeyBpZCwgaW5kZXggfV07XG4gICAgKHRhcmdldCBhcyBhbnkpW0RJX1RBUkdFVF0gPSB0YXJnZXQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUV2ZW50IH0gZnJvbSAnY29tbW9uL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgeyBJQnVmZmVyLCBJQnVmZmVyU2V0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJRGVjUHJpdmF0ZU1vZGVzLCBJQ29yZU1vdXNlRXZlbnQsIENvcmVNb3VzZUVuY29kaW5nLCBJQ29yZU1vdXNlUHJvdG9jb2wsIENvcmVNb3VzZUV2ZW50VHlwZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcblxuZXhwb3J0IGNvbnN0IElCdWZmZXJTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElCdWZmZXJTZXJ2aWNlPignQnVmZmVyU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQnVmZmVyU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHJlYWRvbmx5IGNvbHM6IG51bWJlcjtcbiAgcmVhZG9ubHkgcm93czogbnVtYmVyO1xuICByZWFkb25seSBidWZmZXI6IElCdWZmZXI7XG4gIHJlYWRvbmx5IGJ1ZmZlcnM6IElCdWZmZXJTZXQ7XG5cbiAgLy8gVE9ETzogTW92ZSByZXNpemUgZXZlbnQgaGVyZVxuXG4gIHJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJQ29yZU1vdXNlU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ29yZU1vdXNlU2VydmljZT4oJ0NvcmVNb3VzZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNvcmVNb3VzZVNlcnZpY2Uge1xuICBhY3RpdmVQcm90b2NvbDogc3RyaW5nO1xuICBhY3RpdmVFbmNvZGluZzogc3RyaW5nO1xuICBhZGRQcm90b2NvbChuYW1lOiBzdHJpbmcsIHByb3RvY29sOiBJQ29yZU1vdXNlUHJvdG9jb2wpOiB2b2lkO1xuICBhZGRFbmNvZGluZyhuYW1lOiBzdHJpbmcsIGVuY29kaW5nOiBDb3JlTW91c2VFbmNvZGluZyk6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIGEgbW91c2UgZXZlbnQgdG8gYmUgc2VudC5cbiAgICpcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBldmVudCBwYXNzZWQgYWxsIHByb3RvY29sIHJlc3RyaWN0aW9ucyBhbmQgYSByZXBvcnRcbiAgICogd2FzIHNlbnQsIG90aGVyd2lzZSBmYWxzZS4gVGhlIHJldHVybiB2YWx1ZSBtYXkgYmUgdXNlZCB0byBkZWNpZGUgd2hldGhlclxuICAgKiB0aGUgZGVmYXVsdCBldmVudCBhY3Rpb24gaW4gdGhlIGJvd3NlciBjb21wb25lbnQgc2hvdWxkIGJlIG9taXR0ZWQuXG4gICAqXG4gICAqIE5vdGU6IFRoZSBtZXRob2Qgd2lsbCBjaGFuZ2UgdmFsdWVzIG9mIHRoZSBnaXZlbiBldmVudCBvYmplY3RcbiAgICogdG8gZnVsbGZpbGwgcHJvdG9jb2wgYW5kIGVuY29kaW5nIHJlc3RyaWN0aW9ucy5cbiAgICovXG4gIHRyaWdnZXJNb3VzZUV2ZW50KGV2ZW50OiBJQ29yZU1vdXNlRXZlbnQpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBFdmVudCB0byBhbm5vdW5jZSBjaGFuZ2VzIGluIG1vdXNlIHRyYWNraW5nLlxuICAgKi9cbiAgb25Qcm90b2NvbENoYW5nZTogSUV2ZW50PENvcmVNb3VzZUV2ZW50VHlwZT47XG5cbiAgLyoqXG4gICAqIEh1bWFuIHJlYWRhYmxlIHZlcnNpb24gb2YgbW91c2UgZXZlbnRzLlxuICAgKi9cbiAgZXhwbGFpbkV2ZW50cyhldmVudHM6IENvcmVNb3VzZUV2ZW50VHlwZSk6IHtbZXZlbnQ6IHN0cmluZ106IGJvb2xlYW59O1xufVxuXG5leHBvcnQgY29uc3QgSUNvcmVTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDb3JlU2VydmljZT4oJ0NvcmVTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDb3JlU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIHJlYWRvbmx5IGRlY1ByaXZhdGVNb2RlczogSURlY1ByaXZhdGVNb2RlcztcblxuICByZWFkb25seSBvbkRhdGE6IElFdmVudDxzdHJpbmc+O1xuICByZWFkb25seSBvblVzZXJJbnB1dDogSUV2ZW50PHZvaWQ+O1xuXG4gIHJlc2V0KCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIHRoZSBvbkRhdGEgZXZlbnQgaW4gdGhlIHB1YmxpYyBBUEkuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRoYXQgaXMgYmVpbmcgZW1pdHRlZC5cbiAgICogQHBhcmFtIHdhc0Zyb21Vc2VyIFdoZXRoZXIgdGhlIGRhdGEgb3JpZ2luYXRlZCBmcm9tIHRoZSB1c2VyIChhcyBvcHBvc2VkIHRvXG4gICAqIHJlc3VsdGluZyBmcm9tIHBhcnNpbmcgaW5jb21pbmcgZGF0YSkuIFdoZW4gdHJ1ZSB0aGlzIHdpbGwgYWxzbzpcbiAgICogLSBTY3JvbGwgdG8gdGhlIGJvdHRvbSBvZiB0aGUgYnVmZmVyLnNcbiAgICogLSBGaXJlIHRoZSBgb25Vc2VySW5wdXRgIGV2ZW50IChzbyBzZWxlY3Rpb24gY2FuIGJlIGNsZWFyZWQpLlxuICAgICovXG4gIHRyaWdnZXJEYXRhRXZlbnQoZGF0YTogc3RyaW5nLCB3YXNVc2VySW5wdXQ/OiBib29sZWFuKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElEaXJ0eVJvd1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SURpcnR5Um93U2VydmljZT4oJ0RpcnR5Um93U2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJRGlydHlSb3dTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcmVhZG9ubHkgc3RhcnQ6IG51bWJlcjtcbiAgcmVhZG9ubHkgZW5kOiBudW1iZXI7XG5cbiAgY2xlYXJSYW5nZSgpOiB2b2lkO1xuICBtYXJrRGlydHkoeTogbnVtYmVyKTogdm9pZDtcbiAgbWFya1JhbmdlRGlydHkoeTE6IG51bWJlciwgeTI6IG51bWJlcik6IHZvaWQ7XG4gIG1hcmtBbGxEaXJ0eSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTZXJ2aWNlSWRlbnRpZmllcjxUPiB7XG4gICguLi5hcmdzOiBhbnlbXSk6IHZvaWQ7XG4gIHR5cGU6IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnN0cnVjdG9yU2lnbmF0dXJlMDxUPiB7XG4gIG5ldyguLi5zZXJ2aWNlczogeyBzZXJ2aWNlQnJhbmQ6IGFueTsgfVtdKTogVDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29uc3RydWN0b3JTaWduYXR1cmUxPEExLCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTI8QTEsIEEyLCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIHNlY29uZDogQTIsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTM8QTEsIEEyLCBBMywgVD4ge1xuICBuZXcoZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTQ8QTEsIEEyLCBBMywgQTQsIFQ+IHtcbiAgbmV3KGZpcnN0OiBBMSwgc2Vjb25kOiBBMiwgdGhpcmQ6IEEzLCBmb3VydGg6IEE0LCAuLi5zZXJ2aWNlczogeyBzZXJ2aWNlQnJhbmQ6IGFueTsgfVtdKTogVDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29uc3RydWN0b3JTaWduYXR1cmU1PEExLCBBMiwgQTMsIEE0LCBBNSwgVD4ge1xuICBuZXcoZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQsIGZpZnRoOiBBNSwgLi4uc2VydmljZXM6IHsgc2VydmljZUJyYW5kOiBhbnk7IH1bXSk6IFQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnN0cnVjdG9yU2lnbmF0dXJlNjxBMSwgQTIsIEEzLCBBNCwgQTUsIEE2LCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMywgZm91cnRoOiBBNCwgZmlmdGg6IEE1LCBzaXh0aDogQTYsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTc8QTEsIEEyLCBBMywgQTQsIEE1LCBBNiwgQTcsIFQ+IHtcbiAgbmV3KGZpcnN0OiBBMSwgc2Vjb25kOiBBMiwgdGhpcmQ6IEEzLCBmb3VydGg6IEE0LCBmaWZ0aDogQTUsIHNpeHRoOiBBNiwgc2V2ZW50aDogQTcsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb25zdHJ1Y3RvclNpZ25hdHVyZTg8QTEsIEEyLCBBMywgQTQsIEE1LCBBNiwgQTcsIEE4LCBUPiB7XG4gIG5ldyhmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMywgZm91cnRoOiBBNCwgZmlmdGg6IEE1LCBzaXh0aDogQTYsIHNldmVudGg6IEE3LCBlaWd0aDogQTgsIC4uLnNlcnZpY2VzOiB7IHNlcnZpY2VCcmFuZDogYW55OyB9W10pOiBUO1xufVxuXG5leHBvcnQgY29uc3QgSUluc3RhbnRpYXRpb25TZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElJbnN0YW50aWF0aW9uU2VydmljZT4oJ0luc3RhbnRpYXRpb25TZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElJbnN0YW50aWF0aW9uU2VydmljZSB7XG4gIHNldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiwgaW5zdGFuY2U6IFQpOiB2b2lkO1xuXG4gIGNyZWF0ZUluc3RhbmNlPFQ+KGN0b3I6IElDb25zdHJ1Y3RvclNpZ25hdHVyZTA8VD4pOiBUO1xuICBjcmVhdGVJbnN0YW5jZTxBMSwgVD4oY3RvcjogSUNvbnN0cnVjdG9yU2lnbmF0dXJlMTxBMSwgVD4sIGZpcnN0OiBBMSk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgVD4oY3RvcjogSUNvbnN0cnVjdG9yU2lnbmF0dXJlMjxBMSwgQTIsIFQ+LCBmaXJzdDogQTEsIHNlY29uZDogQTIpOiBUO1xuICBjcmVhdGVJbnN0YW5jZTxBMSwgQTIsIEEzLCBUPihjdG9yOiBJQ29uc3RydWN0b3JTaWduYXR1cmUzPEExLCBBMiwgQTMsIFQ+LCBmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMyk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBUPihjdG9yOiBJQ29uc3RydWN0b3JTaWduYXR1cmU0PEExLCBBMiwgQTMsIEE0LCBUPiwgZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQpOiBUO1xuICBjcmVhdGVJbnN0YW5jZTxBMSwgQTIsIEEzLCBBNCwgQTUsIFQ+KGN0b3I6IElDb25zdHJ1Y3RvclNpZ25hdHVyZTU8QTEsIEEyLCBBMywgQTQsIEE1LCBUPiwgZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQsIGZpZnRoOiBBNSk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIFQ+KGN0b3I6IElDb25zdHJ1Y3RvclNpZ25hdHVyZTY8QTEsIEEyLCBBMywgQTQsIEE1LCBBNiwgVD4sIGZpcnN0OiBBMSwgc2Vjb25kOiBBMiwgdGhpcmQ6IEEzLCBmb3VydGg6IEE0LCBmaWZ0aDogQTUsIHNpeHRoOiBBNik6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIEE3LCBUPihjdG9yOiBJQ29uc3RydWN0b3JTaWduYXR1cmU3PEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIEE3LCBUPiwgZmlyc3Q6IEExLCBzZWNvbmQ6IEEyLCB0aGlyZDogQTMsIGZvdXJ0aDogQTQsIGZpZnRoOiBBNSwgc2l4dGg6IEE2LCBzZXZlbnRoOiBBNyk6IFQ7XG4gIGNyZWF0ZUluc3RhbmNlPEExLCBBMiwgQTMsIEE0LCBBNSwgQTYsIEE3LCBBOCwgVD4oY3RvcjogSUNvbnN0cnVjdG9yU2lnbmF0dXJlODxBMSwgQTIsIEEzLCBBNCwgQTUsIEE2LCBBNywgQTgsIFQ+LCBmaXJzdDogQTEsIHNlY29uZDogQTIsIHRoaXJkOiBBMywgZm91cnRoOiBBNCwgZmlmdGg6IEE1LCBzaXh0aDogQTYsIHNldmVudGg6IEE3LCBlaWd0aDogQTgpOiBUO1xufVxuXG5leHBvcnQgY29uc3QgSUxvZ1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUxvZ1NlcnZpY2U+KCdMb2dTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElMb2dTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgZGVidWcobWVzc2FnZTogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkO1xuICBpbmZvKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbiAgd2FybihtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIGVycm9yKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElPcHRpb25zU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJT3B0aW9uc1NlcnZpY2U+KCdPcHRpb25zU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJT3B0aW9uc1NlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICByZWFkb25seSBvcHRpb25zOiBJVGVybWluYWxPcHRpb25zO1xuXG4gIHJlYWRvbmx5IG9uT3B0aW9uQ2hhbmdlOiBJRXZlbnQ8c3RyaW5nPjtcblxuICBzZXRPcHRpb248VD4oa2V5OiBzdHJpbmcsIHZhbHVlOiBUKTogdm9pZDtcbiAgZ2V0T3B0aW9uPFQ+KGtleTogc3RyaW5nKTogVCB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IHR5cGUgRm9udFdlaWdodCA9ICdub3JtYWwnIHwgJ2JvbGQnIHwgJzEwMCcgfCAnMjAwJyB8ICczMDAnIHwgJzQwMCcgfCAnNTAwJyB8ICc2MDAnIHwgJzcwMCcgfCAnODAwJyB8ICc5MDAnO1xuZXhwb3J0IHR5cGUgTG9nTGV2ZWwgPSAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdvZmYnO1xuZXhwb3J0IHR5cGUgUmVuZGVyZXJUeXBlID0gJ2RvbScgfCAnY2FudmFzJztcblxuZXhwb3J0IGludGVyZmFjZSBJUGFydGlhbFRlcm1pbmFsT3B0aW9ucyB7XG4gIGFsbG93VHJhbnNwYXJlbmN5PzogYm9vbGVhbjtcbiAgYmVsbFNvdW5kPzogc3RyaW5nO1xuICBiZWxsU3R5bGU/OiAnbm9uZScgLyp8ICd2aXN1YWwnKi8gfCAnc291bmQnIC8qfCAnYm90aCcqLztcbiAgY29scz86IG51bWJlcjtcbiAgY3Vyc29yQmxpbms/OiBib29sZWFuO1xuICBjdXJzb3JTdHlsZT86ICdibG9jaycgfCAndW5kZXJsaW5lJyB8ICdiYXInO1xuICBkaXNhYmxlU3RkaW4/OiBib29sZWFuO1xuICBkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycz86IGJvb2xlYW47XG4gIGZvbnRTaXplPzogbnVtYmVyO1xuICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICBmb250V2VpZ2h0PzogRm9udFdlaWdodDtcbiAgZm9udFdlaWdodEJvbGQ/OiBGb250V2VpZ2h0O1xuICBsZXR0ZXJTcGFjaW5nPzogbnVtYmVyO1xuICBsaW5lSGVpZ2h0PzogbnVtYmVyO1xuICBsb2dMZXZlbD86IExvZ0xldmVsO1xuICBtYWNPcHRpb25Jc01ldGE/OiBib29sZWFuO1xuICBtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbj86IGJvb2xlYW47XG4gIHJlbmRlcmVyVHlwZT86IFJlbmRlcmVyVHlwZTtcbiAgcmlnaHRDbGlja1NlbGVjdHNXb3JkPzogYm9vbGVhbjtcbiAgcm93cz86IG51bWJlcjtcbiAgc2NyZWVuUmVhZGVyTW9kZT86IGJvb2xlYW47XG4gIHNjcm9sbGJhY2s/OiBudW1iZXI7XG4gIHRhYlN0b3BXaWR0aD86IG51bWJlcjtcbiAgdGhlbWU/OiBJVGhlbWU7XG4gIHdpbmRvd3NNb2RlPzogYm9vbGVhbjtcbiAgd29yZFNlcGFyYXRvcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVGVybWluYWxPcHRpb25zIHtcbiAgYWxsb3dUcmFuc3BhcmVuY3k6IGJvb2xlYW47XG4gIGJlbGxTb3VuZDogc3RyaW5nO1xuICBiZWxsU3R5bGU6ICdub25lJyAvKnwgJ3Zpc3VhbCcqLyB8ICdzb3VuZCcgLyp8ICdib3RoJyovO1xuICBjb2xzOiBudW1iZXI7XG4gIGN1cnNvckJsaW5rOiBib29sZWFuO1xuICBjdXJzb3JTdHlsZTogJ2Jsb2NrJyB8ICd1bmRlcmxpbmUnIHwgJ2Jhcic7XG4gIGRpc2FibGVTdGRpbjogYm9vbGVhbjtcbiAgZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6IGJvb2xlYW47XG4gIGZvbnRTaXplOiBudW1iZXI7XG4gIGZvbnRGYW1pbHk6IHN0cmluZztcbiAgZm9udFdlaWdodDogRm9udFdlaWdodDtcbiAgZm9udFdlaWdodEJvbGQ6IEZvbnRXZWlnaHQ7XG4gIGxldHRlclNwYWNpbmc6IG51bWJlcjtcbiAgbGluZUhlaWdodDogbnVtYmVyO1xuICBsb2dMZXZlbDogTG9nTGV2ZWw7XG4gIG1hY09wdGlvbklzTWV0YTogYm9vbGVhbjtcbiAgbWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb246IGJvb2xlYW47XG4gIHJlbmRlcmVyVHlwZTogUmVuZGVyZXJUeXBlO1xuICByaWdodENsaWNrU2VsZWN0c1dvcmQ6IGJvb2xlYW47XG4gIHJvd3M6IG51bWJlcjtcbiAgc2NyZWVuUmVhZGVyTW9kZTogYm9vbGVhbjtcbiAgc2Nyb2xsYmFjazogbnVtYmVyO1xuICB0YWJTdG9wV2lkdGg6IG51bWJlcjtcbiAgdGhlbWU6IElUaGVtZTtcbiAgd2luZG93c01vZGU6IGJvb2xlYW47XG4gIHdvcmRTZXBhcmF0b3I6IHN0cmluZztcblxuICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIGNhbmNlbEV2ZW50czogYm9vbGVhbjtcbiAgY29udmVydEVvbDogYm9vbGVhbjtcbiAgc2NyZWVuS2V5czogYm9vbGVhbjtcbiAgdGVybU5hbWU6IHN0cmluZztcbiAgdXNlRmxvd0NvbnRyb2w6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRoZW1lIHtcbiAgZm9yZWdyb3VuZD86IHN0cmluZztcbiAgYmFja2dyb3VuZD86IHN0cmluZztcbiAgY3Vyc29yPzogc3RyaW5nO1xuICBjdXJzb3JBY2NlbnQ/OiBzdHJpbmc7XG4gIHNlbGVjdGlvbj86IHN0cmluZztcbiAgYmxhY2s/OiBzdHJpbmc7XG4gIHJlZD86IHN0cmluZztcbiAgZ3JlZW4/OiBzdHJpbmc7XG4gIHllbGxvdz86IHN0cmluZztcbiAgYmx1ZT86IHN0cmluZztcbiAgbWFnZW50YT86IHN0cmluZztcbiAgY3lhbj86IHN0cmluZztcbiAgd2hpdGU/OiBzdHJpbmc7XG4gIGJyaWdodEJsYWNrPzogc3RyaW5nO1xuICBicmlnaHRSZWQ/OiBzdHJpbmc7XG4gIGJyaWdodEdyZWVuPzogc3RyaW5nO1xuICBicmlnaHRZZWxsb3c/OiBzdHJpbmc7XG4gIGJyaWdodEJsdWU/OiBzdHJpbmc7XG4gIGJyaWdodE1hZ2VudGE/OiBzdHJpbmc7XG4gIGJyaWdodEN5YW4/OiBzdHJpbmc7XG4gIGJyaWdodFdoaXRlPzogc3RyaW5nO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJVGVybWluYWxBZGRvbiwgSURpc3Bvc2FibGUsIFRlcm1pbmFsIH0gZnJvbSAneHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElMb2FkZWRBZGRvbiB7XG4gIGluc3RhbmNlOiBJVGVybWluYWxBZGRvbjtcbiAgZGlzcG9zZTogKCkgPT4gdm9pZDtcbiAgaXNEaXNwb3NlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEFkZG9uTWFuYWdlciBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJvdGVjdGVkIF9hZGRvbnM6IElMb2FkZWRBZGRvbltdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5fYWRkb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLl9hZGRvbnNbaV0uaW5zdGFuY2UuZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBsb2FkQWRkb24odGVybWluYWw6IFRlcm1pbmFsLCBpbnN0YW5jZTogSVRlcm1pbmFsQWRkb24pOiB2b2lkIHtcbiAgICBjb25zdCBsb2FkZWRBZGRvbjogSUxvYWRlZEFkZG9uID0ge1xuICAgICAgaW5zdGFuY2UsXG4gICAgICBkaXNwb3NlOiBpbnN0YW5jZS5kaXNwb3NlLFxuICAgICAgaXNEaXNwb3NlZDogZmFsc2VcbiAgICB9O1xuICAgIHRoaXMuX2FkZG9ucy5wdXNoKGxvYWRlZEFkZG9uKTtcbiAgICBpbnN0YW5jZS5kaXNwb3NlID0gKCkgPT4gdGhpcy5fd3JhcHBlZEFkZG9uRGlzcG9zZShsb2FkZWRBZGRvbik7XG4gICAgaW5zdGFuY2UuYWN0aXZhdGUoPGFueT50ZXJtaW5hbCk7XG4gIH1cblxuICBwcml2YXRlIF93cmFwcGVkQWRkb25EaXNwb3NlKGxvYWRlZEFkZG9uOiBJTG9hZGVkQWRkb24pOiB2b2lkIHtcbiAgICBpZiAobG9hZGVkQWRkb24uaXNEaXNwb3NlZCkge1xuICAgICAgLy8gRG8gbm90aGluZyBpZiBhbHJlYWR5IGRpc3Bvc2VkXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fYWRkb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fYWRkb25zW2ldID09PSBsb2FkZWRBZGRvbikge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkaXNwb3NlIGFuIGFkZG9uIHRoYXQgaGFzIG5vdCBiZWVuIGxvYWRlZCcpO1xuICAgIH1cbiAgICBsb2FkZWRBZGRvbi5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICBsb2FkZWRBZGRvbi5kaXNwb3NlLmFwcGx5KGxvYWRlZEFkZG9uLmluc3RhbmNlKTtcbiAgICB0aGlzLl9hZGRvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBUZXJtaW5hbCBhcyBJVGVybWluYWxBcGksIElUZXJtaW5hbE9wdGlvbnMsIElNYXJrZXIsIElEaXNwb3NhYmxlLCBJTGlua01hdGNoZXJPcHRpb25zLCBJVGhlbWUsIElMb2NhbGl6YWJsZVN0cmluZ3MsIElUZXJtaW5hbEFkZG9uLCBJU2VsZWN0aW9uUG9zaXRpb24sIElCdWZmZXIgYXMgSUJ1ZmZlckFwaSwgSUJ1ZmZlckxpbmUgYXMgSUJ1ZmZlckxpbmVBcGksIElCdWZmZXJDZWxsIGFzIElCdWZmZXJDZWxsQXBpLCBJUGFyc2VyLCBJRnVuY3Rpb25JZGVudGlmaWVyIH0gZnJvbSAneHRlcm0nO1xuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlckxpbmUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgVGVybWluYWwgYXMgVGVybWluYWxDb3JlIH0gZnJvbSAnLi4vVGVybWluYWwnO1xuaW1wb3J0ICogYXMgU3RyaW5ncyBmcm9tICcuLi9icm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncyc7XG5pbXBvcnQgeyBJRXZlbnQgfSBmcm9tICdjb21tb24vRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IEFkZG9uTWFuYWdlciB9IGZyb20gJy4vQWRkb25NYW5hZ2VyJztcbmltcG9ydCB7IElQYXJhbXMgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFRlcm1pbmFsIGltcGxlbWVudHMgSVRlcm1pbmFsQXBpIHtcbiAgcHJpdmF0ZSBfY29yZTogSVRlcm1pbmFsO1xuICBwcml2YXRlIF9hZGRvbk1hbmFnZXI6IEFkZG9uTWFuYWdlcjtcbiAgcHJpdmF0ZSBfcGFyc2VyOiBJUGFyc2VyO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBJVGVybWluYWxPcHRpb25zKSB7XG4gICAgdGhpcy5fY29yZSA9IG5ldyBUZXJtaW5hbENvcmUob3B0aW9ucyk7XG4gICAgdGhpcy5fYWRkb25NYW5hZ2VyID0gbmV3IEFkZG9uTWFuYWdlcigpO1xuICB9XG5cbiAgcHVibGljIGdldCBvbkN1cnNvck1vdmUoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25DdXJzb3JNb3ZlOyB9XG4gIHB1YmxpYyBnZXQgb25MaW5lRmVlZCgpOiBJRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkxpbmVGZWVkOyB9XG4gIHB1YmxpYyBnZXQgb25TZWxlY3Rpb25DaGFuZ2UoKTogSUV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25TZWxlY3Rpb25DaGFuZ2U7IH1cbiAgcHVibGljIGdldCBvbkRhdGEoKTogSUV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fY29yZS5vbkRhdGE7IH1cbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IElFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25UaXRsZUNoYW5nZTsgfVxuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IElFdmVudDxudW1iZXI+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25TY3JvbGw7IH1cbiAgcHVibGljIGdldCBvbktleSgpOiBJRXZlbnQ8eyBrZXk6IHN0cmluZywgZG9tRXZlbnQ6IEtleWJvYXJkRXZlbnQgfT4geyByZXR1cm4gdGhpcy5fY29yZS5vbktleTsgfVxuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IElFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25SZW5kZXI7IH1cbiAgcHVibGljIGdldCBvblJlc2l6ZSgpOiBJRXZlbnQ8eyBjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlciB9PiB7IHJldHVybiB0aGlzLl9jb3JlLm9uUmVzaXplOyB9XG5cbiAgcHVibGljIGdldCBlbGVtZW50KCk6IEhUTUxFbGVtZW50IHsgcmV0dXJuIHRoaXMuX2NvcmUuZWxlbWVudDsgfVxuICBwdWJsaWMgZ2V0IHBhcnNlcigpOiBJUGFyc2VyIHtcbiAgICBpZiAoIXRoaXMuX3BhcnNlcikge1xuICAgICAgdGhpcy5fcGFyc2VyID0gbmV3IFBhcnNlckFwaSh0aGlzLl9jb3JlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlcjtcbiAgfVxuICBwdWJsaWMgZ2V0IHRleHRhcmVhKCk6IEhUTUxUZXh0QXJlYUVsZW1lbnQgeyByZXR1cm4gdGhpcy5fY29yZS50ZXh0YXJlYTsgfVxuICBwdWJsaWMgZ2V0IHJvd3MoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUucm93czsgfVxuICBwdWJsaWMgZ2V0IGNvbHMoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2NvcmUuY29sczsgfVxuICBwdWJsaWMgZ2V0IGJ1ZmZlcigpOiBJQnVmZmVyQXBpIHsgcmV0dXJuIG5ldyBCdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVyKTsgfVxuICBwdWJsaWMgZ2V0IG1hcmtlcnMoKTogUmVhZG9ubHlBcnJheTxJTWFya2VyPiB7IHJldHVybiB0aGlzLl9jb3JlLm1hcmtlcnM7IH1cbiAgcHVibGljIGJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5ibHVyKCk7XG4gIH1cbiAgcHVibGljIGZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuZm9jdXMoKTtcbiAgfVxuICBwdWJsaWMgcmVzaXplKGNvbHVtbnM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY29sdW1ucywgcm93cyk7XG4gICAgdGhpcy5fY29yZS5yZXNpemUoY29sdW1ucywgcm93cyk7XG4gIH1cbiAgcHVibGljIHdyaXRlbG4oZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS53cml0ZWxuKGRhdGEpO1xuICB9XG4gIHB1YmxpYyBvcGVuKHBhcmVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLm9wZW4ocGFyZW50KTtcbiAgfVxuICBwdWJsaWMgYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGN1c3RvbUtleUV2ZW50SGFuZGxlcjogKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5hdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXIoY3VzdG9tS2V5RXZlbnRIYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJMaW5rTWF0Y2hlcihyZWdleDogUmVnRXhwLCBoYW5kbGVyOiAoZXZlbnQ6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKSA9PiB2b2lkLCBvcHRpb25zPzogSUxpbmtNYXRjaGVyT3B0aW9ucyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJMaW5rTWF0Y2hlcihyZWdleCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gIH1cbiAgcHVibGljIGRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihtYXRjaGVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuZGVyZWdpc3RlckxpbmtNYXRjaGVyKG1hdGNoZXJJZCk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGhhbmRsZXI6ICh0ZXh0OiBzdHJpbmcpID0+IFtudW1iZXIsIG51bWJlcl1bXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIGRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZCk7XG4gIH1cbiAgcHVibGljIGFkZE1hcmtlcihjdXJzb3JZT2Zmc2V0OiBudW1iZXIpOiBJTWFya2VyIHtcbiAgICB0aGlzLl92ZXJpZnlJbnRlZ2VycyhjdXJzb3JZT2Zmc2V0KTtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5hZGRNYXJrZXIoY3Vyc29yWU9mZnNldCk7XG4gIH1cbiAgcHVibGljIGhhc1NlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5oYXNTZWxlY3Rpb24oKTtcbiAgfVxuICBwdWJsaWMgc2VsZWN0KGNvbHVtbjogbnVtYmVyLCByb3c6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl92ZXJpZnlJbnRlZ2Vycyhjb2x1bW4sIHJvdywgbGVuZ3RoKTtcbiAgICB0aGlzLl9jb3JlLnNlbGVjdChjb2x1bW4sIHJvdywgbGVuZ3RoKTtcbiAgfVxuICBwdWJsaWMgZ2V0U2VsZWN0aW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuZ2V0U2VsZWN0aW9uKCk7XG4gIH1cbiAgcHVibGljIGdldFNlbGVjdGlvblBvc2l0aW9uKCk6IElTZWxlY3Rpb25Qb3NpdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUuZ2V0U2VsZWN0aW9uUG9zaXRpb24oKTtcbiAgfVxuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5jbGVhclNlbGVjdGlvbigpO1xuICB9XG4gIHB1YmxpYyBzZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5zZWxlY3RBbGwoKTtcbiAgfVxuICBwdWJsaWMgc2VsZWN0TGluZXMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl92ZXJpZnlJbnRlZ2VycyhzdGFydCwgZW5kKTtcbiAgICB0aGlzLl9jb3JlLnNlbGVjdExpbmVzKHN0YXJ0LCBlbmQpO1xuICB9XG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX2FkZG9uTWFuYWdlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5fY29yZS5kaXNwb3NlKCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbExpbmVzKGFtb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoYW1vdW50KTtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbExpbmVzKGFtb3VudCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFBhZ2VzKHBhZ2VDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMocGFnZUNvdW50KTtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbFBhZ2VzKHBhZ2VDb3VudCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFRvVG9wKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9Ub3AoKTtcbiAgfVxuICBwdWJsaWMgc2Nyb2xsVG9Cb3R0b20oKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxUb0xpbmUobGluZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMobGluZSk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxUb0xpbmUobGluZSk7XG4gIH1cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuY2xlYXIoKTtcbiAgfVxuICBwdWJsaWMgd3JpdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS53cml0ZShkYXRhKTtcbiAgfVxuICBwdWJsaWMgd3JpdGVVdGY4KGRhdGE6IFVpbnQ4QXJyYXkpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLndyaXRlVXRmOChkYXRhKTtcbiAgfVxuICBwdWJsaWMgcGFzdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5wYXN0ZShkYXRhKTtcbiAgfVxuICBwdWJsaWMgZ2V0T3B0aW9uKGtleTogJ2JlbGxTb3VuZCcgfCAnYmVsbFN0eWxlJyB8ICdjdXJzb3JTdHlsZScgfCAnZm9udEZhbWlseScgfCAnZm9udFdlaWdodCcgfCAnZm9udFdlaWdodEJvbGQnIHwgJ2xvZ0xldmVsJyB8ICdyZW5kZXJlclR5cGUnIHwgJ3Rlcm1OYW1lJyB8ICd3b3JkU2VwYXJhdG9yJyk6IHN0cmluZztcbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdhbGxvd1RyYW5zcGFyZW5jeScgfCAnY2FuY2VsRXZlbnRzJyB8ICdjb252ZXJ0RW9sJyB8ICdjdXJzb3JCbGluaycgfCAnZGlzYWJsZVN0ZGluJyB8ICdtYWNPcHRpb25Jc01ldGEnIHwgJ3JpZ2h0Q2xpY2tTZWxlY3RzV29yZCcgfCAncG9wT25CZWxsJyB8ICdzY3JlZW5LZXlzJyB8ICd1c2VGbG93Q29udHJvbCcgfCAndmlzdWFsQmVsbCcpOiBib29sZWFuO1xuICBwdWJsaWMgZ2V0T3B0aW9uKGtleTogJ2NvbG9ycycpOiBzdHJpbmdbXTtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdjb2xzJyB8ICdmb250U2l6ZScgfCAnbGV0dGVyU3BhY2luZycgfCAnbGluZUhlaWdodCcgfCAncm93cycgfCAndGFiU3RvcFdpZHRoJyB8ICdzY3JvbGxiYWNrJyk6IG51bWJlcjtcbiAgcHVibGljIGdldE9wdGlvbihrZXk6ICdoYW5kbGVyJyk6IChkYXRhOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiBzdHJpbmcpOiBhbnk7XG4gIHB1YmxpYyBnZXRPcHRpb24oa2V5OiBhbnkpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLmdldE9wdGlvbihrZXkpO1xuICB9XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnYmVsbFNvdW5kJyB8ICdmb250RmFtaWx5JyB8ICd0ZXJtTmFtZScgfCAnd29yZFNlcGFyYXRvcicsIHZhbHVlOiBzdHJpbmcpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2ZvbnRXZWlnaHQnIHwgJ2ZvbnRXZWlnaHRCb2xkJywgdmFsdWU6ICdub3JtYWwnIHwgJ2JvbGQnIHwgJzEwMCcgfCAnMjAwJyB8ICczMDAnIHwgJzQwMCcgfCAnNTAwJyB8ICc2MDAnIHwgJzcwMCcgfCAnODAwJyB8ICc5MDAnKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdsb2dMZXZlbCcsIHZhbHVlOiAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdvZmYnKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdiZWxsU3R5bGUnLCB2YWx1ZTogJ25vbmUnIHwgJ3Zpc3VhbCcgfCAnc291bmQnIHwgJ2JvdGgnKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdjdXJzb3JTdHlsZScsIHZhbHVlOiAnYmxvY2snIHwgJ3VuZGVybGluZScgfCAnYmFyJyk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnYWxsb3dUcmFuc3BhcmVuY3knIHwgJ2NhbmNlbEV2ZW50cycgfCAnY29udmVydEVvbCcgfCAnY3Vyc29yQmxpbmsnIHwgJ2Rpc2FibGVTdGRpbicgfCAnbWFjT3B0aW9uSXNNZXRhJyB8ICdyaWdodENsaWNrU2VsZWN0c1dvcmQnIHwgJ3BvcE9uQmVsbCcgfCAnc2NyZWVuS2V5cycgfCAndXNlRmxvd0NvbnRyb2wnIHwgJ3Zpc3VhbEJlbGwnLCB2YWx1ZTogYm9vbGVhbik6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnY29sb3JzJywgdmFsdWU6IHN0cmluZ1tdKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICdmb250U2l6ZScgfCAnbGV0dGVyU3BhY2luZycgfCAnbGluZUhlaWdodCcgfCAndGFiU3RvcFdpZHRoJyB8ICdzY3JvbGxiYWNrJywgdmFsdWU6IG51bWJlcik6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiAnaGFuZGxlcicsIHZhbHVlOiAoZGF0YTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6ICd0aGVtZScsIHZhbHVlOiBJVGhlbWUpOiB2b2lkO1xuICBwdWJsaWMgc2V0T3B0aW9uKGtleTogJ2NvbHMnIHwgJ3Jvd3MnLCB2YWx1ZTogbnVtYmVyKTogdm9pZDtcbiAgcHVibGljIHNldE9wdGlvbihrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQ7XG4gIHB1YmxpYyBzZXRPcHRpb24oa2V5OiBhbnksIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLnNldE9wdGlvbihrZXksIHZhbHVlKTtcbiAgfVxuICBwdWJsaWMgcmVmcmVzaChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuX2NvcmUucmVmcmVzaChzdGFydCwgZW5kKTtcbiAgfVxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5yZXNldCgpO1xuICB9XG4gIHB1YmxpYyBsb2FkQWRkb24oYWRkb246IElUZXJtaW5hbEFkZG9uKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZG9uTWFuYWdlci5sb2FkQWRkb24odGhpcywgYWRkb24pO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0cmluZ3MoKTogSUxvY2FsaXphYmxlU3RyaW5ncyB7XG4gICAgcmV0dXJuIFN0cmluZ3M7XG4gIH1cblxuICBwcml2YXRlIF92ZXJpZnlJbnRlZ2VycyguLi52YWx1ZXM6IG51bWJlcltdKTogdm9pZCB7XG4gICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlICUgMSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgQVBJIGRvZXMgbm90IGFjY2VwdCBmbG9hdGluZyBwb2ludCBudW1iZXJzJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuY2xhc3MgQnVmZmVyQXBpVmlldyBpbXBsZW1lbnRzIElCdWZmZXJBcGkge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9idWZmZXI6IElCdWZmZXIpIHt9XG5cbiAgcHVibGljIGdldCBjdXJzb3JZKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIueTsgfVxuICBwdWJsaWMgZ2V0IGN1cnNvclgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2J1ZmZlci54OyB9XG4gIHB1YmxpYyBnZXQgdmlld3BvcnRZKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIueWRpc3A7IH1cbiAgcHVibGljIGdldCBiYXNlWSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLnliYXNlOyB9XG4gIHB1YmxpYyBnZXQgbGVuZ3RoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoOyB9XG4gIHB1YmxpYyBnZXRMaW5lKHk6IG51bWJlcik6IElCdWZmZXJMaW5lQXBpIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyLmxpbmVzLmdldCh5KTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQnVmZmVyTGluZUFwaVZpZXcobGluZSk7XG4gIH1cbn1cblxuY2xhc3MgQnVmZmVyTGluZUFwaVZpZXcgaW1wbGVtZW50cyBJQnVmZmVyTGluZUFwaSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2xpbmU6IElCdWZmZXJMaW5lKSB7fVxuXG4gIHB1YmxpYyBnZXQgaXNXcmFwcGVkKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5fbGluZS5pc1dyYXBwZWQ7IH1cbiAgcHVibGljIGdldENlbGwoeDogbnVtYmVyKTogSUJ1ZmZlckNlbGxBcGkgfCB1bmRlZmluZWQge1xuICAgIGlmICh4IDwgMCB8fCB4ID49IHRoaXMuX2xpbmUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEJ1ZmZlckNlbGxBcGlWaWV3KHRoaXMuX2xpbmUsIHgpO1xuICB9XG4gIHB1YmxpYyB0cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQ/OiBib29sZWFuLCBzdGFydENvbHVtbj86IG51bWJlciwgZW5kQ29sdW1uPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fbGluZS50cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQsIHN0YXJ0Q29sdW1uLCBlbmRDb2x1bW4pO1xuICB9XG59XG5cbmNsYXNzIEJ1ZmZlckNlbGxBcGlWaWV3IGltcGxlbWVudHMgSUJ1ZmZlckNlbGxBcGkge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9saW5lOiBJQnVmZmVyTGluZSwgcHJpdmF0ZSBfeDogbnVtYmVyKSB7fVxuICBwdWJsaWMgZ2V0IGNoYXIoKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuX2xpbmUuZ2V0U3RyaW5nKHRoaXMuX3gpOyB9XG4gIHB1YmxpYyBnZXQgd2lkdGgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2xpbmUuZ2V0V2lkdGgodGhpcy5feCk7IH1cbn1cblxuY2xhc3MgUGFyc2VyQXBpIGltcGxlbWVudHMgSVBhcnNlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbCkge31cblxuICBwdWJsaWMgYWRkQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5hZGRDc2lIYW5kbGVyKGlkLCAocGFyYW1zOiBJUGFyYW1zKSA9PiBjYWxsYmFjayhwYXJhbXMudG9BcnJheSgpKSk7XG4gIH1cbiAgcHVibGljIGFkZERjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nLCBwYXJhbTogKG51bWJlciB8IG51bWJlcltdKVtdKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmFkZERjc0hhbmRsZXIoaWQsIChkYXRhOiBzdHJpbmcsIHBhcmFtczogSVBhcmFtcykgPT4gY2FsbGJhY2soZGF0YSwgcGFyYW1zLnRvQXJyYXkoKSkpO1xuICB9XG4gIHB1YmxpYyBhZGRFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiAoKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmFkZEVzY0hhbmRsZXIoaWQsIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBhZGRPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmFkZE9zY0hhbmRsZXIoaWRlbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyRGltZW5zaW9ucyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgQmFzZVJlbmRlckxheWVyIH0gZnJvbSAnLi4vYnJvd3Nlci9yZW5kZXJlci9CYXNlUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgSUNlbGxEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5pbnRlcmZhY2UgSUN1cnNvclN0YXRlIHtcbiAgeDogbnVtYmVyO1xuICB5OiBudW1iZXI7XG4gIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgc3R5bGU6IHN0cmluZztcbiAgd2lkdGg6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBUaGUgdGltZSBiZXR3ZWVuIGN1cnNvciBibGlua3MuXG4gKi9cbmNvbnN0IEJMSU5LX0lOVEVSVkFMID0gNjAwO1xuXG5leHBvcnQgY2xhc3MgQ3Vyc29yUmVuZGVyTGF5ZXIgZXh0ZW5kcyBCYXNlUmVuZGVyTGF5ZXIge1xuICBwcml2YXRlIF9zdGF0ZTogSUN1cnNvclN0YXRlO1xuICBwcml2YXRlIF9jdXJzb3JSZW5kZXJlcnM6IHtba2V5OiBzdHJpbmddOiAoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSkgPT4gdm9pZH07XG4gIHByaXZhdGUgX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyOiBDdXJzb3JCbGlua1N0YXRlTWFuYWdlcjtcbiAgcHJpdmF0ZSBfY2VsbDogSUNlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB6SW5kZXg6IG51bWJlcixcbiAgICBjb2xvcnM6IElDb2xvclNldCxcbiAgICBwcml2YXRlIF90ZXJtaW5hbDogSVRlcm1pbmFsLFxuICAgIHJlbmRlcmVySWQ6IG51bWJlcixcbiAgICByZWFkb25seSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICByZWFkb25seSBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKGNvbnRhaW5lciwgJ2N1cnNvcicsIHpJbmRleCwgdHJ1ZSwgY29sb3JzLCByZW5kZXJlcklkLCBidWZmZXJTZXJ2aWNlLCBvcHRpb25zU2VydmljZSk7XG4gICAgdGhpcy5fc3RhdGUgPSB7XG4gICAgICB4OiBudWxsLFxuICAgICAgeTogbnVsbCxcbiAgICAgIGlzRm9jdXNlZDogbnVsbCxcbiAgICAgIHN0eWxlOiBudWxsLFxuICAgICAgd2lkdGg6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuX2N1cnNvclJlbmRlcmVycyA9IHtcbiAgICAgICdiYXInOiB0aGlzLl9yZW5kZXJCYXJDdXJzb3IuYmluZCh0aGlzKSxcbiAgICAgICdibG9jayc6IHRoaXMuX3JlbmRlckJsb2NrQ3Vyc29yLmJpbmQodGhpcyksXG4gICAgICAndW5kZXJsaW5lJzogdGhpcy5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yLmJpbmQodGhpcylcbiAgICB9O1xuICAgIC8vIFRPRE86IENvbnNpZGVyIGluaXRpYWwgb3B0aW9ucz8gTWF5YmUgb25PcHRpb25zQ2hhbmdlZCBzaG91bGQgYmUgY2FsbGVkIGF0IHRoZSBlbmQgb2Ygb3Blbj9cbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoZGltOiBJUmVuZGVyRGltZW5zaW9ucyk6IHZvaWQge1xuICAgIHN1cGVyLnJlc2l6ZShkaW0pO1xuICAgIC8vIFJlc2l6aW5nIHRoZSBjYW52YXMgZGlzY2FyZHMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjYW52YXMgc28gY2xlYXIgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHtcbiAgICAgIHg6IG51bGwsXG4gICAgICB5OiBudWxsLFxuICAgICAgaXNGb2N1c2VkOiBudWxsLFxuICAgICAgc3R5bGU6IG51bGwsXG4gICAgICB3aWR0aDogbnVsbFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyID0gbnVsbDtcbiAgICAgIHRoaXMub25PcHRpb25zQ2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5wYXVzZSgpO1xuICAgIH1cbiAgICB0aGlzLl90ZXJtaW5hbC5yZWZyZXNoKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKSB7XG4gICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN1bWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdGVybWluYWwucmVmcmVzaCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JCbGluaykge1xuICAgICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcikge1xuICAgICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciA9IG5ldyBDdXJzb3JCbGlua1N0YXRlTWFuYWdlcih0aGlzLl90ZXJtaW5hbC5pc0ZvY3VzZWQsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9yZW5kZXIodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciA9IG51bGw7XG4gICAgICB9XG4gICAgICAvLyBSZXF1ZXN0IGEgcmVmcmVzaCBmcm9tIHRoZSB0ZXJtaW5hbCBhcyBtYW5hZ2VtZW50IG9mIHJlbmRlcmluZyBpcyBiZWluZ1xuICAgICAgLy8gbW92ZWQgYmFjayB0byB0aGUgdGVybWluYWxcbiAgICAgIHRoaXMuX3Rlcm1pbmFsLnJlZnJlc2godGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpIHtcbiAgICAgIHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvbkdyaWRDaGFuZ2VkKHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciB8fCB0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fcmVuZGVyKGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdGFydEJsaW5rQW5pbWF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyKHRyaWdnZXJlZEJ5QW5pbWF0aW9uRnJhbWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBEb24ndCBkcmF3IHRoZSBjdXJzb3IgaWYgaXQncyBoaWRkZW5cbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsLmN1cnNvclN0YXRlIHx8IHRoaXMuX3Rlcm1pbmFsLmN1cnNvckhpZGRlbikge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3JZID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICAgIGNvbnN0IHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZID0gY3Vyc29yWSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO1xuXG4gICAgLy8gRG9uJ3QgZHJhdyB0aGUgY3Vyc29yIGlmIGl0J3Mgb2ZmLXNjcmVlblxuICAgIGlmICh2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWSA8IDAgfHwgdmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChjdXJzb3JZKS5sb2FkQ2VsbCh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB0aGlzLl9jZWxsKTtcbiAgICBpZiAodGhpcy5fY2VsbC5jb250ZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsLmlzRm9jdXNlZCkge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgICB0aGlzLl9jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgICB0aGlzLl9yZW5kZXJCbHVyQ3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsIHZpZXdwb3J0UmVsYXRpdmVDdXJzb3JZLCB0aGlzLl9jZWxsKTtcbiAgICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gICAgICB0aGlzLl9zdGF0ZS54ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgICAgIHRoaXMuX3N0YXRlLnkgPSB2aWV3cG9ydFJlbGF0aXZlQ3Vyc29yWTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3RhdGUuc3R5bGUgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlO1xuICAgICAgdGhpcy5fc3RhdGUud2lkdGggPSB0aGlzLl9jZWxsLmdldFdpZHRoKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgZHJhdyB0aGUgY3Vyc29yIGlmIGl0J3MgYmxpbmtpbmdcbiAgICBpZiAodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIgJiYgIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmlzQ3Vyc29yVmlzaWJsZSkge1xuICAgICAgdGhpcy5fY2xlYXJDdXJzb3IoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc3RhdGUpIHtcbiAgICAgIC8vIFRoZSBjdXJzb3IgaXMgYWxyZWFkeSBpbiB0aGUgY29ycmVjdCBzcG90LCBkb24ndCByZWRyYXdcbiAgICAgIGlmICh0aGlzLl9zdGF0ZS54ID09PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54ICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUueSA9PT0gdmlld3BvcnRSZWxhdGl2ZUN1cnNvclkgJiZcbiAgICAgICAgICB0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQgPT09IHRoaXMuX3Rlcm1pbmFsLmlzRm9jdXNlZCAmJlxuICAgICAgICAgIHRoaXMuX3N0YXRlLnN0eWxlID09PSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlICYmXG4gICAgICAgICAgdGhpcy5fc3RhdGUud2lkdGggPT09IHRoaXMuX2NlbGwuZ2V0V2lkdGgoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9jbGVhckN1cnNvcigpO1xuICAgIH1cblxuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3Vyc29yUmVuZGVyZXJzW3RoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGUgfHwgJ2Jsb2NrJ10odGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCwgdmlld3BvcnRSZWxhdGl2ZUN1cnNvclksIHRoaXMuX2NlbGwpO1xuICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG5cbiAgICB0aGlzLl9zdGF0ZS54ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueDtcbiAgICB0aGlzLl9zdGF0ZS55ID0gdmlld3BvcnRSZWxhdGl2ZUN1cnNvclk7XG4gICAgdGhpcy5fc3RhdGUuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5fc3RhdGUuc3R5bGUgPSB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlO1xuICAgIHRoaXMuX3N0YXRlLndpZHRoID0gdGhpcy5fY2VsbC5nZXRXaWR0aCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xlYXJDdXJzb3IoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX3N0YXRlKSB7XG4gICAgICB0aGlzLl9jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngsIHRoaXMuX3N0YXRlLnksIHRoaXMuX3N0YXRlLndpZHRoLCAxKTtcbiAgICAgIHRoaXMuX3N0YXRlID0ge1xuICAgICAgICB4OiBudWxsLFxuICAgICAgICB5OiBudWxsLFxuICAgICAgICBpc0ZvY3VzZWQ6IG51bGwsXG4gICAgICAgIHN0eWxlOiBudWxsLFxuICAgICAgICB3aWR0aDogbnVsbFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJCYXJDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX2ZpbGxMZWZ0TGluZUF0Q2VsbCh4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyQmxvY2tDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO1xuICAgIHRoaXMuX2ZpbGxDZWxscyh4LCB5LCBjZWxsLmdldFdpZHRoKCksIDEpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcztcbiAgICB0aGlzLl9maWxsQ2hhclRydWVDb2xvcihjZWxsLCB4LCB5KTtcbiAgICB0aGlzLl9jdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyVW5kZXJsaW5lQ3Vyc29yKHg6IG51bWJlciwgeTogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICB0aGlzLl9jdHguc2F2ZSgpO1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcztcbiAgICB0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoeCwgeSk7XG4gICAgdGhpcy5fY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckJsdXJDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNlbGw6IElDZWxsRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5zYXZlKCk7XG4gICAgdGhpcy5fY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5fY29sb3JzLmN1cnNvci5jc3M7XG4gICAgdGhpcy5fc3Ryb2tlUmVjdEF0Q2VsbCh4LCB5LCBjZWxsLmdldFdpZHRoKCksIDEpO1xuICAgIHRoaXMuX2N0eC5yZXN0b3JlKCk7XG4gIH1cbn1cblxuY2xhc3MgQ3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIge1xuICBwdWJsaWMgaXNDdXJzb3JWaXNpYmxlOiBib29sZWFuO1xuXG4gIHByaXZhdGUgX2FuaW1hdGlvbkZyYW1lOiBudW1iZXI7XG4gIHByaXZhdGUgX2JsaW5rU3RhcnRUaW1lb3V0OiBudW1iZXI7XG4gIHByaXZhdGUgX2JsaW5rSW50ZXJ2YWw6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIHRpbWUgYXQgd2hpY2ggdGhlIGFuaW1hdGlvbiBmcmFtZSB3YXMgcmVzdGFydGVkLCB0aGlzIGlzIHVzZWQgb24gdGhlXG4gICAqIG5leHQgcmVuZGVyIHRvIHJlc3RhcnQgdGhlIHRpbWVycyBzbyB0aGV5IGRvbid0IG5lZWQgdG8gcmVzdGFydCB0aGUgdGltZXJzXG4gICAqIG11bHRpcGxlIHRpbWVzIG92ZXIgYSBzaG9ydCBwZXJpb2QuXG4gICAqL1xuICBwcml2YXRlIF9hbmltYXRpb25UaW1lUmVzdGFydGVkOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaXNGb2N1c2VkOiBib29sZWFuLFxuICAgIHByaXZhdGUgX3JlbmRlckNhbGxiYWNrOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHRoaXMuaXNDdXJzb3JWaXNpYmxlID0gdHJ1ZTtcbiAgICBpZiAoaXNGb2N1c2VkKSB7XG4gICAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzUGF1c2VkKCk6IGJvb2xlYW4geyByZXR1cm4gISh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCB8fCB0aGlzLl9ibGlua0ludGVydmFsKTsgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9ibGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKTtcbiAgICAgIHRoaXMuX2JsaW5rSW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSk7XG4gICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlc3RhcnRCbGlua0FuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1BhdXNlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBTYXZlIGEgdGltZXN0YW1wIHNvIHRoYXQgdGhlIHJlc3RhcnQgY2FuIGJlIGRvbmUgb24gdGhlIG5leHQgaW50ZXJ2YWxcbiAgICB0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkID0gRGF0ZS5ub3coKTtcbiAgICAvLyBGb3JjZSBhIGN1cnNvciByZW5kZXIgdG8gZW5zdXJlIGl0J3MgdmlzaWJsZSBhbmQgaW4gdGhlIGNvcnJlY3QgcG9zaXRpb25cbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKCF0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVzdGFydEludGVydmFsKHRpbWVUb1N0YXJ0OiBudW1iZXIgPSBCTElOS19JTlRFUlZBTCk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbnRlcnZhbFxuICAgIGlmICh0aGlzLl9ibGlua0ludGVydmFsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCB0aGUgaW5pdGlhbCB0aW1lb3V0IHdoaWNoIHdpbGwgaGlkZSB0aGUgY3Vyc29yLCB0aGlzIGlzIGRvbmUgYmVmb3JlXG4gICAgLy8gdGhlIHJlZ3VsYXIgaW50ZXJ2YWwgaXMgc2V0dXAgaW4gb3JkZXIgdG8gc3VwcG9ydCByZXN0YXJ0aW5nIHRoZSBibGlua1xuICAgIC8vIGFuaW1hdGlvbiBpbiBhIGxpZ2h0d2VpZ2h0IHdheSAod2l0aG91dCB0aHJhc2hpbmcgY2xlYXJJbnRlcnZhbCBhbmRcbiAgICAvLyBzZXRJbnRlcnZhbCkuXG4gICAgdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQgPSA8bnVtYmVyPjxhbnk+c2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiBhbm90aGVyIGFuaW1hdGlvbiByZXN0YXJ0IHdhcyByZXF1ZXN0ZWQgd2hpbGUgdGhpcyB3YXMgYmVpbmdcbiAgICAgIC8vIHN0YXJ0ZWRcbiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSBudWxsO1xuICAgICAgICBpZiAodGltZSA+IDApIHtcbiAgICAgICAgICB0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwodGltZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhpZGUgdGhlIGN1cnNvclxuICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgYmxpbmsgaW50ZXJ2YWxcbiAgICAgIHRoaXMuX2JsaW5rSW50ZXJ2YWwgPSA8bnVtYmVyPjxhbnk+c2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAvLyBBZGp1c3QgdGhlIGFuaW1hdGlvbiB0aW1lIGlmIGl0IHdhcyByZXN0YXJ0ZWRcbiAgICAgICAgaWYgKHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpIHtcbiAgICAgICAgICAvLyBjYWxjIHRpbWUgZGlmZlxuICAgICAgICAgIC8vIE1ha2UgcmVzdGFydCBpbnRlcnZhbCBkbyBhIHNldFRpbWVvdXQgaW5pdGlhbGx5P1xuICAgICAgICAgIGNvbnN0IHRpbWUgPSBCTElOS19JTlRFUlZBTCAtIChEYXRlLm5vdygpIC0gdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCA9IG51bGw7XG4gICAgICAgICAgdGhpcy5fcmVzdGFydEludGVydmFsKHRpbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEludmVydCB2aXNpYmlsaXR5IGFuZCByZW5kZXJcbiAgICAgICAgdGhpcy5pc0N1cnNvclZpc2libGUgPSAhdGhpcy5pc0N1cnNvclZpc2libGU7XG4gICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfSwgQkxJTktfSU5URVJWQUwpO1xuICAgIH0sIHRpbWVUb1N0YXJ0KTtcbiAgfVxuXG4gIHB1YmxpYyBwYXVzZSgpOiB2b2lkIHtcbiAgICB0aGlzLmlzQ3Vyc29yVmlzaWJsZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuX2JsaW5rSW50ZXJ2YWwpIHtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpO1xuICAgICAgdGhpcy5fYmxpbmtJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCk7XG4gICAgICB0aGlzLl9ibGlua1N0YXJ0VGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKTtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVzdW1lKCk6IHZvaWQge1xuICAgIHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQgPSBudWxsO1xuICAgIHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCgpO1xuICAgIHRoaXMucmVzdGFydEJsaW5rQW5pbWF0aW9uKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgVGV4dFJlbmRlckxheWVyIH0gZnJvbSAnLi4vYnJvd3Nlci9yZW5kZXJlci9UZXh0UmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgU2VsZWN0aW9uUmVuZGVyTGF5ZXIgfSBmcm9tICcuLi9icm93c2VyL3JlbmRlcmVyL1NlbGVjdGlvblJlbmRlckxheWVyJztcbmltcG9ydCB7IEN1cnNvclJlbmRlckxheWVyIH0gZnJvbSAnLi9DdXJzb3JSZW5kZXJMYXllcic7XG5pbXBvcnQgeyBJUmVuZGVyTGF5ZXIsIElSZW5kZXJlciwgSVJlbmRlckRpbWVuc2lvbnMsIENoYXJhY3RlckpvaW5lckhhbmRsZXIsIElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnLi4vVHlwZXMnO1xuaW1wb3J0IHsgTGlua1JlbmRlckxheWVyIH0gZnJvbSAnLi4vYnJvd3Nlci9yZW5kZXJlci9MaW5rUmVuZGVyTGF5ZXInO1xuaW1wb3J0IHsgQ2hhcmFjdGVySm9pbmVyUmVnaXN0cnkgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL0NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5JztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vTGlmZWN5Y2xlJztcbmltcG9ydCB7IElDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyByZW1vdmVUZXJtaW5hbEZyb21DYWNoZSB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvYXRsYXMvQ2hhckF0bGFzQ2FjaGUnO1xuXG5sZXQgbmV4dFJlbmRlcmVySWQgPSAxO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfaWQgPSBuZXh0UmVuZGVyZXJJZCsrO1xuXG4gIHByaXZhdGUgX3JlbmRlckxheWVyczogSVJlbmRlckxheWVyW107XG4gIHByaXZhdGUgX2RldmljZVBpeGVsUmF0aW86IG51bWJlcjtcbiAgcHJpdmF0ZSBfY2hhcmFjdGVySm9pbmVyUmVnaXN0cnk6IElDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeTtcblxuICBwdWJsaWMgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfY29sb3JzOiBJQ29sb3JTZXQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdGVybWluYWw6IElUZXJtaW5hbCxcbiAgICByZWFkb25seSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2UsXG4gICAgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIGNvbnN0IGFsbG93VHJhbnNwYXJlbmN5ID0gdGhpcy5fdGVybWluYWwub3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeTtcbiAgICB0aGlzLl9jaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSA9IG5ldyBDaGFyYWN0ZXJKb2luZXJSZWdpc3RyeShidWZmZXJTZXJ2aWNlKTtcblxuICAgIHRoaXMuX3JlbmRlckxheWVycyA9IFtcbiAgICAgIG5ldyBUZXh0UmVuZGVyTGF5ZXIodGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudCwgMCwgdGhpcy5fY29sb3JzLCB0aGlzLl9jaGFyYWN0ZXJKb2luZXJSZWdpc3RyeSwgYWxsb3dUcmFuc3BhcmVuY3ksIHRoaXMuX2lkLCBidWZmZXJTZXJ2aWNlLCBvcHRpb25zU2VydmljZSksXG4gICAgICBuZXcgU2VsZWN0aW9uUmVuZGVyTGF5ZXIodGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudCwgMSwgdGhpcy5fY29sb3JzLCB0aGlzLl9pZCwgYnVmZmVyU2VydmljZSwgb3B0aW9uc1NlcnZpY2UpLFxuICAgICAgbmV3IExpbmtSZW5kZXJMYXllcih0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LCAyLCB0aGlzLl9jb2xvcnMsIHRoaXMuX2lkLCB0aGlzLl90ZXJtaW5hbC5saW5raWZpZXIsIGJ1ZmZlclNlcnZpY2UsIG9wdGlvbnNTZXJ2aWNlKSxcbiAgICAgIG5ldyBDdXJzb3JSZW5kZXJMYXllcih0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LCAzLCB0aGlzLl9jb2xvcnMsIHRoaXMuX3Rlcm1pbmFsLCB0aGlzLl9pZCwgYnVmZmVyU2VydmljZSwgb3B0aW9uc1NlcnZpY2UpXG4gICAgXTtcbiAgICB0aGlzLmRpbWVuc2lvbnMgPSB7XG4gICAgICBzY2FsZWRDaGFyV2lkdGg6IG51bGwsXG4gICAgICBzY2FsZWRDaGFySGVpZ2h0OiBudWxsLFxuICAgICAgc2NhbGVkQ2VsbFdpZHRoOiBudWxsLFxuICAgICAgc2NhbGVkQ2VsbEhlaWdodDogbnVsbCxcbiAgICAgIHNjYWxlZENoYXJMZWZ0OiBudWxsLFxuICAgICAgc2NhbGVkQ2hhclRvcDogbnVsbCxcbiAgICAgIHNjYWxlZENhbnZhc1dpZHRoOiBudWxsLFxuICAgICAgc2NhbGVkQ2FudmFzSGVpZ2h0OiBudWxsLFxuICAgICAgY2FudmFzV2lkdGg6IG51bGwsXG4gICAgICBjYW52YXNIZWlnaHQ6IG51bGwsXG4gICAgICBhY3R1YWxDZWxsV2lkdGg6IG51bGwsXG4gICAgICBhY3R1YWxDZWxsSGVpZ2h0OiBudWxsXG4gICAgfTtcbiAgICB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMub25PcHRpb25zQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5kaXNwb3NlKCkpO1xuICAgIHJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlKHRoaXMuX2lkKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTogdm9pZCB7XG4gICAgLy8gSWYgdGhlIGRldmljZSBwaXhlbCByYXRpbyBjaGFuZ2VkLCB0aGUgY2hhciBhdGxhcyBuZWVkcyB0byBiZSByZWdlbmVyYXRlZFxuICAgIC8vIGFuZCB0aGUgdGVybWluYWwgbmVlZHMgdG8gcmVmcmVzaGVkXG4gICAgaWYgKHRoaXMuX2RldmljZVBpeGVsUmF0aW8gIT09IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICB0aGlzLl9kZXZpY2VQaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgICB0aGlzLm9uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzZXRDb2xvcnMoY29sb3JzOiBJQ29sb3JTZXQpOiB2b2lkIHtcbiAgICB0aGlzLl9jb2xvcnMgPSBjb2xvcnM7XG5cbiAgICAvLyBDbGVhciBsYXllcnMgYW5kIGZvcmNlIGEgZnVsbCByZW5kZXJcbiAgICB0aGlzLl9yZW5kZXJMYXllcnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGwuc2V0Q29sb3JzKHRoaXMuX2NvbG9ycyk7XG4gICAgICBsLnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBVcGRhdGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9uc1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcblxuICAgIC8vIFJlc2l6ZSBhbGwgcmVuZGVyIGxheWVyc1xuICAgIHRoaXMuX3JlbmRlckxheWVycy5mb3JFYWNoKGwgPT4gbC5yZXNpemUodGhpcy5kaW1lbnNpb25zKSk7XG5cbiAgICAvLyBSZXNpemUgdGhlIHNjcmVlblxuICAgIHRoaXMuX3Rlcm1pbmFsLnNjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGh9cHhgO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNjcmVlbkVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodH1weGA7XG4gIH1cblxuICBwdWJsaWMgb25DaGFyU2l6ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5vblJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5jb2xzLCB0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5vbkJsdXIoKSk7XG4gIH1cblxuICBwdWJsaWMgb25Gb2N1cygpOiB2b2lkIHtcbiAgICB0aGlzLl9ydW5PcGVyYXRpb24obCA9PiBsLm9uRm9jdXMoKSk7XG4gIH1cblxuICBwdWJsaWMgb25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0sIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMuX3J1bk9wZXJhdGlvbihsID0+IGwub25TZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0LCBlbmQsIGNvbHVtblNlbGVjdE1vZGUpKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkN1cnNvck1vdmUoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5vbkN1cnNvck1vdmUoKSk7XG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICB0aGlzLl9ydW5PcGVyYXRpb24obCA9PiBsLm9uT3B0aW9uc0NoYW5nZWQoKSk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcnVuT3BlcmF0aW9uKGwgPT4gbC5yZXNldCgpKTtcbiAgfVxuXG4gIHByaXZhdGUgX3J1bk9wZXJhdGlvbihvcGVyYXRpb246IChsYXllcjogSVJlbmRlckxheWVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBvcGVyYXRpb24obCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHRoZSByZWZyZXNoIGxvb3AgY2FsbGJhY2ssIGNhbGxpbmcgcmVmcmVzaCBvbmx5IGlmIGEgcmVmcmVzaCBpc1xuICAgKiBuZWNlc3NhcnkgYmVmb3JlIHF1ZXVlaW5nIHVwIHRoZSBuZXh0IG9uZS5cbiAgICovXG4gIHB1YmxpYyByZW5kZXJSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyTGF5ZXJzLmZvckVhY2gobCA9PiBsLm9uR3JpZENoYW5nZWQoc3RhcnQsIGVuZCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY2FsY3VsYXRlcyB0aGUgY2hhcmFjdGVyIGFuZCBjYW52YXMgZGltZW5zaW9ucy5cbiAgICovXG4gIHByaXZhdGUgX3VwZGF0ZURpbWVuc2lvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzY2FsZWQgY2hhcmFjdGVyIHdpZHRoLiBXaWR0aCBpcyBmbG9vcmVkIGFzIGl0IG11c3QgYmVcbiAgICAvLyBkcmF3biB0byBhbiBpbnRlZ2VyIGdyaWQgaW4gb3JkZXIgZm9yIHRoZSBDaGFyQXRsYXMgXCJzdGFtcHNcIiB0byBub3QgYmVcbiAgICAvLyBibHVycnkuIFdoZW4gdGV4dCBpcyBkcmF3biB0byB0aGUgZ3JpZCBub3QgdXNpbmcgdGhlIENoYXJBdGxhcywgaXQgaXNcbiAgICAvLyBjbGlwcGVkIHRvIGVuc3VyZSB0aGVyZSBpcyBubyBvdmVybGFwIHdpdGggdGhlIG5leHQgY2VsbC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoID0gTWF0aC5mbG9vcih0aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHNjYWxlZCBjaGFyYWN0ZXIgaGVpZ2h0LiBIZWlnaHQgaXMgY2VpbGVkIGluIGNhc2VcbiAgICAvLyBkZXZpY2VQaXhlbFJhdGlvIGlzIGEgZmxvYXRpbmcgcG9pbnQgbnVtYmVyIGluIG9yZGVyIHRvIGVuc3VyZSB0aGVyZSBpc1xuICAgIC8vIGVub3VnaCBzcGFjZSB0byBkcmF3IHRoZSBjaGFyYWN0ZXIgdG8gdGhlIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNlbGwgaGVpZ2h0LCBpZiBsaW5lSGVpZ2h0IGlzIG5vdCAxIHRoZW4gdGhlIHZhbHVlXG4gICAgLy8gd2lsbCBiZSBmbG9vcmVkIGJlY2F1c2Ugc2luY2UgbGluZUhlaWdodCBjYW4gbmV2ZXIgYmUgbG93ZXIgdGhlbiAxLCB0aGVyZVxuICAgIC8vIGlzIGEgZ3VhcmVudGVlIHRoYXQgdGhlIHNjYWxlZCBsaW5lIGhlaWdodCB3aWxsIGFsd2F5cyBiZSBsYXJnZXIgdGhhblxuICAgIC8vIHNjYWxlZCBjaGFyIGhlaWdodC5cbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgKiB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmxpbmVIZWlnaHQpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSB5IGNvb3JkaW5hdGUgd2l0aGluIGEgY2VsbCB0aGF0IHRleHQgc2hvdWxkIGRyYXcgZnJvbSBpblxuICAgIC8vIG9yZGVyIHRvIGRyYXcgaW4gdGhlIGNlbnRlciBvZiBhIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJUb3AgPSB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmxpbmVIZWlnaHQgPT09IDEgPyAwIDogTWF0aC5yb3VuZCgodGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQgLSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCkgLyAyKTtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGNlbGwgd2lkdGgsIHRha2luZyB0aGUgbGV0dGVyU3BhY2luZyBpbnRvIGFjY291bnQuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGggKyBNYXRoLnJvdW5kKHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMubGV0dGVyU3BhY2luZyk7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHggY29vcmRpbmF0ZSB3aXRoIGEgY2VsbCB0aGF0IHRleHQgc2hvdWxkIGRyYXcgZnJvbSBpblxuICAgIC8vIG9yZGVyIHRvIGRyYXcgaW4gdGhlIGNlbnRlciBvZiBhIGNlbGwuXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJMZWZ0ID0gTWF0aC5mbG9vcih0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmxldHRlclNwYWNpbmcgLyAyKTtcblxuICAgIC8vIFJlY2FsY3VsYXRlIHRoZSBjYW52YXMgZGltZW5zaW9uczsgc2NhbGVkKiBkZWZpbmUgdGhlIGFjdHVhbCBudW1iZXIgb2ZcbiAgICAvLyBwaXhlbCBpbiB0aGUgY2FudmFzXG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCA9IHRoaXMuX3Rlcm1pbmFsLnJvd3MgKiB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodDtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggPSB0aGlzLl90ZXJtaW5hbC5jb2xzICogdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aDtcblxuICAgIC8vIFRoZSB0aGUgc2l6ZSBvZiB0aGUgY2FudmFzIG9uIHRoZSBwYWdlLiBJdCdzIHZlcnkgaW1wb3J0YW50IHRoYXQgdGhpc1xuICAgIC8vIHJvdW5kcyB0byBuZWFyZXN0IGludGVnZXIgYW5kIG5vdCBjZWlscyBhcyBicm93c2VycyBvZnRlbiBzZXRcbiAgICAvLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyBhcyBzb21ldGhpbmcgbGlrZSAxLjEwMDAwMDAyMzg0MTg1OCwgd2hlbiBpdCdzXG4gICAgLy8gYWN0dWFsbHkgMS4xLiBDZWlsaW5nIGNhdXNlcyBibHVycmluZXNzIGFzIHRoZSBiYWNraW5nIGNhbnZhcyBpbWFnZSBpcyAxXG4gICAgLy8gcGl4ZWwgdG9vIGxhcmdlIGZvciB0aGUgY2FudmFzIGVsZW1lbnQgc2l6ZS5cbiAgICB0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0ID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0IC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoIC8gd2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuXG4gICAgLy8gR2V0IHRoZSBfYWN0dWFsXyBkaW1lbnNpb25zIG9mIGFuIGluZGl2aWR1YWwgY2VsbC4gVGhpcyBuZWVkcyB0byBiZVxuICAgIC8vIGRlcml2ZWQgZnJvbSB0aGUgY2FudmFzV2lkdGgvSGVpZ2h0IGNhbGN1bGF0ZWQgYWJvdmUgd2hpY2ggdGFrZXMgaW50b1xuICAgIC8vIGFjY291bnQgd2luZG93LmRldmljZVBpeGVsUmF0aW8uIElDaGFyU2l6ZVNlcnZpY2Uud2lkdGgvaGVpZ2h0IGJ5IGl0c2VsZlxuICAgIC8vIGlzIGluc3VmZmljaWVudCB3aGVuIHRoZSBwYWdlIGlzIG5vdCBhdCAxMDAlIHpvb20gbGV2ZWwgYXMgaXQncyBtZWFzdXJlZFxuICAgIC8vIGluIENTUyBwaXhlbHMsIGJ1dCB0aGUgYWN0dWFsIGNoYXIgc2l6ZSBvbiB0aGUgY2FudmFzIGNhbiBkaWZmZXIuXG4gICAgdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0IC8gdGhpcy5fdGVybWluYWwucm93cztcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoIC8gdGhpcy5fdGVybWluYWwuY29scztcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiBDaGFyYWN0ZXJKb2luZXJIYW5kbGVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhcmFjdGVySm9pbmVyUmVnaXN0cnkucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcik7XG4gIH1cblxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2NoYXJhY3RlckpvaW5lclJlZ2lzdHJ5LmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElSZW5kZXJlciwgSVJlbmRlckRpbWVuc2lvbnMsIENoYXJhY3RlckpvaW5lckhhbmRsZXIgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL1R5cGVzJztcbmltcG9ydCB7IElUZXJtaW5hbCB9IGZyb20gJy4uLy4uL1R5cGVzJztcbmltcG9ydCB7IEJPTERfQ0xBU1MsIElUQUxJQ19DTEFTUywgQ1VSU09SX0NMQVNTLCBDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MsIENVUlNPUl9CTElOS19DTEFTUywgQ1VSU09SX1NUWUxFX0JBUl9DTEFTUywgQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUywgRG9tUmVuZGVyZXJSb3dGYWN0b3J5IH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9kb20vRG9tUmVuZGVyZXJSb3dGYWN0b3J5JztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL2F0bGFzL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL0xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQ29sb3JTZXQsIElMaW5raWZpZXJFdmVudCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuY29uc3QgVEVSTUlOQUxfQ0xBU1NfUFJFRklYID0gJ3h0ZXJtLWRvbS1yZW5kZXJlci1vd25lci0nO1xuY29uc3QgUk9XX0NPTlRBSU5FUl9DTEFTUyA9ICd4dGVybS1yb3dzJztcbmNvbnN0IEZHX0NMQVNTX1BSRUZJWCA9ICd4dGVybS1mZy0nO1xuY29uc3QgQkdfQ0xBU1NfUFJFRklYID0gJ3h0ZXJtLWJnLSc7XG5jb25zdCBGT0NVU19DTEFTUyA9ICd4dGVybS1mb2N1cyc7XG5jb25zdCBTRUxFQ1RJT05fQ0xBU1MgPSAneHRlcm0tc2VsZWN0aW9uJztcblxubGV0IG5leHRUZXJtaW5hbElkID0gMTtcblxuLyoqXG4gKiBBIGZhbGxiYWNrIHJlbmRlcmVyIGZvciB3aGVuIGNhbnZhcyBpcyBzbG93LiBUaGlzIGlzIG5vdCBtZWFudCB0byBiZVxuICogcGFydGljdWxhcmx5IGZhc3Qgb3IgZmVhdHVyZSBjb21wbGV0ZSwgbW9yZSBqdXN0IHN0YWJsZSBhbmQgdXNhYmxlIGZvciB3aGVuXG4gKiBjYW52YXMgaXMgbm90IGFuIG9wdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIERvbVJlbmRlcmVyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElSZW5kZXJlciB7XG4gIHByaXZhdGUgX3Jvd0ZhY3Rvcnk6IERvbVJlbmRlcmVyUm93RmFjdG9yeTtcbiAgcHJpdmF0ZSBfdGVybWluYWxDbGFzczogbnVtYmVyID0gbmV4dFRlcm1pbmFsSWQrKztcblxuICBwcml2YXRlIF90aGVtZVN0eWxlRWxlbWVudDogSFRNTFN0eWxlRWxlbWVudDtcbiAgcHJpdmF0ZSBfZGltZW5zaW9uc1N0eWxlRWxlbWVudDogSFRNTFN0eWxlRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBfcm93RWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuICBwdWJsaWMgZGltZW5zaW9uczogSVJlbmRlckRpbWVuc2lvbnM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGVybWluYWw6IElUZXJtaW5hbCxcbiAgICBwcml2YXRlIF9jb2xvcnM6IElDb2xvclNldCxcbiAgICBwcml2YXRlIF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fcm93Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoUk9XX0NPTlRBSU5FUl9DTEFTUyk7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLnN0eWxlLmxpbmVIZWlnaHQgPSAnbm9ybWFsJztcbiAgICB0aGlzLl9yb3dDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgdGhpcy5fcmVmcmVzaFJvd0VsZW1lbnRzKHRoaXMuX3Rlcm1pbmFsLmNvbHMsIHRoaXMuX3Rlcm1pbmFsLnJvd3MpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFNFTEVDVElPTl9DTEFTUyk7XG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuXG4gICAgdGhpcy5kaW1lbnNpb25zID0ge1xuICAgICAgc2NhbGVkQ2hhcldpZHRoOiBudWxsLFxuICAgICAgc2NhbGVkQ2hhckhlaWdodDogbnVsbCxcbiAgICAgIHNjYWxlZENlbGxXaWR0aDogbnVsbCxcbiAgICAgIHNjYWxlZENlbGxIZWlnaHQ6IG51bGwsXG4gICAgICBzY2FsZWRDaGFyTGVmdDogbnVsbCxcbiAgICAgIHNjYWxlZENoYXJUb3A6IG51bGwsXG4gICAgICBzY2FsZWRDYW52YXNXaWR0aDogbnVsbCxcbiAgICAgIHNjYWxlZENhbnZhc0hlaWdodDogbnVsbCxcbiAgICAgIGNhbnZhc1dpZHRoOiBudWxsLFxuICAgICAgY2FudmFzSGVpZ2h0OiBudWxsLFxuICAgICAgYWN0dWFsQ2VsbFdpZHRoOiBudWxsLFxuICAgICAgYWN0dWFsQ2VsbEhlaWdodDogbnVsbFxuICAgIH07XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX2luamVjdENzcygpO1xuXG4gICAgdGhpcy5fcm93RmFjdG9yeSA9IG5ldyBEb21SZW5kZXJlclJvd0ZhY3RvcnkoZG9jdW1lbnQsIHRoaXMuX29wdGlvbnNTZXJ2aWNlKTtcblxuICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChURVJNSU5BTF9DTEFTU19QUkVGSVggKyB0aGlzLl90ZXJtaW5hbENsYXNzKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3Jvd0NvbnRhaW5lcik7XG4gICAgdGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9zZWxlY3Rpb25Db250YWluZXIpO1xuXG4gICAgdGhpcy5fdGVybWluYWwubGlua2lmaWVyLm9uTGlua0hvdmVyKGUgPT4gdGhpcy5fb25MaW5rSG92ZXIoZSkpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLmxpbmtpZmllci5vbkxpbmtMZWF2ZShlID0+IHRoaXMuX29uTGlua0xlYXZlKGUpKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShURVJNSU5BTF9DTEFTU19QUkVGSVggKyB0aGlzLl90ZXJtaW5hbENsYXNzKTtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0NvbnRhaW5lcik7XG4gICAgdGhpcy5fdGVybWluYWwuc2NyZWVuRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9zZWxlY3Rpb25Db250YWluZXIpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNjcmVlbkVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpO1xuICAgIHRoaXMuX3Rlcm1pbmFsLnNjcmVlbkVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCk7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlRGltZW5zaW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoID0gdGhpcy5fY2hhclNpemVTZXJ2aWNlLndpZHRoICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCArIE1hdGgucm91bmQodGhpcy5fdGVybWluYWwub3B0aW9ucy5sZXR0ZXJTcGFjaW5nKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQgKiB0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmxpbmVIZWlnaHQpO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdCA9IDA7XG4gICAgdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJUb3AgPSAwO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aCA9IHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGggKiB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgIHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQgPSB0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCAqIHRoaXMuX3Rlcm1pbmFsLnJvd3M7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoID0gTWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGggLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoID0gdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoIC8gdGhpcy5fdGVybWluYWwuY29scztcbiAgICB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCA9IHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQgLyB0aGlzLl90ZXJtaW5hbC5yb3dzO1xuXG4gICAgdGhpcy5fcm93RWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGh9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgICBlbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSBgJHt0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgICAvLyBNYWtlIHN1cmUgcm93cyBkb24ndCBvdmVyZmxvdyBvbnRvIGZvbGxvd2luZyByb3dcbiAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCkge1xuICAgICAgdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlcyA9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9IHNwYW4ge2AgK1xuICAgICAgICBgIGRpc3BsYXk6IGlubGluZS1ibG9jaztgICtcbiAgICAgICAgYCBoZWlnaHQ6IDEwMCU7YCArXG4gICAgICAgIGAgdmVydGljYWwtYWxpZ246IHRvcDtgICtcbiAgICAgICAgYCB3aWR0aDogJHt0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRofXB4YCArXG4gICAgICAgIGB9YDtcblxuICAgIHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQuaW5uZXJIVE1MID0gc3R5bGVzO1xuXG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICg8YW55PnRoaXMuX3Rlcm1pbmFsKS5fdmlld3BvcnRFbGVtZW50LnN0eWxlLmhlaWdodDtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRofXB4YDtcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHR9cHhgO1xuICB9XG5cbiAgcHVibGljIHNldENvbG9ycyhjb2xvcnM6IElDb2xvclNldCk6IHZvaWQge1xuICAgIHRoaXMuX2NvbG9ycyA9IGNvbG9ycztcbiAgICB0aGlzLl9pbmplY3RDc3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2luamVjdENzcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3RoZW1lU3R5bGVFbGVtZW50KSB7XG4gICAgICB0aGlzLl90aGVtZVN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBCYXNlIENTU1xuICAgIGxldCBzdHlsZXMgPVxuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfSB7YCArXG4gICAgICAgIGAgY29sb3I6ICR7dGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzfTtgICtcbiAgICAgICAgYCBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzc307YCArXG4gICAgICAgIGAgZm9udC1mYW1pbHk6ICR7dGhpcy5fdGVybWluYWwub3B0aW9ucy5mb250RmFtaWx5fTtgICtcbiAgICAgICAgYCBmb250LXNpemU6ICR7dGhpcy5fdGVybWluYWwub3B0aW9ucy5mb250U2l6ZX1weDtgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIFRleHQgc3R5bGVzXG4gICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IHNwYW46bm90KC4ke0JPTERfQ0xBU1N9KSB7YCArXG4gICAgICAgIGAgZm9udC13ZWlnaHQ6ICR7dGhpcy5fdGVybWluYWwub3B0aW9ucy5mb250V2VpZ2h0fTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbi4ke0JPTERfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBmb250LXdlaWdodDogJHt0aGlzLl90ZXJtaW5hbC5vcHRpb25zLmZvbnRXZWlnaHRCb2xkfTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbi4ke0lUQUxJQ19DTEFTU30ge2AgK1xuICAgICAgICBgIGZvbnQtc3R5bGU6IGl0YWxpYztgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIEJsaW5rIGFuaW1hdGlvblxuICAgIHN0eWxlcyArPVxuICAgICAgICBgQGtleWZyYW1lcyBibGlua19ib3hfc2hhZG93IHtgICtcbiAgICAgICAgYCA1MCUge2AgK1xuICAgICAgICBgICBib3gtc2hhZG93OiBub25lO2AgK1xuICAgICAgICBgIH1gICtcbiAgICAgICAgYH1gO1xuICAgIHN0eWxlcyArPVxuICAgICAgICBgQGtleWZyYW1lcyBibGlua19ibG9jayB7YCArXG4gICAgICAgIGAgMCUge2AgK1xuICAgICAgICBgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfTtgICtcbiAgICAgICAgYCAgY29sb3I6ICR7dGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3N9O2AgK1xuICAgICAgICBgIH1gICtcbiAgICAgICAgYCA1MCUge2AgK1xuICAgICAgICBgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzfTtgICtcbiAgICAgICAgYCAgY29sb3I6ICR7dGhpcy5fY29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgICBgIH1gICtcbiAgICAgICAgYH1gO1xuICAgIC8vIEN1cnNvclxuICAgIHN0eWxlcyArPVxuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfTpub3QoLiR7Rk9DVVNfQ0xBU1N9KSAuJHtDVVJTT1JfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBvdXRsaW5lOiAxcHggc29saWQgJHt0aGlzLl9jb2xvcnMuY3Vyc29yLmNzc307YCArXG4gICAgICAgIGAgb3V0bGluZS1vZmZzZXQ6IC0xcHg7YCArXG4gICAgICAgIGB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9LiR7Rk9DVVNfQ0xBU1N9IC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfQkxJTktfQ0xBU1N9Om5vdCguJHtDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9KSB7YCArXG4gICAgICAgIGAgYW5pbWF0aW9uOiBibGlua19ib3hfc2hhZG93IDFzIHN0ZXAtZW5kIGluZmluaXRlO2AgK1xuICAgICAgICBgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfS4ke0ZPQ1VTX0NMQVNTfSAuJHtDVVJTT1JfQ0xBU1N9LiR7Q1VSU09SX0JMSU5LX0NMQVNTfS4ke0NVUlNPUl9TVFlMRV9CTE9DS19DTEFTU30ge2AgK1xuICAgICAgICBgIGFuaW1hdGlvbjogYmxpbmtfYmxvY2sgMXMgc3RlcC1lbmQgaW5maW5pdGU7YCArXG4gICAgICAgIGB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9LiR7Rk9DVVNfQ0xBU1N9IC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfTtgICtcbiAgICAgICAgYCBjb2xvcjogJHt0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzc307YCArXG4gICAgICAgIGB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9LiR7Rk9DVVNfQ0xBU1N9IC4ke0NVUlNPUl9DTEFTU30uJHtDVVJTT1JfU1RZTEVfQkFSX0NMQVNTfSB7YCArXG4gICAgICAgIGAgYm94LXNoYWRvdzogMXB4IDAgMCAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfSBpbnNldDtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30uJHtGT0NVU19DTEFTU30gLiR7Q1VSU09SX0NMQVNTfS4ke0NVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1N9IHtgICtcbiAgICAgICAgYCBib3gtc2hhZG93OiAwIC0xcHggMCAke3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzfSBpbnNldDtgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIFNlbGVjdGlvblxuICAgIHN0eWxlcyArPVxuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtTRUxFQ1RJT05fQ0xBU1N9IHtgICtcbiAgICAgICAgYCBwb3NpdGlvbjogYWJzb2x1dGU7YCArXG4gICAgICAgIGAgdG9wOiAwO2AgK1xuICAgICAgICBgIGxlZnQ6IDA7YCArXG4gICAgICAgIGAgei1pbmRleDogMTtgICtcbiAgICAgICAgYCBwb2ludGVyLWV2ZW50czogbm9uZTtgICtcbiAgICAgICAgYH1gICtcbiAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7U0VMRUNUSU9OX0NMQVNTfSBkaXYge2AgK1xuICAgICAgICBgIHBvc2l0aW9uOiBhYnNvbHV0ZTtgICtcbiAgICAgICAgYCBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuX2NvbG9ycy5zZWxlY3Rpb24uY3NzfTtgICtcbiAgICAgICAgYH1gO1xuICAgIC8vIENvbG9yc1xuICAgIHRoaXMuX2NvbG9ycy5hbnNpLmZvckVhY2goKGMsIGkpID0+IHtcbiAgICAgIHN0eWxlcyArPVxuICAgICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke2l9IHsgY29sb3I6ICR7Yy5jc3N9OyB9YCArXG4gICAgICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7QkdfQ0xBU1NfUFJFRklYfSR7aX0geyBiYWNrZ3JvdW5kLWNvbG9yOiAke2MuY3NzfTsgfWA7XG4gICAgfSk7XG4gICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9IHsgY29sb3I6ICR7dGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzfTsgfWAgK1xuICAgICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtCR19DTEFTU19QUkVGSVh9JHtJTlZFUlRFRF9ERUZBVUxUX0NPTE9SfSB7IGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzfTsgfWA7XG5cbiAgICB0aGlzLl90aGVtZVN0eWxlRWxlbWVudC5pbm5lckhUTUwgPSBzdHlsZXM7XG4gIH1cblxuICBwdWJsaWMgb25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dFbGVtZW50cyhjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEFkZCBtaXNzaW5nIGVsZW1lbnRzXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aDsgaSA8PSByb3dzOyBpKyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICB0aGlzLl9yb3dFbGVtZW50cy5wdXNoKHJvdyk7XG4gICAgfVxuICAgIC8vIFJlbW92ZSBleGNlc3MgZWxlbWVudHNcbiAgICB3aGlsZSAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID4gcm93cykge1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgb25SZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZWZyZXNoUm93RWxlbWVudHMoY29scywgcm93cyk7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICB9XG5cbiAgcHVibGljIG9uQ2hhclNpemVDaGFuZ2VkKCk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgfVxuXG4gIHB1YmxpYyBvbkJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoRk9DVVNfQ0xBU1MpO1xuICB9XG5cbiAgcHVibGljIG9uRm9jdXMoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoRk9DVVNfQ0xBU1MpO1xuICB9XG5cbiAgcHVibGljIG9uU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGFsbCBzZWxlY3Rpb25zXG4gICAgd2hpbGUgKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuY2hpbGRyZW5bMF0pO1xuICAgIH1cblxuICAgIC8vIFNlbGVjdGlvbiBkb2VzIG5vdCBleGlzdFxuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyYW5zbGF0ZSBmcm9tIGJ1ZmZlciBwb3NpdGlvbiB0byB2aWV3cG9ydCBwb3NpdGlvblxuICAgIGNvbnN0IHZpZXdwb3J0U3RhcnRSb3cgPSBzdGFydFsxXSAtIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydEVuZFJvdyA9IGVuZFsxXSAtIHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gTWF0aC5tYXgodmlld3BvcnRTdGFydFJvdywgMCk7XG4gICAgY29uc3Qgdmlld3BvcnRDYXBwZWRFbmRSb3cgPSBNYXRoLm1pbih2aWV3cG9ydEVuZFJvdywgdGhpcy5fdGVybWluYWwucm93cyAtIDEpO1xuXG4gICAgLy8gTm8gbmVlZCB0byBkcmF3IHRoZSBzZWxlY3Rpb25cbiAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyA+PSB0aGlzLl90ZXJtaW5hbC5yb3dzIHx8IHZpZXdwb3J0Q2FwcGVkRW5kUm93IDwgMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgc2VsZWN0aW9uc1xuICAgIGNvbnN0IGRvY3VtZW50RnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICBpZiAoY29sdW1uU2VsZWN0TW9kZSkge1xuICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZChcbiAgICAgICAgdGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudCh2aWV3cG9ydENhcHBlZFN0YXJ0Um93LCBzdGFydFswXSwgZW5kWzBdLCB2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gdmlld3BvcnRTdGFydFJvdyA9PT0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyA/IHN0YXJ0WzBdIDogMDtcbiAgICAgIGNvbnN0IGVuZENvbCA9IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gZW5kWzBdIDogdGhpcy5fdGVybWluYWwuY29scztcbiAgICAgIGRvY3VtZW50RnJhZ21lbnQuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudCh2aWV3cG9ydENhcHBlZFN0YXJ0Um93LCBzdGFydENvbCwgZW5kQ29sKSk7XG4gICAgICAvLyBEcmF3IG1pZGRsZSByb3dzXG4gICAgICBjb25zdCBtaWRkbGVSb3dzQ291bnQgPSB2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgLSAxO1xuICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxLCAwLCB0aGlzLl90ZXJtaW5hbC5jb2xzLCBtaWRkbGVSb3dzQ291bnQpKTtcbiAgICAgIC8vIERyYXcgZmluYWwgcm93XG4gICAgICBpZiAodmlld3BvcnRDYXBwZWRTdGFydFJvdyAhPT0gdmlld3BvcnRDYXBwZWRFbmRSb3cpIHtcbiAgICAgICAgLy8gT25seSBkcmF3IHZpZXdwb3J0RW5kUm93IGlmIGl0J3Mgbm90IHRoZSBzYW1lIGFzIHZpZXdwb3J0dGFydFJvd1xuICAgICAgICBjb25zdCBlbmRDb2wgPSB2aWV3cG9ydEVuZFJvdyA9PT0gdmlld3BvcnRDYXBwZWRFbmRSb3cgPyBlbmRbMF0gOiB0aGlzLl90ZXJtaW5hbC5jb2xzO1xuICAgICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQodmlld3BvcnRDYXBwZWRFbmRSb3csIDAsIGVuZENvbCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnRGcmFnbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNlbGVjdGlvbiBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSByb3cgVGhlIHJvdyBvZiB0aGUgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gY29sU3RhcnQgVGhlIHN0YXJ0IGNvbHVtbi5cbiAgICogQHBhcmFtIGNvbEVuZCBUaGUgZW5kIGNvbHVtbnMuXG4gICAqL1xuICBwcml2YXRlIF9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHJvdzogbnVtYmVyLCBjb2xTdGFydDogbnVtYmVyLCBjb2xFbmQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlciA9IDEpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7cm93Q291bnQgKiB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgZWxlbWVudC5zdHlsZS50b3AgPSBgJHtyb3cgKiB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodH1weGA7XG4gICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7Y29sU3RhcnQgKiB0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRofXB4YDtcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCAqIChjb2xFbmQgLSBjb2xTdGFydCl9cHhgO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHVibGljIG9uQ3Vyc29yTW92ZSgpOiB2b2lkIHtcbiAgICAvLyBOby1vcCwgdGhlIGN1cnNvciBpcyBkcmF3biB3aGVuIHJvd3MgYXJlIGRyYXduXG4gIH1cblxuICBwdWJsaWMgb25PcHRpb25zQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICAvLyBGb3JjZSBhIHJlZnJlc2hcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5faW5qZWN0Q3NzKCk7XG4gICAgdGhpcy5fdGVybWluYWwucmVmcmVzaCgwLCB0aGlzLl90ZXJtaW5hbC5yb3dzIC0gMSk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcm93RWxlbWVudHMuZm9yRWFjaChlID0+IGUuaW5uZXJIVE1MID0gJycpO1xuICB9XG5cbiAgcHVibGljIHJlbmRlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0ZXJtaW5hbCA9IHRoaXMuX3Rlcm1pbmFsO1xuXG4gICAgY29uc3QgY3Vyc29yQWJzb2x1dGVZID0gdGVybWluYWwuYnVmZmVyLnliYXNlICsgdGVybWluYWwuYnVmZmVyLnk7XG4gICAgY29uc3QgY3Vyc29yWCA9IHRoaXMuX3Rlcm1pbmFsLmJ1ZmZlci54O1xuICAgIGNvbnN0IGN1cnNvckJsaW5rID0gdGhpcy5fdGVybWluYWwub3B0aW9ucy5jdXJzb3JCbGluaztcblxuICAgIGZvciAobGV0IHkgPSBzdGFydDsgeSA8PSBlbmQ7IHkrKykge1xuICAgICAgY29uc3Qgcm93RWxlbWVudCA9IHRoaXMuX3Jvd0VsZW1lbnRzW3ldO1xuICAgICAgcm93RWxlbWVudC5pbm5lckhUTUwgPSAnJztcblxuICAgICAgY29uc3Qgcm93ID0geSArIHRlcm1pbmFsLmJ1ZmZlci55ZGlzcDtcbiAgICAgIGNvbnN0IGxpbmVEYXRhID0gdGVybWluYWwuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgICAgY29uc3QgY3Vyc29yU3R5bGUgPSB0ZXJtaW5hbC5vcHRpb25zLmN1cnNvclN0eWxlO1xuICAgICAgcm93RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9yb3dGYWN0b3J5LmNyZWF0ZVJvdyhsaW5lRGF0YSwgcm93ID09PSBjdXJzb3JBYnNvbHV0ZVksIGN1cnNvclN0eWxlLCBjdXJzb3JYLCBjdXJzb3JCbGluaywgdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCwgdGVybWluYWwuY29scykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IF90ZXJtaW5hbFNlbGVjdG9yKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAuJHtURVJNSU5BTF9DTEFTU19QUkVGSVh9JHt0aGlzLl90ZXJtaW5hbENsYXNzfWA7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcjogQ2hhcmFjdGVySm9pbmVySGFuZGxlcik6IG51bWJlciB7IHJldHVybiAtMTsgfVxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbiB7IHJldHVybiBmYWxzZTsgfVxuXG4gIHByaXZhdGUgX29uTGlua0hvdmVyKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSwgZS54MiwgZS55MSwgZS55MiwgZS5jb2xzLCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uTGlua0xlYXZlKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSwgZS54MiwgZS55MSwgZS55MiwgZS5jb2xzLCBmYWxzZSk7XG4gIH1cblxuICBwcml2YXRlIF9zZXRDZWxsVW5kZXJsaW5lKHg6IG51bWJlciwgeDI6IG51bWJlciwgeTogbnVtYmVyLCB5MjogbnVtYmVyLCBjb2xzOiBudW1iZXIsIGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB3aGlsZSAoeCAhPT0geDIgfHwgeSAhPT0geTIpIHtcbiAgICAgIGNvbnN0IHJvdyA9IHRoaXMuX3Jvd0VsZW1lbnRzW3ldO1xuICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BhbiA9IDxIVE1MRWxlbWVudD5yb3cuY2hpbGRyZW5beF07XG4gICAgICBpZiAoc3Bhbikge1xuICAgICAgICBzcGFuLnN0eWxlLnRleHREZWNvcmF0aW9uID0gZW5hYmxlZCA/ICd1bmRlcmxpbmUnIDogJ25vbmUnO1xuICAgICAgfVxuICAgICAgaWYgKCsreCA+PSBjb2xzKSB7XG4gICAgICAgIHggPSAwO1xuICAgICAgICB5Kys7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9